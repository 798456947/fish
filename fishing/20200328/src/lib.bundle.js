/*! For license information please see lib.bundle.js.LICENSE.txt?v6 */
!function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="//static.vuasanca.vn/fishing/20200328/src/",i(i.s=40)}([,,,function(t,e){var i;i=function(){return this}();try{i=i||new Function("return this")()}catch(t){"object"==typeof window&&(i=window)}t.exports=i},,,,,,,,,function(t,e,i){(function(i){var r,n=t.exports&&void 0!==i?i:this||window;(n._gsQueue||(n._gsQueue=[])).push((function(){"use strict";var t,e,i,r,o,s,a,l,h,u,c,p,f,d;n._gsDefine("TweenMax",["core.Animation","core.SimpleTimeline","TweenLite"],(function(t,e,i){var r=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},n=function(t,e,i){var r,n,o=t.cycle;for(r in o)n=o[r],t[r]="function"==typeof n?n(i,e[i]):n[i%n.length];delete t.cycle},o=function(t,e,r){i.call(this,t,e,r),this._cycle=0,this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._repeat&&this._uncache(!0),this.render=o.prototype.render},s=i._internals,a=s.isSelector,l=s.isArray,h=o.prototype=i.to({},.1,{}),u=[];o.version="1.20.3",h.constructor=o,h.kill()._gc=!1,o.killTweensOf=o.killDelayedCallsTo=i.killTweensOf,o.getTweensOf=i.getTweensOf,o.lagSmoothing=i.lagSmoothing,o.ticker=i.ticker,o.render=i.render,h.invalidate=function(){return this._yoyo=!0===this.vars.yoyo||!!this.vars.yoyoEase,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._yoyoEase=null,this._uncache(!0),i.prototype.invalidate.call(this)},h.updateTo=function(t,e){var r,n=this.ratio,o=this.vars.immediateRender||t.immediateRender;for(r in e&&this._startTime<this._timeline._time&&(this._startTime=this._timeline._time,this._uncache(!1),this._gc?this._enabled(!0,!1):this._timeline.insert(this,this._startTime-this._delay)),t)this.vars[r]=t[r];if(this._initted||o)if(e)this._initted=!1,o&&this.render(0,!0,!0);else if(this._gc&&this._enabled(!0,!1),this._notifyPluginsOfEnabled&&this._firstPT&&i._onPluginEvent("_onDisable",this),this._time/this._duration>.998){var s=this._totalTime;this.render(0,!0,!1),this._initted=!1,this.render(s,!0,!1)}else if(this._initted=!1,this._init(),this._time>0||o)for(var a,l=1/(1-n),h=this._firstPT;h;)a=h.s+h.c,h.c*=l,h.s=a-h.c,h=h._next;return this},h.render=function(t,e,r){this._initted||0===this._duration&&this.vars.repeat&&this.invalidate();var n,o,a,l,h,u,c,p,f,d=this._dirty?this.totalDuration():this._totalDuration,g=this._time,m=this._totalTime,v=this._cycle,y=this._duration,_=this._rawPrevTime;if(t>=d-1e-7&&t>=0?(this._totalTime=d,this._cycle=this._repeat,this._yoyo&&0!=(1&this._cycle)?(this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0):(this._time=y,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1),this._reversed||(n=!0,o="onComplete",r=r||this._timeline.autoRemoveChildren),0===y&&(this._initted||!this.vars.lazy||r)&&(this._startTime===this._timeline._duration&&(t=0),(_<0||t<=0&&t>=-1e-7||1e-10===_&&"isPause"!==this.data)&&_!==t&&(r=!0,_>1e-10&&(o="onReverseComplete")),this._rawPrevTime=p=!e||t||_===t?t:1e-10)):t<1e-7?(this._totalTime=this._time=this._cycle=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==m||0===y&&_>0)&&(o="onReverseComplete",n=this._reversed),t<0&&(this._active=!1,0===y&&(this._initted||!this.vars.lazy||r)&&(_>=0&&(r=!0),this._rawPrevTime=p=!e||t||_===t?t:1e-10)),this._initted||(r=!0)):(this._totalTime=this._time=t,0!==this._repeat&&(l=y+this._repeatDelay,this._cycle=this._totalTime/l>>0,0!==this._cycle&&this._cycle===this._totalTime/l&&m<=t&&this._cycle--,this._time=this._totalTime-this._cycle*l,this._yoyo&&0!=(1&this._cycle)&&(this._time=y-this._time,(f=this._yoyoEase||this.vars.yoyoEase)&&(this._yoyoEase||(!0!==f||this._initted?this._yoyoEase=f=!0===f?this._ease:f instanceof Ease?f:Ease.map[f]:(f=this.vars.ease,this._yoyoEase=f=f?f instanceof Ease?f:"function"==typeof f?new Ease(f,this.vars.easeParams):Ease.map[f]||i.defaultEase:i.defaultEase)),this.ratio=f?1-f.getRatio((y-this._time)/y):0)),this._time>y?this._time=y:this._time<0&&(this._time=0)),this._easeType&&!f?(h=this._time/y,(1===(u=this._easeType)||3===u&&h>=.5)&&(h=1-h),3===u&&(h*=2),1===(c=this._easePower)?h*=h:2===c?h*=h*h:3===c?h*=h*h*h:4===c&&(h*=h*h*h*h),1===u?this.ratio=1-h:2===u?this.ratio=h:this._time/y<.5?this.ratio=h/2:this.ratio=1-h/2):f||(this.ratio=this._ease.getRatio(this._time/y))),g!==this._time||r||v!==this._cycle){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!r&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=g,this._totalTime=m,this._rawPrevTime=_,this._cycle=v,s.lazyTweens.push(this),void(this._lazy=[t,e]);!this._time||n||f?n&&this._ease._calcEnd&&!f&&(this.ratio=this._ease.getRatio(0===this._time?0:1)):this.ratio=this._ease.getRatio(this._time/y)}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==g&&t>=0&&(this._active=!0),0===m&&(2===this._initted&&t>0&&this._init(),this._startAt&&(t>=0?this._startAt.render(t,!0,r):o||(o="_dummyGS")),this.vars.onStart&&(0===this._totalTime&&0!==y||e||this._callback("onStart"))),a=this._firstPT;a;)a.f?a.t[a.p](a.c*this.ratio+a.s):a.t[a.p]=a.c*this.ratio+a.s,a=a._next;this._onUpdate&&(t<0&&this._startAt&&this._startTime&&this._startAt.render(t,!0,r),e||(this._totalTime!==m||o)&&this._callback("onUpdate")),this._cycle!==v&&(e||this._gc||this.vars.onRepeat&&this._callback("onRepeat")),o&&(this._gc&&!r||(t<0&&this._startAt&&!this._onUpdate&&this._startTime&&this._startAt.render(t,!0,r),n&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[o]&&this._callback(o),0===y&&1e-10===this._rawPrevTime&&1e-10!==p&&(this._rawPrevTime=0)))}else m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},o.to=function(t,e,i){return new o(t,e,i)},o.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new o(t,e,i)},o.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new o(t,e,r)},o.staggerTo=o.allTo=function(t,e,s,h,c,p,f){h=h||0;var d,g,m,v,y=0,_=[],x=function(){s.onComplete&&s.onComplete.apply(s.onCompleteScope||this,arguments),c.apply(f||s.callbackScope||this,p||u)},b=s.cycle,T=s.startAt&&s.startAt.cycle;for(l(t)||("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=r(t))),t=t||[],h<0&&((t=r(t)).reverse(),h*=-1),d=t.length-1,m=0;m<=d;m++){for(v in g={},s)g[v]=s[v];if(b&&(n(g,t,m),null!=g.duration&&(e=g.duration,delete g.duration)),T){for(v in T=g.startAt={},s.startAt)T[v]=s.startAt[v];n(g.startAt,t,m)}g.delay=y+(g.delay||0),m===d&&c&&(g.onComplete=x),_[m]=new o(t[m],e,g),y+=h}return _},o.staggerFrom=o.allFrom=function(t,e,i,r,n,s,a){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,o.staggerTo(t,e,i,r,n,s,a)},o.staggerFromTo=o.allFromTo=function(t,e,i,r,n,s,a,l){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,o.staggerTo(t,e,r,n,s,a,l)},o.delayedCall=function(t,e,i,r,n){return new o(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,useFrames:n,overwrite:0})},o.set=function(t,e){return new o(t,0,e)},o.isTweening=function(t){return i.getTweensOf(t,!0).length>0};var c=function(t,e){for(var r=[],n=0,o=t._first;o;)o instanceof i?r[n++]=o:(e&&(r[n++]=o),n=(r=r.concat(c(o,e))).length),o=o._next;return r},p=o.getAllTweens=function(e){return c(t._rootTimeline,e).concat(c(t._rootFramesTimeline,e))};o.killAll=function(t,i,r,n){null==i&&(i=!0),null==r&&(r=!0);var o,s,a,l=p(0!=n),h=l.length,u=i&&r&&n;for(a=0;a<h;a++)s=l[a],(u||s instanceof e||(o=s.target===s.vars.onComplete)&&r||i&&!o)&&(t?s.totalTime(s._reversed?0:s.totalDuration()):s._enabled(!1,!1))},o.killChildTweensOf=function(t,e){if(null!=t){var n,h,u,c,p,f=s.tweenLookup;if("string"==typeof t&&(t=i.selector(t)||t),a(t)&&(t=r(t)),l(t))for(c=t.length;--c>-1;)o.killChildTweensOf(t[c],e);else{for(u in n=[],f)for(h=f[u].target.parentNode;h;)h===t&&(n=n.concat(f[u].tweens)),h=h.parentNode;for(p=n.length,c=0;c<p;c++)e&&n[c].totalTime(n[c].totalDuration()),n[c]._enabled(!1,!1)}}};var f=function(t,i,r,n){i=!1!==i,r=!1!==r;for(var o,s,a=p(n=!1!==n),l=i&&r&&n,h=a.length;--h>-1;)s=a[h],(l||s instanceof e||(o=s.target===s.vars.onComplete)&&r||i&&!o)&&s.paused(t)};return o.pauseAll=function(t,e,i){f(!0,t,e,i)},o.resumeAll=function(t,e,i){f(!1,t,e,i)},o.globalTimeScale=function(e){var r=t._rootTimeline,n=i.ticker.time;return arguments.length?(e=e||1e-10,r._startTime=n-(n-r._startTime)*r._timeScale/e,r=t._rootFramesTimeline,n=i.ticker.frame,r._startTime=n-(n-r._startTime)*r._timeScale/e,r._timeScale=t._rootTimeline._timeScale=e,e):r._timeScale},h.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()},h.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()},h.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},h.duration=function(e){return arguments.length?t.prototype.duration.call(this,e):this._duration},h.totalDuration=function(t){return arguments.length?-1===this._repeat?this:this.duration((t-this._repeat*this._repeatDelay)/(this._repeat+1)):(this._dirty&&(this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat,this._dirty=!1),this._totalDuration)},h.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},h.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},h.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},o}),!0),n._gsDefine("TimelineLite",["core.Animation","core.SimpleTimeline","TweenLite"],(function(t,e,i){var r=function(t){e.call(this,t),this._labels={},this.autoRemoveChildren=!0===this.vars.autoRemoveChildren,this.smoothChildTiming=!0===this.vars.smoothChildTiming,this._sortChildren=!0,this._onUpdate=this.vars.onUpdate;var i,r,n=this.vars;for(r in n)i=n[r],l(i)&&-1!==i.join("").indexOf("{self}")&&(n[r]=this._swapSelfInParams(i));l(n.tweens)&&this.add(n.tweens,0,n.align,n.stagger)},o=i._internals,s=r._internals={},a=o.isSelector,l=o.isArray,h=o.lazyTweens,u=o.lazyRender,c=n._gsDefine.globals,p=function(t){var e,i={};for(e in t)i[e]=t[e];return i},f=function(t,e,i){var r,n,o=t.cycle;for(r in o)n=o[r],t[r]="function"==typeof n?n(i,e[i]):n[i%n.length];delete t.cycle},d=s.pauseCallback=function(){},g=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},m=r.prototype=new e;return r.version="1.20.3",m.constructor=r,m.kill()._gc=m._forcingPlayhead=m._hasPause=!1,m.to=function(t,e,r,n){var o=r.repeat&&c.TweenMax||i;return e?this.add(new o(t,e,r),n):this.set(t,r,n)},m.from=function(t,e,r,n){return this.add((r.repeat&&c.TweenMax||i).from(t,e,r),n)},m.fromTo=function(t,e,r,n,o){var s=n.repeat&&c.TweenMax||i;return e?this.add(s.fromTo(t,e,r,n),o):this.set(t,n,o)},m.staggerTo=function(t,e,n,o,s,l,h,u){var c,d,m=new r({onComplete:l,onCompleteParams:h,callbackScope:u,smoothChildTiming:this.smoothChildTiming}),v=n.cycle;for("string"==typeof t&&(t=i.selector(t)||t),a(t=t||[])&&(t=g(t)),(o=o||0)<0&&((t=g(t)).reverse(),o*=-1),d=0;d<t.length;d++)(c=p(n)).startAt&&(c.startAt=p(c.startAt),c.startAt.cycle&&f(c.startAt,t,d)),v&&(f(c,t,d),null!=c.duration&&(e=c.duration,delete c.duration)),m.to(t[d],e,c,d*o);return this.add(m,s)},m.staggerFrom=function(t,e,i,r,n,o,s,a){return i.immediateRender=0!=i.immediateRender,i.runBackwards=!0,this.staggerTo(t,e,i,r,n,o,s,a)},m.staggerFromTo=function(t,e,i,r,n,o,s,a,l){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,this.staggerTo(t,e,r,n,o,s,a,l)},m.call=function(t,e,r,n){return this.add(i.delayedCall(0,t,e,r),n)},m.set=function(t,e,r){return r=this._parseTimeOrLabel(r,0,!0),null==e.immediateRender&&(e.immediateRender=r===this._time&&!this._paused),this.add(new i(t,0,e),r)},r.exportRoot=function(t,e){null==(t=t||{}).smoothChildTiming&&(t.smoothChildTiming=!0);var n,o,s,a,l=new r(t),h=l._timeline;for(null==e&&(e=!0),h._remove(l,!0),l._startTime=0,l._rawPrevTime=l._time=l._totalTime=h._time,s=h._first;s;)a=s._next,e&&s instanceof i&&s.target===s.vars.onComplete||((o=s._startTime-s._delay)<0&&(n=1),l.add(s,o)),s=a;return h.add(l,0),n&&l.totalDuration(),l},m.add=function(n,o,s,a){var h,u,c,p,f,d;if("number"!=typeof o&&(o=this._parseTimeOrLabel(o,0,!0,n)),!(n instanceof t)){if(n instanceof Array||n&&n.push&&l(n)){for(s=s||"normal",a=a||0,h=o,u=n.length,c=0;c<u;c++)l(p=n[c])&&(p=new r({tweens:p})),this.add(p,h),"string"!=typeof p&&"function"!=typeof p&&("sequence"===s?h=p._startTime+p.totalDuration()/p._timeScale:"start"===s&&(p._startTime-=p.delay())),h+=a;return this._uncache(!0)}if("string"==typeof n)return this.addLabel(n,o);if("function"!=typeof n)throw"Cannot add "+n+" into the timeline; it is not a tween, timeline, function, or string.";n=i.delayedCall(0,n)}if(e.prototype.add.call(this,n,o),n._time&&n.render((this.rawTime()-n._startTime)*n._timeScale,!1,!1),(this._gc||this._time===this._duration)&&!this._paused&&this._duration<this.duration())for(d=(f=this).rawTime()>n._startTime;f._timeline;)d&&f._timeline.smoothChildTiming?f.totalTime(f._totalTime,!0):f._gc&&f._enabled(!0,!1),f=f._timeline;return this},m.remove=function(e){if(e instanceof t){this._remove(e,!1);var i=e._timeline=e.vars.useFrames?t._rootFramesTimeline:t._rootTimeline;return e._startTime=(e._paused?e._pauseTime:i._time)-(e._reversed?e.totalDuration()-e._totalTime:e._totalTime)/e._timeScale,this}if(e instanceof Array||e&&e.push&&l(e)){for(var r=e.length;--r>-1;)this.remove(e[r]);return this}return"string"==typeof e?this.removeLabel(e):this.kill(null,e)},m._remove=function(t,i){return e.prototype._remove.call(this,t,i),this._last?this._time>this.duration()&&(this._time=this._duration,this._totalTime=this._totalDuration):this._time=this._totalTime=this._duration=this._totalDuration=0,this},m.append=function(t,e){return this.add(t,this._parseTimeOrLabel(null,e,!0,t))},m.insert=m.insertMultiple=function(t,e,i,r){return this.add(t,e||0,i,r)},m.appendMultiple=function(t,e,i,r){return this.add(t,this._parseTimeOrLabel(null,e,!0,t),i,r)},m.addLabel=function(t,e){return this._labels[t]=this._parseTimeOrLabel(e),this},m.addPause=function(t,e,r,n){var o=i.delayedCall(0,d,r,n||this);return o.vars.onComplete=o.vars.onReverseComplete=e,o.data="isPause",this._hasPause=!0,this.add(o,t)},m.removeLabel=function(t){return delete this._labels[t],this},m.getLabelTime=function(t){return null!=this._labels[t]?this._labels[t]:-1},m._parseTimeOrLabel=function(e,i,r,n){var o,s;if(n instanceof t&&n.timeline===this)this.remove(n);else if(n&&(n instanceof Array||n.push&&l(n)))for(s=n.length;--s>-1;)n[s]instanceof t&&n[s].timeline===this&&this.remove(n[s]);if(o="number"!=typeof e||i?this.duration()>99999999999?this.recent().endTime(!1):this._duration:0,"string"==typeof i)return this._parseTimeOrLabel(i,r&&"number"==typeof e&&null==this._labels[i]?e-o:0,r);if(i=i||0,"string"!=typeof e||!isNaN(e)&&null==this._labels[e])null==e&&(e=o);else{if(-1===(s=e.indexOf("=")))return null==this._labels[e]?r?this._labels[e]=o+i:i:this._labels[e]+i;i=parseInt(e.charAt(s-1)+"1",10)*Number(e.substr(s+1)),e=s>1?this._parseTimeOrLabel(e.substr(0,s-1),0,r):o}return Number(e)+i},m.seek=function(t,e){return this.totalTime("number"==typeof t?t:this._parseTimeOrLabel(t),!1!==e)},m.stop=function(){return this.paused(!0)},m.gotoAndPlay=function(t,e){return this.play(t,e)},m.gotoAndStop=function(t,e){return this.pause(t,e)},m.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,n,o,s,a,l,c,p=this._time,f=this._dirty?this.totalDuration():this._totalDuration,d=this._startTime,g=this._timeScale,m=this._paused;if(p!==this._time&&(t+=this._time-p),t>=f-1e-7&&t>=0)this._totalTime=this._time=f,this._reversed||this._hasPausedChild()||(n=!0,s="onComplete",a=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||this._rawPrevTime<0||1e-10===this._rawPrevTime)&&this._rawPrevTime!==t&&this._first&&(a=!0,this._rawPrevTime>1e-10&&(s="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,t=f+1e-4;else if(t<1e-7)if(this._totalTime=this._time=0,(0!==p||0===this._duration&&1e-10!==this._rawPrevTime&&(this._rawPrevTime>0||t<0&&this._rawPrevTime>=0))&&(s="onReverseComplete",n=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(a=n=!0,s="onReverseComplete"):this._rawPrevTime>=0&&this._first&&(a=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;t=0,this._initted||(a=!0)}else{if(this._hasPause&&!this._forcingPlayhead&&!e){if(t>=p)for(r=this._first;r&&r._startTime<=t&&!l;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(l=r),r=r._next;else for(r=this._last;r&&r._startTime>=t&&!l;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(l=r),r=r._prev;l&&(this._time=t=l._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}this._totalTime=this._time=this._rawPrevTime=t}if(this._time!==p&&this._first||i||a||l){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._time!==p&&t>0&&(this._active=!0),0===p&&this.vars.onStart&&(0===this._time&&this._duration||e||this._callback("onStart")),(c=this._time)>=p)for(r=this._first;r&&(o=r._next,c===this._time&&(!this._paused||m));)(r._active||r._startTime<=c&&!r._paused&&!r._gc)&&(l===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=o;else for(r=this._last;r&&(o=r._prev,c===this._time&&(!this._paused||m));){if(r._active||r._startTime<=p&&!r._paused&&!r._gc){if(l===r){for(l=r._prev;l&&l.endTime()>this._time;)l.render(l._reversed?l.totalDuration()-(t-l._startTime)*l._timeScale:(t-l._startTime)*l._timeScale,e,i),l=l._prev;l=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)}r=o}this._onUpdate&&(e||(h.length&&u(),this._callback("onUpdate"))),s&&(this._gc||d!==this._startTime&&g===this._timeScale||(0===this._time||f>=this.totalDuration())&&(n&&(h.length&&u(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[s]&&this._callback(s)))}},m._hasPausedChild=function(){for(var t=this._first;t;){if(t._paused||t instanceof r&&t._hasPausedChild())return!0;t=t._next}return!1},m.getChildren=function(t,e,r,n){n=n||-9999999999;for(var o=[],s=this._first,a=0;s;)s._startTime<n||(s instanceof i?!1!==e&&(o[a++]=s):(!1!==r&&(o[a++]=s),!1!==t&&(a=(o=o.concat(s.getChildren(!0,e,r))).length))),s=s._next;return o},m.getTweensOf=function(t,e){var r,n,o=this._gc,s=[],a=0;for(o&&this._enabled(!0,!0),n=(r=i.getTweensOf(t)).length;--n>-1;)(r[n].timeline===this||e&&this._contains(r[n]))&&(s[a++]=r[n]);return o&&this._enabled(!1,!0),s},m.recent=function(){return this._recent},m._contains=function(t){for(var e=t.timeline;e;){if(e===this)return!0;e=e.timeline}return!1},m.shiftChildren=function(t,e,i){i=i||0;for(var r,n=this._first,o=this._labels;n;)n._startTime>=i&&(n._startTime+=t),n=n._next;if(e)for(r in o)o[r]>=i&&(o[r]+=t);return this._uncache(!0)},m._kill=function(t,e){if(!t&&!e)return this._enabled(!1,!1);for(var i=e?this.getTweensOf(e):this.getChildren(!0,!0,!1),r=i.length,n=!1;--r>-1;)i[r]._kill(t,e)&&(n=!0);return n},m.clear=function(t){var e=this.getChildren(!1,!0,!0),i=e.length;for(this._time=this._totalTime=0;--i>-1;)e[i]._enabled(!1,!1);return!1!==t&&(this._labels={}),this._uncache(!0)},m.invalidate=function(){for(var e=this._first;e;)e.invalidate(),e=e._next;return t.prototype.invalidate.call(this)},m._enabled=function(t,i){if(t===this._gc)for(var r=this._first;r;)r._enabled(t,!0),r=r._next;return e.prototype._enabled.call(this,t,i)},m.totalTime=function(e,i,r){this._forcingPlayhead=!0;var n=t.prototype.totalTime.apply(this,arguments);return this._forcingPlayhead=!1,n},m.duration=function(t){return arguments.length?(0!==this.duration()&&0!==t&&this.timeScale(this._duration/t),this):(this._dirty&&this.totalDuration(),this._duration)},m.totalDuration=function(t){if(!arguments.length){if(this._dirty){for(var e,i,r=0,n=this._last,o=999999999999;n;)e=n._prev,n._dirty&&n.totalDuration(),n._startTime>o&&this._sortChildren&&!n._paused&&!this._calculatingDuration?(this._calculatingDuration=1,this.add(n,n._startTime-n._delay),this._calculatingDuration=0):o=n._startTime,n._startTime<0&&!n._paused&&(r-=n._startTime,this._timeline.smoothChildTiming&&(this._startTime+=n._startTime/this._timeScale,this._time-=n._startTime,this._totalTime-=n._startTime,this._rawPrevTime-=n._startTime),this.shiftChildren(-n._startTime,!1,-9999999999),o=0),(i=n._startTime+n._totalDuration/n._timeScale)>r&&(r=i),n=e;this._duration=this._totalDuration=r,this._dirty=!1}return this._totalDuration}return t&&this.totalDuration()?this.timeScale(this._totalDuration/t):this},m.paused=function(e){if(!e)for(var i=this._first,r=this._time;i;)i._startTime===r&&"isPause"===i.data&&(i._rawPrevTime=0),i=i._next;return t.prototype.paused.apply(this,arguments)},m.usesFrames=function(){for(var e=this._timeline;e._timeline;)e=e._timeline;return e===t._rootFramesTimeline},m.rawTime=function(t){return t&&(this._paused||this._repeat&&this.time()>0&&this.totalProgress()<1)?this._totalTime%(this._duration+this._repeatDelay):this._paused?this._totalTime:(this._timeline.rawTime(t)-this._startTime)*this._timeScale},r}),!0),n._gsDefine("TimelineMax",["TimelineLite","TweenLite","easing.Ease"],(function(t,e,i){var r=function(e){t.call(this,e),this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._cycle=0,this._yoyo=!0===this.vars.yoyo,this._dirty=!0},o=e._internals,s=o.lazyTweens,a=o.lazyRender,l=n._gsDefine.globals,h=new i(null,null,1,0),u=r.prototype=new t;return u.constructor=r,u.kill()._gc=!1,r.version="1.20.3",u.invalidate=function(){return this._yoyo=!0===this.vars.yoyo,this._repeat=this.vars.repeat||0,this._repeatDelay=this.vars.repeatDelay||0,this._uncache(!0),t.prototype.invalidate.call(this)},u.addCallback=function(t,i,r,n){return this.add(e.delayedCall(0,t,r,n),i)},u.removeCallback=function(t,e){if(t)if(null==e)this._kill(null,t);else for(var i=this.getTweensOf(t,!1),r=i.length,n=this._parseTimeOrLabel(e);--r>-1;)i[r]._startTime===n&&i[r]._enabled(!1,!1);return this},u.removePause=function(e){return this.removeCallback(t._internals.pauseCallback,e)},u.tweenTo=function(t,i){i=i||{};var r,n,o,s={ease:h,useFrames:this.usesFrames(),immediateRender:!1},a=i.repeat&&l.TweenMax||e;for(n in i)s[n]=i[n];return s.time=this._parseTimeOrLabel(t),r=Math.abs(Number(s.time)-this._time)/this._timeScale||.001,o=new a(this,r,s),s.onStart=function(){o.target.paused(!0),o.vars.time!==o.target.time()&&r===o.duration()&&o.duration(Math.abs(o.vars.time-o.target.time())/o.target._timeScale),i.onStart&&i.onStart.apply(i.onStartScope||i.callbackScope||o,i.onStartParams||[])},o},u.tweenFromTo=function(t,e,i){i=i||{},t=this._parseTimeOrLabel(t),i.startAt={onComplete:this.seek,onCompleteParams:[t],callbackScope:this},i.immediateRender=!1!==i.immediateRender;var r=this.tweenTo(e,i);return r.duration(Math.abs(r.vars.time-t)/this._timeScale||.001)},u.render=function(t,e,i){this._gc&&this._enabled(!0,!1);var r,n,o,l,h,u,c,p,f=this._time,d=this._dirty?this.totalDuration():this._totalDuration,g=this._duration,m=this._totalTime,v=this._startTime,y=this._timeScale,_=this._rawPrevTime,x=this._paused,b=this._cycle;if(f!==this._time&&(t+=this._time-f),t>=d-1e-7&&t>=0)this._locked||(this._totalTime=d,this._cycle=this._repeat),this._reversed||this._hasPausedChild()||(n=!0,l="onComplete",h=!!this._timeline.autoRemoveChildren,0===this._duration&&(t<=0&&t>=-1e-7||_<0||1e-10===_)&&_!==t&&this._first&&(h=!0,_>1e-10&&(l="onReverseComplete"))),this._rawPrevTime=this._duration||!e||t||this._rawPrevTime===t?t:1e-10,this._yoyo&&0!=(1&this._cycle)?this._time=t=0:(this._time=g,t=g+1e-4);else if(t<1e-7)if(this._locked||(this._totalTime=this._cycle=0),this._time=0,(0!==f||0===g&&1e-10!==_&&(_>0||t<0&&_>=0)&&!this._locked)&&(l="onReverseComplete",n=this._reversed),t<0)this._active=!1,this._timeline.autoRemoveChildren&&this._reversed?(h=n=!0,l="onReverseComplete"):_>=0&&this._first&&(h=!0),this._rawPrevTime=t;else{if(this._rawPrevTime=g||!e||t||this._rawPrevTime===t?t:1e-10,0===t&&n)for(r=this._first;r&&0===r._startTime;)r._duration||(n=!1),r=r._next;t=0,this._initted||(h=!0)}else if(0===g&&_<0&&(h=!0),this._time=this._rawPrevTime=t,this._locked||(this._totalTime=t,0!==this._repeat&&(u=g+this._repeatDelay,this._cycle=this._totalTime/u>>0,0!==this._cycle&&this._cycle===this._totalTime/u&&m<=t&&this._cycle--,this._time=this._totalTime-this._cycle*u,this._yoyo&&0!=(1&this._cycle)&&(this._time=g-this._time),this._time>g?(this._time=g,t=g+1e-4):this._time<0?this._time=t=0:t=this._time)),this._hasPause&&!this._forcingPlayhead&&!e){if((t=this._time)>=f||this._repeat&&b!==this._cycle)for(r=this._first;r&&r._startTime<=t&&!c;)r._duration||"isPause"!==r.data||r.ratio||0===r._startTime&&0===this._rawPrevTime||(c=r),r=r._next;else for(r=this._last;r&&r._startTime>=t&&!c;)r._duration||"isPause"===r.data&&r._rawPrevTime>0&&(c=r),r=r._prev;c&&c._startTime<g&&(this._time=t=c._startTime,this._totalTime=t+this._cycle*(this._totalDuration+this._repeatDelay))}if(this._cycle!==b&&!this._locked){var T=this._yoyo&&0!=(1&b),w=T===(this._yoyo&&0!=(1&this._cycle)),S=this._totalTime,A=this._cycle,P=this._rawPrevTime,E=this._time;if(this._totalTime=b*g,this._cycle<b?T=!T:this._totalTime+=g,this._time=f,this._rawPrevTime=0===g?_-1e-4:_,this._cycle=b,this._locked=!0,f=T?0:g,this.render(f,e,0===g),e||this._gc||this.vars.onRepeat&&(this._cycle=A,this._locked=!1,this._callback("onRepeat")),f!==this._time)return;if(w&&(this._cycle=b,this._locked=!0,f=T?g+1e-4:-1e-4,this.render(f,!0,!1)),this._locked=!1,this._paused&&!x)return;this._time=E,this._totalTime=S,this._cycle=A,this._rawPrevTime=P}if(this._time!==f&&this._first||i||h||c){if(this._initted||(this._initted=!0),this._active||!this._paused&&this._totalTime!==m&&t>0&&(this._active=!0),0===m&&this.vars.onStart&&(0===this._totalTime&&this._totalDuration||e||this._callback("onStart")),(p=this._time)>=f)for(r=this._first;r&&(o=r._next,p===this._time&&(!this._paused||x));)(r._active||r._startTime<=this._time&&!r._paused&&!r._gc)&&(c===r&&this.pause(),r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)),r=o;else for(r=this._last;r&&(o=r._prev,p===this._time&&(!this._paused||x));){if(r._active||r._startTime<=f&&!r._paused&&!r._gc){if(c===r){for(c=r._prev;c&&c.endTime()>this._time;)c.render(c._reversed?c.totalDuration()-(t-c._startTime)*c._timeScale:(t-c._startTime)*c._timeScale,e,i),c=c._prev;c=null,this.pause()}r._reversed?r.render((r._dirty?r.totalDuration():r._totalDuration)-(t-r._startTime)*r._timeScale,e,i):r.render((t-r._startTime)*r._timeScale,e,i)}r=o}this._onUpdate&&(e||(s.length&&a(),this._callback("onUpdate"))),l&&(this._locked||this._gc||v!==this._startTime&&y===this._timeScale||(0===this._time||d>=this.totalDuration())&&(n&&(s.length&&a(),this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[l]&&this._callback(l)))}else m!==this._totalTime&&this._onUpdate&&(e||this._callback("onUpdate"))},u.getActive=function(t,e,i){null==t&&(t=!0),null==e&&(e=!0),null==i&&(i=!1);var r,n,o=[],s=this.getChildren(t,e,i),a=0,l=s.length;for(r=0;r<l;r++)(n=s[r]).isActive()&&(o[a++]=n);return o},u.getLabelAfter=function(t){t||0!==t&&(t=this._time);var e,i=this.getLabelsArray(),r=i.length;for(e=0;e<r;e++)if(i[e].time>t)return i[e].name;return null},u.getLabelBefore=function(t){null==t&&(t=this._time);for(var e=this.getLabelsArray(),i=e.length;--i>-1;)if(e[i].time<t)return e[i].name;return null},u.getLabelsArray=function(){var t,e=[],i=0;for(t in this._labels)e[i++]={time:this._labels[t],name:t};return e.sort((function(t,e){return t.time-e.time})),e},u.invalidate=function(){return this._locked=!1,t.prototype.invalidate.call(this)},u.progress=function(t,e){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&0!=(1&this._cycle)?1-t:t)+this._cycle*(this._duration+this._repeatDelay),e):this._time/this.duration()||0},u.totalProgress=function(t,e){return arguments.length?this.totalTime(this.totalDuration()*t,e):this._totalTime/this.totalDuration()||0},u.totalDuration=function(e){return arguments.length?-1!==this._repeat&&e?this.timeScale(this.totalDuration()/e):this:(this._dirty&&(t.prototype.totalDuration.call(this),this._totalDuration=-1===this._repeat?999999999999:this._duration*(this._repeat+1)+this._repeatDelay*this._repeat),this._totalDuration)},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),t>this._duration&&(t=this._duration),this._yoyo&&0!=(1&this._cycle)?t=this._duration-t+this._cycle*(this._duration+this._repeatDelay):0!==this._repeat&&(t+=this._cycle*(this._duration+this._repeatDelay)),this.totalTime(t,e)):this._time},u.repeat=function(t){return arguments.length?(this._repeat=t,this._uncache(!0)):this._repeat},u.repeatDelay=function(t){return arguments.length?(this._repeatDelay=t,this._uncache(!0)):this._repeatDelay},u.yoyo=function(t){return arguments.length?(this._yoyo=t,this):this._yoyo},u.currentLabel=function(t){return arguments.length?this.seek(t,!0):this.getLabelBefore(this._time+1e-8)},r}),!0),t=180/Math.PI,e=[],i=[],r=[],o={},s=n._gsDefine.globals,a=function(t,e,i,r){i===r&&(i=r-(r-e)/1e6),t===e&&(e=t+(i-t)/1e6),this.a=t,this.b=e,this.c=i,this.d=r,this.da=r-t,this.ca=i-t,this.ba=e-t},l=function(t,e,i,r){var n={a:t},o={},s={},a={c:r},l=(t+e)/2,h=(e+i)/2,u=(i+r)/2,c=(l+h)/2,p=(h+u)/2,f=(p-c)/8;return n.b=l+(t-l)/4,o.b=c+f,n.c=o.a=(n.b+o.b)/2,o.c=s.a=(c+p)/2,s.b=p-f,a.b=u+(r-u)/4,s.c=a.a=(s.b+a.b)/2,[n,o,s,a]},h=function(t,n,o,s,a){var h,u,c,p,f,d,g,m,v,y,_,x,b,T=t.length-1,w=0,S=t[0].a;for(h=0;h<T;h++)u=(f=t[w]).a,c=f.d,p=t[w+1].d,a?(_=e[h],b=((x=i[h])+_)*n*.25/(s?.5:r[h]||.5),m=c-((d=c-(c-u)*(s?.5*n:0!==_?b/_:0))+(((g=c+(p-c)*(s?.5*n:0!==x?b/x:0))-d)*(3*_/(_+x)+.5)/4||0))):m=c-((d=c-(c-u)*n*.5)+(g=c+(p-c)*n*.5))/2,d+=m,g+=m,f.c=v=d,f.b=0!==h?S:S=f.a+.6*(f.c-f.a),f.da=c-u,f.ca=v-u,f.ba=S-u,o?(y=l(u,S,v,c),t.splice(w,1,y[0],y[1],y[2],y[3]),w+=4):w++,S=g;(f=t[w]).b=S,f.c=S+.4*(f.d-S),f.da=f.d-f.a,f.ca=f.c-f.a,f.ba=S-f.a,o&&(y=l(f.a,S,f.c,f.d),t.splice(w,1,y[0],y[1],y[2],y[3]))},u=function(t,r,n,o){var s,l,h,u,c,p,f=[];if(o)for(l=(t=[o].concat(t)).length;--l>-1;)"string"==typeof(p=t[l][r])&&"="===p.charAt(1)&&(t[l][r]=o[r]+Number(p.charAt(0)+p.substr(2)));if((s=t.length-2)<0)return f[0]=new a(t[0][r],0,0,t[0][r]),f;for(l=0;l<s;l++)h=t[l][r],u=t[l+1][r],f[l]=new a(h,0,0,u),n&&(c=t[l+2][r],e[l]=(e[l]||0)+(u-h)*(u-h),i[l]=(i[l]||0)+(c-u)*(c-u));return f[l]=new a(t[l][r],0,0,t[l+1][r]),f},c=function(t,n,s,a,l,c){var p,f,d,g,m,v,y,_,x={},b=[],T=c||t[0];for(f in l="string"==typeof l?","+l+",":",x,y,z,left,top,right,bottom,marginTop,marginLeft,marginRight,marginBottom,paddingLeft,paddingTop,paddingRight,paddingBottom,backgroundPosition,backgroundPosition_y,",null==n&&(n=1),t[0])b.push(f);if(t.length>1){for(_=t[t.length-1],y=!0,p=b.length;--p>-1;)if(f=b[p],Math.abs(T[f]-_[f])>.05){y=!1;break}y&&(t=t.concat(),c&&t.unshift(c),t.push(t[1]),c=t[t.length-3])}for(e.length=i.length=r.length=0,p=b.length;--p>-1;)f=b[p],o[f]=-1!==l.indexOf(","+f+","),x[f]=u(t,f,o[f],c);for(p=e.length;--p>-1;)e[p]=Math.sqrt(e[p]),i[p]=Math.sqrt(i[p]);if(!a){for(p=b.length;--p>-1;)if(o[f])for(v=(d=x[b[p]]).length-1,g=0;g<v;g++)m=d[g+1].da/i[g]+d[g].da/e[g]||0,r[g]=(r[g]||0)+m*m;for(p=r.length;--p>-1;)r[p]=Math.sqrt(r[p])}for(p=b.length,g=s?4:1;--p>-1;)d=x[f=b[p]],h(d,n,s,a,o[f]),y&&(d.splice(0,g),d.splice(d.length-g,g));return x},p=function(t,e,i){for(var r,n,o,s,a,l,h,u,c,p,f,d=1/i,g=t.length;--g>-1;)for(o=(p=t[g]).a,s=p.d-o,a=p.c-o,l=p.b-o,r=n=0,u=1;u<=i;u++)r=n-(n=((h=d*u)*h*s+3*(c=1-h)*(h*a+c*l))*h),e[f=g*i+u-1]=(e[f]||0)+r*r},f=n._gsDefine.plugin({propName:"bezier",priority:-1,version:"1.3.8",API:2,global:!0,init:function(t,e,i){this._target=t,e instanceof Array&&(e={values:e}),this._func={},this._mod={},this._props=[],this._timeRes=null==e.timeResolution?6:parseInt(e.timeResolution,10);var r,n,o,s,l,h=e.values||[],u={},f=h[0],d=e.autoRotate||i.vars.orientToBezier;for(r in this._autoRotate=d?d instanceof Array?d:[["x","y","rotation",!0===d?0:Number(d)||0]]:null,f)this._props.push(r);for(o=this._props.length;--o>-1;)r=this._props[o],this._overwriteProps.push(r),n=this._func[r]="function"==typeof t[r],u[r]=n?t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)]():parseFloat(t[r]),l||u[r]!==h[0][r]&&(l=u);if(this._beziers="cubic"!==e.type&&"quadratic"!==e.type&&"soft"!==e.type?c(h,isNaN(e.curviness)?1:e.curviness,!1,"thruBasic"===e.type,e.correlate,l):function(t,e,i){var r,n,o,s,l,h,u,c,p,f,d,g={},m="cubic"===(e=e||"soft")?3:2,v="soft"===e,y=[];if(v&&i&&(t=[i].concat(t)),null==t||t.length<m+1)throw"invalid Bezier data";for(p in t[0])y.push(p);for(h=y.length;--h>-1;){for(g[p=y[h]]=l=[],f=0,c=t.length,u=0;u<c;u++)r=null==i?t[u][p]:"string"==typeof(d=t[u][p])&&"="===d.charAt(1)?i[p]+Number(d.charAt(0)+d.substr(2)):Number(d),v&&u>1&&u<c-1&&(l[f++]=(r+l[f-2])/2),l[f++]=r;for(c=f-m+1,f=0,u=0;u<c;u+=m)r=l[u],n=l[u+1],o=l[u+2],s=2===m?0:l[u+3],l[f++]=d=3===m?new a(r,n,o,s):new a(r,(2*n+r)/3,(2*n+o)/3,o);l.length=f}return g}(h,e.type,u),this._segCount=this._beziers[r].length,this._timeRes){var g=function(t,e){var i,r,n,o,s=[],a=[],l=0,h=0,u=(e=e>>0||6)-1,c=[],f=[];for(i in t)p(t[i],s,e);for(n=s.length,r=0;r<n;r++)l+=Math.sqrt(s[r]),f[o=r%e]=l,o===u&&(h+=l,c[o=r/e>>0]=f,a[o]=h,l=0,f=[]);return{length:h,lengths:a,segments:c}}(this._beziers,this._timeRes);this._length=g.length,this._lengths=g.lengths,this._segments=g.segments,this._l1=this._li=this._s1=this._si=0,this._l2=this._lengths[0],this._curSeg=this._segments[0],this._s2=this._curSeg[0],this._prec=1/this._curSeg.length}if(d=this._autoRotate)for(this._initialRotations=[],d[0]instanceof Array||(this._autoRotate=d=[d]),o=d.length;--o>-1;){for(s=0;s<3;s++)r=d[o][s],this._func[r]="function"==typeof t[r]&&t[r.indexOf("set")||"function"!=typeof t["get"+r.substr(3)]?r:"get"+r.substr(3)];r=d[o][2],this._initialRotations[o]=(this._func[r]?this._func[r].call(this._target):this._target[r])||0,this._overwriteProps.push(r)}return this._startRatio=i.vars.runBackwards?1:0,!0},set:function(e){var i,r,n,o,s,a,l,h,u,c,p=this._segCount,f=this._func,d=this._target,g=e!==this._startRatio;if(this._timeRes){if(u=this._lengths,c=this._curSeg,e*=this._length,n=this._li,e>this._l2&&n<p-1){for(h=p-1;n<h&&(this._l2=u[++n])<=e;);this._l1=u[n-1],this._li=n,this._curSeg=c=this._segments[n],this._s2=c[this._s1=this._si=0]}else if(e<this._l1&&n>0){for(;n>0&&(this._l1=u[--n])>=e;);0===n&&e<this._l1?this._l1=0:n++,this._l2=u[n],this._li=n,this._curSeg=c=this._segments[n],this._s1=c[(this._si=c.length-1)-1]||0,this._s2=c[this._si]}if(i=n,e-=this._l1,n=this._si,e>this._s2&&n<c.length-1){for(h=c.length-1;n<h&&(this._s2=c[++n])<=e;);this._s1=c[n-1],this._si=n}else if(e<this._s1&&n>0){for(;n>0&&(this._s1=c[--n])>=e;);0===n&&e<this._s1?this._s1=0:n++,this._s2=c[n],this._si=n}a=(n+(e-this._s1)/(this._s2-this._s1))*this._prec||0}else a=(e-(i=e<0?0:e>=1?p-1:p*e>>0)*(1/p))*p;for(r=1-a,n=this._props.length;--n>-1;)o=this._props[n],l=(a*a*(s=this._beziers[o][i]).da+3*r*(a*s.ca+r*s.ba))*a+s.a,this._mod[o]&&(l=this._mod[o](l,d)),f[o]?d[o](l):d[o]=l;if(this._autoRotate){var m,v,y,_,x,b,T,w=this._autoRotate;for(n=w.length;--n>-1;)o=w[n][2],b=w[n][3]||0,T=!0===w[n][4]?1:t,s=this._beziers[w[n][0]],m=this._beziers[w[n][1]],s&&m&&(s=s[i],m=m[i],v=s.a+(s.b-s.a)*a,v+=((_=s.b+(s.c-s.b)*a)-v)*a,_+=(s.c+(s.d-s.c)*a-_)*a,y=m.a+(m.b-m.a)*a,y+=((x=m.b+(m.c-m.b)*a)-y)*a,x+=(m.c+(m.d-m.c)*a-x)*a,l=g?Math.atan2(x-y,_-v)*T+b:this._initialRotations[n],this._mod[o]&&(l=this._mod[o](l,d)),f[o]?d[o](l):d[o]=l)}}}),d=f.prototype,f.bezierThrough=c,f.cubicToQuadratic=l,f._autoCSS=!0,f.quadraticToCubic=function(t,e,i){return new a(t,(2*e+t)/3,(2*e+i)/3,i)},f._cssRegister=function(){var t=s.CSSPlugin;if(t){var e=t._internals,i=e._parseToProxy,r=e._setPluginRatio,n=e.CSSPropTween;e._registerComplexSpecialProp("bezier",{parser:function(t,e,o,s,a,l){e instanceof Array&&(e={values:e}),l=new f;var h,u,c,p=e.values,d=p.length-1,g=[],m={};if(d<0)return a;for(h=0;h<=d;h++)c=i(t,p[h],s,a,l,d!==h),g[h]=c.end;for(u in e)m[u]=e[u];return m.values=g,(a=new n(t,"bezier",0,0,c.pt,2)).data=c,a.plugin=l,a.setRatio=r,0===m.autoRotate&&(m.autoRotate=!0),!m.autoRotate||m.autoRotate instanceof Array||(h=!0===m.autoRotate?0:Number(m.autoRotate),m.autoRotate=null!=c.end.left?[["left","top","rotation",h,!1]]:null!=c.end.x&&[["x","y","rotation",h,!1]]),m.autoRotate&&(s._transform||s._enableTransforms(!1),c.autoRotate=s._target._gsTransform,c.proxy.rotation=c.autoRotate.rotation||0,s._overwriteProps.push("rotation")),l._onInitTween(c.proxy,m,s._tween),a}})}},d._mod=function(t){for(var e,i=this._overwriteProps,r=i.length;--r>-1;)(e=t[i[r]])&&"function"==typeof e&&(this._mod[i[r]]=e)},d._kill=function(t){var e,i,r=this._props;for(e in this._beziers)if(e in t)for(delete this._beziers[e],delete this._func[e],i=r.length;--i>-1;)r[i]===e&&r.splice(i,1);if(r=this._autoRotate)for(i=r.length;--i>-1;)t[r[i][2]]&&r.splice(i,1);return this._super._kill.call(this,t)},n._gsDefine("plugins.CSSPlugin",["plugins.TweenPlugin","TweenLite"],(function(t,e){var i,r,o,s,a=function(){t.call(this,"css"),this._overwriteProps.length=0,this.setRatio=a.prototype.setRatio},l=n._gsDefine.globals,h={},u=a.prototype=new t("css");u.constructor=a,a.version="1.20.3",a.API=2,a.defaultTransformPerspective=0,a.defaultSkewType="compensated",a.defaultSmoothOrigin=!0,u="px",a.suffixMap={top:u,right:u,bottom:u,left:u,width:u,height:u,fontSize:u,padding:u,margin:u,perspective:u,lineHeight:""};var c,p,f,d,g,m,v,y,_=/(?:\-|\.|\b)(\d|\.|e\-)+/g,x=/(?:\d|\-\d|\.\d|\-\.\d|\+=\d|\-=\d|\+=.\d|\-=\.\d)+/g,b=/(?:\+=|\-=|\-|\b)[\d\-\.]+[a-zA-Z0-9]*(?:%|\b)/gi,T=/(?![+-]?\d*\.?\d+|[+-]|e[+-]\d+)[^0-9]/g,w=/(?:\d|\-|\+|=|#|\.)*/g,S=/opacity *= *([^)]*)/i,A=/opacity:([^;]*)/i,P=/alpha\(opacity *=.+?\)/i,E=/^(rgb|hsl)/,C=/([A-Z])/g,O=/-([a-z])/gi,I=/(^(?:url\(\"|url\())|(?:(\"\))$|\)$)/gi,M=function(t,e){return e.toUpperCase()},R=/(?:Left|Right|Width)/i,D=/(M11|M12|M21|M22)=[\d\-\.e]+/gi,k=/progid\:DXImageTransform\.Microsoft\.Matrix\(.+?\)/i,L=/,(?=[^\)]*(?:\(|$))/gi,N=/[\s,\(]/i,F=Math.PI/180,B=180/Math.PI,j={},U={style:{}},X=n.document||{createElement:function(){return U}},G=function(t,e){return X.createElementNS?X.createElementNS(e||"http://www.w3.org/1999/xhtml",t):X.createElement(t)},W=G("div"),V=G("img"),z=a._internals={_specialProps:h},H=(n.navigator||{}).userAgent||"",Y=function(){var t=H.indexOf("Android"),e=G("a");return f=-1!==H.indexOf("Safari")&&-1===H.indexOf("Chrome")&&(-1===t||parseFloat(H.substr(t+8,2))>3),g=f&&parseFloat(H.substr(H.indexOf("Version/")+8,2))<6,d=-1!==H.indexOf("Firefox"),(/MSIE ([0-9]{1,}[\.0-9]{0,})/.exec(H)||/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/.exec(H))&&(m=parseFloat(RegExp.$1)),!!e&&(e.style.cssText="top:1px;opacity:.55;",/^0.55/.test(e.style.opacity))}(),q=function(t){return S.test("string"==typeof t?t:(t.currentStyle?t.currentStyle.filter:t.style.filter)||"")?parseFloat(RegExp.$1)/100:1},K=function(t){n.console},Z="",Q="",J=function(t,e){var i,r,n=(e=e||W).style;if(void 0!==n[t])return t;for(t=t.charAt(0).toUpperCase()+t.substr(1),i=["O","Moz","ms","Ms","Webkit"],r=5;--r>-1&&void 0===n[i[r]+t];);return r>=0?(Z="-"+(Q=3===r?"ms":i[r]).toLowerCase()+"-",Q+t):null},$=X.defaultView?X.defaultView.getComputedStyle:function(){},tt=a.getStyle=function(t,e,i,r,n){var o;return Y||"opacity"!==e?(!r&&t.style[e]?o=t.style[e]:(i=i||$(t))?o=i[e]||i.getPropertyValue(e)||i.getPropertyValue(e.replace(C,"-$1").toLowerCase()):t.currentStyle&&(o=t.currentStyle[e]),null==n||o&&"none"!==o&&"auto"!==o&&"auto auto"!==o?o:n):q(t)},et=z.convertToPixels=function(t,i,r,n,o){if("px"===n||!n&&"lineHeight"!==i)return r;if("auto"===n||!r)return 0;var s,l,h,u=R.test(i),c=t,p=W.style,f=r<0,d=1===r;if(f&&(r=-r),d&&(r*=100),"lineHeight"!==i||n)if("%"===n&&-1!==i.indexOf("border"))s=r/100*(u?t.clientWidth:t.clientHeight);else{if(p.cssText="border:0 solid red;position:"+tt(t,"position")+";line-height:0;","%"!==n&&c.appendChild&&"v"!==n.charAt(0)&&"rem"!==n)p[u?"borderLeftWidth":"borderTopWidth"]=r+n;else{if(c=t.parentNode||X.body,-1!==tt(c,"display").indexOf("flex")&&(p.position="absolute"),l=c._gsCache,h=e.ticker.frame,l&&u&&l.time===h)return l.width*r/100;p[u?"width":"height"]=r+n}c.appendChild(W),s=parseFloat(W[u?"offsetWidth":"offsetHeight"]),c.removeChild(W),u&&"%"===n&&!1!==a.cacheWidths&&((l=c._gsCache=c._gsCache||{}).time=h,l.width=s/r*100),0!==s||o||(s=et(t,i,r,n,!0))}else l=$(t).lineHeight,t.style.lineHeight=r,s=parseFloat($(t).lineHeight),t.style.lineHeight=l;return d&&(s/=100),f?-s:s},it=z.calculateOffset=function(t,e,i){if("absolute"!==tt(t,"position",i))return 0;var r="left"===e?"Left":"Top",n=tt(t,"margin"+r,i);return t["offset"+r]-(et(t,e,parseFloat(n),n.replace(w,""))||0)},rt=function(t,e){var i,r,n,o={};if(e=e||$(t,null))if(i=e.length)for(;--i>-1;)-1!==(n=e[i]).indexOf("-transform")&&kt!==n||(o[n.replace(O,M)]=e.getPropertyValue(n));else for(i in e)-1!==i.indexOf("Transform")&&Dt!==i||(o[i]=e[i]);else if(e=t.currentStyle||t.style)for(i in e)"string"==typeof i&&void 0===o[i]&&(o[i.replace(O,M)]=e[i]);return Y||(o.opacity=q(t)),r=Yt(t,e,!1),o.rotation=r.rotation,o.skewX=r.skewX,o.scaleX=r.scaleX,o.scaleY=r.scaleY,o.x=r.x,o.y=r.y,Nt&&(o.z=r.z,o.rotationX=r.rotationX,o.rotationY=r.rotationY,o.scaleZ=r.scaleZ),o.filters&&delete o.filters,o},nt=function(t,e,i,r,n){var o,s,a,l={},h=t.style;for(s in i)"cssText"!==s&&"length"!==s&&isNaN(s)&&(e[s]!==(o=i[s])||n&&n[s])&&-1===s.indexOf("Origin")&&("number"!=typeof o&&"string"!=typeof o||(l[s]="auto"!==o||"left"!==s&&"top"!==s?""!==o&&"auto"!==o&&"none"!==o||"string"!=typeof e[s]||""===e[s].replace(T,"")?o:0:it(t,s),void 0!==h[s]&&(a=new _t(h,s,h[s],a))));if(r)for(s in r)"className"!==s&&(l[s]=r[s]);return{difs:l,firstMPT:a}},ot={width:["Left","Right"],height:["Top","Bottom"]},st=["marginLeft","marginRight","marginTop","marginBottom"],at=function(t,e,i){if("svg"===(t.nodeName+"").toLowerCase())return(i||$(t))[e]||0;if(t.getCTM&&Vt(t))return t.getBBox()[e]||0;var r=parseFloat("width"===e?t.offsetWidth:t.offsetHeight),n=ot[e],o=n.length;for(i=i||$(t,null);--o>-1;)r-=parseFloat(tt(t,"padding"+n[o],i,!0))||0,r-=parseFloat(tt(t,"border"+n[o]+"Width",i,!0))||0;return r},lt=function(t,e){if("contain"===t||"auto"===t||"auto auto"===t)return t+" ";null!=t&&""!==t||(t="0 0");var i,r=t.split(" "),n=-1!==t.indexOf("left")?"0%":-1!==t.indexOf("right")?"100%":r[0],o=-1!==t.indexOf("top")?"0%":-1!==t.indexOf("bottom")?"100%":r[1];if(r.length>3&&!e){for(r=t.split(", ").join(",").split(","),t=[],i=0;i<r.length;i++)t.push(lt(r[i]));return t.join(",")}return null==o?o="center"===n?"50%":"0":"center"===o&&(o="50%"),("center"===n||isNaN(parseFloat(n))&&-1===(n+"").indexOf("="))&&(n="50%"),t=n+" "+o+(r.length>2?" "+r[2]:""),e&&(e.oxp=-1!==n.indexOf("%"),e.oyp=-1!==o.indexOf("%"),e.oxr="="===n.charAt(1),e.oyr="="===o.charAt(1),e.ox=parseFloat(n.replace(T,"")),e.oy=parseFloat(o.replace(T,"")),e.v=t),e||t},ht=function(t,e){return"function"==typeof t&&(t=t(y,v)),"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2)):parseFloat(t)-parseFloat(e)||0},ut=function(t,e){return"function"==typeof t&&(t=t(y,v)),null==t?e:"string"==typeof t&&"="===t.charAt(1)?parseInt(t.charAt(0)+"1",10)*parseFloat(t.substr(2))+e:parseFloat(t)||0},ct=function(t,e,i,r){var n,o,s,a;return"function"==typeof t&&(t=t(y,v)),null==t?s=e:"number"==typeof t?s=t:(360,n=t.split("_"),o=((a="="===t.charAt(1))?parseInt(t.charAt(0)+"1",10)*parseFloat(n[0].substr(2)):parseFloat(n[0]))*(-1===t.indexOf("rad")?1:B)-(a?0:e),n.length&&(r&&(r[i]=e+o),-1!==t.indexOf("short")&&(o%=360)!==o%180&&(o=o<0?o+360:o-360),-1!==t.indexOf("_cw")&&o<0?o=(o+3599999999640)%360-360*(o/360|0):-1!==t.indexOf("ccw")&&o>0&&(o=(o-3599999999640)%360-360*(o/360|0))),s=e+o),s<1e-6&&s>-1e-6&&(s=0),s},pt={aqua:[0,255,255],lime:[0,255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,255],navy:[0,0,128],white:[255,255,255],fuchsia:[255,0,255],olive:[128,128,0],yellow:[255,255,0],orange:[255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[255,0,0],pink:[255,192,203],cyan:[0,255,255],transparent:[255,255,255,0]},ft=function(t,e,i){return 255*(6*(t=t<0?t+1:t>1?t-1:t)<1?e+(i-e)*t*6:t<.5?i:3*t<2?e+(i-e)*(2/3-t)*6:e)+.5|0},dt=a.parseColor=function(t,e){var i,r,n,o,s,a,l,h,u,c,p;if(t)if("number"==typeof t)i=[t>>16,t>>8&255,255&t];else{if(","===t.charAt(t.length-1)&&(t=t.substr(0,t.length-1)),pt[t])i=pt[t];else if("#"===t.charAt(0))4===t.length&&(r=t.charAt(1),n=t.charAt(2),o=t.charAt(3),t="#"+r+r+n+n+o+o),i=[(t=parseInt(t.substr(1),16))>>16,t>>8&255,255&t];else if("hsl"===t.substr(0,3))if(i=p=t.match(_),e){if(-1!==t.indexOf("="))return t.match(x)}else s=Number(i[0])%360/360,a=Number(i[1])/100,r=2*(l=Number(i[2])/100)-(n=l<=.5?l*(a+1):l+a-l*a),i.length>3&&(i[3]=Number(i[3])),i[0]=ft(s+1/3,r,n),i[1]=ft(s,r,n),i[2]=ft(s-1/3,r,n);else i=t.match(_)||pt.transparent;i[0]=Number(i[0]),i[1]=Number(i[1]),i[2]=Number(i[2]),i.length>3&&(i[3]=Number(i[3]))}else i=pt.black;return e&&!p&&(r=i[0]/255,n=i[1]/255,o=i[2]/255,l=((h=Math.max(r,n,o))+(u=Math.min(r,n,o)))/2,h===u?s=a=0:(c=h-u,a=l>.5?c/(2-h-u):c/(h+u),s=h===r?(n-o)/c+(n<o?6:0):h===n?(o-r)/c+2:(r-n)/c+4,s*=60),i[0]=s+.5|0,i[1]=100*a+.5|0,i[2]=100*l+.5|0),i},gt=function(t,e){var i,r,n,o=t.match(mt)||[],s=0,a="";if(!o.length)return t;for(i=0;i<o.length;i++)r=o[i],s+=(n=t.substr(s,t.indexOf(r,s)-s)).length+r.length,3===(r=dt(r,e)).length&&r.push(1),a+=n+(e?"hsla("+r[0]+","+r[1]+"%,"+r[2]+"%,"+r[3]:"rgba("+r.join(","))+")";return a+t.substr(s)},mt="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3}){1,2}\\b";for(u in pt)mt+="|"+u+"\\b";mt=new RegExp(mt+")","gi"),a.colorStringFilter=function(t){var e,i=t[0]+" "+t[1];mt.test(i)&&(e=-1!==i.indexOf("hsl(")||-1!==i.indexOf("hsla("),t[0]=gt(t[0],e),t[1]=gt(t[1],e)),mt.lastIndex=0},e.defaultStringFilter||(e.defaultStringFilter=a.colorStringFilter);var vt=function(t,e,i,r){if(null==t)return function(t){return t};var n,o=e?(t.match(mt)||[""])[0]:"",s=t.split(o).join("").match(b)||[],a=t.substr(0,t.indexOf(s[0])),l=")"===t.charAt(t.length-1)?")":"",h=-1!==t.indexOf(" ")?" ":",",u=s.length,c=u>0?s[0].replace(_,""):"";return u?n=e?function(t){var e,p,f,d;if("number"==typeof t)t+=c;else if(r&&L.test(t)){for(d=t.replace(L,"|").split("|"),f=0;f<d.length;f++)d[f]=n(d[f]);return d.join(",")}if(e=(t.match(mt)||[o])[0],f=(p=t.split(e).join("").match(b)||[]).length,u>f--)for(;++f<u;)p[f]=i?p[(f-1)/2|0]:s[f];return a+p.join(h)+h+e+l+(-1!==t.indexOf("inset")?" inset":"")}:function(t){var e,o,p;if("number"==typeof t)t+=c;else if(r&&L.test(t)){for(o=t.replace(L,"|").split("|"),p=0;p<o.length;p++)o[p]=n(o[p]);return o.join(",")}if(p=(e=t.match(b)||[]).length,u>p--)for(;++p<u;)e[p]=i?e[(p-1)/2|0]:s[p];return a+e.join(h)+l}:function(t){return t}},yt=function(t){return t=t.split(","),function(e,i,r,n,o,s,a){var l,h=(i+"").split(" ");for(a={},l=0;l<4;l++)a[t[l]]=h[l]=h[l]||h[(l-1)/2>>0];return n.parse(e,a,o,s)}},_t=(z._setPluginRatio=function(t){this.plugin.setRatio(t);for(var e,i,r,n,o,s=this.data,a=s.proxy,l=s.firstMPT;l;)e=a[l.v],l.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),l.t[l.p]=e,l=l._next;if(s.autoRotate&&(s.autoRotate.rotation=s.mod?s.mod(a.rotation,this.t):a.rotation),1===t||0===t)for(l=s.firstMPT,o=1===t?"e":"b";l;){if((i=l.t).type){if(1===i.type){for(n=i.xs0+i.s+i.xs1,r=1;r<i.l;r++)n+=i["xn"+r]+i["xs"+(r+1)];i[o]=n}}else i[o]=i.s+i.xs0;l=l._next}},function(t,e,i,r,n){this.t=t,this.p=e,this.v=i,this.r=n,r&&(r._prev=this,this._next=r)}),xt=(z._parseToProxy=function(t,e,i,r,n,o){var s,a,l,h,u,c=r,p={},f={},d=i._transform,g=j;for(i._transform=null,j=e,r=u=i.parse(t,e,r,n),j=g,o&&(i._transform=d,c&&(c._prev=null,c._prev&&(c._prev._next=null)));r&&r!==c;){if(r.type<=1&&(f[a=r.p]=r.s+r.c,p[a]=r.s,o||(h=new _t(r,"s",a,h,r.r),r.c=0),1===r.type))for(s=r.l;--s>0;)l="xn"+s,f[a=r.p+"_"+l]=r.data[l],p[a]=r[l],o||(h=new _t(r,l,a,h,r.rxp[l]));r=r._next}return{proxy:p,end:f,firstMPT:h,pt:u}},z.CSSPropTween=function(t,e,r,n,o,a,l,h,u,c,p){this.t=t,this.p=e,this.s=r,this.c=n,this.n=l||e,t instanceof xt||s.push(this.n),this.r=h,this.type=a||0,u&&(this.pr=u,i=!0),this.b=void 0===c?r:c,this.e=void 0===p?r+n:p,o&&(this._next=o,o._prev=this)}),bt=function(t,e,i,r,n,o){var s=new xt(t,e,i,r-i,n,-1,o);return s.b=i,s.e=s.xs0=r,s},Tt=a.parseComplex=function(t,e,i,r,n,o,s,l,h,u){i=i||o||"","function"==typeof r&&(r=r(y,v)),s=new xt(t,e,0,0,s,u?2:1,null,!1,l,i,r),r+="",n&&mt.test(r+i)&&(r=[i,r],a.colorStringFilter(r),i=r[0],r=r[1]);var p,f,d,g,m,b,T,w,S,A,P,E,C,O=i.split(", ").join(",").split(" "),I=r.split(", ").join(",").split(" "),M=O.length,R=!1!==c;for(-1===r.indexOf(",")&&-1===i.indexOf(",")||(-1!==(r+i).indexOf("rgb")||-1!==(r+i).indexOf("hsl")?(O=O.join(" ").replace(L,", ").split(" "),I=I.join(" ").replace(L,", ").split(" ")):(O=O.join(" ").split(",").join(", ").split(" "),I=I.join(" ").split(",").join(", ").split(" ")),M=O.length),M!==I.length&&(M=(O=(o||"").split(" ")).length),s.plugin=h,s.setRatio=u,mt.lastIndex=0,p=0;p<M;p++)if(g=O[p],m=I[p],(w=parseFloat(g))||0===w)s.appendXtra("",w,ht(m,w),m.replace(x,""),R&&-1!==m.indexOf("px"),!0);else if(n&&mt.test(g))E=")"+((E=m.indexOf(")")+1)?m.substr(E):""),C=-1!==m.indexOf("hsl")&&Y,A=m,g=dt(g,C),m=dt(m,C),(S=g.length+m.length>6)&&!Y&&0===m[3]?(s["xs"+s.l]+=s.l?" transparent":"transparent",s.e=s.e.split(I[p]).join("transparent")):(Y||(S=!1),C?s.appendXtra(A.substr(0,A.indexOf("hsl"))+(S?"hsla(":"hsl("),g[0],ht(m[0],g[0]),",",!1,!0).appendXtra("",g[1],ht(m[1],g[1]),"%,",!1).appendXtra("",g[2],ht(m[2],g[2]),S?"%,":"%"+E,!1):s.appendXtra(A.substr(0,A.indexOf("rgb"))+(S?"rgba(":"rgb("),g[0],m[0]-g[0],",",!0,!0).appendXtra("",g[1],m[1]-g[1],",",!0).appendXtra("",g[2],m[2]-g[2],S?",":E,!0),S&&(g=g.length<4?1:g[3],s.appendXtra("",g,(m.length<4?1:m[3])-g,E,!1))),mt.lastIndex=0;else if(b=g.match(_)){if(!(T=m.match(x))||T.length!==b.length)return s;for(d=0,f=0;f<b.length;f++)P=b[f],A=g.indexOf(P,d),s.appendXtra(g.substr(d,A-d),Number(P),ht(T[f],P),"",R&&"px"===g.substr(A+P.length,2),0===f),d=A+P.length;s["xs"+s.l]+=g.substr(d)}else s["xs"+s.l]+=s.l||s["xs"+s.l]?" "+m:m;if(-1!==r.indexOf("=")&&s.data){for(E=s.xs0+s.data.s,p=1;p<s.l;p++)E+=s["xs"+p]+s.data["xn"+p];s.e=E+s["xs"+p]}return s.l||(s.type=-1,s.xs0=s.e),s.xfirst||s},wt=9;for((u=xt.prototype).l=u.pr=0;--wt>0;)u["xn"+wt]=0,u["xs"+wt]="";u.xs0="",u._next=u._prev=u.xfirst=u.data=u.plugin=u.setRatio=u.rxp=null,u.appendXtra=function(t,e,i,r,n,o){var s=this,a=s.l;return s["xs"+a]+=o&&(a||s["xs"+a])?" "+t:t||"",i||0===a||s.plugin?(s.l++,s.type=s.setRatio?2:1,s["xs"+s.l]=r||"",a>0?(s.data["xn"+a]=e+i,s.rxp["xn"+a]=n,s["xn"+a]=e,s.plugin||(s.xfirst=new xt(s,"xn"+a,e,i,s.xfirst||s,0,s.n,n,s.pr),s.xfirst.xs0=0),s):(s.data={s:e+i},s.rxp={},s.s=e,s.c=i,s.r=n,s)):(s["xs"+a]+=e+(r||""),s)};var St=function(t,e){e=e||{},this.p=e.prefix&&J(t)||t,h[t]=h[this.p]=this,this.format=e.formatter||vt(e.defaultValue,e.color,e.collapsible,e.multi),e.parser&&(this.parse=e.parser),this.clrs=e.color,this.multi=e.multi,this.keyword=e.keyword,this.dflt=e.defaultValue,this.pr=e.priority||0},At=z._registerComplexSpecialProp=function(t,e,i){"object"!=typeof e&&(e={parser:i});var r,n=t.split(","),o=e.defaultValue;for(i=i||[o],r=0;r<n.length;r++)e.prefix=0===r&&e.prefix,e.defaultValue=i[r]||o,new St(n[r],e)},Pt=z._registerPluginProp=function(t){if(!h[t]){var e=t.charAt(0).toUpperCase()+t.substr(1)+"Plugin";At(t,{parser:function(t,i,r,n,o,s,a){var u=l.com.greensock.plugins[e];return u?(u._cssRegister(),h[r].parse(t,i,r,n,o,s,a)):(K(),o)}})}};(u=St.prototype).parseComplex=function(t,e,i,r,n,o){var s,a,l,h,u,c,p=this.keyword;if(this.multi&&(L.test(i)||L.test(e)?(a=e.replace(L,"|").split("|"),l=i.replace(L,"|").split("|")):p&&(a=[e],l=[i])),l){for(h=l.length>a.length?l.length:a.length,s=0;s<h;s++)e=a[s]=a[s]||this.dflt,i=l[s]=l[s]||this.dflt,p&&(u=e.indexOf(p))!==(c=i.indexOf(p))&&(-1===c?a[s]=a[s].split(p).join(""):-1===u&&(a[s]+=" "+p));e=a.join(", "),i=l.join(", ")}return Tt(t,this.p,e,i,this.clrs,this.dflt,r,this.pr,n,o)},u.parse=function(t,e,i,r,n,s,a){return this.parseComplex(t.style,this.format(tt(t,this.p,o,!1,this.dflt)),this.format(e),n,s)},a.registerSpecialProp=function(t,e,i){At(t,{parser:function(t,r,n,o,s,a,l){var h=new xt(t,n,0,0,s,2,n,!1,i);return h.plugin=a,h.setRatio=e(t,r,o._tween,n),h},priority:i})},a.useSVGTransformAttr=!0;var Et,Ct,Ot,It,Mt,Rt="scaleX,scaleY,scaleZ,x,y,z,skewX,skewY,rotation,rotationX,rotationY,perspective,xPercent,yPercent".split(","),Dt=J("transform"),kt=Z+"transform",Lt=J("transformOrigin"),Nt=null!==J("perspective"),Ft=z.Transform=function(){this.perspective=parseFloat(a.defaultTransformPerspective)||0,this.force3D=!(!1===a.defaultForce3D||!Nt)&&(a.defaultForce3D||"auto")},Bt=n.SVGElement,jt=function(t,e,i){var r,n=X.createElementNS("http://www.w3.org/2000/svg",t),o=/([a-z])([A-Z])/g;for(r in i)n.setAttributeNS(null,r.replace(o,"$1-$2").toLowerCase(),i[r]);return e.appendChild(n),n},Ut=X.documentElement||{},Xt=(Mt=m||/Android/i.test(H)&&!n.chrome,X.createElementNS&&!Mt&&(Ct=jt("svg",Ut),It=(Ot=jt("rect",Ct,{width:100,height:50,x:100})).getBoundingClientRect().width,Ot.style[Lt]="50% 50%",Ot.style[Dt]="scaleX(0.5)",Mt=It===Ot.getBoundingClientRect().width&&!(d&&Nt),Ut.removeChild(Ct)),Mt),Gt=function(t,e,i,r,n,o){var s,l,h,u,c,p,f,d,g,m,v,y,_,x,b=t._gsTransform,T=Ht(t,!0);b&&(_=b.xOrigin,x=b.yOrigin),(!r||(s=r.split(" ")).length<2)&&(0===(f=t.getBBox()).x&&0===f.y&&f.width+f.height===0&&(f={x:parseFloat(t.hasAttribute("x")?t.getAttribute("x"):t.hasAttribute("cx")?t.getAttribute("cx"):0)||0,y:parseFloat(t.hasAttribute("y")?t.getAttribute("y"):t.hasAttribute("cy")?t.getAttribute("cy"):0)||0,width:0,height:0}),s=[(-1!==(e=lt(e).split(" "))[0].indexOf("%")?parseFloat(e[0])/100*f.width:parseFloat(e[0]))+f.x,(-1!==e[1].indexOf("%")?parseFloat(e[1])/100*f.height:parseFloat(e[1]))+f.y]),i.xOrigin=u=parseFloat(s[0]),i.yOrigin=c=parseFloat(s[1]),r&&T!==zt&&(p=T[0],f=T[1],d=T[2],g=T[3],m=T[4],v=T[5],(y=p*g-f*d)&&(l=u*(g/y)+c*(-d/y)+(d*v-g*m)/y,h=u*(-f/y)+c*(p/y)-(p*v-f*m)/y,u=i.xOrigin=s[0]=l,c=i.yOrigin=s[1]=h)),b&&(o&&(i.xOffset=b.xOffset,i.yOffset=b.yOffset,b=i),n||!1!==n&&!1!==a.defaultSmoothOrigin?(l=u-_,h=c-x,b.xOffset+=l*T[0]+h*T[2]-l,b.yOffset+=l*T[1]+h*T[3]-h):b.xOffset=b.yOffset=0),o||t.setAttribute("data-svg-origin",s.join(" "))},Wt=function(t){var e,i=G("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),r=this.parentNode,n=this.nextSibling,o=this.style.cssText;if(Ut.appendChild(i),i.appendChild(this),this.style.display="block",t)try{e=this.getBBox(),this._originalGetBBox=this.getBBox,this.getBBox=Wt}catch(t){}else this._originalGetBBox&&(e=this._originalGetBBox());return n?r.insertBefore(this,n):r.appendChild(this),Ut.removeChild(i),this.style.cssText=o,e},Vt=function(t){return!(!Bt||!t.getCTM||t.parentNode&&!t.ownerSVGElement||!function(t){try{return t.getBBox()}catch(e){return Wt.call(t,!0)}}(t))},zt=[1,0,0,1,0,0],Ht=function(t,e){var i,r,n,o,s,a,l=t._gsTransform||new Ft,h=t.style;if(Dt?r=tt(t,kt,null,!0):t.currentStyle&&(r=(r=t.currentStyle.filter.match(D))&&4===r.length?[r[0].substr(4),Number(r[2].substr(4)),Number(r[1].substr(4)),r[3].substr(4),l.x||0,l.y||0].join(","):""),i=!r||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,!Dt||!(a=!$(t)||"none"===$(t).display)&&t.parentNode||(a&&(o=h.display,h.display="block"),t.parentNode||(s=1,Ut.appendChild(t)),i=!(r=tt(t,kt,null,!0))||"none"===r||"matrix(1, 0, 0, 1, 0, 0)"===r,o?h.display=o:a&&Qt(h,"display"),s&&Ut.removeChild(t)),(l.svg||t.getCTM&&Vt(t))&&(i&&-1!==(h[Dt]+"").indexOf("matrix")&&(r=h[Dt],i=0),n=t.getAttribute("transform"),i&&n&&(-1!==n.indexOf("matrix")?(r=n,i=0):-1!==n.indexOf("translate")&&(r="matrix(1,0,0,1,"+n.match(/(?:\-|\b)[\d\-\.e]+\b/gi).join(",")+")",i=0))),i)return zt;for(n=(r||"").match(_)||[],wt=n.length;--wt>-1;)o=Number(n[wt]),n[wt]=(s=o-(o|=0))?(1e5*s+(s<0?-.5:.5)|0)/1e5+o:o;return e&&n.length>6?[n[0],n[1],n[4],n[5],n[12],n[13]]:n},Yt=z.getTransform=function(t,i,r,n){if(t._gsTransform&&r&&!n)return t._gsTransform;var o,s,l,h,u,c,p=r&&t._gsTransform||new Ft,f=p.scaleX<0,d=1e5,g=Nt&&(parseFloat(tt(t,Lt,i,!1,"0 0 0").split(" ")[2])||p.zOrigin)||0,m=parseFloat(a.defaultTransformPerspective)||0;if(p.svg=!(!t.getCTM||!Vt(t)),p.svg&&(Gt(t,tt(t,Lt,i,!1,"50% 50%")+"",p,t.getAttribute("data-svg-origin")),Et=a.useSVGTransformAttr||Xt),(o=Ht(t))!==zt){if(16===o.length){var v,y,_,x,b,T=o[0],w=o[1],S=o[2],A=o[3],P=o[4],E=o[5],C=o[6],O=o[7],I=o[8],M=o[9],R=o[10],D=o[12],k=o[13],L=o[14],N=o[11],F=Math.atan2(C,R);p.zOrigin&&(D=I*(L=-p.zOrigin)-o[12],k=M*L-o[13],L=R*L+p.zOrigin-o[14]),p.rotationX=F*B,F&&(v=P*(x=Math.cos(-F))+I*(b=Math.sin(-F)),y=E*x+M*b,_=C*x+R*b,I=P*-b+I*x,M=E*-b+M*x,R=C*-b+R*x,N=O*-b+N*x,P=v,E=y,C=_),F=Math.atan2(-S,R),p.rotationY=F*B,F&&(y=w*(x=Math.cos(-F))-M*(b=Math.sin(-F)),_=S*x-R*b,M=w*b+M*x,R=S*b+R*x,N=A*b+N*x,T=v=T*x-I*b,w=y,S=_),F=Math.atan2(w,T),p.rotation=F*B,F&&(v=T*(x=Math.cos(F))+w*(b=Math.sin(F)),y=P*x+E*b,_=I*x+M*b,w=w*x-T*b,E=E*x-P*b,M=M*x-I*b,T=v,P=y,I=_),p.rotationX&&Math.abs(p.rotationX)+Math.abs(p.rotation)>359.9&&(p.rotationX=p.rotation=0,p.rotationY=180-p.rotationY),F=Math.atan2(P,E),p.scaleX=(Math.sqrt(T*T+w*w+S*S)*d+.5|0)/d,p.scaleY=(Math.sqrt(E*E+C*C)*d+.5|0)/d,p.scaleZ=(Math.sqrt(I*I+M*M+R*R)*d+.5|0)/d,T/=p.scaleX,P/=p.scaleY,w/=p.scaleX,E/=p.scaleY,Math.abs(F)>2e-5?(p.skewX=F*B,P=0,"simple"!==p.skewType&&(p.scaleY*=1/Math.cos(F))):p.skewX=0,p.perspective=N?1/(N<0?-N:N):0,p.x=D,p.y=k,p.z=L,p.svg&&(p.x-=p.xOrigin-(p.xOrigin*T-p.yOrigin*P),p.y-=p.yOrigin-(p.yOrigin*w-p.xOrigin*E))}else if(!Nt||n||!o.length||p.x!==o[4]||p.y!==o[5]||!p.rotationX&&!p.rotationY){var j=o.length>=6,U=j?o[0]:1,X=o[1]||0,G=o[2]||0,W=j?o[3]:1;p.x=o[4]||0,p.y=o[5]||0,l=Math.sqrt(U*U+X*X),h=Math.sqrt(W*W+G*G),u=U||X?Math.atan2(X,U)*B:p.rotation||0,c=G||W?Math.atan2(G,W)*B+u:p.skewX||0,p.scaleX=l,p.scaleY=h,p.rotation=u,p.skewX=c,Nt&&(p.rotationX=p.rotationY=p.z=0,p.perspective=m,p.scaleZ=1),p.svg&&(p.x-=p.xOrigin-(p.xOrigin*U+p.yOrigin*G),p.y-=p.yOrigin-(p.xOrigin*X+p.yOrigin*W))}for(s in Math.abs(p.skewX)>90&&Math.abs(p.skewX)<270&&(f?(p.scaleX*=-1,p.skewX+=p.rotation<=0?180:-180,p.rotation+=p.rotation<=0?180:-180):(p.scaleY*=-1,p.skewX+=p.skewX<=0?180:-180)),p.zOrigin=g,p)p[s]<2e-5&&p[s]>-2e-5&&(p[s]=0)}return r&&(t._gsTransform=p,p.svg&&(Et&&t.style[Dt]?e.delayedCall(.001,(function(){Qt(t.style,Dt)})):!Et&&t.getAttribute("transform")&&e.delayedCall(.001,(function(){t.removeAttribute("transform")})))),p},qt=function(t){var e,i,r=this.data,n=-r.rotation*F,o=n+r.skewX*F,s=1e5,a=(Math.cos(n)*r.scaleX*s|0)/s,l=(Math.sin(n)*r.scaleX*s|0)/s,h=(Math.sin(o)*-r.scaleY*s|0)/s,u=(Math.cos(o)*r.scaleY*s|0)/s,c=this.t.style,p=this.t.currentStyle;if(p){i=l,l=-h,h=-i,e=p.filter,c.filter="";var f,d,g=this.t.offsetWidth,v=this.t.offsetHeight,y="absolute"!==p.position,_="progid:DXImageTransform.Microsoft.Matrix(M11="+a+", M12="+l+", M21="+h+", M22="+u,x=r.x+g*r.xPercent/100,b=r.y+v*r.yPercent/100;if(null!=r.ox&&(x+=(f=(r.oxp?g*r.ox*.01:r.ox)-g/2)-(f*a+(d=(r.oyp?v*r.oy*.01:r.oy)-v/2)*l),b+=d-(f*h+d*u)),_+=y?", Dx="+((f=g/2)-(f*a+(d=v/2)*l)+x)+", Dy="+(d-(f*h+d*u)+b)+")":", sizingMethod='auto expand')",-1!==e.indexOf("DXImageTransform.Microsoft.Matrix(")?c.filter=e.replace(k,_):c.filter=_+" "+e,0!==t&&1!==t||1===a&&0===l&&0===h&&1===u&&(y&&-1===_.indexOf("Dx=0, Dy=0")||S.test(e)&&100!==parseFloat(RegExp.$1)||-1===e.indexOf(e.indexOf("Alpha"))&&c.removeAttribute("filter")),!y){var T,A,P,E=m<8?1:-1;for(f=r.ieOffsetX||0,d=r.ieOffsetY||0,r.ieOffsetX=Math.round((g-((a<0?-a:a)*g+(l<0?-l:l)*v))/2+x),r.ieOffsetY=Math.round((v-((u<0?-u:u)*v+(h<0?-h:h)*g))/2+b),wt=0;wt<4;wt++)P=(i=-1!==(T=p[A=st[wt]]).indexOf("px")?parseFloat(T):et(this.t,A,parseFloat(T),T.replace(w,""))||0)!==r[A]?wt<2?-r.ieOffsetX:-r.ieOffsetY:wt<2?f-r.ieOffsetX:d-r.ieOffsetY,c[A]=(r[A]=Math.round(i-P*(0===wt||2===wt?1:E)))+"px"}}},Kt=z.set3DTransformRatio=z.setTransformRatio=function(t){var e,i,r,n,o,s,a,l,h,u,c,p,f,g,m,v,y,_,x,b,T,w=this.data,S=this.t.style,A=w.rotation,P=w.rotationX,E=w.rotationY,C=w.scaleX,O=w.scaleY,I=w.scaleZ,M=w.x,R=w.y,D=w.z,k=w.svg,L=w.perspective,N=w.force3D,B=w.skewY,j=w.skewX;if(B&&(j+=B,A+=B),!((1!==t&&0!==t||"auto"!==N||this.tween._totalTime!==this.tween._totalDuration&&this.tween._totalTime)&&N||D||L||E||P||1!==I)||Et&&k||!Nt)A||j||k?(A*=F,b=j*F,T=1e5,i=Math.cos(A)*C,o=Math.sin(A)*C,r=Math.sin(A-b)*-O,s=Math.cos(A-b)*O,b&&"simple"===w.skewType&&(e=Math.tan(b-B*F),r*=e=Math.sqrt(1+e*e),s*=e,B&&(e=Math.tan(B*F),i*=e=Math.sqrt(1+e*e),o*=e)),k&&(M+=w.xOrigin-(w.xOrigin*i+w.yOrigin*r)+w.xOffset,R+=w.yOrigin-(w.xOrigin*o+w.yOrigin*s)+w.yOffset,Et&&(w.xPercent||w.yPercent)&&(m=this.t.getBBox(),M+=.01*w.xPercent*m.width,R+=.01*w.yPercent*m.height),M<(m=1e-6)&&M>-m&&(M=0),R<m&&R>-m&&(R=0)),x=(i*T|0)/T+","+(o*T|0)/T+","+(r*T|0)/T+","+(s*T|0)/T+","+M+","+R+")",k&&Et?this.t.setAttribute("transform","matrix("+x):S[Dt]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+x):S[Dt]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix(":"matrix(")+C+",0,0,"+O+","+M+","+R+")";else{if(d&&(C<(m=1e-4)&&C>-m&&(C=I=2e-5),O<m&&O>-m&&(O=I=2e-5),!L||w.z||w.rotationX||w.rotationY||(L=0)),A||j)A*=F,v=i=Math.cos(A),y=o=Math.sin(A),j&&(A-=j*F,v=Math.cos(A),y=Math.sin(A),"simple"===w.skewType&&(e=Math.tan((j-B)*F),v*=e=Math.sqrt(1+e*e),y*=e,w.skewY&&(e=Math.tan(B*F),i*=e=Math.sqrt(1+e*e),o*=e))),r=-y,s=v;else{if(!(E||P||1!==I||L||k))return void(S[Dt]=(w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) translate3d(":"translate3d(")+M+"px,"+R+"px,"+D+"px)"+(1!==C||1!==O?" scale("+C+","+O+")":""));i=s=1,r=o=0}u=1,n=a=l=h=c=p=0,f=L?-1/L:0,g=w.zOrigin,m=1e-6,",","0",(A=E*F)&&(v=Math.cos(A),l=-(y=Math.sin(A)),c=f*-y,n=i*y,a=o*y,u=v,f*=v,i*=v,o*=v),(A=P*F)&&(e=r*(v=Math.cos(A))+n*(y=Math.sin(A)),_=s*v+a*y,h=u*y,p=f*y,n=r*-y+n*v,a=s*-y+a*v,u*=v,f*=v,r=e,s=_),1!==I&&(n*=I,a*=I,u*=I,f*=I),1!==O&&(r*=O,s*=O,h*=O,p*=O),1!==C&&(i*=C,o*=C,l*=C,c*=C),(g||k)&&(g&&(M+=n*-g,R+=a*-g,D+=u*-g+g),k&&(M+=w.xOrigin-(w.xOrigin*i+w.yOrigin*r)+w.xOffset,R+=w.yOrigin-(w.xOrigin*o+w.yOrigin*s)+w.yOffset),M<m&&M>-m&&(M="0"),R<m&&R>-m&&(R="0"),D<m&&D>-m&&(D=0)),x=w.xPercent||w.yPercent?"translate("+w.xPercent+"%,"+w.yPercent+"%) matrix3d(":"matrix3d(",x+=(i<m&&i>-m?"0":i)+","+(o<m&&o>-m?"0":o)+","+(l<m&&l>-m?"0":l),x+=","+(c<m&&c>-m?"0":c)+","+(r<m&&r>-m?"0":r)+","+(s<m&&s>-m?"0":s),P||E||1!==I?(x+=","+(h<m&&h>-m?"0":h)+","+(p<m&&p>-m?"0":p)+","+(n<m&&n>-m?"0":n),x+=","+(a<m&&a>-m?"0":a)+","+(u<m&&u>-m?"0":u)+","+(f<m&&f>-m?"0":f)+","):x+=",0,0,0,0,1,0,",x+=M+","+R+","+D+","+(L?1+-D/L:1)+")",S[Dt]=x}};(u=Ft.prototype).x=u.y=u.z=u.skewX=u.skewY=u.rotation=u.rotationX=u.rotationY=u.zOrigin=u.xPercent=u.yPercent=u.xOffset=u.yOffset=0,u.scaleX=u.scaleY=u.scaleZ=1,At("transform,scale,scaleX,scaleY,scaleZ,x,y,z,rotation,rotationX,rotationY,rotationZ,skewX,skewY,shortRotation,shortRotationX,shortRotationY,shortRotationZ,transformOrigin,svgOrigin,transformPerspective,directionalRotation,parseTransform,force3D,skewType,xPercent,yPercent,smoothOrigin",{parser:function(t,e,i,r,n,s,l){if(r._lastParsedTransform===l)return n;r._lastParsedTransform=l;var h,u=l.scale&&"function"==typeof l.scale?l.scale:0;"function"==typeof l[i]&&(h=l[i],l[i]=e),u&&(l.scale=u(y,t));var c,p,f,d,g,m,_,x,b,T=t._gsTransform,w=t.style,S=Rt.length,A=l,P={},E=Yt(t,o,!0,A.parseTransform),C=A.transform&&("function"==typeof A.transform?A.transform(y,v):A.transform);if(E.skewType=A.skewType||E.skewType||a.defaultSkewType,r._transform=E,C&&"string"==typeof C&&Dt)(p=W.style)[Dt]=C,p.display="block",p.position="absolute",X.body.appendChild(W),c=Yt(W,null,!1),"simple"===E.skewType&&(c.scaleY*=Math.cos(c.skewX*F)),E.svg&&(m=E.xOrigin,_=E.yOrigin,c.x-=E.xOffset,c.y-=E.yOffset,(A.transformOrigin||A.svgOrigin)&&(C={},Gt(t,lt(A.transformOrigin),C,A.svgOrigin,A.smoothOrigin,!0),m=C.xOrigin,_=C.yOrigin,c.x-=C.xOffset-E.xOffset,c.y-=C.yOffset-E.yOffset),(m||_)&&(x=Ht(W,!0),c.x-=m-(m*x[0]+_*x[2]),c.y-=_-(m*x[1]+_*x[3]))),X.body.removeChild(W),c.perspective||(c.perspective=E.perspective),null!=A.xPercent&&(c.xPercent=ut(A.xPercent,E.xPercent)),null!=A.yPercent&&(c.yPercent=ut(A.yPercent,E.yPercent));else if("object"==typeof A){if(c={scaleX:ut(null!=A.scaleX?A.scaleX:A.scale,E.scaleX),scaleY:ut(null!=A.scaleY?A.scaleY:A.scale,E.scaleY),scaleZ:ut(A.scaleZ,E.scaleZ),x:ut(A.x,E.x),y:ut(A.y,E.y),z:ut(A.z,E.z),xPercent:ut(A.xPercent,E.xPercent),yPercent:ut(A.yPercent,E.yPercent),perspective:ut(A.transformPerspective,E.perspective)},null!=(g=A.directionalRotation))if("object"==typeof g)for(p in g)A[p]=g[p];else A.rotation=g;"string"==typeof A.x&&-1!==A.x.indexOf("%")&&(c.x=0,c.xPercent=ut(A.x,E.xPercent)),"string"==typeof A.y&&-1!==A.y.indexOf("%")&&(c.y=0,c.yPercent=ut(A.y,E.yPercent)),c.rotation=ct("rotation"in A?A.rotation:"shortRotation"in A?A.shortRotation+"_short":"rotationZ"in A?A.rotationZ:E.rotation,E.rotation,"rotation",P),Nt&&(c.rotationX=ct("rotationX"in A?A.rotationX:"shortRotationX"in A?A.shortRotationX+"_short":E.rotationX||0,E.rotationX,"rotationX",P),c.rotationY=ct("rotationY"in A?A.rotationY:"shortRotationY"in A?A.shortRotationY+"_short":E.rotationY||0,E.rotationY,"rotationY",P)),c.skewX=ct(A.skewX,E.skewX),c.skewY=ct(A.skewY,E.skewY)}for(Nt&&null!=A.force3D&&(E.force3D=A.force3D,d=!0),(f=E.force3D||E.z||E.rotationX||E.rotationY||c.z||c.rotationX||c.rotationY||c.perspective)||null==A.scale||(c.scaleZ=1);--S>-1;)((C=c[b=Rt[S]]-E[b])>1e-6||C<-1e-6||null!=A[b]||null!=j[b])&&(d=!0,n=new xt(E,b,E[b],C,n),b in P&&(n.e=P[b]),n.xs0=0,n.plugin=s,r._overwriteProps.push(n.n));return C=A.transformOrigin,E.svg&&(C||A.svgOrigin)&&(m=E.xOffset,_=E.yOffset,Gt(t,lt(C),c,A.svgOrigin,A.smoothOrigin),n=bt(E,"xOrigin",(T?E:c).xOrigin,c.xOrigin,n,"transformOrigin"),n=bt(E,"yOrigin",(T?E:c).yOrigin,c.yOrigin,n,"transformOrigin"),m===E.xOffset&&_===E.yOffset||(n=bt(E,"xOffset",T?m:E.xOffset,E.xOffset,n,"transformOrigin"),n=bt(E,"yOffset",T?_:E.yOffset,E.yOffset,n,"transformOrigin")),C="0px 0px"),(C||Nt&&f&&E.zOrigin)&&(Dt?(d=!0,b=Lt,C=(C||tt(t,b,o,!1,"50% 50%"))+"",(n=new xt(w,b,0,0,n,-1,"transformOrigin")).b=w[b],n.plugin=s,Nt?(p=E.zOrigin,C=C.split(" "),E.zOrigin=(C.length>2&&(0===p||"0px"!==C[2])?parseFloat(C[2]):p)||0,n.xs0=n.e=C[0]+" "+(C[1]||"50%")+" 0px",(n=new xt(E,"zOrigin",0,0,n,-1,n.n)).b=p,n.xs0=n.e=E.zOrigin):n.xs0=n.e=C):lt(C+"",E)),d&&(r._transformType=E.svg&&Et||!f&&3!==this._transformType?2:3),h&&(l[i]=h),u&&(l.scale=u),n},prefix:!0}),At("boxShadow",{defaultValue:"0px 0px 0px 0px #999",prefix:!0,color:!0,multi:!0,keyword:"inset"}),At("borderRadius",{defaultValue:"0px",parser:function(t,e,i,n,s,a){e=this.format(e);var l,h,u,c,p,f,d,g,m,v,y,_,x,b,T,w,S=["borderTopLeftRadius","borderTopRightRadius","borderBottomRightRadius","borderBottomLeftRadius"],A=t.style;for(m=parseFloat(t.offsetWidth),v=parseFloat(t.offsetHeight),l=e.split(" "),h=0;h<S.length;h++)this.p.indexOf("border")&&(S[h]=J(S[h])),-1!==(p=c=tt(t,S[h],o,!1,"0px")).indexOf(" ")&&(c=p.split(" "),p=c[0],c=c[1]),f=u=l[h],d=parseFloat(p),_=p.substr((d+"").length),(x="="===f.charAt(1))?(g=parseInt(f.charAt(0)+"1",10),f=f.substr(2),g*=parseFloat(f),y=f.substr((g+"").length-(g<0?1:0))||""):(g=parseFloat(f),y=f.substr((g+"").length)),""===y&&(y=r[i]||_),y!==_&&(b=et(t,"borderLeft",d,_),T=et(t,"borderTop",d,_),"%"===y?(p=b/m*100+"%",c=T/v*100+"%"):"em"===y?(p=b/(w=et(t,"borderLeft",1,"em"))+"em",c=T/w+"em"):(p=b+"px",c=T+"px"),x&&(f=parseFloat(p)+g+y,u=parseFloat(c)+g+y)),s=Tt(A,S[h],p+" "+c,f+" "+u,!1,"0px",s);return s},prefix:!0,formatter:vt("0px 0px 0px 0px",!1,!0)}),At("borderBottomLeftRadius,borderBottomRightRadius,borderTopLeftRadius,borderTopRightRadius",{defaultValue:"0px",parser:function(t,e,i,r,n,s){return Tt(t.style,i,this.format(tt(t,i,o,!1,"0px 0px")),this.format(e),!1,"0px",n)},prefix:!0,formatter:vt("0px 0px",!1,!0)}),At("backgroundPosition",{defaultValue:"0 0",parser:function(t,e,i,r,n,s){var a,l,h,u,c,p,f="background-position",d=o||$(t,null),g=this.format((d?m?d.getPropertyValue(f+"-x")+" "+d.getPropertyValue(f+"-y"):d.getPropertyValue(f):t.currentStyle.backgroundPositionX+" "+t.currentStyle.backgroundPositionY)||"0 0"),v=this.format(e);if(-1!==g.indexOf("%")!=(-1!==v.indexOf("%"))&&v.split(",").length<2&&(p=tt(t,"backgroundImage").replace(I,""))&&"none"!==p){for(a=g.split(" "),l=v.split(" "),V.setAttribute("src",p),h=2;--h>-1;)(u=-1!==(g=a[h]).indexOf("%"))!==(-1!==l[h].indexOf("%"))&&(c=0===h?t.offsetWidth-V.width:t.offsetHeight-V.height,a[h]=u?parseFloat(g)/100*c+"px":parseFloat(g)/c*100+"%");g=a.join(" ")}return this.parseComplex(t.style,g,v,n,s)},formatter:lt}),At("backgroundSize",{defaultValue:"0 0",formatter:function(t){return lt(-1===(t+="").indexOf(" ")?t+" "+t:t)}}),At("perspective",{defaultValue:"0px",prefix:!0}),At("perspectiveOrigin",{defaultValue:"50% 50%",prefix:!0}),At("transformStyle",{prefix:!0}),At("backfaceVisibility",{prefix:!0}),At("userSelect",{prefix:!0}),At("margin",{parser:yt("marginTop,marginRight,marginBottom,marginLeft")}),At("padding",{parser:yt("paddingTop,paddingRight,paddingBottom,paddingLeft")}),At("clip",{defaultValue:"rect(0px,0px,0px,0px)",parser:function(t,e,i,r,n,s){var a,l,h;return m<9?(l=t.currentStyle,h=m<8?" ":",",a="rect("+l.clipTop+h+l.clipRight+h+l.clipBottom+h+l.clipLeft+")",e=this.format(e).split(",").join(h)):(a=this.format(tt(t,this.p,o,!1,this.dflt)),e=this.format(e)),this.parseComplex(t.style,a,e,n,s)}}),At("textShadow",{defaultValue:"0px 0px 0px #999",color:!0,multi:!0}),At("autoRound,strictUnits",{parser:function(t,e,i,r,n){return n}}),At("border",{defaultValue:"0px solid #000",parser:function(t,e,i,r,n,s){var a=tt(t,"borderTopWidth",o,!1,"0px"),l=this.format(e).split(" "),h=l[0].replace(w,"");return"px"!==h&&(a=parseFloat(a)/et(t,"borderTopWidth",1,h)+h),this.parseComplex(t.style,this.format(a+" "+tt(t,"borderTopStyle",o,!1,"solid")+" "+tt(t,"borderTopColor",o,!1,"#000")),l.join(" "),n,s)},color:!0,formatter:function(t){var e=t.split(" ");return e[0]+" "+(e[1]||"solid")+" "+(t.match(mt)||["#000"])[0]}}),At("borderWidth",{parser:yt("borderTopWidth,borderRightWidth,borderBottomWidth,borderLeftWidth")}),At("float,cssFloat,styleFloat",{parser:function(t,e,i,r,n,o){var s=t.style,a="cssFloat"in s?"cssFloat":"styleFloat";return new xt(s,a,0,0,n,-1,i,!1,0,s[a],e)}});var Zt=function(t){var e,i=this.t,r=i.filter||tt(this.data,"filter")||"",n=this.s+this.c*t|0;100===n&&(-1===r.indexOf("atrix(")&&-1===r.indexOf("radient(")&&-1===r.indexOf("oader(")?(i.removeAttribute("filter"),e=!tt(this.data,"filter")):(i.filter=r.replace(P,""),e=!0)),e||(this.xn1&&(i.filter=r=r||"alpha(opacity="+n+")"),-1===r.indexOf("pacity")?0===n&&this.xn1||(i.filter=r+" alpha(opacity="+n+")"):i.filter=r.replace(S,"opacity="+n))};At("opacity,alpha,autoAlpha",{defaultValue:"1",parser:function(t,e,i,r,n,s){var a=parseFloat(tt(t,"opacity",o,!1,"1")),l=t.style,h="autoAlpha"===i;return"string"==typeof e&&"="===e.charAt(1)&&(e=("-"===e.charAt(0)?-1:1)*parseFloat(e.substr(2))+a),h&&1===a&&"hidden"===tt(t,"visibility",o)&&0!==e&&(a=0),Y?n=new xt(l,"opacity",a,e-a,n):((n=new xt(l,"opacity",100*a,100*(e-a),n)).xn1=h?1:0,l.zoom=1,n.type=2,n.b="alpha(opacity="+n.s+")",n.e="alpha(opacity="+(n.s+n.c)+")",n.data=t,n.plugin=s,n.setRatio=Zt),h&&((n=new xt(l,"visibility",0,0,n,-1,null,!1,0,0!==a?"inherit":"hidden",0===e?"hidden":"inherit")).xs0="inherit",r._overwriteProps.push(n.n),r._overwriteProps.push(i)),n}});var Qt=function(t,e){e&&(t.removeProperty?("ms"!==e.substr(0,2)&&"webkit"!==e.substr(0,6)||(e="-"+e),t.removeProperty(e.replace(C,"-$1").toLowerCase())):t.removeAttribute(e))},Jt=function(t){if(this.t._gsClassPT=this,1===t||0===t){this.t.setAttribute("class",0===t?this.b:this.e);for(var e=this.data,i=this.t.style;e;)e.v?i[e.p]=e.v:Qt(i,e.p),e=e._next;1===t&&this.t._gsClassPT===this&&(this.t._gsClassPT=null)}else this.t.getAttribute("class")!==this.e&&this.t.setAttribute("class",this.e)};At("className",{parser:function(t,e,r,n,s,a,l){var h,u,c,p,f,d=t.getAttribute("class")||"",g=t.style.cssText;if((s=n._classNamePT=new xt(t,r,0,0,s,2)).setRatio=Jt,s.pr=-11,i=!0,s.b=d,u=rt(t,o),c=t._gsClassPT){for(p={},f=c.data;f;)p[f.p]=1,f=f._next;c.setRatio(1)}return t._gsClassPT=s,s.e="="!==e.charAt(1)?e:d.replace(new RegExp("(?:\\s|^)"+e.substr(2)+"(?![\\w-])"),"")+("+"===e.charAt(0)?" "+e.substr(2):""),t.setAttribute("class",s.e),h=nt(t,u,rt(t),l,p),t.setAttribute("class",d),s.data=h.firstMPT,t.style.cssText=g,s=s.xfirst=n.parse(t,h.difs,s,a)}});var $t=function(t){if((1===t||0===t)&&this.data._totalTime===this.data._totalDuration&&"isFromStart"!==this.data.data){var e,i,r,n,o,s=this.t.style,a=h.transform.parse;if("all"===this.e)s.cssText="",n=!0;else for(r=(e=this.e.split(" ").join("").split(",")).length;--r>-1;)i=e[r],h[i]&&(h[i].parse===a?n=!0:i="transformOrigin"===i?Lt:h[i].p),Qt(s,i);n&&(Qt(s,Dt),(o=this.t._gsTransform)&&(o.svg&&(this.t.removeAttribute("data-svg-origin"),this.t.removeAttribute("transform")),delete this.t._gsTransform))}};for(At("clearProps",{parser:function(t,e,r,n,o){return(o=new xt(t,r,0,0,o,2)).setRatio=$t,o.e=e,o.pr=-10,o.data=n._tween,i=!0,o}}),u="bezier,throwProps,physicsProps,physics2D".split(","),wt=u.length;wt--;)Pt(u[wt]);(u=a.prototype)._firstPT=u._lastParsedTransform=u._transform=null,u._onInitTween=function(t,e,n,l){if(!t.nodeType)return!1;this._target=v=t,this._tween=n,this._vars=e,y=l,c=e.autoRound,i=!1,r=e.suffixMap||a.suffixMap,o=$(t,""),s=this._overwriteProps;var u,d,m,_,x,b,T,w,S,P=t.style;if(p&&""===P.zIndex&&("auto"!==(u=tt(t,"zIndex",o))&&""!==u||this._addLazySet(P,"zIndex",0)),"string"==typeof e&&(_=P.cssText,u=rt(t,o),P.cssText=_+";"+e,u=nt(t,u,rt(t)).difs,!Y&&A.test(e)&&(u.opacity=parseFloat(RegExp.$1)),e=u,P.cssText=_),e.className?this._firstPT=d=h.className.parse(t,e.className,"className",this,null,null,e):this._firstPT=d=this.parse(t,e,null),this._transformType){for(S=3===this._transformType,Dt?f&&(p=!0,""===P.zIndex&&("auto"!==(T=tt(t,"zIndex",o))&&""!==T||this._addLazySet(P,"zIndex",0)),g&&this._addLazySet(P,"WebkitBackfaceVisibility",this._vars.WebkitBackfaceVisibility||(S?"visible":"hidden"))):P.zoom=1,m=d;m&&m._next;)m=m._next;w=new xt(t,"transform",0,0,null,2),this._linkCSSP(w,null,m),w.setRatio=Dt?Kt:qt,w.data=this._transform||Yt(t,o,!0),w.tween=n,w.pr=-1,s.pop()}if(i){for(;d;){for(b=d._next,m=_;m&&m.pr>d.pr;)m=m._next;(d._prev=m?m._prev:x)?d._prev._next=d:_=d,(d._next=m)?m._prev=d:x=d,d=b}this._firstPT=_}return!0},u.parse=function(t,e,i,n){var s,a,l,u,p,f,d,g,m,_,x=t.style;for(s in e){if("function"==typeof(f=e[s])&&(f=f(y,v)),a=h[s])i=a.parse(t,f,s,this,i,n,e);else{if("--"===s.substr(0,2)){this._tween._propLookup[s]=this._addTween.call(this._tween,t.style,"setProperty",$(t).getPropertyValue(s)+"",f+"",s,!1,s);continue}p=tt(t,s,o)+"",m="string"==typeof f,"color"===s||"fill"===s||"stroke"===s||-1!==s.indexOf("Color")||m&&E.test(f)?(m||(f=((f=dt(f)).length>3?"rgba(":"rgb(")+f.join(",")+")"),i=Tt(x,s,p,f,!0,"transparent",i,0,n)):m&&N.test(f)?i=Tt(x,s,p,f,!0,null,i,0,n):(d=(l=parseFloat(p))||0===l?p.substr((l+"").length):"",""!==p&&"auto"!==p||("width"===s||"height"===s?(l=at(t,s,o),d="px"):"left"===s||"top"===s?(l=it(t,s,o),d="px"):(l="opacity"!==s?0:1,d="")),(_=m&&"="===f.charAt(1))?(u=parseInt(f.charAt(0)+"1",10),f=f.substr(2),u*=parseFloat(f),g=f.replace(w,"")):(u=parseFloat(f),g=m?f.replace(w,""):""),""===g&&(g=s in r?r[s]:d),f=u||0===u?(_?u+l:u)+g:e[s],d!==g&&(""===g&&"lineHeight"!==s||(u||0===u)&&l&&(l=et(t,s,l,d),"%"===g?(l/=et(t,s,100,"%")/100,!0!==e.strictUnits&&(p=l+"%")):"em"===g||"rem"===g||"vw"===g||"vh"===g?l/=et(t,s,1,g):"px"!==g&&(u=et(t,s,u,g),g="px"),_&&(u||0===u)&&(f=u+l+g))),_&&(u+=l),!l&&0!==l||!u&&0!==u?void 0!==x[s]&&(f||f+""!="NaN"&&null!=f)?(i=new xt(x,s,u||l||0,0,i,-1,s,!1,0,p,f)).xs0="none"!==f||"display"!==s&&-1===s.indexOf("Style")?f:p:K(e[s]):(i=new xt(x,s,l,u-l,i,0,s,!1!==c&&("px"===g||"zIndex"===s),0,p,f)).xs0=g)}n&&i&&!i.plugin&&(i.plugin=n)}return i},u.setRatio=function(t){var e,i,r,n=this._firstPT;if(1!==t||this._tween._time!==this._tween._duration&&0!==this._tween._time)if(t||this._tween._time!==this._tween._duration&&0!==this._tween._time||-1e-6===this._tween._rawPrevTime)for(;n;){if(e=n.c*t+n.s,n.r?e=Math.round(e):e<1e-6&&e>-1e-6&&(e=0),n.type)if(1===n.type)if(2===(r=n.l))n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2;else if(3===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3;else if(4===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4;else if(5===r)n.t[n.p]=n.xs0+e+n.xs1+n.xn1+n.xs2+n.xn2+n.xs3+n.xn3+n.xs4+n.xn4+n.xs5;else{for(i=n.xs0+e+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}else-1===n.type?n.t[n.p]=n.xs0:n.setRatio&&n.setRatio(t);else n.t[n.p]=e+n.xs0;n=n._next}else for(;n;)2!==n.type?n.t[n.p]=n.b:n.setRatio(t),n=n._next;else for(;n;){if(2!==n.type)if(n.r&&-1!==n.type)if(e=Math.round(n.s+n.c),n.type){if(1===n.type){for(r=n.l,i=n.xs0+e+n.xs1,r=1;r<n.l;r++)i+=n["xn"+r]+n["xs"+(r+1)];n.t[n.p]=i}}else n.t[n.p]=e+n.xs0;else n.t[n.p]=n.e;else n.setRatio(t);n=n._next}},u._enableTransforms=function(t){this._transform=this._transform||Yt(this._target,o,!0),this._transformType=this._transform.svg&&Et||!t&&3!==this._transformType?2:3};var te=function(t){this.t[this.p]=this.e,this.data._linkCSSP(this,this._next,null,!0)};u._addLazySet=function(t,e,i){var r=this._firstPT=new xt(t,e,0,0,this._firstPT,2);r.e=i,r.setRatio=te,r.data=this},u._linkCSSP=function(t,e,i,r){return t&&(e&&(e._prev=t),t._next&&(t._next._prev=t._prev),t._prev?t._prev._next=t._next:this._firstPT===t&&(this._firstPT=t._next,r=!0),i?i._next=t:r||null!==this._firstPT||(this._firstPT=t),t._next=e,t._prev=i),t},u._mod=function(t){for(var e=this._firstPT;e;)"function"==typeof t[e.p]&&t[e.p]===Math.round&&(e.r=1),e=e._next},u._kill=function(e){var i,r,n,o=e;if(e.autoAlpha||e.alpha){for(r in o={},e)o[r]=e[r];o.opacity=1,o.autoAlpha&&(o.visibility=1)}for(e.className&&(i=this._classNamePT)&&((n=i.xfirst)&&n._prev?this._linkCSSP(n._prev,i._next,n._prev._prev):n===this._firstPT&&(this._firstPT=i._next),i._next&&this._linkCSSP(i._next,i._next._next,n._prev),this._classNamePT=null),i=this._firstPT;i;)i.plugin&&i.plugin!==r&&i.plugin._kill&&(i.plugin._kill(e),r=i.plugin),i=i._next;return t.prototype._kill.call(this,o)};var ee=function(t,e,i){var r,n,o,s;if(t.slice)for(n=t.length;--n>-1;)ee(t[n],e,i);else for(n=(r=t.childNodes).length;--n>-1;)s=(o=r[n]).type,o.style&&(e.push(rt(o)),i&&i.push(o)),1!==s&&9!==s&&11!==s||!o.childNodes.length||ee(o,e,i)};return a.cascadeTo=function(t,i,r){var n,o,s,a,l=e.to(t,i,r),h=[l],u=[],c=[],p=[],f=e._internals.reservedProps;for(t=l._targets||l.target,ee(t,u,p),l.render(i,!0,!0),ee(t,c),l.render(0,!0,!0),l._enabled(!0),n=p.length;--n>-1;)if((o=nt(p[n],u[n],c[n])).firstMPT){for(s in o=o.difs,r)f[s]&&(o[s]=r[s]);for(s in a={},o)a[s]=u[n][s];h.push(e.fromTo(p[n],i,a,o))}return h},t.activate([a]),a}),!0),function(){var t=n._gsDefine.plugin({propName:"roundProps",version:"1.6.0",priority:-1,API:2,init:function(t,e,i){return this._tween=i,!0}}),e=function(t){for(;t;)t.f||t.blob||(t.m=Math.round),t=t._next},i=t.prototype;i._onInitAllProps=function(){for(var t,i,r,n=this._tween,o=n.vars.roundProps.join?n.vars.roundProps:n.vars.roundProps.split(","),s=o.length,a={},l=n._propLookup.roundProps;--s>-1;)a[o[s]]=Math.round;for(s=o.length;--s>-1;)for(t=o[s],i=n._firstPT;i;)r=i._next,i.pg?i.t._mod(a):i.n===t&&(2===i.f&&i.t?e(i.t._firstPT):(this._add(i.t,t,i.s,i.c),r&&(r._prev=i._prev),i._prev?i._prev._next=r:n._firstPT===i&&(n._firstPT=r),i._next=i._prev=null,n._propLookup[t]=l)),i=r;return!1},i._add=function(t,e,i,r){this._addTween(t,e,i,i+r,e,Math.round),this._overwriteProps.push(e)}}(),n._gsDefine.plugin({propName:"attr",API:2,version:"0.6.1",init:function(t,e,i,r){var n,o;if("function"!=typeof t.setAttribute)return!1;for(n in e)"function"==typeof(o=e[n])&&(o=o(r,t)),this._addTween(t,"setAttribute",t.getAttribute(n)+"",o+"",n,!1,n),this._overwriteProps.push(n);return!0}}),n._gsDefine.plugin({propName:"directionalRotation",version:"0.3.1",API:2,init:function(t,e,i,r){"object"!=typeof e&&(e={rotation:e}),this.finals={};var n,o,s,a,l,h,u=!0===e.useRadians?2*Math.PI:360;for(n in e)"useRadians"!==n&&("function"==typeof(a=e[n])&&(a=a(r,t)),o=(h=(a+"").split("_"))[0],s=parseFloat("function"!=typeof t[n]?t[n]:t[n.indexOf("set")||"function"!=typeof t["get"+n.substr(3)]?n:"get"+n.substr(3)]()),l=(a=this.finals[n]="string"==typeof o&&"="===o.charAt(1)?s+parseInt(o.charAt(0)+"1",10)*Number(o.substr(2)):Number(o)||0)-s,h.length&&(-1!==(o=h.join("_")).indexOf("short")&&(l%=u)!==l%(u/2)&&(l=l<0?l+u:l-u),-1!==o.indexOf("_cw")&&l<0?l=(l+9999999999*u)%u-(l/u|0)*u:-1!==o.indexOf("ccw")&&l>0&&(l=(l-9999999999*u)%u-(l/u|0)*u)),(l>1e-6||l<-1e-6)&&(this._addTween(t,n,s,s+l,n),this._overwriteProps.push(n)));return!0},set:function(t){var e;if(1!==t)this._super.setRatio.call(this,t);else for(e=this._firstPT;e;)e.f?e.t[e.p](this.finals[e.p]):e.t[e.p]=this.finals[e.p],e=e._next}})._autoCSS=!0,n._gsDefine("easing.Back",["easing.Ease"],(function(t){var e,i,r,o=n.GreenSockGlobals||n,s=o.com.greensock,a=2*Math.PI,l=Math.PI/2,h=s._class,u=function(e,i){var r=h("easing."+e,(function(){}),!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,r},c=t.register||function(){},p=function(t,e,i,r,n){var o=h("easing."+t,{easeOut:new e,easeIn:new i,easeInOut:new r},!0);return c(o,t),o},f=function(t,e,i){this.t=t,this.v=e,i&&(this.next=i,i.prev=this,this.c=i.v-e,this.gap=i.t-t)},d=function(e,i){var r=h("easing."+e,(function(t){this._p1=t||0===t?t:1.70158,this._p2=1.525*this._p1}),!0),n=r.prototype=new t;return n.constructor=r,n.getRatio=i,n.config=function(t){return new r(t)},r},g=p("Back",d("BackOut",(function(t){return(t-=1)*t*((this._p1+1)*t+this._p1)+1})),d("BackIn",(function(t){return t*t*((this._p1+1)*t-this._p1)})),d("BackInOut",(function(t){return(t*=2)<1?.5*t*t*((this._p2+1)*t-this._p2):.5*((t-=2)*t*((this._p2+1)*t+this._p2)+2)}))),m=h("easing.SlowMo",(function(t,e,i){e=e||0===e?e:.7,null==t?t=.7:t>1&&(t=1),this._p=1!==t?e:0,this._p1=(1-t)/2,this._p2=t,this._p3=this._p1+this._p2,this._calcEnd=!0===i}),!0),v=m.prototype=new t;return v.constructor=m,v.getRatio=function(t){var e=t+(.5-t)*this._p;return t<this._p1?this._calcEnd?1-(t=1-t/this._p1)*t:e-(t=1-t/this._p1)*t*t*t*e:t>this._p3?this._calcEnd?1===t?0:1-(t=(t-this._p3)/this._p1)*t:e+(t-e)*(t=(t-this._p3)/this._p1)*t*t*t:this._calcEnd?1:e},m.ease=new m(.7,.7),v.config=m.config=function(t,e,i){return new m(t,e,i)},(v=(e=h("easing.SteppedEase",(function(t,e){t=t||1,this._p1=1/t,this._p2=t+(e?0:1),this._p3=e?1:0}),!0)).prototype=new t).constructor=e,v.getRatio=function(t){return t<0?t=0:t>=1&&(t=.999999999),((this._p2*t|0)+this._p3)*this._p1},v.config=e.config=function(t,i){return new e(t,i)},(v=(i=h("easing.RoughEase",(function(e){for(var i,r,n,o,s,a,l=(e=e||{}).taper||"none",h=[],u=0,c=0|(e.points||20),p=c,d=!1!==e.randomize,g=!0===e.clamp,m=e.template instanceof t?e.template:null,v="number"==typeof e.strength?.4*e.strength:.4;--p>-1;)i=d?Math.random():1/c*p,r=m?m.getRatio(i):i,n="none"===l?v:"out"===l?(o=1-i)*o*v:"in"===l?i*i*v:i<.5?(o=2*i)*o*.5*v:(o=2*(1-i))*o*.5*v,d?r+=Math.random()*n-.5*n:p%2?r+=.5*n:r-=.5*n,g&&(r>1?r=1:r<0&&(r=0)),h[u++]={x:i,y:r};for(h.sort((function(t,e){return t.x-e.x})),a=new f(1,1,null),p=c;--p>-1;)s=h[p],a=new f(s.x,s.y,a);this._prev=new f(0,0,0!==a.t?a:a.next)}),!0)).prototype=new t).constructor=i,v.getRatio=function(t){var e=this._prev;if(t>e.t){for(;e.next&&t>=e.t;)e=e.next;e=e.prev}else for(;e.prev&&t<=e.t;)e=e.prev;return this._prev=e,e.v+(t-e.t)/e.gap*e.c},v.config=function(t){return new i(t)},i.ease=new i,p("Bounce",u("BounceOut",(function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375})),u("BounceIn",(function(t){return(t=1-t)<1/2.75?1-7.5625*t*t:t<2/2.75?1-(7.5625*(t-=1.5/2.75)*t+.75):t<2.5/2.75?1-(7.5625*(t-=2.25/2.75)*t+.9375):1-(7.5625*(t-=2.625/2.75)*t+.984375)})),u("BounceInOut",(function(t){var e=t<.5;return(t=e?1-2*t:2*t-1)<1/2.75?t*=7.5625*t:t=t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375,e?.5*(1-t):.5*t+.5}))),p("Circ",u("CircOut",(function(t){return Math.sqrt(1-(t-=1)*t)})),u("CircIn",(function(t){return-(Math.sqrt(1-t*t)-1)})),u("CircInOut",(function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}))),p("Elastic",(r=function(e,i,r){var n=h("easing."+e,(function(t,e){this._p1=t>=1?t:1,this._p2=(e||r)/(t<1?t:1),this._p3=this._p2/a*(Math.asin(1/this._p1)||0),this._p2=a/this._p2}),!0),o=n.prototype=new t;return o.constructor=n,o.getRatio=i,o.config=function(t,e){return new n(t,e)},n})("ElasticOut",(function(t){return this._p1*Math.pow(2,-10*t)*Math.sin((t-this._p3)*this._p2)+1}),.3),r("ElasticIn",(function(t){return-this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)}),.3),r("ElasticInOut",(function(t){return(t*=2)<1?this._p1*Math.pow(2,10*(t-=1))*Math.sin((t-this._p3)*this._p2)*-.5:this._p1*Math.pow(2,-10*(t-=1))*Math.sin((t-this._p3)*this._p2)*.5+1}),.45)),p("Expo",u("ExpoOut",(function(t){return 1-Math.pow(2,-10*t)})),u("ExpoIn",(function(t){return Math.pow(2,10*(t-1))-.001})),u("ExpoInOut",(function(t){return(t*=2)<1?.5*Math.pow(2,10*(t-1)):.5*(2-Math.pow(2,-10*(t-1)))}))),p("Sine",u("SineOut",(function(t){return Math.sin(t*l)})),u("SineIn",(function(t){return 1-Math.cos(t*l)})),u("SineInOut",(function(t){return-.5*(Math.cos(Math.PI*t)-1)}))),h("easing.EaseLookup",{find:function(e){return t.map[e]}},!0),c(o.SlowMo,"SlowMo","ease,"),c(i,"RoughEase","ease,"),c(e,"SteppedEase","ease,"),g}),!0)})),n._gsDefine&&n._gsQueue.pop()(),function(i,n){"use strict";var o={},s=i.document,a=i.GreenSockGlobals=i.GreenSockGlobals||i;if(!a.TweenLite){var l,h,u,c,p,f,d,g=function(t){var e,i=t.split("."),r=a;for(e=0;e<i.length;e++)r[i[e]]=r=r[i[e]]||{};return r},m=g("com.greensock"),v=function(t){var e,i=[],r=t.length;for(e=0;e!==r;i.push(t[e++]));return i},y=function(){},_=(f=Object.prototype.toString,d=f.call([]),function(t){return null!=t&&(t instanceof Array||"object"==typeof t&&!!t.push&&f.call(t)===d)}),x={},b=function(i,n,s,l){this.sc=x[i]?x[i].sc:[],x[i]=this,this.gsClass=null,this.func=s;var h=[];this.check=function(u){for(var c,p,f,d,m=n.length,v=m;--m>-1;)(c=x[n[m]]||new b(n[m],[])).gsClass?(h[m]=c.gsClass,v--):u&&c.sc.push(this);if(0===v&&s){if(f=(p=("com.greensock."+i).split(".")).pop(),d=g(p.join("."))[f]=this.gsClass=s.apply(s,h),l)if(a[f]=o[f]=d,t.exports)if("TweenMax"===i)for(m in t.exports=o.TweenMax=d,o)d[m]=o[m];else o.TweenMax&&(o.TweenMax[f]=d);else void 0===(r=function(){return d}.apply(e,[]))||(t.exports=r);for(m=0;m<this.sc.length;m++)this.sc[m].check()}},this.check(!0)},T=i._gsDefine=function(t,e,i,r){return new b(t,e,i,r)},w=m._class=function(t,e,i){return e=e||function(){},T(t,[],(function(){return e}),i),e};T.globals=a;var S=[0,0,1,1],A=w("easing.Ease",(function(t,e,i,r){this._func=t,this._type=i||0,this._power=r||0,this._params=e?S.concat(e):S}),!0),P=A.map={},E=A.register=function(t,e,i,r){for(var n,o,s,a,l=e.split(","),h=l.length,u=(i||"easeIn,easeOut,easeInOut").split(",");--h>-1;)for(o=l[h],n=r?w("easing."+o,null,!0):m.easing[o]||{},s=u.length;--s>-1;)a=u[s],P[o+"."+a]=P[a+o]=n[a]=t.getRatio?t:t[a]||new t};for((u=A.prototype)._calcEnd=!1,u.getRatio=function(t){if(this._func)return this._params[0]=t,this._func.apply(null,this._params);var e=this._type,i=this._power,r=1===e?1-t:2===e?t:t<.5?2*t:2*(1-t);return 1===i?r*=r:2===i?r*=r*r:3===i?r*=r*r*r:4===i&&(r*=r*r*r*r),1===e?1-r:2===e?r:t<.5?r/2:1-r/2},h=(l=["Linear","Quad","Cubic","Quart","Quint,Strong"]).length;--h>-1;)u=l[h]+",Power"+h,E(new A(null,null,1,h),u,"easeOut",!0),E(new A(null,null,2,h),u,"easeIn"+(0===h?",easeNone":"")),E(new A(null,null,3,h),u,"easeInOut");P.linear=m.easing.Linear.easeIn,P.swing=m.easing.Quad.easeInOut;var C=w("events.EventDispatcher",(function(t){this._listeners={},this._eventTarget=t||this}));(u=C.prototype).addEventListener=function(t,e,i,r,n){n=n||0;var o,s,a=this._listeners[t],l=0;for(this!==c||p||c.wake(),null==a&&(this._listeners[t]=a=[]),s=a.length;--s>-1;)(o=a[s]).c===e&&o.s===i?a.splice(s,1):0===l&&o.pr<n&&(l=s+1);a.splice(l,0,{c:e,s:i,up:r,pr:n})},u.removeEventListener=function(t,e){var i,r=this._listeners[t];if(r)for(i=r.length;--i>-1;)if(r[i].c===e)return void r.splice(i,1)},u.dispatchEvent=function(t){var e,i,r,n=this._listeners[t];if(n)for((e=n.length)>1&&(n=n.slice(0)),i=this._eventTarget;--e>-1;)(r=n[e])&&(r.up?r.c.call(r.s||i,{type:t,target:i}):r.c.call(r.s||i))};var O=i.requestAnimationFrame,I=i.cancelAnimationFrame,M=Date.now||function(){return(new Date).getTime()},R=M();for(h=(l=["ms","moz","webkit","o"]).length;--h>-1&&!O;)O=i[l[h]+"RequestAnimationFrame"],I=i[l[h]+"CancelAnimationFrame"]||i[l[h]+"CancelRequestAnimationFrame"];w("Ticker",(function(t,e){var i,r,n,o,a,l=this,h=M(),u=!(!1===e||!O)&&"auto",f=500,d=33,g=function(t){var e,s,u=M()-R;u>f&&(h+=u-d),R+=u,l.time=(R-h)/1e3,e=l.time-a,(!i||e>0||!0===t)&&(l.frame++,a+=e+(e>=o?.004:o-e),s=!0),!0!==t&&(n=r(g)),s&&l.dispatchEvent("tick")};C.call(l),l.time=l.frame=0,l.tick=function(){g(!0)},l.lagSmoothing=function(t,e){if(!arguments.length)return f<1/1e-10;f=t||1/1e-10,d=Math.min(e,f,0)},l.sleep=function(){null!=n&&(u&&I?I(n):clearTimeout(n),r=y,n=null,l===c&&(p=!1))},l.wake=function(t){null!==n?l.sleep():t?h+=-R+(R=M()):l.frame>10&&(R=M()-f+5),r=0===i?y:u&&O?O:function(t){return setTimeout(t,1e3*(a-l.time)+1|0)},l===c&&(p=!0),g(2)},l.fps=function(t){if(!arguments.length)return i;o=1/((i=t)||60),a=this.time+o,l.wake()},l.useRAF=function(t){if(!arguments.length)return u;l.sleep(),u=t,l.fps(i)},l.fps(t),setTimeout((function(){"auto"===u&&l.frame<5&&"hidden"!==s.visibilityState&&l.useRAF(!1)}),1500)})),(u=m.Ticker.prototype=new m.events.EventDispatcher).constructor=m.Ticker;var D=w("core.Animation",(function(t,e){if(this.vars=e=e||{},this._duration=this._totalDuration=t||0,this._delay=Number(e.delay)||0,this._timeScale=1,this._active=!0===e.immediateRender,this.data=e.data,this._reversed=!0===e.reversed,J){p||c.wake();var i=this.vars.useFrames?Q:J;i.add(this,i._time),this.vars.paused&&this.paused(!0)}}));c=D.ticker=new m.Ticker,(u=D.prototype)._dirty=u._gc=u._initted=u._paused=!1,u._totalTime=u._time=0,u._rawPrevTime=-1,u._next=u._last=u._onUpdate=u._timeline=u.timeline=null,u._paused=!1;var k=function(){p&&M()-R>2e3&&("hidden"!==s.visibilityState||!c.lagSmoothing())&&c.wake();var t=setTimeout(k,2e3);t.unref&&t.unref()};k(),u.play=function(t,e){return null!=t&&this.seek(t,e),this.reversed(!1).paused(!1)},u.pause=function(t,e){return null!=t&&this.seek(t,e),this.paused(!0)},u.resume=function(t,e){return null!=t&&this.seek(t,e),this.paused(!1)},u.seek=function(t,e){return this.totalTime(Number(t),!1!==e)},u.restart=function(t,e){return this.reversed(!1).paused(!1).totalTime(t?-this._delay:0,!1!==e,!0)},u.reverse=function(t,e){return null!=t&&this.seek(t||this.totalDuration(),e),this.reversed(!0).paused(!1)},u.render=function(t,e,i){},u.invalidate=function(){return this._time=this._totalTime=0,this._initted=this._gc=!1,this._rawPrevTime=-1,!this._gc&&this.timeline||this._enabled(!0),this},u.isActive=function(){var t,e=this._timeline,i=this._startTime;return!e||!this._gc&&!this._paused&&e.isActive()&&(t=e.rawTime(!0))>=i&&t<i+this.totalDuration()/this._timeScale-1e-7},u._enabled=function(t,e){return p||c.wake(),this._gc=!t,this._active=this.isActive(),!0!==e&&(t&&!this.timeline?this._timeline.add(this,this._startTime-this._delay):!t&&this.timeline&&this._timeline._remove(this,!0)),!1},u._kill=function(t,e){return this._enabled(!1,!1)},u.kill=function(t,e){return this._kill(t,e),this},u._uncache=function(t){for(var e=t?this:this.timeline;e;)e._dirty=!0,e=e.timeline;return this},u._swapSelfInParams=function(t){for(var e=t.length,i=t.concat();--e>-1;)"{self}"===t[e]&&(i[e]=this);return i},u._callback=function(t){var e=this.vars,i=e[t],r=e[t+"Params"],n=e[t+"Scope"]||e.callbackScope||this;switch(r?r.length:0){case 0:i.call(n);break;case 1:i.call(n,r[0]);break;case 2:i.call(n,r[0],r[1]);break;default:i.apply(n,r)}},u.eventCallback=function(t,e,i,r){if("on"===(t||"").substr(0,2)){var n=this.vars;if(1===arguments.length)return n[t];null==e?delete n[t]:(n[t]=e,n[t+"Params"]=_(i)&&-1!==i.join("").indexOf("{self}")?this._swapSelfInParams(i):i,n[t+"Scope"]=r),"onUpdate"===t&&(this._onUpdate=e)}return this},u.delay=function(t){return arguments.length?(this._timeline.smoothChildTiming&&this.startTime(this._startTime+t-this._delay),this._delay=t,this):this._delay},u.duration=function(t){return arguments.length?(this._duration=this._totalDuration=t,this._uncache(!0),this._timeline.smoothChildTiming&&this._time>0&&this._time<this._duration&&0!==t&&this.totalTime(this._totalTime*(t/this._duration),!0),this):(this._dirty=!1,this._duration)},u.totalDuration=function(t){return this._dirty=!1,arguments.length?this.duration(t):this._totalDuration},u.time=function(t,e){return arguments.length?(this._dirty&&this.totalDuration(),this.totalTime(t>this._duration?this._duration:t,e)):this._time},u.totalTime=function(t,e,i){if(p||c.wake(),!arguments.length)return this._totalTime;if(this._timeline){if(t<0&&!i&&(t+=this.totalDuration()),this._timeline.smoothChildTiming){this._dirty&&this.totalDuration();var r=this._totalDuration,n=this._timeline;if(t>r&&!i&&(t=r),this._startTime=(this._paused?this._pauseTime:n._time)-(this._reversed?r-t:t)/this._timeScale,n._dirty||this._uncache(!1),n._timeline)for(;n._timeline;)n._timeline._time!==(n._startTime+n._totalTime)/n._timeScale&&n.totalTime(n._totalTime,!0),n=n._timeline}this._gc&&this._enabled(!0,!1),this._totalTime===t&&0!==this._duration||(B.length&&tt(),this.render(t,e,!1),B.length&&tt())}return this},u.progress=u.totalProgress=function(t,e){var i=this.duration();return arguments.length?this.totalTime(i*t,e):i?this._time/i:this.ratio},u.startTime=function(t){return arguments.length?(t!==this._startTime&&(this._startTime=t,this.timeline&&this.timeline._sortChildren&&this.timeline.add(this,t-this._delay)),this):this._startTime},u.endTime=function(t){return this._startTime+(0!=t?this.totalDuration():this.duration())/this._timeScale},u.timeScale=function(t){if(!arguments.length)return this._timeScale;var e,i;for(t=t||1e-10,this._timeline&&this._timeline.smoothChildTiming&&(i=(e=this._pauseTime)||0===e?e:this._timeline.totalTime(),this._startTime=i-(i-this._startTime)*this._timeScale/t),this._timeScale=t,i=this.timeline;i&&i.timeline;)i._dirty=!0,i.totalDuration(),i=i.timeline;return this},u.reversed=function(t){return arguments.length?(t!=this._reversed&&(this._reversed=t,this.totalTime(this._timeline&&!this._timeline.smoothChildTiming?this.totalDuration()-this._totalTime:this._totalTime,!0)),this):this._reversed},u.paused=function(t){if(!arguments.length)return this._paused;var e,i,r=this._timeline;return t!=this._paused&&r&&(p||t||c.wake(),i=(e=r.rawTime())-this._pauseTime,!t&&r.smoothChildTiming&&(this._startTime+=i,this._uncache(!1)),this._pauseTime=t?e:null,this._paused=t,this._active=this.isActive(),!t&&0!==i&&this._initted&&this.duration()&&(e=r.smoothChildTiming?this._totalTime:(e-this._startTime)/this._timeScale,this.render(e,e===this._totalTime,!0))),this._gc&&!t&&this._enabled(!0,!1),this};var L=w("core.SimpleTimeline",(function(t){D.call(this,0,t),this.autoRemoveChildren=this.smoothChildTiming=!0}));(u=L.prototype=new D).constructor=L,u.kill()._gc=!1,u._first=u._last=u._recent=null,u._sortChildren=!1,u.add=u.insert=function(t,e,i,r){var n,o;if(t._startTime=Number(e||0)+t._delay,t._paused&&this!==t._timeline&&(t._pauseTime=t._startTime+(this.rawTime()-t._startTime)/t._timeScale),t.timeline&&t.timeline._remove(t,!0),t.timeline=t._timeline=this,t._gc&&t._enabled(!0,!0),n=this._last,this._sortChildren)for(o=t._startTime;n&&n._startTime>o;)n=n._prev;return n?(t._next=n._next,n._next=t):(t._next=this._first,this._first=t),t._next?t._next._prev=t:this._last=t,t._prev=n,this._recent=t,this._timeline&&this._uncache(!0),this},u._remove=function(t,e){return t.timeline===this&&(e||t._enabled(!1,!0),t._prev?t._prev._next=t._next:this._first===t&&(this._first=t._next),t._next?t._next._prev=t._prev:this._last===t&&(this._last=t._prev),t._next=t._prev=t.timeline=null,t===this._recent&&(this._recent=this._last),this._timeline&&this._uncache(!0)),this},u.render=function(t,e,i){var r,n=this._first;for(this._totalTime=this._time=this._rawPrevTime=t;n;)r=n._next,(n._active||t>=n._startTime&&!n._paused&&!n._gc)&&(n._reversed?n.render((n._dirty?n.totalDuration():n._totalDuration)-(t-n._startTime)*n._timeScale,e,i):n.render((t-n._startTime)*n._timeScale,e,i)),n=r},u.rawTime=function(){return p||c.wake(),this._totalTime};var N=w("TweenLite",(function(t,e,r){if(D.call(this,e,r),this.render=N.prototype.render,null==t)throw"Cannot tween a null target.";this.target=t="string"!=typeof t?t:N.selector(t)||t;var n,o,s,a=t.jquery||t.length&&t!==i&&t[0]&&(t[0]===i||t[0].nodeType&&t[0].style&&!t.nodeType),l=this.vars.overwrite;if(this._overwrite=l=null==l?Z[N.defaultOverwrite]:"number"==typeof l?l>>0:Z[l],(a||t instanceof Array||t.push&&_(t))&&"number"!=typeof t[0])for(this._targets=s=v(t),this._propLookup=[],this._siblings=[],n=0;n<s.length;n++)(o=s[n])?"string"!=typeof o?o.length&&o!==i&&o[0]&&(o[0]===i||o[0].nodeType&&o[0].style&&!o.nodeType)?(s.splice(n--,1),this._targets=s=s.concat(v(o))):(this._siblings[n]=et(o,this,!1),1===l&&this._siblings[n].length>1&&rt(o,this,null,1,this._siblings[n])):"string"==typeof(o=s[n--]=N.selector(o))&&s.splice(n+1,1):s.splice(n--,1);else this._propLookup={},this._siblings=et(t,this,!1),1===l&&this._siblings.length>1&&rt(t,this,null,1,this._siblings);(this.vars.immediateRender||0===e&&0===this._delay&&!1!==this.vars.immediateRender)&&(this._time=-1e-10,this.render(Math.min(0,-this._delay)))}),!0),F=function(t){return t&&t.length&&t!==i&&t[0]&&(t[0]===i||t[0].nodeType&&t[0].style&&!t.nodeType)};(u=N.prototype=new D).constructor=N,u.kill()._gc=!1,u.ratio=0,u._firstPT=u._targets=u._overwrittenProps=u._startAt=null,u._notifyPluginsOfEnabled=u._lazy=!1,N.version="1.20.3",N.defaultEase=u._ease=new A(null,null,1,1),N.defaultOverwrite="auto",N.ticker=c,N.autoSleep=120,N.lagSmoothing=function(t,e){c.lagSmoothing(t,e)},N.selector=i.$||i.jQuery||function(t){var e=i.$||i.jQuery;return e?(N.selector=e,e(t)):void 0===s?t:s.querySelectorAll?s.querySelectorAll(t):s.getElementById("#"===t.charAt(0)?t.substr(1):t)};var B=[],j={},U=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,X=/[\+-]=-?[\.\d]/,G=function(t){for(var e,i=this._firstPT;i;)e=i.blob?1===t&&null!=this.end?this.end:t?this.join(""):this.start:i.c*t+i.s,i.m?e=i.m(e,this._target||i.t):e<1e-6&&e>-1e-6&&!i.blob&&(e=0),i.f?i.fp?i.t[i.p](i.fp,e):i.t[i.p](e):i.t[i.p]=e,i=i._next},W=function(t,e,i,r){var n,o,s,a,l,h,u,c=[],p=0,f="",d=0;for(c.start=t,c.end=e,t=c[0]=t+"",e=c[1]=e+"",i&&(i(c),t=c[0],e=c[1]),c.length=0,n=t.match(U)||[],o=e.match(U)||[],r&&(r._next=null,r.blob=1,c._firstPT=c._applyPT=r),l=o.length,a=0;a<l;a++)u=o[a],f+=(h=e.substr(p,e.indexOf(u,p)-p))||!a?h:",",p+=h.length,d?d=(d+1)%5:"rgba("===h.substr(-5)&&(d=1),u===n[a]||n.length<=a?f+=u:(f&&(c.push(f),f=""),s=parseFloat(n[a]),c.push(s),c._firstPT={_next:c._firstPT,t:c,p:c.length-1,s:s,c:("="===u.charAt(1)?parseInt(u.charAt(0)+"1",10)*parseFloat(u.substr(2)):parseFloat(u)-s)||0,f:0,m:d&&d<4?Math.round:0}),p+=u.length;return(f+=e.substr(p))&&c.push(f),c.setRatio=G,X.test(e)&&(c.end=null),c},V=function(t,e,i,r,n,o,s,a,l){"function"==typeof r&&(r=r(l||0,t));var h=typeof t[e],u="function"!==h?"":e.indexOf("set")||"function"!=typeof t["get"+e.substr(3)]?e:"get"+e.substr(3),c="get"!==i?i:u?s?t[u](s):t[u]():t[e],p="string"==typeof r&&"="===r.charAt(1),f={t:t,p:e,s:c,f:"function"===h,pg:0,n:n||e,m:o?"function"==typeof o?o:Math.round:0,pr:0,c:p?parseInt(r.charAt(0)+"1",10)*parseFloat(r.substr(2)):parseFloat(r)-c||0};if(("number"!=typeof c||"number"!=typeof r&&!p)&&(s||isNaN(c)||!p&&isNaN(r)||"boolean"==typeof c||"boolean"==typeof r?(f.fp=s,f={t:W(c,p?parseFloat(f.s)+f.c:r,a||N.defaultStringFilter,f),p:"setRatio",s:0,c:1,f:2,pg:0,n:n||e,pr:0,m:0}):(f.s=parseFloat(c),p||(f.c=parseFloat(r)-f.s||0))),f.c)return(f._next=this._firstPT)&&(f._next._prev=f),this._firstPT=f,f},z=N._internals={isArray:_,isSelector:F,lazyTweens:B,blobDif:W},H=N._plugins={},Y=z.tweenLookup={},q=0,K=z.reservedProps={ease:1,delay:1,overwrite:1,onComplete:1,onCompleteParams:1,onCompleteScope:1,useFrames:1,runBackwards:1,startAt:1,onUpdate:1,onUpdateParams:1,onUpdateScope:1,onStart:1,onStartParams:1,onStartScope:1,onReverseComplete:1,onReverseCompleteParams:1,onReverseCompleteScope:1,onRepeat:1,onRepeatParams:1,onRepeatScope:1,easeParams:1,yoyo:1,immediateRender:1,repeat:1,repeatDelay:1,data:1,paused:1,reversed:1,autoCSS:1,lazy:1,onOverwrite:1,callbackScope:1,stringFilter:1,id:1,yoyoEase:1},Z={none:0,all:1,auto:2,concurrent:3,allOnStart:4,preexisting:5,true:1,false:0},Q=D._rootFramesTimeline=new L,J=D._rootTimeline=new L,$=30,tt=z.lazyRender=function(){var t,e=B.length;for(j={};--e>-1;)(t=B[e])&&!1!==t._lazy&&(t.render(t._lazy[0],t._lazy[1],!0),t._lazy=!1);B.length=0};J._startTime=c.time,Q._startTime=c.frame,J._active=Q._active=!0,setTimeout(tt,1),D._updateRoot=N.render=function(){var t,e,i;if(B.length&&tt(),J.render((c.time-J._startTime)*J._timeScale,!1,!1),Q.render((c.frame-Q._startTime)*Q._timeScale,!1,!1),B.length&&tt(),c.frame>=$){for(i in $=c.frame+(parseInt(N.autoSleep,10)||120),Y){for(t=(e=Y[i].tweens).length;--t>-1;)e[t]._gc&&e.splice(t,1);0===e.length&&delete Y[i]}if((!(i=J._first)||i._paused)&&N.autoSleep&&!Q._first&&1===c._listeners.tick.length){for(;i&&i._paused;)i=i._next;i||c.sleep()}}},c.addEventListener("tick",D._updateRoot);var et=function(t,e,i){var r,n,o=t._gsTweenID;if(Y[o||(t._gsTweenID=o="t"+q++)]||(Y[o]={target:t,tweens:[]}),e&&((r=Y[o].tweens)[n=r.length]=e,i))for(;--n>-1;)r[n]===e&&r.splice(n,1);return Y[o].tweens},it=function(t,e,i,r){var n,o,s=t.vars.onOverwrite;return s&&(n=s(t,e,i,r)),(s=N.onOverwrite)&&(o=s(t,e,i,r)),!1!==n&&!1!==o},rt=function(t,e,i,r,n){var o,s,a,l;if(1===r||r>=4){for(l=n.length,o=0;o<l;o++)if((a=n[o])!==e)a._gc||a._kill(null,t,e)&&(s=!0);else if(5===r)break;return s}var h,u=e._startTime+1e-10,c=[],p=0,f=0===e._duration;for(o=n.length;--o>-1;)(a=n[o])===e||a._gc||a._paused||(a._timeline!==e._timeline?(h=h||nt(e,0,f),0===nt(a,h,f)&&(c[p++]=a)):a._startTime<=u&&a._startTime+a.totalDuration()/a._timeScale>u&&((f||!a._initted)&&u-a._startTime<=2e-10||(c[p++]=a)));for(o=p;--o>-1;)if(a=c[o],2===r&&a._kill(i,t,e)&&(s=!0),2!==r||!a._firstPT&&a._initted){if(2!==r&&!it(a,e))continue;a._enabled(!1,!1)&&(s=!0)}return s},nt=function(t,e,i){for(var r=t._timeline,n=r._timeScale,o=t._startTime;r._timeline;){if(o+=r._startTime,n*=r._timeScale,r._paused)return-100;r=r._timeline}return(o/=n)>e?o-e:i&&o===e||!t._initted&&o-e<2e-10?1e-10:(o+=t.totalDuration()/t._timeScale/n)>e+1e-10?0:o-e-1e-10};u._init=function(){var t,e,i,r,n,o,s=this.vars,a=this._overwrittenProps,l=this._duration,h=!!s.immediateRender,u=s.ease;if(s.startAt){for(r in this._startAt&&(this._startAt.render(-1,!0),this._startAt.kill()),n={},s.startAt)n[r]=s.startAt[r];if(n.data="isStart",n.overwrite=!1,n.immediateRender=!0,n.lazy=h&&!1!==s.lazy,n.startAt=n.delay=null,n.onUpdate=s.onUpdate,n.onUpdateParams=s.onUpdateParams,n.onUpdateScope=s.onUpdateScope||s.callbackScope||this,this._startAt=N.to(this.target,0,n),h)if(this._time>0)this._startAt=null;else if(0!==l)return}else if(s.runBackwards&&0!==l)if(this._startAt)this._startAt.render(-1,!0),this._startAt.kill(),this._startAt=null;else{for(r in 0!==this._time&&(h=!1),i={},s)K[r]&&"autoCSS"!==r||(i[r]=s[r]);if(i.overwrite=0,i.data="isFromStart",i.lazy=h&&!1!==s.lazy,i.immediateRender=h,this._startAt=N.to(this.target,0,i),h){if(0===this._time)return}else this._startAt._init(),this._startAt._enabled(!1),this.vars.immediateRender&&(this._startAt=null)}if(this._ease=u=u?u instanceof A?u:"function"==typeof u?new A(u,s.easeParams):P[u]||N.defaultEase:N.defaultEase,s.easeParams instanceof Array&&u.config&&(this._ease=u.config.apply(u,s.easeParams)),this._easeType=this._ease._type,this._easePower=this._ease._power,this._firstPT=null,this._targets)for(o=this._targets.length,t=0;t<o;t++)this._initProps(this._targets[t],this._propLookup[t]={},this._siblings[t],a?a[t]:null,t)&&(e=!0);else e=this._initProps(this.target,this._propLookup,this._siblings,a,0);if(e&&N._onPluginEvent("_onInitAllProps",this),a&&(this._firstPT||"function"!=typeof this.target&&this._enabled(!1,!1)),s.runBackwards)for(i=this._firstPT;i;)i.s+=i.c,i.c=-i.c,i=i._next;this._onUpdate=s.onUpdate,this._initted=!0},u._initProps=function(t,e,r,n,o){var s,a,l,h,u,c;if(null==t)return!1;for(s in j[t._gsTweenID]&&tt(),this.vars.css||t.style&&t!==i&&t.nodeType&&H.css&&!1!==this.vars.autoCSS&&function(t,e){var i,r={};for(i in t)K[i]||i in e&&"transform"!==i&&"x"!==i&&"y"!==i&&"width"!==i&&"height"!==i&&"className"!==i&&"border"!==i||!(!H[i]||H[i]&&H[i]._autoCSS)||(r[i]=t[i],delete t[i]);t.css=r}(this.vars,t),this.vars)if(c=this.vars[s],K[s])c&&(c instanceof Array||c.push&&_(c))&&-1!==c.join("").indexOf("{self}")&&(this.vars[s]=c=this._swapSelfInParams(c,this));else if(H[s]&&(h=new H[s])._onInitTween(t,this.vars[s],this,o)){for(this._firstPT=u={_next:this._firstPT,t:h,p:"setRatio",s:0,c:1,f:1,n:s,pg:1,pr:h._priority,m:0},a=h._overwriteProps.length;--a>-1;)e[h._overwriteProps[a]]=this._firstPT;(h._priority||h._onInitAllProps)&&(l=!0),(h._onDisable||h._onEnable)&&(this._notifyPluginsOfEnabled=!0),u._next&&(u._next._prev=u)}else e[s]=V.call(this,t,s,"get",c,s,0,null,this.vars.stringFilter,o);return n&&this._kill(n,t)?this._initProps(t,e,r,n,o):this._overwrite>1&&this._firstPT&&r.length>1&&rt(t,this,e,this._overwrite,r)?(this._kill(e,t),this._initProps(t,e,r,n,o)):(this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration)&&(j[t._gsTweenID]=!0),l)},u.render=function(t,e,i){var r,n,o,s,a=this._time,l=this._duration,h=this._rawPrevTime;if(t>=l-1e-7&&t>=0)this._totalTime=this._time=l,this.ratio=this._ease._calcEnd?this._ease.getRatio(1):1,this._reversed||(r=!0,n="onComplete",i=i||this._timeline.autoRemoveChildren),0===l&&(this._initted||!this.vars.lazy||i)&&(this._startTime===this._timeline._duration&&(t=0),(h<0||t<=0&&t>=-1e-7||1e-10===h&&"isPause"!==this.data)&&h!==t&&(i=!0,h>1e-10&&(n="onReverseComplete")),this._rawPrevTime=s=!e||t||h===t?t:1e-10);else if(t<1e-7)this._totalTime=this._time=0,this.ratio=this._ease._calcEnd?this._ease.getRatio(0):0,(0!==a||0===l&&h>0)&&(n="onReverseComplete",r=this._reversed),t<0&&(this._active=!1,0===l&&(this._initted||!this.vars.lazy||i)&&(h>=0&&(1e-10!==h||"isPause"!==this.data)&&(i=!0),this._rawPrevTime=s=!e||t||h===t?t:1e-10)),(!this._initted||this._startAt&&this._startAt.progress())&&(i=!0);else if(this._totalTime=this._time=t,this._easeType){var u=t/l,c=this._easeType,p=this._easePower;(1===c||3===c&&u>=.5)&&(u=1-u),3===c&&(u*=2),1===p?u*=u:2===p?u*=u*u:3===p?u*=u*u*u:4===p&&(u*=u*u*u*u),this.ratio=1===c?1-u:2===c?u:t/l<.5?u/2:1-u/2}else this.ratio=this._ease.getRatio(t/l);if(this._time!==a||i){if(!this._initted){if(this._init(),!this._initted||this._gc)return;if(!i&&this._firstPT&&(!1!==this.vars.lazy&&this._duration||this.vars.lazy&&!this._duration))return this._time=this._totalTime=a,this._rawPrevTime=h,B.push(this),void(this._lazy=[t,e]);this._time&&!r?this.ratio=this._ease.getRatio(this._time/l):r&&this._ease._calcEnd&&(this.ratio=this._ease.getRatio(0===this._time?0:1))}for(!1!==this._lazy&&(this._lazy=!1),this._active||!this._paused&&this._time!==a&&t>=0&&(this._active=!0),0===a&&(this._startAt&&(t>=0?this._startAt.render(t,!0,i):n||(n="_dummyGS")),this.vars.onStart&&(0===this._time&&0!==l||e||this._callback("onStart"))),o=this._firstPT;o;)o.f?o.t[o.p](o.c*this.ratio+o.s):o.t[o.p]=o.c*this.ratio+o.s,o=o._next;this._onUpdate&&(t<0&&this._startAt&&-1e-4!==t&&this._startAt.render(t,!0,i),e||(this._time!==a||r||i)&&this._callback("onUpdate")),n&&(this._gc&&!i||(t<0&&this._startAt&&!this._onUpdate&&-1e-4!==t&&this._startAt.render(t,!0,i),r&&(this._timeline.autoRemoveChildren&&this._enabled(!1,!1),this._active=!1),!e&&this.vars[n]&&this._callback(n),0===l&&1e-10===this._rawPrevTime&&1e-10!==s&&(this._rawPrevTime=0)))}},u._kill=function(t,e,i){if("all"===t&&(t=null),null==t&&(null==e||e===this.target))return this._lazy=!1,this._enabled(!1,!1);e="string"!=typeof e?e||this._targets||this.target:N.selector(e)||e;var r,n,o,s,a,l,h,u,c,p=i&&this._time&&i._startTime===this._startTime&&this._timeline===i._timeline;if((_(e)||F(e))&&"number"!=typeof e[0])for(r=e.length;--r>-1;)this._kill(t,e[r],i)&&(l=!0);else{if(this._targets){for(r=this._targets.length;--r>-1;)if(e===this._targets[r]){a=this._propLookup[r]||{},this._overwrittenProps=this._overwrittenProps||[],n=this._overwrittenProps[r]=t?this._overwrittenProps[r]||{}:"all";break}}else{if(e!==this.target)return!1;a=this._propLookup,n=this._overwrittenProps=t?this._overwrittenProps||{}:"all"}if(a){if(h=t||a,u=t!==n&&"all"!==n&&t!==a&&("object"!=typeof t||!t._tempKill),i&&(N.onOverwrite||this.vars.onOverwrite)){for(o in h)a[o]&&(c||(c=[]),c.push(o));if((c||!t)&&!it(this,i,e,c))return!1}for(o in h)(s=a[o])&&(p&&(s.f?s.t[s.p](s.s):s.t[s.p]=s.s,l=!0),s.pg&&s.t._kill(h)&&(l=!0),s.pg&&0!==s.t._overwriteProps.length||(s._prev?s._prev._next=s._next:s===this._firstPT&&(this._firstPT=s._next),s._next&&(s._next._prev=s._prev),s._next=s._prev=null),delete a[o]),u&&(n[o]=1);!this._firstPT&&this._initted&&this._enabled(!1,!1)}}return l},u.invalidate=function(){return this._notifyPluginsOfEnabled&&N._onPluginEvent("_onDisable",this),this._firstPT=this._overwrittenProps=this._startAt=this._onUpdate=null,this._notifyPluginsOfEnabled=this._active=this._lazy=!1,this._propLookup=this._targets?{}:[],D.prototype.invalidate.call(this),this.vars.immediateRender&&(this._time=-1e-10,this.render(Math.min(0,-this._delay))),this},u._enabled=function(t,e){if(p||c.wake(),t&&this._gc){var i,r=this._targets;if(r)for(i=r.length;--i>-1;)this._siblings[i]=et(r[i],this,!0);else this._siblings=et(this.target,this,!0)}return D.prototype._enabled.call(this,t,e),!(!this._notifyPluginsOfEnabled||!this._firstPT)&&N._onPluginEvent(t?"_onEnable":"_onDisable",this)},N.to=function(t,e,i){return new N(t,e,i)},N.from=function(t,e,i){return i.runBackwards=!0,i.immediateRender=0!=i.immediateRender,new N(t,e,i)},N.fromTo=function(t,e,i,r){return r.startAt=i,r.immediateRender=0!=r.immediateRender&&0!=i.immediateRender,new N(t,e,r)},N.delayedCall=function(t,e,i,r,n){return new N(e,0,{delay:t,onComplete:e,onCompleteParams:i,callbackScope:r,onReverseComplete:e,onReverseCompleteParams:i,immediateRender:!1,lazy:!1,useFrames:n,overwrite:0})},N.set=function(t,e){return new N(t,0,e)},N.getTweensOf=function(t,e){if(null==t)return[];var i,r,n,o;if(t="string"!=typeof t?t:N.selector(t)||t,(_(t)||F(t))&&"number"!=typeof t[0]){for(i=t.length,r=[];--i>-1;)r=r.concat(N.getTweensOf(t[i],e));for(i=r.length;--i>-1;)for(o=r[i],n=i;--n>-1;)o===r[n]&&r.splice(i,1)}else if(t._gsTweenID)for(i=(r=et(t).concat()).length;--i>-1;)(r[i]._gc||e&&!r[i].isActive())&&r.splice(i,1);return r||[]},N.killTweensOf=N.killDelayedCallsTo=function(t,e,i){"object"==typeof e&&(i=e,e=!1);for(var r=N.getTweensOf(t,e),n=r.length;--n>-1;)r[n]._kill(i,t)};var ot=w("plugins.TweenPlugin",(function(t,e){this._overwriteProps=(t||"").split(","),this._propName=this._overwriteProps[0],this._priority=e||0,this._super=ot.prototype}),!0);if(u=ot.prototype,ot.version="1.19.0",ot.API=2,u._firstPT=null,u._addTween=V,u.setRatio=G,u._kill=function(t){var e,i=this._overwriteProps,r=this._firstPT;if(null!=t[this._propName])this._overwriteProps=[];else for(e=i.length;--e>-1;)null!=t[i[e]]&&i.splice(e,1);for(;r;)null!=t[r.n]&&(r._next&&(r._next._prev=r._prev),r._prev?(r._prev._next=r._next,r._prev=null):this._firstPT===r&&(this._firstPT=r._next)),r=r._next;return!1},u._mod=u._roundProps=function(t){for(var e,i=this._firstPT;i;)(e=t[this._propName]||null!=i.n&&t[i.n.split(this._propName+"_").join("")])&&"function"==typeof e&&(2===i.f?i.t._applyPT.m=e:i.m=e),i=i._next},N._onPluginEvent=function(t,e){var i,r,n,o,s,a=e._firstPT;if("_onInitAllProps"===t){for(;a;){for(s=a._next,r=n;r&&r.pr>a.pr;)r=r._next;(a._prev=r?r._prev:o)?a._prev._next=a:n=a,(a._next=r)?r._prev=a:o=a,a=s}a=e._firstPT=n}for(;a;)a.pg&&"function"==typeof a.t[t]&&a.t[t]()&&(i=!0),a=a._next;return i},ot.activate=function(t){for(var e=t.length;--e>-1;)t[e].API===ot.API&&(H[(new t[e])._propName]=t[e]);return!0},T.plugin=function(t){if(!(t&&t.propName&&t.init&&t.API))throw"illegal plugin definition.";var e,i=t.propName,r=t.priority||0,n=t.overwriteProps,o={init:"_onInitTween",set:"setRatio",kill:"_kill",round:"_mod",mod:"_mod",initAll:"_onInitAllProps"},s=w("plugins."+i.charAt(0).toUpperCase()+i.substr(1)+"Plugin",(function(){ot.call(this,i,r),this._overwriteProps=n||[]}),!0===t.global),a=s.prototype=new ot(i);for(e in a.constructor=s,s.API=t.API,o)"function"==typeof t[e]&&(a[o[e]]=t[e]);return s.version=t.version,ot.activate([s]),s},l=i._gsQueue){for(h=0;h<l.length;h++)l[h]();for(u in x)x[u].func||i.console.log("GSAP encountered missing dependency: "+u)}p=!1}}(t.exports&&void 0!==i?i:this||window)}).call(this,i(3))},function(t,e,i){var r,n,o=this&&this.__extends||(n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function i(){this.constructor=t}n(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)});void 0===(r=function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=["pointerover","pointerenter","pointerdown","pointermove","pointerup","pointercancel","pointerout","pointerleave","gotpointercapture","lostpointercapture","mouseover","mouseenter","mousedown","mousemove","mouseup","mousecancel","mouseout","mouseleave","touchover","touchenter","touchdown","touchmove","touchup","touchcancel","touchout","touchleave"],r=function(t){function e(e,r){var n=t.call(this,e)||this;return n.styles=r,i.forEach((function(t){n.on(t,(function(t){return n.handleInteraction(t)}))})),n}return o(e,t),e.prototype.handleInteraction=function(t){var e=t,i=t.data.getLocalPosition(this),r=this.hitboxes.reduce((function(t,e){return void 0!==t?t:e.hitbox.contains(i.x,i.y)?e:void 0}),void 0);e.targetTag=void 0===r?void 0:r.tag},Object.defineProperty(e.prototype,"styles",{set:function(t){for(var i in this.textStyles={},this.textStyles.default=this.assign({},e.DEFAULT_TAG_STYLE),t)"default"===i?this.assign(this.textStyles.default,t[i]):this.textStyles[i]=this.assign({},t[i]);this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},enumerable:!0,configurable:!0}),e.prototype.setTagStyle=function(t,e){t in this.textStyles?this.assign(this.textStyles[t],e):this.textStyles[t]=this.assign({},e),this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},e.prototype.deleteTagStyle=function(t){"default"===t?this.textStyles.default=this.assign({},e.DEFAULT_TAG_STYLE):delete this.textStyles[t],this._style=new PIXI.TextStyle(this.textStyles.default),this.dirty=!0},e.prototype.getTagRegex=function(t,e){var i=Object.keys(this.textStyles).join("|"),r="<"+(i=t?"("+i+")":"(?:"+i+")")+"(?:\\s+[A-Za-z0-9_\\-]+=(?:\"(?:[^\"]+|\\\\\")*\"|'(?:[^']+|\\\\')*'))*\\s*>|</"+i+"\\s*>";return e&&(r="("+r+")"),new RegExp(r,"g")},e.prototype.getPropertyRegex=function(){return new RegExp("([A-Za-z0-9_\\-]+)=(?:\"((?:[^\"]+|\\\\\")*)\"|'((?:[^']+|\\\\')*)')","g")},e.prototype._getTextDataPerLine=function(t){for(var e=[],i=this.getTagRegex(!0,!1),r=[this.assign({},this.textStyles.default)],n=[{name:"default",properties:{}}],o=0;o<t.length;o++){for(var s=[],a=[],l=void 0;l=i.exec(t[o]);)a.push(l);if(0===a.length)s.push(this.createTextData(t[o],r[r.length-1],n[n.length-1]));else{for(var h=0,u=0;u<a.length;u++){if(a[u].index>h&&s.push(this.createTextData(t[o].substring(h,a[u].index),r[r.length-1],n[n.length-1])),"/"===a[u][0][1])r.length>1&&(r.pop(),n.pop());else{r.push(this.assign({},r[r.length-1],this.textStyles[a[u][1]]));for(var c={},p=this.getPropertyRegex(),f=void 0;f=p.exec(a[u][0]);)c[f[1]]=f[2]||f[3];n.push({name:a[u][1],properties:c})}h=a[u].index+a[u][0].length}h<t[o].length&&s.push(this.createTextData(t[o].substring(h),r[r.length-1],n[n.length-1]))}e.push(s)}return e},e.prototype.getFontString=function(t){return new PIXI.TextStyle(t).toFontString()},e.prototype.createTextData=function(t,e,i){return{text:t,style:e,width:0,height:0,fontProperties:void 0,tag:i}},e.prototype.getDropShadowPadding=function(){var t=this,e=0,i=0;return Object.keys(this.textStyles).forEach((function(r){var n=t.textStyles[r],o=n.dropShadowDistance,s=n.dropShadowBlur;e=Math.max(e,o||0),i=Math.max(i,s||0)})),e+i},e.prototype.updateText=function(){var t=this;if(this.dirty){this.hitboxes=[],this.texture.baseTexture.resolution=this.resolution;var i=this.textStyles,r=this.text;this._style.wordWrap&&(r=this.wordWrap(this.text));for(var n=r.split(/(?:\r\n|\r|\n)/),o=this._getTextDataPerLine(n),s=[],a=[],l=[],h=0,u=0;u<n.length;u++){for(var c=0,p=0,f=0,d=0;d<o[u].length;d++){var g=o[u][d].style;this.context.font=this.getFontString(g),o[u][d].width=this.context.measureText(o[u][d].text).width,0===o[u][d].text.length&&(o[u][d].width+=(o[u][d].text.length-1)*g.letterSpacing,d>0&&(c+=g.letterSpacing/2),d<o[u].length-1&&(c+=g.letterSpacing/2)),c+=o[u][d].width,o[u][d].fontProperties=PIXI.TextMetrics.measureFont(this.context.font),o[u][d].height=o[u][d].fontProperties.fontSize+o[u][d].style.strokeThickness,"number"==typeof g.valign?(p=Math.min(p,g.valign-o[u][d].fontProperties.descent),f=Math.max(f,g.valign+o[u][d].fontProperties.ascent)):(p=Math.min(p,-o[u][d].fontProperties.descent),f=Math.max(f,o[u][d].fontProperties.ascent))}s[u]=c,a[u]=p,l[u]=f,h=Math.max(h,c)}var m=Object.keys(i).map((function(t){return i[t]})).reduce((function(t,e){return Math.max(t,e.strokeThickness||0)}),0),v=this.getDropShadowPadding(),y=h+m+2*v,_=l.reduce((function(t,e){return t+e}),0)-a.reduce((function(t,e){return t+e}),0)+2*v;this.canvas.width=(y+this.context.lineWidth)*this.resolution,this.canvas.height=_*this.resolution,this.context.scale(this.resolution,this.resolution),this.context.textBaseline="alphabetic",this.context.lineJoin="round";var x=v,b=[];for(u=0;u<o.length;u++){var T=o[u],w=void 0;switch(this._style.align){case"left":w=v;break;case"center":w=v+(h-s[u])/2;break;case"right":w=v+h-s[u]}for(d=0;d<T.length;d++){var S=T[d],A=S.style,P=S.text,E=S.fontProperties,C=S.width,O=(S.height,S.tag);w+=m/2;var I=m/2+x+E.ascent;switch(A.valign){case"top":break;case"baseline":I+=l[u]-E.ascent;break;case"middle":I+=(l[u]-a[u]-E.ascent-E.descent)/2;break;case"bottom":I+=l[u]-a[u]-E.ascent-E.descent;break;default:I+=l[u]-E.ascent-A.valign}if(0===A.letterSpacing)b.push({text:P,style:A,x:w,y:I,width:C,ascent:E.ascent,descent:E.descent,tag:O}),w+=T[d].width;else{this.context.font=this.getFontString(T[d].style);for(var M=0;M<P.length;M++)(M>0||d>0)&&(w+=A.letterSpacing/2),b.push({text:P.charAt(M),style:A,x:w,y:I,width:C,ascent:E.ascent,descent:E.descent,tag:O}),w+=this.context.measureText(P.charAt(M)).width,(M<P.length-1||d<T.length-1)&&(w+=A.letterSpacing/2)}w-=m/2}x+=l[u]-a[u]}this.context.save(),b.forEach((function(e){var i=e.style,r=e.text,n=e.x,o=e.y;if(i.dropShadow){t.context.font=t.getFontString(i);var s=i.dropShadowColor;"number"==typeof s&&(s=PIXI.utils.hex2string(s)),t.context.shadowColor=s,t.context.shadowBlur=i.dropShadowBlur,t.context.shadowOffsetX=Math.cos(i.dropShadowAngle)*i.dropShadowDistance*t.resolution,t.context.shadowOffsetY=Math.sin(i.dropShadowAngle)*i.dropShadowDistance*t.resolution,t.context.fillText(r,n,o)}})),this.context.restore(),b.forEach((function(i){var r=i.style,n=i.text,o=i.x,s=i.y,a=i.width,l=i.ascent,h=i.descent,u=i.tag;t.context.font=t.getFontString(r);var c=r.stroke;"number"==typeof c&&(c=PIXI.utils.hex2string(c)),t.context.strokeStyle=c,t.context.lineWidth=r.strokeThickness;var p=r.fill;if("number"==typeof p)p=PIXI.utils.hex2string(p);else if(Array.isArray(p))for(var f=0;f<p.length;f++){var d=p[f];"number"==typeof d&&(p[f]=PIXI.utils.hex2string(d))}t.context.fillStyle=t._generateFillStyle(new PIXI.TextStyle(r),[n]),r.stroke&&r.strokeThickness&&t.context.strokeText(n,o,s),r.fill&&t.context.fillText(n,o,s);var g=-t._style.padding-t.getDropShadowPadding();t.hitboxes.push({tag:u,hitbox:new PIXI.Rectangle(o+g,s-l+g,a,l+h)}),(void 0===r.debug?e.debugOptions.spans.enabled:r.debug)&&(t.context.lineWidth=1,e.debugOptions.spans.bounding&&(t.context.fillStyle=e.debugOptions.spans.bounding,t.context.strokeStyle=e.debugOptions.spans.bounding,t.context.beginPath(),t.context.rect(o,s-l,a,l+h),t.context.fill(),t.context.stroke(),t.context.stroke()),e.debugOptions.spans.baseline&&(t.context.strokeStyle=e.debugOptions.spans.baseline,t.context.beginPath(),t.context.moveTo(o,s),t.context.lineTo(o+a,s),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.top&&(t.context.strokeStyle=e.debugOptions.spans.top,t.context.beginPath(),t.context.moveTo(o,s-l),t.context.lineTo(o+a,s-l),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.bottom&&(t.context.strokeStyle=e.debugOptions.spans.bottom,t.context.beginPath(),t.context.moveTo(o,s+h),t.context.lineTo(o+a,s+h),t.context.closePath(),t.context.stroke()),e.debugOptions.spans.text&&(t.context.fillStyle="#ffffff",t.context.strokeStyle="#000000",t.context.lineWidth=2,t.context.font="8px monospace",t.context.strokeText(u.name,o,s-l+8),t.context.fillText(u.name,o,s-l+8),t.context.strokeText(a.toFixed(2)+"x"+(l+h).toFixed(2),o,s-l+16),t.context.fillText(a.toFixed(2)+"x"+(l+h).toFixed(2),o,s-l+16)))})),e.debugOptions.objects.enabled&&(e.debugOptions.objects.bounding&&(this.context.fillStyle=e.debugOptions.objects.bounding,this.context.beginPath(),this.context.rect(0,0,y,_),this.context.fill()),e.debugOptions.objects.text&&(this.context.fillStyle="#ffffff",this.context.strokeStyle="#000000",this.context.lineWidth=2,this.context.font="8px monospace",this.context.strokeText(y.toFixed(2)+"x"+_.toFixed(2),0,8,y),this.context.fillText(y.toFixed(2)+"x"+_.toFixed(2),0,8,y))),this.updateTexture()}},e.prototype.wordWrap=function(t){var e="",i=this.getTagRegex(!0,!0),r=t.split("\n"),n=this._style.wordWrapWidth,o=[this.assign({},this.textStyles.default)];this.context.font=this.getFontString(this.textStyles.default);for(var s=0;s<r.length;s++){for(var a=n,l=r[s].split(i),h=!0,u=0;u<l.length;u++)if(i.test(l[u]))e+=l[u],"/"===l[u][1]?(u+=2,o.pop()):(u++,o.push(this.assign({},o[o.length-1],this.textStyles[l[u]])),u++),this.context.font=this.getFontString(o[o.length-1]);else for(var c=l[u].split(" "),p=0;p<c.length;p++){var f=this.context.measureText(c[p]).width;if(this._style.breakWords&&f>a){var d=c[p].split("");p>0&&(e+=" ",a-=this.context.measureText(" ").width);for(var g=0;g<d.length;g++){var m=this.context.measureText(d[g]).width;m>a?(e+="\n"+d[g],a=n-m):(e+=d[g],a-=m)}}else if(this._style.breakWords)e+=c[p],a-=f;else{var v=f+(p>0?this.context.measureText(" ").width:0);v>a?(h||(e+="\n"),e+=c[p],a=n-f):(a-=v,p>0&&(e+=" "),e+=c[p])}h=!1}s<r.length-1&&(e+="\n")}return e},e.prototype.updateTexture=function(){var t=this._texture,e=this.getDropShadowPadding();t.baseTexture.hasLoaded=!0,t.baseTexture.resolution=this.resolution,t.baseTexture.realWidth=this.canvas.width,t.baseTexture.realHeight=this.canvas.height,t.baseTexture.width=this.canvas.width/this.resolution,t.baseTexture.height=this.canvas.height/this.resolution,t.trim.width=t.frame.width=this.canvas.width/this.resolution,t.trim.height=t.frame.height=this.canvas.height/this.resolution,t.trim.x=-this._style.padding-e,t.trim.y=-this._style.padding-e,t.orig.width=t.frame.width-2*(this._style.padding+e),t.orig.height=t.frame.height-2*(this._style.padding+e),this._onTextureUpdate(),t.baseTexture.emit("update",t.baseTexture),this.dirty=!1},e.prototype.assign=function(t){for(var e=[],i=1;i<arguments.length;i++)e[i-1]=arguments[i];for(var r=0,n=e;r<n.length;r++){var o=n[r];for(var s in o)t[s]=o[s]}return t},e.DEFAULT_TAG_STYLE={align:"left",breakWords:!1,dropShadow:!1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"#000000",dropShadowDistance:5,fill:"black",fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",valign:"baseline",wordWrap:!1,wordWrapWidth:100},e.debugOptions={spans:{enabled:!1,baseline:"#44BB44",top:"#BB4444",bottom:"#4444BB",bounding:"rgba(255, 255, 255, 0.1)",text:!0},objects:{enabled:!1,bounding:"rgba(255, 255, 255, 0.05)",text:!0}},PIXI.MultiStyleText=e,e}(PIXI.Text);e.default=r}.apply(e,[i,e]))||(t.exports=r)},,,,,,,,,,,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";i.r(e);i(41),i(42),i(12),i(43),i(44),i(45),i(46),i(47),i(48),i(49),i(50),i(54),i(55),i(13),i(56),i(57),i(58),i(59)},function(t,e,i){(function(e){t.exports=function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){var i=e[s][1][t];return n(i||t)}),h,h.exports,t,e,i,r)}return i[s].exports}for(var o=!1,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){"use strict";function r(t){var e=32;return(t&=-t)&&e--,65535&t&&(e-=16),16711935&t&&(e-=8),252645135&t&&(e-=4),858993459&t&&(e-=2),1431655765&t&&(e-=1),e}i.INT_BITS=32,i.INT_MAX=2147483647,i.INT_MIN=-1<<31,i.sign=function(t){return(t>0)-(t<0)},i.abs=function(t){var e=t>>31;return(t^e)-e},i.min=function(t,e){return e^(t^e)&-(t<e)},i.max=function(t,e){return t^(t^e)&-(t<e)},i.isPow2=function(t){return!(t&t-1||!t)},i.log2=function(t){var e,i;return e=(t>65535)<<4,e|=i=((t>>>=e)>255)<<3,e|=i=((t>>>=i)>15)<<2,(e|=i=((t>>>=i)>3)<<1)|(t>>>=i)>>1},i.log10=function(t){return t>=1e9?9:t>=1e8?8:t>=1e7?7:t>=1e6?6:t>=1e5?5:t>=1e4?4:t>=1e3?3:t>=100?2:t>=10?1:0},i.popCount=function(t){return 16843009*((t=(858993459&(t-=t>>>1&1431655765))+(t>>>2&858993459))+(t>>>4)&252645135)>>>24},i.countTrailingZeros=r,i.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)},i.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},i.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,27030>>>(t&=15)&1};var n=new Array(256);!function(t){for(var e=0;e<256;++e){var i=e,r=e,n=7;for(i>>>=1;i;i>>>=1)r<<=1,r|=1&i,--n;t[e]=r<<n&255}}(n),i.reverse=function(t){return n[255&t]<<24|n[t>>>8&255]<<16|n[t>>>16&255]<<8|n[t>>>24&255]},i.interleave2=function(t,e){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t&=65535)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e&=65535)|e<<8))|e<<4))|e<<2))|e<<1))<<1},i.deinterleave2=function(t,e){return(t=65535&((t=16711935&((t=252645135&((t=858993459&((t=t>>>e&1431655765)|t>>>1))|t>>>2))|t>>>4))|t>>>16))<<16>>16},i.interleave3=function(t,e,i){return t=1227133513&((t=3272356035&((t=251719695&((t=4278190335&((t&=1023)|t<<16))|t<<8))|t<<4))|t<<2),(t|=(e=1227133513&((e=3272356035&((e=251719695&((e=4278190335&((e&=1023)|e<<16))|e<<8))|e<<4))|e<<2))<<1)|(i=1227133513&((i=3272356035&((i=251719695&((i=4278190335&((i&=1023)|i<<16))|i<<8))|i<<4))|i<<2))<<2},i.deinterleave3=function(t,e){return(t=1023&((t=4278190335&((t=251719695&((t=3272356035&((t=t>>>e&1227133513)|t>>>2))|t>>>4))|t>>>8))|t>>>16))<<22>>22},i.nextCombination=function(t){var e=t|t-1;return e+1|(~e&-~e)-1>>>r(t)+1}},{}],2:[function(t,e,i){"use strict";function r(t,e,i){i=i||2;var r,a,l,h,u,f,g,m=e&&e.length,v=m?e[0]*i:t.length,y=n(t,0,v,i,!0),_=[];if(!y||y.next===y.prev)return _;if(m&&(y=function(t,e,i,r){var s,a,l,h,u,f=[];for(s=0,a=e.length;s<a;s++)l=e[s]*r,h=s<a-1?e[s+1]*r:t.length,(u=n(t,l,h,r,!1))===u.next&&(u.steiner=!0),f.push(d(u));for(f.sort(c),s=0;s<f.length;s++)p(f[s],i),i=o(i,i.next);return i}(t,e,y,i)),t.length>80*i){r=l=t[0],a=h=t[1];for(var x=i;x<v;x+=i)(u=t[x])<r&&(r=u),(f=t[x+1])<a&&(a=f),u>l&&(l=u),f>h&&(h=f);g=0!==(g=Math.max(l-r,h-a))?1/g:0}return s(y,_,i,r,a,g),_}function n(t,e,i,r,n){var o,s;if(n===A(t,e,i,r)>0)for(o=e;o<i;o+=r)s=T(o,t[o],t[o+1],s);else for(o=i-r;o>=e;o-=r)s=T(o,t[o],t[o+1],s);return s&&y(s,s.next)&&(w(s),s=s.next),s}function o(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!y(r,r.next)&&0!==v(r.prev,r,r.next))r=r.next;else{if(w(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function s(t,e,i,r,n,c,p){if(t){!p&&c&&function(t,e,i,r){var n=t;do{null===n.z&&(n.z=f(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,o,s,a,l,h=1;do{for(i=t,t=null,o=null,s=0;i;){for(s++,r=i,a=0,e=0;e<h&&(a++,r=r.nextZ);e++);for(l=h;a>0||l>0&&r;)0!==a&&(0===l||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,l--),o?o.nextZ=n:t=n,n.prevZ=o,o=n;i=r}o.nextZ=null,h*=2}while(s>1)}(n)}(t,r,n,c);for(var d,g,m=t;t.prev!==t.next;)if(d=t.prev,g=t.next,c?l(t,r,n,c):a(t))e.push(d.i/i),e.push(t.i/i),e.push(g.i/i),w(t),t=g.next,m=g.next;else if((t=g)===m){p?1===p?s(t=h(t,e,i),e,i,r,n,c,2):2===p&&u(t,e,i,r,n,c):s(o(t),e,i,r,n,c,1);break}}}function a(t){var e=t.prev,i=t,r=t.next;if(v(e,i,r)>=0)return!1;for(var n=t.next.next;n!==t.prev;){if(g(e.x,e.y,i.x,i.y,r.x,r.y,n.x,n.y)&&v(n.prev,n,n.next)>=0)return!1;n=n.next}return!0}function l(t,e,i,r){var n=t.prev,o=t,s=t.next;if(v(n,o,s)>=0)return!1;for(var a=n.x<o.x?n.x<s.x?n.x:s.x:o.x<s.x?o.x:s.x,l=n.y<o.y?n.y<s.y?n.y:s.y:o.y<s.y?o.y:s.y,h=n.x>o.x?n.x>s.x?n.x:s.x:o.x>s.x?o.x:s.x,u=n.y>o.y?n.y>s.y?n.y:s.y:o.y>s.y?o.y:s.y,c=f(a,l,e,i,r),p=f(h,u,e,i,r),d=t.prevZ,m=t.nextZ;d&&d.z>=c&&m&&m.z<=p;){if(d!==t.prev&&d!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;if(d=d.prevZ,m!==t.prev&&m!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,m.x,m.y)&&v(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;d&&d.z>=c;){if(d!==t.prev&&d!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,d.x,d.y)&&v(d.prev,d,d.next)>=0)return!1;d=d.prevZ}for(;m&&m.z<=p;){if(m!==t.prev&&m!==t.next&&g(n.x,n.y,o.x,o.y,s.x,s.y,m.x,m.y)&&v(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(t,e,i){var r=t;do{var n=r.prev,o=r.next.next;!y(n,o)&&_(n,r,r.next,o)&&x(n,o)&&x(o,n)&&(e.push(n.i/i),e.push(r.i/i),e.push(o.i/i),w(r),w(r.next),r=t=o),r=r.next}while(r!==t);return r}function u(t,e,i,r,n,a){var l=t;do{for(var h=l.next.next;h!==l.prev;){if(l.i!==h.i&&m(l,h)){var u=b(l,h);return l=o(l,l.next),u=o(u,u.next),s(l,e,i,r,n,a),void s(u,e,i,r,n,a)}h=h.next}l=l.next}while(l!==t)}function c(t,e){return t.x-e.x}function p(t,e){if(e=function(t,e){var i,r=e,n=t.x,o=t.y,s=-1/0;do{if(o<=r.y&&o>=r.next.y&&r.next.y!==r.y){var a=r.x+(o-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>s){if(s=a,a===n){if(o===r.y)return r;if(o===r.next.y)return r.next}i=r.x<r.next.x?r:r.next}}r=r.next}while(r!==e);if(!i)return null;if(n===s)return i.prev;var l,h=i,u=i.x,c=i.y,p=1/0;for(r=i.next;r!==h;)n>=r.x&&r.x>=u&&n!==r.x&&g(o<c?n:s,o,u,c,o<c?s:n,o,r.x,r.y)&&((l=Math.abs(o-r.y)/(n-r.x))<p||l===p&&r.x>i.x)&&x(r,t)&&(i=r,p=l),r=r.next;return i}(t,e)){var i=b(e,t);o(i,i.next)}}function f(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=32767*(t-i)*n)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=32767*(e-r)*n)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function d(t){var e=t,i=t;do{e.x<i.x&&(i=e),e=e.next}while(e!==t);return i}function g(t,e,i,r,n,o,s,a){return(n-s)*(e-a)-(t-s)*(o-a)>=0&&(t-s)*(r-a)-(i-s)*(e-a)>=0&&(i-s)*(o-a)-(n-s)*(r-a)>=0}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&_(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&x(t,e)&&x(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,o=(t.y+e.y)/2;do{i.y>o!=i.next.y>o&&i.next.y!==i.y&&n<(i.next.x-i.x)*(o-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)}function v(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function y(t,e){return t.x===e.x&&t.y===e.y}function _(t,e,i,r){return!!(y(t,e)&&y(i,r)||y(t,r)&&y(i,e))||v(t,e,i)>0!=v(t,e,r)>0&&v(i,r,t)>0!=v(i,r,e)>0}function x(t,e){return v(t.prev,t,t.next)<0?v(t,e,t.next)>=0&&v(t,t.prev,e)>=0:v(t,e,t.prev)<0||v(t,t.next,e)<0}function b(t,e){var i=new S(t.i,t.x,t.y),r=new S(e.i,e.x,e.y),n=t.next,o=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,o.next=r,r.prev=o,r}function T(t,e,i,r){var n=new S(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function w(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function S(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function A(t,e,i,r){for(var n=0,o=e,s=i-r;o<i;o+=r)n+=(t[s]-t[o])*(t[o+1]+t[s+1]),s=o;return n}e.exports=r,e.exports.default=r,r.deviation=function(t,e,i,r){var n=e&&e.length,o=n?e[0]*i:t.length,s=Math.abs(A(t,0,o,i));if(n)for(var a=0,l=e.length;a<l;a++){var h=e[a]*i,u=a<l-1?e[a+1]*i:t.length;s-=Math.abs(A(t,h,u,i))}var c=0;for(a=0;a<r.length;a+=3){var p=r[a]*i,f=r[a+1]*i,d=r[a+2]*i;c+=Math.abs((t[p]-t[d])*(t[f+1]-t[p+1])-(t[p]-t[f])*(t[d+1]-t[p+1]))}return 0===s&&0===c?0:Math.abs((c-s)/s)},r.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var o=0;o<t[n].length;o++)for(var s=0;s<e;s++)i.vertices.push(t[n][o][s]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},{}],3:[function(t,e,i){"use strict";var r=Object.prototype.hasOwnProperty,n="~";function o(){}function s(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function a(){this._events=new o,this._eventsCount=0}Object.create&&(o.prototype=Object.create(null),(new o).__proto__||(n=!1)),a.prototype.eventNames=function(){var t,e,i=[];if(0===this._eventsCount)return i;for(e in t=this._events)r.call(t,e)&&i.push(n?e.slice(1):e);return Object.getOwnPropertySymbols?i.concat(Object.getOwnPropertySymbols(t)):i},a.prototype.listeners=function(t,e){var i=n?n+t:t,r=this._events[i];if(e)return!!r;if(!r)return[];if(r.fn)return[r.fn];for(var o=0,s=r.length,a=new Array(s);o<s;o++)a[o]=r[o].fn;return a},a.prototype.emit=function(t,e,i,r,o,s){var a=n?n+t:t;if(!this._events[a])return!1;var l,h,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,i),!0;case 4:return u.fn.call(u.context,e,i,r),!0;case 5:return u.fn.call(u.context,e,i,r,o),!0;case 6:return u.fn.call(u.context,e,i,r,o,s),!0}for(h=1,l=new Array(c-1);h<c;h++)l[h-1]=arguments[h];u.fn.apply(u.context,l)}else{var p,f=u.length;for(h=0;h<f;h++)switch(u[h].once&&this.removeListener(t,u[h].fn,void 0,!0),c){case 1:u[h].fn.call(u[h].context);break;case 2:u[h].fn.call(u[h].context,e);break;case 3:u[h].fn.call(u[h].context,e,i);break;case 4:u[h].fn.call(u[h].context,e,i,r);break;default:if(!l)for(p=1,l=new Array(c-1);p<c;p++)l[p-1]=arguments[p];u[h].fn.apply(u[h].context,l)}}return!0},a.prototype.on=function(t,e,i){var r=new s(e,i||this),o=n?n+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},a.prototype.once=function(t,e,i){var r=new s(e,i||this,!0),o=n?n+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},a.prototype.removeListener=function(t,e,i,r){var s=n?n+t:t;if(!this._events[s])return this;if(!e)return 0==--this._eventsCount?this._events=new o:delete this._events[s],this;var a=this._events[s];if(a.fn)a.fn!==e||r&&!a.once||i&&a.context!==i||(0==--this._eventsCount?this._events=new o:delete this._events[s]);else{for(var l=0,h=[],u=a.length;l<u;l++)(a[l].fn!==e||r&&!a[l].once||i&&a[l].context!==i)&&h.push(a[l]);h.length?this._events[s]=1===h.length?h[0]:h:0==--this._eventsCount?this._events=new o:delete this._events[s]}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new o:delete this._events[e])):(this._events=new o,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prototype.setMaxListeners=function(){return this},a.prefixed=n,a.EventEmitter=a,void 0!==e&&(e.exports=a)},{}],4:[function(t,e,i){!function(t){var i=/iPhone/i,r=/iPod/i,n=/iPad/i,o=/\bAndroid(?:.+)Mobile\b/i,s=/Android/i,a=/\bAndroid(?:.+)SD4930UR\b/i,l=/\bAndroid(?:.+)(?:KF[A-Z]{2,4})\b/i,h=/Windows Phone/i,u=/\bWindows(?:.+)ARM\b/i,c=/BlackBerry/i,p=/BB10/i,f=/Opera Mini/i,d=/\b(CriOS|Chrome)(?:.+)Mobile/i,g=/\Mobile(?:.+)Firefox\b/i;function m(t,e){return t.test(e)}function v(t){var e=t||("undefined"!=typeof navigator?navigator.userAgent:""),v=e.split("[FBAN");void 0!==v[1]&&(e=v[0]),void 0!==(v=e.split("Twitter"))[1]&&(e=v[0]);var y={apple:{phone:m(i,e)&&!m(h,e),ipod:m(r,e),tablet:!m(i,e)&&m(n,e)&&!m(h,e),device:(m(i,e)||m(r,e)||m(n,e))&&!m(h,e)},amazon:{phone:m(a,e),tablet:!m(a,e)&&m(l,e),device:m(a,e)||m(l,e)},android:{phone:!m(h,e)&&m(a,e)||!m(h,e)&&m(o,e),tablet:!m(h,e)&&!m(a,e)&&!m(o,e)&&(m(l,e)||m(s,e)),device:!m(h,e)&&(m(a,e)||m(l,e)||m(o,e)||m(s,e))},windows:{phone:m(h,e),tablet:m(u,e),device:m(h,e)||m(u,e)},other:{blackberry:m(c,e),blackberry10:m(p,e),opera:m(f,e),firefox:m(g,e),chrome:m(d,e),device:m(c,e)||m(p,e)||m(f,e)||m(g,e)||m(d,e)}};return y.any=y.apple.device||y.android.device||y.windows.device||y.other.device,y.phone=y.apple.phone||y.android.phone||y.windows.phone,y.tablet=y.apple.tablet||y.android.tablet||y.windows.tablet,y}void 0!==e&&e.exports&&"undefined"==typeof window?e.exports=v:void 0!==e&&e.exports&&"undefined"!=typeof window?e.exports=v():t.isMobile=v()}(this)},{}],5:[function(t,e,i){"use strict";Object.defineProperty(i,"__esModule",{value:!0});var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,i,r){void 0===i&&(i=!1),n(this,t),this._fn=e,this._once=i,this._thisArg=r,this._next=this._prev=this._owner=null}return r(t,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),t}();function s(t,e){return t._head?(t._tail._next=e,e._prev=t._tail,t._tail=e):(t._head=e,t._tail=e),e._owner=t,e}var a=function(){function t(){n(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var t=!(arguments.length<=0||void 0===arguments[0])&&arguments[0],e=this._head;if(t)return!!e;for(var i=[];e;)i.push(e),e=e._next;return i}},{key:"has",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#add(): First arg must be a Function.");return s(this,new o(t,!1,e))}},{key:"once",value:function(t){var e=arguments.length<=1||void 0===arguments[1]?null:arguments[1];if("function"!=typeof t)throw new Error("MiniSignal#once(): First arg must be a Function.");return s(this,new o(t,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof o))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner!==this||(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null),this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();a.MiniSignalBinding=o,i.default=a,e.exports=i.default},{}],6:[function(t,e,i){"use strict";var r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,o=Object.prototype.propertyIsEnumerable;function s(t){if(null==t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}e.exports=function(){try{if(!Object.assign)return!1;var t=new String("abc");if(t[5]="de","5"===Object.getOwnPropertyNames(t)[0])return!1;for(var e={},i=0;i<10;i++)e["_"+String.fromCharCode(i)]=i;if("0123456789"!==Object.getOwnPropertyNames(e).map((function(t){return e[t]})).join(""))return!1;var r={};return"abcdefghijklmnopqrst".split("").forEach((function(t){r[t]=t})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},r)).join("")}catch(t){return!1}}()?Object.assign:function(t,e){for(var i,a,l=s(t),h=1;h<arguments.length;h++){for(var u in i=Object(arguments[h]))n.call(i,u)&&(l[u]=i[u]);if(r){a=r(i);for(var c=0;c<a.length;c++)o.call(i,a[c])&&(l[a[c]]=i[a[c]])}}return l}},{}],7:[function(t,e,i){"use strict";e.exports=function(t,e){e=e||{};for(var i={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},r=i.parser[e.strictMode?"strict":"loose"].exec(t),n={},o=14;o--;)n[i.key[o]]=r[o]||"";return n[i.q.name]={},n[i.key[12]].replace(i.q.parser,(function(t,e,r){e&&(n[i.q.name][e]=r)})),n}},{}],8:[function(t,e,i){(function(t){function e(t,e){for(var i=0,r=t.length-1;r>=0;r--){var n=t[r];"."===n?t.splice(r,1):".."===n?(t.splice(r,1),i++):i&&(t.splice(r,1),i--)}if(e)for(;i--;i)t.unshift("..");return t}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(t){return r.exec(t).slice(1)};function o(t,e){if(t.filter)return t.filter(e);for(var i=[],r=0;r<t.length;r++)e(t[r],r,t)&&i.push(t[r]);return i}i.resolve=function(){for(var i="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var s=n>=0?arguments[n]:t.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(i=s+"/"+i,r="/"===s.charAt(0))}return(r?"/":"")+(i=e(o(i.split("/"),(function(t){return!!t})),!r).join("/"))||"."},i.normalize=function(t){var r=i.isAbsolute(t),n="/"===s(t,-1);return(t=e(o(t.split("/"),(function(t){return!!t})),!r).join("/"))||r||(t="."),t&&n&&(t+="/"),(r?"/":"")+t},i.isAbsolute=function(t){return"/"===t.charAt(0)},i.join=function(){var t=Array.prototype.slice.call(arguments,0);return i.normalize(o(t,(function(t,e){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t})).join("/"))},i.relative=function(t,e){function r(t){for(var e=0;e<t.length&&""===t[e];e++);for(var i=t.length-1;i>=0&&""===t[i];i--);return e>i?[]:t.slice(e,i-e+1)}t=i.resolve(t).substr(1),e=i.resolve(e).substr(1);for(var n=r(t.split("/")),o=r(e.split("/")),s=Math.min(n.length,o.length),a=s,l=0;l<s;l++)if(n[l]!==o[l]){a=l;break}var h=[];for(l=a;l<n.length;l++)h.push("..");return(h=h.concat(o.slice(a))).join("/")},i.sep="/",i.delimiter=":",i.dirname=function(t){var e=n(t),i=e[0],r=e[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},i.basename=function(t,e){var i=n(t)[2];return e&&i.substr(-1*e.length)===e&&(i=i.substr(0,i.length-e.length)),i},i.extname=function(t){return n(t)[3]};var s="b"==="ab".substr(-1)?function(t,e,i){return t.substr(e,i)}:function(t,e,i){return e<0&&(e=t.length+e),t.substr(e,i)}}).call(this,t("_process"))},{_process:26}],9:[function(t,e,i){var r=new ArrayBuffer(0),n=function(t,e,i,n){this.gl=t,this.buffer=t.createBuffer(),this.type=e||t.ARRAY_BUFFER,this.drawType=n||t.STATIC_DRAW,this.data=r,i&&this.upload(i),this._updateID=0};n.prototype.upload=function(t,e,i){i||this.bind();var r=this.gl;t=t||this.data,e=e||0,this.data.byteLength>=t.byteLength?r.bufferSubData(this.type,e,t):r.bufferData(this.type,t,this.drawType),this.data=t},n.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},n.createVertexBuffer=function(t,e,i){return new n(t,t.ARRAY_BUFFER,e,i)},n.createIndexBuffer=function(t,e,i){return new n(t,t.ELEMENT_ARRAY_BUFFER,e,i)},n.create=function(t,e,i,r){return new n(t,e,i,r)},n.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=n},{}],10:[function(t,e,i){var r=t("./GLTexture"),n=function(t,e,i){this.gl=t,this.framebuffer=t.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=i||100};n.prototype.enableTexture=function(t){var e=this.gl;this.texture=t||new r(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},n.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},n.prototype.clear=function(t,e,i,r){this.bind();var n=this.gl;n.clearColor(t,e,i,r),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)},n.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},n.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},n.prototype.resize=function(t,e){var i=this.gl;this.width=t,this.height=e,this.texture&&this.texture.uploadData(null,t,e),this.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,this.stencil),i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t,e))},n.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},n.createRGBA=function(t,e,i,o){var s=r.fromData(t,null,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new n(t,e,i);return a.enableTexture(s),a.unbind(),a},n.createFloat32=function(t,e,i,o){var s=new r.fromData(t,o,e,i);s.enableNearestScaling(),s.enableWrapClamp();var a=new n(t,e,i);return a.enableTexture(s),a.unbind(),a},e.exports=n},{"./GLTexture":12}],11:[function(t,e,i){var r=t("./shader/compileProgram"),n=t("./shader/extractAttributes"),o=t("./shader/extractUniforms"),s=t("./shader/setPrecision"),a=t("./shader/generateUniformAccessObject"),l=function(t,e,i,l,h){this.gl=t,l&&(e=s(e,l),i=s(i,l)),this.program=r(t,e,i,h),this.attributes=n(t,this.program),this.uniformData=o(t,this.program),this.uniforms=a(t,this.uniformData)};l.prototype.bind=function(){return this.gl.useProgram(this.program),this},l.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=l},{"./shader/compileProgram":17,"./shader/extractAttributes":19,"./shader/extractUniforms":20,"./shader/generateUniformAccessObject":21,"./shader/setPrecision":25}],12:[function(t,e,i){var r=function(t,e,i,r,n){this.gl=t,this.texture=t.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=i||-1,this.format=r||t.RGBA,this.type=n||t.UNSIGNED_BYTE};r.prototype.upload=function(t){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var i=t.videoWidth||t.width,r=t.videoHeight||t.height;r!==this.height||i!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,t):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,t),this.width=i,this.height=r};var n=!1;r.prototype.uploadData=function(t,e,i){this.bind();var r=this.gl;if(t instanceof Float32Array){if(!n){if(!r.getExtension("OES_texture_float"))throw new Error("floating point textures not available");n=!0}this.type=r.FLOAT}else this.type=this.type||r.UNSIGNED_BYTE;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?r.texImage2D(r.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,t||null):r.texSubImage2D(r.TEXTURE_2D,0,0,0,e,i,this.format,this.type,t||null),this.width=e,this.height=i},r.prototype.bind=function(t){var e=this.gl;void 0!==t&&e.activeTexture(e.TEXTURE0+t),e.bindTexture(e.TEXTURE_2D,this.texture)},r.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},r.prototype.minFilter=function(t){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,t?e.LINEAR:e.NEAREST)},r.prototype.magFilter=function(t){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,t?e.LINEAR:e.NEAREST)},r.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},r.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},r.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},r.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},r.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},r.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},r.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},r.fromSource=function(t,e,i){var n=new r(t);return n.premultiplyAlpha=i||!1,n.upload(e),n},r.fromData=function(t,e,i,n){var o=new r(t);return o.uploadData(e,i,n),o},e.exports=r},{}],13:[function(t,e,i){var r=t("./setVertexAttribArrays");function n(t,e){if(this.nativeVaoExtension=null,n.FORCE_NATIVE||(this.nativeVaoExtension=t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var i=t.getParameter(t.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:new Array(i),attribState:new Array(i)}}this.gl=t,this.attributes=[],this.indexBuffer=null,this.dirty=!1}n.prototype.constructor=n,e.exports=n,n.FORCE_NATIVE=!1,n.prototype.bind=function(){if(this.nativeVao){if(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty)return this.dirty=!1,this.activate(),this;this.indexBuffer&&this.indexBuffer.bind()}else this.activate();return this},n.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},n.prototype.activate=function(){for(var t=this.gl,e=null,i=0;i<this.attributes.length;i++){var n=this.attributes[i];e!==n.buffer&&(n.buffer.bind(),e=n.buffer),t.vertexAttribPointer(n.attribute.location,n.attribute.size,n.type||t.FLOAT,n.normalized||!1,n.stride||0,n.start||0)}return r(t,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},n.prototype.addAttribute=function(t,e,i,r,n,o){return this.attributes.push({buffer:t,attribute:e,location:e.location,type:i||this.gl.FLOAT,normalized:r||!1,stride:n||0,start:o||0}),this.dirty=!0,this},n.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},n.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},n.prototype.draw=function(t,e,i){var r=this.gl;return this.indexBuffer?r.drawElements(t,e||this.indexBuffer.data.length,r.UNSIGNED_SHORT,2*(i||0)):r.drawArrays(t,i,e||this.getSize()),this},n.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},n.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":16}],14:[function(t,e,i){e.exports=function(t,e){var i=t.getContext("webgl",e)||t.getContext("experimental-webgl",e);if(!i)throw new Error("This browser does not support webGL. Try using the canvas renderer");return i}},{}],15:[function(t,e,i){var r={createContext:t("./createContext"),setVertexAttribArrays:t("./setVertexAttribArrays"),GLBuffer:t("./GLBuffer"),GLFramebuffer:t("./GLFramebuffer"),GLShader:t("./GLShader"),GLTexture:t("./GLTexture"),VertexArrayObject:t("./VertexArrayObject"),shader:t("./shader")};void 0!==e&&e.exports&&(e.exports=r),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=r)},{"./GLBuffer":9,"./GLFramebuffer":10,"./GLShader":11,"./GLTexture":12,"./VertexArrayObject":13,"./createContext":14,"./setVertexAttribArrays":16,"./shader":22}],16:[function(t,e,i){e.exports=function(t,e,i){var r;if(i){var n=i.tempAttribState,o=i.attribState;for(r=0;r<n.length;r++)n[r]=!1;for(r=0;r<e.length;r++)n[e[r].attribute.location]=!0;for(r=0;r<o.length;r++)o[r]!==n[r]&&(o[r]=n[r],i.attribState[r]?t.enableVertexAttribArray(r):t.disableVertexAttribArray(r))}else for(r=0;r<e.length;r++){var s=e[r];t.enableVertexAttribArray(s.attribute.location)}}},{}],17:[function(t,e,i){var r=function(t,e,i){var r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),t.getShaderParameter(r,t.COMPILE_STATUS)?r:null};e.exports=function(t,e,i,n){var o=r(t,t.VERTEX_SHADER,e),s=r(t,t.FRAGMENT_SHADER,i),a=t.createProgram();if(t.attachShader(a,o),t.attachShader(a,s),n)for(var l in n)t.bindAttribLocation(a,n[l],l);return t.linkProgram(a),t.getProgramParameter(a,t.LINK_STATUS)||(t.getProgramInfoLog(a),t.deleteProgram(a),a=null),t.deleteShader(o),t.deleteShader(s),a}},{}],18:[function(t,e,i){var r=function(t){for(var e=new Array(t),i=0;i<e.length;i++)e[i]=!1;return e};e.exports=function(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"sampler2D":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"bool":return!1;case"bvec2":return r(2*e);case"bvec3":return r(3*e);case"bvec4":return r(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}}},{}],19:[function(t,e,i){var r=t("./mapType"),n=t("./mapSize"),o=function(t,e,i,r){gl.vertexAttribPointer(this.location,this.size,t||gl.FLOAT,e||!1,i||0,r||0)};e.exports=function(t,e){for(var i={},s=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES),a=0;a<s;a++){var l=t.getActiveAttrib(e,a),h=r(t,l.type);i[l.name]={type:h,size:n(h),location:t.getAttribLocation(e,l.name),pointer:o}}return i}},{"./mapSize":23,"./mapType":24}],20:[function(t,e,i){var r=t("./mapType"),n=t("./defaultValue");e.exports=function(t,e){for(var i={},o=t.getProgramParameter(e,t.ACTIVE_UNIFORMS),s=0;s<o;s++){var a=t.getActiveUniform(e,s),l=a.name.replace(/\[.*?\]/,""),h=r(t,a.type);i[l]={type:h,size:a.size,location:t.getUniformLocation(e,l),value:n(h,a.size)}}return i}},{"./defaultValue":18,"./mapType":24}],21:[function(t,e,i){var r=function(t){return function(){return this.data[t].value}},n={float:function(t,e,i){t.uniform1f(e,i)},vec2:function(t,e,i){t.uniform2f(e,i[0],i[1])},vec3:function(t,e,i){t.uniform3f(e,i[0],i[1],i[2])},vec4:function(t,e,i){t.uniform4f(e,i[0],i[1],i[2],i[3])},int:function(t,e,i){t.uniform1i(e,i)},ivec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},ivec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},ivec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},bool:function(t,e,i){t.uniform1i(e,i)},bvec2:function(t,e,i){t.uniform2i(e,i[0],i[1])},bvec3:function(t,e,i){t.uniform3i(e,i[0],i[1],i[2])},bvec4:function(t,e,i){t.uniform4i(e,i[0],i[1],i[2],i[3])},mat2:function(t,e,i){t.uniformMatrix2fv(e,!1,i)},mat3:function(t,e,i){t.uniformMatrix3fv(e,!1,i)},mat4:function(t,e,i){t.uniformMatrix4fv(e,!1,i)},sampler2D:function(t,e,i){t.uniform1i(e,i)}},o={float:function(t,e,i){t.uniform1fv(e,i)},vec2:function(t,e,i){t.uniform2fv(e,i)},vec3:function(t,e,i){t.uniform3fv(e,i)},vec4:function(t,e,i){t.uniform4fv(e,i)},int:function(t,e,i){t.uniform1iv(e,i)},ivec2:function(t,e,i){t.uniform2iv(e,i)},ivec3:function(t,e,i){t.uniform3iv(e,i)},ivec4:function(t,e,i){t.uniform4iv(e,i)},bool:function(t,e,i){t.uniform1iv(e,i)},bvec2:function(t,e,i){t.uniform2iv(e,i)},bvec3:function(t,e,i){t.uniform3iv(e,i)},bvec4:function(t,e,i){t.uniform4iv(e,i)},sampler2D:function(t,e,i){t.uniform1iv(e,i)}};function s(t,e){return function(i){this.data[t].value=i;var r=this.data[t].location;1===e.size?n[e.type](this.gl,r,i):o[e.type](this.gl,r,i)}}function a(t,e){for(var i=e,r=0;r<t.length-1;r++){var n=i[t[r]]||{data:{}};i[t[r]]=n,i=n}return i}e.exports=function(t,e){var i={data:{}};i.gl=t;for(var n=Object.keys(e),o=0;o<n.length;o++){var l=n[o],h=l.split("."),u=h[h.length-1],c=a(h,i),p=e[l];c.data[u]=p,c.gl=t,Object.defineProperty(c,u,{get:r(u),set:s(u,p)})}return i}},{}],22:[function(t,e,i){e.exports={compileProgram:t("./compileProgram"),defaultValue:t("./defaultValue"),extractAttributes:t("./extractAttributes"),extractUniforms:t("./extractUniforms"),generateUniformAccessObject:t("./generateUniformAccessObject"),setPrecision:t("./setPrecision"),mapSize:t("./mapSize"),mapType:t("./mapType")}},{"./compileProgram":17,"./defaultValue":18,"./extractAttributes":19,"./extractUniforms":20,"./generateUniformAccessObject":21,"./mapSize":23,"./mapType":24,"./setPrecision":25}],23:[function(t,e,i){var r={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(t){return r[t]}},{}],24:[function(t,e,i){var r=null,n={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(t,e){if(!r){var i=Object.keys(n);r={};for(var o=0;o<i.length;++o){var s=i[o];r[t[s]]=n[s]}}return r[e]}},{}],25:[function(t,e,i){e.exports=function(t,e){return"precision"!==t.substring(0,9)?"precision "+e+" float;\n"+t:t}},{}],26:[function(t,e,i){var r,n,o=e.exports={};function s(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function l(t){if(r===setTimeout)return setTimeout(t,0);if((r===s||!r)&&setTimeout)return r=setTimeout,setTimeout(t,0);try{return r(t,0)}catch(e){try{return r.call(null,t,0)}catch(e){return r.call(this,t,0)}}}!function(){try{r="function"==typeof setTimeout?setTimeout:s}catch(t){r=s}try{n="function"==typeof clearTimeout?clearTimeout:a}catch(t){n=a}}();var h,u=[],c=!1,p=-1;function f(){c&&h&&(c=!1,h.length?u=h.concat(u):p=-1,u.length&&d())}function d(){if(!c){var t=l(f);c=!0;for(var e=u.length;e;){for(h=u,u=[];++p<e;)h&&h[p].run();p=-1,e=u.length}h=null,c=!1,function(t){if(n===clearTimeout)return clearTimeout(t);if((n===a||!n)&&clearTimeout)return n=clearTimeout,clearTimeout(t);try{n(t)}catch(e){try{return n.call(null,t)}catch(e){return n.call(this,t)}}}(t)}}function g(t,e){this.fun=t,this.array=e}function m(){}o.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];u.push(new g(t,e)),1!==u.length||c||l(d)},g.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=m,o.addListener=m,o.once=m,o.off=m,o.removeListener=m,o.removeAllListeners=m,o.emit=m,o.prependListener=m,o.prependOnceListener=m,o.listeners=function(t){return[]},o.binding=function(t){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(t){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},{}],27:[function(t,i,r){(function(t){!function(e){var n="object"==typeof r&&r&&!r.nodeType&&r,o="object"==typeof i&&i&&!i.nodeType&&i,s="object"==typeof t&&t;s.global!==s&&s.window!==s&&s.self!==s||(e=s);var a,l,h=2147483647,u=/^xn--/,c=/[^\x20-\x7E]/,p=/[\x2E\u3002\uFF0E\uFF61]/g,f={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},d=Math.floor,g=String.fromCharCode;function m(t){throw new RangeError(f[t])}function v(t,e){for(var i=t.length,r=[];i--;)r[i]=e(t[i]);return r}function y(t,e){var i=t.split("@"),r="";return i.length>1&&(r=i[0]+"@",t=i[1]),r+v((t=t.replace(p,".")).split("."),e).join(".")}function _(t){for(var e,i,r=[],n=0,o=t.length;n<o;)(e=t.charCodeAt(n++))>=55296&&e<=56319&&n<o?56320==(64512&(i=t.charCodeAt(n++)))?r.push(((1023&e)<<10)+(1023&i)+65536):(r.push(e),n--):r.push(e);return r}function x(t){return v(t,(function(t){var e="";return t>65535&&(e+=g((t-=65536)>>>10&1023|55296),t=56320|1023&t),e+=g(t)})).join("")}function b(t,e){return t+22+75*(t<26)-((0!=e)<<5)}function T(t,e,i){var r=0;for(t=i?d(t/700):t>>1,t+=d(t/e);t>455;r+=36)t=d(t/35);return d(r+36*t/(t+38))}function w(t){var e,i,r,n,o,s,a,l,u,c,p,f=[],g=t.length,v=0,y=128,_=72;for((i=t.lastIndexOf("-"))<0&&(i=0),r=0;r<i;++r)t.charCodeAt(r)>=128&&m("not-basic"),f.push(t.charCodeAt(r));for(n=i>0?i+1:0;n<g;){for(o=v,s=1,a=36;n>=g&&m("invalid-input"),((l=(p=t.charCodeAt(n++))-48<10?p-22:p-65<26?p-65:p-97<26?p-97:36)>=36||l>d((h-v)/s))&&m("overflow"),v+=l*s,!(l<(u=a<=_?1:a>=_+26?26:a-_));a+=36)s>d(h/(c=36-u))&&m("overflow"),s*=c;_=T(v-o,e=f.length+1,0==o),d(v/e)>h-y&&m("overflow"),y+=d(v/e),v%=e,f.splice(v++,0,y)}return x(f)}function S(t){var e,i,r,n,o,s,a,l,u,c,p,f,v,y,x,w=[];for(f=(t=_(t)).length,e=128,i=0,o=72,s=0;s<f;++s)(p=t[s])<128&&w.push(g(p));for(r=n=w.length,n&&w.push("-");r<f;){for(a=h,s=0;s<f;++s)(p=t[s])>=e&&p<a&&(a=p);for(a-e>d((h-i)/(v=r+1))&&m("overflow"),i+=(a-e)*v,e=a,s=0;s<f;++s)if((p=t[s])<e&&++i>h&&m("overflow"),p==e){for(l=i,u=36;!(l<(c=u<=o?1:u>=o+26?26:u-o));u+=36)x=l-c,y=36-c,w.push(g(b(c+x%y,0))),l=d(x/y);w.push(g(b(l,0))),o=T(i,v,r==n),i=0,++r}++i,++e}return w.join("")}if(a={version:"1.4.1",ucs2:{decode:_,encode:x},decode:w,encode:S,toASCII:function(t){return y(t,(function(t){return c.test(t)?"xn--"+S(t):t}))},toUnicode:function(t){return y(t,(function(t){return u.test(t)?w(t.slice(4).toLowerCase()):t}))}},n&&o)if(i.exports==n)o.exports=a;else for(l in a)a.hasOwnProperty(l)&&(n[l]=a[l]);else e.punycode=a}(this)}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],28:[function(t,e,i){"use strict";function r(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.exports=function(t,e,i,o){e=e||"&",i=i||"=";var s={};if("string"!=typeof t||0===t.length)return s;var a=/\+/g;t=t.split(e);var l=1e3;o&&"number"==typeof o.maxKeys&&(l=o.maxKeys);var h=t.length;l>0&&h>l&&(h=l);for(var u=0;u<h;++u){var c,p,f,d,g=t[u].replace(a,"%20"),m=g.indexOf(i);m>=0?(c=g.substr(0,m),p=g.substr(m+1)):(c=g,p=""),f=decodeURIComponent(c),d=decodeURIComponent(p),r(s,f)?n(s[f])?s[f].push(d):s[f]=[s[f],d]:s[f]=d}return s};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],29:[function(t,e,i){"use strict";var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}};e.exports=function(t,e,i,a){return e=e||"&",i=i||"=",null===t&&(t=void 0),"object"==typeof t?o(s(t),(function(s){var a=encodeURIComponent(r(s))+i;return n(t[s])?o(t[s],(function(t){return a+encodeURIComponent(r(t))})).join(e):a+encodeURIComponent(r(t[s]))})).join(e):a?encodeURIComponent(r(a))+i+encodeURIComponent(r(t)):""};var n=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)};function o(t,e){if(t.map)return t.map(e);for(var i=[],r=0;r<t.length;r++)i.push(e(t[r],r));return i}var s=Object.keys||function(t){var e=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}},{}],30:[function(t,e,i){"use strict";i.decode=i.parse=t("./decode"),i.encode=i.stringify=t("./encode")},{"./decode":28,"./encode":29}],31:[function(t,e,i){"use strict";e.exports=function(t,e,i){var r,n=t.length;if(!(e>=n||0===i)){var o=n-(i=e+i>n?n-e:i);for(r=e;r<o;++r)t[r]=t[r+i];t.length=o}}},{}],32:[function(t,e,i){"use strict";i.__esModule=!0,i.Loader=void 0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=h(t("mini-signals")),s=h(t("parse-uri")),a=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("./async")),l=t("./Resource");function h(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var c=/(#[\w-]+)?$/,p=i.Loader=function(){function t(){var e=this,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;u(this,t),this.baseUrl=i,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,i){return e._loadResource(t,i)},this._queue=a.queue(this._boundLoadResource,r),this._queue.pause(),this.resources={},this.onProgress=new o.default,this.onError=new o.default,this.onLoad=new o.default,this.onStart=new o.default,this.onComplete=new o.default;for(var n=0;n<t._defaultBeforeMiddleware.length;++n)this.pre(t._defaultBeforeMiddleware[n]);for(var s=0;s<t._defaultAfterMiddleware.length;++s)this.use(t._defaultAfterMiddleware[s])}return t.prototype.add=function(t,e,i,n){if(Array.isArray(t)){for(var o=0;o<t.length;++o)this.add(t[o]);return this}if("object"===(void 0===t?"undefined":r(t))&&(n=e||t.callback||t.onComplete,i=t,e=t.url,t=t.name||t.key||t.url),"string"!=typeof e&&(n=i,i=e,e=t),"string"!=typeof e)throw new Error("No url passed to add resource to loader.");if("function"==typeof i&&(n=i,i=null),this.loading&&(!i||!i.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[t])throw new Error('Resource named "'+t+'" already exists.');if(e=this._prepareUrl(e),this.resources[t]=new l.Resource(t,e,i),"function"==typeof n&&this.resources[t].onAfterMiddleware.once(n),this.loading){for(var s=i.parentResource,a=[],h=0;h<s.children.length;++h)s.children[h].isComplete||a.push(s.children[h]);var u=s.progressChunk*(a.length+1)/(a.length+2);s.children.push(this.resources[t]),s.progressChunk=u;for(var c=0;c<a.length;++c)a[c].progressChunk=u;this.resources[t].progressChunk=u}return this._queue.push(this.resources[t]),this},t.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},t.prototype.use=function(t){return this._afterMiddleware.push(t),this},t.prototype.reset=function(){for(var t in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[t];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},t.prototype.load=function(t){if("function"==typeof t&&this.onComplete.once(t),this.loading)return this;if(this._queue.idle())this._onStart(),this._onComplete();else{for(var e=100/this._queue._tasks.length,i=0;i<this._queue._tasks.length;++i)this._queue._tasks[i].data.progressChunk=e;this._onStart(),this._queue.resume()}return this},t.prototype._prepareUrl=function(t){var e=(0,s.default)(t,{strictMode:!0}),i=void 0;if(i=e.protocol||!e.path||0===t.indexOf("//")?t:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==t.charAt(0)?this.baseUrl+"/"+t:this.baseUrl+t,this.defaultQueryString){var r=c.exec(i)[0];-1!==(i=i.substr(0,i.length-r.length)).indexOf("?")?i+="&"+this.defaultQueryString:i+="?"+this.defaultQueryString,i+=r}return i},t.prototype._loadResource=function(t,e){var i=this;t._dequeue=e,a.eachSeries(this._beforeMiddleware,(function(e,r){e.call(i,t,(function(){r(t.isComplete?{}:null)}))}),(function(){t.isComplete?i._onLoad(t):(t._onLoadBinding=t.onComplete.once(i._onLoad,i),t.load())}),!0)},t.prototype._onStart=function(){this.progress=0,this.loading=!0,this.onStart.dispatch(this)},t.prototype._onComplete=function(){this.progress=100,this.loading=!1,this.onComplete.dispatch(this,this.resources)},t.prototype._onLoad=function(t){var e=this;t._onLoadBinding=null,this._resourcesParsing.push(t),t._dequeue(),a.eachSeries(this._afterMiddleware,(function(i,r){i.call(e,t,r)}),(function(){t.onAfterMiddleware.dispatch(t),e.progress=Math.min(100,e.progress+t.progressChunk),e.onProgress.dispatch(e,t),t.error?e.onError.dispatch(t.error,e,t):e.onLoad.dispatch(e,t),e._resourcesParsing.splice(e._resourcesParsing.indexOf(t),1),e._queue.idle()&&0===e._resourcesParsing.length&&e._onComplete()}),!0)},n(t,[{key:"concurrency",get:function(){return this._queue.concurrency},set:function(t){this._queue.concurrency=t}}]),t}();p._defaultBeforeMiddleware=[],p._defaultAfterMiddleware=[],p.pre=function(t){return p._defaultBeforeMiddleware.push(t),p},p.use=function(t){return p._defaultAfterMiddleware.push(t),p}},{"./Resource":33,"./async":34,"mini-signals":5,"parse-uri":7}],33:[function(t,e,i){"use strict";i.__esModule=!0,i.Resource=void 0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=s(t("parse-uri")),o=s(t("mini-signals"));function s(t){return t&&t.__esModule?t:{default:t}}var a=!(!window.XDomainRequest||"withCredentials"in new XMLHttpRequest),l=null;function h(){}var u=i.Resource=function(){function t(e,i,r){if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"string"!=typeof e||"string"!=typeof i)throw new Error("Both name and url are required for constructing a resource.");r=r||{},this._flags=0,this._setFlag(t.STATUS_FLAGS.DATA_URL,0===i.indexOf("data:")),this.name=e,this.url=i,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===r.crossOrigin?"anonymous":r.crossOrigin,this.timeout=r.timeout||0,this.loadType=r.loadType||this._determineLoadType(),this.xhrType=r.xhrType,this.metadata=r.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=t.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=h,this._onLoadBinding=null,this._elementTimer=0,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundOnTimeout=this._onTimeout.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnTimeout=this._xhrOnTimeout.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this.onStart=new o.default,this.onProgress=new o.default,this.onComplete=new o.default,this.onAfterMiddleware=new o.default}return t.setExtensionLoadType=function(e,i){c(t._loadTypeMap,e,i)},t.setExtensionXhrType=function(e,i){c(t._xhrTypeMap,e,i)},t.prototype.complete=function(){this._clearEvents(),this._finish()},t.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this._clearEvents(),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=t.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this._finish()}},t.prototype.load=function(e){var i=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout((function(){return e(i)}),1);else switch(e&&this.onComplete.once(e),this._setFlag(t.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case t.LOAD_TYPE.IMAGE:this.type=t.TYPE.IMAGE,this._loadElement("image");break;case t.LOAD_TYPE.AUDIO:this.type=t.TYPE.AUDIO,this._loadSourceElement("audio");break;case t.LOAD_TYPE.VIDEO:this.type=t.TYPE.VIDEO,this._loadSourceElement("video");break;case t.LOAD_TYPE.XHR:default:a&&this.crossOrigin?this._loadXdr():this._loadXhr()}},t.prototype._hasFlag=function(t){return 0!=(this._flags&t)},t.prototype._setFlag=function(t,e){this._flags=e?this._flags|t:this._flags&~t},t.prototype._clearEvents=function(){clearTimeout(this._elementTimer),this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("timeout",this._boundXhrOnTimeout,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null))},t.prototype._finish=function(){if(this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(t.STATUS_FLAGS.COMPLETE,!0),this._setFlag(t.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},t.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))},t.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,i=0;i<this.url.length;++i)this.data.appendChild(this._createSource(t,this.url[i],Array.isArray(e)?e[i]:e));else{var r=this.metadata.mimeType;this.data.appendChild(this._createSource(t,this.url,Array.isArray(r)?r[0]:r))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load(),this.timeout&&(this._elementTimer=setTimeout(this._boundOnTimeout,this.timeout))}else this.abort("Unsupported element: "+t)},t.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.timeout=this.timeout,this.xhrType===t.XHR_RESPONSE_TYPE.JSON||this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT?e.responseType=t.XHR_RESPONSE_TYPE.TEXT:e.responseType=this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("timeout",this._boundXhrOnTimeout,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},t.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=this.timeout||5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXhrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout((function(){return t.send()}),1)},t.prototype._createSource=function(t,e,i){i||(i=t+"/"+this._getExtension(e));var r=document.createElement("source");return r.src=e,r.type=i,r},t.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},t.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},t.prototype._onTimeout=function(){this.abort("Load timed out.")},t.prototype._xhrOnError=function(){var t=this.xhr;this.abort(p(t)+" Request failed. Status: "+t.status+', text: "'+t.statusText+'"')},t.prototype._xhrOnTimeout=function(){var t=this.xhr;this.abort(p(t)+" Request timed out.")},t.prototype._xhrOnAbort=function(){var t=this.xhr;this.abort(p(t)+" Request was aborted by the user.")},t.prototype._xhrOnLoad=function(){var e=this.xhr,i="",r=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(i=e.responseText),0===r&&(i.length>0||e.responseType===t.XHR_RESPONSE_TYPE.BUFFER)?r=200:1223===r&&(r=204),2==(r/100|0)){if(this.xhrType===t.XHR_RESPONSE_TYPE.TEXT)this.data=i,this.type=t.TYPE.TEXT;else if(this.xhrType===t.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(i),this.type=t.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===t.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var n=new DOMParser;this.data=n.parseFromString(i,"text/xml")}else{var o=document.createElement("div");o.innerHTML=i,this.data=o}this.type=t.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||i;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},t.prototype._determineCrossOrigin=function(t,e){if(0===t.indexOf("data:"))return"";if(window.origin!==window.location.origin)return"anonymous";e=e||window.location,l||(l=document.createElement("a")),l.href=t;var i=!(t=(0,n.default)(l.href,{strictMode:!0})).port&&""===e.port||t.port===e.port,r=t.protocol?t.protocol+":":"";return t.host===e.hostname&&i&&r===e.protocol?"":"anonymous"},t.prototype._determineXhrType=function(){return t._xhrTypeMap[this.extension]||t.XHR_RESPONSE_TYPE.TEXT},t.prototype._determineLoadType=function(){return t._loadTypeMap[this.extension]||t.LOAD_TYPE.XHR},t.prototype._getExtension=function(){var t=this.url,e="";if(this.isDataUrl){var i=t.indexOf("/");e=t.substring(i+1,t.indexOf(";",i))}else{var r=t.indexOf("?"),n=t.indexOf("#"),o=Math.min(r>-1?r:t.length,n>-1?n:t.length);e=(t=t.substring(0,o)).substring(t.lastIndexOf(".")+1)}return e.toLowerCase()},t.prototype._getMimeFromXhrType=function(e){switch(e){case t.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case t.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case t.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case t.XHR_RESPONSE_TYPE.JSON:return"application/json";case t.XHR_RESPONSE_TYPE.DEFAULT:case t.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain"}},r(t,[{key:"isDataUrl",get:function(){return this._hasFlag(t.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(t.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(t.STATUS_FLAGS.LOADING)}}]),t}();function c(t,e,i){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(t[e]=i)}function p(t){return t.toString().replace("object ","")}u.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},u.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},u.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},u.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},u._loadTypeMap={gif:u.LOAD_TYPE.IMAGE,png:u.LOAD_TYPE.IMAGE,bmp:u.LOAD_TYPE.IMAGE,jpg:u.LOAD_TYPE.IMAGE,jpeg:u.LOAD_TYPE.IMAGE,tif:u.LOAD_TYPE.IMAGE,tiff:u.LOAD_TYPE.IMAGE,webp:u.LOAD_TYPE.IMAGE,tga:u.LOAD_TYPE.IMAGE,svg:u.LOAD_TYPE.IMAGE,"svg+xml":u.LOAD_TYPE.IMAGE,mp3:u.LOAD_TYPE.AUDIO,ogg:u.LOAD_TYPE.AUDIO,wav:u.LOAD_TYPE.AUDIO,mp4:u.LOAD_TYPE.VIDEO,webm:u.LOAD_TYPE.VIDEO},u._xhrTypeMap={xhtml:u.XHR_RESPONSE_TYPE.DOCUMENT,html:u.XHR_RESPONSE_TYPE.DOCUMENT,htm:u.XHR_RESPONSE_TYPE.DOCUMENT,xml:u.XHR_RESPONSE_TYPE.DOCUMENT,tmx:u.XHR_RESPONSE_TYPE.DOCUMENT,svg:u.XHR_RESPONSE_TYPE.DOCUMENT,tsx:u.XHR_RESPONSE_TYPE.DOCUMENT,gif:u.XHR_RESPONSE_TYPE.BLOB,png:u.XHR_RESPONSE_TYPE.BLOB,bmp:u.XHR_RESPONSE_TYPE.BLOB,jpg:u.XHR_RESPONSE_TYPE.BLOB,jpeg:u.XHR_RESPONSE_TYPE.BLOB,tif:u.XHR_RESPONSE_TYPE.BLOB,tiff:u.XHR_RESPONSE_TYPE.BLOB,webp:u.XHR_RESPONSE_TYPE.BLOB,tga:u.XHR_RESPONSE_TYPE.BLOB,json:u.XHR_RESPONSE_TYPE.JSON,text:u.XHR_RESPONSE_TYPE.TEXT,txt:u.XHR_RESPONSE_TYPE.TEXT,ttf:u.XHR_RESPONSE_TYPE.BUFFER,otf:u.XHR_RESPONSE_TYPE.BUFFER},u.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",void 0!==e&&(e.exports.default=u)},{"mini-signals":5,"parse-uri":7}],34:[function(t,e,i){"use strict";function r(){}function n(t){return function(){if(null===t)throw new Error("Callback was already called.");var e=t;t=null,e.apply(this,arguments)}}i.__esModule=!0,i.eachSeries=function(t,e,i,r){var n=0,o=t.length;!function s(a){a||n===o?i&&i(a):r?setTimeout((function(){e(t[n++],s)}),1):e(t[n++],s)}()},i.queue=function(t,e){if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,o={_tasks:[],concurrency:e,saturated:r,unsaturated:r,buffer:e/4,empty:r,drain:r,error:r,started:!1,paused:!1,push:function(t,e){s(t,!1,e)},kill:function(){i=0,o.drain=r,o.started=!1,o._tasks=[]},unshift:function(t,e){s(t,!0,e)},process:function(){for(;!o.paused&&i<o.concurrency&&o._tasks.length;){var e=o._tasks.shift();0===o._tasks.length&&o.empty(),(i+=1)===o.concurrency&&o.saturated(),t(e.data,n(a(e)))}},length:function(){return o._tasks.length},running:function(){return i},idle:function(){return o._tasks.length+i===0},pause:function(){!0!==o.paused&&(o.paused=!0)},resume:function(){if(!1!==o.paused){o.paused=!1;for(var t=1;t<=o.concurrency;t++)o.process()}}};function s(t,e,i){if(null!=i&&"function"!=typeof i)throw new Error("task callback must be a function");if(o.started=!0,null==t&&o.idle())setTimeout((function(){return o.drain()}),1);else{var n={data:t,callback:"function"==typeof i?i:r};e?o._tasks.unshift(n):o._tasks.push(n),setTimeout((function(){return o.process()}),1)}}function a(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&o.error(arguments[0],t.data),i<=o.concurrency-o.buffer&&o.unsaturated(),o.idle()&&o.drain(),o.process()}}return o}},{}],35:[function(t,e,i){"use strict";function r(t){for(var e="",i=0;i<t.length;){for(var r=[0,0,0],n=[0,0,0,0],o=0;o<r.length;++o)i<t.length?r[o]=255&t.charCodeAt(i++):r[o]=0;switch(n[0]=r[0]>>2,n[1]=(3&r[0])<<4|r[1]>>4,n[2]=(15&r[1])<<2|r[2]>>6,n[3]=63&r[2],i-(t.length-1)){case 2:n[3]=64,n[2]=64;break;case 1:n[3]=64}for(var s=0;s<n.length;++s)e+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(n[s])}return e}i.__esModule=!0,i.encodeBinary=r,void 0!==e&&(e.exports.default=r)},{}],36:[function(t,e,i){"use strict";var r=t("./Loader").Loader,n=t("./Resource").Resource,o=t("./async"),s=t("./b64");r.Resource=n,r.async=o,r.encodeBinary=s,r.base64=s,e.exports=r,e.exports.Loader=r,e.exports.default=r},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(t,e,i){"use strict";i.__esModule=!0,i.blobMiddlewareFactory=function(){return function(t,e){if(t.data){if(t.xhr&&t.xhrType===r.Resource.XHR_RESPONSE_TYPE.BLOB)if(window.Blob&&"string"!=typeof t.data){if(0===t.data.type.indexOf("image")){var i=o.createObjectURL(t.data);return t.blob=t.data,t.data=new Image,t.data.src=i,t.type=r.Resource.TYPE.IMAGE,void(t.data.onload=function(){o.revokeObjectURL(i),t.data.onload=null,e()})}}else{var s=t.xhr.getResponseHeader("content-type");if(s&&0===s.indexOf("image"))return t.data=new Image,t.data.src="data:"+s+";base64,"+(0,n.encodeBinary)(t.xhr.responseText),t.type=r.Resource.TYPE.IMAGE,void(t.data.onload=function(){t.data.onload=null,e()})}e()}else e()}};var r=t("../../Resource"),n=t("../../b64"),o=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(t,e,i){"use strict";var r=t("punycode"),n=t("./util");function o(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}i.parse=_,i.resolve=function(t,e){return _(t,!1,!0).resolve(e)},i.resolveObject=function(t,e){return t?_(t,!1,!0).resolveObject(e):e},i.format=function(t){return n.isString(t)&&(t=_(t)),t instanceof o?t.format():o.prototype.format.call(t)},i.Url=o;var s=/^([a-z0-9.+-]+:)/i,a=/:[0-9]*$/,l=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h=["{","}","|","\\","^","`"].concat(["<",">",'"',"`"," ","\r","\n","\t"]),u=["'"].concat(h),c=["%","/","?",";","#"].concat(u),p=["/","?","#"],f=/^[+a-z0-9A-Z_-]{0,63}$/,d=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,g={javascript:!0,"javascript:":!0},m={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},y=t("querystring");function _(t,e,i){if(t&&n.isObject(t)&&t instanceof o)return t;var r=new o;return r.parse(t,e,i),r}o.prototype.parse=function(t,e,i){if(!n.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var o=t.indexOf("?"),a=-1!==o&&o<t.indexOf("#")?"?":"#",h=t.split(a);h[0]=h[0].replace(/\\/g,"/");var _=t=h.join(a);if(_=_.trim(),!i&&1===t.split("#").length){var x=l.exec(_);if(x)return this.path=_,this.href=_,this.pathname=x[1],x[2]?(this.search=x[2],this.query=e?y.parse(this.search.substr(1)):this.search.substr(1)):e&&(this.search="",this.query={}),this}var b=s.exec(_);if(b){var T=(b=b[0]).toLowerCase();this.protocol=T,_=_.substr(b.length)}if(i||b||_.match(/^\/\/[^@\/]+@[^@\/]+/)){var w="//"===_.substr(0,2);!w||b&&m[b]||(_=_.substr(2),this.slashes=!0)}if(!m[b]&&(w||b&&!v[b])){for(var S,A,P=-1,E=0;E<p.length;E++)-1!==(C=_.indexOf(p[E]))&&(-1===P||C<P)&&(P=C);for(-1!==(A=-1===P?_.lastIndexOf("@"):_.lastIndexOf("@",P))&&(S=_.slice(0,A),_=_.slice(A+1),this.auth=decodeURIComponent(S)),P=-1,E=0;E<c.length;E++){var C;-1!==(C=_.indexOf(c[E]))&&(-1===P||C<P)&&(P=C)}-1===P&&(P=_.length),this.host=_.slice(0,P),_=_.slice(P),this.parseHost(),this.hostname=this.hostname||"";var O="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!O)for(var I=this.hostname.split(/\./),M=(E=0,I.length);E<M;E++){var R=I[E];if(R&&!R.match(f)){for(var D="",k=0,L=R.length;k<L;k++)R.charCodeAt(k)>127?D+="x":D+=R[k];if(!D.match(f)){var N=I.slice(0,E),F=I.slice(E+1),B=R.match(d);B&&(N.push(B[1]),F.unshift(B[2])),F.length&&(_="/"+F.join(".")+_),this.hostname=N.join(".");break}}}this.hostname.length>255?this.hostname="":this.hostname=this.hostname.toLowerCase(),O||(this.hostname=r.toASCII(this.hostname));var j=this.port?":"+this.port:"",U=this.hostname||"";this.host=U+j,this.href+=this.host,O&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==_[0]&&(_="/"+_))}if(!g[T])for(E=0,M=u.length;E<M;E++){var X=u[E];if(-1!==_.indexOf(X)){var G=encodeURIComponent(X);G===X&&(G=escape(X)),_=_.split(X).join(G)}}var W=_.indexOf("#");-1!==W&&(this.hash=_.substr(W),_=_.slice(0,W));var V=_.indexOf("?");if(-1!==V?(this.search=_.substr(V),this.query=_.substr(V+1),e&&(this.query=y.parse(this.query)),_=_.slice(0,V)):e&&(this.search="",this.query={}),_&&(this.pathname=_),v[T]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){j=this.pathname||"";var z=this.search||"";this.path=j+z}return this.href=this.format(),this},o.prototype.format=function(){var t=this.auth||"";t&&(t=(t=encodeURIComponent(t)).replace(/%3A/i,":"),t+="@");var e=this.protocol||"",i=this.pathname||"",r=this.hash||"",o=!1,s="";this.host?o=t+this.host:this.hostname&&(o=t+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(o+=":"+this.port)),this.query&&n.isObject(this.query)&&Object.keys(this.query).length&&(s=y.stringify(this.query));var a=this.search||s&&"?"+s||"";return e&&":"!==e.substr(-1)&&(e+=":"),this.slashes||(!e||v[e])&&!1!==o?(o="//"+(o||""),i&&"/"!==i.charAt(0)&&(i="/"+i)):o||(o=""),r&&"#"!==r.charAt(0)&&(r="#"+r),a&&"?"!==a.charAt(0)&&(a="?"+a),e+o+(i=i.replace(/[?#]/g,(function(t){return encodeURIComponent(t)})))+(a=a.replace("#","%23"))+r},o.prototype.resolve=function(t){return this.resolveObject(_(t,!1,!0)).format()},o.prototype.resolveObject=function(t){if(n.isString(t)){var e=new o;e.parse(t,!1,!0),t=e}for(var i=new o,r=Object.keys(this),s=0;s<r.length;s++){var a=r[s];i[a]=this[a]}if(i.hash=t.hash,""===t.href)return i.href=i.format(),i;if(t.slashes&&!t.protocol){for(var l=Object.keys(t),h=0;h<l.length;h++){var u=l[h];"protocol"!==u&&(i[u]=t[u])}return v[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(t.protocol&&t.protocol!==i.protocol){if(!v[t.protocol]){for(var c=Object.keys(t),p=0;p<c.length;p++){var f=c[p];i[f]=t[f]}return i.href=i.format(),i}if(i.protocol=t.protocol,t.host||m[t.protocol])i.pathname=t.pathname;else{for(var d=(t.pathname||"").split("/");d.length&&!(t.host=d.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),""!==d[0]&&d.unshift(""),d.length<2&&d.unshift(""),i.pathname=d.join("/")}if(i.search=t.search,i.query=t.query,i.host=t.host||"",i.auth=t.auth,i.hostname=t.hostname||t.host,i.port=t.port,i.pathname||i.search){var g=i.pathname||"",y=i.search||"";i.path=g+y}return i.slashes=i.slashes||t.slashes,i.href=i.format(),i}var _=i.pathname&&"/"===i.pathname.charAt(0),x=t.host||t.pathname&&"/"===t.pathname.charAt(0),b=x||_||i.host&&t.pathname,T=b,w=i.pathname&&i.pathname.split("/")||[],S=(d=t.pathname&&t.pathname.split("/")||[],i.protocol&&!v[i.protocol]);if(S&&(i.hostname="",i.port=null,i.host&&(""===w[0]?w[0]=i.host:w.unshift(i.host)),i.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(""===d[0]?d[0]=t.host:d.unshift(t.host)),t.host=null),b=b&&(""===d[0]||""===w[0])),x)i.host=t.host||""===t.host?t.host:i.host,i.hostname=t.hostname||""===t.hostname?t.hostname:i.hostname,i.search=t.search,i.query=t.query,w=d;else if(d.length)w||(w=[]),w.pop(),w=w.concat(d),i.search=t.search,i.query=t.query;else if(!n.isNullOrUndefined(t.search))return S&&(i.hostname=i.host=w.shift(),(O=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift())),i.search=t.search,i.query=t.query,n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i;if(!w.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var A=w.slice(-1)[0],P=(i.host||t.host||w.length>1)&&("."===A||".."===A)||""===A,E=0,C=w.length;C>=0;C--)"."===(A=w[C])?w.splice(C,1):".."===A?(w.splice(C,1),E++):E&&(w.splice(C,1),E--);if(!b&&!T)for(;E--;E)w.unshift("..");!b||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),P&&"/"!==w.join("/").substr(-1)&&w.push("");var O,I=""===w[0]||w[0]&&"/"===w[0].charAt(0);return S&&(i.hostname=i.host=I?"":w.length?w.shift():"",(O=!!(i.host&&i.host.indexOf("@")>0)&&i.host.split("@"))&&(i.auth=O.shift(),i.host=i.hostname=O.shift())),(b=b||i.host&&w.length)&&!I&&w.unshift(""),w.length?i.pathname=w.join("/"):(i.pathname=null,i.path=null),n.isNull(i.pathname)&&n.isNull(i.search)||(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=t.auth||i.auth,i.slashes=i.slashes||t.slashes,i.href=i.format(),i},o.prototype.parseHost=function(){var t=this.host,e=a.exec(t);e&&(":"!==(e=e[0])&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)}},{"./util":39,punycode:27,querystring:30}],39:[function(t,e,i){"use strict";e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],40:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),n=s(t("ismobilejs")),o=s(t("./accessibleTarget"));function s(t){return t&&t.__esModule?t:{default:t}}r.utils.mixins.delayMixin(r.DisplayObject.prototype,o.default);var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),!n.default.tablet&&!n.default.phone||navigator.isCocoonJS||this.createTouchHook();var i=document.createElement("div");i.style.width="100px",i.style.height="100px",i.style.position="absolute",i.style.top="0px",i.style.left="0px",i.style.zIndex=2,this.div=i,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return t.prototype.createTouchHook=function(){var t=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",(function(){t.isMobileAccessabillity=!0,t.activate(),document.body.removeChild(e)})),document.body.appendChild(e)},t.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},t.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},t.prototype.updateAccessibleObjects=function(t){if(t.visible){t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);for(var e=t.children,i=0;i<e.length;i++)this.updateAccessibleObjects(e[i])}},t.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var t=this.renderer.view.getBoundingClientRect(),e=t.width/this.renderer.width,i=t.height/this.renderer.height,n=this.div;n.style.left=t.left+"px",n.style.top=t.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var o=0;o<this.children.length;o++){var s=this.children[o];if(s.renderId!==this.renderId)s._accessibleActive=!1,r.utils.removeItems(this.children,o,1),this.div.removeChild(s._accessibleDiv),this.pool.push(s._accessibleDiv),s._accessibleDiv=null,o--,0===this.children.length&&this.deactivate();else{n=s._accessibleDiv;var a=s.hitArea,l=s.worldTransform;s.hitArea?(n.style.left=(l.tx+a.x*l.a)*e+"px",n.style.top=(l.ty+a.y*l.d)*i+"px",n.style.width=a.width*l.a*e+"px",n.style.height=a.height*l.d*i+"px"):(a=s.getBounds(),this.capHitArea(a),n.style.left=a.x*e+"px",n.style.top=a.y*i+"px",n.style.width=a.width*e+"px",n.style.height=a.height*i+"px",n.title!==s.accessibleTitle&&null!==s.accessibleTitle&&(n.title=s.accessibleTitle),n.getAttribute("aria-label")!==s.accessibleHint&&null!==s.accessibleHint&&n.setAttribute("aria-label",s.accessibleHint))}}this.renderId++}},t.prototype.capHitArea=function(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},t.prototype.addChild=function(t){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",navigator.userAgent.toLowerCase().indexOf("chrome")>-1?e.setAttribute("aria-live","off"):e.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?e.setAttribute("aria-relevant","additions"):e.setAttribute("aria-relevant","text"),e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),t.accessibleTitle&&null!==t.accessibleTitle?e.title=t.accessibleTitle:t.accessibleHint&&null!==t.accessibleHint||(e.title="displayObject "+t.tabIndex),t.accessibleHint&&null!==t.accessibleHint&&e.setAttribute("aria-label",t.accessibleHint),t._accessibleActive=!0,t._accessibleDiv=e,e.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex},t.prototype._onClick=function(t){var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"click",e.eventData)},t.prototype._onFocus=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","assertive");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseover",e.eventData)},t.prototype._onFocusOut=function(t){t.target.getAttribute("aria-live","off")||t.target.setAttribute("aria-live","polite");var e=this.renderer.plugins.interaction;e.dispatchEvent(t.target.displayObject,"mouseout",e.eventData)},t.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},t.prototype._onMouseMove=function(t){0===t.movementX&&0===t.movementY||this.deactivate()},t.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},t}();i.default=a,r.WebGLRenderer.registerPlugin("accessibility",a),r.CanvasRenderer.registerPlugin("accessibility",a)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(t,e,i){"use strict";i.__esModule=!0,i.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("./accessibleTarget");Object.defineProperty(i,"accessibleTarget",{enumerable:!0,get:function(){return o(r).default}});var n=t("./AccessibilityManager");function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"AccessibilityManager",{enumerable:!0,get:function(){return o(n).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=t("./autoDetectRenderer"),o=h(t("./display/Container")),s=t("./ticker"),a=h(t("./settings")),l=t("./const");function h(t){return t&&t.__esModule?t:{default:t}}var u=function(){function t(e,i,r,l,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),"number"==typeof e&&(e=Object.assign({width:e,height:i||a.default.RENDER_OPTIONS.height,forceCanvas:!!l,sharedTicker:!!h},r)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,n.autoDetectRenderer)(e),this.stage=new o.default,this._ticker=null,this.ticker=e.sharedTicker?s.shared:new s.Ticker,e.autoStart&&this.start()}return t.prototype.render=function(){this.renderer.render(this.stage)},t.prototype.stop=function(){this._ticker.stop()},t.prototype.start=function(){this._ticker.start()},t.prototype.destroy=function(t,e){if(this._ticker){var i=this._ticker;this.ticker=null,i.destroy()}this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null,this._options=null},r(t,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,l.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),t}();i.default=u},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":121}],44:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("pixi-gl-core"),o=t("./settings"),s=(r=o)&&r.__esModule?r:{default:r};function a(t,e){if(t instanceof Array){if("precision"!==t[0].substring(0,9)){var i=t.slice(0);return i.unshift("precision "+e+" float;"),i}}else if("precision"!==t.trim().substring(0,9))return"precision "+e+" float;\n"+t;return t}var l=function(t){function e(i,r,n,o,l){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,a(r,l||s.default.PRECISION_VERTEX),a(n,l||s.default.PRECISION_FRAGMENT),void 0,o))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(n.GLShader);i.default=l},{"./settings":101,"pixi-gl-core":15}],45:[function(t,e,i){"use strict";i.__esModule=!0,i.autoDetectRenderer=function(t,e,i,s){var a=t&&t.forceCanvas;return void 0!==s&&(a=s),!a&&r.isWebGLSupported()?new o.default(t,e,i):new n.default(t,e,i)};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("./utils")),n=s(t("./renderers/canvas/CanvasRenderer")),o=s(t("./renderers/webgl/WebGLRenderer"));function s(t){return t&&t.__esModule?t:{default:t}}},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":125}],46:[function(t,e,i){"use strict";i.__esModule=!0,i.VERSION="4.8.7",i.PI_2=2*Math.PI,i.RAD_TO_DEG=180/Math.PI,i.DEG_TO_RAD=Math.PI/180,i.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},i.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},i.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},i.SCALE_MODES={LINEAR:0,NEAREST:1},i.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},i.GC_MODES={AUTO:0,MANUAL:1},i.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,i.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;charset=([\w-]+))?(?:;(base64))?,(.*)/i,i.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,i.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},i.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},i.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},i.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},i.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("../math"),n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?r.Rectangle.EMPTY:((t=t||new r.Rectangle(0,0,1,1)).x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,o=t[0],s=t[1];e=o<e?o:e,i=s<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[2])<e?o:e,i=(s=t[3])<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[4])<e?o:e,i=(s=t[5])<i?s:i,r=o>r?o:r,n=s>n?s:n,e=(o=t[6])<e?o:e,i=(s=t[7])<i?s:i,r=o>r?o:r,n=s>n?s:n,this.minX=e,this.minY=i,this.maxX=r,this.maxY=n},t.prototype.addFrame=function(t,e,i,r,n){var o=t.worldTransform,s=o.a,a=o.b,l=o.c,h=o.d,u=o.tx,c=o.ty,p=this.minX,f=this.minY,d=this.maxX,g=this.maxY,m=s*e+l*i+u,v=a*e+h*i+c;p=m<p?m:p,f=v<f?v:f,d=m>d?m:d,g=v>g?v:g,p=(m=s*r+l*i+u)<p?m:p,f=(v=a*r+h*i+c)<f?v:f,d=m>d?m:d,g=v>g?v:g,p=(m=s*e+l*n+u)<p?m:p,f=(v=a*e+h*n+c)<f?v:f,d=m>d?m:d,g=v>g?v:g,p=(m=s*r+l*n+u)<p?m:p,f=(v=a*r+h*n+c)<f?v:f,d=m>d?m:d,g=v>g?v:g,this.minX=p,this.minY=f,this.maxX=d,this.maxY=g},t.prototype.addVertices=function(t,e,i,r){for(var n=t.worldTransform,o=n.a,s=n.b,a=n.c,l=n.d,h=n.tx,u=n.ty,c=this.minX,p=this.minY,f=this.maxX,d=this.maxY,g=i;g<r;g+=2){var m=e[g],v=e[g+1],y=o*m+a*v+h,_=l*v+s*m+u;c=y<c?y:c,p=_<p?_:p,f=y>f?y:f,d=_>d?_:d}this.minX=c,this.minY=p,this.maxX=f,this.maxY=d},t.prototype.addBounds=function(t){var e=this.minX,i=this.minY,r=this.maxX,n=this.maxY;this.minX=t.minX<e?t.minX:e,this.minY=t.minY<i?t.minY:i,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>n?t.maxY:n},t.prototype.addBoundsMask=function(t,e){var i=t.minX>e.minX?t.minX:e.minX,r=t.minY>e.minY?t.minY:e.minY,n=t.maxX<e.maxX?t.maxX:e.maxX,o=t.maxY<e.maxY?t.maxY:e.maxY;if(i<=n&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,h=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>l?n:l,this.maxY=o>h?o:h}},t.prototype.addBoundsArea=function(t,e){var i=t.minX>e.x?t.minX:e.x,r=t.minY>e.y?t.minY:e.y,n=t.maxX<e.x+e.width?t.maxX:e.x+e.width,o=t.maxY<e.y+e.height?t.maxY:e.y+e.height;if(i<=n&&r<=o){var s=this.minX,a=this.minY,l=this.maxX,h=this.maxY;this.minX=i<s?i:s,this.minY=r<a?r:a,this.maxX=n>l?n:l,this.maxY=o>h?o:h}},t}();i.default=n},{"../math":70}],48:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("../utils"),s=t("./DisplayObject"),a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.children=[],i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.addChild(arguments[i]);else t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),t.emit("added",this);return t},e.prototype.addChildAt=function(t,e){if(e<0||e>this.children.length)throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return t.parent&&t.parent.removeChild(t),t.parent=this,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),t},e.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t,this.onChildrenChange(i<r?i:r)}},e.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The index "+e+" supplied is out of bounds "+this.children.length);var i=this.getChildIndex(t);(0,o.removeItems)(this.children,i,1),this.children.splice(e,0,t),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(t){var e=arguments.length;if(e>1)for(var i=0;i<e;i++)this.removeChild(arguments[i]);else{var r=this.children.indexOf(t);if(-1===r)return null;t.parent=null,t.transform._parentID=-1,(0,o.removeItems)(this.children,r,1),this._boundsID++,this.onChildrenChange(r),t.emit("removed",this)}return t},e.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,(0,o.removeItems)(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),e},e.prototype.removeChildren=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=t,r="number"==typeof e?e:this.children.length,n=r-i,o=void 0;if(n>0&&n<=r){o=this.children.splice(i,n);for(var s=0;s<o.length;++s)o[s].parent=null,o[s].transform&&(o[s].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(var a=0;a<o.length;++a)o[a].emit("removed",this);return o}if(0===n&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var t=0,e=this.children.length;t<e;++t){var i=this.children[t];i.visible&&i.updateTransform()}},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var t=0;t<this.children.length;t++){var e=this.children[t];e.visible&&e.renderable&&(e.calculateBounds(),e._mask?(e._mask.calculateBounds(),this._bounds.addBoundsMask(e._bounds,e._mask._bounds)):e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds))}this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(t);else{this._renderWebGL(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderWebGL(t)}},e.prototype.renderAdvancedWebGL=function(t){t.flush();var e=this._filters,i=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var r=0;r<e.length;r++)e[r].enabled&&this._enabledFilters.push(e[r]);this._enabledFilters.length&&t.filterManager.pushFilter(this,this._enabledFilters)}i&&t.maskManager.pushMask(this,this._mask),this._renderWebGL(t);for(var n=0,o=this.children.length;n<o;n++)this.children[n].renderWebGL(t);t.flush(),i&&t.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&t.filterManager.popFilter()},e.prototype._renderWebGL=function(t){},e.prototype._renderCanvas=function(t){},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.renderable){this._mask&&t.maskManager.pushMask(this._mask),this._renderCanvas(t);for(var e=0,i=this.children.length;e<i;++e)this.children[e].renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},e.prototype.destroy=function(e){t.prototype.destroy.call(this);var i="boolean"==typeof e?e:e&&e.children,r=this.removeChildren(0,this.children.length);if(i)for(var n=0;n<r.length;++n)r[n].destroy(e)},n(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}]),e}(((r=s)&&r.__esModule?r:{default:r}).default);i.default=a,a.prototype.containerUpdateTransform=a.prototype.updateTransform},{"../utils":125,"./DisplayObject":49}],49:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=c(t("eventemitter3")),o=t("../const"),s=c(t("../settings")),a=c(t("./TransformStatic")),l=c(t("./Transform")),h=c(t("./Bounds")),u=t("../math");function c(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this)),r=s.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?a.default:l.default;return i.tempDisplayObjectParent=null,i.transform=new r,i.alpha=1,i.visible=!0,i.renderable=!0,i.parent=null,i.worldAlpha=1,i.filterArea=null,i._filters=null,i._enabledFilters=null,i._bounds=new h.default,i._boundsID=0,i._lastBoundsID=-1,i._boundsRect=null,i._localBoundsRect=null,i._mask=null,i._destroyed=!1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(t,e){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new u.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(t){var e=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,t||(this._localBoundsRect||(this._localBoundsRect=new u.Rectangle),t=this._localBoundsRect);var r=this.getBounds(!1,t);return this.parent=i,this.transform=e,r},e.prototype.toGlobal=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,e)},e.prototype.toLocal=function(t,e,i,r){return e&&(t=e.toGlobal(t,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,i)},e.prototype.renderWebGL=function(t){},e.prototype.renderCanvas=function(t){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,n=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,a=arguments.length>7&&void 0!==arguments[7]?arguments[7]:0,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=t,this.position.y=e,this.scale.x=i||1,this.scale.y=r||1,this.rotation=n,this.skew.x=o,this.skew.y=s,this.pivot.x=a,this.pivot.y=l,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0,this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.renderable=!1,this._mask.isMask=!0)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(n.default);i.default=p,p.prototype.displayObjectUpdateTransform=p.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("../math"),s=t("./TransformBase"),a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new o.Point(0,0),i.scale=new o.Point(1,1),i.skew=new o.ObservablePoint(i.updateSkew,i,0,0),i.pivot=new o.Point(0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(t){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(((r=s)&&r.__esModule?r:{default:r}).default);i.default=a},{"../math":70,"./TransformBase":51}],51:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("../math"),n=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.worldTransform=new r.Matrix,this.localTransform=new r.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(t){var e=t.worldTransform,i=this.worldTransform,r=this.localTransform;i.a=r.a*e.a+r.b*e.c,i.b=r.a*e.b+r.b*e.d,i.c=r.c*e.a+r.d*e.c,i.d=r.c*e.b+r.d*e.d,i.tx=r.tx*e.a+r.ty*e.c+e.tx,i.ty=r.tx*e.b+r.ty*e.d+e.ty,this._worldID++},t}();i.default=n,n.prototype.updateWorldTransform=n.prototype.updateTransform,n.IDENTITY=new n},{"../math":70}],52:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("../math"),s=t("./TransformBase"),a=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return i.position=new o.ObservablePoint(i.onChange,i,0,0),i.scale=new o.ObservablePoint(i.onChange,i,1,1),i.pivot=new o.ObservablePoint(i.onChange,i,0,0),i.skew=new o.ObservablePoint(i.updateSkew,i,0,0),i._rotation=0,i._cx=1,i._sx=0,i._cy=0,i._sy=1,i._localID=0,i._currentLocalID=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(t){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){var i=t.worldTransform,r=this.worldTransform;r.a=e.a*i.a+e.b*i.c,r.b=e.a*i.b+e.b*i.d,r.c=e.c*i.a+e.d*i.c,r.d=e.c*i.b+e.d*i.d,r.tx=e.tx*i.a+e.ty*i.c+i.tx,r.ty=e.tx*i.b+e.ty*i.d+i.ty,this._parentID=t._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}}]),e}(((r=s)&&r.__esModule?r:{default:r}).default);i.default=a},{"../math":70,"./TransformBase":51}],53:[function(t,e,i){"use strict";i.__esModule=!0;var r=d(t("../display/Container")),n=d(t("../textures/RenderTexture")),o=d(t("../textures/Texture")),s=d(t("./GraphicsData")),a=d(t("../sprites/Sprite")),l=t("../math"),h=t("../utils"),u=t("../const"),c=d(t("../display/Bounds")),p=d(t("./utils/bezierCurveTo")),f=d(t("../renderers/canvas/CanvasRenderer"));function d(t){return t&&t.__esModule?t:{default:t}}function g(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function m(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var v=void 0,y=new l.Matrix,_=new l.Point,x=new Float32Array(4),b=new Float32Array(4),T=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]&&arguments[0];g(this,e);var r=m(this,t.call(this));return r.fillAlpha=1,r.lineWidth=0,r.nativeLines=i,r.lineColor=0,r.lineAlignment=.5,r.graphicsData=[],r.tint=16777215,r._prevTint=16777215,r.blendMode=u.BLEND_MODES.NORMAL,r.currentPath=null,r._webGL={},r.isMask=!1,r.boundsPadding=0,r._localBounds=new c.default,r.dirty=0,r.fastRectDirty=-1,r.clearDirty=0,r.boundsDirty=-1,r.cachedSpriteDirty=!1,r._spriteRect=null,r._fastRect=!1,r._prevRectTint=null,r._prevRectFillColor=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.clone=function(){var t=new e;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.lineAlignment=this.lineAlignment,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var i=0;i<this.graphicsData.length;++i)t.graphicsData.push(this.graphicsData[i].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},e.prototype._quadraticCurveLength=function(t,e,i,r,n,o){var s=t-2*i+n,a=e-2*r+o,l=2*i-2*t,h=2*r-2*e,u=4*(s*s+a*a),c=4*(s*l+a*h),p=l*l+h*h,f=2*Math.sqrt(u+c+p),d=Math.sqrt(u),g=2*u*d,m=2*Math.sqrt(p),v=c/d;return(g*f+d*c*(f-m)+(4*p*u-c*c)*Math.log((2*d+v+f)/(v+m)))/(4*g)},e.prototype._bezierCurveLength=function(t,e,i,r,n,o,s,a){for(var l=0,h=0,u=0,c=0,p=0,f=0,d=0,g=0,m=0,v=0,y=0,_=t,x=e,b=1;b<=10;++b)v=_-(g=(d=(f=(p=1-(h=b/10))*p)*p)*t+3*f*h*i+3*p*(u=h*h)*n+(c=u*h)*s),y=x-(m=d*e+3*f*h*r+3*p*u*o+c*a),_=g,x=m,l+=Math.sqrt(v*v+y*y);return l},e.prototype._segmentsCount=function(t){var i=Math.ceil(t/e.CURVES.maxLength);return i<e.CURVES.minSegments?i=e.CURVES.minSegments:i>e.CURVES.maxSegments&&(i=e.CURVES.maxSegments),i},e.prototype.lineStyle=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;if(this.lineWidth=t,this.lineColor=e,this.lineAlpha=i,this.lineAlignment=r,this.currentPath)if(this.currentPath.shape.points.length){var n=new l.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha,this.currentPath.lineAlignment=this.lineAlignment;return this},e.prototype.moveTo=function(t,e){var i=new l.Polygon([t,e]);return i.closed=!1,this.drawShape(i),this},e.prototype.lineTo=function(t,e){var i=this.currentPath.shape.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||(i.push(t,e),this.dirty++),this},e.prototype.quadraticCurveTo=function(t,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=0,a=0;0===o.length&&this.moveTo(0,0);for(var l=o[o.length-2],h=o[o.length-1],u=e.CURVES.adaptive?this._segmentsCount(this._quadraticCurveLength(l,h,t,i,r,n)):20,c=1;c<=u;++c){var p=c/u;s=l+(t-l)*p,a=h+(i-h)*p,o.push(s+(t+(r-t)*p-s)*p,a+(i+(n-i)*p-a)*p)}return this.dirty++,this},e.prototype.bezierCurveTo=function(t,i,r,n,o,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var a=this.currentPath.shape.points,l=a[a.length-2],h=a[a.length-1];a.length-=2;var u=e.CURVES.adaptive?this._segmentsCount(this._bezierCurveLength(l,h,t,i,r,n,o,s)):20;return(0,p.default)(l,h,t,i,r,n,o,s,u,a),this.dirty++,this},e.prototype.arcTo=function(t,e,i,r,n){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,e):this.moveTo(t,e);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1]-e,l=s-t,h=r-e,u=i-t,c=Math.abs(a*u-l*h);if(c<1e-8||0===n)o[o.length-2]===t&&o[o.length-1]===e||o.push(t,e);else{var p=a*a+l*l,f=h*h+u*u,d=a*h+l*u,g=n*Math.sqrt(p)/c,m=n*Math.sqrt(f)/c,v=g*d/p,y=m*d/f,_=g*u+m*l,x=g*h+m*a,b=l*(m+v),T=a*(m+v),w=u*(g+y),S=h*(g+y),A=Math.atan2(T-x,b-_),P=Math.atan2(S-x,w-_);this.arc(_+t,x+e,n,A,P,l*h>u*a)}return this.dirty++,this},e.prototype.arc=function(t,i,r,n,o){var s=arguments.length>5&&void 0!==arguments[5]&&arguments[5];if(n===o)return this;!s&&o<=n?o+=u.PI_2:s&&n<=o&&(n+=u.PI_2);var a=o-n,l=e.CURVES.adaptive?this._segmentsCount(Math.abs(a)*r):40*Math.ceil(Math.abs(a)/u.PI_2);if(0===a)return this;var h=t+Math.cos(n)*r,c=i+Math.sin(n)*r,p=this.currentPath?this.currentPath.shape.points:null;if(p){var f=Math.abs(p[p.length-2]-h),d=Math.abs(p[p.length-1]-c);f<.001&&d<.001||p.push(h,c)}else this.moveTo(h,c),p=this.currentPath.shape.points;for(var g=a/(2*l),m=2*g,v=Math.cos(g),y=Math.sin(g),_=l-1,x=_%1/_,b=0;b<=_;++b){var T=b+x*b,w=g+n+m*T,S=Math.cos(w),A=-Math.sin(w);p.push((v*S+y*A)*r+t,(v*-A+y*S)*r+i)}return this.dirty++,this},e.prototype.beginFill=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=t,this.fillAlpha=e,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},e.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},e.prototype.drawRect=function(t,e,i,r){return this.drawShape(new l.Rectangle(t,e,i,r)),this},e.prototype.drawRoundedRect=function(t,e,i,r,n){return this.drawShape(new l.RoundedRectangle(t,e,i,r,n)),this},e.prototype.drawCircle=function(t,e,i){return this.drawShape(new l.Circle(t,e,i)),this},e.prototype.drawEllipse=function(t,e,i,r){return this.drawShape(new l.Ellipse(t,e,i,r)),this},e.prototype.drawPolygon=function(t){var e=t,i=!0;if(e instanceof l.Polygon&&(i=e.closed,e=e.points),!Array.isArray(e)){e=new Array(arguments.length);for(var r=0;r<e.length;++r)e[r]=arguments[r]}var n=new l.Polygon(e);return n.closed=i,this.drawShape(n),this},e.prototype.drawStar=function(t,e,i,r,n){var o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;n=n||r/2;for(var s=-1*Math.PI/2+o,a=2*i,l=u.PI_2/a,h=[],c=0;c<a;c++){var p=c%2?n:r,f=c*l+s;h.push(t+p*Math.cos(f),e+p*Math.sin(f))}return this.drawPolygon(h)},e.prototype.clear=function(){return(this.lineWidth||this.filling||this.graphicsData.length>0)&&(this.lineWidth=0,this.lineAlignment=.5,this.filling=!1,this.boundsDirty=-1,this.canvasTintDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},e.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===u.SHAPES.RECT&&!this.graphicsData[0].lineWidth},e.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},e.prototype._renderSpriteRect=function(t){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new a.default(new o.default(o.default.WHITE)));var i=this._spriteRect,r=this.graphicsData[0].fillColor;if(16777215===this.tint)i.tint=r;else if(this.tint!==this._prevRectTint||r!==this._prevRectFillColor){var n=x,s=b;(0,h.hex2rgb)(r,n),(0,h.hex2rgb)(this.tint,s),n[0]*=s[0],n[1]*=s[1],n[2]*=s[2],i.tint=(0,h.rgb2hex)(n),this._prevRectTint=this.tint,this._prevRectFillColor=r}i.alpha=this.graphicsData[0].fillAlpha,i.worldAlpha=this.worldAlpha*i.alpha,i.blendMode=this.blendMode,i._texture._frame.width=e.width,i._texture._frame.height=e.height,i.transform.worldTransform=this.transform.worldTransform,i.anchor.set(-e.x/e.width,-e.y/e.height),i._onAnchorUpdate(),i._renderWebGL(t)},e.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},e.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,_);for(var e=this.graphicsData,i=0;i<e.length;++i){var r=e[i];if(r.fill&&r.shape&&r.shape.contains(_.x,_.y)){if(r.holes)for(var n=0;n<r.holes.length;n++)if(r.holes[n].contains(_.x,_.y))return!1;return!0}}return!1},e.prototype.updateLocalBounds=function(){var t=1/0,e=-1/0,i=1/0,r=-1/0;if(this.graphicsData.length)for(var n=0,o=0,s=0,a=0,l=0,h=0;h<this.graphicsData.length;h++){var c=this.graphicsData[h],p=c.type,f=c.lineWidth*c.lineAlignment;if(n=c.shape,p===u.SHAPES.RECT||p===u.SHAPES.RREC)o=n.x-f,s=n.y-f,t=o<t?o:t,e=o+(a=n.width+2*f)>e?o+a:e,i=s<i?s:i,r=s+(l=n.height+2*f)>r?s+l:r;else if(p===u.SHAPES.CIRC)o=n.x,s=n.y,t=o-(a=n.radius+f)<t?o-a:t,e=o+a>e?o+a:e,i=s-(l=n.radius+f)<i?s-l:i,r=s+l>r?s+l:r;else if(p===u.SHAPES.ELIP)o=n.x,s=n.y,t=o-(a=n.width+f)<t?o-a:t,e=o+a>e?o+a:e,i=s-(l=n.height+f)<i?s-l:i,r=s+l>r?s+l:r;else for(var d=n.points,g=0,m=0,v=0,y=0,_=0,x=0,b=0,T=0,w=0;w+2<d.length;w+=2)o=d[w],s=d[w+1],g=d[w+2],m=d[w+3],v=Math.abs(g-o),y=Math.abs(m-s),l=2*f,(a=Math.sqrt(v*v+y*y))<1e-9||(t=(b=(g+o)/2)-(_=(l/a*y+v)/2)<t?b-_:t,e=b+_>e?b+_:e,i=(T=(m+s)/2)-(x=(l/a*v+y)/2)<i?T-x:i,r=T+x>r?T+x:r)}else t=0,e=0,i=0,r=0;var S=this.boundsPadding;this._localBounds.minX=t-S,this._localBounds.maxX=e+S,this._localBounds.minY=i-S,this._localBounds.maxY=r+S},e.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null;var e=new s.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,t,this.lineAlignment);return this.graphicsData.push(e),e.type===u.SHAPES.POLY&&(e.shape.closed=e.shape.closed,this.currentPath=e),this.dirty++,e},e.prototype.generateCanvasTexture=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=this.getLocalBounds(),r=n.default.create(i.width,i.height,t,e);v||(v=new f.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(y),y.invert(),y.tx-=i.x,y.ty-=i.y,v.render(this,r,!0,y);var s=o.default.fromCanvas(r.baseTexture._canvasRenderTarget.canvas,t,"graphics");return s.baseTexture.resolution=e,s.baseTexture.update(),s},e.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},e.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e);for(var i=0;i<this.graphicsData.length;++i)this.graphicsData[i].destroy();for(var r in this._webGL)for(var n=0;n<this._webGL[r].data.length;++n)this._webGL[r].data[n].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webGL=null,this._localBounds=null},e}(r.default);i.default=T,T._SPRITE_TEXTURE=null,T.CURVES={adaptive:!1,maxLength:10,minSegments:8,maxSegments:2048}},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":125,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(e,i,r,n,o,s,a,l,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.lineWidth=e,this.lineAlignment=h,this.nativeLines=a,this.lineColor=i,this.lineAlpha=r,this._lineTint=i,this.fillColor=n,this.fillAlpha=o,this._fillTint=n,this.fill=s,this.holes=[],this.shape=l,this.type=l.type}return t.prototype.clone=function(){return new t(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape,this.lineAlignment)},t.prototype.addHole=function(t){this.holes.push(t)},t.prototype.destroy=function(){this.shape=null,this.holes=null},t}();i.default=r},{}],55:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../../renderers/canvas/CanvasRenderer"),o=(r=n)&&r.__esModule?r:{default:r},s=t("../../const"),a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldAlpha,n=t.transform.worldTransform,o=e.resolution;i.setTransform(n.a*o,n.b*o,n.c*o,n.d*o,n.tx*o,n.ty*o),t.canvasTintDirty===t.dirty&&t._prevTint===t.tint||this.updateGraphicsTint(t),e.setBlendMode(t.blendMode);for(var a=0;a<t.graphicsData.length;a++){var l=t.graphicsData[a],h=l.shape,u=l._fillTint,c=l._lineTint;if(i.lineWidth=l.lineWidth,l.type===s.SHAPES.POLY){i.beginPath();var p=h.points,f=l.holes,d=void 0,g=void 0;i.moveTo(p[0],p[1]);for(var m=2;m<p.length;m+=2)i.lineTo(p[m],p[m+1]);if(h.closed&&i.closePath(),f.length>0){d=0;for(var v=0;v<p.length;v+=2)d+=p[v]*p[v+3]-p[v+1]*p[v+2];for(var y=0;y<f.length;y++){p=f[y].points,g=0;for(var _=0;_<p.length;_+=2)g+=p[_]*p[_+3]-p[_+1]*p[_+2];if(i.moveTo(p[0],p[1]),g*d<0)for(var x=2;x<p.length;x+=2)i.lineTo(p[x],p[x+1]);else for(var b=p.length-2;b>=2;b-=2)i.lineTo(p[b],p[b+1]);f[y].closed&&i.closePath()}}l.fill&&(i.globalAlpha=l.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===s.SHAPES.RECT)(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fillRect(h.x,h.y,h.width,h.height)),l.lineWidth&&(i.globalAlpha=l.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.strokeRect(h.x,h.y,h.width,h.height));else if(l.type===s.SHAPES.CIRC)i.beginPath(),i.arc(h.x,h.y,h.radius,0,2*Math.PI),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke());else if(l.type===s.SHAPES.ELIP){var T=2*h.width,w=2*h.height,S=h.x-T/2,A=h.y-w/2;i.beginPath();var P=T/2*.5522848,E=w/2*.5522848,C=S+T,O=A+w,I=S+T/2,M=A+w/2;i.moveTo(S,M),i.bezierCurveTo(S,M-E,I-P,A,I,A),i.bezierCurveTo(I+P,A,C,M-E,C,M),i.bezierCurveTo(C,M+E,I+P,O,I,O),i.bezierCurveTo(I-P,O,S,M+E,S,M),i.closePath(),l.fill&&(i.globalAlpha=l.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}else if(l.type===s.SHAPES.RREC){var R=h.x,D=h.y,k=h.width,L=h.height,N=h.radius,F=Math.min(k,L)/2|0;N=N>F?F:N,i.beginPath(),i.moveTo(R,D+N),i.lineTo(R,D+L-N),i.quadraticCurveTo(R,D+L,R+N,D+L),i.lineTo(R+k-N,D+L),i.quadraticCurveTo(R+k,D+L,R+k,D+L-N),i.lineTo(R+k,D+N),i.quadraticCurveTo(R+k,D,R+k-N,D),i.lineTo(R+N,D),i.quadraticCurveTo(R,D,R,D+N),i.closePath(),(l.fillColor||0===l.fillColor)&&(i.globalAlpha=l.fillAlpha*r,i.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),i.fill()),l.lineWidth&&(i.globalAlpha=l.lineAlpha*r,i.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),i.stroke())}}},t.prototype.updateGraphicsTint=function(t){t._prevTint=t.tint,t.canvasTintDirty=t.dirty;for(var e=(t.tint>>16&255)/255,i=(t.tint>>8&255)/255,r=(255&t.tint)/255,n=0;n<t.graphicsData.length;++n){var o=t.graphicsData[n],s=0|o.fillColor,a=0|o.lineColor;o._fillTint=((s>>16&255)/255*e*255<<16)+((s>>8&255)/255*i*255<<8)+(255&s)/255*r*255,o._lineTint=((a>>16&255)/255*e*255<<16)+((a>>8&255)/255*i*255<<8)+(255&a)/255*r*255}},t.prototype.renderPolygon=function(t,e,i){i.moveTo(t[0],t[1]);for(var r=1;r<t.length/2;++r)i.lineTo(t[2*r],t[2*r+1]);e&&i.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();i.default=a,o.default.registerPlugin("graphics",a)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i,r,n,o,s,a,l){var h=arguments.length>9&&void 0!==arguments[9]?arguments[9]:[],u=0,c=0,p=0,f=0,d=0;h.push(t,e);for(var g=1,m=0;g<=l;++g)p=(c=(u=1-(m=g/l))*u)*u,d=(f=m*m)*m,h.push(p*t+3*c*m*i+3*u*f*n+d*s,p*e+3*c*m*r+3*u*f*o+d*a);return h}},{}],57:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("../../utils"),n=t("../../const"),o=f(t("../../renderers/webgl/utils/ObjectRenderer")),s=f(t("../../renderers/webgl/WebGLRenderer")),a=f(t("./WebGLGraphicsData")),l=f(t("./shaders/PrimitiveShader")),h=f(t("./utils/buildPoly")),u=f(t("./utils/buildRectangle")),c=f(t("./utils/buildRoundedRectangle")),p=f(t("./utils/buildCircle"));function f(t){return t&&t.__esModule?t:{default:t}}var d=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.graphicsDataPool=[],r.primitiveShader=null,r.gl=i.gl,r.CONTEXT_UID=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new l.default(this.gl)},e.prototype.destroy=function(){o.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(t){var e=this.renderer,i=e.gl,n=void 0,o=t._webGL[this.CONTEXT_UID];o&&t.dirty===o.dirty||(this.updateGraphics(t),o=t._webGL[this.CONTEXT_UID]);var s=this.primitiveShader;e.bindShader(s),e.state.setBlendMode(t.blendMode);for(var a=0,l=o.data.length;a<l;a++){var h=(n=o.data[a]).shader;e.bindShader(h),h.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),h.uniforms.tint=(0,r.hex2rgb)(t.tint),h.uniforms.alpha=t.worldAlpha,e.bindVao(n.vao),n.nativeLines?i.drawArrays(i.LINES,0,n.points.length/6):n.vao.draw(i.TRIANGLE_STRIP,n.indices.length)}},e.prototype.updateGraphics=function(t){var e=this.renderer.gl,i=t._webGL[this.CONTEXT_UID];if(i||(i=t._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),i.dirty=t.dirty,t.clearDirty!==i.clearDirty){i.clearDirty=t.clearDirty;for(var r=0;r<i.data.length;r++)this.graphicsDataPool.push(i.data[r]);i.data.length=0,i.lastIndex=0}for(var o=void 0,s=void 0,a=i.lastIndex;a<t.graphicsData.length;a++){var l=t.graphicsData[a];o=this.getWebGLData(i,0),l.nativeLines&&l.lineWidth&&(s=this.getWebGLData(i,0,!0),i.lastIndex++),l.type===n.SHAPES.POLY&&(0,h.default)(l,o,s),l.type===n.SHAPES.RECT?(0,u.default)(l,o,s):l.type===n.SHAPES.CIRC||l.type===n.SHAPES.ELIP?(0,p.default)(l,o,s):l.type===n.SHAPES.RREC&&(0,c.default)(l,o,s),i.lastIndex++}this.renderer.bindVao(null);for(var f=0;f<i.data.length;f++)(o=i.data[f]).dirty&&o.upload()},e.prototype.getWebGLData=function(t,e,i){var r=t.data[t.data.length-1];return(!r||r.nativeLines!==i||r.points.length>32e4)&&((r=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=i,r.reset(e),t.data.push(r)),r.dirty=!0,r},e}(o.default);i.default=d,s.default.registerPlugin("graphics",d)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":125,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("pixi-gl-core"),o=(r=n)&&r.__esModule?r:{default:r},s=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=i,this.vao=new o.default.VertexArrayObject(e,r).addIndex(this.indexBuffer).addAttribute(this.buffer,i.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,i.attributes.aColor,e.FLOAT,!1,24,8)}return t.prototype.reset=function(){this.points.length=0,this.indices.length=0},t.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},t.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},t}();i.default=s},{"pixi-gl-core":15}],59:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../../../Shader"),o=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=n)&&r.__esModule?r:{default:r}).default);i.default=o},{"../../../Shader":44}],60:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){var r=t.shape,n=r.x,l=r.y,h=void 0,u=void 0;if(t.type===s.SHAPES.CIRC?(h=r.radius,u=r.radius):(h=r.width,u=r.height),0!==h&&0!==u){var c=Math.floor(30*Math.sqrt(r.radius))||Math.floor(15*Math.sqrt(r.width+r.height)),p=2*Math.PI/c;if(t.fill){var f=(0,a.hex2rgb)(t.fillColor),d=t.fillAlpha,g=f[0]*d,m=f[1]*d,v=f[2]*d,y=e.points,_=e.indices,x=y.length/6;_.push(x);for(var b=0;b<c+1;b++)y.push(n,l,g,m,v,d),y.push(n+Math.sin(p*b)*h,l+Math.cos(p*b)*u,g,m,v,d),_.push(x++,x++);_.push(x-1)}if(t.lineWidth){var T=t.points;t.points=[];for(var w=0;w<c;w++)t.points.push(n+Math.sin(p*-w)*h,l+Math.cos(p*-w)*u);t.points.push(t.points[0],t.points[1]),(0,o.default)(t,e,i),t.points=T}}};var r,n=t("./buildLine"),o=(r=n)&&r.__esModule?r:{default:r},s=t("../../../const"),a=t("../../../utils")},{"../../../const":46,"../../../utils":125,"./buildLine":61}],61:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){t.nativeLines?function(t,e){var i=0,r=t.points;if(0!==r.length){var o=e.points,s=r.length/2,a=(0,n.hex2rgb)(t.lineColor),l=t.lineAlpha,h=a[0]*l,u=a[1]*l,c=a[2]*l;for(i=1;i<s;i++){var p=r[2*(i-1)],f=r[2*(i-1)+1],d=r[2*i],g=r[2*i+1];o.push(p,f),o.push(h,u,c,l),o.push(d,g),o.push(h,u,c,l)}}}(t,i):function(t,e){var i=t.points;if(0!==i.length){var o=new r.Point(i[0],i[1]),s=new r.Point(i[i.length-2],i[i.length-1]);if(o.x===s.x&&o.y===s.y){(i=i.slice()).pop(),i.pop();var a=(s=new r.Point(i[i.length-2],i[i.length-1])).x+.5*(o.x-s.x),l=s.y+.5*(o.y-s.y);i.unshift(a,l),i.push(a,l)}var h=e.points,u=e.indices,c=i.length/2,p=i.length,f=h.length/6,d=t.lineWidth/2,g=(0,n.hex2rgb)(t.lineColor),m=t.lineAlpha,v=g[0]*m,y=g[1]*m,_=g[2]*m,x=i[0],b=i[1],T=i[2],w=i[3],S=0,A=0,P=-(b-w),E=x-T,C=0,O=0,I=0,M=0,R=Math.sqrt(P*P+E*E);P/=R,E/=R,P*=d,E*=d;var D=t.lineAlignment,k=2*(1-D),L=2*D;h.push(x-P*k,b-E*k,v,y,_,m),h.push(x+P*L,b+E*L,v,y,_,m);for(var N=1;N<c-1;++N){x=i[2*(N-1)],b=i[2*(N-1)+1],T=i[2*N],w=i[2*N+1],S=i[2*(N+1)],A=i[2*(N+1)+1],P=-(b-w),E=x-T,R=Math.sqrt(P*P+E*E),P/=R,E/=R,P*=d,E*=d,C=-(w-A),O=T-S,R=Math.sqrt(C*C+O*O),C/=R,O/=R;var F=-E+b-(-E+w),B=-P+T-(-P+x),j=(-P+x)*(-E+w)-(-P+T)*(-E+b),U=-(O*=d)+A-(-O+w),X=-(C*=d)+T-(-C+S),G=(-C+S)*(-O+w)-(-C+T)*(-O+A),W=F*X-U*B;if(Math.abs(W)<.1)W+=10.1,h.push(T-P*k,w-E*k,v,y,_,m),h.push(T+P*L,w+E*L,v,y,_,m);else{var V=(B*G-X*j)/W,z=(U*j-F*G)/W;(V-T)*(V-T)+(z-w)*(z-w)>196*d*d?(I=P-C,M=E-O,R=Math.sqrt(I*I+M*M),I/=R,M/=R,I*=d,M*=d,h.push(T-I*k,w-M*k),h.push(v,y,_,m),h.push(T+I*L,w+M*L),h.push(v,y,_,m),h.push(T-I*L*k,w-M*k),h.push(v,y,_,m),p++):(h.push(T+(V-T)*k,w+(z-w)*k),h.push(v,y,_,m),h.push(T-(V-T)*L,w-(z-w)*L),h.push(v,y,_,m))}}x=i[2*(c-2)],b=i[2*(c-2)+1],T=i[2*(c-1)],w=i[2*(c-1)+1],P=-(b-w),E=x-T,R=Math.sqrt(P*P+E*E),P/=R,E/=R,P*=d,E*=d,h.push(T-P*k,w-E*k),h.push(v,y,_,m),h.push(T+P*L,w+E*L),h.push(v,y,_,m),u.push(f);for(var H=0;H<p;++H)u.push(f++);u.push(f-1)}}(t,e)};var r=t("../../../math"),n=t("../../../utils")},{"../../../math":70,"../../../utils":125}],62:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){t.points=t.shape.points.slice();var s=t.points;if(t.fill&&s.length>=6){for(var a=[],l=t.holes,h=0;h<l.length;h++){var u=l[h];a.push(s.length/2),s=s.concat(u.points)}var c=e.points,p=e.indices,f=s.length/2,d=(0,n.hex2rgb)(t.fillColor),g=t.fillAlpha,m=d[0]*g,v=d[1]*g,y=d[2]*g,_=(0,o.default)(s,a,2);if(!_)return;for(var x=c.length/6,b=0;b<_.length;b+=3)p.push(_[b]+x),p.push(_[b]+x),p.push(_[b+1]+x),p.push(_[b+2]+x),p.push(_[b+2]+x);for(var T=0;T<f;T++)c.push(s[2*T],s[2*T+1],m,v,y,g)}t.lineWidth>0&&(0,r.default)(t,e,i)};var r=s(t("./buildLine")),n=t("../../../utils"),o=s(t("earcut"));function s(t){return t&&t.__esModule?t:{default:t}}},{"../../../utils":125,"./buildLine":61,earcut:2}],63:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){var r=t.shape,n=r.x,a=r.y,l=r.width,h=r.height;if(t.fill){var u=(0,s.hex2rgb)(t.fillColor),c=t.fillAlpha,p=u[0]*c,f=u[1]*c,d=u[2]*c,g=e.points,m=e.indices,v=g.length/6;g.push(n,a),g.push(p,f,d,c),g.push(n+l,a),g.push(p,f,d,c),g.push(n,a+h),g.push(p,f,d,c),g.push(n+l,a+h),g.push(p,f,d,c),m.push(v,v,v+1,v+2,v+3,v+3)}if(t.lineWidth){var y=t.points;t.points=[n,a,n+l,a,n+l,a+h,n,a+h,n,a],(0,o.default)(t,e,i),t.points=y}};var r,n=t("./buildLine"),o=(r=n)&&r.__esModule?r:{default:r},s=t("../../../utils")},{"../../../utils":125,"./buildLine":61}],64:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){var s=t.shape,a=s.x,h=s.y,u=s.width,c=s.height,p=s.radius,f=[];if(f.push(a+p,h),l(a+u-p,h,a+u,h,a+u,h+p,f),l(a+u,h+c-p,a+u,h+c,a+u-p,h+c,f),l(a+p,h+c,a,h+c,a,h+c-p,f),l(a,h+p,a,h,a+p+1e-10,h,f),t.fill){for(var d=(0,o.hex2rgb)(t.fillColor),g=t.fillAlpha,m=d[0]*g,v=d[1]*g,y=d[2]*g,_=e.points,x=e.indices,b=_.length/6,T=(0,r.default)(f,null,2),w=0,S=T.length;w<S;w+=3)x.push(T[w]+b),x.push(T[w]+b),x.push(T[w+1]+b),x.push(T[w+2]+b),x.push(T[w+2]+b);for(var A=0,P=f.length;A<P;A++)_.push(f[A],f[++A],m,v,y,g)}if(t.lineWidth){var E=t.points;t.points=f,(0,n.default)(t,e,i),t.points=E}};var r=s(t("earcut")),n=s(t("./buildLine")),o=t("../../../utils");function s(t){return t&&t.__esModule?t:{default:t}}function a(t,e,i){return t+(e-t)*i}function l(t,e,i,r,n,o){for(var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:[],l=20,h=s,u=0,c=0,p=0,f=0,d=0,g=0,m=0,v=0;m<=l;++m)u=a(t,i,v=m/l),c=a(e,r,v),p=a(i,n,v),f=a(r,o,v),d=a(u,p,v),g=a(c,f,v),h.push(d,g);return h}},{"../../../utils":125,"./buildLine":61,earcut:2}],65:[function(t,e,i){"use strict";i.__esModule=!0,i.autoDetectRenderer=i.Application=i.Filter=i.SpriteMaskFilter=i.Quad=i.RenderTarget=i.ObjectRenderer=i.WebGLManager=i.Shader=i.CanvasRenderTarget=i.TextureUvs=i.VideoBaseTexture=i.BaseRenderTexture=i.RenderTexture=i.BaseTexture=i.TextureMatrix=i.Texture=i.Spritesheet=i.CanvasGraphicsRenderer=i.GraphicsRenderer=i.GraphicsData=i.Graphics=i.TextMetrics=i.TextStyle=i.Text=i.SpriteRenderer=i.CanvasTinter=i.CanvasSpriteRenderer=i.Sprite=i.TransformBase=i.TransformStatic=i.Transform=i.Container=i.DisplayObject=i.Bounds=i.glCore=i.WebGLRenderer=i.CanvasRenderer=i.ticker=i.utils=i.settings=void 0;var r=t("./const");Object.keys(r).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return r[t]}})}));var n=t("./math");Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(i,t,{enumerable:!0,get:function(){return n[t]}})}));var o=t("pixi-gl-core");Object.defineProperty(i,"glCore",{enumerable:!0,get:function(){return Y(o).default}});var s=t("./display/Bounds");Object.defineProperty(i,"Bounds",{enumerable:!0,get:function(){return Y(s).default}});var a=t("./display/DisplayObject");Object.defineProperty(i,"DisplayObject",{enumerable:!0,get:function(){return Y(a).default}});var l=t("./display/Container");Object.defineProperty(i,"Container",{enumerable:!0,get:function(){return Y(l).default}});var h=t("./display/Transform");Object.defineProperty(i,"Transform",{enumerable:!0,get:function(){return Y(h).default}});var u=t("./display/TransformStatic");Object.defineProperty(i,"TransformStatic",{enumerable:!0,get:function(){return Y(u).default}});var c=t("./display/TransformBase");Object.defineProperty(i,"TransformBase",{enumerable:!0,get:function(){return Y(c).default}});var p=t("./sprites/Sprite");Object.defineProperty(i,"Sprite",{enumerable:!0,get:function(){return Y(p).default}});var f=t("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(i,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return Y(f).default}});var d=t("./sprites/canvas/CanvasTinter");Object.defineProperty(i,"CanvasTinter",{enumerable:!0,get:function(){return Y(d).default}});var g=t("./sprites/webgl/SpriteRenderer");Object.defineProperty(i,"SpriteRenderer",{enumerable:!0,get:function(){return Y(g).default}});var m=t("./text/Text");Object.defineProperty(i,"Text",{enumerable:!0,get:function(){return Y(m).default}});var v=t("./text/TextStyle");Object.defineProperty(i,"TextStyle",{enumerable:!0,get:function(){return Y(v).default}});var y=t("./text/TextMetrics");Object.defineProperty(i,"TextMetrics",{enumerable:!0,get:function(){return Y(y).default}});var _=t("./graphics/Graphics");Object.defineProperty(i,"Graphics",{enumerable:!0,get:function(){return Y(_).default}});var x=t("./graphics/GraphicsData");Object.defineProperty(i,"GraphicsData",{enumerable:!0,get:function(){return Y(x).default}});var b=t("./graphics/webgl/GraphicsRenderer");Object.defineProperty(i,"GraphicsRenderer",{enumerable:!0,get:function(){return Y(b).default}});var T=t("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(i,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return Y(T).default}});var w=t("./textures/Spritesheet");Object.defineProperty(i,"Spritesheet",{enumerable:!0,get:function(){return Y(w).default}});var S=t("./textures/Texture");Object.defineProperty(i,"Texture",{enumerable:!0,get:function(){return Y(S).default}});var A=t("./textures/TextureMatrix");Object.defineProperty(i,"TextureMatrix",{enumerable:!0,get:function(){return Y(A).default}});var P=t("./textures/BaseTexture");Object.defineProperty(i,"BaseTexture",{enumerable:!0,get:function(){return Y(P).default}});var E=t("./textures/RenderTexture");Object.defineProperty(i,"RenderTexture",{enumerable:!0,get:function(){return Y(E).default}});var C=t("./textures/BaseRenderTexture");Object.defineProperty(i,"BaseRenderTexture",{enumerable:!0,get:function(){return Y(C).default}});var O=t("./textures/VideoBaseTexture");Object.defineProperty(i,"VideoBaseTexture",{enumerable:!0,get:function(){return Y(O).default}});var I=t("./textures/TextureUvs");Object.defineProperty(i,"TextureUvs",{enumerable:!0,get:function(){return Y(I).default}});var M=t("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(i,"CanvasRenderTarget",{enumerable:!0,get:function(){return Y(M).default}});var R=t("./Shader");Object.defineProperty(i,"Shader",{enumerable:!0,get:function(){return Y(R).default}});var D=t("./renderers/webgl/managers/WebGLManager");Object.defineProperty(i,"WebGLManager",{enumerable:!0,get:function(){return Y(D).default}});var k=t("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(i,"ObjectRenderer",{enumerable:!0,get:function(){return Y(k).default}});var L=t("./renderers/webgl/utils/RenderTarget");Object.defineProperty(i,"RenderTarget",{enumerable:!0,get:function(){return Y(L).default}});var N=t("./renderers/webgl/utils/Quad");Object.defineProperty(i,"Quad",{enumerable:!0,get:function(){return Y(N).default}});var F=t("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(i,"SpriteMaskFilter",{enumerable:!0,get:function(){return Y(F).default}});var B=t("./renderers/webgl/filters/Filter");Object.defineProperty(i,"Filter",{enumerable:!0,get:function(){return Y(B).default}});var j=t("./Application");Object.defineProperty(i,"Application",{enumerable:!0,get:function(){return Y(j).default}});var U=t("./autoDetectRenderer");Object.defineProperty(i,"autoDetectRenderer",{enumerable:!0,get:function(){return U.autoDetectRenderer}});var X=H(t("./utils")),G=H(t("./ticker")),W=Y(t("./settings")),V=Y(t("./renderers/canvas/CanvasRenderer")),z=Y(t("./renderers/webgl/WebGLRenderer"));function H(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function Y(t){return t&&t.__esModule?t:{default:t}}i.settings=W.default,i.utils=X,i.ticker=G,i.CanvasRenderer=V.default,i.WebGLRenderer=z.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureMatrix":116,"./textures/TextureUvs":117,"./textures/VideoBaseTexture":118,"./ticker":121,"./utils":125,"pixi-gl-core":15}],66:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("./Matrix"),o=(r=n)&&r.__esModule?r:{default:r},s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],a=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],l=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],u=[],c=[];function p(t){return t<0?-1:t>0?1:0}!function(){for(var t=0;t<16;t++){var e=[];c.push(e);for(var i=0;i<16;i++)for(var r=p(s[t]*s[i]+l[t]*a[i]),n=p(a[t]*s[i]+h[t]*a[i]),f=p(s[t]*l[i]+l[t]*h[i]),d=p(a[t]*l[i]+h[t]*h[i]),g=0;g<16;g++)if(s[g]===r&&a[g]===n&&l[g]===f&&h[g]===d){e.push(g);break}}for(var m=0;m<16;m++){var v=new o.default;v.set(s[m],a[m],l[m],h[m],0,0),u.push(v)}}();var f={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return s[t]},uY:function(t){return a[t]},vX:function(t){return l[t]},vY:function(t){return h[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(t,e){return c[t][e]},sub:function(t,e){return c[t][f.inv(e)]},rotate180:function(t){return 4^t},isVertical:function(t){return 2==(3&t)},byDirection:function(t,e){return 2*Math.abs(t)<=Math.abs(e)?e>=0?f.S:f.N:2*Math.abs(e)<=Math.abs(t)?t>0?f.E:f.W:e>0?t>0?f.SE:f.SW:t>0?f.NE:f.NW},matrixAppendRotationInv:function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,n=u[f.inv(e)];n.tx=i,n.ty=r,t.append(n)}};i.default=f},{"./Matrix":67}],67:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("./Point"),s=(r=o)&&r.__esModule?r:{default:r},a=t("../const");function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var h=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1,o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0;l(this,t),this.a=e,this.b=i,this.c=r,this.d=n,this.tx=o,this.ty=s,this.array=null}return t.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},t.prototype.set=function(t,e,i,r,n,o){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=o,this},t.prototype.toArray=function(t,e){this.array||(this.array=new Float32Array(9));var i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},t.prototype.apply=function(t,e){e=e||new s.default;var i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e},t.prototype.applyInverse=function(t,e){e=e||new s.default;var i=1/(this.a*this.d+this.c*-this.b),r=t.x,n=t.y;return e.x=this.d*i*r+-this.c*i*n+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*n+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,e},t.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},t.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},t.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,o=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=o*e-this.ty*i,this.ty=o*i+this.ty*e,this},t.prototype.append=function(t){var e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this},t.prototype.setTransform=function(t,e,i,r,n,o,s,a,l){return this.a=Math.cos(s+l)*n,this.b=Math.sin(s+l)*n,this.c=-Math.sin(s-a)*o,this.d=Math.cos(s-a)*o,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this},t.prototype.prepend=function(t){var e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){var i=this.a,r=this.c;this.a=i*t.a+this.b*t.c,this.b=i*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this},t.prototype.decompose=function(t){var e=this.a,i=this.b,r=this.c,n=this.d,o=-Math.atan2(-r,n),s=Math.atan2(i,e),l=Math.abs(o+s);return l<1e-5||Math.abs(a.PI_2-l)<1e-5?(t.rotation=s,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=o,t.skew.y=s),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(r*r+n*n),t.position.x=this.tx,t.position.y=this.ty,t},t.prototype.invert=function(){var t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,o=t*r-e*i;return this.a=r/o,this.b=-e/o,this.c=-i/o,this.d=t/o,this.tx=(i*this.ty-r*n)/o,this.ty=-(t*this.ty-e*n)/o,this},t.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},t.prototype.clone=function(){var e=new t;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},t.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n(t,null,[{key:"IDENTITY",get:function(){return new t}},{key:"TEMP_MATRIX",get:function(){return new t}}]),t}();i.default=h},{"../const":46,"./Point":69}],68:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}();function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;n(this,t),this._x=r,this._y=o,this.cb=e,this.scope=i}return t.prototype.clone=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=e||this.cb,n=i||this.scope;return new t(r,n,this._x,this._y)},t.prototype.set=function(t,e){var i=t||0,r=e||(0!==e?i:0);this._x===i&&this._y===r||(this._x=i,this._y=r,this.cb.call(this.scope))},t.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},t.prototype.equals=function(t){return t.x===this._x&&t.y===this._y},r(t,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),t}();i.default=o},{}],69:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var n=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;r(this,t),this.x=e,this.y=i}return t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.copy=function(t){this.set(t.x,t.y)},t.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},t.prototype.set=function(t,e){this.x=t||0,this.y=e||(0!==e?this.x:0)},t}();i.default=n},{}],70:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("./Point");Object.defineProperty(i,"Point",{enumerable:!0,get:function(){return p(r).default}});var n=t("./ObservablePoint");Object.defineProperty(i,"ObservablePoint",{enumerable:!0,get:function(){return p(n).default}});var o=t("./Matrix");Object.defineProperty(i,"Matrix",{enumerable:!0,get:function(){return p(o).default}});var s=t("./GroupD8");Object.defineProperty(i,"GroupD8",{enumerable:!0,get:function(){return p(s).default}});var a=t("./shapes/Circle");Object.defineProperty(i,"Circle",{enumerable:!0,get:function(){return p(a).default}});var l=t("./shapes/Ellipse");Object.defineProperty(i,"Ellipse",{enumerable:!0,get:function(){return p(l).default}});var h=t("./shapes/Polygon");Object.defineProperty(i,"Polygon",{enumerable:!0,get:function(){return p(h).default}});var u=t("./shapes/Rectangle");Object.defineProperty(i,"Rectangle",{enumerable:!0,get:function(){return p(u).default}});var c=t("./shapes/RoundedRectangle");function p(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"RoundedRectangle",{enumerable:!0,get:function(){return p(c).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("./Rectangle"),o=(r=n)&&r.__esModule?r:{default:r},s=t("../../const");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;a(this,t),this.x=e,this.y=i,this.radius=r,this.type=s.SHAPES.CIRC}return t.prototype.clone=function(){return new t(this.x,this.y,this.radius)},t.prototype.contains=function(t,e){if(this.radius<=0)return!1;var i=this.radius*this.radius,r=this.x-t,n=this.y-e;return(r*=r)+(n*=n)<=i},t.prototype.getBounds=function(){return new o.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},t}();i.default=l},{"../../const":46,"./Rectangle":74}],72:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("./Rectangle"),o=(r=n)&&r.__esModule?r:{default:r},s=t("../../const");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;a(this,t),this.x=e,this.y=i,this.width=r,this.height=n,this.type=s.SHAPES.ELIP}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;var i=(t-this.x)/this.width,r=(e-this.y)/this.height;return(i*=i)+(r*=r)<=1},t.prototype.getBounds=function(){return new o.default(this.x-this.width,this.y-this.height,this.width,this.height)},t}();i.default=l},{"../../const":46,"./Rectangle":74}],73:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../Point"),o=(r=n)&&r.__esModule?r:{default:r},s=t("../../const");function a(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var l=function(){function t(){for(var e=arguments.length,i=Array(e),r=0;r<e;r++)i[r]=arguments[r];if(a(this,t),Array.isArray(i[0])&&(i=i[0]),i[0]instanceof o.default){for(var n=[],l=0,h=i.length;l<h;l++)n.push(i[l].x,i[l].y);i=n}this.closed=!0,this.points=i,this.type=s.SHAPES.POLY}return t.prototype.clone=function(){return new t(this.points.slice())},t.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},t.prototype.contains=function(t,e){for(var i=!1,r=this.points.length/2,n=0,o=r-1;n<r;o=n++){var s=this.points[2*n],a=this.points[2*n+1],l=this.points[2*o],h=this.points[2*o+1];a>e!=h>e&&t<(e-a)/(h-a)*(l-s)+s&&(i=!i)}return i},t}();i.default=l},{"../../const":46,"../Point":69}],74:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=t("../../const");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var s=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;o(this,t),this.x=Number(e),this.y=Number(i),this.width=Number(r),this.height=Number(s),this.type=n.SHAPES.RECT}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},t.prototype.contains=function(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height},t.prototype.pad=function(t,e){t=t||0,e=e||(0!==e?t:0),this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e},t.prototype.fit=function(t){var e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0)},t.prototype.enlarge=function(t){var e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);this.x=e,this.width=i-e,this.y=r,this.height=n-r},t.prototype.ceil=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.001,i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y},r(t,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new t(0,0,0,0)}}]),t}();i.default=s},{"../../const":46}],75:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("../../const");function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var o=function(){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:20;n(this,t),this.x=e,this.y=i,this.width=o,this.height=s,this.radius=a,this.type=r.SHAPES.RREC}return t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height,this.radius)},t.prototype.contains=function(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||t>=this.x+this.radius&&t<=this.x+this.width-this.radius)return!0;var i=t-(this.x+this.radius),r=e-(this.y+this.radius),n=this.radius*this.radius;if(i*i+r*r<=n)return!0;if((i=t-(this.x+this.width-this.radius))*i+r*r<=n)return!0;if(i*i+(r=e-(this.y+this.height-this.radius))*r<=n)return!0;if((i=t-(this.x+this.radius))*i+r*r<=n)return!0}return!1},t}();i.default=o},{"../../const":46}],76:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=t("../utils"),o=t("../math"),s=t("../const"),a=c(t("../settings")),l=c(t("../display/Container")),h=c(t("../textures/RenderTexture")),u=c(t("eventemitter3"));function c(t){return t&&t.__esModule?t:{default:t}}var p=new o.Matrix,f=function(t){function e(i,r,h,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return(0,n.sayHello)(i),"number"==typeof r&&(r=Object.assign({width:r,height:h||a.default.RENDER_OPTIONS.height},u)),r=Object.assign({},a.default.RENDER_OPTIONS,r),c.options=r,c.type=s.RENDERER_TYPE.UNKNOWN,c.screen=new o.Rectangle(0,0,r.width,r.height),c.view=r.view||document.createElement("canvas"),c.resolution=r.resolution||a.default.RESOLUTION,c.transparent=r.transparent,c.autoResize=r.autoResize||!1,c.blendModes=null,c.preserveDrawingBuffer=r.preserveDrawingBuffer,c.clearBeforeRender=r.clearBeforeRender,c.roundPixels=r.roundPixels,c._backgroundColor=0,c._backgroundColorRgba=[0,0,0,0],c._backgroundColorString="#000000",c.backgroundColor=r.backgroundColor||c._backgroundColor,c._tempDisplayObjectParent=new l.default,c._lastObjectRendered=c._tempDisplayObjectParent,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){this.screen.width=t,this.screen.height=e,this.view.width=t*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=t+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(t,e,i,r){r=r||t.getLocalBounds();var n=h.default.create(0|r.width,0|r.height,e,i);return p.tx=-r.x,p.ty=-r.y,this.render(t,n,!1,p,!!t.parent),n},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,n.hex2string)(t),(0,n.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(u.default);i.default=f},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":125,eventemitter3:3}],77:[function(t,e,i){"use strict";i.__esModule=!0;var r=u(t("../SystemRenderer")),n=u(t("./utils/CanvasMaskManager")),o=u(t("./utils/CanvasRenderTarget")),s=u(t("./utils/mapCanvasBlendModesToPixi")),a=t("../../utils"),l=t("../../const"),h=u(t("../../settings"));function u(t){return t&&t.__esModule?t:{default:t}}var c=function(t){function e(i,r,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"Canvas",i,r,o));return a.type=l.RENDERER_TYPE.CANVAS,a.rootContext=a.view.getContext("2d",{alpha:a.transparent}),a.context=a.rootContext,a.refresh=!0,a.maskManager=new n.default(a),a.smoothProperty="imageSmoothingEnabled",a.rootContext.imageSmoothingEnabled||(a.rootContext.webkitImageSmoothingEnabled?a.smoothProperty="webkitImageSmoothingEnabled":a.rootContext.mozImageSmoothingEnabled?a.smoothProperty="mozImageSmoothingEnabled":a.rootContext.oImageSmoothingEnabled?a.smoothProperty="oImageSmoothingEnabled":a.rootContext.msImageSmoothingEnabled&&(a.smoothProperty="msImageSmoothingEnabled")),a.initPlugins(),a.blendModes=(0,s.default)(),a._activeBlendMode=null,a.renderingToScreen=!1,a.resize(a.options.width,a.options.height),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.render=function(t,e,i,r,n){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var s=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new o.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var a=this.context;if(e||(this._lastObjectRendered=t),!n){var h=t.parent,u=this._tempDisplayObjectParent.transform.worldTransform;r?(r.copy(u),this._tempDisplayObjectParent.transform._worldID=-1):u.identity(),t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=h}a.save(),a.setTransform(1,0,0,1,0,0),a.globalAlpha=1,this._activeBlendMode=l.BLEND_MODES.NORMAL,a.globalCompositeOperation=this.blendModes[l.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(a.fillStyle="black",a.clear()),(void 0!==i?i:this.clearBeforeRender)&&this.renderingToScreen&&(this.transparent?a.clearRect(0,0,this.width,this.height):(a.fillStyle=this._backgroundColorString,a.fillRect(0,0,this.width,this.height)));var c=this.context;this.context=a,t.renderCanvas(this),this.context=c,a.restore(),this.resolution=s,this.emit("postrender")}},e.prototype.clear=function(t){var e=this.context;t=t||this._backgroundColorString,!this.transparent&&t?(e.fillStyle=t,e.fillRect(0,0,this.width,this.height)):e.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),t.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,i){t.prototype.resize.call(this,e,i),this.smoothProperty&&(this.rootContext[this.smoothProperty]=h.default.SCALE_MODE===l.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(r.default);i.default=c,a.pluginTarget.mixin(c)},{"../../const":46,"../../settings":101,"../../utils":125,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("../../../const"),n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.pushMask=function(t){var e=this.renderer;e.context.save();var i=t.alpha,r=t.transform.worldTransform,n=e.resolution;e.context.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t._texture||(this.renderGraphicsShape(t),e.context.clip()),t.worldAlpha=i},t.prototype.renderGraphicsShape=function(t){var e=this.renderer.context,i=t.graphicsData.length;if(0!==i){e.beginPath();for(var n=0;n<i;n++){var o=t.graphicsData[n],s=o.shape;if(o.type===r.SHAPES.POLY){var a=s.points,l=o.holes,h=void 0,u=void 0;e.moveTo(a[0],a[1]);for(var c=2;c<a.length;c+=2)e.lineTo(a[c],a[c+1]);if(a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&e.closePath(),l.length>0){h=0;for(var p=0;p<a.length;p+=2)h+=a[p]*a[p+3]-a[p+1]*a[p+2];for(var f=0;f<l.length;f++){a=l[f].points,u=0;for(var d=0;d<a.length;d+=2)u+=a[d]*a[d+3]-a[d+1]*a[d+2];if(e.moveTo(a[0],a[1]),u*h<0)for(var g=2;g<a.length;g+=2)e.lineTo(a[g],a[g+1]);else for(var m=a.length-2;m>=2;m-=2)e.lineTo(a[m],a[m+1])}}}else if(o.type===r.SHAPES.RECT)e.rect(s.x,s.y,s.width,s.height),e.closePath();else if(o.type===r.SHAPES.CIRC)e.arc(s.x,s.y,s.radius,0,2*Math.PI),e.closePath();else if(o.type===r.SHAPES.ELIP){var v=2*s.width,y=2*s.height,_=s.x-v/2,x=s.y-y/2,b=v/2*.5522848,T=y/2*.5522848,w=_+v,S=x+y,A=_+v/2,P=x+y/2;e.moveTo(_,P),e.bezierCurveTo(_,P-T,A-b,x,A,x),e.bezierCurveTo(A+b,x,w,P-T,w,P),e.bezierCurveTo(w,P+T,A+b,S,A,S),e.bezierCurveTo(A-b,S,_,P+T,_,P),e.closePath()}else if(o.type===r.SHAPES.RREC){var E=s.x,C=s.y,O=s.width,I=s.height,M=s.radius,R=Math.min(O,I)/2|0;M=M>R?R:M,e.moveTo(E,C+M),e.lineTo(E,C+I-M),e.quadraticCurveTo(E,C+I,E+M,C+I),e.lineTo(E+O-M,C+I),e.quadraticCurveTo(E+O,C+I,E+O,C+I-M),e.lineTo(E+O,C+M),e.quadraticCurveTo(E+O,C,E+O-M,C),e.lineTo(E+M,C),e.quadraticCurveTo(E,C,E,C+M),e.closePath()}}}},t.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},t.prototype.destroy=function(){},t}();i.default=n},{"../../../const":46}],79:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("../../../settings"),s=(r=o)&&r.__esModule?r:{default:r},a=function(){function t(e,i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=r||s.default.RESOLUTION,this.resize(e,i)}return t.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},t.prototype.resize=function(t,e){this.canvas.width=t*this.resolution,this.canvas.height=e*this.resolution},t.prototype.destroy=function(){this.context=null,this.canvas=null},n(t,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),t}();i.default=a},{"../../../settings":101}],80:[function(t,e,i){"use strict";function r(t){var e=document.createElement("canvas");e.width=6,e.height=1;var i=e.getContext("2d");return i.fillStyle=t,i.fillRect(0,0,6,1),e}i.__esModule=!0,i.default=function(){if("undefined"==typeof document)return!1;var t=r("#ff00ff"),e=r("#ffff00"),i=document.createElement("canvas");i.width=6,i.height=1;var n=i.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(t,0,0),n.drawImage(e,2,0);var o=n.getImageData(2,0,1,1);if(!o)return!1;var s=o.data;return 255===s[0]&&0===s[1]&&0===s[2]}},{}],81:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return(0,s.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over"),t[n.BLEND_MODES.NORMAL_NPM]=t[n.BLEND_MODES.NORMAL],t[n.BLEND_MODES.ADD_NPM]=t[n.BLEND_MODES.ADD],t[n.BLEND_MODES.SCREEN_NPM]=t[n.BLEND_MODES.SCREEN],t};var r,n=t("../../../const"),o=t("./canUseNewCanvasBlendModes"),s=(r=o)&&r.__esModule?r:{default:r}},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../../const"),o=t("../../settings"),s=(r=o)&&r.__esModule?r:{default:r},a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=s.default.GC_MAX_IDLE,this.checkCountMax=s.default.GC_MAX_CHECK_COUNT,this.mode=s.default.GC_MODE}return t.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},t.prototype.run=function(){for(var t=this.renderer.textureManager,e=t._managedTextures,i=!1,r=0;r<e.length;r++){var n=e[r];!n._glRenderTargets&&this.count-n.touched>this.maxIdle&&(t.destroyTexture(n,!0),e[r]=null,i=!0)}if(i){for(var o=0,s=0;s<e.length;s++)null!==e[s]&&(e[o++]=e[s]);e.length=o}},t.prototype.unload=function(t){var e=this.renderer.textureManager;t._texture&&t._texture._glRenderTargets&&e.destroyTexture(t._texture,!0);for(var i=t.children.length-1;i>=0;i--)this.unload(t.children[i])},t}();i.default=a},{"../../const":46,"../../settings":101}],83:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("pixi-gl-core"),o=t("../../const"),s=t("./utils/RenderTarget"),a=(r=s)&&r.__esModule?r:{default:r},l=t("../../utils"),h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return t.prototype.bindTexture=function(){},t.prototype.getTexture=function(){},t.prototype.updateTexture=function(t,e){var i=this.gl,r=!!t._glRenderTargets;if(!t.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===e){e=0;for(var l=0;l<s.length;++l)if(s[l]===t){e=l;break}}s[e]=t,i.activeTexture(i.TEXTURE0+e);var h=t._glTextures[this.renderer.CONTEXT_UID];if(h)r?t._glRenderTargets[this.renderer.CONTEXT_UID].resize(t.width,t.height):h.upload(t.source);else{if(r){var u=new a.default(this.gl,t.width,t.height,t.scaleMode,t.resolution);u.resize(t.width,t.height),t._glRenderTargets[this.renderer.CONTEXT_UID]=u,h=u.texture,this.renderer._activeRenderTarget.root||this.renderer._activeRenderTarget.frameBuffer.bind()}else(h=new n.GLTexture(this.gl,null,null,null,null)).bind(e),h.premultiplyAlpha=!0,h.upload(t.source);t._glTextures[this.renderer.CONTEXT_UID]=h,t.on("update",this.updateTexture,this),t.on("dispose",this.destroyTexture,this),this._managedTextures.push(t),t.isPowerOfTwo?(t.mipmap&&h.enableMipmap(),t.wrapMode===o.WRAP_MODES.CLAMP?h.enableWrapClamp():t.wrapMode===o.WRAP_MODES.REPEAT?h.enableWrapRepeat():h.enableWrapMirrorRepeat()):h.enableWrapClamp(),t.scaleMode===o.SCALE_MODES.NEAREST?h.enableNearestScaling():h.enableLinearScaling()}return h},t.prototype.destroyTexture=function(t,e){if((t=t.baseTexture||t).hasLoaded){var i=this.renderer,r=i.CONTEXT_UID,n=t._glTextures,o=t._glRenderTargets;if(n[r]&&(i.unbindTexture(t),n[r].destroy(),t.off("update",this.updateTexture,this),t.off("dispose",this.destroyTexture,this),delete n[r],!e)){var s=this._managedTextures.indexOf(t);-1!==s&&(0,l.removeItems)(this._managedTextures,s,1)}o&&o[r]&&(i._activeRenderTarget===o[r]&&i.bindRenderTarget(i.rootRenderTarget),o[r].destroy(),delete o[r])}},t.prototype.removeAll=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];e._glTextures[this.renderer.CONTEXT_UID]&&delete e._glTextures[this.renderer.CONTEXT_UID]}},t.prototype.destroy=function(){for(var t=0;t<this._managedTextures.length;++t){var e=this._managedTextures[t];this.destroyTexture(e,!0),e.off("update",this.updateTexture,this),e.off("dispose",this.destroyTexture,this)}this._managedTextures=null},t}();i.default=h},{"../../const":46,"../../utils":125,"./utils/RenderTarget":96,"pixi-gl-core":15}],84:[function(t,e,i){"use strict";i.__esModule=!0;var r=y(t("../SystemRenderer")),n=y(t("./managers/MaskManager")),o=y(t("./managers/StencilManager")),s=y(t("./managers/FilterManager")),a=y(t("./utils/RenderTarget")),l=y(t("./utils/ObjectRenderer")),h=y(t("./TextureManager")),u=y(t("../../textures/BaseTexture")),c=y(t("./TextureGarbageCollector")),p=y(t("./WebGLState")),f=y(t("./utils/mapWebGLDrawModesToPixi")),d=y(t("./utils/validateContext")),g=t("../../utils"),m=y(t("pixi-gl-core")),v=t("../../const");function y(t){return t&&t.__esModule?t:{default:t}}var _=0,x=function(t){function e(i,r,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"WebGL",i,r,s));return a.legacy=a.options.legacy,a.legacy&&(m.default.VertexArrayObject.FORCE_NATIVE=!0),a.type=v.RENDERER_TYPE.WEBGL,a.handleContextLost=a.handleContextLost.bind(a),a.handleContextRestored=a.handleContextRestored.bind(a),a.view.addEventListener("webglcontextlost",a.handleContextLost,!1),a.view.addEventListener("webglcontextrestored",a.handleContextRestored,!1),a._contextOptions={alpha:a.transparent,antialias:a.options.antialias,premultipliedAlpha:a.transparent&&"notMultiplied"!==a.transparent,stencil:!0,preserveDrawingBuffer:a.options.preserveDrawingBuffer,powerPreference:a.options.powerPreference},a._backgroundColorRgba[3]=a.transparent?0:1,a.maskManager=new n.default(a),a.stencilManager=new o.default(a),a.emptyRenderer=new l.default(a),a.currentRenderer=a.emptyRenderer,a.textureManager=null,a.filterManager=null,a.initPlugins(),a.options.context&&(0,d.default)(a.options.context),a.gl=a.options.context||m.default.createContext(a.view,a._contextOptions),a.CONTEXT_UID=_++,a.state=new p.default(a.gl),a.renderingToScreen=!0,a.boundTextures=null,a._activeShader=null,a._activeVao=null,a._activeRenderTarget=null,a._initContext(),a.drawModes=(0,f.default)(a.gl),a._nextTextureLocation=0,a.setBlendMode(0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._initContext=function(){var t=this.gl;t.isContextLost()&&t.getExtension("WEBGL_lose_context")&&t.getExtension("WEBGL_lose_context").restoreContext();var e=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=new Array(e),this.emptyTextures=new Array(e),this._unknownBoundTextures=!1,this.textureManager=new h.default(this),this.filterManager=new s.default(this),this.textureGC=new c.default(this),this.state.resetToDefault(),this.rootRenderTarget=new a.default(t,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var i=new m.default.GLTexture.fromData(t,null,1,1),r={_glTextures:{}};r._glTextures[this.CONTEXT_UID]={};for(var n=0;n<e;n++){var o=new u.default;o._glTextures[this.CONTEXT_UID]=i,this.boundTextures[n]=r,this.emptyTextures[n]=o,this.bindTexture(null,n)}this.emit("context",t),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(t,e,i,r,n){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=t),!n){var o=t.parent;t.parent=this._tempDisplayObjectParent,t.updateTransform(),t.parent=o}this.bindRenderTexture(e,r),this.currentRenderer.start(),(void 0!==i?i:this.clearBeforeRender)&&this._activeRenderTarget.clear(),t.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(t,e){r.default.prototype.resize.call(this,t,e),this.rootRenderTarget.resize(t,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(t,e){var i=t.baseTexture._glRenderTargets[this.CONTEXT_UID];return i&&i.clear(e),this},e.prototype.bindRenderTexture=function(t,e){var i=void 0;if(t){var r=t.baseTexture;r._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(r,0),this.unbindTexture(r),(i=r._glRenderTargets[this.CONTEXT_UID]).setFrame(t.frame)}else i=this.rootRenderTarget;return i.transform=e,this.bindRenderTarget(i),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(t,e){return this._activeShader!==t&&(this._activeShader=t,t.bind(),!1!==e&&(t.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(t,e,i){if((t=(t=t||this.emptyTextures[e]).baseTexture||t).touched=this.textureGC.count,i)e=e||0;else{for(var r=0;r<this.boundTextures.length;r++)if(this.boundTextures[r]===t)return r;void 0===e&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,e=this.boundTextures.length-this._nextTextureLocation-1)}var n=this.gl,o=t._glTextures[this.CONTEXT_UID];return o?(this.boundTextures[e]=t,n.activeTexture(n.TEXTURE0+e),n.bindTexture(n.TEXTURE_2D,o.texture)):this.textureManager.updateTexture(t,e),e},e.prototype.unbindTexture=function(t){var e=this.gl;if(t=t.baseTexture||t,this._unknownBoundTextures){this._unknownBoundTextures=!1;for(var i=0;i<this.boundTextures.length;i++)this.boundTextures[i]===this.emptyTextures[i]&&(e.activeTexture(e.TEXTURE0+i),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[i]._glTextures[this.CONTEXT_UID].texture))}for(var r=0;r<this.boundTextures.length;r++)this.boundTextures[r]===t&&(this.boundTextures[r]=this.emptyTextures[r],e.activeTexture(e.TEXTURE0+r),e.bindTexture(e.TEXTURE_2D,this.emptyTextures[r]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new m.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t||(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t),this},e.prototype.reset=function(){this.setObjectRenderer(this.emptyRenderer),this.bindVao(null),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this._unknownBoundTextures=!0;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.emptyTextures[t];return this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),t.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(r.default);i.default=x,g.pluginTarget.mixin(x)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":125,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":15}],85:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("./utils/mapWebGLBlendModesToPixi"),o=(r=n)&&r.__esModule?r:{default:r},s=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:new Array(this.maxAttribs),attribState:new Array(this.maxAttribs)},this.blendModes=(0,o.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return t.prototype.push=function(){var t=this.stack[this.stackIndex];t||(t=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var e=0;e<this.activeState.length;e++)t[e]=this.activeState[e]},t.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},t.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},t.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},t.prototype.setBlendMode=function(t){if(t!==this.activeState[4]){this.activeState[4]=t;var e=this.blendModes[t];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},t.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},t.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},t.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},t.prototype.resetAttributes=function(){for(var t=0;t<this.attribState.tempAttribState.length;t++)this.attribState.tempAttribState[t]=0;for(var e=0;e<this.attribState.attribState.length;e++)this.attribState.attribState[e]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},t.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},t}();i.default=s},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=l(t("./extractUniformsFromSrc")),o=t("../../../utils"),s=t("../../../const"),a=l(t("../../../settings"));function l(t){return t&&t.__esModule?t:{default:t}}var h={},u=function(){function t(e,i,r){for(var l in function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertexSrc=e||t.defaultVertexSrc,this.fragmentSrc=i||t.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=r||(0,n.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[l]=this.uniformData[l].value,this.uniformData[l].type&&(this.uniformData[l].type=this.uniformData[l].type.toLowerCase());this.glShaders={},h[this.vertexSrc+this.fragmentSrc]||(h[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=h[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=a.default.FILTER_RESOLUTION,this.enabled=!0,this.autoFit=!0}return t.prototype.apply=function(t,e,i,r,n){t.applyFilter(this,e,i,r)},r(t,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),t}();i.default=u},{"../../../const":46,"../../../settings":101,"../../../utils":125,"./extractUniformsFromSrc":87}],87:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e,i){var r=s(t),n=s(e);return Object.assign(r,n)};var r,n=t("pixi-gl-core"),o=((r=n)&&r.__esModule?r:{default:r}).default.shader.defaultValue;function s(t){for(var e=new RegExp("^(projectionMatrix|uSampler|filterArea|filterClamp)$"),i={},r=void 0,n=t.replace(/\s+/g," ").split(/\s*;\s*/),s=0;s<n.length;s++){var a=n[s].trim();if(a.indexOf("uniform")>-1){var l=a.split(" "),h=l[1],u=l[2],c=1;u.indexOf("[")>-1&&(r=u.split(/\[|]/),u=r[0],c*=Number(r[1])),u.match(e)||(i[u]={value:o(h,c),name:u,type:h})}}return i}},{"pixi-gl-core":15}],88:[function(t,e,i){"use strict";i.__esModule=!0,i.calculateScreenSpaceMatrix=function(t,e,i){var r=t.identity();return r.translate(e.x/i.width,e.y/i.height),r.scale(i.width,i.height),r},i.calculateNormalizedScreenSpaceMatrix=function(t,e,i){var r=t.identity();r.translate(e.x/i.width,e.y/i.height);var n=i.width/e.width,o=i.height/e.height;return r.scale(n,o),r},i.calculateSpriteMatrix=function(t,e,i,n){var o=n._texture.orig,s=t.set(i.width,0,0,i.height,e.x,e.y),a=n.worldTransform.copy(r.Matrix.TEMP_MATRIX);return a.invert(),s.prepend(a),s.scale(1/o.width,1/o.height),s.translate(n.anchor.x,n.anchor.y),s};var r=t("../../../math")},{"../../../math":70}],89:[function(t,e,i){"use strict";i.__esModule=!0;var r=s(t("../Filter")),n=t("../../../../math"),o=(t("path"),s(t("../../../../textures/TextureMatrix")));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=new n.Matrix,o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform sampler2D mask;\nuniform float alpha;\nuniform vec4 maskClamp;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(maskClamp.x, vMaskCoord.x) +\n        step(maskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, maskClamp.z) +\n        step(vMaskCoord.y, maskClamp.w));\n\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return i.renderable=!1,o.maskSprite=i,o.maskMatrix=r,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,r){var n=this.maskSprite,s=this.maskSprite.texture;s.valid&&(s.transform||(s.transform=new o.default(s,0)),s.transform.update(),this.uniforms.mask=s,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,n).prepend(s.transform.mapCoord),this.uniforms.alpha=n.worldAlpha,this.uniforms.maskClamp=s.transform.uClampFrame,t.applyFilter(this,e,i,r))},e}(r.default);i.default=a},{"../../../../math":70,"../../../../textures/TextureMatrix":116,"../Filter":86,path:8}],90:[function(t,e,i){"use strict";i.__esModule=!0;var r=u(t("./WebGLManager")),n=u(t("../utils/RenderTarget")),o=u(t("../utils/Quad")),s=t("../../../math"),a=u(t("../../../Shader")),l=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../filters/filterTransforms")),h=u(t("bit-twiddle"));function u(t){return t&&t.__esModule?t:{default:t}}function c(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var p=function(){function t(){c(this,t),this.renderTarget=null,this.target=null,this.resolution=1,this.sourceFrame=new s.Rectangle,this.destinationFrame=new s.Rectangle,this.filters=[]}return t.prototype.clear=function(){this.filters=null,this.target=null,this.renderTarget=null},t}(),f=function(t){function e(i){c(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.gl=r.renderer.gl,r.quad=new o.default(r.gl,i.state.attribState),r.shaderCache={},r.pool={},r.filterData=null,r.managedFilters=[],r.renderer.on("prerender",r.onPrerender,r),r._screenWidth=i.view.width,r._screenHeight=i.view.height,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushFilter=function(t,e){var i=this.renderer,r=this.filterData;if(!r){r=this.renderer._activeRenderTarget.filterStack;var n=new p;n.sourceFrame=n.destinationFrame=this.renderer._activeRenderTarget.size,n.renderTarget=i._activeRenderTarget,this.renderer._activeRenderTarget.filterData=r={index:0,stack:[n]},this.filterData=r}var o=r.stack[++r.index],s=r.stack[0].destinationFrame;o||(o=r.stack[r.index]=new p);var a=t.filterArea&&0===t.filterArea.x&&0===t.filterArea.y&&t.filterArea.width===i.screen.width&&t.filterArea.height===i.screen.height,l=e[0].resolution,h=0|e[0].padding,u=a?i.screen:t.filterArea||t.getBounds(!0),c=o.sourceFrame,f=o.destinationFrame;c.x=(u.x*l|0)/l,c.y=(u.y*l|0)/l,c.width=(u.width*l|0)/l,c.height=(u.height*l|0)/l,a||(r.stack[0].renderTarget.transform||e[0].autoFit&&c.fit(s),c.pad(h)),f.width=c.width,f.height=c.height;var d=this.getPotRenderTarget(i.gl,c.width,c.height,l);o.target=t,o.filters=e,o.resolution=l,o.renderTarget=d,d.setFrame(f,c),i.bindRenderTarget(d),d.clear()},e.prototype.popFilter=function(){var t=this.filterData,e=t.stack[t.index-1],i=t.stack[t.index];this.quad.map(i.renderTarget.size,i.sourceFrame).upload();var r=i.filters;if(1===r.length)r[0].apply(this,i.renderTarget,e.renderTarget,!1,i),this.freePotRenderTarget(i.renderTarget);else{var n=i.renderTarget,o=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,i.resolution);o.setFrame(i.destinationFrame,i.sourceFrame),o.clear();var s=0;for(s=0;s<r.length-1;++s){r[s].apply(this,n,o,!0,i);var a=n;n=o,o=a}r[s].apply(this,n,e.renderTarget,!1,i),this.freePotRenderTarget(n),this.freePotRenderTarget(o)}i.clear(),t.index--,0===t.index&&(this.filterData=null)},e.prototype.applyFilter=function(t,e,i,r){var n=this.renderer,o=n.gl,s=t.glShaders[n.CONTEXT_UID];s||(t.glShaderKey?(s=this.shaderCache[t.glShaderKey])||(s=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),t.glShaders[n.CONTEXT_UID]=this.shaderCache[t.glShaderKey]=s,this.managedFilters.push(t)):(s=t.glShaders[n.CONTEXT_UID]=new a.default(this.gl,t.vertexSrc,t.fragmentSrc),this.managedFilters.push(t)),n.bindVao(null),this.quad.initVao(s)),n.bindVao(this.quad.vao),n.bindRenderTarget(i),r&&(o.disable(o.SCISSOR_TEST),n.clear(),o.enable(o.SCISSOR_TEST)),i===n.maskManager.scissorRenderTarget&&n.maskManager.pushScissorMask(null,n.maskManager.scissorData),n.bindShader(s);var l=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=l,this.syncUniforms(s,t),n.state.setBlendMode(t.blendMode),o.activeTexture(o.TEXTURE0),o.bindTexture(o.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),o.bindTexture(o.TEXTURE_2D,l._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(t,e){var i=e.uniformData,r=e.uniforms,n=1,o=void 0;if(t.uniforms.filterArea){o=this.filterData.stack[this.filterData.index];var s=t.uniforms.filterArea;s[0]=o.renderTarget.size.width,s[1]=o.renderTarget.size.height,s[2]=o.sourceFrame.x,s[3]=o.sourceFrame.y,t.uniforms.filterArea=s}if(t.uniforms.filterClamp){o=o||this.filterData.stack[this.filterData.index];var a=t.uniforms.filterClamp;a[0]=0,a[1]=0,a[2]=(o.sourceFrame.width-1)/o.renderTarget.size.width,a[3]=(o.sourceFrame.height-1)/o.renderTarget.size.height,t.uniforms.filterClamp=a}for(var l in i)if(t.uniforms.data[l]){var h=i[l].type;if("sampler2d"===h&&0!==r[l]){if(r[l].baseTexture)t.uniforms[l]=this.renderer.bindTexture(r[l].baseTexture,n);else{t.uniforms[l]=n;var u=this.renderer.gl;this.renderer.boundTextures[n]=this.renderer.emptyTextures[n],u.activeTexture(u.TEXTURE0+n),r[l].texture.bind()}n++}else if("mat3"===h)void 0!==r[l].a?t.uniforms[l]=r[l].toArray(!0):t.uniforms[l]=r[l];else if("vec2"===h)if(void 0!==r[l].x){var c=t.uniforms[l]||new Float32Array(2);c[0]=r[l].x,c[1]=r[l].y,t.uniforms[l]=c}else t.uniforms[l]=r[l];else"float"===h?t.uniforms.data[l].value!==i[l]&&(t.uniforms[l]=r[l]):t.uniforms[l]=r[l]}},e.prototype.getRenderTarget=function(t,e){var i=this.filterData.stack[this.filterData.index],r=this.getPotRenderTarget(this.renderer.gl,i.sourceFrame.width,i.sourceFrame.height,e||i.resolution);return r.setFrame(i.destinationFrame,i.sourceFrame),r},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(t){var e=this.filterData.stack[this.filterData.index];return l.calculateNormalizedScreenSpaceMatrix(t,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(t,e){var i=this.filterData.stack[this.filterData.index];return l.calculateSpriteMatrix(t,i.sourceFrame,i.renderTarget.size,e)},e.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],e=this.renderer,i=this.managedFilters;e.off("prerender",this.onPrerender,this);for(var r=0;r<i.length;r++)t||i[r].glShaders[e.CONTEXT_UID].destroy(),delete i[r].glShaders[e.CONTEXT_UID];this.shaderCache={},t?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(t,e,i,r){var o="screen";i*=r,(e*=r)===this._screenWidth&&i===this._screenHeight||(o=(65535&(e=h.default.nextPow2(e)))<<16|65535&(i=h.default.nextPow2(i))),this.pool[o]||(this.pool[o]=[]);var s=this.pool[o].pop();if(!s){var a=this.renderer.boundTextures[0];t.activeTexture(t.TEXTURE0),s=new n.default(t,e,i,null,1),t.bindTexture(t.TEXTURE_2D,a._glTextures[this.renderer.CONTEXT_UID].texture)}return s.resolution=r,s.defaultFrame.width=s.size.width=e/r,s.defaultFrame.height=s.size.height=i/r,s.filterPoolKey=o,s},e.prototype.emptyPool=function(){for(var t in this.pool){var e=this.pool[t];if(e)for(var i=0;i<e.length;i++)e[i].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(t){this.pool[t.filterPoolKey].push(t)},e.prototype.onPrerender=function(){if(this._screenWidth!==this.renderer.view.width||this._screenHeight!==this.renderer.view.height){this._screenWidth=this.renderer.view.width,this._screenHeight=this.renderer.view.height;var t=this.pool.screen;if(t)for(var e=0;e<t.length;e++)t[e].destroy(!0);this.pool.screen=[]}},e}(r.default);i.default=f},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(t,e,i){"use strict";i.__esModule=!0;var r=o(t("./WebGLManager")),n=o(t("../filters/spriteMask/SpriteMaskFilter"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.scissor=!1,r.scissorData=null,r.scissorRenderTarget=null,r.enableScissor=!0,r.alphaMaskPool=[],r.alphaMaskIndex=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.pushMask=function(t,e){if(e.texture)this.pushSpriteMask(t,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var i=e.worldTransform,r=Math.atan2(i.b,i.a);(r=Math.round(r*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(t,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(t,e){e.texture?this.popSpriteMask(t,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(t,e):this.popStencilMask(t,e)},e.prototype.pushSpriteMask=function(t,e){var i=this.alphaMaskPool[this.alphaMaskIndex];i||(i=this.alphaMaskPool[this.alphaMaskIndex]=[new n.default(e)]),i[0].resolution=this.renderer.resolution,i[0].maskSprite=e;var r=t.filterArea;t.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(t,i),t.filterArea=r,this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(t,e){e.renderable=!0;var i=this.renderer._activeRenderTarget,r=e.getBounds();r.fit(i.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var n=this.renderer.resolution;this.renderer.gl.scissor(r.x*n,(i.root?i.size.height-r.y-r.height:r.y)*n,r.width*n,r.height*n),this.scissorRenderTarget=i,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(r.default);i.default=s},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("./WebGLManager"),o=(r=n)&&r.__esModule?r:{default:r},s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.stencilMaskStack=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setMaskStack=function(t){this.stencilMaskStack=t;var e=this.renderer.gl;0===t.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(t){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,i=this.stencilMaskStack.length;0===i&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(t),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,i,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(t),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var t=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(t.disable(t.STENCIL_TEST),t.clear(t.STENCIL_BUFFER_BIT),t.clearStencil(0)):(t.colorMask(!1,!1,!1,!1),t.stencilOp(t.KEEP,t.KEEP,t.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){o.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(o.default);i.default=s},{"./WebGLManager":93}],93:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return t.prototype.onContextChange=function(){},t.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},t}();i.default=r},{}],94:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../managers/WebGLManager");function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(){return o(this,e),s(this,t.apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(t){},e}(((r=n)&&r.__esModule?r:{default:r}).default);i.default=a},{"../managers/WebGLManager":93}],95:[function(t,e,i){"use strict";i.__esModule=!0;var r=o(t("pixi-gl-core")),n=o(t("../../../utils/createIndicesForQuads"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var o=0;o<4;o++)this.interleaved[4*o]=this.vertices[2*o],this.interleaved[4*o+1]=this.vertices[2*o+1],this.interleaved[4*o+2]=this.uvs[2*o],this.interleaved[4*o+3]=this.uvs[2*o+1];this.indices=(0,n.default)(1),this.vertexBuffer=r.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(e,i)}return t.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},t.prototype.map=function(t,e){var i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+e.width/t.width,this.uvs[3]=r,this.uvs[4]=i+e.width/t.width,this.uvs[5]=r+e.height/t.height,this.uvs[6]=i,this.uvs[7]=r+e.height/t.height,i=e.x,r=e.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+e.width,this.vertices[3]=r,this.vertices[4]=i+e.width,this.vertices[5]=r+e.height,this.vertices[6]=i,this.vertices[7]=r+e.height,this},t.prototype.upload=function(){for(var t=0;t<4;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},t.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},t}();i.default=s},{"../../../utils/createIndicesForQuads":123,"pixi-gl-core":15}],96:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../../../math"),o=t("../../../const"),s=t("../../../settings"),a=(r=s)&&r.__esModule?r:{default:r},l=t("pixi-gl-core"),h=function(){function t(e,i,r,s,h,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new n.Rectangle(0,0,1,1),this.resolution=h||a.default.RESOLUTION,this.projectionMatrix=new n.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new n.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.filterPoolKey="",this.scaleMode=void 0!==s?s:a.default.SCALE_MODE,this.root=u||!1,this.root?(this.frameBuffer=new l.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=l.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===o.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(i,r)}return t.prototype.clear=function(t){var e=t||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},t.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},t.prototype.setFrame=function(t,e){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},t.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame!==this.sourceFrame?(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)):t.disable(t.SCISSOR_TEST),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,this.destinationFrame.width*this.resolution|0,this.destinationFrame.height*this.resolution|0)},t.prototype.calculateProjection=function(t,e){var i=this.projectionMatrix;e=e||t,i.identity(),this.root?(i.a=1/t.width*2,i.d=-1/t.height*2,i.tx=-1-e.x*i.a,i.ty=1-e.y*i.d):(i.a=1/t.width*2,i.d=1/t.height*2,i.tx=-1-e.x*i.a,i.ty=-1-e.y*i.d)},t.prototype.resize=function(t,e){if(t|=0,e|=0,this.size.width!==t||this.size.height!==e){this.size.width=t,this.size.height=e,this.defaultFrame.width=t,this.defaultFrame.height=e,this.frameBuffer.resize(t*this.resolution,e*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},t.prototype.destroy=function(){this.frameBuffer.stencil&&this.gl.deleteRenderbuffer(this.frameBuffer.stencil),this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},t}();i.default=h},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":15}],97:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=!e;if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(i){var r=document.createElement("canvas");r.width=1,r.height=1,e=o.default.createContext(r)}for(var n=e.createShader(e.FRAGMENT_SHADER);;){var l=s.replace(/%forloop%/gi,a(t));if(e.shaderSource(n,l),e.compileShader(n),e.getShaderParameter(n,e.COMPILE_STATUS))break;t=t/2|0}return i&&e.getExtension("WEBGL_lose_context")&&e.getExtension("WEBGL_lose_context").loseContext(),t};var r,n=t("pixi-gl-core"),o=(r=n)&&r.__esModule?r:{default:r},s=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function a(t){for(var e="",i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+="if(test == "+i+".0){}");return e}},{"pixi-gl-core":15}],98:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return e[r.BLEND_MODES.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD]=[t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR],e[r.BLEND_MODES.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[r.BLEND_MODES.ADD_NPM]=[t.SRC_ALPHA,t.DST_ALPHA,t.ONE,t.DST_ALPHA],e[r.BLEND_MODES.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_COLOR],e};var r=t("../../../const")},{"../../../const":46}],99:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return e[r.DRAW_MODES.POINTS]=t.POINTS,e[r.DRAW_MODES.LINES]=t.LINES,e[r.DRAW_MODES.LINE_LOOP]=t.LINE_LOOP,e[r.DRAW_MODES.LINE_STRIP]=t.LINE_STRIP,e[r.DRAW_MODES.TRIANGLES]=t.TRIANGLES,e[r.DRAW_MODES.TRIANGLE_STRIP]=t.TRIANGLE_STRIP,e[r.DRAW_MODES.TRIANGLE_FAN]=t.TRIANGLE_FAN,e};var r=t("../../../const")},{"../../../const":46}],100:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){t.getContextAttributes().stencil}},{}],101:[function(t,e,i){"use strict";i.__esModule=!0;var r=o(t("./utils/maxRecommendedTextures")),n=o(t("./utils/canUploadSameBuffer"));function o(t){return t&&t.__esModule?t:{default:t}}i.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,n.default)(),MESH_CANVAS_PADDING:0}},{"./utils/canUploadSameBuffer":122,"./utils/maxRecommendedTextures":127}],102:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=t("../math"),o=t("../utils"),s=t("../const"),a=h(t("../textures/Texture")),l=h(t("../display/Container"));function h(t){return t&&t.__esModule?t:{default:t}}var u=new n.Point,c=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r._anchor=new n.ObservablePoint(r._onAnchorUpdate,r,i?i.defaultAnchor.x:0,i?i.defaultAnchor.y:0),r._texture=null,r._width=0,r._height=0,r._tint=null,r._tintRGB=null,r.tint=16777215,r.blendMode=s.BLEND_MODES.NORMAL,r.shader=null,r.cachedTint=16777215,r.texture=i||a.default.EMPTY,r.vertexData=new Float32Array(8),r.vertexTrimmedData=null,r._transformID=-1,r._textureID=-1,r._transformTrimmedID=-1,r._textureTrimmedID=-1,r.pluginName="sprite",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},e.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},e.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var t=this._texture,e=this.transform.worldTransform,i=e.a,r=e.b,n=e.c,o=e.d,s=e.tx,a=e.ty,l=this.vertexData,h=t.trim,u=t.orig,c=this._anchor,p=0,f=0,d=0,g=0;h?(p=(f=h.x-c._x*u.width)+h.width,d=(g=h.y-c._y*u.height)+h.height):(p=(f=-c._x*u.width)+u.width,d=(g=-c._y*u.height)+u.height),l[0]=i*f+n*g+s,l[1]=o*g+r*f+a,l[2]=i*p+n*g+s,l[3]=o*g+r*p+a,l[4]=i*p+n*d+s,l[5]=o*d+r*p+a,l[6]=i*f+n*d+s,l[7]=o*d+r*f+a}},e.prototype.calculateTrimmedVertices=function(){if(this.vertexTrimmedData){if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return}else this.vertexTrimmedData=new Float32Array(8);this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var t=this._texture,e=this.vertexTrimmedData,i=t.orig,r=this._anchor,n=this.transform.worldTransform,o=n.a,s=n.b,a=n.c,l=n.d,h=n.tx,u=n.ty,c=-r._x*i.width,p=c+i.width,f=-r._y*i.height,d=f+i.height;e[0]=o*c+a*f+h,e[1]=l*f+s*c+u,e[2]=o*p+a*f+h,e[3]=l*f+s*p+u,e[4]=o*p+a*d+h,e[5]=l*d+s*p+u,e[6]=o*c+a*d+h,e[7]=l*d+s*c+u},e.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},e.prototype._calculateBounds=function(){var t=this._texture.trim,e=this._texture.orig;!t||t.width===e.width&&t.height===e.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new n.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e=this._texture.orig.width,i=this._texture.orig.height,r=-e*this.anchor.x,n=0;return u.x>=r&&u.x<r+e&&(n=-i*this.anchor.y,u.y>=n&&u.y<n+i)},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var i="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!i)}this._texture=null,this.shader=null},e.from=function(t){return new e(a.default.from(t))},e.fromFrame=function(t){var i=o.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new e(i)},e.fromImage=function(t,i,r){return new e(a.default.fromImage(t,i,r))},r(e,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t||a.default.EMPTY,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),e}(l.default);i.default=c},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":125}],103:[function(t,e,i){"use strict";i.__esModule=!0;var r=a(t("../../renderers/canvas/CanvasRenderer")),n=t("../../const"),o=t("../../math"),s=a(t("./CanvasTinter"));function a(t){return t&&t.__esModule?t:{default:t}}var l=new o.Matrix,h=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=t._texture,i=this.renderer,r=e._frame.width,a=e._frame.height,h=t.transform.worldTransform,u=0,c=0;if(!(e.orig.width<=0||e.orig.height<=0)&&e.baseTexture.source&&(i.setBlendMode(t.blendMode),e.valid)){i.context.globalAlpha=t.worldAlpha;var p=e.baseTexture.scaleMode===n.SCALE_MODES.LINEAR;i.smoothProperty&&i.context[i.smoothProperty]!==p&&(i.context[i.smoothProperty]=p),e.trim?(u=e.trim.width/2+e.trim.x-t.anchor.x*e.orig.width,c=e.trim.height/2+e.trim.y-t.anchor.y*e.orig.height):(u=(.5-t.anchor.x)*e.orig.width,c=(.5-t.anchor.y)*e.orig.height),e.rotate&&(h.copy(l),h=l,o.GroupD8.matrixAppendRotationInv(h,e.rotate,u,c),u=0,c=0),u-=r/2,c-=a/2,i.roundPixels?(i.context.setTransform(h.a,h.b,h.c,h.d,h.tx*i.resolution|0,h.ty*i.resolution|0),u|=0,c|=0):i.context.setTransform(h.a,h.b,h.c,h.d,h.tx*i.resolution,h.ty*i.resolution);var f=e.baseTexture.resolution;16777215!==t.tint?(t.cachedTint===t.tint&&t.tintedTexture.tintId===t._texture._updateID||(t.cachedTint=t.tint,t.tintedTexture=s.default.getTintedTexture(t,t.tint)),i.context.drawImage(t.tintedTexture,0,0,r*f,a*f,u*i.resolution,c*i.resolution,r*i.resolution,a*i.resolution)):i.context.drawImage(e.baseTexture.source,e._frame.x*f,e._frame.y*f,r*f,a*f,u*i.resolution,c*i.resolution,r*i.resolution,a*i.resolution)}},t.prototype.destroy=function(){this.renderer=null},t}();i.default=h,r.default.registerPlugin("sprite",h)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../../utils"),o=t("../../renderers/canvas/utils/canUseNewCanvasBlendModes"),s={getTintedTexture:function(t,e){var i=t._texture,r="#"+("00000"+(0|(e=s.roundColor(e))).toString(16)).substr(-6);i.tintCache=i.tintCache||{};var n=i.tintCache[r],o=void 0;if(n){if(n.tintId===i._updateID)return i.tintCache[r];o=i.tintCache[r]}else o=s.canvas||document.createElement("canvas");if(s.tintMethod(i,e,o),o.tintId=i._updateID,s.convertTintToImage){var a=new Image;a.src=o.toDataURL(),i.tintCache[r]=a}else i.tintCache[r]=o,s.canvas=null;return o},tintWithMultiply:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="multiply",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithOverlay:function(t,e,i){var r=i.getContext("2d"),n=t._frame.clone(),o=t.baseTexture.resolution;n.x*=o,n.y*=o,n.width*=o,n.height*=o,i.width=Math.ceil(n.width),i.height=Math.ceil(n.height),r.save(),r.globalCompositeOperation="copy",r.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),r.fillRect(0,0,n.width,n.height),r.globalCompositeOperation="destination-atop",r.drawImage(t.baseTexture.source,n.x,n.y,n.width,n.height,0,0,n.width,n.height),r.restore()},tintWithPerPixel:function(t,e,i){var r=i.getContext("2d"),o=t._frame.clone(),s=t.baseTexture.resolution;o.x*=s,o.y*=s,o.width*=s,o.height*=s,i.width=Math.ceil(o.width),i.height=Math.ceil(o.height),r.save(),r.globalCompositeOperation="copy",r.drawImage(t.baseTexture.source,o.x,o.y,o.width,o.height,0,0,o.width,o.height),r.restore();for(var a=(0,n.hex2rgb)(e),l=a[0],h=a[1],u=a[2],c=r.getImageData(0,0,o.width,o.height),p=c.data,f=0;f<p.length;f+=4)p[f+0]*=l,p[f+1]*=h,p[f+2]*=u;r.putImageData(c,0,0)},roundColor:function(t){var e=s.cacheStepsPerColorChannel,i=(0,n.hex2rgb)(t);return i[0]=Math.min(255,i[0]/e*e),i[1]=Math.min(255,i[1]/e*e),i[2]=Math.min(255,i[2]/e*e),(0,n.rgb2hex)(i)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,((r=o)&&r.__esModule?r:{default:r}).default)(),tintMethod:0};s.tintMethod=s.canUseMultiply?s.tintWithMultiply:s.tintWithPerPixel,i.default=s},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":125}],105:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return t.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},t}();i.default=r},{}],106:[function(t,e,i){"use strict";i.__esModule=!0;var r=f(t("../../renderers/webgl/utils/ObjectRenderer")),n=f(t("../../renderers/webgl/WebGLRenderer")),o=f(t("../../utils/createIndicesForQuads")),s=f(t("./generateMultiTextureShader")),a=f(t("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),l=f(t("./BatchBuffer")),h=f(t("../../settings")),u=t("../../utils"),c=f(t("pixi-gl-core")),p=f(t("bit-twiddle"));function f(t){return t&&t.__esModule?t:{default:t}}var d=0,g=0,m=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));r.vertSize=5,r.vertByteSize=4*r.vertSize,r.size=h.default.SPRITE_BATCH_SIZE,r.buffers=[];for(var n=1;n<=p.default.nextPow2(r.size);n*=2)r.buffers.push(new l.default(4*n*r.vertByteSize));r.indices=(0,o.default)(r.size),r.shader=null,r.currentIndex=0,r.groups=[];for(var s=0;s<r.size;s++)r.groups[s]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return r.sprites=[],r.vertexBuffers=[],r.vaos=[],r.vaoMax=2,r.vertexCount=0,r.renderer.on("prerender",r.onPrerender,r),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),h.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,a.default)(this.MAX_TEXTURES,t)),this.shader=(0,s.default)(t,this.MAX_TEXTURES),this.indexBuffer=c.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,i=0;i<this.vaoMax;i++){var r=this.vertexBuffers[i]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),n=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(r,e.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(r,e.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(r,e.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&n.addAttribute(r,e.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[i]=n}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=new Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var t=this.renderer.gl,e=this.MAX_TEXTURES,i=p.default.nextPow2(this.currentIndex),r=p.default.log2(i),n=this.buffers[r],o=this.sprites,s=this.groups,a=n.float32View,l=n.uint32View,f=this.boundTextures,m=this.renderer.boundTextures,v=this.renderer.textureGC.count,y=0,_=void 0,x=void 0,b=1,T=0,w=s[0],S=void 0,A=void 0,P=u.premultiplyBlendMode[o[0]._texture.baseTexture.premultipliedAlpha?1:0][o[0].blendMode];w.textureCount=0,w.start=0,w.blend=P,d++;var E=void 0;for(E=0;E<e;++E){var C=m[E];C._enabled!==d?(f[E]=C,C._virtalBoundId=E,C._enabled=d):f[E]=this.renderer.emptyTextures[E]}for(d++,E=0;E<this.currentIndex;++E){var O=o[E];o[E]=null,_=O._texture.baseTexture;var I=u.premultiplyBlendMode[Number(_.premultipliedAlpha)][O.blendMode];if(P!==I&&(P=I,x=null,T=e,d++),x!==_&&(x=_,_._enabled!==d)){if(T===e&&(d++,w.size=E-w.start,T=0,(w=s[b++]).blend=P,w.textureCount=0,w.start=E),_.touched=v,-1===_._virtalBoundId)for(var M=0;M<e;++M){var R=(M+g)%e,D=f[R];if(D._enabled!==d){g++,D._virtalBoundId=-1,_._virtalBoundId=R,f[R]=_;break}}_._enabled=d,w.textureCount++,w.ids[T]=_._virtalBoundId,w.textures[T++]=_}if(S=O.vertexData,A=O._texture._uvs.uvsUint32,this.renderer.roundPixels){var k=this.renderer.resolution;a[y]=(S[0]*k|0)/k,a[y+1]=(S[1]*k|0)/k,a[y+5]=(S[2]*k|0)/k,a[y+6]=(S[3]*k|0)/k,a[y+10]=(S[4]*k|0)/k,a[y+11]=(S[5]*k|0)/k,a[y+15]=(S[6]*k|0)/k,a[y+16]=(S[7]*k|0)/k}else a[y]=S[0],a[y+1]=S[1],a[y+5]=S[2],a[y+6]=S[3],a[y+10]=S[4],a[y+11]=S[5],a[y+15]=S[6],a[y+16]=S[7];l[y+2]=A[0],l[y+7]=A[1],l[y+12]=A[2],l[y+17]=A[3];var L=Math.min(O.worldAlpha,1),N=L<1&&_.premultipliedAlpha?(0,u.premultiplyTint)(O._tintRGB,L):O._tintRGB+(255*L<<24);l[y+3]=l[y+8]=l[y+13]=l[y+18]=N,a[y+4]=a[y+9]=a[y+14]=a[y+19]=_._virtalBoundId,y+=20}if(w.size=E-w.start,h.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var F=this.shader.attributes,B=this.vertexBuffers[this.vertexCount]=c.default.GLBuffer.createVertexBuffer(t,null,t.STREAM_DRAW),j=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(B,F.aVertexPosition,t.FLOAT,!1,this.vertByteSize,0).addAttribute(B,F.aTextureCoord,t.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(B,F.aColor,t.UNSIGNED_BYTE,!0,this.vertByteSize,12);F.aTextureId&&j.addAttribute(B,F.aTextureId,t.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=j}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(n.vertices,0,!1),this.vertexCount++}for(E=0;E<e;++E)m[E]._virtalBoundId=-1;for(E=0;E<b;++E){for(var U=s[E],X=U.textureCount,G=0;G<X;G++)x=U.textures[G],m[U.ids[G]]!==x&&this.renderer.bindTexture(x,U.ids[G],!0),x._virtalBoundId=-1;this.renderer.state.setBlendMode(U.blend),t.drawElements(t.TRIANGLES,6*U.size,t.UNSIGNED_SHORT,6*U.start*2)}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),h.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),t.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var i=0;i<this.buffers.length;++i)this.buffers[i].destroy()},e}(r.default);i.default=m,n.default.registerPlugin("sprite",m)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":125,"../../utils/createIndicesForQuads":123,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":15}],107:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=s;i=(i=i.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(t){var e="";e+="\n",e+="\n";for(var i=0;i<t;i++)i>0&&(e+="\nelse "),i<t-1&&(e+="if(vTextureId < "+i+".5)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+i+"], vTextureCoord);",e+="\n}";return e+="\n",e+="\n"}(e));for(var r=new o.default(t,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",i),n=[],a=0;a<e;a++)n[a]=a;return r.bind(),r.uniforms.uSamplers=n,r};var r,n=t("../../Shader"),o=(r=n)&&r.__esModule?r:{default:r};t("path");var s=["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","%forloop%","gl_FragColor = color * vColor;","}"].join("\n")},{"../../Shader":44,path:8}],108:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=f(t("../sprites/Sprite")),o=f(t("../textures/Texture")),s=t("../math"),a=t("../utils"),l=t("../const"),h=f(t("../settings")),u=f(t("./TextStyle")),c=f(t("./TextMetrics")),p=f(t("../utils/trimCanvas"));function f(t){return t&&t.__esModule?t:{default:t}}var d={texture:!0,children:!1,baseTexture:!0},g=function(t){function e(i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=n||document.createElement("canvas")).width=3,n.height=3;var a=o.default.fromCanvas(n,h.default.SCALE_MODE,"text");a.orig=new s.Rectangle,a.trim=new s.Rectangle;var l=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,a));return o.default.addToCache(l._texture,l._texture.baseTexture.textureCacheIds[0]),l.canvas=n,l.context=l.canvas.getContext("2d"),l.resolution=h.default.RESOLUTION,l._text=null,l._style=null,l._styleListener=null,l._font="",l.text=i,l.style=r,l.localStyleID=-1,l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(t){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!t){this._font=this._style.toFontString();var i=this.context,r=c.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),n=r.width,o=r.height,s=r.lines,a=r.lineHeight,l=r.lineWidths,h=r.maxLineWidth,u=r.fontProperties;this.canvas.width=Math.ceil((Math.max(1,n)+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((Math.max(1,o)+2*e.padding)*this.resolution),i.scale(this.resolution,this.resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.strokeStyle=e.stroke,i.lineWidth=e.strokeThickness,i.textBaseline=e.textBaseline,i.lineJoin=e.lineJoin,i.miterLimit=e.miterLimit;var p=void 0,f=void 0;if(e.dropShadow){i.fillStyle=e.dropShadowColor,i.globalAlpha=e.dropShadowAlpha,i.shadowBlur=e.dropShadowBlur,e.dropShadowBlur>0&&(i.shadowColor=e.dropShadowColor);for(var d=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,g=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,m=0;m<s.length;m++)p=e.strokeThickness/2,f=e.strokeThickness/2+m*a+u.ascent,"right"===e.align?p+=h-l[m]:"center"===e.align&&(p+=(h-l[m])/2),e.fill&&(this.drawLetterSpacing(s[m],p+d+e.padding,f+g+e.padding),e.stroke&&e.strokeThickness&&(i.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(s[m],p+d+e.padding,f+g+e.padding,!0),i.strokeStyle=e.stroke))}i.shadowBlur=0,i.globalAlpha=1,i.fillStyle=this._generateFillStyle(e,s);for(var v=0;v<s.length;v++)p=e.strokeThickness/2,f=e.strokeThickness/2+v*a+u.ascent,"right"===e.align?p+=h-l[v]:"center"===e.align&&(p+=(h-l[v])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(s[v],p+e.padding,f+e.padding,!0),e.fill&&this.drawLetterSpacing(s[v],p+e.padding,f+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(t,e,i){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],n=this._style,o=n.letterSpacing;if(0!==o)for(var s=String.prototype.split.call(t,""),a=e,l=0,h="";l<t.length;)h=s[l++],r?this.context.strokeText(h,a,i):this.context.fillText(h,a,i),a+=this.context.measureText(h).width+o;else r?this.context.strokeText(t,e,i):this.context.fillText(t,e,i)},e.prototype.updateTexture=function(){var t=this.canvas;if(this._style.trim){var e=(0,p.default)(t);e.data&&(t.width=e.width,t.height=e.height,this.context.putImageData(e.data,0,0))}var i=this._texture,r=this._style,n=r.trim?0:r.padding,o=i.baseTexture;o.hasLoaded=!0,o.resolution=this.resolution,o.realWidth=t.width,o.realHeight=t.height,o.width=t.width/this.resolution,o.height=t.height/this.resolution,i.trim.width=i._frame.width=t.width/this.resolution,i.trim.height=i._frame.height=t.height/this.resolution,i.trim.x=-n,i.trim.y=-n,i.orig.width=i._frame.width-2*n,i.orig.height=i._frame.height-2*n,this._onTextureUpdate(),o.emit("update",o),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),t.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),t.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(t,e){if(!Array.isArray(t.fill))return t.fill;if(navigator.isCocoonJS)return t.fill[0];var i=void 0,r=void 0,n=void 0,o=void 0,s=this.canvas.width/this.resolution,a=this.canvas.height/this.resolution,h=t.fill.slice(),u=t.fillGradientStops.slice();if(!u.length)for(var c=h.length+1,p=1;p<c;++p)u.push(p/c);if(h.unshift(t.fill[0]),u.unshift(0),h.push(t.fill[t.fill.length-1]),u.push(1),t.fillGradientType===l.TEXT_GRADIENT.LINEAR_VERTICAL){i=this.context.createLinearGradient(s/2,0,s/2,a),r=(h.length+1)*e.length,n=0;for(var f=0;f<e.length;f++){n+=1;for(var d=0;d<h.length;d++)o="number"==typeof u[d]?u[d]/e.length+f/e.length:n/r,i.addColorStop(o,h[d]),n++}}else{i=this.context.createLinearGradient(0,a/2,s,a/2),r=h.length+1,n=1;for(var g=0;g<h.length;g++)o="number"==typeof u[g]?u[g]:n/r,i.addColorStop(o,h[g]),n++}return i},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},d,e),t.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},r(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(t){this.updateText(!0);var e=(0,a.sign)(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}},{key:"style",get:function(){return this._style},set:function(t){(t=t||{})instanceof u.default?this._style=t:this._style=new u.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=String(""===t||null==t?" ":t),this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(n.default);i.default=g},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":125,"../utils/trimCanvas":130,"./TextMetrics":109,"./TextStyle":110}],109:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(e,i,r,n,o,s,a,l,h){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.text=e,this.style=i,this.width=r,this.height=n,this.lines=o,this.lineWidths=s,this.lineHeight=a,this.maxLineWidth=l,this.fontProperties=h}return t.measureText=function(e,i,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t._canvas;r=null==r?i.wordWrap:r;var o=i.toFontString(),s=t.measureFont(o),a=n.getContext("2d");a.font=o;for(var l=r?t.wordWrap(e,i,n):e,h=l.split(/(?:\r\n|\r|\n)/),u=new Array(h.length),c=0,p=0;p<h.length;p++){var f=a.measureText(h[p]).width+(h[p].length-1)*i.letterSpacing;u[p]=f,c=Math.max(c,f)}var d=c+i.strokeThickness;i.dropShadow&&(d+=i.dropShadowDistance);var g=i.lineHeight||s.fontSize+i.strokeThickness,m=Math.max(g,s.fontSize+i.strokeThickness)+(h.length-1)*(g+i.leading);return i.dropShadow&&(m+=i.dropShadowDistance),new t(e,i,d,m,h,u,g+i.leading,c,s)},t.wordWrap=function(e,i){for(var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t._canvas,n=r.getContext("2d"),o=0,s="",a="",l={},h=i.letterSpacing,u=i.whiteSpace,c=t.collapseSpaces(u),p=t.collapseNewlines(u),f=!c,d=i.wordWrapWidth+h,g=t.tokenize(e),m=0;m<g.length;m++){var v=g[m];if(t.isNewline(v)){if(!p){a+=t.addLine(s),f=!c,s="",o=0;continue}v=" "}if(c){var y=t.isBreakingSpace(v),_=t.isBreakingSpace(s[s.length-1]);if(y&&_)continue}var x=t.getFromCache(v,h,l,n);if(x>d)if(""!==s&&(a+=t.addLine(s),s="",o=0),t.canBreakWords(v,i.breakWords))for(var b=v.split(""),T=0;T<b.length;T++){for(var w=b[T],S=1;b[T+S];){var A=b[T+S],P=w[w.length-1];if(t.canBreakChars(P,A,v,T,i.breakWords))break;w+=A,S++}T+=w.length-1;var E=t.getFromCache(w,h,l,n);E+o>d&&(a+=t.addLine(s),f=!1,s="",o=0),s+=w,o+=E}else{s.length>0&&(a+=t.addLine(s),s="",o=0);var C=m===g.length-1;a+=t.addLine(v,!C),f=!1,s="",o=0}else x+o>d&&(f=!1,a+=t.addLine(s),s="",o=0),(s.length>0||!t.isBreakingSpace(v)||f)&&(s+=v,o+=x)}return a+=t.addLine(s,!1)},t.addLine=function(e){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return e=t.trimRight(e),e=i?e+"\n":e},t.getFromCache=function(t,e,i,r){var n=i[t];if(void 0===n){var o=t.length*e;n=r.measureText(t).width+o,i[t]=n}return n},t.collapseSpaces=function(t){return"normal"===t||"pre-line"===t},t.collapseNewlines=function(t){return"normal"===t},t.trimRight=function(e){if("string"!=typeof e)return"";for(var i=e.length-1;i>=0;i--){var r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e},t.isNewline=function(e){return"string"==typeof e&&t._newlines.indexOf(e.charCodeAt(0))>=0},t.isBreakingSpace=function(e){return"string"==typeof e&&t._breakingSpaces.indexOf(e.charCodeAt(0))>=0},t.tokenize=function(e){var i=[],r="";if("string"!=typeof e)return i;for(var n=0;n<e.length;n++){var o=e[n];t.isBreakingSpace(o)||t.isNewline(o)?(""!==r&&(i.push(r),r=""),i.push(o)):r+=o}return""!==r&&i.push(r),i},t.canBreakWords=function(t,e){return e},t.canBreakChars=function(t,e,i,r,n){return!0},t.measureFont=function(e){if(t._fonts[e])return t._fonts[e];var i={},r=t._canvas,n=t._context;n.font=e;var o=t.METRICS_STRING+t.BASELINE_SYMBOL,s=Math.ceil(n.measureText(o).width),a=Math.ceil(n.measureText(t.BASELINE_SYMBOL).width),l=2*a;a=a*t.BASELINE_MULTIPLIER|0,r.width=s,r.height=l,n.fillStyle="#f00",n.fillRect(0,0,s,l),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(o,0,a);var h=n.getImageData(0,0,s,l).data,u=h.length,c=4*s,p=0,f=0,d=!1;for(p=0;p<a;++p){for(var g=0;g<c;g+=4)if(255!==h[f+g]){d=!0;break}if(d)break;f+=c}for(i.ascent=a-p,f=u-c,d=!1,p=l;p>a;--p){for(var m=0;m<c;m+=4)if(255!==h[f+m]){d=!0;break}if(d)break;f-=c}return i.descent=p-a,i.fontSize=i.ascent+i.descent,t._fonts[e]=i,i},t.clearMetrics=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";e?delete t._fonts[e]:t._fonts={}},t}();i.default=r;var n=document.createElement("canvas");n.width=n.height=10,r._canvas=n,r._context=n.getContext("2d"),r._fonts={},r.METRICS_STRING="|Ã‰q",r.BASELINE_SYMBOL="M",r.BASELINE_MULTIPLIER=1.4,r._newlines=[10,13],r._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288]},{}],110:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=t("../const"),o=t("../utils"),s={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:n.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100,leading:0},a=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],l=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.styleID=0,this.reset(),c(this,e,e)}return t.prototype.clone=function(){var e={};return c(e,this,s),new t(e)},t.prototype.reset=function(){c(this,s,s)},t.prototype.toFontString=function(){var t="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1;i>=0;i--){var r=e[i].trim();!/([\"\'])[^\'\"]+\1/.test(r)&&a.indexOf(r)<0&&(r='"'+r+'"'),e[i]=r}return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+t+" "+e.join(",")},r(t,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(t){var e=u(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(t){var e=u(t);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(t,e){if(!Array.isArray(t)||!Array.isArray(e))return!1;if(t.length!==e.length)return!1;for(var i=0;i<t.length;++i)if(t[i]!==e[i])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(t){var e=u(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"whiteSpace",get:function(){return this._whiteSpace},set:function(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),t}();function h(t){return"number"==typeof t?(0,o.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function u(t){if(Array.isArray(t)){for(var e=0;e<t.length;++e)t[e]=h(t[e]);return t}return h(t)}function c(t,e,i){for(var r in i)Array.isArray(e[r])?t[r]=e[r].slice():t[r]=e[r]}i.default=l},{"../const":46,"../utils":125}],111:[function(t,e,i){"use strict";i.__esModule=!0;var r=o(t("./BaseTexture")),n=o(t("../settings"));function o(t){return t&&t.__esModule?t:{default:t}}function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:100,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,o=arguments[2],l=arguments[3];s(this,e);var h=a(this,t.call(this,null,o));return h.resolution=l||n.default.RESOLUTION,h.width=Math.ceil(i),h.height=Math.ceil(r),h.realWidth=h.width*h.resolution,h.realHeight=h.height*h.resolution,h.scaleMode=void 0!==o?o:n.default.SCALE_MODE,h.hasLoaded=!0,h._glRenderTargets={},h._canvasRenderTarget=null,h.valid=!1,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e){t=Math.ceil(t),e=Math.ceil(e),t===this.width&&e===this.height||(this.valid=t>0&&e>0,this.width=t,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){t.prototype.destroy.call(this,!0),this.renderer=null},e}(r.default);i.default=l},{"../settings":101,"./BaseTexture":112}],112:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("../utils"),n=l(t("../settings")),o=l(t("eventemitter3")),s=l(t("../utils/determineCrossOrigin")),a=l(t("bit-twiddle"));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return a.uid=(0,r.uid)(),a.touched=0,a.resolution=s||n.default.RESOLUTION,a.width=100,a.height=100,a.realWidth=100,a.realHeight=100,a.scaleMode=void 0!==o?o:n.default.SCALE_MODE,a.hasLoaded=!1,a.isLoading=!1,a.source=null,a.origSource=null,a.imageType=null,a.sourceScale=1,a.premultipliedAlpha=!0,a.imageUrl=null,a.isPowerOfTwo=!1,a.mipmap=n.default.MIPMAP_TEXTURES,a.wrapMode=n.default.WRAP_MODE,a._glTextures={},a._enabled=0,a._virtalBoundId=-1,a._destroyed=!1,a.textureCacheIds=[],i&&a.loadSource(i),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),this.emit("update",this)},e.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=a.default.isPow2(this.realWidth)&&a.default.isPow2(this.realHeight)},e.prototype.loadSource=function(t){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var i=!this.source;if(this.source=t,(t.src&&t.complete||t.getContext)&&t.width&&t.height)this._updateImageType(),"svg"===this.imageType?this._loadSvgSource():this._sourceLoaded(),i&&this.emit("loaded",this);else if(!t.getContext){this.isLoading=!0;var r=this;if(t.onload=function(){r._updateImageType(),t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r._sourceLoaded(),"svg"!==r.imageType?r.emit("loaded",r):r._loadSvgSource())},t.onerror=function(){t.onload=null,t.onerror=null,r.isLoading&&(r.isLoading=!1,r.emit("error",r))},t.complete&&t.src){if(t.onload=null,t.onerror=null,"svg"===r.imageType)return void r._loadSvgSource();this.isLoading=!1,t.width&&t.height?(this._sourceLoaded(),e&&this.emit("loaded",this)):e&&this.emit("error",this)}}},e.prototype._updateImageType=function(){if(this.imageUrl){var t=(0,r.decomposeDataUri)(this.imageUrl),e=void 0;if(t&&"image"===t.mediaType){var i=t.subType.split("+")[0];if(!(e=(0,r.getUrlFileExtension)("."+i)))throw new Error("Invalid image type in data URI.")}else(e=(0,r.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},e.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,r.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},e.prototype._loadSvgSourceUsingDataUri=function(t){var e=void 0;if("base64"===t.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(t.data)}else e=t.data;this._loadSvgSourceUsingString(e)},e.prototype._loadSvgSourceUsingXhr=function(){var t=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");t._loadSvgSourceUsingString(e.response)},e.onerror=function(){return t.emit("error",t)},e.open("GET",this.imageUrl,!0),e.send()},e.prototype._loadSvgSourceUsingString=function(t){var i=(0,r.getSvgSize)(t),n=i.width,o=i.height;if(!n||!o)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(o*this.sourceScale),this._updateDimensions();var s=document.createElement("canvas");s.width=this.realWidth,s.height=this.realHeight,s._pixiId="canvas_"+(0,r.uid)(),s.getContext("2d").drawImage(this.source,0,0,n,o,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=s,e.addToCache(this,s._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},e.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},e.prototype.destroy=function(){this.imageUrl&&(delete r.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),e.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},e.prototype.dispose=function(){this.emit("dispose",this)},e.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},e.fromImage=function(t,i,n,o){var a=r.BaseTextureCache[t];if(!a){var l=new Image;void 0===i&&0!==t.indexOf("data:")?l.crossOrigin=(0,s.default)(t):i&&(l.crossOrigin="string"==typeof i?i:"anonymous"),(a=new e(l,n)).imageUrl=t,o&&(a.sourceScale=o),a.resolution=(0,r.getResolutionOfUrl)(t),l.src=t,e.addToCache(a,t)}return a},e.fromCanvas=function(t,i){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,r.uid)());var o=r.BaseTextureCache[t._pixiId];return o||(o=new e(t,i),e.addToCache(o,t._pixiId)),o},e.from=function(t,i,n){if("string"==typeof t)return e.fromImage(t,void 0,i,n);if(t instanceof HTMLImageElement){var o=t.src,s=r.BaseTextureCache[o];return s||((s=new e(t,i)).imageUrl=o,n&&(s.sourceScale=n),s.resolution=(0,r.getResolutionOfUrl)(o),e.addToCache(s,o)),s}return t instanceof HTMLCanvasElement?e.fromCanvas(t,i):t},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),r.BaseTextureCache[e],r.BaseTextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=r.BaseTextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete r.BaseTextureCache[t],e}}else if(t&&t.textureCacheIds){for(var n=0;n<t.textureCacheIds.length;++n)delete r.BaseTextureCache[t.textureCacheIds[n]];return t.textureCacheIds.length=0,t}return null},e}(o.default);i.default=h},{"../settings":101,"../utils":125,"../utils/determineCrossOrigin":124,"bit-twiddle":1,eventemitter3:3}],113:[function(t,e,i){"use strict";i.__esModule=!0;var r=n(t("./BaseRenderTexture"));function n(t){return t&&t.__esModule?t:{default:t}}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var a=function(t){function e(i,n){o(this,e);var a=null;if(!(i instanceof r.default)){var l=arguments[1],h=arguments[2],u=arguments[3],c=arguments[4];a=arguments[0],n=null,i=new r.default(l,h,u,c)}var p=s(this,t.call(this,i,n));return p.legacyRenderer=a,p.valid=!0,p._updateUvs(),p}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.resize=function(t,e,i){t=Math.ceil(t),e=Math.ceil(e),this.valid=t>0&&e>0,this._frame.width=this.orig.width=t,this._frame.height=this.orig.height=e,i||this.baseTexture.resize(t,e),this._updateUvs()},e.create=function(t,i,n,o){return new e(new r.default(t,i,n,o))},e}(n(t("./Texture")).default);i.default=a},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=t("../"),o=t("../utils");function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var a=function(){function t(e,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;s(this,t),this.baseTexture=e,this.textures={},this.animations={},this.data=i,this.resolution=this._updateResolution(r||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return r(t,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),t.prototype._updateResolution=function(t){var e=this.data.meta.scale,i=(0,o.getResolutionOfUrl)(t,null);return null===i&&(i=void 0!==e?parseFloat(e):1),1!==i&&(this.baseTexture.resolution=i,this.baseTexture.update()),i},t.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()},t.prototype._processFrames=function(e){for(var i=e,r=t.BATCH_SIZE,o=this.baseTexture.sourceScale;i-e<r&&i<this._frameKeys.length;){var s=this._frameKeys[i],a=this._frames[s],l=a.frame;if(l){var h=null,u=null,c=!1!==a.trimmed&&a.sourceSize?a.sourceSize:a.frame,p=new n.Rectangle(0,0,Math.floor(c.w*o)/this.resolution,Math.floor(c.h*o)/this.resolution);h=a.rotated?new n.Rectangle(Math.floor(l.x*o)/this.resolution,Math.floor(l.y*o)/this.resolution,Math.floor(l.h*o)/this.resolution,Math.floor(l.w*o)/this.resolution):new n.Rectangle(Math.floor(l.x*o)/this.resolution,Math.floor(l.y*o)/this.resolution,Math.floor(l.w*o)/this.resolution,Math.floor(l.h*o)/this.resolution),!1!==a.trimmed&&a.spriteSourceSize&&(u=new n.Rectangle(Math.floor(a.spriteSourceSize.x*o)/this.resolution,Math.floor(a.spriteSourceSize.y*o)/this.resolution,Math.floor(l.w*o)/this.resolution,Math.floor(l.h*o)/this.resolution)),this.textures[s]=new n.Texture(this.baseTexture,h,p,u,a.rotated?2:0,a.anchor),n.Texture.addToCache(this.textures[s],s)}i++}},t.prototype._processAnimations=function(){var t=this.data.animations||{};for(var e in t){this.animations[e]=[];var i=t[e],r=Array.isArray(i),n=0;for(i=r?i:i[Symbol.iterator]();;){var o;if(r){if(n>=i.length)break;o=i[n++]}else{if((n=i.next()).done)break;o=n.value}var s=o;this.animations[e].push(this.textures[s])}}},t.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},t.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout((function(){e._batchIndex*t.BATCH_SIZE<e._frameKeys.length?e._nextBatch():(e._processAnimations(),e._parseComplete())}),0)},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&this.baseTexture.destroy(),this.baseTexture=null},t}();i.default=a},{"../":65,"../utils":125}],115:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=c(t("./BaseTexture")),o=c(t("./VideoBaseTexture")),s=c(t("./TextureUvs")),a=c(t("eventemitter3")),l=t("../math"),h=t("../utils"),u=c(t("../settings"));function c(t){return t&&t.__esModule?t:{default:t}}var p=function(t){function e(i,r,n,o,s,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));if(h.noFrame=!1,r||(h.noFrame=!0,r=new l.Rectangle(0,0,1,1)),i instanceof e&&(i=i.baseTexture),h.baseTexture=i,h._frame=r,h.trim=o,h.valid=!1,h.requiresUpdate=!1,h._uvs=null,h.orig=n||r,h._rotate=Number(s||0),!0===s)h._rotate=2;else if(h._rotate%2!=0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return i.hasLoaded?(h.noFrame&&(r=new l.Rectangle(0,0,i.width,i.height),i.on("update",h.onBaseTextureUpdated,h)),h.frame=r):i.once("loaded",h.onBaseTextureLoaded,h),h.defaultAnchor=a?new l.Point(a.x,a.y):new l.Point(0,0),h._updateID=0,h.transform=null,h.textureCacheIds=[],h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.update=function(){this.baseTexture.update()},e.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.noFrame?this.frame=new l.Rectangle(0,0,t.width,t.height):this.frame=this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},e.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},e.prototype.destroy=function(t){this.baseTexture&&(t&&(h.TextureCache[this.baseTexture.imageUrl]&&e.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,e.removeFromCache(this),this.textureCacheIds=null},e.prototype.clone=function(){return new e(this.baseTexture,this.frame,this.orig,this.trim,this.rotate,this.defaultAnchor)},e.prototype._updateUvs=function(){this._uvs||(this._uvs=new s.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},e.fromImage=function(t,i,r,o){var s=h.TextureCache[t];return s||(s=new e(n.default.fromImage(t,i,r,o)),e.addToCache(s,t)),s},e.fromFrame=function(t){var e=h.TextureCache[t];if(!e)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return e},e.fromCanvas=function(t,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"canvas";return new e(n.default.fromCanvas(t,i,r))},e.fromVideo=function(t,i,r,n){return"string"==typeof t?e.fromVideoUrl(t,i,r,n):new e(o.default.fromVideo(t,i,n))},e.fromVideoUrl=function(t,i,r,n){return new e(o.default.fromUrl(t,i,r,n))},e.from=function(t){if("string"==typeof t){var i=h.TextureCache[t];return i||(null!==t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?e.fromVideoUrl(t):e.fromImage(t))}return t instanceof HTMLImageElement?new e(n.default.from(t)):t instanceof HTMLCanvasElement?e.fromCanvas(t,u.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?e.fromVideo(t):t instanceof n.default?new e(t):t},e.fromLoader=function(t,i,r){var o=new n.default(t,void 0,(0,h.getResolutionOfUrl)(i)),s=new e(o);return o.imageUrl=i,r||(r=i),n.default.addToCache(s.baseTexture,r),e.addToCache(s,r),r!==i&&(n.default.addToCache(s.baseTexture,i),e.addToCache(s,i)),s},e.addToCache=function(t,e){e&&(-1===t.textureCacheIds.indexOf(e)&&t.textureCacheIds.push(e),h.TextureCache[e],h.TextureCache[e]=t)},e.removeFromCache=function(t){if("string"==typeof t){var e=h.TextureCache[t];if(e){var i=e.textureCacheIds.indexOf(t);return i>-1&&e.textureCacheIds.splice(i,1),delete h.TextureCache[t],e}}else if(t&&t.textureCacheIds){for(var r=0;r<t.textureCacheIds.length;++r)h.TextureCache[t.textureCacheIds[r]]===t&&delete h.TextureCache[t.textureCacheIds[r]];return t.textureCacheIds.length=0,t}return null},r(e,[{key:"frame",get:function(){return this._frame},set:function(t){this._frame=t,this.noFrame=!1;var e=t.x,i=t.y,r=t.width,n=t.height,o=e+r>this.baseTexture.width,s=i+n>this.baseTexture.height;if(o||s){var a=o&&s?"and":"or",l="X: "+e+" + "+r+" = "+(e+r)+" > "+this.baseTexture.width,h="Y: "+i+" + "+n+" = "+(i+n)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+l+" "+a+" "+h)}this.valid=r&&n&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=t),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),e}(a.default);function f(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}i.default=p,p.EMPTY=new p(new n.default),f(p.EMPTY),f(p.EMPTY.baseTexture),p.WHITE=function(){var t=document.createElement("canvas");t.width=10,t.height=10;var e=t.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new p(new n.default(t))}(),f(p.WHITE),f(p.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":125,"./BaseTexture":112,"./TextureUvs":117,"./VideoBaseTexture":118,eventemitter3:3}],116:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=t("../math/Matrix"),s=(r=o)&&r.__esModule?r:{default:r},a=new s.default,l=function(){function t(e,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._texture=e,this.mapCoord=new s.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===i?.5:i}return t.prototype.multiplyUvs=function(t,e){void 0===e&&(e=t);for(var i=this.mapCoord,r=0;r<t.length;r+=2){var n=t[r],o=t[r+1];e[r]=n*i.a+o*i.c+i.tx,e[r+1]=n*i.b+o*i.d+i.ty}return e},t.prototype.update=function(t){var e=this._texture;if(!e||!e.valid)return!1;if(!t&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var i=e._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);var r=e.orig,n=e.trim;n&&(a.set(r.width/n.width,0,0,r.height/n.height,-n.x/n.width,-n.y/n.height),this.mapCoord.append(a));var o=e.baseTexture,s=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return s[0]=(e._frame.x+l+h)/o.width,s[1]=(e._frame.y+l+h)/o.height,s[2]=(e._frame.x+e._frame.width-l+h)/o.width,s[3]=(e._frame.y+e._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,!0},n(t,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),t}();i.default=l},{"../math/Matrix":67}],117:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../math/GroupD8"),o=(r=n)&&r.__esModule?r:{default:r},s=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(t,e,i){var r=e.width,n=e.height;if(i){var s=t.width/2/r,a=t.height/2/n,l=t.x/r+s,h=t.y/n+a;i=o.default.add(i,o.default.NW),this.x0=l+s*o.default.uX(i),this.y0=h+a*o.default.uY(i),i=o.default.add(i,2),this.x1=l+s*o.default.uX(i),this.y1=h+a*o.default.uY(i),i=o.default.add(i,2),this.x2=l+s*o.default.uX(i),this.y2=h+a*o.default.uY(i),i=o.default.add(i,2),this.x3=l+s*o.default.uX(i),this.y3=h+a*o.default.uY(i)}else this.x0=t.x/r,this.y0=t.y/n,this.x1=(t.x+t.width)/r,this.y1=t.y/n,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/n,this.x3=t.x/r,this.y3=(t.y+t.height)/n;this.uvsUint32[0]=(65535&Math.round(65535*this.y0))<<16|65535&Math.round(65535*this.x0),this.uvsUint32[1]=(65535&Math.round(65535*this.y1))<<16|65535&Math.round(65535*this.x1),this.uvsUint32[2]=(65535&Math.round(65535*this.y2))<<16|65535&Math.round(65535*this.x2),this.uvsUint32[3]=(65535&Math.round(65535*this.y3))<<16|65535&Math.round(65535*this.x3)},t}();i.default=s},{"../math/GroupD8":66}],118:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=h(t("./BaseTexture")),o=t("../utils"),s=t("../ticker"),a=t("../const"),l=h(t("../utils/determineCrossOrigin"));function h(t){return t&&t.__esModule?t:{default:t}}function u(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function c(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var p=function(t){function e(i,r){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(u(this,e),!i)throw new Error("No video source element specified.");(i.readyState===i.HAVE_ENOUGH_DATA||i.readyState===i.HAVE_FUTURE_DATA)&&i.width&&i.height&&(i.complete=!0);var o=c(this,t.call(this,i,r));return o.width=i.videoWidth,o.height=i.videoHeight,o._autoUpdate=!0,o._isAutoUpdating=!1,o.autoPlay=n,o.update=o.update.bind(o),o._onCanPlay=o._onCanPlay.bind(o),i.addEventListener("play",o._onPlayStart.bind(o)),i.addEventListener("pause",o._onPlayStop.bind(o)),o.hasLoaded=!1,o.__loaded=!1,o._isSourceReady()?o._onCanPlay():(i.addEventListener("canplay",o._onCanPlay),i.addEventListener("canplaythrough",o._onCanPlay)),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._isSourcePlaying=function(){var t=this.source;return t.currentTime>0&&!1===t.paused&&!1===t.ended&&t.readyState>2},e.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},e.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},e.prototype._onPlayStop=function(){this._isAutoUpdating&&(s.shared.remove(this.update,this),this._isAutoUpdating=!1)},e.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},e.prototype.destroy=function(){this._isAutoUpdating&&s.shared.remove(this.update,this),this.source&&this.source._pixiId&&(n.default.removeFromCache(this.source._pixiId),delete this.source._pixiId,this.source.pause(),this.source.src="",this.source.load()),t.prototype.destroy.call(this)},e.fromVideo=function(t,i,r){t._pixiId||(t._pixiId="video_"+(0,o.uid)());var s=o.BaseTextureCache[t._pixiId];return s||(s=new e(t,i,r),n.default.addToCache(s,t._pixiId)),s},e.fromUrl=function(t,i,r,n){var o=document.createElement("video");o.setAttribute("webkit-playsinline",""),o.setAttribute("playsinline","");var s=Array.isArray(t)?t[0].src||t[0]:t.src||t;if(void 0===r&&0!==s.indexOf("data:")?o.crossOrigin=(0,l.default)(s):r&&(o.crossOrigin="string"==typeof r?r:"anonymous"),Array.isArray(t))for(var a=0;a<t.length;++a)o.appendChild(f(t[a].src||t[a],t[a].mime));else o.appendChild(f(s,t.mime));return o.load(),e.fromVideo(o,i,n)},r(e,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(s.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(s.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),e}(n.default);function f(t,e){if(!e){var i=t.split("?").shift().toLowerCase();e="video/"+i.substr(i.lastIndexOf(".")+1)}var r=document.createElement("source");return r.src=t,r.type=e,r}i.default=p,p.fromUrls=p.fromUrl},{"../const":46,"../ticker":121,"../utils":125,"../utils/determineCrossOrigin":124,"./BaseTexture":112}],119:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=a(t("../settings")),o=t("../const"),s=a(t("./TickerListener"));function a(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(){var e=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._head=new s.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/n.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){e._requestId=null,e.started&&(e.update(t),e.started&&null===e._requestId&&e._head.next&&(e._requestId=requestAnimationFrame(e._tick)))}}return t.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},t.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},t.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},t.prototype.add=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,i))},t.prototype.addOnce=function(t,e){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(t,e,i,!0))},t.prototype._addListener=function(t){var e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this},t.prototype.remove=function(t,e){for(var i=this._head.next;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this},t.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},t.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},t.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},t.prototype.update=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:performance.now(),e=void 0;if(t>this.lastTime){(e=this.elapsedMS=t-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*n.default.TARGET_FPMS*this.speed;for(var i=this._head,r=i.next;r;)r=r.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=t},r(t,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(t){var e=Math.min(Math.max(0,t)/1e3,n.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),t}();i.default=l},{"../const":46,"../settings":101,"./TickerListener":120}],120:[function(t,e,i){"use strict";function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}i.__esModule=!0;var n=function(){function t(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=arguments.length>3&&void 0!==arguments[3]&&arguments[3];r(this,t),this.fn=e,this.context=i,this.priority=n,this.once=o,this.next=null,this.previous=null,this._destroyed=!1}return t.prototype.match=function(t,e){return e=e||null,this.fn===t&&this.context===e},t.prototype.emit=function(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},t.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},t.prototype.destroy=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.next;return this.next=t?null:e,this.previous=null,e},t}();i.default=n},{}],121:[function(t,e,i){"use strict";i.__esModule=!0,i.Ticker=i.shared=void 0;var r,n=t("./Ticker"),o=(r=n)&&r.__esModule?r:{default:r},s=new o.default;s.autoStart=!0,s.destroy=function(){},i.shared=s,i.Ticker=o.default},{"./Ticker":119}],122:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],123:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){for(var e=6*t,i=new Uint16Array(e),r=0,n=0;r<e;r+=6,n+=4)i[r+0]=n+0,i[r+1]=n+1,i[r+2]=n+2,i[r+3]=n+0,i[r+4]=n+2,i[r+5]=n+3;return i}},{}],124:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:window.location;if(0===t.indexOf("data:"))return"";e=e||window.location,s||(s=document.createElement("a")),s.href=t;var i=!(t=o.default.parse(s.href)).port&&""===e.port||t.port===e.port;return t.hostname===e.hostname&&i&&t.protocol===e.protocol?"":"anonymous"};var r,n=t("url"),o=(r=n)&&r.__esModule?r:{default:r},s=void 0},{url:38}],125:[function(t,e,i){"use strict";i.__esModule=!0,i.premultiplyBlendMode=i.BaseTextureCache=i.TextureCache=i.earcut=i.mixins=i.pluginTarget=i.EventEmitter=i.removeItems=i.isMobile=void 0,i.uid=function(){return++d},i.hex2rgb=function(t,e){return(e=e||[])[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(255&t)/255,e},i.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},i.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(255*t[2]|0)},i.getResolutionOfUrl=function(t,e){var i=n.default.RETINA_PREFIX.exec(t);return i?parseFloat(i[1]):void 0!==e?e:1},i.decomposeDataUri=function(t){var e=r.DATA_URI.exec(t);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,charset:e[3]?e[3].toLowerCase():void 0,encoding:e[4]?e[4].toLowerCase():void 0,data:e[5]}},i.getUrlFileExtension=function(t){var e=r.URL_FILE_EXTENSION.exec(t);if(e)return e[1].toLowerCase()},i.getSvgSize=function(t){var e=r.SVG_SIZE.exec(t),i={};return e&&(i[e[1]]=Math.round(parseFloat(e[3])),i[e[5]]=Math.round(parseFloat(e[7]))),i},i.skipHello=function(){g=!0},i.sayHello=function(t){if(!g){if(navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var e=["\n %c %c %c PixiJS "+r.VERSION+" - ✰ "+t+" ✰  %c  %c  http://www.pixijs.com/  %c %c ♥%c♥%c♥ \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+r.VERSION+" - "+t+" - http://www.pixijs.com/");g=!0}},i.isWebGLSupported=function(){var t={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),i=e.getContext("webgl",t)||e.getContext("experimental-webgl",t),r=!(!i||!i.getContextAttributes().stencil);if(i){var n=i.getExtension("WEBGL_lose_context");n&&n.loseContext()}return i=null,r}catch(t){return!1}},i.sign=function(t){return 0===t?0:t<0?-1:1},i.destroyTextureCache=function(){var t=void 0;for(t in m)m[t].destroy();for(t in v)v[t].destroy()},i.clearTextureCache=function(){var t=void 0;for(t in m)delete m[t];for(t in v)delete v[t]},i.correctBlendMode=function(t,e){return y[e?1:0][t]},i.premultiplyTint=function(t,e){if(1===e)return(255*e<<24)+t;if(0===e)return 0;var i=t>>16&255,r=t>>8&255,n=255&t;return(255*e<<24)+((i=i*e+.5|0)<<16)+((r=r*e+.5|0)<<8)+(n=n*e+.5|0)},i.premultiplyRgba=function(t,e,i,r){return i=i||new Float32Array(4),r||void 0===r?(i[0]=t[0]*e,i[1]=t[1]*e,i[2]=t[2]*e):(i[0]=t[0],i[1]=t[1],i[2]=t[2]),i[3]=e,i},i.premultiplyTintToRgba=function(t,e,i,r){return(i=i||new Float32Array(4))[0]=(t>>16&255)/255,i[1]=(t>>8&255)/255,i[2]=(255&t)/255,(r||void 0===r)&&(i[0]*=e,i[1]*=e,i[2]*=e),i[3]=e,i};var r=t("../const"),n=f(t("../settings")),o=f(t("eventemitter3")),s=f(t("./pluginTarget")),a=p(t("./mixin")),l=p(t("ismobilejs")),h=f(t("remove-array-items")),u=f(t("./mapPremultipliedBlendModes")),c=f(t("earcut"));function p(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}function f(t){return t&&t.__esModule?t:{default:t}}var d=0,g=!1;i.isMobile=l,i.removeItems=h.default,i.EventEmitter=o.default,i.pluginTarget=s.default,i.mixins=a,i.earcut=c.default;var m=i.TextureCache=Object.create(null),v=i.BaseTextureCache=Object.create(null),y=i.premultiplyBlendMode=(0,u.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":126,"./mixin":128,"./pluginTarget":129,earcut:2,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],126:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){for(var t=[],e=[],i=0;i<32;i++)t[i]=i,e[i]=i;t[r.BLEND_MODES.NORMAL_NPM]=r.BLEND_MODES.NORMAL,t[r.BLEND_MODES.ADD_NPM]=r.BLEND_MODES.ADD,t[r.BLEND_MODES.SCREEN_NPM]=r.BLEND_MODES.SCREEN,e[r.BLEND_MODES.NORMAL]=r.BLEND_MODES.NORMAL_NPM,e[r.BLEND_MODES.ADD]=r.BLEND_MODES.ADD_NPM,e[r.BLEND_MODES.SCREEN]=r.BLEND_MODES.SCREEN_NPM;var n=[];return n.push(e),n.push(t),n};var r=t("../const")},{"../const":46}],127:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){return o.default.tablet||o.default.phone?4:t};var r,n=t("ismobilejs"),o=(r=n)&&r.__esModule?r:{default:r}},{ismobilejs:4}],128:[function(t,e,i){"use strict";function r(t,e){if(t&&e)for(var i=Object.keys(e),r=0;r<i.length;++r){var n=i[r];Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}}i.__esModule=!0,i.mixin=r,i.delayMixin=function(t,e){n.push(t,e)},i.performMixins=function(){for(var t=0;t<n.length;t+=2)r(n[t],n[t+1]);n.length=0};var n=[]},{}],129:[function(t,e,i){"use strict";i.__esModule=!0,i.default={mixin:function(t){!function(t){t.__plugins={},t.registerPlugin=function(e,i){t.__plugins[e]=i},t.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},t.__plugins)this.plugins[e]=new t.__plugins[e](this)},t.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},{}],130:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=t.width,i=t.height,r=t.getContext("2d"),n=r.getImageData(0,0,e,i).data,o=n.length,s={top:null,left:null,right:null,bottom:null},a=null,l=void 0,h=void 0,u=void 0;for(l=0;l<o;l+=4)0!==n[l+3]&&(h=l/4%e,u=~~(l/4/e),null===s.top&&(s.top=u),(null===s.left||h<s.left)&&(s.left=h),(null===s.right||s.right<h)&&(s.right=h+1),(null===s.bottom||s.bottom<u)&&(s.bottom=u));return null!==s.top&&(e=s.right-s.left,i=s.bottom-s.top+1,a=r.getImageData(s.left,s.top,e,i)),{height:i,width:e,data:a}}},{}],131:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){var e=t.mesh,i=t.particles,r=t.extras,o=t.filters,s=t.prepare,a=t.loaders,l=t.interaction;Object.defineProperties(t,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return n("You do not need to use a PIXI Stage any more, you can simply render any container."),t.Container}},DisplayObjectContainer:{get:function(){return n("DisplayObjectContainer has been shortened to Container, please use Container from now on."),t.Container}},Strip:{get:function(){return n("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return n("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return n("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),i.ParticleContainer}},MovieClip:{get:function(){return n("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),r.AnimatedSprite}},TilingSprite:{get:function(){return n("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),r.TilingSprite}},BitmapText:{get:function(){return n("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),r.BitmapText}},blendModes:{get:function(){return n("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),t.BLEND_MODES}},scaleModes:{get:function(){return n("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),t.SCALE_MODES}},BaseTextureCache:{get:function(){return n("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),t.utils.BaseTextureCache}},TextureCache:{get:function(){return n("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),t.utils.TextureCache}},math:{get:function(){return n("The math namespace is deprecated, please access members already accessible on PIXI."),t}},AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.Filter}},TransformManual:{get:function(){return n("TransformManual has been renamed to TransformBase, please update your pixi-spine"),t.TransformBase}},TARGET_FPMS:{get:function(){return n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS},set:function(e){n("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),t.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION},set:function(e){n("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),t.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION},set:function(e){n("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),t.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES},set:function(e){n("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),t.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE},set:function(e){n("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),t.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES},set:function(e){n("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),t.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX},set:function(e){n("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),t.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return n("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),t.settings.RENDER_OPTIONS}}});for(var h=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],u=function(e){var i=h[e];Object.defineProperty(t[i.parent],"DEFAULT",{get:function(){return n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]},set:function(e){n("PIXI."+i.parent+".DEFAULT has been deprecated, please use PIXI.settings."+i.target),t.settings[i.target]=e}})},c=0;c<h.length;c++)u(c);Object.defineProperties(t.settings,{PRECISION:{get:function(){return n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT},set:function(e){n("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),t.settings.PRECISION_FRAGMENT=e}}}),r.AnimatedSprite&&Object.defineProperties(r,{MovieClip:{get:function(){return n("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),r.AnimatedSprite}}}),r&&Object.defineProperties(r,{TextureTransform:{get:function(){return n("The TextureTransform class has been renamed to TextureMatrix, please use PIXI.TextureMatrix from now on."),t.TextureMatrix}}}),t.DisplayObject.prototype.generateTexture=function(t,e,i){return n("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),t.generateTexture(this,e,i)},t.Graphics.prototype.generateTexture=function(t,e){return n("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(t,e)},t.GroupD8.isSwapWidthHeight=function(e){return n("GroupD8.isSwapWidthHeight was renamed to GroupD8.isVertical"),t.GroupD8.isVertical(e)},t.RenderTexture.prototype.render=function(t,e,i,r){this.legacyRenderer.render(t,this,i,e,!r),n("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},t.RenderTexture.prototype.getImage=function(t){return n("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},t.RenderTexture.prototype.getBase64=function(t){return n("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},t.RenderTexture.prototype.getCanvas=function(t){return n("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},t.RenderTexture.prototype.getPixels=function(t){return n("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},t.Sprite.prototype.setTexture=function(t){this.texture=t,n("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},r.BitmapText&&(r.BitmapText.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),t.Text.prototype.setText=function(t){this.text=t,n("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},t.Text.calculateFontProperties=function(e){return n("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),t.TextMetrics.measureFont(e)},Object.defineProperties(t.Text,{fontPropertiesCache:{get:function(){return n("Text.fontPropertiesCache is deprecated"),t.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return n("Text.fontPropertiesCanvas is deprecated"),t.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return n("Text.fontPropertiesContext is deprecated"),t.TextMetrics._context}}}),t.Text.prototype.setStyle=function(t){this.style=t,n("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},t.Text.prototype.determineFontProperties=function(e){return n("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),t.TextMetrics.measureFont(e)},t.Text.getFontStyle=function(e){return n("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof t.TextStyle||(e=new t.TextStyle(e)),e.toFontString()},Object.defineProperties(t.TextStyle.prototype,{font:{get:function(){n("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(t){n("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),t.indexOf("italic")>1?this._fontStyle="italic":t.indexOf("oblique")>-1?this._fontStyle="oblique":this._fontStyle="normal",t.indexOf("small-caps")>-1?this._fontVariant="small-caps":this._fontVariant="normal";var e=t.split(" "),i=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){i=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var o=0;o<i;++o)if(e[o].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[o];break}if(i>-1&&i<e.length-1){this._fontFamily="";for(var s=i+1;s<e.length;++s)this._fontFamily+=e[s]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),t.Texture.prototype.setFrame=function(t){this.frame=t,n("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},t.Texture.addTextureToCache=function(e,i){t.Texture.addToCache(e,i),n("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},t.Texture.removeTextureFromCache=function(e){return n("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),t.BaseTexture.removeFromCache(e),t.Texture.removeFromCache(e)},Object.defineProperties(o,{AbstractFilter:{get:function(){return n("AstractFilter has been renamed to Filter, please use PIXI.Filter"),t.AbstractFilter}},SpriteMaskFilter:{get:function(){return n("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),t.SpriteMaskFilter}},VoidFilter:{get:function(){return n("VoidFilter has been renamed to AlphaFilter, please use PIXI.filters.AlphaFilter"),o.AlphaFilter}}}),t.utils.uuid=function(){return n("utils.uuid() is deprecated, please use utils.uid() from now on."),t.utils.uid()},t.utils.canUseNewCanvasBlendModes=function(){return n("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),t.CanvasTinter.canUseMultiply};var p=!0;if(Object.defineProperty(t.utils,"_saidHello",{set:function(t){t&&(n("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),p=t},get:function(){return p}}),s.BasePrepare&&(s.BasePrepare.prototype.register=function(t,e){return n("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),t&&this.registerFindHook(t),e&&this.registerUploadHook(e),this}),s.canvas&&Object.defineProperty(s.canvas,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.webgl&&Object.defineProperty(s.webgl,"UPLOADS_PER_FRAME",{set:function(){n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return n("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),a.Loader){var f=a.Resource,d=a.Loader;Object.defineProperties(f.prototype,{isJson:{get:function(){return n("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===f.TYPE.JSON}},isXml:{get:function(){return n("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===f.TYPE.XML}},isImage:{get:function(){return n("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===f.TYPE.IMAGE}},isAudio:{get:function(){return n("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===f.TYPE.AUDIO}},isVideo:{get:function(){return n("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===f.TYPE.VIDEO}}}),Object.defineProperties(d.prototype,{before:{get:function(){return n("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return n("The after() method is deprecated, please use use()."),this.use}}})}l.interactiveTarget&&Object.defineProperty(l.interactiveTarget,"defaultCursor",{set:function(t){n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return n("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),l.InteractionManager&&(Object.defineProperty(l.InteractionManager,"defaultCursorStyle",{set:function(t){n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return n("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(l.InteractionManager,"currentCursorStyle",{set:function(t){n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return n("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))};var r={};function n(t){if(!r[t]){var e=(new Error).stack;void 0===e||(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed),r[t]=!0}}},{}],132:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),n=new r.Rectangle,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0;t&&(a=t instanceof r.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(i=e.rootContext,o=e.resolution,(s=n).width=this.renderer.width,s.height=this.renderer.height);var l=s.width*o,h=s.height*o,u=new r.CanvasRenderTarget(l,h,1),c=i.getImageData(s.x*o,s.y*o,l,h);return u.context.putImageData(c,0,0),u.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0;return t&&(a=t instanceof r.RenderTexture?t:e.generateTexture(t)),a?(i=a.baseTexture._canvasRenderTarget.context,o=a.baseTexture._canvasRenderTarget.resolution,s=a.frame):(i=e.rootContext,(s=n).width=e.width,s.height=e.height),i.getImageData(0,0,s.width*o,s.height*o).data},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();i.default=o,r.CanvasRenderer.registerPlugin("extract",o)},{"../../core":65}],133:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("./webgl/WebGLExtract");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return o(r).default}});var n=t("./canvas/CanvasExtract");function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return o(n).default}})},{"./canvas/CanvasExtract":132,"./webgl/WebGLExtract":134}],134:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),n=new r.Rectangle,o=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e,e.extract=this}return t.prototype.image=function(t){var e=new Image;return e.src=this.base64(t),e},t.prototype.base64=function(t){return this.canvas(t).toDataURL()},t.prototype.canvas=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=!1,l=void 0,h=!1;t&&(t instanceof r.RenderTexture?l=t:(l=this.renderer.generateTexture(t),h=!0)),l?(o=(i=l.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=l.frame,a=!1):(o=(i=this.renderer.rootRenderTarget).resolution,a=!0,(s=n).width=i.size.width,s.height=i.size.height);var u=s.width*o,c=s.height*o,p=new r.CanvasRenderTarget(u,c,1);if(i){e.bindRenderTarget(i);var f=new Uint8Array(4*u*c),d=e.gl;d.readPixels(s.x*o,s.y*o,u,c,d.RGBA,d.UNSIGNED_BYTE,f);var g=p.context.getImageData(0,0,u,c);g.data.set(f),p.context.putImageData(g,0,0),a&&(p.context.scale(1,-1),p.context.drawImage(p.canvas,0,-c))}return h&&l.destroy(!0),p.canvas},t.prototype.pixels=function(t){var e=this.renderer,i=void 0,o=void 0,s=void 0,a=void 0,l=!1;t&&(t instanceof r.RenderTexture?a=t:(a=this.renderer.generateTexture(t),l=!0)),a?(o=(i=a.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,s=a.frame):(o=(i=this.renderer.rootRenderTarget).resolution,(s=n).width=i.size.width,s.height=i.size.height);var h=s.width*o,u=s.height*o,c=new Uint8Array(4*h*u);if(i){e.bindRenderTarget(i);var p=e.gl;p.readPixels(s.x*o,s.y*o,h,u,p.RGBA,p.UNSIGNED_BYTE,c)}return l&&a.destroy(!0),c},t.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},t}();i.default=o,r.WebGLRenderer.registerPlugin("extract",o)},{"../../core":65}],135:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),o=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i[0]instanceof n.Texture?i[0]:i[0].texture));return o._textures=null,o._durations=null,o.textures=i,o._autoUpdate=!1!==r,o.animationSpeed=1,o.loop=!0,o.updateAnchor=!1,o.onComplete=null,o.onFrameChange=null,o.onLoop=null,o._currentTime=0,o.playing=!1,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&n.ticker.shared.remove(this.update,this))},e.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&n.ticker.shared.add(this.update,this,n.UPDATE_PRIORITY.HIGH))},e.prototype.gotoAndStop=function(t){this.stop();var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture()},e.prototype.gotoAndPlay=function(t){var e=this.currentFrame;this._currentTime=t,e!==this.currentFrame&&this.updateTexture(),this.play()},e.prototype.update=function(t){var e=this.animationSpeed*t,i=this.currentFrame;if(null!==this._durations){var r=this._currentTime%1*this._durations[this.currentFrame];for(r+=e/60*1e3;r<0;)this._currentTime--,r+=this._durations[this.currentFrame];var n=Math.sign(this.animationSpeed*t);for(this._currentTime=Math.floor(this._currentTime);r>=this._durations[this.currentFrame];)r-=this._durations[this.currentFrame]*n,this._currentTime+=n;this._currentTime+=r/this._durations[this.currentFrame]}else this._currentTime+=e;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):i!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<i||this.animationSpeed<0&&this.currentFrame>i)&&this.onLoop(),this.updateTexture())},e.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.updateAnchor&&this._anchor.copy(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame)},e.prototype.destroy=function(e){this.stop(),t.prototype.destroy.call(this,e)},e.fromFrames=function(t){for(var i=[],r=0;r<t.length;++r)i.push(n.Texture.fromFrame(t[r]));return new e(i)},e.fromImages=function(t){for(var i=[],r=0;r<t.length;++r)i.push(n.Texture.fromImage(t[r]));return new e(i)},r(e,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(t){if(t[0]instanceof n.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return t<0&&(t+=this._textures.length),t}}]),e}(n.Sprite);i.default=o},{"../core":65}],136:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),o=l(t("../core/math/ObservablePoint")),s=t("../core/utils"),a=l(t("../core/settings"));function l(t){return t&&t.__esModule?t:{default:t}}function h(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function u(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var c=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};h(this,e);var n=u(this,t.call(this));return n._textWidth=0,n._textHeight=0,n._glyphs=[],n._font={tint:void 0!==r.tint?r.tint:16777215,align:r.align||"left",name:null,size:0},n.font=r.font,n._text=i,n._maxWidth=0,n._maxLineHeight=0,n._letterSpacing=0,n._anchor=new o.default((function(){n.dirty=!0}),n,0,0),n.dirty=!1,n.updateText(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateText=function(){for(var t=e.fonts[this._font.name],i=this._font.size/t.size,r=new n.Point,o=[],s=[],a=this.text.replace(/(?:\r\n|\r)/g,"\n"),l=a.length,h=this._maxWidth*t.size/this._font.size,u=null,c=0,p=0,f=0,d=-1,g=0,m=0,v=0,y=0;y<l;y++){var _=a.charCodeAt(y),x=a.charAt(y);if(/(?:\s)/.test(x)&&(d=y,g=c),"\r"!==x&&"\n"!==x){var b=t.chars[_];b&&(u&&b.kerning[u]&&(r.x+=b.kerning[u]),o.push({texture:b.texture,line:f,charCode:_,position:new n.Point(r.x+b.xOffset+this._letterSpacing/2,r.y+b.yOffset)}),r.x+=b.xAdvance+this._letterSpacing,c=r.x,v=Math.max(v,b.yOffset+b.texture.height),u=_,-1!==d&&h>0&&r.x>h&&(++m,n.utils.removeItems(o,1+d-m,1+y-d),y=d,d=-1,s.push(g),p=Math.max(p,g),f++,r.x=0,r.y+=t.lineHeight,u=null))}else s.push(c),p=Math.max(p,c),++f,++m,r.x=0,r.y+=t.lineHeight,u=null}var T=a.charAt(a.length-1);"\r"!==T&&"\n"!==T&&(/(?:\s)/.test(T)&&(c=g),s.push(c),p=Math.max(p,c));for(var w=[],S=0;S<=f;S++){var A=0;"right"===this._font.align?A=p-s[S]:"center"===this._font.align&&(A=(p-s[S])/2),w.push(A)}for(var P=o.length,E=this.tint,C=0;C<P;C++){var O=this._glyphs[C];O?O.texture=o[C].texture:(O=new n.Sprite(o[C].texture),this._glyphs.push(O)),O.position.x=(o[C].position.x+w[o[C].line])*i,O.position.y=o[C].position.y*i,O.scale.x=O.scale.y=i,O.tint=E,O.parent||this.addChild(O)}for(var I=P;I<this._glyphs.length;++I)this.removeChild(this._glyphs[I]);if(this._textWidth=p*i,this._textHeight=(r.y+t.lineHeight)*i,0!==this.anchor.x||0!==this.anchor.y)for(var M=0;M<P;M++)this._glyphs[M].x-=this._textWidth*this.anchor.x,this._glyphs[M].y-=this._textHeight*this.anchor.y;this._maxLineHeight=v*i},e.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},e.prototype.getLocalBounds=function(){return this.validate(),t.prototype.getLocalBounds.call(this)},e.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},e.registerFont=function(t,i){var r={},o=t.getElementsByTagName("info")[0],l=t.getElementsByTagName("common")[0],h=t.getElementsByTagName("page"),u=(0,s.getResolutionOfUrl)(h[0].getAttribute("file"),a.default.RESOLUTION),c={};r.font=o.getAttribute("face"),r.size=parseInt(o.getAttribute("size"),10),r.lineHeight=parseInt(l.getAttribute("lineHeight"),10)/u,r.chars={},i instanceof n.Texture&&(i=[i]);for(var p=0;p<h.length;p++){var f=h[p].getAttribute("id"),d=h[p].getAttribute("file");c[f]=i instanceof Array?i[p]:i[d]}for(var g=t.getElementsByTagName("char"),m=0;m<g.length;m++){var v=g[m],y=parseInt(v.getAttribute("id"),10),_=v.getAttribute("page")||0,x=new n.Rectangle(parseInt(v.getAttribute("x"),10)/u+c[_].frame.x/u,parseInt(v.getAttribute("y"),10)/u+c[_].frame.y/u,parseInt(v.getAttribute("width"),10)/u,parseInt(v.getAttribute("height"),10)/u);r.chars[y]={xOffset:parseInt(v.getAttribute("xoffset"),10)/u,yOffset:parseInt(v.getAttribute("yoffset"),10)/u,xAdvance:parseInt(v.getAttribute("xadvance"),10)/u,kerning:{},texture:new n.Texture(c[_].baseTexture,x),page:_}}for(var b=t.getElementsByTagName("kerning"),T=0;T<b.length;T++){var w=b[T],S=parseInt(w.getAttribute("first"),10)/u,A=parseInt(w.getAttribute("second"),10)/u,P=parseInt(w.getAttribute("amount"),10)/u;r.chars[A]&&(r.chars[A].kerning[S]=P)}return e.fonts[r.font]=r,r},r(e,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&t>=0?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=t.length>=2?parseInt(t[0],10):e.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),e}(n.Container);i.default=c,c.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101,"../core/utils":125}],137:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=t("../core/sprites/canvas/CanvasTinter"),a=(r=s)&&r.__esModule?r:{default:r};function l(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function h(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var u=new o.Point,c=function(t){function e(i){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:100;l(this,e);var s=h(this,t.call(this,i));return s.tileTransform=new o.TransformStatic,s._width=r,s._height=n,s._canvasPattern=null,s.uvTransform=i.transform||new o.TextureMatrix(i),s.pluginName="tilingSprite",s.uvRespectAnchor=!1,s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},e.prototype._renderWebGL=function(t){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this))},e.prototype._renderCanvas=function(t){var e=this._texture;if(e.baseTexture.hasLoaded){var i=t.context,r=this.worldTransform,n=t.resolution,s=2===e.rotate,l=e.baseTexture,h=l.resolution,u=this.tilePosition.x/this.tileScale.x%e.orig.width*h,c=this.tilePosition.y/this.tileScale.y%e.orig.height*h;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var p=new o.CanvasRenderTarget(e.orig.width,e.orig.height,h);if(16777215!==this.tint)this.tintedTexture=a.default.getTintedTexture(this,this.tint),p.context.drawImage(this.tintedTexture,0,0);else{var f=e._frame.x*h,d=e._frame.y*h,g=e._frame.width*h,m=e._frame.height*h,v=(e.trim?e.trim.width:e.orig.width)*h,y=(e.trim?e.trim.height:e.orig.height)*h,_=(e.trim?e.trim.x:0)*h,x=(e.trim?e.trim.y:0)*h;s?(p.context.rotate(-Math.PI/2),p.context.translate(-y,0),p.context.drawImage(l.source,f,d,g,m,-x,_,y,v)):p.context.drawImage(l.source,f,d,g,m,_,x,v,y)}this.cachedTint=this.tint,this._canvasPattern=p.context.createPattern(p.canvas,"repeat")}i.globalAlpha=this.worldAlpha,i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),t.setBlendMode(this.blendMode),i.fillStyle=this._canvasPattern,i.scale(this.tileScale.x/h,this.tileScale.y/h);var b=this.anchor.x*-this._width*h,T=this.anchor.y*-this._height*h;this.uvRespectAnchor?(i.translate(u,c),i.fillRect(-u+b,-c+T,this._width/this.tileScale.x*h,this._height/this.tileScale.y*h)):(i.translate(u+b,c+T),i.fillRect(-u,-c,this._width/this.tileScale.x*h,this._height/this.tileScale.y*h))}},e.prototype._calculateBounds=function(){var t=this._width*-this._anchor._x,e=this._height*-this._anchor._y,i=this._width*(1-this._anchor._x),r=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,t,e,i,r)},e.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new o.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):t.prototype.getLocalBounds.call(this,e)},e.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,u);var e=this._width,i=this._height,r=-e*this.anchor._x;if(u.x>=r&&u.x<r+e){var n=-i*this.anchor._y;if(u.y>=n&&u.y<n+i)return!0}return!1},e.prototype.destroy=function(e){t.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},e.from=function(t,i,r){return new e(o.Texture.from(t),i,r)},e.fromFrame=function(t,i,r){var n=o.utils.TextureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache '+this);return new e(n,i,r)},e.fromImage=function(t,i,r,n,s){return new e(o.Texture.fromImage(t,n,s),i,r)},n(e,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),e}(o.Sprite);i.default=c},{"../core":65,"../core/sprites/canvas/CanvasTinter":104}],138:[function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),n=a(t("../core/textures/Texture")),o=a(t("../core/textures/BaseTexture")),s=t("../core/utils");function a(t){return t&&t.__esModule?t:{default:t}}var l=r.DisplayObject,h=new r.Matrix;l.prototype._cacheAsBitmap=!1,l.prototype._cacheData=!1;var u=function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(l.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(t){if(this._cacheAsBitmap!==t){this._cacheAsBitmap=t;var e=void 0;t?(this._cacheData||(this._cacheData=new u),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),l.prototype._renderCachedWebGL=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},l.prototype._initCachedDisplayObject=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,t.currentRenderer.flush();var i=this.getLocalBounds().clone();if(this._filters&&this._filters.length){var a=this._filters[0].padding;i.pad(a)}i.ceil(r.settings.RESOLUTION);var l=t._activeRenderTarget,u=t.filterManager.filterStack,c=r.RenderTexture.create(i.width,i.height),p="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=p,o.default.addToCache(c.baseTexture,p),n.default.addToCache(c,p);var f=h;f.tx=-i.x,f.ty=-i.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,t.render(this,c,!0,f,!0),t.bindRenderTarget(l),t.filterManager.filterStack=u,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var d=new r.Sprite(c);d.transform.worldTransform=this.transform.worldTransform,d.anchor.x=-i.x/i.width,d.anchor.y=-i.y/i.height,d.alpha=e,d._bounds=this._bounds,this._cacheData.sprite=d,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=d.containsPoint.bind(d)}},l.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))},l.prototype._initCachedDisplayObjectCanvas=function(t){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),i=this.alpha;this.alpha=1;var a=t.context;e.ceil(r.settings.RESOLUTION);var l=r.RenderTexture.create(e.width,e.height),u="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=u,o.default.addToCache(l.baseTexture,u),n.default.addToCache(l,u);var c=h;this.transform.localTransform.copy(c),c.invert(),c.tx-=e.x,c.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,l,!0,c,!1),t.context=a,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null;var p=new r.Sprite(l);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-e.x/e.width,p.anchor.y=-e.y/e.height,p.alpha=i,p._bounds=this._bounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},l.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._lastBoundsID=this._boundsID},l.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},l.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),n.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},l.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":125}],139:[function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core"));r.DisplayObject.prototype.name=null,r.Container.prototype.getChildByName=function(t){for(var e=0;e<this.children.length;e++)if(this.children[e].name===t)return this.children[e];return null}},{"../core":65}],140:[function(t,e,i){"use strict";var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core"));r.DisplayObject.prototype.getGlobalPosition=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new r.Point,e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,t,e):(t.x=this.position.x,t.y=this.position.y),t}},{"../core":65}],141:[function(t,e,i){"use strict";i.__esModule=!0,i.BitmapText=i.TilingSpriteRenderer=i.TilingSprite=i.AnimatedSprite=void 0;var r=t("./AnimatedSprite");Object.defineProperty(i,"AnimatedSprite",{enumerable:!0,get:function(){return a(r).default}});var n=t("./TilingSprite");Object.defineProperty(i,"TilingSprite",{enumerable:!0,get:function(){return a(n).default}});var o=t("./webgl/TilingSpriteRenderer");Object.defineProperty(i,"TilingSpriteRenderer",{enumerable:!0,get:function(){return a(o).default}});var s=t("./BitmapText");function a(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"BitmapText",{enumerable:!0,get:function(){return a(s).default}}),t("./cacheAsBitmap"),t("./getChildByName"),t("./getGlobalPosition")},{"./AnimatedSprite":135,"./BitmapText":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),n=t("../../core/const");t("path");var o=new r.Matrix,s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.shader=null,r.simpleShader=null,r.quad=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new r.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(t){var e=this.renderer,i=this.quad;e.bindVao(i.vao);var s=i.vertices;s[0]=s[6]=t._width*-t.anchor.x,s[1]=s[3]=t._height*-t.anchor.y,s[2]=s[4]=t._width*(1-t.anchor.x),s[5]=s[7]=t._height*(1-t.anchor.y),t.uvRespectAnchor&&((s=i.uvs)[0]=s[6]=-t.anchor.x,s[1]=s[3]=-t.anchor.y,s[2]=s[4]=1-t.anchor.x,s[5]=s[7]=1-t.anchor.y),i.upload();var a=t._texture,l=a.baseTexture,h=t.tileTransform.localTransform,u=t.uvTransform,c=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;c&&(l._glTextures[e.CONTEXT_UID]?c=l.wrapMode!==n.WRAP_MODES.CLAMP:l.wrapMode===n.WRAP_MODES.CLAMP&&(l.wrapMode=n.WRAP_MODES.REPEAT));var p=c?this.simpleShader:this.shader;e.bindShader(p);var f=a.width,d=a.height,g=t._width,m=t._height;o.set(h.a*f/g,h.b*f/m,h.c*d/g,h.d*d/m,h.tx/g,h.ty/m),o.invert(),c?o.prepend(u.mapCoord):(p.uniforms.uMapCoord=u.mapCoord.toArray(!0),p.uniforms.uClampFrame=u.uClampFrame,p.uniforms.uClampOffset=u.uClampOffset),p.uniforms.uTransform=o.toArray(!0),p.uniforms.uColor=r.utils.premultiplyTintToRgba(t.tint,t.worldAlpha,p.uniforms.uColor,l.premultipliedAlpha),p.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),p.uniforms.uSampler=e.bindTexture(a),e.setBlendMode(r.utils.correctBlendMode(t.blendMode,l.premultipliedAlpha)),i.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(r.ObjectRenderer);i.default=s,r.WebGLRenderer.registerPlugin("tilingSprite",s)},{"../../core":65,"../../core/const":46,path:8}],143:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core"));function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}t("path");var a=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;o(this,e);var r=s(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float uAlpha;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;\n}\n"));return r.alpha=i,r.glShaderKey="alpha",r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(n.Filter);i.default=a},{"../../core":65,path:8}],144:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=a(t("./BlurXFilter")),s=a(t("./BlurYFilter"));function a(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i,r,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return h.blurXFilter=new o.default(i,r,a,l),h.blurYFilter=new s.default(i,r,a,l),h.padding=0,h.resolution=a||n.settings.RESOLUTION,h.quality=r||4,h.blur=i||8,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){var r=t.getRenderTarget(!0);this.blurXFilter.apply(t,e,r,!0),this.blurYFilter.apply(t,r,i,!1),t.returnRenderTarget(r)},r(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(n.Filter);i.default=l},{"../../core":65,"./BlurXFilter":145,"./BlurYFilter":146}],145:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=l(t("./generateBlurVertSource")),s=l(t("./generateBlurFragSource")),a=l(t("./getMaxBlurKernelSize"));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,r,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l=l||5;var h=(0,o.default)(l,!0),u=(0,s.default)(l),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,h,u));return c.resolution=a||n.settings.RESOLUTION,c._quality=0,c.quality=r||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,r){if(this.firstRun){var n=t.renderer.gl,l=(0,a.default)(n);this.vertexSrc=(0,o.default)(l,!0),this.fragmentSrc=(0,s.default)(l),this.firstRun=!1}if(this.uniforms.strength=1/i.size.width*(i.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{for(var h=t.getRenderTarget(!0),u=e,c=h,p=0;p<this.passes-1;p++){t.applyFilter(this,u,c,!0);var f=c;c=u,u=f}t.applyFilter(this,u,i,r),t.returnRenderTarget(h)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(n.Filter);i.default=h},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],146:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=l(t("./generateBlurVertSource")),s=l(t("./generateBlurFragSource")),a=l(t("./getMaxBlurKernelSize"));function l(t){return t&&t.__esModule?t:{default:t}}var h=function(t){function e(i,r,a,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),l=l||5;var h=(0,o.default)(l,!1),u=(0,s.default)(l),c=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,h,u));return c.resolution=a||n.settings.RESOLUTION,c._quality=0,c.quality=r||4,c.strength=i||8,c.firstRun=!0,c}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i,r){if(this.firstRun){var n=t.renderer.gl,l=(0,a.default)(n);this.vertexSrc=(0,o.default)(l,!1),this.fragmentSrc=(0,s.default)(l),this.firstRun=!1}if(this.uniforms.strength=1/i.size.height*(i.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)t.applyFilter(this,e,i,r);else{for(var h=t.getRenderTarget(!0),u=e,c=h,p=0;p<this.passes-1;p++){t.applyFilter(this,u,c,!0);var f=c;c=u,u=f}t.applyFilter(this,u,i,r),t.returnRenderTarget(h)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(n.Filter);i.default=h},{"../../core":65,"./generateBlurFragSource":147,"./generateBlurVertSource":148,"./getMaxBlurKernelSize":149}],147:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){for(var e=r[t],i=e.length,o=n,s="",a=void 0,l=0;l<t;l++){var h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",l);a=l,l>=i&&(a=t-l-1),h=h.replace("%value%",e[a]),s+=h,s+="\n"}return o=(o=o.replace("%blur%",s)).replace("%size%",t)};var r={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},n=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],148:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t,e){var i=Math.ceil(t/2),n=r,o="",s=void 0;s=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var a=0;a<t;a++){var l=s.replace("%index%",a);l=l.replace("%sampleIndex%",a-(i-1)+".0"),o+=l,o+="\n"}return n=(n=n.replace("%blur%",o)).replace("%size%",t)};var r=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],149:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(t){for(var e=t.getParameter(t.MAX_VARYING_VECTORS),i=15;i>e;)i-=2;return i}},{}],150:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core"));t("path");var o=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return i.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],i.alpha=1,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._loadMatrix=function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=t;e&&(this._multiply(i,this.uniforms.m,t),i=this._colorMatrix(i)),this.uniforms.m=i},e.prototype._multiply=function(t,e,i){return t[0]=e[0]*i[0]+e[1]*i[5]+e[2]*i[10]+e[3]*i[15],t[1]=e[0]*i[1]+e[1]*i[6]+e[2]*i[11]+e[3]*i[16],t[2]=e[0]*i[2]+e[1]*i[7]+e[2]*i[12]+e[3]*i[17],t[3]=e[0]*i[3]+e[1]*i[8]+e[2]*i[13]+e[3]*i[18],t[4]=e[0]*i[4]+e[1]*i[9]+e[2]*i[14]+e[3]*i[19]+e[4],t[5]=e[5]*i[0]+e[6]*i[5]+e[7]*i[10]+e[8]*i[15],t[6]=e[5]*i[1]+e[6]*i[6]+e[7]*i[11]+e[8]*i[16],t[7]=e[5]*i[2]+e[6]*i[7]+e[7]*i[12]+e[8]*i[17],t[8]=e[5]*i[3]+e[6]*i[8]+e[7]*i[13]+e[8]*i[18],t[9]=e[5]*i[4]+e[6]*i[9]+e[7]*i[14]+e[8]*i[19]+e[9],t[10]=e[10]*i[0]+e[11]*i[5]+e[12]*i[10]+e[13]*i[15],t[11]=e[10]*i[1]+e[11]*i[6]+e[12]*i[11]+e[13]*i[16],t[12]=e[10]*i[2]+e[11]*i[7]+e[12]*i[12]+e[13]*i[17],t[13]=e[10]*i[3]+e[11]*i[8]+e[12]*i[13]+e[13]*i[18],t[14]=e[10]*i[4]+e[11]*i[9]+e[12]*i[14]+e[13]*i[19]+e[14],t[15]=e[15]*i[0]+e[16]*i[5]+e[17]*i[10]+e[18]*i[15],t[16]=e[15]*i[1]+e[16]*i[6]+e[17]*i[11]+e[18]*i[16],t[17]=e[15]*i[2]+e[16]*i[7]+e[17]*i[12]+e[18]*i[17],t[18]=e[15]*i[3]+e[16]*i[8]+e[17]*i[13]+e[18]*i[18],t[19]=e[15]*i[4]+e[16]*i[9]+e[17]*i[14]+e[18]*i[19]+e[19],t},e.prototype._colorMatrix=function(t){var e=new Float32Array(t);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(t,e){var i=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.greyscale=function(t,e){var i=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(t,e){t=(t||0)/180*Math.PI;var i=Math.cos(t),r=Math.sin(t),n=1/3,o=(0,Math.sqrt)(n),s=[i+(1-i)*n,n*(1-i)-o*r,n*(1-i)+o*r,0,0,n*(1-i)+o*r,i+n*(1-i),n*(1-i)-o*r,0,0,n*(1-i)-o*r,n*(1-i)+o*r,i+n*(1-i),0,0,0,0,0,1,0];this._loadMatrix(s,e)},e.prototype.contrast=function(t,e){var i=(t||0)+1,r=-.5*(i-1),n=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.saturate=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],i=2*t/3+1,r=-.5*(i-1),n=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(n,e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(t,e,i,r,n){var o=((i=i||16770432)>>16&255)/255,s=(i>>8&255)/255,a=(255&i)/255,l=((r=r||3375104)>>16&255)/255,h=(r>>8&255)/255,u=(255&r)/255,c=[.3,.59,.11,0,0,o,s,a,t=t||.2,0,l,h,u,e=e||.15,0,o-l,s-h,a-u,0,0];this._loadMatrix(c,n)},e.prototype.night=function(t,e){var i=[-2*(t=t||.1),-t,0,0,0,-t,0,t,0,0,0,t,2*t,0,0,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.predator=function(t,e){var i=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(i,e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},r(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(n.Filter);i.default=o,o.prototype.grayscale=o.prototype.greyscale},{"../../core":65,path:8}],151:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core"));t("path");var o=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var o=new n.Matrix;i.renderable=!1;var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n  vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n  map -= 0.5;\n  map.xy *= scale / filterArea.xy;\n\n  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return s.maskSprite=i,s.maskMatrix=o,s.uniforms.mapSampler=i._texture,s.uniforms.filterMatrix=o,s.uniforms.scale={x:1,y:1},null==r&&(r=20),s.scale=new n.Point(r,r),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.apply=function(t,e,i){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y,t.applyFilter(this,e,i)},r(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(n.Filter);i.default=o},{"../../core":65,path:8}],152:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core"));t("path");var n=function(t){function e(){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}",'varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it\'s\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n'))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(r.Filter);i.default=n},{"../../core":65,path:8}],153:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("./fxaa/FXAAFilter");Object.defineProperty(i,"FXAAFilter",{enumerable:!0,get:function(){return c(r).default}});var n=t("./noise/NoiseFilter");Object.defineProperty(i,"NoiseFilter",{enumerable:!0,get:function(){return c(n).default}});var o=t("./displacement/DisplacementFilter");Object.defineProperty(i,"DisplacementFilter",{enumerable:!0,get:function(){return c(o).default}});var s=t("./blur/BlurFilter");Object.defineProperty(i,"BlurFilter",{enumerable:!0,get:function(){return c(s).default}});var a=t("./blur/BlurXFilter");Object.defineProperty(i,"BlurXFilter",{enumerable:!0,get:function(){return c(a).default}});var l=t("./blur/BlurYFilter");Object.defineProperty(i,"BlurYFilter",{enumerable:!0,get:function(){return c(l).default}});var h=t("./colormatrix/ColorMatrixFilter");Object.defineProperty(i,"ColorMatrixFilter",{enumerable:!0,get:function(){return c(h).default}});var u=t("./alpha/AlphaFilter");function c(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"AlphaFilter",{enumerable:!0,get:function(){return c(u).default}})},{"./alpha/AlphaFilter":143,"./blur/BlurFilter":144,"./blur/BlurXFilter":145,"./blur/BlurYFilter":146,"./colormatrix/ColorMatrixFilter":150,"./displacement/DisplacementFilter":151,"./fxaa/FXAAFilter":152,"./noise/NoiseFilter":154}],154:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core"));function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function s(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}t("path");var a=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:.5,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Math.random();o(this,e);var n=s(this,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return n.noise=i,n.seed=r,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(n.Filter);i.default=a},{"../../core":65,path:8}],155:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),o=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.global=new n.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(t,e,i){return t.worldTransform.applyInverse(i||this.global,e)},t.prototype.copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=Number.isInteger(t.buttons)?t.buttons:t.which,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype.reset=function(){this.isPrimary=!1},r(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();i.default=o},{"../core":65}],156:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype.reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();i.default=r},{}],157:[function(t,e,i){"use strict";i.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),o=u(t("./InteractionData")),s=u(t("./InteractionEvent")),a=u(t("./InteractionTrackingData")),l=u(t("eventemitter3")),h=u(t("./interactiveTarget"));function u(t){return t&&t.__esModule?t:{default:t}}n.utils.mixins.delayMixin(n.DisplayObject.prototype,h.default);var c={target:null,data:{global:null}},p=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return r=r||{},a.renderer=i,a.autoPreventDefault=void 0===r.autoPreventDefault||r.autoPreventDefault,a.interactionFrequency=r.interactionFrequency||10,a.mouse=new o.default,a.mouse.identifier=1,a.mouse.global.set(-999999),a.activeInteractionData={},a.activeInteractionData[1]=a.mouse,a.interactionDataPool=[],a.eventData=new s.default,a.interactionDOMElement=null,a.moveWhenInside=!1,a.eventsAdded=!1,a.mouseOverRenderer=!1,a.supportsTouchEvents="ontouchstart"in window,a.supportsPointerEvents=!!window.PointerEvent,a.onPointerUp=a.onPointerUp.bind(a),a.processPointerUp=a.processPointerUp.bind(a),a.onPointerCancel=a.onPointerCancel.bind(a),a.processPointerCancel=a.processPointerCancel.bind(a),a.onPointerDown=a.onPointerDown.bind(a),a.processPointerDown=a.processPointerDown.bind(a),a.onPointerMove=a.onPointerMove.bind(a),a.processPointerMove=a.processPointerMove.bind(a),a.onPointerOut=a.onPointerOut.bind(a),a.processPointerOverOut=a.processPointerOverOut.bind(a),a.onPointerOver=a.onPointerOver.bind(a),a.cursorStyles={default:"inherit",pointer:"pointer"},a.currentCursorMode=null,a.cursor=null,a._tempPoint=new n.Point,a.resolution=1,a.setTargetElement(a.renderer.view,a.renderer.resolution),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.hitTest=function(t,e){return c.target=null,c.data.global=t,e||(e=this.renderer._lastObjectRendered),this.processInteractive(c,e,null,!0),c.target},e.prototype.setTargetElement=function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=t,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(n.ticker.shared.add(this.update,this,n.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(n.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(t){if(this._deltaTime+=t,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var i=this.activeInteractionData[e];if(i.originalEvent&&"touch"!==i.pointerType){var r=this.configureInteractionEventForDOMEvent(this.eventData,i.originalEvent,i);this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(t){if(t=t||"default",this.currentCursorMode!==t){this.currentCursorMode=t;var e=this.cursorStyles[t];if(e)switch(void 0===e?"undefined":r(e)){case"string":this.interactionDOMElement.style.cursor=e;break;case"function":e(t);break;case"object":Object.assign(this.interactionDOMElement.style,e)}else"string"!=typeof t||Object.prototype.hasOwnProperty.call(this.cursorStyles,t)||(this.interactionDOMElement.style.cursor=t)}},e.prototype.dispatchEvent=function(t,e,i){i.stopped||(i.currentTarget=t,i.type=e,t.emit(e,i),t[e]&&t[e](i))},e.prototype.mapPositionToPoint=function(t,e,i){var r=void 0;r=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var n=navigator.isCocoonJS?this.resolution:1/this.resolution;t.x=(e-r.left)*(this.interactionDOMElement.width/r.width)*n,t.y=(i-r.top)*(this.interactionDOMElement.height/r.height)*n},e.prototype.processInteractive=function(t,e,i,r,n){if(!e||!e.visible)return!1;var o=t.data.global,s=!1,a=n=e.interactive||n,l=!0;if(e.hitArea?(r&&(e.worldTransform.applyInverse(o,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)?s=!0:(r=!1,l=!1)),a=!1):e._mask&&r&&(e._mask.containsPoint(o)||(r=!1,l=!1)),l&&e.interactiveChildren&&e.children)for(var h=e.children,u=h.length-1;u>=0;u--){var c=h[u],p=this.processInteractive(t,c,i,r,a);if(p){if(!c.parent)continue;a=!1,p&&(t.target&&(r=!1),s=!0)}}return n&&(r&&!t.target&&!e.hitArea&&e.containsPoint&&e.containsPoint(o)&&(s=!0),e.interactive&&(s&&!t.target&&(t.target=e),i&&i(t,e,!!s))),s},e.prototype.onPointerDown=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);this.autoPreventDefault&&e[0].isNormalized&&t.preventDefault();for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);if(s.data.originalEvent=t,this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",s),"touch"===n.pointerType)this.emit("touchstart",s);else if("mouse"===n.pointerType||"pen"===n.pointerType){var a=2===n.button;this.emit(a?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(t,e,i){var r=t.data,n=t.data.identifier;if(i)if(e.trackedPointers[n]||(e.trackedPointers[n]=new a.default(n)),this.dispatchEvent(e,"pointerdown",t),"touch"===r.pointerType)this.dispatchEvent(e,"touchstart",t);else if("mouse"===r.pointerType||"pen"===r.pointerType){var o=2===r.button;o?e.trackedPointers[n].rightDown=!0:e.trackedPointers[n].leftDown=!0,this.dispatchEvent(e,o?"rightdown":"mousedown",t)}},e.prototype.onPointerComplete=function(t,e,i){for(var r=this.normalizeToPointerData(t),n=r.length,o=t.target!==this.interactionDOMElement?"outside":"",s=0;s<n;s++){var a=r[s],l=this.getInteractionDataForPointerId(a),h=this.configureInteractionEventForDOMEvent(this.eventData,a,l);if(h.data.originalEvent=t,this.processInteractive(h,this.renderer._lastObjectRendered,i,e||!o),this.emit(e?"pointercancel":"pointerup"+o,h),"mouse"===a.pointerType||"pen"===a.pointerType){var u=2===a.button;this.emit(u?"rightup"+o:"mouseup"+o,h)}else"touch"===a.pointerType&&(this.emit(e?"touchcancel":"touchend"+o,h),this.releaseInteractionDataForPointerId(a.pointerId,l))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(t,e){var i=t.data,r=t.data.identifier;void 0!==e.trackedPointers[r]&&(delete e.trackedPointers[r],this.dispatchEvent(e,"pointercancel",t),"touch"===i.pointerType&&this.dispatchEvent(e,"touchcancel",t))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(t,e,i){var r=t.data,n=t.data.identifier,o=e.trackedPointers[n],s="touch"===r.pointerType,l="mouse"===r.pointerType||"pen"===r.pointerType,h=!1;if(l){var u=2===r.button,c=a.default.FLAGS,p=u?c.RIGHT_DOWN:c.LEFT_DOWN,f=void 0!==o&&o.flags&p;i?(this.dispatchEvent(e,u?"rightup":"mouseup",t),f&&(this.dispatchEvent(e,u?"rightclick":"click",t),h=!0)):f&&this.dispatchEvent(e,u?"rightupoutside":"mouseupoutside",t),o&&(u?o.rightDown=!1:o.leftDown=!1)}i?(this.dispatchEvent(e,"pointerup",t),s&&this.dispatchEvent(e,"touchend",t),o&&(l&&!h||this.dispatchEvent(e,"pointertap",t),s&&(this.dispatchEvent(e,"tap",t),o.over=!1))):o&&(this.dispatchEvent(e,"pointerupoutside",t),s&&this.dispatchEvent(e,"touchendoutside",t)),o&&o.none&&delete e.trackedPointers[n]},e.prototype.onPointerMove=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t);"mouse"!==e[0].pointerType&&"pen"!==e[0].pointerType||(this.didMove=!0,this.cursor=null);for(var i=e.length,r=0;r<i;r++){var n=e[r],o=this.getInteractionDataForPointerId(n),s=this.configureInteractionEventForDOMEvent(this.eventData,n,o);s.data.originalEvent=t;var a="touch"!==n.pointerType||this.moveWhenInside;this.processInteractive(s,this.renderer._lastObjectRendered,this.processPointerMove,a),this.emit("pointermove",s),"touch"===n.pointerType&&this.emit("touchmove",s),"mouse"!==n.pointerType&&"pen"!==n.pointerType||this.emit("mousemove",s)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(t,e,i){var r=t.data,n="touch"===r.pointerType,o="mouse"===r.pointerType||"pen"===r.pointerType;o&&this.processPointerOverOut(t,e,i),this.moveWhenInside&&!i||(this.dispatchEvent(e,"pointermove",t),n&&this.dispatchEvent(e,"touchmove",t),o&&this.dispatchEvent(e,"mousemove",t))},e.prototype.onPointerOut=function(t){if(!this.supportsTouchEvents||"touch"!==t.pointerType){var e=this.normalizeToPointerData(t)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,this.processInteractive(r,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",r),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",r):this.releaseInteractionDataForPointerId(i.identifier)}},e.prototype.processPointerOverOut=function(t,e,i){var r=t.data,n=t.data.identifier,o="mouse"===r.pointerType||"pen"===r.pointerType,s=e.trackedPointers[n];i&&!s&&(s=e.trackedPointers[n]=new a.default(n)),void 0!==s&&(i&&this.mouseOverRenderer?(s.over||(s.over=!0,this.dispatchEvent(e,"pointerover",t),o&&this.dispatchEvent(e,"mouseover",t)),o&&null===this.cursor&&(this.cursor=e.cursor)):s.over&&(s.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),o&&this.dispatchEvent(e,"mouseout",t),s.none&&delete e.trackedPointers[n]))},e.prototype.onPointerOver=function(t){var e=this.normalizeToPointerData(t)[0],i=this.getInteractionDataForPointerId(e),r=this.configureInteractionEventForDOMEvent(this.eventData,e,i);r.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",r),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",r)},e.prototype.getInteractionDataForPointerId=function(t){var e=t.pointerId,i=void 0;return 1===e||"mouse"===t.pointerType?i=this.mouse:this.activeInteractionData[e]?i=this.activeInteractionData[e]:((i=this.interactionDataPool.pop()||new o.default).identifier=e,this.activeInteractionData[e]=i),i.copyEvent(t),i},e.prototype.releaseInteractionDataForPointerId=function(t){var e=this.activeInteractionData[t];e&&(delete this.activeInteractionData[t],e.reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(t,e,i){return t.data=i,this.mapPositionToPoint(i.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(i.global.x=i.global.x/this.resolution,i.global.y=i.global.y/this.resolution),"touch"===e.pointerType&&(e.globalX=i.global.x,e.globalY=i.global.y),i.originalEvent=e,t.reset(),t},e.prototype.normalizeToPointerData=function(t){var e=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(var i=0,r=t.changedTouches.length;i<r;i++){var n=t.changedTouches[i];void 0===n.button&&(n.button=t.touches.length?1:0),void 0===n.buttons&&(n.buttons=t.touches.length?1:0),void 0===n.isPrimary&&(n.isPrimary=1===t.touches.length&&"touchstart"===t.type),void 0===n.width&&(n.width=n.radiusX||1),void 0===n.height&&(n.height=n.radiusY||1),void 0===n.tiltX&&(n.tiltX=0),void 0===n.tiltY&&(n.tiltY=0),void 0===n.pointerType&&(n.pointerType="touch"),void 0===n.pointerId&&(n.pointerId=n.identifier||0),void 0===n.pressure&&(n.pressure=n.force||.5),void 0===n.twist&&(n.twist=0),void 0===n.tangentialPressure&&(n.tangentialPressure=0),void 0===n.layerX&&(n.layerX=n.offsetX=n.clientX),void 0===n.layerY&&(n.layerY=n.offsetY=n.clientY),n.isNormalized=!0,e.push(n)}else!(t instanceof MouseEvent)||this.supportsPointerEvents&&t instanceof window.PointerEvent||(void 0===t.isPrimary&&(t.isPrimary=!0),void 0===t.width&&(t.width=1),void 0===t.height&&(t.height=1),void 0===t.tiltX&&(t.tiltX=0),void 0===t.tiltY&&(t.tiltY=0),void 0===t.pointerType&&(t.pointerType="mouse"),void 0===t.pointerId&&(t.pointerId=1),void 0===t.pressure&&(t.pressure=.5),void 0===t.twist&&(t.twist=0),void 0===t.tangentialPressure&&(t.tangentialPressure=0),t.isNormalized=!0),e.push(t);return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(l.default);i.default=p,n.WebGLRenderer.registerPlugin("interaction",p),n.CanvasRenderer.registerPlugin("interaction",p)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._pointerId=e,this._flags=t.FLAGS.NONE}return t.prototype._doSet=function(t,e){this._flags=e?this._flags|t:this._flags&~t},r(t,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),t}();i.default=n,n.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("./InteractionData");Object.defineProperty(i,"InteractionData",{enumerable:!0,get:function(){return l(r).default}});var n=t("./InteractionManager");Object.defineProperty(i,"InteractionManager",{enumerable:!0,get:function(){return l(n).default}});var o=t("./interactiveTarget");Object.defineProperty(i,"interactiveTarget",{enumerable:!0,get:function(){return l(o).default}});var s=t("./InteractionTrackingData");Object.defineProperty(i,"InteractionTrackingData",{enumerable:!0,get:function(){return l(s).default}});var a=t("./InteractionEvent");function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"InteractionEvent",{enumerable:!0,get:function(){return l(a).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(t,e,i){"use strict";i.__esModule=!0,i.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(t,e,i){"use strict";i.__esModule=!0,i.parse=s,i.default=function(){return function(t,e){if(t.data&&t.type===n.Resource.TYPE.XML)if(0!==t.data.getElementsByTagName("page").length&&0!==t.data.getElementsByTagName("info").length&&null!==t.data.getElementsByTagName("info")[0].getAttribute("face")){var i=t.isDataUrl?"":r.dirname(t.url);t.isDataUrl&&("."===i&&(i=""),this.baseUrl&&i&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(i+="/")),(i=i.replace(this.baseUrl,""))&&"/"!==i.charAt(i.length-1)&&(i+="/");for(var o=t.data.getElementsByTagName("page"),a={},l=function(i){a[i.metadata.pageFile]=i.texture,Object.keys(a).length===o.length&&(s(t,a),e())},h=0;h<o.length;++h){var u=o[h].getAttribute("file"),c=i+u,p=!1;for(var f in this.resources){var d=this.resources[f];if(d.url===c){d.metadata.pageFile=u,d.texture?l(d):d.onAfterMiddleware.add(l),p=!0;break}}if(!p){var g={crossOrigin:t.crossOrigin,loadType:n.Resource.LOAD_TYPE.IMAGE,metadata:Object.assign({pageFile:u},t.metadata.imageMetadata),parentResource:t};this.add(c,g,l)}}}else e();else e()}};var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("path")),n=t("resource-loader"),o=t("../extras");function s(t,e){t.bitmapFont=o.BitmapText.registerFont(t.data,e)}},{"../extras":141,path:8,"resource-loader":36}],162:[function(t,e,i){"use strict";i.__esModule=!0,i.shared=i.Resource=i.textureParser=i.getResourcePath=i.spritesheetParser=i.parseBitmapFontData=i.bitmapFontParser=i.Loader=void 0;var r=t("./bitmapFontParser");Object.defineProperty(i,"bitmapFontParser",{enumerable:!0,get:function(){return h(r).default}}),Object.defineProperty(i,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var n=t("./spritesheetParser");Object.defineProperty(i,"spritesheetParser",{enumerable:!0,get:function(){return h(n).default}}),Object.defineProperty(i,"getResourcePath",{enumerable:!0,get:function(){return n.getResourcePath}});var o=t("./textureParser");Object.defineProperty(i,"textureParser",{enumerable:!0,get:function(){return h(o).default}});var s=t("resource-loader");Object.defineProperty(i,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=h(t("../core/Application")),l=h(t("./loader"));function h(t){return t&&t.__esModule?t:{default:t}}i.Loader=l.default;var u=new l.default;u.destroy=function(){},i.shared=u;var c=a.default.prototype;c._loader=null,Object.defineProperty(c,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?u:new l.default}return this._loader}}),c._parentDestroy=c.destroy,c.destroy=function(t,e){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t,e)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(t,e,i){"use strict";i.__esModule=!0;var r=h(t("resource-loader")),n=t("resource-loader/lib/middlewares/parsing/blob"),o=h(t("eventemitter3")),s=h(t("./textureParser")),a=h(t("./spritesheetParser")),l=h(t("./bitmapFontParser"));function h(t){return t&&t.__esModule?t:{default:t}}var u=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,r));o.default.call(n);for(var s=0;s<e._pixiMiddleware.length;++s)n.use(e._pixiMiddleware[s]());return n.onStart.add((function(t){return n.emit("start",t)})),n.onProgress.add((function(t,e){return n.emit("progress",t,e)})),n.onError.add((function(t,e,i){return n.emit("error",t,e,i)})),n.onLoad.add((function(t,e){return n.emit("load",t,e)})),n.onComplete.add((function(t,e){return n.emit("complete",t,e)})),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.addPixiMiddleware=function(t){e._pixiMiddleware.push(t)},e.prototype.destroy=function(){this.removeAllListeners(),this.reset()},e}(r.default);for(var c in i.default=u,o.default.prototype)u.prototype[c]=o.default.prototype[c];u._pixiMiddleware=[n.blobMiddlewareFactory,s.default,a.default,l.default];var p=r.default.Resource;p.setExtensionXhrType("fnt",p.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return function(t,e){var i=t.name+"_image";if(t.data&&t.type===n.Resource.TYPE.JSON&&t.data.frames&&!this.resources[i]){var r={crossOrigin:t.crossOrigin,metadata:t.metadata.imageMetadata,parentResource:t},o=l(t,this.baseUrl);this.add(i,o,r,(function(i){if(i.error)e(i.error);else{var r=new a.Spritesheet(i.texture.baseTexture,t.data,t.url);r.parse((function(){t.spritesheet=r,t.textures=r.textures,e()}))}}))}else e()}},i.getResourcePath=l;var r,n=t("resource-loader"),o=t("url"),s=(r=o)&&r.__esModule?r:{default:r},a=t("../core");function l(t,e){return t.isDataUrl?t.data.meta.image:s.default.resolve(t.url.replace(e,""),t.data.meta.image)}},{"../core":65,"resource-loader":36,url:38}],165:[function(t,e,i){"use strict";i.__esModule=!0,i.default=function(){return function(t,e){t.data&&t.type===n.Resource.TYPE.IMAGE&&(t.texture=s.default.fromLoader(t.data,t.url,t.name)),e()}};var r,n=t("resource-loader"),o=t("../core/textures/Texture"),s=(r=o)&&r.__esModule?r:{default:r}},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),o=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),s=t("../core/textures/Texture"),a=(r=s)&&r.__esModule?r:{default:r},l=new o.Point,h=new o.Polygon,u=function(t){function e(i,r,n,s,l){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var h=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this));return h._texture=i||a.default.EMPTY,h.uvs=n||new Float32Array([0,0,1,0,1,1,0,1]),h.vertices=r||new Float32Array([0,0,100,0,100,100,0,100]),h.indices=s||new Uint16Array([0,1,3,2]),h.dirty=0,h.indexDirty=0,h.vertexDirty=0,h.autoUpdate=!0,h.blendMode=o.BLEND_MODES.NORMAL,h.canvasPadding=o.settings.MESH_CANVAS_PADDING,h.drawMode=l||e.DRAW_MODES.TRIANGLE_MESH,h.shader=null,h.tintRgb=new Float32Array([1,1,1]),h._glDatas={},h._uvTransform=new o.TextureMatrix(h._texture),h.uploadUvTransform=!1,h.pluginName="mesh",h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this.autoUpdate&&this.vertexDirty++,this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,l);for(var i=this.vertices,r=h.points,n=this.indices,o=this.indices.length,s=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,a=0;a+2<o;a+=s){var u=2*n[a],c=2*n[a+1],p=2*n[a+2];if(r[0]=i[u],r[1]=i[u+1],r[2]=i[c],r[3]=i[c+1],r[4]=i[p],r[5]=i[p+1],h.contains(l.x,l.y))return!0}return!1},e.prototype.destroy=function(e){for(var i in this._glDatas){var r=this._glDatas[i];r.destroy?r.destroy():(r.vertexBuffer&&(r.vertexBuffer.destroy(),r.vertexBuffer=null),r.indexBuffer&&(r.indexBuffer.destroy(),r.indexBuffer=null),r.uvBuffer&&(r.uvBuffer.destroy(),r.uvBuffer=null),r.vao&&(r.vao.destroy(),r.vao=null))}this._glDatas=null,t.prototype.destroy.call(this,e)},n(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return o.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=o.utils.hex2rgb(t,this.tintRgb)}}]),e}(o.Container);i.default=u,u.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../core/textures/Texture":115}],167:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=s(t("./Plane")),o=s(t("../core/sprites/canvas/CanvasTinter"));function s(t){return t&&t.__esModule?t:{default:t}}var a=function(t){function e(i,r,n,o,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,4,4));return a._origWidth=i.orig.width,a._origHeight=i.orig.height,a._width=a._origWidth,a._height=a._origHeight,a._leftWidth=void 0!==r?r:10,a._rightWidth=void 0!==o?o:10,a._topHeight=void 0!==n?n:10,a._bottomHeight=void 0!==s?s:10,a._cachedTint=16777215,a._tintedTexture=null,a._canvasUvs=null,a.refresh(!0),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.updateHorizontalVertices=function(){var t=this.vertices,e=this._topHeight+this._bottomHeight,i=this._height>e?1:this._height/e;t[9]=t[11]=t[13]=t[15]=this._topHeight*i,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight*i,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices,e=this._leftWidth+this._rightWidth,i=this._width>e?1:this._width/e;t[2]=t[10]=t[18]=t[26]=this._leftWidth*i,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth*i,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(t){var e=t.context,i=this.worldTransform,r=t.resolution,n=16777215!==this.tint,s=this._texture;n&&this._cachedTint!==this.tint&&(this._cachedTint=this.tint,this._tintedTexture=o.default.getTintedTexture(this,this.tint));var a=n?this._tintedTexture:s.baseTexture.source;this._canvasUvs||(this._canvasUvs=[0,0,0,0,0,0,0,0]);var l=this.vertices,h=this._canvasUvs,u=n?0:s.frame.x,c=n?0:s.frame.y,p=u+s.frame.width,f=c+s.frame.height;h[0]=u,h[1]=u+this._leftWidth,h[2]=p-this._rightWidth,h[3]=p,h[4]=c,h[5]=c+this._topHeight,h[6]=f-this._bottomHeight,h[7]=f;for(var d=0;d<8;d++)h[d]*=s.baseTexture.resolution;e.globalAlpha=this.worldAlpha,t.setBlendMode(this.blendMode),t.roundPixels?e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r|0,i.ty*r|0):e.setTransform(i.a*r,i.b*r,i.c*r,i.d*r,i.tx*r,i.ty*r);for(var g=0;g<3;g++)for(var m=0;m<3;m++){var v=2*m+8*g,y=Math.max(1,h[m+1]-h[m]),_=Math.max(1,h[g+5]-h[g+4]),x=Math.max(1,l[v+10]-l[v]),b=Math.max(1,l[v+11]-l[v+1]);e.drawImage(a,h[m],h[g+4],y,_,l[v],l[v+1],x,b)}},e.prototype._refresh=function(){t.prototype._refresh.call(this);var e=this.uvs,i=this._texture;this._origWidth=i.orig.width,this._origHeight=i.orig.height;var r=1/this._origWidth,n=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=r*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-r*this._rightWidth,e[9]=e[11]=e[13]=e[15]=n*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-n*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},r(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(n.default);i.default=a},{"../core/sprites/canvas/CanvasTinter":104,"./Plane":168}],168:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("./Mesh"),o=(r=n)&&r.__esModule?r:{default:r},s=function(t){function e(i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return s._ready=!0,s.verticesX=r||10,s.verticesY=n||10,s.drawMode=o.default.DRAW_MODES.TRIANGLES,s.refresh(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){for(var t=this._texture,e=this.verticesX*this.verticesY,i=[],r=[],n=[],o=this.verticesX-1,s=this.verticesY-1,a=t.width/o,l=t.height/s,h=0;h<e;h++){var u=h%this.verticesX,c=h/this.verticesX|0;i.push(u*a,c*l),r.push(u/o,c/s)}for(var p=o*s,f=0;f<p;f++){var d=f%o,g=f/o|0,m=g*this.verticesX+d,v=g*this.verticesX+d+1,y=(g+1)*this.verticesX+d,_=(g+1)*this.verticesX+d+1;n.push(m,v,y),n.push(v,_,y)}this.vertices=new Float32Array(i),this.uvs=new Float32Array(r),this.colors=new Float32Array([]),this.indices=new Uint16Array(n),this.dirty++,this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){o.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(o.default);i.default=s},{"./Mesh":166}],169:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("./Mesh"),o=function(t){function e(i,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.points=r,n.vertices=new Float32Array(4*r.length),n.uvs=new Float32Array(4*r.length),n.colors=new Float32Array(2*r.length),n.indices=new Uint16Array(2*r.length),n.autoUpdate=!0,n.refresh(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype._refresh=function(){var t=this.points;if(!(t.length<1)&&this._texture._uvs){this.vertices.length/4!==t.length&&(this.vertices=new Float32Array(4*t.length),this.uvs=new Float32Array(4*t.length),this.colors=new Float32Array(2*t.length),this.indices=new Uint16Array(2*t.length));var e=this.uvs,i=this.indices,r=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,r[0]=1,r[1]=1,i[0]=0,i[1]=1;for(var n=t.length,o=1;o<n;o++){var s=4*o,a=o/(n-1);e[s]=a,e[s+1]=0,e[s+2]=a,e[s+3]=1,r[s=2*o]=1,r[s+1]=1,i[s=2*o]=s,i[s+1]=s+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var t=this.points;if(!(t.length<1))for(var e=t[0],i=void 0,r=0,n=0,o=this.vertices,s=t.length,a=0;a<s;a++){var l=t[a],h=4*a;n=-((i=a<t.length-1?t[a+1]:l).x-e.x),r=i.y-e.y;var u=10*(1-a/(s-1));u>1&&(u=1);var c=Math.sqrt(r*r+n*n),p=this._texture.height/2;r/=c,n/=c,r*=p,n*=p,o[h]=l.x+r,o[h+1]=l.y+n,o[h+2]=l.x-r,o[h+3]=l.y-n,e=l}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(((r=n)&&r.__esModule?r:{default:r}).default);i.default=o},{"./Mesh":166}],170:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=t("../Mesh"),s=(r=o)&&r.__esModule?r:{default:r},a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.renderer=e}return t.prototype.render=function(t){var e=this.renderer,i=e.context,r=t.worldTransform,n=e.resolution;e.roundPixels?i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n|0,r.ty*n|0):i.setTransform(r.a*n,r.b*n,r.c*n,r.d*n,r.tx*n,r.ty*n),e.context.globalAlpha=t.worldAlpha,e.setBlendMode(t.blendMode),t.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(t):this._renderTriangles(t)},t.prototype._renderTriangleMesh=function(t){for(var e=t.vertices.length/2,i=0;i<e-2;i++){var r=2*i;this._renderDrawTriangle(t,r,r+2,r+4)}},t.prototype._renderTriangles=function(t){for(var e=t.indices,i=e.length,r=0;r<i;r+=3){var n=2*e[r],o=2*e[r+1],s=2*e[r+2];this._renderDrawTriangle(t,n,o,s)}},t.prototype._renderDrawTriangle=function(t,e,i,r){var n=this.renderer.context,o=t.uvs,s=t.vertices,a=t._texture;if(a.valid){var l=a.baseTexture,h=l.source,u=l.width,c=l.height,p=void 0,f=void 0,d=void 0,g=void 0,m=void 0,v=void 0;if(t.uploadUvTransform){var y=t._uvTransform.mapCoord;p=(o[e]*y.a+o[e+1]*y.c+y.tx)*l.width,f=(o[i]*y.a+o[i+1]*y.c+y.tx)*l.width,d=(o[r]*y.a+o[r+1]*y.c+y.tx)*l.width,g=(o[e]*y.b+o[e+1]*y.d+y.ty)*l.height,m=(o[i]*y.b+o[i+1]*y.d+y.ty)*l.height,v=(o[r]*y.b+o[r+1]*y.d+y.ty)*l.height}else p=o[e]*l.width,f=o[i]*l.width,d=o[r]*l.width,g=o[e+1]*l.height,m=o[i+1]*l.height,v=o[r+1]*l.height;var _=s[e],x=s[i],b=s[r],T=s[e+1],w=s[i+1],S=s[r+1],A=t.canvasPadding/this.renderer.resolution;if(A>0){var P=A/Math.abs(t.worldTransform.a),E=A/Math.abs(t.worldTransform.d),C=(_+x+b)/3,O=(T+w+S)/3,I=_-C,M=T-O,R=Math.sqrt(I*I+M*M);_=C+I/R*(R+P),T=O+M/R*(R+E),M=w-O,x=C+(I=x-C)/(R=Math.sqrt(I*I+M*M))*(R+P),w=O+M/R*(R+E),M=S-O,b=C+(I=b-C)/(R=Math.sqrt(I*I+M*M))*(R+P),S=O+M/R*(R+E)}n.save(),n.beginPath(),n.moveTo(_,T),n.lineTo(x,w),n.lineTo(b,S),n.closePath(),n.clip();var D=p*m+g*d+f*v-m*d-g*f-p*v,k=_*m+g*b+x*v-m*b-g*x-_*v,L=p*x+_*d+f*b-x*d-_*f-p*b,N=p*m*b+g*x*d+_*f*v-_*m*d-g*f*b-p*x*v,F=T*m+g*S+w*v-m*S-g*w-T*v,B=p*w+T*d+f*S-w*d-T*f-p*S,j=p*m*S+g*w*d+T*f*v-T*m*d-g*f*S-p*w*v;n.transform(k/D,F/D,L/D,B/D,N/D,j/D),n.drawImage(h,0,0,u*l.resolution,c*l.resolution,0,0,u,c),n.restore(),this.renderer.invalidateBlendMode()}},t.prototype.renderMeshFlat=function(t){var e=this.renderer.context,i=t.vertices,r=i.length/2;e.beginPath();for(var n=1;n<r-2;++n){var o=2*n,s=i[o],a=i[o+1],l=i[o+2],h=i[o+3],u=i[o+4],c=i[o+5];e.moveTo(s,a),e.lineTo(l,h),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},t.prototype.destroy=function(){this.renderer=null},t}();i.default=a,n.CanvasRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166}],171:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("./Mesh");Object.defineProperty(i,"Mesh",{enumerable:!0,get:function(){return h(r).default}});var n=t("./webgl/MeshRenderer");Object.defineProperty(i,"MeshRenderer",{enumerable:!0,get:function(){return h(n).default}});var o=t("./canvas/CanvasMeshRenderer");Object.defineProperty(i,"CanvasMeshRenderer",{enumerable:!0,get:function(){return h(o).default}});var s=t("./Plane");Object.defineProperty(i,"Plane",{enumerable:!0,get:function(){return h(s).default}});var a=t("./NineSlicePlane");Object.defineProperty(i,"NineSlicePlane",{enumerable:!0,get:function(){return h(a).default}});var l=t("./Rope");function h(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"Rope",{enumerable:!0,get:function(){return h(l).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),n=s(t("pixi-gl-core")),o=s(t("../Mesh"));function s(t){return t&&t.__esModule?t:{default:t}}t("path");var a=r.Matrix.IDENTITY,l=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.shader=null,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new r.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(t){var e=this.renderer,i=e.gl,s=t._texture;if(s.valid){var l=t._glDatas[e.CONTEXT_UID];l||(e.bindVao(null),(l={shader:this.shader,vertexBuffer:n.default.GLBuffer.createVertexBuffer(i,t.vertices,i.STREAM_DRAW),uvBuffer:n.default.GLBuffer.createVertexBuffer(i,t.uvs,i.STREAM_DRAW),indexBuffer:n.default.GLBuffer.createIndexBuffer(i,t.indices,i.STATIC_DRAW),vao:null,dirty:t.dirty,indexDirty:t.indexDirty,vertexDirty:t.vertexDirty}).vao=new n.default.VertexArrayObject(i).addIndex(l.indexBuffer).addAttribute(l.vertexBuffer,l.shader.attributes.aVertexPosition,i.FLOAT,!1,8,0).addAttribute(l.uvBuffer,l.shader.attributes.aTextureCoord,i.FLOAT,!1,8,0),t._glDatas[e.CONTEXT_UID]=l),e.bindVao(l.vao),t.dirty!==l.dirty&&(l.dirty=t.dirty,l.uvBuffer.upload(t.uvs)),t.indexDirty!==l.indexDirty&&(l.indexDirty=t.indexDirty,l.indexBuffer.upload(t.indices)),t.vertexDirty!==l.vertexDirty&&(l.vertexDirty=t.vertexDirty,l.vertexBuffer.upload(t.vertices)),e.bindShader(l.shader),l.shader.uniforms.uSampler=e.bindTexture(s),e.state.setBlendMode(r.utils.correctBlendMode(t.blendMode,s.baseTexture.premultipliedAlpha)),l.shader.uniforms.uTransform&&(t.uploadUvTransform?l.shader.uniforms.uTransform=t._uvTransform.mapCoord.toArray(!0):l.shader.uniforms.uTransform=a.toArray(!0)),l.shader.uniforms.translationMatrix=t.worldTransform.toArray(!0),l.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,l.shader.uniforms.uColor,s.baseTexture.premultipliedAlpha);var h=t.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?i.TRIANGLE_STRIP:i.TRIANGLES;l.vao.draw(h,t.indices.length,0)}},e}(r.ObjectRenderer);i.default=l,r.WebGLRenderer.registerPlugin("mesh",l)},{"../../core":65,"../Mesh":166,path:8,"pixi-gl-core":15}],173:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,i,r){return i&&t(e.prototype,i),r&&t(e,r),e}}(),n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),o=t("../core/utils");function s(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}var l=function(t){function e(){var i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1500,r=arguments[1],o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:16384,l=arguments.length>3&&void 0!==arguments[3]&&arguments[3];s(this,e);var h=a(this,t.call(this)),u=16384;return o>u&&(o=u),o>i&&(o=i),h._properties=[!1,!0,!1,!1,!1],h._maxSize=i,h._batchSize=o,h._glBuffers={},h._bufferUpdateIDs=[],h._updateID=0,h.interactiveChildren=!1,h.blendMode=n.BLEND_MODES.NORMAL,h.autoResize=l,h.roundPixels=!0,h.baseTexture=null,h.setProperties(r),h._tint=0,h.tintRgb=new Float32Array(4),h.tint=16777215,h}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.setProperties=function(t){t&&(this._properties[0]="vertices"in t||"scale"in t?!!t.vertices||!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="tint"in t||"alpha"in t?!!t.tint||!!t.alpha:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(t){var e=this;this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",(function(){return e.onChildrenChange(0)}))),t.setObjectRenderer(t.plugins.particle),t.plugins.particle.render(this))},e.prototype.onChildrenChange=function(t){for(var e=Math.floor(t/this._batchSize);this._bufferUpdateIDs.length<e;)this._bufferUpdateIDs.push(0);this._bufferUpdateIDs[e]=++this._updateID},e.prototype.renderCanvas=function(t){if(this.visible&&!(this.worldAlpha<=0)&&this.children.length&&this.renderable){var e=t.context,i=this.worldTransform,r=!0,n=0,o=0,s=0,a=0;t.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var l=0;l<this.children.length;++l){var h=this.children[l];if(h.visible){var u=h._texture.frame;if(e.globalAlpha=this.worldAlpha*h.alpha,h.rotation%(2*Math.PI)==0)r&&(e.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution),r=!1),n=h.anchor.x*(-u.width*h.scale.x)+h.position.x+.5,o=h.anchor.y*(-u.height*h.scale.y)+h.position.y+.5,s=u.width*h.scale.x,a=u.height*h.scale.y;else{r||(r=!0),h.displayObjectUpdateTransform();var c=h.worldTransform;t.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution|0,c.ty*t.resolution|0):e.setTransform(c.a,c.b,c.c,c.d,c.tx*t.resolution,c.ty*t.resolution),n=h.anchor.x*-u.width+.5,o=h.anchor.y*-u.height+.5,s=u.width,a=u.height}var p=h._texture.baseTexture.resolution;e.drawImage(h._texture.baseTexture.source,u.x*p,u.y*p,u.width*p,u.height*p,n*t.resolution,o*t.resolution,s*t.resolution,a*t.resolution)}}}},e.prototype.destroy=function(e){if(t.prototype.destroy.call(this,e),this._buffers)for(var i=0;i<this._buffers.length;++i)this._buffers[i].destroy();this._properties=null,this._buffers=null,this._bufferUpdateIDs=null},r(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,o.hex2rgb)(t,this.tintRgb)}}]),e}(n.Container);i.default=l},{"../core":65,"../core/utils":125}],174:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("./ParticleContainer");Object.defineProperty(i,"ParticleContainer",{enumerable:!0,get:function(){return o(r).default}});var n=t("./webgl/ParticleRenderer");function o(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"ParticleRenderer",{enumerable:!0,get:function(){return o(n).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(t,e,i){"use strict";i.__esModule=!0;var r=o(t("pixi-gl-core")),n=o(t("../../core/utils/createIndicesForQuads"));function o(t){return t&&t.__esModule?t:{default:t}}var s=function(){function t(e,i,r,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(var o=0;o<i.length;++o){var s=i[o];s={attribute:s.attribute,size:s.size,uploadFunction:s.uploadFunction,unsignedByte:s.unsignedByte,offset:s.offset},r[o]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}return t.prototype.initBuffers=function(){var t=this.gl,e=0;this.indices=(0,n.default)(this.size),this.indexBuffer=r.default.GLBuffer.createIndexBuffer(t,this.indices,t.STATIC_DRAW),this.dynamicStride=0;for(var i=0;i<this.dynamicProperties.length;++i){var o=this.dynamicProperties[i];o.offset=e,e+=o.size,this.dynamicStride+=o.size}var s=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(s),this.dynamicDataUint32=new Uint32Array(s),this.dynamicBuffer=r.default.GLBuffer.createVertexBuffer(t,s,t.STREAM_DRAW);var a=0;this.staticStride=0;for(var l=0;l<this.staticProperties.length;++l){var h=this.staticProperties[l];h.offset=a,a+=h.size,this.staticStride+=h.size}var u=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(u),this.staticDataUint32=new Uint32Array(u),this.staticBuffer=r.default.GLBuffer.createVertexBuffer(t,u,t.STATIC_DRAW),this.vao=new r.default.VertexArrayObject(t).addIndex(this.indexBuffer);for(var c=0;c<this.dynamicProperties.length;++c){var p=this.dynamicProperties[c];p.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,p.attribute,t.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*p.offset):this.vao.addAttribute(this.dynamicBuffer,p.attribute,t.FLOAT,!1,4*this.dynamicStride,4*p.offset)}for(var f=0;f<this.staticProperties.length;++f){var d=this.staticProperties[f];d.unsignedByte?this.vao.addAttribute(this.staticBuffer,d.attribute,t.UNSIGNED_BYTE,!0,4*this.staticStride,4*d.offset):this.vao.addAttribute(this.staticBuffer,d.attribute,t.FLOAT,!1,4*this.staticStride,4*d.offset)}},t.prototype.uploadDynamic=function(t,e,i){for(var r=0;r<this.dynamicProperties.length;r++){var n=this.dynamicProperties[r];n.uploadFunction(t,e,i,n.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,n.offset)}this.dynamicBuffer.upload()},t.prototype.uploadStatic=function(t,e,i){for(var r=0;r<this.staticProperties.length;r++){var n=this.staticProperties[r];n.uploadFunction(t,e,i,n.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,n.offset)}this.staticBuffer.upload()},t.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicBuffer.destroy(),this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer.destroy(),this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null},t}();i.default=s},{"../../core/utils/createIndicesForQuads":123,"pixi-gl-core":15}],176:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),n=a(t("./ParticleShader")),o=a(t("./ParticleBuffer")),s=t("../../core/utils");function a(t){return t&&t.__esModule?t:{default:t}}var l=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new r.Matrix,n.CONTEXT_UID=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new n.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(t){var e=t.children,i=t._maxSize,n=t._batchSize,o=this.renderer,s=e.length;if(0!==s){s>i&&(s=i);var a=t._glBuffers[o.CONTEXT_UID];a||(a=t._glBuffers[o.CONTEXT_UID]=this.generateBuffers(t));var l=e[0]._texture.baseTexture;this.renderer.setBlendMode(r.utils.correctBlendMode(t.blendMode,l.premultipliedAlpha));var h=o.gl,u=t.worldTransform.copy(this.tempMatrix);u.prepend(o._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=r.utils.premultiplyRgba(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,l.premultipliedAlpha),this.shader.uniforms.uSampler=o.bindTexture(l);for(var c=!1,p=0,f=0;p<s;p+=n,f+=1){var d=s-p;if(d>n&&(d=n),f>=a.length){if(!t.autoResize)break;a.push(this._generateOneMoreBuffer(t))}var g=a[f];g.uploadDynamic(e,p,d);var m=t._bufferUpdateIDs[f]||0;(c=c||g._updateID<m)&&(g._updateID=t._updateID,g.uploadStatic(e,p,d)),o.bindVao(g.vao),g.vao.draw(h.TRIANGLES,6*d)}}},e.prototype.generateBuffers=function(t){for(var e=this.renderer.gl,i=[],r=t._maxSize,n=t._batchSize,s=t._properties,a=0;a<r;a+=n)i.push(new o.default(e,this.properties,s,n));return i},e.prototype._generateOneMoreBuffer=function(t){var e=this.renderer.gl,i=t._batchSize,r=t._properties;return new o.default(e,this.properties,r,i)},e.prototype.uploadVertices=function(t,e,i,r,n,o){for(var s=0,a=0,l=0,h=0,u=0;u<i;++u){var c=t[e+u],p=c._texture,f=c.scale.x,d=c.scale.y,g=p.trim,m=p.orig;g?(s=(a=g.x-c.anchor.x*m.width)+g.width,l=(h=g.y-c.anchor.y*m.height)+g.height):(s=m.width*(1-c.anchor.x),a=m.width*-c.anchor.x,l=m.height*(1-c.anchor.y),h=m.height*-c.anchor.y),r[o]=a*f,r[o+1]=h*d,r[o+n]=s*f,r[o+n+1]=h*d,r[o+2*n]=s*f,r[o+2*n+1]=l*d,r[o+3*n]=a*f,r[o+3*n+1]=l*d,o+=4*n}},e.prototype.uploadPosition=function(t,e,i,r,n,o){for(var s=0;s<i;s++){var a=t[e+s].position;r[o]=a.x,r[o+1]=a.y,r[o+n]=a.x,r[o+n+1]=a.y,r[o+2*n]=a.x,r[o+2*n+1]=a.y,r[o+3*n]=a.x,r[o+3*n+1]=a.y,o+=4*n}},e.prototype.uploadRotation=function(t,e,i,r,n,o){for(var s=0;s<i;s++){var a=t[e+s].rotation;r[o]=a,r[o+n]=a,r[o+2*n]=a,r[o+3*n]=a,o+=4*n}},e.prototype.uploadUvs=function(t,e,i,r,n,o){for(var s=0;s<i;++s){var a=t[e+s]._texture._uvs;a?(r[o]=a.x0,r[o+1]=a.y0,r[o+n]=a.x1,r[o+n+1]=a.y1,r[o+2*n]=a.x2,r[o+2*n+1]=a.y2,r[o+3*n]=a.x3,r[o+3*n+1]=a.y3,o+=4*n):(r[o]=0,r[o+1]=0,r[o+n]=0,r[o+n+1]=0,r[o+2*n]=0,r[o+2*n+1]=0,r[o+3*n]=0,r[o+3*n+1]=0,o+=4*n)}},e.prototype.uploadTint=function(t,e,i,r,n,o){for(var a=0;a<i;++a){var l=t[e+a],h=l._texture.baseTexture.premultipliedAlpha,u=l.alpha,c=u<1&&h?(0,s.premultiplyTint)(l._tintRGB,u):l._tintRGB+(255*u<<24);r[o]=c,r[o+n]=c,r[o+2*n]=c,r[o+3*n]=c,o+=4*n}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),t.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(r.ObjectRenderer);i.default=l,r.WebGLRenderer.registerPlugin("particle",l)},{"../../core":65,"../../core/utils":125,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=t("../../core/Shader"),o=function(t){function e(i){return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   vec2 v = vec2(x, y);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  gl_FragColor = color;","}"].join("\n")))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=n)&&r.__esModule?r:{default:r}).default);i.default=o},{"../../core/Shader":44}],178:[function(t,e,i){"use strict";Math.sign||(Math.sign=function(t){return 0===(t=Number(t))||isNaN(t)?t:t>0?1:-1})},{}],179:[function(t,e,i){"use strict";Number.isInteger||(Number.isInteger=function(t){return"number"==typeof t&&isFinite(t)&&Math.floor(t)===t})},{}],180:[function(t,e,i){"use strict";var r,n=t("object-assign"),o=(r=n)&&r.__esModule?r:{default:r};Object.assign||(Object.assign=o.default)},{"object-assign":6}],181:[function(t,e,i){"use strict";t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),t("./Number.isInteger"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Number.isInteger":179,"./Object.assign":180,"./requestAnimationFrame":182}],182:[function(t,i,r){(function(t){"use strict";if(Date.now&&Date.prototype.getTime||(Date.now=function(){return(new Date).getTime()}),!t.performance||!t.performance.now){var e=Date.now();t.performance||(t.performance={}),t.performance.now=function(){return Date.now()-e}}for(var i=Date.now(),r=["ms","moz","webkit","o"],n=0;n<r.length&&!t.requestAnimationFrame;++n){var o=r[n];t.requestAnimationFrame=t[o+"RequestAnimationFrame"],t.cancelAnimationFrame=t[o+"CancelAnimationFrame"]||t[o+"CancelRequestAnimationFrame"]}t.requestAnimationFrame||(t.requestAnimationFrame=function(t){if("function"!=typeof t)throw new TypeError(t+"is not a function");var e=Date.now(),r=16+i-e;return r<0&&(r=0),i=e,setTimeout((function(){i=Date.now(),t(performance.now())}),r)}),t.cancelAnimationFrame||(t.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],183:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../core")),o=t("./limiters/CountLimiter"),s=(r=o)&&r.__esModule?r:{default:r},a=n.ticker.shared;n.settings.UPLOADS_PER_FRAME=4;var l=function(){function t(e){var i=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.limiter=new s.default(n.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){i.queue&&i.prepareItems()},this.registerFindHook(d),this.registerFindHook(g),this.registerFindHook(h),this.registerFindHook(u),this.registerFindHook(c),this.registerUploadHook(p),this.registerUploadHook(f)}return t.prototype.upload=function(t,e){"function"==typeof t&&(e=t,t=null),t&&this.add(t),this.queue.length?(e&&this.completes.push(e),this.ticking||(this.ticking=!0,a.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY))):e&&e()},t.prototype.tick=function(){setTimeout(this.delayedTick,0)},t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var t=this.queue[0],e=!1;if(t&&!t._destroyed)for(var i=0,r=this.uploadHooks.length;i<r;i++)if(this.uploadHooks[i](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)a.addOnce(this.tick,this,n.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var o=this.completes.slice(0);this.completes.length=0;for(var s=0,l=o.length;s<l;s++)o[s]()}},t.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},t.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},t.prototype.add=function(t){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](t,this.queue);e++);if(t instanceof n.Container)for(var r=t.children.length-1;r>=0;r--)this.add(t.children[r]);return this},t.prototype.destroy=function(){this.ticking&&a.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},t}();function h(t,e){var i=!1;if(t&&t._textures&&t._textures.length)for(var r=0;r<t._textures.length;r++)if(t._textures[r]instanceof n.Texture){var o=t._textures[r].baseTexture;-1===e.indexOf(o)&&(e.push(o),i=!0)}return i}function u(t,e){return t instanceof n.BaseTexture&&(-1===e.indexOf(t)&&e.push(t),!0)}function c(t,e){if(t._texture&&t._texture instanceof n.Texture){var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function p(t,e){return e instanceof n.Text&&(e.updateText(!0),!0)}function f(t,e){if(e instanceof n.TextStyle){var i=e.toFontString();return n.TextMetrics.measureFont(i),!0}return!1}function d(t,e){if(t instanceof n.Text){-1===e.indexOf(t.style)&&e.push(t.style),-1===e.indexOf(t)&&e.push(t);var i=t._texture.baseTexture;return-1===e.indexOf(i)&&e.push(i),!0}return!1}function g(t,e){return t instanceof n.TextStyle&&(-1===e.indexOf(t)&&e.push(t),!0)}i.default=l},{"../core":65,"./limiters/CountLimiter":186}],184:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=t("../BasePrepare"),s=(r=o)&&r.__esModule?r:{default:r},a=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.uploadHookHelper=r,r.canvas=document.createElement("canvas"),r.canvas.width=16,r.canvas.height=16,r.ctx=r.canvas.getContext("2d"),r.registerUploadHook(l),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(s.default);function l(t,e){if(e instanceof n.BaseTexture){var i=e.source,r=0===i.width?t.canvas.width:Math.min(t.canvas.width,i.width),o=0===i.height?t.canvas.height:Math.min(t.canvas.height,i.height);return t.ctx.drawImage(i,0,0,r,o,0,0,t.canvas.width,t.canvas.height),!0}return!1}i.default=a,n.CanvasRenderer.registerPlugin("prepare",a)},{"../../core":65,"../BasePrepare":183}],185:[function(t,e,i){"use strict";i.__esModule=!0;var r=t("./webgl/WebGLPrepare");Object.defineProperty(i,"webgl",{enumerable:!0,get:function(){return l(r).default}});var n=t("./canvas/CanvasPrepare");Object.defineProperty(i,"canvas",{enumerable:!0,get:function(){return l(n).default}});var o=t("./BasePrepare");Object.defineProperty(i,"BasePrepare",{enumerable:!0,get:function(){return l(o).default}});var s=t("./limiters/CountLimiter");Object.defineProperty(i,"CountLimiter",{enumerable:!0,get:function(){return l(s).default}});var a=t("./limiters/TimeLimiter");function l(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(i,"TimeLimiter",{enumerable:!0,get:function(){return l(a).default}})},{"./BasePrepare":183,"./canvas/CanvasPrepare":184,"./limiters/CountLimiter":186,"./limiters/TimeLimiter":187,"./webgl/WebGLPrepare":188}],186:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxItemsPerFrame=e,this.itemsLeft=0}return t.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},t.prototype.allowedToUpload=function(){return this.itemsLeft-- >0},t}();i.default=r},{}],187:[function(t,e,i){"use strict";i.__esModule=!0;var r=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.maxMilliseconds=e,this.frameStart=0}return t.prototype.beginFrame=function(){this.frameStart=Date.now()},t.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},t}();i.default=r},{}],188:[function(t,e,i){"use strict";i.__esModule=!0;var r,n=function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}(t("../../core")),o=t("../BasePrepare"),s=function(t){function e(i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,t.call(this,i));return r.uploadHookHelper=r.renderer,r.registerFindHook(h),r.registerUploadHook(a),r.registerUploadHook(l),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(((r=o)&&r.__esModule?r:{default:r}).default);function a(t,e){return e instanceof n.BaseTexture&&(e._glTextures[t.CONTEXT_UID]||t.textureManager.updateTexture(e),!0)}function l(t,e){return e instanceof n.Graphics&&((e.dirty||e.clearDirty||!e._webGL[t.plugins.graphics.CONTEXT_UID])&&t.plugins.graphics.updateGraphics(e),!0)}function h(t,e){return t instanceof n.Graphics&&(e.push(t),!0)}i.default=s,n.WebGLRenderer.registerPlugin("prepare",s)},{"../../core":65,"../BasePrepare":183}],189:[function(t,i,r){(function(e){"use strict";r.__esModule=!0,r.loader=r.prepare=r.particles=r.mesh=r.loaders=r.interaction=r.filters=r.extras=r.extract=r.accessibility=void 0;var i=t("./polyfill");Object.keys(i).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return i[t]}})}));var n=t("./core");Object.keys(n).forEach((function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(r,t,{enumerable:!0,get:function(){return n[t]}})}));var o,s=t("./deprecation"),a=(o=s)&&o.__esModule?o:{default:o},l=v(t("./accessibility")),h=v(t("./extract")),u=v(t("./extras")),c=v(t("./filters")),p=v(t("./interaction")),f=v(t("./loaders")),d=v(t("./mesh")),g=v(t("./particles")),m=v(t("./prepare"));function v(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e.default=t,e}n.utils.mixins.performMixins();var y=f.shared||null;r.accessibility=l,r.extract=h,r.extras=u,r.filters=c,r.interaction=p,r.loaders=f,r.mesh=d,r.particles=g,r.prepare=m,r.loader=y,"function"==typeof a.default&&(0,a.default)(r),e.PIXI=r}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./accessibility":42,"./core":65,"./deprecation":131,"./extract":133,"./extras":141,"./filters":153,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":181,"./prepare":185}]},{},[189])(189)}).call(this,i(3))},function(t,e,i){(function(t){!function(e,i){"use strict";e.SAT=function(){var e={};function i(t,e){this.x=t||0,this.y=e||0}function r(t,e){this.pos=t||new i,this.r=e||0,this.offset=new i}function n(t,e){this.pos=t||new i,this.angle=0,this.scale=new i,this.offset=new i,this.centroid=new i,this.setPoints(e||[])}function o(t,e,r){this.pos=t||new i,this.w=e||0,this.h=r||0}function s(){this.a=null,this.b=null,this.overlapN=new i,this.overlapV=new i,this.clear()}e.Vector=i,e.V=i,i.prototype.set=function(t,e){return this.x=t,this.y=e,this},i.prototype.copy=i.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},i.prototype.clone=i.prototype.clone=function(){return new i(this.x,this.y)},i.prototype.perp=i.prototype.perp=function(){var t=this.x;return this.x=this.y,this.y=-t,this},i.prototype.rotate=i.prototype.rotate=function(t,e){void 0===e&&(e=new i);var r=this.x,n=this.y,o=Math.cos(t),s=Math.sin(t);return this.x=(r-e.x)*o-(n-e.y)*s+e.x,this.y=(r-e.x)*s+(n-e.y)*o+e.y,this},i.prototype.reverse=i.prototype.reverse=function(){return this.x=-this.x,this.y=-this.y,this},i.prototype.normalize=i.prototype.normalize=function(){var t=this.len();return t>0&&(this.x=this.x/t,this.y=this.y/t),this},i.prototype.add=i.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},i.prototype.sub=i.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},i.prototype.scale=i.prototype.scale=function(t,e){return this.x*=t,this.y*=void 0!==e?e:t,this},i.prototype.project=i.prototype.project=function(t){var e=this.dot(t)/t.len2();return this.x=e*t.x,this.y=e*t.y,this},i.prototype.projectN=i.prototype.projectN=function(t){var e=this.dot(t);return this.x=e*t.x,this.y=e*t.y,this},i.prototype.reflect=i.prototype.reflect=function(t){var e=this.x,i=this.y;return this.project(t).scale(2),this.x-=e,this.y-=i,this},i.prototype.reflectN=i.prototype.reflectN=function(t){var e=this.x,i=this.y;return this.projectN(t).scale(2),this.x-=e,this.y-=i,this},i.prototype.dot=i.prototype.dot=function(t){return this.x*t.x+this.y*t.y},i.prototype.len2=i.prototype.len2=function(){return this.dot(this)},i.prototype.len=i.prototype.len=function(){return Math.sqrt(this.len2())},i.prototype.moveTowards=function(t,e){var i=t.clone().sub(this);return this.add(i.scale(e.x,e.y))},e.Circle=r,r.prototype.getAABB=r.prototype.getAABB=function(){var t=this.r;return new o(this.pos.clone().add(this.offset).sub(new i(t,t)),2*t,2*t).toPolygon()},r.prototype.setOffset=r.prototype.setOffset=function(t){return this.offset=t,this},e.Polygon=n,n.prototype.setPoints=n.prototype.setPoints=function(t){if(!this.points||this.points.length!==t.length){var e,r=this.calcPoints=[],n=this.edges=[],o=this.normals=[];for(e=0;e<t.length;e++){var s=t[e],a=e<t.length-1?t[e+1]:t[0];s===a||s.x!==a.x||s.y!==a.y?(r.push(new i),n.push(new i),o.push(new i)):(t.splice(e,1),e-=1)}}return this.points=t,this},n.prototype.setAngle=n.prototype.setAngle=function(t){return this.angle=t,this},n.prototype.setScale=function(t){return this.scale=t,this},n.prototype.setOffset=n.prototype.setOffset=function(t){return this.offset=t,this},n.prototype.setCentroid=function(t){return this.centroid=t,this},n.prototype.rotate=n.prototype.rotate=function(t){for(var e=this.points,i=e.length,r=0;r<i;r++)e[r].rotate(t,this.centroid);return this},n.prototype.translate=n.prototype.translate=function(t,e){for(var i=this.points,r=i.length,n=0;n<r;n++)i[n].x+=t,i[n].y+=e;return this},n.prototype._recalc=function(){var t,e=this.calcPoints,i=this.edges,r=this.normals,n=this.points,o=this.offset,s=this.angle,a=this.centroid,l=n.length;for(t=0;t<l;t++){e[t].copy(n[t]).add(o).rotate(s,a).moveTowards(a,this.scale)}for(t=0;t<l;t++){var h=e[t],u=t<l-1?e[t+1]:e[0],c=i[t].copy(u).sub(h);r[t].copy(c).perp().normalize()}return this},n.prototype.getAABB=n.prototype.getAABB=function(){for(var t=this.calcPoints,e=t.length,r=t[0].x,n=t[0].y,s=t[0].x,a=t[0].y,l=1;l<e;l++){var h=t[l];h.x<r?r=h.x:h.x>s&&(s=h.x),h.y<n?n=h.y:h.y>a&&(a=h.y)}return new o(this.pos.clone().add(new i(r,n)),s-r,a-n).toPolygon()},n.prototype.getCentroid=n.prototype.getCentroid=function(){for(var t=this.calcPoints,e=t.length,r=0,n=0,o=0,s=0;s<e;s++){var a=t[s],l=s===e-1?t[0]:t[s+1],h=a.x*l.y-l.x*a.y;r+=(a.x+l.x)*h,n+=(a.y+l.y)*h,o+=h}return new i(r/=o*=3,n/=o)},e.Box=o,o.prototype.toPolygon=o.prototype.toPolygon=function(){var t=this.pos,e=this.w,r=this.h;return new n(new i(t.x,t.y),[new i,new i(e,0),new i(e,r),new i(0,r)])},e.Response=s,s.prototype.clear=s.prototype.clear=function(){return this.aInB=!0,this.bInA=!0,this.overlap=Number.MAX_VALUE,this};for(var a=[],l=0;l<10;l++)a.push(new i);var h=[];for(l=0;l<5;l++)h.push([]);var u=new s,c=new o(new i,1e-6,1e-6).toPolygon();function p(t,e,i){for(var r=Number.MAX_VALUE,n=-Number.MAX_VALUE,o=t.length,s=0;s<o;s++){var a=t[s].dot(e);a<r&&(r=a),a>n&&(n=a)}i[0]=r,i[1]=n}function f(t,e,i,r,n,o){var s=h.pop(),l=h.pop(),u=a.pop().copy(e).sub(t),c=u.dot(n);if(p(i,n,s),p(r,n,l),l[0]+=c,l[1]+=c,s[0]>l[1]||l[0]>s[1])return a.push(u),h.push(s),h.push(l),!0;if(o){var f,d,g=0;if(s[0]<l[0])if(o.aInB=!1,s[1]<l[1])g=s[1]-l[0],o.bInA=!1;else g=(f=s[1]-l[0])<(d=l[1]-s[0])?f:-d;else if(o.bInA=!1,s[1]>l[1])g=s[0]-l[1],o.aInB=!1;else g=(f=s[1]-l[0])<(d=l[1]-s[0])?f:-d;var m=Math.abs(g);m<o.overlap&&(o.overlap=m,o.overlapN.copy(n),g<0&&o.overlapN.reverse())}return a.push(u),h.push(s),h.push(l),!1}function d(t,e){var i=t.len2(),r=e.dot(t);return r<0?g:r>i?v:m}e.isSeparatingAxis=f;var g=-1,m=0,v=1;function y(t,e,i){t._recalc();for(var r=a.pop().copy(e.pos).add(e.offset).sub(t.pos),n=e.r,o=n*n,s=t.calcPoints,l=s.length,h=a.pop(),u=a.pop(),c=0;c<l;c++){var p=c===l-1?0:c+1,f=0===c?l-1:c-1,m=0,y=null;h.copy(t.edges[c]),u.copy(r).sub(s[c]),i&&u.len2()>o&&(i.aInB=!1);var _=d(h,u);if(_===g){h.copy(t.edges[f]);var x=a.pop().copy(r).sub(s[f]);if((_=d(h,x))===v){if((T=u.len())>n)return a.push(r),a.push(h),a.push(u),a.push(x),!1;i&&(i.bInA=!1,y=u.normalize(),m=n-T)}a.push(x)}else if(_===v){if(h.copy(t.edges[p]),u.copy(r).sub(s[p]),(_=d(h,u))===g){if((T=u.len())>n)return a.push(r),a.push(h),a.push(u),!1;i&&(i.bInA=!1,y=u.normalize(),m=n-T)}}else{var b=h.perp().normalize(),T=u.dot(b),w=Math.abs(T);if(T>0&&w>n)return a.push(r),a.push(b),a.push(u),!1;i&&(y=b,m=n-T,(T>=0||m<2*n)&&(i.bInA=!1))}y&&i&&Math.abs(m)<Math.abs(i.overlap)&&(i.overlap=m,i.overlapN.copy(y))}return i&&(i.a=t,i.b=e,i.overlapV.copy(i.overlapN).scale(i.overlap)),a.push(r),a.push(h),a.push(u),!0}function _(t,e,i){t._recalc(),e._recalc();for(var r=t.calcPoints,n=r.length,o=e.calcPoints,s=o.length,a=0;a<n;a++)if(f(t.pos,e.pos,r,o,t.normals[a],i))return!1;for(a=0;a<s;a++)if(f(t.pos,e.pos,r,o,e.normals[a],i))return!1;return i&&(i.a=t,i.b=e,i.overlapV.copy(i.overlapN).scale(i.overlap)),!0}return e.pointInCircle=function(t,e){var i=a.pop().copy(t).sub(e.pos).sub(e.offset),r=e.r*e.r,n=i.len2();return a.push(i),n<=r},e.pointInPolygon=function(t,e){e._recalc(),c.pos.copy(t),u.clear();var i=_(c,e,u);i&&(i=u.aInB);return i},e.testCircleCircle=function(t,e,i){var r=a.pop().copy(e.pos).add(e.offset).sub(t.pos).sub(t.offset),n=t.r+e.r,o=n*n,s=r.len2();if(s>o)return a.push(r),!1;if(i){var l=Math.sqrt(s);i.a=t,i.b=e,i.overlap=n-l,i.overlapN.copy(r.normalize()),i.overlapV.copy(r).scale(i.overlap),i.aInB=t.r<=e.r&&l<=e.r-t.r,i.bInA=e.r<=t.r&&l<=t.r-e.r}return a.push(r),!0},e.testPolygonCircle=y,e.testCirclePolygon=function(t,e,i){var r=y(e,t,i);if(r&&i){var n=i.a,o=i.aInB;i.overlapN.reverse(),i.overlapV.reverse(),i.a=i.b,i.b=n,i.aInB=i.bInA,i.bInA=o}return r},e.testPolygonPolygon=_,t.SAT=e,e}()}(this)}).call(this,i(3))},function(t,e){!function(t){if(!Object.defineProperty)throw"Font.js requires Object.defineProperty, which this browser does not support.";if(!document.createElement("canvas").getContext)throw"Font.js requires <canvas> and the Canvas2D API, which this browser does not support.";function e(){this.fontFamily="fjs"+(999999*Math.random()|0)}!function(t){try{new Uint8Array(1);return}catch(t){}function e(t,e){return this.slice(t,e)}function i(t,e){var i,r=t.length;for(arguments.length<2&&(e=0),i=0;i<r;++i,++e)this[e]=255&t[i]}function r(t){var r,n;if("number"==typeof t)for(r=new Array(t),n=0;n<t;++n)r[n]=0;else r=t.slice(0);return r.subarray=e,r.buffer=r,r.byteLength=r.length,r.set=i,"object"==typeof t&&t.buffer&&(r.buffer=t.buffer),r}t.Uint8Array=r,t.Uint32Array=r,t.Int32Array=r}(t),function(t){var e;t.opera||("response"in XMLHttpRequest.prototype||"mozResponseArrayBuffer"in XMLHttpRequest.prototype||"mozResponse"in XMLHttpRequest.prototype||"responseArrayBuffer"in XMLHttpRequest.prototype||(e=t.VBArray?function(){return new Uint8Array(new VBArray(this.responseBody).toArray())}:function(){this.responseBody},Object.defineProperty(XMLHttpRequest.prototype,"response",{get:e})))}(t),t.btoa||(t.btoa=function(t){var e,i,r,n,o,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",a=0,l=0,h="",u=[];if(!t)return t;do{e=(o=t.charCodeAt(a++)<<16|t.charCodeAt(a++)<<8|t.charCodeAt(a++))>>18&63,i=o>>12&63,r=o>>6&63,n=63&o,u[l++]=s.charAt(e)+s.charAt(i)+s.charAt(r)+s.charAt(n)}while(a<t.length);h=u.join("");var c=t.length%3;return(c?h.slice(0,c-3):h)+"===".slice(c||3)}),e.prototype.url="",e.prototype.format="",e.prototype.data="",e.prototype.base64="AAEAAAAKAIAAAwAgT1MvMgAAAAAAAACsAAAAWGNtYXAAAAAAAAABBAAAACxnbHlmAAAAAAAAATAAAAAQaGVhZAAAAAAAAAFAAAAAOGhoZWEAAAAAAAABeAAAACRobXR4AAAAAAAAAZwAAAAIbG9jYQAAAAAAAAGkAAAACG1heHAAAAAAAAABrAAAACBuYW1lAAAAAAAAAcwAAAAgcG9zdAAAAAAAAAHsAAAAEAAEAAEAZAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAABAAMAAQAAAAwABAAgAAAABAAEAAEAAABB//8AAABB////wAABAAAAAAABAAAAAAAAAAAAAAAAMQAAAQAAAAAAAAAAAABfDzz1AAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAEAAgAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAIAAAAAQAAAAIAAQABAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAIAHgADAAEECQABAAAAAAADAAEECQACAAIAAAAAAAEAAAAAAAAAAAAAAAAAAA==",e.prototype.metrics={quadsize:0,leading:0,ascent:0,descent:0,weightclass:400},e.prototype.systemfont=!1,e.prototype.loaded=!1,e.prototype.onload=function(){},e.prototype.onerror=function(){},e.prototype.canvas=!1,e.prototype.context=!1,e.prototype.validate=function(t,e,i,r,n){!1!==n&&n<0?this.onerror("Requested system font '"+this.fontFamily+"' could not be loaded (it may not be installed)."):getComputedStyle(t,null).getPropertyValue("width").replace("px","")>0?(document.head.removeChild(e),document.body.removeChild(t),this.loaded=!0,this.onload()):setTimeout((function(){r.validate(t,e,i,r,!1!==n&&n-50)}),1e3)},e.prototype.ondownloaded=function(){var t=this,e=function(t){return String.fromCharCode(t)},i=function(t){if(t<256)return e(0)+e(t);var i=255&t;return e(t>>8)+e(i)},r=function(t,e){return 256*t+e},n=function(t,e){var i,r=t>>7==1;return i=256*(t&=127)+e,r?i-32768:i},o=function(t,e,i,r){return 16777216*t+65536*e+256*i+r},s=function(e){t.onerror(e)},a=e(0)+e(1)+e(0)+e(0),l=this.data,h=e(l[0])+e(l[1])+e(l[2])+e(l[3]),u=h===a,c=!u&&"OTTO"===h;if(u)this.format="truetype";else{if(!c)return void s("Error: file at "+this.url+" cannot be interpreted as OpenType font.");this.format="opentype"}var p,f,d=r(l[4],l[5]),g=12+16*d,m={};for(p=12;p<g;p+=16)f=e(l[p])+e(l[p+1])+e(l[p+2])+e(l[p+3]),m[f]={name:f,checksum:o(l[p+4],l[p+5],l[p+6],l[p+7]),offset:o(l[p+8],l[p+9],l[p+10],l[p+11]),length:o(l[p+12],l[p+13],l[p+14],l[p+15])};var v=function(t){return m[t]?t:(s("Error: font is missing the required OpenType '"+t+"' table."),!1)};if(!1!==(f=v("head"))){p=m[f].offset,m[f].version=""+l[p]+l[p+1]+l[p+2]+l[p+3];var y=r(l[p+18],l[p+19]);if(this.metrics.quadsize=y,!1!==(f=v("hhea"))&&(p=m[f].offset,m[f].version=""+l[p]+l[p+1]+l[p+2]+l[p+3],this.metrics.ascent=n(l[p+4],l[p+5])/y,this.metrics.descent=n(l[p+6],l[p+7])/y,this.metrics.leading=n(l[p+8],l[p+9])/y,!1!==(f=v("OS/2"))&&(p=m[f].offset,m[f].version=""+l[p]+l[p+1],this.metrics.weightclass=r(l[p+4],l[p+5]),!1!==(f=v("cmap"))))){p=m[f].offset,m[f].version=""+l[p]+l[p+1],d=r(l[p+2],l[p+3]);for(var _,x,b,T,w=!1,S=0;S<d;S++)x=r(l[_=p+4+8*S],l[_+1]),b=r(l[_+2],l[_+3]),T=o(l[_+4],l[_+5],l[_+6],l[_+7]),3===x&&1===b&&(w=T);var A="A";if(!1!==w&&4===(h=r(l[p+=w],l[p+1]))){for(var P=function(t){return-1===[9,10,11,12,13,32,127,128,129,141,142,143,144,149,157,158,160,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8203,8204,8205,8206,8207,8232,8233,8234,8235,8235,8236,8237,8238,8239,8287,8288,8289,8290,8291,8292,12288].indexOf(t)},E=p+14,C=p+14+2*(r(l[p+6],l[p+7])/2),O=!1;E<C&&!P(O=r(l[E],l[E+1]));E+=2)O=!1;if(0!=O){A=String.fromCharCode(O);var I=(65536-(O-1))%65536,M=e(0)+i(O)+i(65535)+i(0)+i(O)+i(65535)+i(I)+i(1),R=btoa(M);this.base64=this.base64.substring(0,380)+R+this.base64.substring(380+R.length)}}this.bootstrapValidation(A,!1)}}},e.prototype.bootstrapValidation=function(t,e){var i=this.fontFamily+" testfont",r=document.createElement("style");r.setAttribute("type","text/css"),r.innerHTML="@font-face {\n  font-family: '"+i+"';\n  src: url('data:application/x-font-ttf;base64,"+this.base64+"')\n       format('truetype');}",document.head.appendChild(r);var n=!1;this.systemfont||(n=this.toStyleNode(),document.head.appendChild(n));var o=document.createElement("p");if(o.style.cssText="position: absolute; top: 0; left: 0; opacity: 0;",o.style.fontFamily="'"+this.fontFamily+"', '"+i+"'",o.innerHTML=t+t+t+t+t+t+t+t+t+t,document.body.appendChild(o),"undefined"==typeof getComputedStyle)this.onload(),error("Error: getComputedStyle is not supported by this browser.\nConsequently, Font.onload() cannot be trusted.");else{var s=this.systemfont?1e3:this.metrics.quadsize,a=document.createElement("canvas");a.width=s,a.height=s,this.canvas=a;var l=a.getContext("2d");l.font="1em '"+this.fontFamily+"'",l.fillStyle="white",l.fillRect(-1,-1,s+2,s+2),l.fillStyle="black",l.fillText("test text",50,s/2),this.context=l;var h=this;setTimeout((function(){h.validate(o,r,n,h,e)}),50)}},e.prototype.processSystemFont=function(){this.systemfont=!0,this.metrics=!1,this.bootstrapValidation("A",1e3)},e.prototype.loadFont=function(){var t=this;-1!==this.url.indexOf(".")?this.bootstrapValidation("A",!1):setTimeout((function(){t.processSystemFont()}),10)},e.prototype.styleNode=!1,e.prototype.toStyleNode=function(){if(this.styleNode)return this.styleNode;this.format="truetype",this.styleNode=document.createElement("style"),this.styleNode.type="text/css";var t=this.url.replace(".ttf",".eot"),e="@font-face {\n";return e+="  font-family: '"+this.fontFamily+"';\n",e+="  src: url('"+t+"') format('eot'), url('"+this.url+"') format('"+this.format+"');\n",e+="}",this.styleNode.innerHTML=e,this.styleNode},e.prototype.measureText=function(t,e){if(!this.loaded)return this.onerror("measureText() was called while the font was not yet loaded"),!1;this.context.font=e+"px '"+this.fontFamily+"'";var i=this.context.measureText(t);i.fontsize=e,i.ascent=0,i.descent=0,i.bounds={minx:0,maxx:i.width,miny:0,maxy:0},i.height=0;var r=[];i.width,this.metrics.quadsize;r.push(t);var n,o=r.length;for(n=0;n<o;n++)this.measureSegment(r[n],e,i);return i},e.prototype.measureSegment=function(t,e,i){var r=document.createElement("div");r.style.position="absolute",r.style.opacity=0,r.style.font=e+"px '"+this.fontFamily+"'";for(r.innerHTML=t,y=1;y<10;y++)r.innerHTML+="<br/>"+t;document.body.appendChild(r),i.leading=1.2*e;var n,o,s=(n=r,o="height",document.defaultView.getComputedStyle(n,null).getPropertyValue(o));if((s=s.replace("px",""))>=10*e&&(i.leading=s/10|0),document.body.removeChild(r),/^\s*$/.test(t))return i;this.canvas;var a=this.context,l=this.systemfont?1e3:this.metrics.quadsize,h=l,u=l,c=l/2,p=(l-i.width)/2;p!==(0|p)&&(p|=0),a.fillStyle="white",a.fillRect(-50,-50,h+100,u+100),a.fillStyle="black",a.fillText(t,p,c);for(var f=i.width+50|0,d=4*e,g=p-25,m=c-d/2,v=a.getImageData(g,m,f,d).data,y=0,_=0,x=4*f,b=v.length,T=d/2;++y<b&&255===v[y];);var w=y/x|0;for(y=b-1;--y>0&&255===v[y];);var S=y/x|0;for(y=0,_=0;_<f&&255===v[y];)(y+=x)>=b&&(_++,y=y-b+4);var A=_,P=1;for(y=b-3,_=0;_<f&&255===v[y];)(y-=x)<0&&(_++,y=b-3-4*P++);var E=f-_;return i.ascent=T-w,i.descent=S-T,i.bounds={minx:A-25,maxx:E-25,miny:-i.descent,maxy:i.ascent},i.height=S-w+1,i},Object.defineProperty(e.prototype,"src",{set:function(t){this.url=t,this.loadFont()}}),t.Font=e}(window)},function(t,e,i){(function(e){t.exports=function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){var i=e[s][1][t];return n(i||t)}),h,h.exports,t,e,i,r)}return i[s].exports}for(var o=!1,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,i,r){(function(e){if("undefined"==typeof PIXI)window.console&&window.console.warn("pixi.js has to be loaded before loading gown.js");else{var r=i.exports=t("./core");r.utils=t("./utils"),r.loader=PIXI.loader,e.GOWN=r}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":16,"./utils":35}],2:[function(t,e,i){function r(){PIXI.Container.call(this),this.enabled=!1!==this.enabled,this.interactive=!0}r.prototype=Object.create(PIXI.Container.prototype),r.prototype.constructor=r,e.exports=r,r.prototype.setTheme=function(t){t===this.theme&&t||(this.theme=t,this.invalidSkin=!0)},r.prototype.updateTransform=function(){this.redraw&&this.redraw(),PIXI.Container.prototype.updateTransform.call(this)},r.prototype.mousePos=function(t){return t.data.getLocalPosition(this)},r.prototype.redraw=function(){},Object.defineProperty(r.prototype,"enabled",{get:function(){return this._enabled},set:function(t){this._enabled=t}}),Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t}}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t}})},{}],3:[function(t,e,i){var r=t("./Control"),n=t("../utils/resizeScaling"),o=t("../utils/mixin");function s(t){if(r.call(this),this.skinCache={},this.setTheme(t||GOWN.theme),void 0===this.theme)throw new Error("you need to define a theme first");this.invalidState=!0,this.initResizeScaling()}s.prototype=Object.create(r.prototype),s.prototype.constructor=s,e.exports=s,s.prototype.controlSetTheme=r.prototype.setTheme,s.prototype.setTheme=function(t){t===this.theme&&t||(this.controlSetTheme(t),this.preloadSkins(),this.invalidState=!0)},s.prototype.changeSkin=function(t){this._currentSkin!==t&&(this._lastSkin=this._currentSkin,this.addChildAt(t,0),t.alpha=1,this._currentSkin=t),this.invalidState=!1},s.prototype.preloadSkins=function(){},s.prototype.fromSkin=function(t,e){var i;this.skinCache[t]?i=this.skinCache[t]:(i=this.theme.getSkin(this.skinName,t),this.skinCache[t]=i),i&&e.call(this,i)},o(s.prototype,n),Object.defineProperty(s.prototype,"skinName",{get:function(){return this._skinName},set:function(t){this._skinName!==t&&(this._skinName=t,this.invalidState=!0)}})},{"../utils/mixin":36,"../utils/resizeScaling":39,"./Control":2}],4:[function(t,e,i){var r=t("../Control");function n(t,e,i,n){if(!n||!i){n=new PIXI.Container;var o=800,s=600;e&&(o=window.innerWidth,s=window.innerHeight),i=PIXI.autoDetectRenderer(o,s,{backgroundColor:16777215}),document.body.appendChild(i.view)}this._stage=n,this._renderer=i,this._width=i.width,this._height=i.height,r.call(this),n.addChild(this),this.animate(),this.background=t,this.fullscreen=e||!1}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype.animate=function(){var t=this._renderer,e=this._stage,i=function(){t.render(e),requestAnimationFrame(i)};requestAnimationFrame(i)},n.prototype._createGradientRect=function(t,e,i){var r=document.createElement("canvas");r.width=e||256,r.height=i||256;for(var n=r.getContext("2d"),o=n.createLinearGradient(0,0,0,r.height),s=0;s<t.length;s++)o.addColorStop(s,t[s]);return n.fillStyle=o,n.fillRect(0,0,r.width,r.height),PIXI.Texture.fromCanvas(r)},n.prototype.cleanup=function(t){(t=t||!0)&&document.body.removeChild(this._renderer.view),this._stage=null,this._renderer=null,this._removeBackground(),this.fullscreen=!1},n.prototype.onresize=function(){this._width=window.innerWidth,this._height=window.innerHeight,this._renderer.resize(this._width,this._height),this.bg&&(this.bg.width=this._width,this.bg.height=this._height);for(var t=0;t<this.children.length;t++){var e=this.children[t];e.onresize&&e.onresize(this._width,this._height)}},n.prototype._removeBackground=function(){this.bg&&(this.removeChild(this.bg),this.bg=null)},Object.defineProperty(n.prototype,"fullscreen",{get:function(){return this._fullscreen},set:function(t){this._fullscreen&&!t?window.removeEventListener("resize",this._onresize):!this._fullscreen&&t&&(this._onresize=this.onresize.bind(this),window.addEventListener("resize",this._onresize)),this._fullscreen=t}}),Object.defineProperty(n.prototype,"background",{get:function(){return this._background},set:function(t){t!==this._background&&(this._removeBackground(),t instanceof Array?(this.bg=new PIXI.Sprite(this._createGradientRect(t)),this.bg.width=this._width,this.bg.height=this._height,this.addChildAt(this.bg,0)):this._renderer.backgroundColor=t,this._background=t)}})},{"../Control":2}],5:[function(t,e,i){var r=t("../Skinable");function n(t,e){this.skinName=e||n.SKIN_NAME,this._validStates=this._validStates||n.stateNames,r.call(this,t),this.handleEvent("up"),this.updateLabel=!1,this.touchstart=this.mousedown,this.touchend=this.mouseupoutside=this.mouseup,this.touchendoutside=this.mouseout}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.SKIN_NAME="button",n.UP="up",n.DOWN="down",n.HOVER="hover",n.stateNames=[n.DOWN,n.HOVER,n.UP],n.prototype.preloadSkins=function(){for(var t=0;t<this._validStates.length;t++){var e=this._validStates[t],i=this.theme.getSkin(this.skinName,e);this.skinCache[e]=i,i&&(this.addChildAt(i,0),i.alpha=0,this.width&&(i.width=this.width),this.height&&(i.height=this.height))}},n.prototype.mousedown=function(){this.handleEvent(n.DOWN)},n.prototype.mouseup=function(){this.handleEvent(n.UP)},n.prototype.mousemove=function(){},n.prototype.mouseover=function(){this.handleEvent(n.HOVER)},n.prototype.mouseout=function(){this.handleEvent("out")},n.prototype.updateDimensions=function(){var t=this.worldWidth,e=this.worldHeight;this.hitArea?(this.hitArea.width=t,this.hitArea.height=e):this.hitArea=new PIXI.Rectangle(0,0,t,e);for(var i=0;i<this._validStates.length;i++){var r=this._validStates[i],n=this.skinCache[r];n&&(n.width=t,n.height=e)}if(this.labelText){var o=e/this._height;this.labelText.style.fontSize=this.theme.textStyle.fontSize*o,this.labelText.style=this.labelText.style,this.updateLabelDimensions()}},n.prototype.handleEvent=function(t){this._enabled&&(t===n.DOWN?(this.currentState=n.DOWN,this._pressed=!0):t===n.UP?(this._pressed=!1,this._over&&this.theme.hoverSkin?this.currentState=n.HOVER:this.currentState=n.UP):t===n.HOVER?(this._over=!0,this._pressed?this.currentState=n.DOWN:this.theme.hoverSkin&&(this.currentState=n.HOVER)):(this._over&&(this._over=!1),this.currentState=n.UP))},n.prototype.redrawSkinable=r.prototype.redraw,n.prototype.redraw=function(){this.updateLabel&&this.createLabel(),this.redrawSkinable()},n.prototype.createLabel=function(){this.labelText?(this.labelText.text=this._label,this.labelText.style=this.theme.textStyle.clone()):(this.labelText=new PIXI.Text(this._label,this.theme.textStyle.clone()),this.addChild(this.labelText)),this.updateLabelDimensions(),this.updateLabel=!1},n.prototype.updateLabelDimensions=function(){this.labelText&&this.labelText.text&&this.worldWidth-this.labelText.width>=0&&this.worldHeight-this.labelText.height>=0&&(this.labelText.x=Math.floor((this.worldWidth-this.labelText.width)/2),this.labelText.y=Math.floor((this.worldHeight-this.labelText.height)/2))},n.prototype.skinableSetTheme=r.prototype.setTheme,n.prototype.setTheme=function(t){this.labelText&&(this.updateLabel=this.updateLabel||this.labelText.font!==this.theme.labelFont||this.labelText.color!==this.theme.labelColor),this.skinableSetTheme(t)},Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},set:function(t){if(this._currentState!==t){if(this._validStates.indexOf(t)<0)throw new Error("Invalid state: "+t+".");this._currentState=t,this.invalidState=!0}}}),Object.defineProperty(n.prototype,"label",{get:function(){return this._label},set:function(t){this._label!==t&&(this._label=t,this.updateLabel=!0)}})},{"../Skinable":3}],6:[function(t,e,i){var r=t("../Skinable");function n(t,e,i){this.skinName=i||n.SKIN_NAME,this._validStates=this._validStates||n.stateNames.concat(n.selectedStateNames),r.call(this,e),this._currentState="up",this.selected=t||!1,this._mousedown=!1,this.touchstart=this.mousedown,this.touchend=this.mouseupoutside=this.mouseup,this.touchendoutside=this.mouseout}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.SKIN_NAME="checkbox",n.UP="up",n.DOWN="down",n.HOVER="hover",n.SELECTED_UP="selected_up",n.SELECTED_DOWN="selected_down",n.SELECTED_HOVER="selected_hover",n.stateNames=[n.UP,n.DOWN,n.HOVER],n.selectedStateNames=[n.SELECTED_UP,n.SELECTED_DOWN,n.SELECTED_HOVER],n.prototype.mousedown=function(){this.handleEvent(n.DOWN)},n.prototype.mouseup=function(){this.handleEvent(n.UP)},n.prototype.mousemove=function(){},n.prototype.mouseover=function(){this.handleEvent(n.HOVER)},n.prototype.mouseout=function(){this.handleEvent("out")},n.prototype.preloadSkins=function(){for(var t=0;t<this._validStates.length;t++){var e=this._validStates[t],i=this.theme.getSkin(this.skinName,e);this.skinCache[e]=i,i&&(this.addChildAt(i,0),i.alpha=0,this.width&&(i.width=this.width),this.height&&(i.height=this.height))}},Object.defineProperty(n.prototype,"currentState",{get:function(){return this._currentState},set:function(t){if(this._currentState!==t){if(this._validStates.indexOf(t)<0)throw new Error("Invalid state: "+t+".");this._currentState=t,this.invalidState=!0}}}),Object.defineProperty(n.prototype,"selected",{set:function(t){var e,i=this._currentState;n.selectedStateNames.indexOf(i)>=0&&!t?(e=n.selectedStateNames.indexOf(i),i=n.stateNames[e]):n.stateNames.indexOf(i)>=0&&t&&(e=n.stateNames.indexOf(i),i=n.selectedStateNames[e]),this._selected=t,this._pressed=!1,this.currentState=i},get:function(){return this._selected}}),n.prototype.toggleSelected=function(){this.selected=!this.selected,this.change&&this.change(this.selected)},n.prototype.handleEvent=function(t){switch(t){case n.UP:this._mousedown&&(this._mousedown=!1,this.toggleSelected(),this.currentState=this.selected?n.SELECTED_UP:n.UP);break;case n.DOWN:this._mousedown||(this._mousedown=!0,this.currentState=this.selected?n.SELECTED_DOWN:n.DOWN);break;case n.HOVER:this._mousedown||(this.currentState=this.selected?n.SELECTED_HOVER:n.HOVER);break;case"out":this.currentState=this.selected?n.SELECTED_UP:n.UP}}},{"../Skinable":3}],7:[function(t,e,i){var r=t("../Skinable"),n=t("../../utils/InputWrapper");function o(t,e){r.call(this,e),this.text=t||"",n.createInput(),this.hasFocus=!1,this._mouseDown=!1,this._clipPos=[0,0]}o.prototype=Object.create(r.prototype),o.prototype.constructor=o,e.exports=o,o.currentInput=null,o.prototype.onKeyUp=function(){},o.prototype.onKeyDown=function(){},o.prototype.clickPos=function(t){var e=this.pixiText.text,i=this.pixiText.x,r=e.length;if(t<this.textWidth(e)+i)for(var n=0;n<e.length;n++)if((i+=this.textWidth(e[n]))>=t){r=n;break}return this._clipPos[0]+r},o.prototype.posToCoord=function(t){var e=this.pixiText.text,i=this.pixiText.x;return t<e.length?i+this.textWidth(e.substring(0,t)):i+this.textWidth(e)},o.prototype.textWidth=function(t){if(this.text._isBitmapFont){for(var e=null,i=0,r=this.pixiText._data,n=0;n<t.length;n++){var o=t.charCodeAt(n),s=r.chars[o];s&&(e&&s.kerning[e]&&(i+=s.kerning[e]),i+=s.xAdvance,e=o)}return i*this.pixiText._scale}return this.pixiText.context.measureText(t||"").width},o.prototype.focus=function(){GOWN.InputControl.currentInput!==this&&(GOWN.InputControl.currentInput&&GOWN.InputControl.currentInput.blur(),GOWN.InputControl.currentInput=this,this.hasFocus=!0,this.onfocus(),n.focus())},Object.defineProperty(o.prototype,"hasFocus",{get:function(){return this._hasFocus},set:function(t){this._hasFocus=t}}),o.prototype.onMouseUpOutside=function(){this.hasFocus&&!this._mouseDown&&this.blur(),this._mouseDown=!1},o.prototype.onfocus=function(){},o.prototype.blur=function(){GOWN.InputControl.currentInput===this&&(GOWN.InputControl.currentInput=null,this.hasFocus=!1,n.blur(),this.onblur())},o.prototype.onblur=function(){},o.blur=function(){GOWN.InputControl.currentInput&&!GOWN.InputControl.currentInput._mouseDown&&(GOWN.InputControl.currentInput.blur(),GOWN.InputControl.currentInput=null)},window.addEventListener("blur",o.blur,!1)},{"../../utils/InputWrapper":32,"../Skinable":3}],8:[function(t,e,i){var r=t("../Control"),n=t("../layout/ViewPortBounds");function o(){this.percentWidth=this.percentWidth||null,this.percentHeight=this.percentHeight||null,r.call(this),this._viewPortBounds=new n,this._needUpdate=!0}o.prototype=Object.create(r.prototype),o.prototype.constructor=o,e.exports=o,o.prototype.redraw=function(){var t=!1;this._width&&this._viewPortBounds.explicitWidth!==this._width&&(this._viewPortBounds.explicitWidth=this._width,t=!0),this._height&&this._viewPortBounds.explicitHeight!==this._height&&(this._viewPortBounds.explicitHeight=this._height,t=!0),this.layout&&(this._needUpdate||t||this.layout.needUpdate)&&(this.layout.layout(this.children,this._viewPortBounds),this._needUpdate=!1,this.layout._needUpdate=!1)},o.prototype.addChild=function(t){var e=r.prototype.addChild.call(this,t);return this._needUpdate=!0,e},o.prototype.addChildAt=function(t,e){var i=r.prototype.addChildAt.call(this,t,e);return this._needUpdate=!0,i},o.prototype.addSpacer=function(t){var e=new r;e.width=e.height=t,this.addChild(e)},o.prototype.childIsRenderAble=function(t,e,i,r,n){return t.x<r+e&&t.y<n+i&&t.x>e-t.width&&t.y>i-t.height},o.prototype.updateRenderable=function(t,e,i,r){for(var n=0,o=this.children.length;n<o;n++){var s=this.children[n];s.renderable=this.childIsRenderAble(s,t,e,i,r)}},Object.defineProperty(o.prototype,"width",{set:function(t){this._width=t},get:function(){if(this._width>0)return this._width;var t=0;if(this.children)for(var e=0;e<this.children.length;e++){var i=this.getChildAt(e);t=Math.max(t,i.x+i.width)}return t}}),Object.defineProperty(o.prototype,"height",{set:function(t){this._height=t},get:function(){if(this._height>0)return this._height;var t=0;if(this.children)for(var e=0;e<this.children.length;e++){var i=this.getChildAt(e);t=Math.max(t,i.y+i.height)}return t}})},{"../Control":2,"../layout/ViewPortBounds":24}],9:[function(t,e,i){var r=t("../Control"),n=t("../layout/LayoutAlignment");function o(t,e,i,n){this.addListener=e||!0,this.bar=n||null,r.call(this),this.content=t||null,this.mask=void 0,this.enabled=!0,this._useMask=!0,this.scrolldirection=o.SCROLL_AUTO,this.scrolldelta=i||10,this.interactive=!0,this.touchend=this.touchendoutside=this.mouseupoutside=this.mouseup,this.touchstart=this.mousedown,this.touchmove=this.mousemove}o.prototype=Object.create(r.prototype),o.prototype.constructor=o,e.exports=o,o.SCROLL_AUTO="auto",o.SCROLL_VERTICAL="vertical",o.SCROLL_HORIZONTAL="horizontal",o.prototype.layoutHorizontalAlign=function(){return this.content.layout&&this.content.layout.alignment===n.HORIZONTAL_ALIGNMENT},o.prototype.upright=function(){return this.content.height<=this.height&&this.content.width>this.width},o.prototype.direction=function(){var t=this.scrolldirection===o.SCROLL_AUTO,e=o.SCROLL_VERTICAL;return(this.scrolldirection===o.SCROLL_HORIZONTAL||t&&(this.layoutHorizontalAlign()||this.upright()))&&(e=o.SCROLL_HORIZONTAL),e},o.prototype._scrollContent=function(t,e){var i=this.direction(),r=!1;return i===o.SCROLL_HORIZONTAL&&this.content.width>this.width&&(t=Math.min(t,0),this.content.width&&(t=Math.max(t,-(this.content.width-this.width))),this.content.x=Math.floor(t),r=!0),i===o.SCROLL_VERTICAL&&this.content.height>this.height&&(e=Math.min(e,0),this.content.height&&this.content.y<0&&(e=Math.max(e,-(this.content.height-this.height))),this.content.y=Math.floor(e),r=!0),r},o.prototype.updateBar=function(){if(this.bar&&this.bar.thumb&&this.content){var t=this.direction();t===o.SCROLL_HORIZONTAL&&(this.bar.thumb.x=Math.floor(-this.content.x/(this.content.width-this.width)*(this.bar.width-this.bar.thumb.width))),t===o.SCROLL_VERTICAL&&(this.bar.thumb.y=Math.floor(-this.content.y/(this.content.height-this.height)*(this.bar.height-this.bar.thumb.height)))}},o.prototype.mousedown=function(t){var e=t.data.getLocalPosition(this);this._start||(this._start=[e.x-this.content.x,e.y-this.content.y])},o.prototype.mousemove=function(t){if(this._start){var e=t.data.getLocalPosition(this);this._scrollContent(e.x-this._start[0],e.y-this._start[1])&&this.updateBar()}},o.prototype.mouseup=function(){this._start=null},o.prototype.updateMask=function(){this.height&&this.width&&this._useMask?(void 0===this.mask&&(this.mask=new PIXI.Graphics),this.drawMask()):(this.mask&&this.mask.clear(),this.mask=void 0)},o.prototype.drawMask=function(){var t=new PIXI.Point(0,0),e=this.toGlobal(t);this.mask.clear().beginFill("#fff",1).drawRect(e.x,e.y,this.width,this.height).endFill(),this.hitArea?(this.hitArea.width=this.width,this.hitArea.height=this.height):this.hitArea=new PIXI.Rectangle(0,0,this.width,this.height)},o.prototype.redraw=function(){this.content.updateRenderable&&this.content.updateRenderable(-this.content.x,-this.content.y,this.width,this.height),this.invalid&&(this.updateMask(),this.invalid=!1)},Object.defineProperty(o.prototype,"content",{set:function(t){this._content&&this.removeChild(t),this._content=t,t&&this.addChild(t)},get:function(){return this._content}}),Object.defineProperty(o.prototype,"width",{get:function(){return this._width?this._width:this._content.width},set:function(t){this._width=t,this.invalid=!0}}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height?this._height:this._content.height},set:function(t){this._height=t,this.invalid=!0}})},{"../Control":2,"../layout/LayoutAlignment":19}],10:[function(t,e,i){var r=t("./Scrollable"),n=t("../layout/LayoutAlignment");function o(t,e,i,s){this.scrollArea=t,this.skinName=s||o.SKIN_NAME,void 0===this.orientation&&(this.orientation=r.HORIZONTAL,t&&t.content&&t.content.layout.alignment===n.VERTICAL_ALIGNMENT&&(this.orientation=r.VERTICAL)),t&&(t.bar=this),r.call(this,e,i)}o.prototype=Object.create(r.prototype),o.prototype.constructor=o,e.exports=o,o.SKIN_NAME="scroll_bar",o.prototype.scrollableredraw=r.prototype.redraw,o.prototype.redraw=function(){this.invalidTrack&&(this.scrollArea&&this.thumb&&(this.orientation===r.HORIZONTAL?this.thumb.width=Math.max(20,this.scrollArea.width/(this.scrollArea.content.width/this.scrollArea.width)):this.thumb.height=Math.max(20,this.scrollArea.height/(this.scrollArea.content.height/this.scrollArea.height))),this.scrollableredraw(this))},o.prototype.thumbMoved=function(t,e){this.scrollArea&&this.scrollArea.content&&(this.orientation===r.HORIZONTAL?this.scrollArea._scrollContent(-(this.scrollArea.content.width-this.scrollArea.width)*(t/(this.scrollArea.width-this.thumb.width)),0):this.scrollArea._scrollContent(0,-(this.scrollArea.content.height-this.scrollArea.height)*(e/(this.scrollArea.height-this.thumb.height))))}},{"../layout/LayoutAlignment":19,"./Scrollable":12}],11:[function(t,e,i){var r=t("./Button");function n(t,e,i){this.scrollable=t;var o=n.SKIN_NAME;e.thumbSkin||(o=r.SKIN_NAME),this.skinName=i||o,e.thumbSkin&&(this._validStates=n.THUMB_STATES),this.width=e.thumbSize||20,this.height=e.thumbSize||20,r.call(this,e,this.skinName),this.invalidTrack=!0,this.touchmove=this.mousemove,this.touchdown=this.mousedown,this.touchend=this.touchendoutside=this.mouseup}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.SKIN_NAME="scroll_thumb",n.THUMB_STATES=["horizontal_up","vertical_up","horizontal_down","vertical_down","horizontal_hover","vertical_hover"];var o=Object.getOwnPropertyDescriptor(r.prototype,"currentState");Object.defineProperty(n.prototype,"currentState",{set:function(t){this.theme.thumbSkin&&(t=this.scrollable.orientation+"_"+t),o.set.call(this,t)}}),n.prototype.buttonmousedown=r.prototype.mousedown,n.prototype.mousedown=function(t){this.buttonmousedown(t);var e=t.data.getLocalPosition(this.scrollable);this.scrollable._start=[e.x,e.y],t.stopPropagation()},n.prototype.buttonmousemove=r.prototype.mousemove,n.prototype.mousemove=function(t){this.buttonmousemove(t),this.scrollable.handleMove(t)},n.prototype.buttonmouseup=r.prototype.mouseup,n.prototype.mouseup=function(t){this.buttonmouseup(t),this.scrollable.handleUp()},n.prototype.showTrack=function(t){this.skin!==t&&(this.skin&&this.removeChild(this.skin),this.addChild(t),this.skin=t),t.x=Math.floor((this.width-t.getBounds().width)/2),t.y=Math.floor((this.height-t.getBounds().height)/2),this.invalidTrack=!1},n.prototype.redraw=function(){this.redrawSkinable(),this.invalidTrack&&this.theme.thumbSkin&&this.fromSkin(this.scrollable.orientation+"_thumb",this.showTrack)},n.prototype.move=function(t,e){if(this.scrollable.orientation===GOWN.Scrollable.HORIZONTAL){if(isNaN(t))return!1;if(t=Math.min(t,this.scrollable.maxWidth()),(t=Math.max(t,0))!==this.x)return this.x=t,!0}else{if(isNaN(e))return!1;if(e=Math.min(e,this.scrollable.maxHeight()),(e=Math.max(e,0))!==this.y)return this.y=e,!0}return!1}},{"./Button":5}],12:[function(t,e,i){var r=t("../Skinable"),n=t("./ScrollThumb");function o(t,e){this.mode=this.mode||o.DESKTOP_MODE,r.call(this,e),this.orientation=this.orientation||o.HORIZONTAL,this.thumb=t||new n(this,this.theme),this.addChild(this.thumb),this.invalidTrack=!0,this._inverse=!1,this._start=null,this.scrolldelta=10,this.touchstart=this.mousedown=this.handleDown,this.touchendoutside=this.touchend=this.mouseup=this.mouseupoutside=this.handleUp}o.prototype=Object.create(r.prototype),o.prototype.constructor=o,e.exports=o,o.DESKTOP_MODE="desktop",o.MOBILE_MODE="mobile",o.HORIZONTAL="horizontal",o.VERTICAL="vertical",o.prototype.handleDown=function(t){var e=t.data.getLocalPosition(this),i={x:e.x-this.thumb.width/2,y:e.y-this.thumb.height/2};t.target===this&&this.moveThumb(i.x,i.y)&&(this._start=[e.x,e.y],this.thumbMoved(e.x,e.y))},o.prototype.handleUp=function(){this._start=null},o.prototype.handleMove=function(t){if(this._start){var e=t.data.getLocalPosition(this),i=this.thumb.x+e.x-this._start[0],r=this.thumb.y+e.y-this._start[1];this.moveThumb(i,r)&&(this.thumbMoved(i,r),this._start[0]=e.x,this._start[1]=e.y)}},o.prototype.handleWheel=function(t){var e=this.thumb.x-t.delta*this.scrolldelta,i=this.thumb.y-t.delta*this.scrolldelta;this.moveThumb(e,i)&&this.thumbMoved(e,i)},o.prototype.thumbMoved=function(t,e){},o.prototype._updateProgressSkin=function(){if(this.progressSkin)if(this.orientation===o.HORIZONTAL){var t=this.thumb.x+this.thumb.width/2;this.inverse?(this.progressSkin.x=t,this.progressSkin.width=this.width-t,this.progressSkin.height=this.skin.height):(this.progressSkin.x=0,this.progressSkin.width=t,this.progressSkin.height=this.skin.height)}else{var e=this.thumb.y+this.thumb.height/2;this.inverse?(this.progressSkin.y=e,this.progressSkin.height=this.height-e,this.progressSkin.width=this.skin.width):(this.progressSkin.y=0,this.progressSkin.height=e,this.progressSkin.width=this.skin.width)}},o.prototype.maxWidth=function(){return this.width-this.thumb.width},o.prototype.maxHeight=function(){return this.height-this.thumb.height},o.prototype.moveThumb=function(t,e){return!!this.thumb.move(t,e)&&(this._updateProgressSkin(),!0)},o.prototype.showTrack=function(t){this.skin!==t&&(this.skin&&this.removeChild(this.skin),this.addChildAt(t,0),this.skin=t,this.progressSkin&&this._updateProgressSkin())},o.prototype.showProgress=function(t){this.progressSkin!==t&&(this.progressSkin&&this.removeChild(this.progressSkin),t.width=t.height=0,this.addChildAt(t,0),this.progressSkin=t,this.skin&&this._updateProgressSkin())},o.prototype.redraw=function(){this.invalidTrack&&this.thumb&&(this.fromSkin(this.orientation+"_progress",this.showProgress),this.fromSkin(this.orientation+"_track",this.showTrack),this.skin&&(this.orientation===o.HORIZONTAL?this.skin.width=this.width:this.skin.height=this.height,this.invalidTrack=!1))},Object.defineProperty(o.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.invalidTrack=!0,this.thumb&&(this.thumb.invalidTrack=!0)}}),Object.defineProperty(o.prototype,"inverse",{get:function(){return this._inverse},set:function(t){t!==this._inverse&&(this._inverse=t,this.orientation===o.HORIZONTAL?this.moveThumb(0,this.width-this.thumb.x):this.moveThumb(0,this.height-this.thumb.y),this.invalidTrack=!0,this.thumb&&(this.thumb.invalidTrack=!0))}}),Object.defineProperty(o.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.invalidTrack=!0,this.thumb&&(this.thumb.invalidTrack=!0)}})},{"../Skinable":3,"./ScrollThumb":11}],13:[function(t,e,i){var r=t("./Scrollable"),n=t("../../utils/SliderData");function o(t,e,i){this.skinName=i||o.SKIN_NAME,this._minimum=this._minimum||0,this._maximum=this._maximum||100,this.step=this.step||0,this.page=this.page||10,this._value=this.minimum,this.change=null,r.call(this,t,e)}o.prototype=Object.create(r.prototype),o.prototype.constructor=o,e.exports=o,o.SKIN_NAME="scroll_bar",o.prototype.thumbMoved=function(t,e){var i=0;i=this.orientation===r.HORIZONTAL?t:e,this.value=this.pixelToValue(i)},o.prototype.pixelToValue=function(t){var e=0;return e=this.orientation===r.HORIZONTAL?this.maxWidth():this.maxHeight(),this._inverse&&(t=e-t),t/e*(this.maximum-this.minimum)+this.minimum},o.prototype.valueToPixel=function(t){var e=0;e=this.orientation===r.HORIZONTAL?this.maxWidth():this.maxHeight();var i=(t-this.minimum)/(this.maximum-this.minimum)*e;return this._inverse&&(i=e-i),i},Object.defineProperty(o.prototype,"value",{get:function(){return this._value},set:function(t){if(!isNaN(t)&&(t=Math.min(t,this.maximum),t=Math.max(t,this.minimum),this._value!==t)){var e=this.valueToPixel(t);if(this.orientation===r.HORIZONTAL?this.moveThumb(e,0):this.moveThumb(0,e),this._value=t,this.change){var i=new n;i.value=this._value,i.target=this,this.change(i)}}}}),Object.defineProperty(o.prototype,"minimum",{get:function(){return this._minimum},set:function(t){!isNaN(t)&&this.minimum!==t&&t<this.maximum&&(this._minimum=t),this._value<this.minimum&&(this.value=this._value)}}),Object.defineProperty(o.prototype,"maximum",{get:function(){return this._maximum},set:function(t){!isNaN(t)&&this.maximum!==t&&t>this.minimum&&(this._maximum=t),this._value>this.maximum&&(this.value=t)}})},{"../../utils/SliderData":34,"./Scrollable":12}],14:[function(t,e,i){var r=t("../Control"),n=t("./InputControl"),o=t("../../utils/InputWrapper");function s(t,e,i,r){this.skinName=r||s.SKIN_NAME,this._validStates=this._validStates||s.stateNames,this._currentState="background",this.invalidState=!0,this.isUpdateText=!0,n.call(this,t,i),this._displayAsPassword=e||!1,this._cursorTimer=0,this._cursorNeedsUpdate=!0,this.blinkInterval=500,this.selection=[0,0],this.cursor=new PIXI.Text("|",this.theme.textStyle),this.addChild(this.cursor),this.selectionBg=new PIXI.Graphics,this.addChildAt(this.selectionBg,0),this.boundOnMouseUp=this.onMouseUp.bind(this),this.boundOnMouseUpOutside=this.onMouseUpOutside.bind(this),this.boundOnMouseDown=this.onMouseDown.bind(this),this.boundOnMouseMove=this.onMouseMove.bind(this),this.mousemove=this.touchmove=this.boundOnMouseMove,this.mousedown=this.touchstart=this.boundOnMouseDown,this.mouseup=this.touchend=this.boundOnMouseUp,this.mouseupoutside=this.touchendoutside=this.boundOnMouseUpOutside}s.prototype=Object.create(n.prototype),s.prototype.constructor=s,e.exports=s,s.SKIN_NAME="text_input",Object.defineProperty(s.prototype,"text",{get:function(){return this._text},set:function(t){t+="",this._origText!==t&&(this._origText=t,this._displayAsPassword&&(t=t.replace(/./gi,"*")),this._text=t||"",this.pixiText?this.pixiText.text=t:(this.pixiText=new PIXI.Text(t,this.theme.textStyle),this.addChild(this.pixiText)),this.hasFocus&&o.setText(this.value),this._cursorNeedsUpdate=!0,this.change&&this.change(t))}}),Object.defineProperty(s.prototype,"maxChars",{get:function(){return this._maxChars},set:function(t){this._maxChars!==t&&(o.setMaxLength(t),this._maxChars=t)}}),Object.defineProperty(s.prototype,"value",{get:function(){return this._origText}}),s.prototype.onfocus=function(){o.setText(this.value),o.setMaxLength(this.maxChars),this._displayAsPassword?o.setType("password"):o.setType("text")},s.prototype.updateSelection=function(t,e){return(this.selection[0]!==t||this.selection[1]!==e)&&(this.selection[0]=t,this.selection[1]=e,o.setSelection(t,e),this._cursorNeedsUpdate=!0,this.updateSelectionBg(),!0)},s.prototype.updateSelectionBg=function(){var t=this.posToCoord(this.selection[0]),e=this.posToCoord(this.selection[1]);this.selectionBg.clear(),t!==e&&(this.selectionBg.beginFill(33023),this.selectionBg.drawRect(0,0,e-t,this.pixiText.height),this.selectionBg.x=t,this.selectionBg.y=this.pixiText.y)},s.prototype.onblur=function(){this.updateSelection(0,0)},s.prototype.onSubmit=function(){},s.prototype.onKeyDown=function(t){var e=t.which;if(27!==t.which)return 65===e&&(t.ctrlKey||t.metaKey)?(t.preventDefault(),void this.updateSelection(0,this.text.length)):void(17===e||t.metaKey||t.ctrlKey||(13===e&&(t.preventDefault(),this.onSubmit(t)),this.updateTextState()));this.blur()},s.prototype.onKeyUp=function(){this.updateTextState()},s.prototype.setCursorPos=function(){this.cursor.x=0|this.textWidth(this.text.substring(0,this.cursorPos))},s.prototype.drawCursor=function(){if(this.hasFocus||this._mouseDown){var t=Date.now();t-this._cursorTimer>=this.blinkInterval&&(this._cursorTimer=t,this.cursor.visible=!this.cursor.visible),this.cursor.visible&&this._cursorNeedsUpdate&&(this.setCursorPos(),this._cursorNeedsUpdate=!1)}else this.cursor.visible=!1},s.prototype.redraw=function(){this.drawCursor(),r.prototype.redraw.call(this)},s.prototype.onMouseMove=function(t){var e=this.mousePos(t);if(!this.hasFocus||!this._mouseDown||this.selectionStart<0)return!1;var i=this.clickPos(e.x,e.y),r=Math.min(this.selectionStart,i),n=Math.max(this.selectionStart,i);return this.updateSelection(r,n)&&(this.cursorPos=i,this.setCursorPos(),this._cursorNeedsUpdate=!0),!0},s.prototype.onMouseDown=function(t){var e=t.data.originalEvent;if(2===e.which||3===e.which)return e.preventDefault(),!1;this.focus(),this._mouseDown=!0;var i=this.mousePos(t);return this.selectionStart=this.clickPos(i.x,i.y),this.updateSelection(this.selectionStart,this.selectionStart),this.cursorPos=this.selectionStart,this.setCursorPos(),!0},s.prototype.onMouseUp=function(t){var e=t.data.originalEvent;if(2===e.which||3===e.which)return e.preventDefault(),!1;var i=this.mousePos(t),r=this.clickPos(i.x,i.y);return this.selectionStart>=0&&r!==this.selectionStart||(this.cursorPos=r,this.setCursorPos(),this.updateSelection(this.cursorPos,this.cursorPos)),this.selectionStart=-1,this._mouseDown=!1,!0},s.prototype.updateTextState=function(){var t=o.getText();t!==this.text&&(this.text=t);var e=o.getSelection();this.updateSelection(e[0],e[1])&&(this.cursorPos=e[0]),this.setCursorPos()}},{"../../utils/InputWrapper":32,"../Control":2,"./InputControl":7}],15:[function(t,e,i){var r=t("./Button");function n(t,e){this.skinName=e||n.SKIN_NAME,this._validStates=r.stateNames.slice(0),this._validStates.push(n.SELECTED_UP),this._validStates.push(n.SELECTED_DOWN),this._validStates.push(n.SELECTED_HOVER),r.call(this,t,this.skinName),this._selected=!1}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.SKIN_NAME="toggle_button",n.SELECTED_UP="selected_up",n.SELECTED_DOWN="selected_down",n.SELECTED_HOVER="selected_hover";var o=Object.getOwnPropertyDescriptor(r.prototype,"currentState");Object.defineProperty(n.prototype,"currentState",{set:function(t){this._selected&&(t="selected_"+t),o.set.call(this,t)}}),Object.defineProperty(n.prototype,"selected",{set:function(t){var e=this._currentState;this.invalidState=this._selected!==t||this.invalidState,0===e.indexOf("selected_")&&(e=e.substr(9,e.length)),this._selected=t,this._pressed=!1,this.currentState=e},get:function(){return this._selected}}),n.prototype.toggle=function(){this.selected=!this._selected},n.prototype.buttonHandleEvent=r.prototype.handleEvent,n.prototype.handleEvent=function(t){this._enabled&&(t===r.UP&&this._pressed&&this.toggle(),this.buttonHandleEvent(t))}},{"./Button":5}],16:[function(t,e,i){e.exports={Control:t("./Control"),Skinable:t("./Skinable"),Application:t("./controls/Application"),Button:t("./controls/Button"),CheckBox:t("./controls/CheckBox"),InputControl:t("./controls/InputControl"),LayoutGroup:t("./controls/LayoutGroup"),Scrollable:t("./controls/Scrollable"),ScrollArea:t("./controls/ScrollArea"),ScrollBar:t("./controls/ScrollBar"),ScrollThumb:t("./controls/ScrollThumb"),Slider:t("./controls/Slider"),TextInput:t("./controls/TextInput"),ToggleButton:t("./controls/ToggleButton"),HorizontalLayout:t("./layout/HorizontalLayout"),Layout:t("./layout/Layout"),LayoutAlignment:t("./layout/LayoutAlignment"),TiledColumnsLayout:t("./layout/TiledColumnsLayout"),TiledLayout:t("./layout/TiledLayout"),TiledRowsLayout:t("./layout/TiledRowsLayout"),VerticalLayout:t("./layout/VerticalLayout"),ViewPortBounds:t("./layout/ViewPortBounds"),Diamond:t("./shapes/Diamond"),Ellipse:t("./shapes/Ellipse"),Line:t("./shapes/Line"),Rect:t("./shapes/Rect"),Shape:t("./shapes/Shape"),Theme:t("./skin/Theme")}},{"./Control":2,"./Skinable":3,"./controls/Application":4,"./controls/Button":5,"./controls/CheckBox":6,"./controls/InputControl":7,"./controls/LayoutGroup":8,"./controls/ScrollArea":9,"./controls/ScrollBar":10,"./controls/ScrollThumb":11,"./controls/Scrollable":12,"./controls/Slider":13,"./controls/TextInput":14,"./controls/ToggleButton":15,"./layout/HorizontalLayout":17,"./layout/Layout":18,"./layout/LayoutAlignment":19,"./layout/TiledColumnsLayout":20,"./layout/TiledLayout":21,"./layout/TiledRowsLayout":22,"./layout/VerticalLayout":23,"./layout/ViewPortBounds":24,"./shapes/Diamond":25,"./shapes/Ellipse":26,"./shapes/Line":27,"./shapes/Rect":28,"./shapes/Shape":29,"./skin/Theme":30}],17:[function(t,e,i){var r=t("./LayoutAlignment");function n(){r.call(this),this.alignment=r.HORIZONTAL_ALIGNMENT}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"./LayoutAlignment":19}],18:[function(t,e,i){function r(){this.gap=0,this.padding=0}e.exports=r,r.VERTICAL_ALIGN_TOP="top",r.VERTICAL_ALIGN_MIDDLE="middle",r.ALIGN_JUSTIFY="justify",r.VERTICAL_ALIGN_BOTTOM="bottom",r.HORIZONTAL_ALIGN_LEFT="left",r.HORIZONTAL_ALIGN_CENTER="center",r.HORIZONTAL_ALIGN_RIGHT="right",Object.defineProperty(r.prototype,"gap",{get:function(){return this._gap},set:function(t){this._gap!==t&&(this._gap=t,this._needUpdate=!0)}}),Object.defineProperty(r.prototype,"needUpdate",{get:function(){return this._needUpdate}}),Object.defineProperty(r.prototype,"padding",{set:function(t){this._paddingLeft=t,this._paddingRight=t,this._paddingBottom=t,this._paddingTop=t,this._needUpdate=!0},get:function(){return this._paddingTop}}),Object.defineProperty(r.prototype,"paddingTop",{get:function(){return this._paddingTop},set:function(t){this._paddingTop!==t&&(this._paddingTop=t,this._needUpdate=!0)}}),Object.defineProperty(r.prototype,"paddingBottom",{get:function(){return this._paddingBottom},set:function(t){this._paddingBottom!==t&&(this._paddingBottom=t,this._needUpdate=!0)}}),Object.defineProperty(r.prototype,"paddingLeft",{get:function(){return this._paddingLeft},set:function(t){this._paddingLeft!==t&&(this._paddingLeft=t,this._needUpdate=!0)}}),Object.defineProperty(r.prototype,"paddingRight",{get:function(){return this._paddingRight},set:function(t){this._paddingRight!==t&&(this._paddingRight=t,this._needUpdate=!0)}}),r.prototype.layout=function(t,e){}},{}],19:[function(t,e,i){var r=t("./Layout");function n(){r.call(this)}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.VERTICAL_ALIGNMENT="vertical",n.HORIZONTAL_ALIGNMENT="horizontal",n.prototype.applyPercent=function(t,e){var i,r,o,s=this.alignment===n.HORIZONTAL_ALIGNMENT,a=t.length,l=e,h=0,u=0;for(i=0;i<a;i++){var c;o=t[i],r=s?o.percentWidth:o.percentHeight,c=s?o.width:o.height,isNaN(r)||null==r?isNaN(c)||(h+=c):u+=r}h+=this._firstGap>0?this._firstGap:this._gap,h+=this._gap*(a-3),h+=this._lastGap>0?this._lastGap:this._gap,u<100&&(u=100);var p=(l-=h+=s?this._paddingLeft+this._paddingRight:this._paddingTop+this._paddingBottom)/u;for(i=0;i<a;i++)o=t[i],(r=s?o.percentWidth:o.percentHeight)>0&&(s?o.width=p*r:o.height=p*r)},n.prototype._currentGap=function(t,e){return isNaN(this._firstGap)||0!==t?!isNaN(this._lastGap)&&t>0&&t===e.length-2?this._lastGap:this._gap:this._firstGap},n.prototype.layout=function(t,e){var i=this.alignment===n.HORIZONTAL_ALIGNMENT,r=e?e.explicitWidth:NaN,o=e?e.explicitHeight:NaN,s=i?r:o,a=i?this._paddingLeft:this._paddingTop;this.applyPercent(t,s);for(var l=a,h=0;h<t.length;h++){var u=t[h];i?u.x=Math.floor(l):u.y=Math.floor(l),l+=(i?u.width:u.height)+this._currentGap(h,t)}},Object.defineProperty(n.prototype,"firstGap",{set:function(t){t!==this._firstGap&&(this._firstGap=t,this._needUpdate=!0)},get:function(){return this._firstGap}}),Object.defineProperty(n.prototype,"lastGap",{set:function(t){t!==this._lastGap&&(this._lastGap=t,this._needUpdate=!0)},get:function(){return this._lastGap}})},{"./Layout":18}],20:[function(t,e,i){var r=t("./TiledLayout");function n(){r.call(this),this._paging=r.PAGING_VERTICAL,this._orientation=r.ORIENTATION_COLUMNS}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperty(n.prototype,"gap",{set:function(t){this._verticalGap=t,this._horizontalGap=t,this._needUpdate=!0},get:function(){return this._verticalGap}})},{"./TiledLayout":21}],21:[function(t,e,i){var r=t("./Layout");function n(){r.call(this),this._useSquareTiles=!1,this._horizontalGap=0,this._verticalGap=0,this._tileHorizontalAlign=n.TILE_HORIZONTAL_ALIGN_CENTER,this._tileVerticalAlign=n.TILE_VERTICAL_ALIGN_MIDDLE,this._paging=n.PAGING_NONE,this._orientation=n.ORIENTATION_ROWS,this._needUpdate=!0}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.ORIENTATION_ROWS="rows",n.ORIENTATION_COLUMNS="columns",n.TILE_VERTICAL_ALIGN_TOP="top",n.TILE_VERTICAL_ALIGN_MIDDLE="middle",n.TILE_VERTICAL_ALIGN_BOTTOM="bottom",n.TILE_VERTICAL_ALIGN_JUSTIFY="justify",n.TILE_HORIZONTAL_ALIGN_LEFT="left",n.TILE_HORIZONTAL_ALIGN_CENTER="center",n.TILE_HORIZONTAL_ALIGN_RIGHT="right",n.TILE_HORIZONTAL_ALIGN_JUSTIFY="justify",n.PAGING_HORIZONTAL="horizontal",n.PAGING_VERTICAL="vertical",n.prototype.layout=function(t,e){var i=this._orientation===n.ORIENTATION_ROWS;if(0!==t.length){var r,o,s=e?e.maxWidth:Number.POSITIVE_INFINITY,a=e?e.maxHeight:Number.POSITIVE_INFINITY,l=e?e.explicitWidth:NaN,h=e?e.explicitHeight:NaN,u=0,c=0;for(r=0;r<t.length;r++)if(o=t[r]){var p=o.width,f=o.height;p>u&&(u=p),f>c&&(c=f)}this._useSquareTiles&&(u>c?c=u:c>u&&(u=c));var d=NaN,g=NaN,m=i?t.length:1;isNaN(l)?isNaN(s)||(d=s,m=(s-this._paddingLeft-this._paddingRight+this._horizontalGap)/(u+this._horizontalGap)):(d=l,m=(l-this._paddingLeft-this._paddingRight+this._horizontalGap)/(u+this._horizontalGap)),m=Math.floor(Math.max(m,1));var v=i?1:t.length;isNaN(h)?isNaN(a)||(g=a,v=(a-this._paddingTop-this._paddingBottom+this._verticalGap)/(c+this._verticalGap)):(g=h,v=(h-this._paddingTop-this._paddingBottom+this._verticalGap)/(c+this._verticalGap)),v=Math.floor(Math.max(v,1));var y=this._paddingLeft,_=this._paddingTop,x=m*v,b=0,T=x,w=i?y:_,S=y,A=_,P=0;for(r=0;r<t.length;r++){if(o=t[r],i?0!==P&&P%m==0&&(S=w,A+=c+this._verticalGap):0!==P&&r%v==0&&(S+=u+this._horizontalGap,A=w),P===T&&(b++,T+=x,i?this._paging===n.PAGING_HORIZONTAL?(S=w===y+d*b,A=_):this._paging===n.PAGING_VERTICAL&&(A=_+g*b):this._paging===n.PAGING_HORIZONTAL?S=y+d*b:this._paging===n.PAGING_VERTICAL&&(S=y,A=w=_+g*b)),o){switch(this._tileHorizontalAlign){case n.TILE_HORIZONTAL_ALIGN_JUSTIFY:o.x=S,o.width=u;break;case n.TILE_HORIZONTAL_ALIGN_LEFT:o.x=S;break;case n.TILE_HORIZONTAL_ALIGN_RIGHT:o.x=S+u-o.width;break;default:o.x=S+(u-o.width)/2}switch(this._tileVerticalAlign){case n.TILE_VERTICAL_ALIGN_JUSTIFY:o.y=A,o.height=c;break;case n.TILE_VERTICAL_ALIGN_TOP:o.y=A;break;case n.TILE_VERTICAL_ALIGN_BOTTOM:o.y=A+c-o.height;break;default:o.y=A+(c-o.height)/2}}i?S+=u+this._horizontalGap:A+=c+this._verticalGap,P++}this._needUpdate=!1}},Object.defineProperty(n.prototype,"useSquareTiles",{set:function(t){this._useSquareTiles=t,this._needUpdate=!0},get:function(){return this._useSquareTiles}})},{"./Layout":18}],22:[function(t,e,i){var r=t("./TiledLayout");function n(){r.call(this),this._paging=r.PAGING_HORIZONTAL,this._orientation=r.ORIENTATION_ROWS}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperty(n.prototype,"gap",{get:function(){return this._horizontalGap},set:function(t){this._verticalGap=t,this._horizontalGap=t,this._needUpdate=!0}})},{"./TiledLayout":21}],23:[function(t,e,i){var r=t("./LayoutAlignment");function n(){r.call(this),this.alignment=r.VERTICAL_ALIGNMENT}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n},{"./LayoutAlignment":19}],24:[function(t,e,i){e.exports=function(){this.explicitWidth=NaN,this.explicitHeight=NaN,this.x=0,this.y=0}},{}],25:[function(t,e,i){var r=t("./Shape");function n(t,e,i,n){r.call(this,t,e,i,n)}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._drawShape=function(){this.width<=0||this.height<=0||this.graphics.moveTo(this._width/2,0).lineTo(this._width,this._height/2).lineTo(this._width/2,this._height).lineTo(0,this._height/2).lineTo(this._width/2,0)}},{"./Shape":29}],26:[function(t,e,i){var r=t("./Shape");function n(t,e,i,n){r.call(this,t,e,i,n)}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._drawShape=function(){this.width<=0||this.height<=0||this.drawEllipse(0,0,this.width,this.height)}},{"./Shape":29}],27:[function(t,e,i){var r=t("./Shape");function n(t,e,i,n,o){r.call(this,t,e,i,n),this._reverse=o}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._drawShape=function(){this.width<=0||this.height<=0||(this.reverse?(this.moveTo(this._width,0),this.lineTo(0,this._height)):(this.moveTo(0,0),this.lineTo(this._width,this._height)))},Object.defineProperty(n.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this.invalid=!0}})},{"./Shape":29}],28:[function(t,e,i){var r=t("./Shape");function n(t,e,i,n,o){r.call(this,t,e,i,n),this._radius=o}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,n.prototype._drawShape=function(){this.width<=0||this.height<=0||(this.radius?this.drawRoundedRect(0,0,this._width,this._height,this.radius):this.drawRect(0,0,this._width,this._height))},Object.defineProperty(n.prototype,"radius",{get:function(){return this._radius},set:function(t){this._radius=t,this.invalid=!0}})},{"./Shape":29}],29:[function(t,e,i){function r(t,e,i,r){PIXI.Graphics.call(this),this._color=t,this._alpha=e||1,this._width=i,this._height=r,this.invalid=!0}r.prototype=Object.create(PIXI.Graphics.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width=t,this.invalid=!0}}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height=t,this.invalid=!0}}),Object.defineProperty(r.prototype,"color",{get:function(){return this._color},set:function(t){this._color=t,this.invalid=!0}}),Object.defineProperty(r.prototype,"alpha",{get:function(){return this._alpha},set:function(t){this._alpha=t,this.invalid=!0}}),r.prototype.applyColor=function(){this.beginFill(this.color,this.alpha)},r.prototype.drawBorder=function(){this.border&&this.lineStyle(this.border,this.borderColor)},r.prototype._drawShape=function(){this.width<=0||this.height<=0||this.drawRect(0,0,this._width,this._height)},r.prototype.updateTransform=function(){this.redraw(),PIXI.Graphics.prototype.updateTransform.call(this)},r.prototype.redraw=function(){this.invalid&&(this.clear(),this.applyColor(),this.drawBorder(),this._drawShape(),this.invalid=!1)}},{}],30:[function(t,e,i){var r=t("../../utils/ScaleContainer"),n=t("./ThemeFont");function o(t){this._skins={},this.textStyle=this.textStyle||new n,this.textStyle.clone(),!0!==t&&void 0!==t||(GOWN.theme=this),this.textureCache=null,this.thumbSkin=!0,this.hoverSkin=!0}e.exports=o,o.prototype.setSkin=function(t,e,i){this._skins[t]=this._skins[t]||{},this._skins[t][e]=i},o.prototype.loadImage=function(t){this._jsonPath=t,GOWN.loader.add(t).load(this.loadComplete.bind(this))},o.prototype.loadComplete=function(t,e){this.textureCache=e.resources[this._jsonPath].textures},o.prototype.getScaleContainer=function(t,e){var i=this;return function(){var n=i.textureCache[t];if(!n)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new r(n,e)}},o.prototype.getImage=function(t){var e=this;return function(){return new PIXI.Sprite(e.textureCache[t])}},o.prototype.getSkin=function(t,e){return this._skins[t]&&this._skins[t][e]?this._skins[t][e]():null},o.removeTheme=function(){GOWN.theme=void 0}},{"../../utils/ScaleContainer":33,"./ThemeFont":31}],31:[function(t,e,i){var r=["fontSize","fontFamily","fill","align","stroke","strokeThickness","wordWrap","wordWrapWidth","lineHeight","dropShadow","dropShadowColor","dropShadowAngle","dropShadowDistance","padding","textBaseline","lineJoin","miterLimit"];function n(t){for(var e in t)-1!==r.indexOf(e)&&(this[e]=t[e]);this.fill=this.fill||"#000",this._fontFamily=this._fontFamily||"Arial",this._fontSize=this._fontSize||12}e.exports=n,n.prototype.clone=function(){var t=new n;for(var e in this)-1!==r.indexOf(e)&&(t[e]=this[e]);return t},n.prototype._updateFont=function(){this._font=this._fontSize+"px "+this._fontFamily},Object.defineProperty(n.prototype,"font",{get:function(){return this._font}}),Object.defineProperty(n.prototype,"fontSize",{get:function(){return this._fontSize},set:function(t){this._fontSize=t,this._updateFont()}}),Object.defineProperty(n.prototype,"fontFamily",{get:function(){return this._fontFamily},set:function(t){this._fontFamily=t,this._updateFont()}})},{}],32:[function(t,e,i){function r(){}e.exports=r,r.hiddenInput=null,r.createInput=function(){if(!r.hiddenInput){var t=document.createElement("input");t.type="text",t.tabindex=-1,t.style.position="fixed",t.style.opacity=0,t.style.pointerEvents="none",t.style.left="0px",t.style.bottom="0px",t.style.left="-100px",t.style.top="-100px",t.style.zIndex=10,t.addEventListener("blur",(function(){GOWN.InputControl.currentInput&&GOWN.InputControl.currentInput.onMouseUpOutside(window.event)}),!1),t.addEventListener("keydown",(function(t){GOWN.InputControl.currentInput&&(t=t||window.event,GOWN.InputControl.currentInput.hasFocus&&GOWN.InputControl.currentInput.onKeyDown(t))})),t.addEventListener("keyup",(function(t){GOWN.InputControl.currentInput&&(t=t||window.event,GOWN.InputControl.currentInput.hasFocus&&GOWN.InputControl.currentInput.onKeyUp(t))})),document.body.appendChild(t),r.hiddenInput=t}return r.hiddenInput},r.textProp="value",r.focus=function(){r.hiddenInput&&r.hiddenInput.focus()},r.blur=function(){r.hiddenInput&&r.hiddenInput.blur()},r.setSelection=function(t,e){r.hiddenInput?(r.hiddenInput.selectionStart=t,r.hiddenInput.selectionEnd=e):r._selection=[t,e]},r.getSelection=function(){return r.hiddenInput?[r.hiddenInput.selectionStart,r.hiddenInput.selectionEnd]:r._selection},r.getText=function(){if(r.hiddenInput){var t=r.textProp;return r.hiddenInput[t].replace(/\r/g,"")}return r._text},r.setText=function(t){if(r.hiddenInput){var e=r.textProp;r.hiddenInput[e]=t}else r._text=t},r.setMaxLength=function(t){r.hiddenInput?!t||t<0?r.hiddenInput.removeAttribute("maxlength"):r.hiddenInput.setAttribute("maxlength",t):r._maxLength=t},r.setType=function(t){r.hiddenInput?r.hiddenInput.type=t:r._type=t},r.getType=function(){return r.hiddenInput?r.hiddenInput.type:r._type}},{}],33:[function(t,e,i){function r(t,e){PIXI.Container.call(this),this.rect=e,this.baseTexture=t.baseTexture,this.frame=t.frame,this._width=this.frame.width,this._height=this.frame.height;var i=e.x,r=e.width,n=this.frame.width-(r+i),o=e.y,s=e.height,a=this.frame.height-(s+o);i>0&&o>0&&(this.tl=this._getTexture(0,0,i,o),this.addChild(this.tl)),r>0&&o>0&&(this.tm=this._getTexture(i,0,r,o),this.addChild(this.tm),this.tm.x=i),n>0&&o>0&&(this.tr=this._getTexture(i+r,0,n,o),this.addChild(this.tr)),i>0&&s>0&&(this.cl=this._getTexture(0,o,i,s),this.addChild(this.cl),this.cl.y=o),r>0&&s>0&&(this.cm=this._getTexture(i,o,r,s),this.addChild(this.cm),this.cm.y=o,this.cm.x=i),n>0&&s>0&&(this.cr=this._getTexture(i+r,o,n,s),this.addChild(this.cr),this.cr.y=o),i>0&&a>0&&(this.bl=this._getTexture(0,o+s,i,a),this.addChild(this.bl)),r>0&&a>0&&(this.bm=this._getTexture(i,o+s,r,a),this.addChild(this.bm),this.bm.x=i),n>0&&a>0&&(this.br=this._getTexture(i+r,o+s,n,a),this.addChild(this.br))}r.prototype=Object.create(PIXI.Container.prototype),r.prototype.constructor=r,e.exports=r,r.prototype._updateScales=function(){this._positionTilable();var t=this.scaleOriginals={},e=function(e,i){i&&i.width&&i.height&&(t[e]={width:i.width,height:i.height})};e("tl",this.tl),e("tm",this.tm),e("tr",this.tr),e("cl",this.cl),e("cm",this.cm),e("cr",this.cr),e("bl",this.bl),e("bm",this.bm),e("br",this.br)},r.prototype._getTexture=function(t,e,i,r){var n=new PIXI.Rectangle(this.frame.x+t,this.frame.y+e,i,r),o=new PIXI.Texture(this.baseTexture,n,n.clone(),null);return new PIXI.Sprite(o)},Object.defineProperty(r.prototype,"width",{get:function(){return this._width},set:function(t){this._width!==t&&(this._width=t,this.invalid=!0,this._updateScales())}}),Object.defineProperty(r.prototype,"height",{get:function(){return this._height},set:function(t){this._height!==t&&(this._height=t,this.invalid=!0,this._updateScales())}}),r.prototype.redraw=function(){this.invalid&&(this._positionTilable(),this.invalid=!1)},r.prototype._positionTilable=function(){var t=this.rect.x,e=this.rect.width,i=this.frame.width-(e+t),r=this.rect.y,n=this.rect.height,o=this.frame.height-(n+r),s=this._width-i,a=this._height-o;this.cr&&(this.cr.x=s),this.br&&(this.br.x=s,this.br.y=a),this.tr&&(this.tr.x=s);var l=this._width-(t+i),h=this._height-(r+o);this.cm&&(this.cm.width=l,this.cm.height=h),this.bm&&(this.bm.width=l,this.bm.y=a),this.tm&&(this.tm.width=l),this.cl&&(this.cl.height=h),this.cr&&(this.cr.height=h),this.bl&&(this.bl.y=a)},r.fromFrame=function(t,e){var i=PIXI.utils.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache');return new r(i,e)}},{}],34:[function(t,e,i){e.exports=function(){this.value=0,this.target=null}},{}],35:[function(t,e,i){e.exports={InputWrapper:t("./InputWrapper"),mouseWheelSupport:t("./mouseWheelSupport"),position:t("./position"),ScaleContainer:t("./ScaleContainer"),SliderData:t("./SliderData"),resizeScaling:t("./resizeScaling"),mixin:t("./mixin")}},{"./InputWrapper":32,"./ScaleContainer":33,"./SliderData":34,"./mixin":36,"./mouseWheelSupport":37,"./position":38,"./resizeScaling":39}],36:[function(t,e,i){e.exports=function(t,e){for(var i in e)if(e.hasOwnProperty(i))if("defineProperty"===i)for(var r in e[i]){var n=e[i][r];void 0===n.configurable&&(n.configurable=!0),Object.defineProperty(t,r,n)}else t[i]=e[i];return t}},{}],37:[function(t,e,i){e.exports=function(t,e){var i=t.canvas;if(e||void 0===e){if(void 0!==GOWN._mouseWheelHandler)return;GOWN._mouseWheelHandler=function(e){e=window.event||e;var i=Math.max(-1,Math.min(1,e.wheelDelta||-e.detail)),r=t.getObjectsUnderPoint(t.mouseX,t.mouseY,1);if(r)for(var n=0;n<r.length;n++)r[n].mouseMove(i)},i.addEventListener?(i.addEventListener("mousewheel",GOWN._mouseWheelHandler,!1),i.addEventListener("DOMMouseScroll",GOWN._mouseWheelHandler,!1)):i.attachEvent("onmousewheel",GOWN._mouseWheelHandler)}else{if(void 0===GOWN._mouseWheelHandler)return;i.removeEventListener?(i.removeEventListener("mousewheel",GOWN._mouseWheelHandler),i.removeEventListener("DOMMouseScroll",GOWN._mouseWheelHandler)):i.detachEvent("onmousewheel",GOWN._mouseWheelHandler),GOWN._mouseWheelHandler=void 0}}},{}],38:[function(t,e,i){function r(t,e){e=e||t.parent,t.y=Math.floor((e.height-t.height)/2)}function n(t,e){e=e||t.parent,t.x=Math.floor((e.width-t.width)/2)}e.exports={centerHorizontal:n,centerVertical:r,center:function(t,e){r(t,e),n(t,e)},bottom:function(t,e){e=e||t.parent,t.y=e.height-t.height}}},{}],39:[function(t,e,i){e.exports={initResizeScaling:function(){this.resizeScaling=!0,this.minWidth=1,this.minHeight=1,this._lastWidth=NaN,this._lastHeight=NaN},redraw:function(){this._lastSkin&&(this._lastSkin.alpha=0,this._lastSkin=null),this.invalidState&&this.fromSkin(this._currentState,this.changeSkin);var t=this.worldWidth,e=this.worldHeight;this._currentSkin&&(this._lastWidth!==t||this._lastHeight!==e)&&t>0&&e>0&&(this._currentSkin.width=this._lastWidth=t,this._currentSkin.height=this._lastHeight=e,this.updateDimensions())},updateDimensions:function(){},updateTransform:function(){var t=this.worldTransform,e=1,i=1;if(this.redraw){if(this.resizeScaling){var r=this.parent.worldTransform;e=Math.sqrt(Math.pow(r.a,2)+Math.pow(r.b,2)),i=Math.sqrt(Math.pow(r.c,2)+Math.pow(r.d,2))}this.worldWidth=Math.round(Math.max(this._width*e,this.minWidth)),this.worldHeight=Math.round(Math.max(this._height*i,this.minHeight)),this.redraw()}if(this.resizeScaling){PIXI.DisplayObject.prototype.updateTransform.call(this);var n=t.tx,o=t.ty;e=0!==e?1/e:0,i=0!==i?1/i:0,t.scale(e,i),t.tx=n,t.ty=o;for(var s=0,a=this.children.length;s<a;++s)this.children[s].updateTransform()}else PIXI.Container.prototype.updateTransform.call(this)},defineProperty:{height:{get:function(){return this._height},set:function(t){this._height=t,this.minHeight=Math.min(t,this.minHeight)}},width:{get:function(){return this._width},set:function(t){this._width=t,this.minWidth=Math.min(t,this.minWidth)}}}}},{}]},{},[1])(1)}).call(this,i(3))},function(t,e,i){(function(e){t.exports=function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){var i=e[s][1][t];return n(i||t)}),h,h.exports,t,e,i,r)}return i[s].exports}for(var o=!1,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){function r(){Object.call(this)}r.prototype=Object.create(Object.prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{width:{value:0,writable:!0},height:{value:0,writable:!0},frames:{value:[],writable:!0},buffer:{value:[],writable:!0}}),r.prototype.init=function(t){if(!(t&&t.length>0))return!1;this.buffer=t;var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||57!==t[e++]||97!==t[e++])return!1;var i=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,n=t[e++],o=n>>7,s=1<<1+(7&n);t[e++],t[e++];var a=null;o&&(a=e,e+=3*s);var l=!0;this.frames=[];var h=0,u=null,c=0;for(this.width=i,this.height=r;l&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,t[e++],t[e++],e++;else for(e+=12;0!==(T=t[e++]);)e+=T;break;case 249:if(4!==t[e++]||0!==t[e+4])throw"Invalid graphics extension block.";var p=t[e++];h=t[e++]|t[e++]<<8,u=t[e++],0==(1&p)&&(u=null),c=p>>2&7,e++;break;case 254:for(;0!==(T=t[e++]);)e+=T;break;default:throw"Unknown graphic control label: 0x"+t[e-1].toString(16)}break;case 44:var f=t[e++]|t[e++]<<8,d=t[e++]|t[e++]<<8,g=t[e++]|t[e++]<<8,m=t[e++]|t[e++]<<8,v=t[e++],y=v>>6&1,_=a,x=!1;v>>7&&(x=!0,_=e,e+=3*(1<<1+(7&v)));var b=e;for(e++;;){var T;if(0===(T=t[e++]))break;e+=T}this.frames.push({x:f,y:d,width:g,height:m,has_local_palette:x,palette_offset:_,data_offset:b,data_length:e-b,transparent_index:u,interlaced:!!y,delay:h,disposal:c});break;case 59:l=!1;break;default:return!1}return!0},r.prototype.numFrames=function(){return this.frames.length},r.prototype.frameInfo=function(t){if(t<0||t>=this.frames.length)throw"Frame index out of range.";return this.frames[t]},r.prototype.decodeAndBlitFrameBGRA=function(t,e){var i=this.frameInfo(t),r=i.width*i.height,n=new Uint8Array(r);this.gifReaderLZWOutputIndexStream(this.buffer,i.data_offset,n,r);var o=i.palette_offset,s=i.transparent_index;null===s&&(s=256);var a=i.width,l=this.width-a,h=a,u=4*(i.y*this.width+i.x),c=4*((i.y+i.height)*this.width+i.x),p=u,f=4*l;!0===i.interlaced&&(f+=4*(a+l)*7);for(var d=8,g=0,m=n.length;g<m;++g){var v=n[g];if(0===h&&(h=a,(p+=f)>=c&&(f=l+4*(a+l)*(d-1),p=u+(a+l)*(d<<1),d>>=1)),v===s)p+=4;else{var y=this.buffer[o+3*v],_=this.buffer[o+3*v+1],x=this.buffer[o+3*v+2];e[p++]=x,e[p++]=_,e[p++]=y,e[p++]=255}--h}},r.prototype.decodeAndBlitFrameRGBA=function(t,e){var i=this.frameInfo(t),r=i.width*i.height,n=new Uint8Array(r);this.gifReaderLZWOutputIndexStream(this.buffer,i.data_offset,n,r);var o=i.palette_offset,s=i.transparent_index;null===s&&(s=256);var a=i.width,l=this.width-a,h=a,u=4*(i.y*this.width+i.x),c=4*((i.y+i.height)*this.width+i.x),p=u,f=4*l;!0===i.interlaced&&(f+=4*(a+l)*7);for(var d=8,g=0,m=n.length;g<m;++g){var v=n[g];if(0===h&&(h=a,(p+=f)>=c&&(f=l+4*(a+l)*(d-1),p=u+(a+l)*(d<<1),d>>=1)),v===s)p+=4;else{var y=this.buffer[o+3*v],_=this.buffer[o+3*v+1],x=this.buffer[o+3*v+2];e[p++]=y,e[p++]=_,e[p++]=x,e[p++]=255}--h}},r.prototype.gifReaderLZWOutputIndexStream=function(t,e,i,r){for(var n=t[e++],o=1<<n,s=o+1,a=s+1,l=n+1,h=(1<<l)-1,u=0,c=0,p=0,f=t[e++],d=new Int32Array(4096),g=null;;){for(;u<16&&0!==f;)c|=t[e++]<<u,u+=8,1===f?f=t[e++]:--f;if(u<l)break;var m=c&h;if(c>>=l,u-=l,m!==o){if(m===s)break;for(var v=m<a?m:g,y=0,_=v;_>o;)_=d[_]>>8,++y;var x=_;if(p+y+(v!==m?1:0)>r)return;i[p++]=x;var b=p+=y;for(v!==m&&(i[p++]=x),_=v;y--;)_=d[_],i[--b]=255&_,_>>=8;null!==g&&a<4096&&(d[a++]=g<<8|x,a>=h+1&&l<12&&(++l,h=h<<1|1)),g=m}else a=s+1,h=(1<<(l=n+1))-1,g=null}return i}},{}],2:[function(t,e,i){var r=t("./GifReader");function n(t){t=null!=t?t:PIXI.Texture.EMPTY,PIXI.Sprite.call(this,t)}n.prototype=Object.create(PIXI.Sprite.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{onStartLoad:{value:null,writable:!0},onLoadProgress:{value:null,writable:!0},onLoadError:{value:null,writable:!0},onLoaded:{value:null,writable:!0},gifLoader:{value:null,writable:!0},_isError:{value:!1,writable:!0},isError:{get:function(){return this._isError}},_isLoaded:{value:!1,writable:!0},isLoaded:{get:function(){return this._isLoaded}},_avgDelay:{value:0,writable:!0},avgDelay:{get:function(){return this._avgDelay}},src:{value:"",writable:!0},key:{value:"",writable:!0},textures:{value:[],writable:!0},timeOut:{value:null,writable:!0},currentTimer:{value:0,writable:!0},currentFrame:{value:0,writable:!0}}),n.prototype.md5=function(t){function e(t,e){return t<<e|t>>>32-e}function i(t,e){var i,r,n,o,s;return n=2147483648&t,o=2147483648&e,s=(1073741823&t)+(1073741823&e),(i=1073741824&t)&(r=1073741824&e)?2147483648^s^n^o:i|r?1073741824&s?3221225472^s^n^o:1073741824^s^n^o:s^n^o}function r(t,r,n,o,s,a,l){return t=i(t,i(i(function(t,e,i){return t&e|~t&i}(r,n,o),s),l)),i(e(t,a),r)}function n(t,r,n,o,s,a,l){return t=i(t,i(i(function(t,e,i){return t&i|e&~i}(r,n,o),s),l)),i(e(t,a),r)}function o(t,r,n,o,s,a,l){return t=i(t,i(i(function(t,e,i){return t^e^i}(r,n,o),s),l)),i(e(t,a),r)}function s(t,r,n,o,s,a,l){return t=i(t,i(i(function(t,e,i){return e^(t|~i)}(r,n,o),s),l)),i(e(t,a),r)}function a(t){var e,i="",r="";for(e=0;e<=3;e++)i+=(r="0"+(t>>>8*e&255).toString(16)).substr(r.length-2,2);return i}var l,h,u,c,p,f,d,g,m,v=Array();for(v=function(t){for(var e,i=t.length,r=i+8,n=16*((r-r%64)/64+1),o=Array(n-1),s=0,a=0;a<i;)s=a%4*8,o[e=(a-a%4)/4]=o[e]|t.charCodeAt(a)<<s,a++;return s=a%4*8,o[e=(a-a%4)/4]=o[e]|128<<s,o[n-2]=i<<3,o[n-1]=i>>>29,o}(t=function(t){t=t.replace(/\r\n/g,"\n");for(var e="",i=0;i<t.length;i++){var r=t.charCodeAt(i);r<128?e+=String.fromCharCode(r):r>127&&r<2048?(e+=String.fromCharCode(r>>6|192),e+=String.fromCharCode(63&r|128)):(e+=String.fromCharCode(r>>12|224),e+=String.fromCharCode(r>>6&63|128),e+=String.fromCharCode(63&r|128))}return e}(t)),f=1732584193,d=4023233417,g=2562383102,m=271733878,l=0;l<v.length;l+=16)h=f,u=d,c=g,p=m,f=r(f,d,g,m,v[l+0],7,3614090360),m=r(m,f,d,g,v[l+1],12,3905402710),g=r(g,m,f,d,v[l+2],17,606105819),d=r(d,g,m,f,v[l+3],22,3250441966),f=r(f,d,g,m,v[l+4],7,4118548399),m=r(m,f,d,g,v[l+5],12,1200080426),g=r(g,m,f,d,v[l+6],17,2821735955),d=r(d,g,m,f,v[l+7],22,4249261313),f=r(f,d,g,m,v[l+8],7,1770035416),m=r(m,f,d,g,v[l+9],12,2336552879),g=r(g,m,f,d,v[l+10],17,4294925233),d=r(d,g,m,f,v[l+11],22,2304563134),f=r(f,d,g,m,v[l+12],7,1804603682),m=r(m,f,d,g,v[l+13],12,4254626195),g=r(g,m,f,d,v[l+14],17,2792965006),f=n(f,d=r(d,g,m,f,v[l+15],22,1236535329),g,m,v[l+1],5,4129170786),m=n(m,f,d,g,v[l+6],9,3225465664),g=n(g,m,f,d,v[l+11],14,643717713),d=n(d,g,m,f,v[l+0],20,3921069994),f=n(f,d,g,m,v[l+5],5,3593408605),m=n(m,f,d,g,v[l+10],9,38016083),g=n(g,m,f,d,v[l+15],14,3634488961),d=n(d,g,m,f,v[l+4],20,3889429448),f=n(f,d,g,m,v[l+9],5,568446438),m=n(m,f,d,g,v[l+14],9,3275163606),g=n(g,m,f,d,v[l+3],14,4107603335),d=n(d,g,m,f,v[l+8],20,1163531501),f=n(f,d,g,m,v[l+13],5,2850285829),m=n(m,f,d,g,v[l+2],9,4243563512),g=n(g,m,f,d,v[l+7],14,1735328473),f=o(f,d=n(d,g,m,f,v[l+12],20,2368359562),g,m,v[l+5],4,4294588738),m=o(m,f,d,g,v[l+8],11,2272392833),g=o(g,m,f,d,v[l+11],16,1839030562),d=o(d,g,m,f,v[l+14],23,4259657740),f=o(f,d,g,m,v[l+1],4,2763975236),m=o(m,f,d,g,v[l+4],11,1272893353),g=o(g,m,f,d,v[l+7],16,4139469664),d=o(d,g,m,f,v[l+10],23,3200236656),f=o(f,d,g,m,v[l+13],4,681279174),m=o(m,f,d,g,v[l+0],11,3936430074),g=o(g,m,f,d,v[l+3],16,3572445317),d=o(d,g,m,f,v[l+6],23,76029189),f=o(f,d,g,m,v[l+9],4,3654602809),m=o(m,f,d,g,v[l+12],11,3873151461),g=o(g,m,f,d,v[l+15],16,530742520),f=s(f,d=o(d,g,m,f,v[l+2],23,3299628645),g,m,v[l+0],6,4096336452),m=s(m,f,d,g,v[l+7],10,1126891415),g=s(g,m,f,d,v[l+14],15,2878612391),d=s(d,g,m,f,v[l+5],21,4237533241),f=s(f,d,g,m,v[l+12],6,1700485571),m=s(m,f,d,g,v[l+3],10,2399980690),g=s(g,m,f,d,v[l+10],15,4293915773),d=s(d,g,m,f,v[l+1],21,2240044497),f=s(f,d,g,m,v[l+8],6,1873313359),m=s(m,f,d,g,v[l+15],10,4264355552),g=s(g,m,f,d,v[l+6],15,2734768916),d=s(d,g,m,f,v[l+13],21,1309151649),f=s(f,d,g,m,v[l+4],6,4149444226),m=s(m,f,d,g,v[l+11],10,3174756917),g=s(g,m,f,d,v[l+2],15,718787259),d=s(d,g,m,f,v[l+9],21,3951481745),f=i(f,h),d=i(d,u),g=i(g,c),m=i(m,p);return(a(f)+a(d)+a(g)+a(m)).toLowerCase()},n.prototype.load=function(t){var e=this;e.src=t,e.key=e.md5(t);var i=AppInfo.gifPlayer[e.key];if(null!=i&&1==i.isLoaded)e._isError=!1,e._isLoaded=!0,e._createMovie(!0),e.onLoaded&&"function"==typeof e.onLoaded&&e.onLoaded();else{if(null!=i)return void(null!=AppInfo.gifMovieManager[e.key]?AppInfo.gifMovieManager[e.key].push(e):AppInfo.gifMovieManager[e.key]=[e]);AppInfo.gifPlayer[this.key]={isLoaded:!1,textures:null,gifLoader:null,avgDelay:0};var n=new XMLHttpRequest;n.open("GET",t,!0),"responseType"in n?n.responseType="arraybuffer":"overrideMimeType"in n?n.overrideMimeType("text/plain; charset=x-user-defined"):n.setRequestHeader("Accept-Charset","x-user-defined"),e.onStartLoad&&"function"==typeof e.onStartLoad&&(n.onloadstart=e.onStartLoad),e.onLoadProgress&&"function"==typeof e.onLoadProgress&&(n.onprogress=e.onLoadProgress),e.onLoadError&&"function"==typeof e.onLoadError&&(n.onerror=e.onLoadError),n.onload=function(t){if(200!=this.status)return e._isError=!0,!1;"response"in this||(this.response=new VBArray(this.responseText).toArray().map(String.fromCharCode).join(""));var i=this.response;i.toString().indexOf("ArrayBuffer")>0&&(i=new Uint8Array(i));for(var n=[],o=i.length,s=0;s<o;s++){if(i instanceof Uint8Array){n=i;break}n.push(255&i.charCodeAt(s))}e.gifLoader=new r,e.gifLoader.init(n)?(e._isError=!1,e._isLoaded=!0,e._createMovie(!1)):(e._isError=!0,e._isLoaded=!1,e.gifLoader=null,e.onLoadError&&"function"==typeof e.onLoadError&&e.onLoadError()),e.onLoaded&&"function"==typeof e.onLoaded&&e.onLoaded()},n.send()}},n.prototype._createMovie=function(t){if(t){var e=AppInfo.gifPlayer[this.key];this._avgDelay=e.avgDelay,this.gifLoader=e.gifLoader,this.currentFrame=0,this.textures=e.textures,this.texture=e.textures[this.currentFrame].texture,AppInfo.AnimationGifPool.push(this)}else if(!this._isError&&this._isLoaded)try{var i,r,n=this.gifLoader.numFrames();clearTimeout(this.timeOut),this.textures=[];var o=new PIXI.CanvasBuffer(this.gifLoader.width,this.gifLoader.height);i=o.context;var s,a,l,h,u,c=0;r=i.createImageData(this.gifLoader.width,this.gifLoader.height);for(var p=0;p<n;p++){if(l=10*(h=this.gifLoader.frameInfo(p)).delay,this._avgDelay+=10*l,p>0)switch(c){case 1:break;case 2:Utilities.Browser.detectIE()&&(i.strokeStyle="#ffffff",i.beginPath(),i.rect(u.x,u.y,u.width,u.height),i.stroke(),i.closePath()),i.clearRect(u.x,u.y,u.width,u.height),r=i.getImageData(0,0,this.gifLoader.width,this.gifLoader.height);break;case 3:r=i.getImageData(0,0,this.gifLoader.width,this.gifLoader.height);break;default:case 0:}c=h.disposal,u=h,this.gifLoader.decodeAndBlitFrameRGBA(p,r.data),i.putImageData(r,0,0),(s=new Image).src=o.canvas.toDataURL("image/png"),a=new PIXI.BaseTexture(s),this.textures.push({texture:new PIXI.Texture(a),delay:l})}o.destroy(),o=null,i=null,this._avgDelay=0/n,(e=AppInfo.gifPlayer[this.key]).isLoaded=!0,e.textures=this.textures,e.gifLoader=this.gifLoader,e.avgDelay=this._avgDelay,this.texture=this.textures[this.currentFrame].texture,AppInfo.AnimationGifPool.push(this);var f=AppInfo.gifMovieManager[this.key];if(null!=f&&0!=f.length){for(var d=null,g=0;g<f.length;g++)(d=f[g])._avgDelay=this._avgDelay,d.textures=this.textures,d.gifLoader=this.gifLoader,d.texture=this.texture,d.timeOut=this.timeOut,d.currentFrame=0,AppInfo.AnimationGifPool.push(d),d.onLoaded&&"function"==typeof d.onLoaded&&d.onLoaded();AppInfo.gifMovieManager[this.key]=null,delete AppInfo.gifMovieManager[this.key]}}catch(t){this._isError=!0,this._isLoaded=!0}},n.prototype.playAnimation=function(){var t=this.gifLoader.numFrames();if(1!=t){var e=this.textures[this.currentFrame].delay,i=performance.now();i-this.currentTimer>=e&&(this.currentFrame++,this.currentFrame==t&&(this.currentFrame=0),this.texture=this.textures[this.currentFrame].texture,this.currentTimer=i)}},n.prototype.start=function(){},n.prototype.stop=function(){}},{"./GifReader":1}],3:[function(t,e,i){e.exports={GifReader:t("./GifReader"),GifMovie:t("./GifMovie")}},{"./GifReader":1,"./GifMovie":2}],4:[function(t,i,r){(function(e){if("undefined"==typeof PIXI)window.console;else{var r=i.exports=t("./core");PIXI.extras.GifMovie=t("./GifMovie"),e.GIF=r}}).call(this,void 0!==e?e:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{"./core":3,"./GifMovie":2}]},{},[4])(4)}).call(this,i(3))},function(t,e){function i(t,e,i){GOWN.Theme.call(this,i),this._onComplete=e,t?this.loadImage(t):this.loadComplete()}i.prototype=Object.create(GOWN.Theme.prototype),i.prototype.constructor=i,i.prototype.themeLoadComplete=GOWN.Theme.prototype.loadComplete,i.prototype.loadComplete=function(t,e){this.themeLoadComplete(this,t,e);var r=GOWN.Button,n=i.BUTTON_SCALE_9_GRID;if(this.setSkin(r.SKIN_NAME,r.UP,this.getScaleContainer("button-up-skin",n)),this.setSkin(r.SKIN_NAME,r.DOWN,this.getScaleContainer("button-down-skin",n)),this.setSkin(r.SKIN_NAME,r.HOVER,this.getScaleContainer("button-hover-skin",n)),GOWN.ToggleButton){var o=GOWN.ToggleButton,s=i.SELECTED_BUTTON_SCALE_9_GRID;this.setSkin(o.SKIN_NAME,r.UP,this.getScaleContainer("button-up-skin",n)),this.setSkin(o.SKIN_NAME,r.DOWN,this.getScaleContainer("button-down-skin",n)),this.setSkin(o.SKIN_NAME,r.HOVER,this.getScaleContainer("button-hover-skin",n)),this.setSkin(o.SKIN_NAME,o.SELECTED_UP,this.getScaleContainer("button-selected-up-skin",s)),this.setSkin(o.SKIN_NAME,o.SELECTED_DOWN,this.getScaleContainer("button-selected-down-skin",s)),this.setSkin(o.SKIN_NAME,o.SELECTED_HOVER,this.getScaleContainer("button-selected-hover-skin",s))}if(GOWN.ScrollBar){var a=GOWN.ScrollBar;this.setSkin(a.SKIN_NAME,"horizontal_track",this.getScaleContainer("horizontal-scroll-bar-track-skin",i.HORIZONTAL_SCROLL_BAR_TRACK_SCALE_9_GRID)),this.setSkin(a.SKIN_NAME,"vertical_track",this.getScaleContainer("vertical-scroll-bar-track-skin",i.VERTICAL_SCROLL_BAR_TRACK_SCALE_9_GRID))}if(GOWN.ScrollThumb){var l=GOWN.ScrollThumb;this.setSkin(l.SKIN_NAME,"horizontal_"+r.UP,this.getScaleContainer("horizontal-scroll-bar-thumb-up-skin",i.HORIZONTAL_SCROLL_BAR_THUMB_SCALE_9_GRID)),this.setSkin(l.SKIN_NAME,"horizontal_"+r.DOWN,this.getScaleContainer("horizontal-scroll-bar-thumb-down-skin",i.HORIZONTAL_SCROLL_BAR_THUMB_SCALE_9_GRID)),this.setSkin(l.SKIN_NAME,"horizontal_"+r.HOVER,this.getScaleContainer("horizontal-scroll-bar-thumb-hover-skin",i.HORIZONTAL_SCROLL_BAR_THUMB_SCALE_9_GRID)),this.setSkin(l.SKIN_NAME,"horizontal_thumb",this.getImage("horizontal-scroll-bar-thumb-icon")),this.setSkin(l.SKIN_NAME,"vertical_"+r.UP,this.getScaleContainer("vertical-scroll-bar-thumb-up-skin",i.VERTICAL_SCROLL_BAR_THUMB_SCALE_9_GRID)),this.setSkin(l.SKIN_NAME,"vertical_"+r.DOWN,this.getScaleContainer("vertical-scroll-bar-thumb-down-skin",i.VERTICAL_SCROLL_BAR_THUMB_SCALE_9_GRID)),this.setSkin(l.SKIN_NAME,"vertical_"+r.HOVER,this.getScaleContainer("vertical-scroll-bar-thumb-hover-skin",i.VERTICAL_SCROLL_BAR_THUMB_SCALE_9_GRID)),this.setSkin(l.SKIN_NAME,"vertical_thumb",this.getImage("vertical-scroll-bar-thumb-icon"))}if(GOWN.TextInput){var h=GOWN.TextInput;this.setSkin(h.SKIN_NAME,"background",this.getScaleContainer("text-input-background-skin",i.TEXT_INPUT_SCALE_9_GRID))}if(GOWN.CheckBox){var u=GOWN.CheckBox;this.setSkin(u.SKIN_NAME,u.UP,this.getImage("check-up-icon")),this.setSkin(u.SKIN_NAME,u.DOWN,this.getImage("check-down-icon")),this.setSkin(u.SKIN_NAME,u.HOVER,this.getImage("check-hover-icon")),this.setSkin(u.SKIN_NAME,u.SELECTED_UP,this.getImage("check-selected-up-icon")),this.setSkin(u.SKIN_NAME,u.SELECTED_DOWN,this.getImage("check-selected-down-icon")),this.setSkin(u.SKIN_NAME,u.SELECTED_HOVER,this.getImage("check-selected-hover-icon"))}this._onComplete&&this._onComplete()},i.BUTTON_SCALE_9_GRID=new PIXI.Rectangle(6,6,70,10),i.SELECTED_BUTTON_SCALE_9_GRID=new PIXI.Rectangle(6,6,52,10),i.HORIZONTAL_SCROLL_BAR_THUMB_SCALE_9_GRID=new PIXI.Rectangle(5,2,42,6),i.HORIZONTAL_SCROLL_BAR_TRACK_SCALE_9_GRID=new PIXI.Rectangle(1,2,2,11),i.HORIZONTAL_SCROLL_BAR_STEP_BUTTON_SCALE_9_GRID=new PIXI.Rectangle(2,2,10,11),i.TEXT_INPUT_SCALE_9_GRID=new PIXI.Rectangle(2,2,148,18),i.VERTICAL_SCROLL_BAR_THUMB_SCALE_9_GRID=new PIXI.Rectangle(2,5,6,42),i.VERTICAL_SCROLL_BAR_TRACK_SCALE_9_GRID=new PIXI.Rectangle(2,1,11,2),i.VERTICAL_SCROLL_BAR_STEP_BUTTON_SCALE_9_GRID=new PIXI.Rectangle(2,2,11,10),GOWN.AeonTheme=i},function(t,e,i){(function(r){var n,o,s,a=t.exports&&void 0!==r?r:this||window;(a._gsQueue||(a._gsQueue=[])).push((function(){"use strict";a._gsDefine("easing.CustomEase",["easing.Ease"],(function(t){var e=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,i=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,r=/[\+\-]?\d*\.?\d+e[\+\-]?\d+/gi,n=/[cLlsS]/g,o="CustomEase only accepts Cubic Bezier data.",s=function(t,e,i,r,n,o,a,l,h,u,c){var p,f=(t+i)/2,d=(e+r)/2,g=(i+n)/2,m=(r+o)/2,v=(n+a)/2,y=(o+l)/2,_=(f+g)/2,x=(d+m)/2,b=(g+v)/2,T=(m+y)/2,w=(_+b)/2,S=(x+T)/2,A=a-t,P=l-e,E=Math.abs((i-a)*P-(r-l)*A),C=Math.abs((n-a)*P-(o-l)*A);return u||(u=[{x:t,y:e},{x:a,y:l}],c=1),u.splice(c||u.length-1,0,{x:w,y:S}),(E+C)*(E+C)>h*(A*A+P*P)&&(p=u.length,s(t,e,f,d,_,x,w,S,h,u,c),s(w,S,b,T,v,y,a,l,h,u,c+1+(u.length-p))),u},a=function(t){var e=this.lookup[t*this.l|0]||this.lookup[this.l-1];return e.nx<t&&(e=e.n),e.y+(t-e.x)/e.cx*e.cy},l=function(e,i,r){this._calcEnd=!0,this.id=e,e&&(t.map[e]=this),this.getRatio=a,this.setData(i,r)},h=l.prototype=new t;return h.constructor=l,h.setData=function(t,a){var l,h,u,c,p,f,d,g,m,v,y=(t=t||"0,0,1,1").match(e),_=1,x=[];if(v=(a=a||{}).precision||1,this.data=t,this.lookup=[],this.points=x,this.fast=v<=1,(n.test(t)||-1!==t.indexOf("M")&&-1===t.indexOf("C"))&&(y=function(t){var e,n,s,a,l,h,u,c,p,f,d,g=(t+"").replace(r,(function(t){var e=+t;return e<1e-4&&e>-1e-4?0:e})).match(i)||[],m=[],v=0,y=0,_=g.length,x=2;for(e=0;e<_;e++)if(p=a,isNaN(g[e])?l=(a=g[e].toUpperCase())!==g[e]:e--,n=+g[e+1],s=+g[e+2],l&&(n+=v,s+=y),e||(u=n,c=s),"M"===a)h&&h.length<8&&(m.length-=1,x=0),v=u=n,y=c=s,h=[n,s],x=2,m.push(h),e+=2,a="L";else if("C"===a)h||(h=[0,0]),h[x++]=n,h[x++]=s,l||(v=y=0),h[x++]=v+1*g[e+3],h[x++]=y+1*g[e+4],h[x++]=v+=1*g[e+5],h[x++]=y+=1*g[e+6],e+=6;else if("S"===a)"C"===p||"S"===p?(f=v-h[x-4],d=y-h[x-3],h[x++]=v+f,h[x++]=y+d):(h[x++]=v,h[x++]=y),h[x++]=n,h[x++]=s,l||(v=y=0),h[x++]=v+=1*g[e+3],h[x++]=y+=1*g[e+4],e+=4;else{if("L"!==a&&"Z"!==a)throw o;"Z"===a&&(n=u,s=c,h.closed=!0),("L"===a||Math.abs(v-n)>.5||Math.abs(y-s)>.5)&&(h[x++]=v+(n-v)/3,h[x++]=y+(s-y)/3,h[x++]=v+2*(n-v)/3,h[x++]=y+2*(s-y)/3,h[x++]=n,h[x++]=s,"L"===a&&(e+=2)),v=n,y=s}return m[0]}(t)),4===(l=y.length))y.unshift(0,0),y.push(1,1),l=8;else if((l-2)%6)throw o;for(0==+y[0]&&1==+y[l-2]||function(t,e,i){i||0===i||(i=Math.max(+t[t.length-1],+t[1]));var r,n=-1*+t[0],o=-i,s=t.length,a=1/(+t[s-2]+n),l=-e||(Math.abs(+t[s-1]-+t[1])<.01*(+t[s-2]-+t[0])?function(t){var e,i=t.length,r=999999999999;for(e=1;e<i;e+=6)+t[e]<r&&(r=+t[e]);return r}(t)+o:+t[s-1]+o);for(l=l?1/l:-a,r=0;r<s;r+=2)t[r]=(+t[r]+n)*a,t[r+1]=(+t[r+1]+o)*l}(y,a.height,a.originY),this.rawBezier=y,c=2;c<l;c+=6)h={x:+y[c-2],y:+y[c-1]},u={x:+y[c+4],y:+y[c+5]},x.push(h,u),s(h.x,h.y,+y[c],+y[c+1],+y[c+2],+y[c+3],u.x,u.y,1/(2e5*v),x,x.length-1);for(l=x.length,c=0;c<l;c++)d=x[c],g=x[c-1]||d,d.x>g.x||g.y!==d.y&&g.x===d.x||d===g?(g.cx=d.x-g.x,g.cy=d.y-g.y,g.n=d,g.nx=d.x,this.fast&&c>1&&Math.abs(g.cy/g.cx-x[c-2].cy/x[c-2].cx)>2&&(this.fast=!1),g.cx<_&&(g.cx?_=g.cx:(g.cx=.001,c===l-1&&(g.x-=.001,_=Math.min(_,.001),this.fast=!1)))):(x.splice(c--,1),l--);if(l=1/_+1|0,this.l=l,p=1/l,f=0,d=x[0],this.fast){for(c=0;c<l;c++)m=c*p,d.nx<m&&(d=x[++f]),h=d.y+(m-d.x)/d.cx*d.cy,this.lookup[c]={x:m,cx:p,y:h,cy:0,nx:9},c&&(this.lookup[c-1].cy=h-this.lookup[c-1].y);this.lookup[l-1].cy=x[x.length-1].y-h}else{for(c=0;c<l;c++)d.nx<c*p&&(d=x[++f]),this.lookup[c]=d;f<x.length-1&&(this.lookup[c-1]=x[x.length-2])}return this._calcEnd=1!==x[x.length-1].y||0!==x[0].y,this},h.getRatio=a,h.getSVGData=function(t){return l.getSVGData(this,t)},l.create=function(t,e,i){return new l(t,e,i)},l.version="0.2.1",l.bezierToPoints=s,l.get=function(e){return t.map[e]},l.getSVGData=function(e,i){var r,n,o,s,a,l,h,u,c,p,f=1e3,d=(i=i||{}).width||100,g=i.height||100,m=i.x||0,v=(i.y||0)+g,y=i.path;if(i.invert&&(g=-g,v=0),(e=e.getRatio?e:t.map[e]||void 0).rawBezier){for(r=[],h=e.rawBezier.length,o=0;o<h;o+=2)r.push(((m+e.rawBezier[o]*d)*f|0)/f+","+((v+e.rawBezier[o+1]*-g)*f|0)/f);r[0]="M"+r[0],r[1]="C"+r[1]}else for(r=["M"+m+","+v],s=1/(h=Math.max(5,200*(i.precision||1))),u=5/(h+=2),c=((m+s*d)*f|0)/f,n=((p=((v+e.getRatio(s)*-g)*f|0)/f)-v)/(c-m),o=2;o<h;o++)a=((m+o*s*d)*f|0)/f,l=((v+e.getRatio(o*s)*-g)*f|0)/f,(Math.abs((l-p)/(a-c)-n)>u||o===h-1)&&(r.push(c+","+p),n=(l-p)/(a-c)),c=a,p=l;return y&&("string"==typeof y?document.querySelector(y):y).setAttribute("d",r.join(" ")),r.join(" ")},l}),!0)})),a._gsDefine&&a._gsQueue.pop()(),function(r){"use strict";o=[i(12)],void 0===(s="function"==typeof(n=function(){return(a.GreenSockGlobals||a).CustomEase})?n.apply(e,o):n)||(t.exports=s)}()}).call(this,i(3))},function(t,e,i){"use strict";var r;void 0===(r=function(t){function e(){throw new Error("Cannot instance this class")}function i(t,e,i,r){t=t||null,e=e||null,i=i||e,r=r||e;var n=new GOWN.Theme(!1);n.setSkin(GOWN.Slider.SKIN_NAME,"horizontal_track",(function(){if(t)return new PIXI.Sprite(t);var e=new PIXI.Graphics;return e.DrawDashedLine(0,0,240,0,3355443,5,1,15),new PIXI.Sprite(e.generateTexture())})),n.setSkin(GOWN.ScrollThumb.SKIN_NAME,"horizontal_"+GOWN.Button.UP,(function(){if(e)return new PIXI.Sprite(e);var t=new PIXI.Graphics;return t.beginFill(3355443,1),t.drawRoundedRect(0,0,6,25,5),t.endFill(),new PIXI.Sprite(t.generateTexture())})),n.setSkin(GOWN.ScrollThumb.SKIN_NAME,"horizontal_"+GOWN.Button.DOWN,(function(){if(i)return new PIXI.Sprite(i);var t=new PIXI.Graphics;return t.beginFill(3355443,1),t.drawRoundedRect(0,0,6,25,5),t.endFill(),new PIXI.Sprite(t.generateTexture())})),n.setSkin(GOWN.ScrollThumb.SKIN_NAME,"horizontal_"+GOWN.Button.HOVER,(function(){if(r)return new PIXI.Sprite(r);var t=new PIXI.Graphics;return t.beginFill(3355443,1),t.drawRoundedRect(0,0,6,25,5),t.endFill(),new PIXI.Sprite(t.generateTexture())})),GOWN.Slider.call(this,null,n),this.thumb.width=8,this.thumb.height=25,this.thumb.y=-7,this.thumb.buttonMode=!0}function r(t){this.style=t,this.skinName=GOWN.CellRenderDropDownSkin.SKIN_NAME,this._validStates=GOWN.Button.stateNames.slice(0),this._validStates.push(GOWN.CellRenderDropDownSkin.DISABLE),this._validStates.push(GOWN.CellRenderDropDownSkin.SELECTED_UP),this._validStates.push(GOWN.CellRenderDropDownSkin.SELECTED_HOVER),this._validStates.push(GOWN.CellRenderDropDownSkin.SELECTED_DOWN),this._validStates.push(GOWN.CellRenderDropDownSkin.SELECTED_DISABLE);var e=new GOWN.Theme(!1);e.textStyle.fontSize=50,e.setSkin(GOWN.CellRenderDropDownSkin.SKIN_NAME,GOWN.Button.UP,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.CellRenderer_selectedDisableSkin)})),e.setSkin(GOWN.CellRenderDropDownSkin.SKIN_NAME,GOWN.Button.HOVER,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.CellRenderer_selectedOverSkin)})),e.setSkin(GOWN.CellRenderDropDownSkin.SKIN_NAME,GOWN.Button.DOWN,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.CellRenderer_selectedUpSkin)})),e.setSkin(GOWN.CellRenderDropDownSkin.SKIN_NAME,GOWN.CellRenderDropDownSkin.DISABLE,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.CellRenderer_disabledSkin)})),e.setSkin(GOWN.CellRenderDropDownSkin.SKIN_NAME,GOWN.CellRenderDropDownSkin.SELECTED_UP,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.CellRenderer_selectedUpSkin)})),e.setSkin(GOWN.CellRenderDropDownSkin.SKIN_NAME,GOWN.CellRenderDropDownSkin.SELECTED_HOVER,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.CellRenderer_selectedOverSkin)})),e.setSkin(GOWN.CellRenderDropDownSkin.SKIN_NAME,GOWN.CellRenderDropDownSkin.SELECTED_DOWN,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.CellRenderer_selectedDownSkin)})),e.setSkin(GOWN.CellRenderDropDownSkin.SKIN_NAME,GOWN.CellRenderDropDownSkin.SELECTED_DISABLE,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.CellRenderer_selectedOverSkin)})),GOWN.Button.call(this,e,this.skinName),this.label="",this.createLabel(),this.labelText.style={font:"20px Arial",fill:65535,align:"left"},this.mouseclick=this.onSelect.bind(this)}e.prototype=Object.create(Object.prototype),e.prototype.constructor=e,Object.defineProperties(e.prototype,{}),Object.defineProperties(GOWN.Button.prototype,{customHitArea:{value:null,writable:!0}}),GOWN.Button.prototype.updateDimensions=function(){var t=this.worldWidth,e=this.worldHeight;this.customHitArea?this.hitArea=this.customHitArea:this.hitArea?(this.hitArea.width=t,this.hitArea.height=e):this.hitArea=new PIXI.Rectangle(0,0,t,e);for(var i=0;i<this._validStates.length;i++){var r=this._validStates[i],n=this.skinCache[r];n&&(n.width=t,n.height=e)}if(this.labelText){var o=e/this._height;this.labelText.style.fontSize=this.theme.textStyle.fontSize*o,this.labelText.style=this.labelText.style,this.updateLabelDimensions()}},Object.defineProperties(GOWN.ScrollArea.prototype,{onScrollStart:{value:null,writable:!0},onScrollStop:{value:null,writable:!0},onScrollMove:{value:null,writable:!0}}),GOWN.ScrollArea.prototype.mousedown=function(t){var e=t.data.getLocalPosition(this);this._start||(this._start=[e.x-this.content.x,e.y-this.content.y],this.onScrollStart&&this.onScrollStart(this.content.x,this.content.y))},GOWN.ScrollArea.prototype.mouseup=function(){this._start=null,this.onScrollStop&&this.onScrollStop(this.content.x,this.content.y)},GOWN.ScrollArea.prototype.mousemove=function(t){if(this._start){var e=t.data.getLocalPosition(this);this._scrollContent(e.x-this._start[0],e.y-this._start[1])&&this.updateBar(),this.onScrollMove&&this.onScrollMove(e,this._start)}},i.prototype=Object.create(GOWN.Slider.prototype),i.prototype.constructor=i,GOWN.DashSlider=i,r.prototype=Object.create(GOWN.Button.prototype),r.prototype.constructor=r,r.SKIN_NAME="CellRenderDropDownSkin",r.DISABLE="disable",r.SELECTED_UP="selected_up",r.SELECTED_HOVER="selected_down",r.SELECTED_DOWN="selected_hover",r.SELECTED_DISABLE="selected_disable",Object.defineProperties(r.prototype,{value:{value:null,writable:!0},currentIndex:{value:0,writable:!0},callBackOnClick:{value:null,writable:!0}}),r.prototype.redraw=function(){GOWN.Button.prototype.redraw.call(this),this.labelText&&(this.style?this.labelText.style=this.style:(this.labelText.style={font:"20px Arial",fill:65535,align:"left"},this.labelText.x=90,this.labelText.y=7))},r.prototype.onSelect=function(){this.callBackOnClick(this.currentIndex),event.stopPropagation()};var n=Object.getOwnPropertyDescriptor(GOWN.Button.prototype,"currentState");function o(t){this.style=t,this.skinName=GOWN.DropDownList.SKIN_NAME,this._validStates=GOWN.Button.stateNames.slice(0),this._validStates.push(o.DISABLE);var e=new GOWN.Theme(!1);e.setSkin(GOWN.DropDownList.SKIN_NAME,GOWN.Button.UP,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.ComboBox_upSkin)})),e.setSkin(GOWN.DropDownList.SKIN_NAME,GOWN.Button.HOVER,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.ComboBox_overSkin)})),e.setSkin(GOWN.DropDownList.SKIN_NAME,GOWN.Button.DOWN,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.ComboBox_downSkin)})),e.setSkin(GOWN.DropDownList.SKIN_NAME,GOWN.DropDownList.DISABLE,(function(){return new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.ComboBox_disabledSkin)})),GOWN.Button.call(this,e,this.skinName),this.label="",this.createLabel(),this._arrayItemDropDown=[],this._dropDownMC=new PIXI.Container,this._dropDownMC.visible=!1,this._dropDownMC.y=ResourceManager.Atlas.AtlasButton.textures.ComboBox_upSkin.height,this._defaultHitAreaWidth=ResourceManager.Atlas.AtlasButton.textures.ComboBox_upSkin.width,this._defaultHitAreaHeight=ResourceManager.Atlas.AtlasButton.textures.ComboBox_upSkin.height,this.hitArea=new PIXI.Rectangle(0,0,this._defaultHitAreaWidth,this._defaultHitAreaHeight),this.addChild(this._dropDownMC),this.mouseclick=this.toggleDropDownMc.bind(this)}function s(t,e){this.skinName=e||GOWN.RadioButton.SKIN_NAME,GOWN.ToggleButton.call(this,t,this.skinName),this.labelDistance=new PIXI.Point(5,0),this.label="",this.createLabel(),this.buttonMode=!0}return Object.defineProperty(r.prototype,"currentState",{set:function(t){this._selected&&(t="selected_"+t),n.set.call(this,t)}}),Object.defineProperty(r.prototype,"selected",{set:function(t){var e=this._currentState;this.invalidState=this._selected!==t||this.invalidState,0===e.indexOf("selected_")&&(e=e.substr(9,e.length)),this._selected=t,this._pressed=!1,this.currentState=e},get:function(){return this._selected}}),r.prototype.toggle=function(){1!=this.selected&&(this.selected=!this._selected)},r.prototype.buttonHandleEvent=GOWN.Button.prototype.handleEvent,r.prototype.handleEvent=function(t){this._enabled&&(t===GOWN.Button.UP&&this._pressed&&this.toggle(),this.buttonHandleEvent(t))},r.prototype.updateLabelDimensions=function(){GOWN.Button.prototype.updateLabelDimensions.call(this),this.labelText&&this.labelText.text&&(this.labelText.x+=5,this.labelText.y+=3)},GOWN.CellRenderDropDownSkin=r,o.prototype=Object.create(GOWN.Button.prototype),o.prototype.constructor=o,o.prototype.redraw=function(t){GOWN.Button.prototype.redraw.call(this),this.labelText&&(null!=this.style?this.labelText.style=this.style:(this.labelText.x=140,this.labelText.y=7,this.labelText.style={font:"20px Arial",fill:65535,align:"center"}))},o.prototype.updateLabelDimensions=function(){GOWN.Button.prototype.updateLabelDimensions.call(this),this.labelText&&this.labelText.text&&(this.labelText.x+=5,this.labelText.y+=3)},o.SKIN_NAME="DropDownList",o.DISABLE="disable",Object.defineProperties(o.prototype,{_defaultHitAreaWidth:{value:0,writable:!0},_defaultHitAreaHeight:{value:0,writable:!0},_yCoorItem:{value:0,writable:!0},_dropDownMC:{value:null,writable:!0},_arrayItemDropDown:{value:null,writable:!0},_indexSelected:{value:0,writable:!0},length:{get:function(){return this._arrayItemDropDown.length}},selectedIndex:{get:function(){var t=this._arrayItemDropDown[this._indexSelected];return null!=t?t.value:null},set:function(t){var e;0!=this._arrayItemDropDown.length&&(null!=(e=this._arrayItemDropDown[this._indexSelected])&&(e.selected=!1));this._indexSelected=t,null!=(e=this._arrayItemDropDown[this._indexSelected])&&(this.labelText.style={font:"20px Arial",fill:65535,align:"left"},this.label=e.label,e.selected=!0,this._dropDownMC.visible=!1,this.hitArea=new PIXI.Rectangle(0,0,this._defaultHitAreaWidth,this._defaultHitAreaHeight))}},selectedItem:{get:function(){var t=this._arrayItemDropDown[this._indexSelected];return null!=t?t.value:null}},disabled:{get:function(){return!this.enabled},set:function(t){this.enabled=!t,0==this.enabled&&(this.currentState=o.DISABLE)}}}),o.prototype.onSelectItem=function(t){this.toggleDropDownMc(),this.selectedIndex=t},o.prototype.toggleDropDownMc=function(){this.enabled&&(this._dropDownMC.visible=!this._dropDownMC.visible,this._dropDownMC.visible?(Utilities.log("set On"),this.hitArea=new PIXI.Rectangle(0,0,this._defaultHitAreaWidth,this._dropDownMC.height+this._dropDownMC.y),this.mouseupoutside=this.hideDropDownMc.bind(this),this.touchendoutside=this.hideDropDownMc.bind(this)):(this.hitArea=new PIXI.Rectangle(0,0,this._defaultHitAreaWidth,this._defaultHitAreaHeight),Utilities.log("set Off"),this.mouseupoutside=null,this.touchendoutside=null))},o.prototype.processMouseDown=function(t,e){var i=this.mouse.originalEvent,r=2===i.button||3===i.which;e?(t[r?"_isRightDown":"_isLeftDown"]=!0,this.dispatchEvent(t,r?"rightdown":"mousedown",this.eventData)):this.hideDropDownMc()},o.prototype.hideDropDownMc=function(){this._dropDownMC.visible&&(this._dropDownMC.visible=!1),this.hitArea=new PIXI.Rectangle(0,0,this._defaultHitAreaWidth,this._defaultHitAreaHeight)},o.prototype.removeAll=function(){var t;for(this._arrayItemDropDown.length=0;0!=this._dropDownMC.numChildren;)t=this._dropDownMC.getChildAt(0),this._dropDownMC.removeChildAt(0),t.destroy();this._yCoorItem=0,this._indexSelected=0},o.prototype.getItemAt=function(t){return this._arrayItemDropDown[t].value},o.prototype.onOverItem=function(){this.interactive=!1},o.prototype.onOutItem=function(){this.interactive=!0},o.prototype.replaceItems=function(t){this.removeAll();for(var e=0;e<t.length;e++)this.addItem(t[e])},o.prototype.addItems=function(t){for(var e=0;e<t.length;e++)this.addItem(t[e])},o.prototype.addItem=function(t){var e=new GOWN.CellRenderDropDownSkin(this.style);e.value=t,e.label=t.label,e.x=50,e.y=this._yCoorItem,e.currentIndex=this._arrayItemDropDown.length,this._arrayItemDropDown.push(e),e.callBackOnClick=this.onSelectItem.bind(this),this._dropDownMC.addChild(e),this._yCoorItem+=e.theme.getSkin(e.skinName,GOWN.Button.UP).height,this.selectedIndex=0},GOWN.DropDownList=o,s.prototype=Object.create(GOWN.ToggleButton.prototype),s.prototype.constructor=s,s.SKIN_NAME="radio_button",s.GroupList={},Object.defineProperties(s.prototype,{_onSelectedCallback:{value:null,writable:!0},onSelected:{get:function(){return this._onSelectedCallback},set:function(t){this._onSelectedCallback=t}},selectedIndex:{get:function(){return void 0!==s.GroupList[this._groupID]?s.GroupList[this._groupID].selectedIndex:-1}},selectedValue:{get:function(){return void 0!==s.GroupList[this._groupID]?s.GroupList[this._groupID].selectedValue:null}},selectedRadio:{get:function(){return void 0!==s.GroupList[this._groupID]?s.GroupList[this._groupID].selectedRadio:null}},_selectIndex:{value:0,writable:!0},selectIndex:{set:function(t){void 0!==s.GroupList[this._groupID]&&s.GroupList[this._groupID].selectedRadio==this&&(s.GroupList[this._groupID].selectedIndex=t),this._selectIndex=t},get:function(){return this._selectIndex}},_selectValue:{value:null,writable:!0},selectValue:{set:function(t){void 0!==s.GroupList[this._groupID]&&s.GroupList[this._groupID].selectedRadio==this&&(s.GroupList[this._groupID].selectedValue=t),this._selectValue=t},get:function(){return this._selectValue}},_selected:{value:!1,writable:!0},selected:{set:function(t){this._selected!=t&&(this._selected||(null!=s.GroupList[this.groupID].selectedRadio&&s.GroupList[this.groupID].selectedRadio.toggleUI(!1),s.GroupList[this.groupID].selectedIndex=this.selectIndex,s.GroupList[this.groupID].selectedValue=this.selectValue,s.GroupList[this.groupID].selectedRadio=this,null!=this.onSelected&&this.onSelected.call(this,{selectedIndex:this.selectIndex,selectedValue:this.selectValue,selectedRadio:this}),this.toggleUI(t)))},get:function(){return this._selected}},_groupID:{value:"",writable:!0},groupID:{set:function(t){if(this._groupID!=t)if(void 0!==s.GroupList[this._groupID]&&(null!=s.GroupList[this._groupID].selectedRadio&&s.GroupList[this._groupID].selectedRadio==this&&(s.GroupList[this._groupID].selectedIndex=-1,s.GroupList[this._groupID].selectedValue=null,s.GroupList[this._groupID].selectedRadio=null),void 0!==s.GroupList[this._groupID].listRadio[this.selectIndex]&&delete s.GroupList[this._groupID].listRadio[this.selectIndex]),this._groupID=t,void 0===s.GroupList[t])s.GroupList[t]={selectedIndex:-1,selectedValue:null,selectedRadio:null,listRadio:{}},s.GroupList[t].listRadio[this.selectIndex]=this,this.selected&&(s.GroupList[t].selectedRadio=this,s.GroupList[t].selectedIndex=this.selectIndex,s.GroupList[t].selectedValue=this.selectValue);else{for(var e,i=-1,r=-1,n=Object.keys(s.GroupList[t].listRadio),o=0;o<n.length;o++)(e=s.GroupList[t].listRadio[n[o]]).selectIndex>r&&(r=e.selectIndex),this==e&&(i=o);if(-1==i){if(-1!=n.indexOf(this.selectIndex.toString())){for(o=0;o<r;o++)if(-1==n.indexOf(o.toString())){this.selectIndex=o;break}o==r&&(this.selectIndex=r+1)}s.GroupList[t].listRadio[this.selectIndex]=this}else this.selectIndex}},get:function(){return this._groupID}},labelDistance:{value:null,writable:!0},labelDistanceX:{get:function(){return this.labelDistance.x},set:function(t){this.labelDistance.x=t}},labelDistanceY:{get:function(){return this.labelDistance.y},set:function(t){this.labelDistance.y=t}}}),s.prototype.toggleUI=function(t){if(this._selected!==t){this.invalidState=this._selected!==t||this.invalidState;var e=this._currentState;0===e.indexOf("selected_")&&(e=e.substr(9,e.length)),this._selected=t,this._pressed=!1,this.currentState=e}},s.prototype.destroy=function(t){void 0!==s.GroupList[this.groupID]&&void 0!==s.GroupList[this._groupID].listRadio[this.selectIndex]&&delete s.GroupList[this._groupID].listRadio[this.selectIndex],GOWN.ToggleButton.prototype.destroy(t)},s.prototype.setInfo=function(t,e,i){return this.selectIndex=t,this.selectValue=e,this.groupID=i,this},s.prototype.updateLabelDimensions=function(){this.labelText&&this.labelText.text&&(this.labelText.x=Math.floor(this.worldWidth+this.labelDistanceX),this.labelText.y=Math.floor((this.worldHeight-this.labelText.height)/2+ +this.labelDistanceY),this.hitArea?(this.hitArea.width=Math.floor(this.worldWidth+this.labelDistanceX+this.labelText.width),this.hitArea.height=Math.floor(this.worldHeight)):this.hitArea=new PIXI.Rectangle(0,0,this.worldWidth+this.labelDistanceX+this.labelText.width,this.worldHeight))},GOWN.RadioButton=s,GOWN.Button.FromTexture=function(t,e,i){e=e||t,i=i||t;var r=new GOWN.Theme(!1);r.setSkin(GOWN.Button.SKIN_NAME,GOWN.Button.UP,(function(){return new PIXI.Sprite(t)})),r.setSkin(GOWN.Button.SKIN_NAME,GOWN.Button.HOVER,(function(){return new PIXI.Sprite(e)})),r.setSkin(GOWN.Button.SKIN_NAME,GOWN.Button.DOWN,(function(){return new PIXI.Sprite(i)}));var n=new GOWN.Button(r);return n.width=t.width,n.height=t.height,n},GOWN.RadioButton.FromTexture=function(t,e,i,r,n,o){i=i||t,n=n||t,r=r||e,o=o||e;var s=new GOWN.Theme(!1);s.setSkin(GOWN.RadioButton.SKIN_NAME,GOWN.Button.UP,(function(){return new PIXI.Sprite(t)})),s.setSkin(GOWN.RadioButton.SKIN_NAME,GOWN.Button.HOVER,(function(){return new PIXI.Sprite(i)})),s.setSkin(GOWN.RadioButton.SKIN_NAME,GOWN.Button.DOWN,(function(){return new PIXI.Sprite(n)})),s.setSkin(GOWN.RadioButton.SKIN_NAME,GOWN.ToggleButton.SELECTED_UP,(function(){return new PIXI.Sprite(e)})),s.setSkin(GOWN.RadioButton.SKIN_NAME,GOWN.ToggleButton.SELECTED_HOVER,(function(){return new PIXI.Sprite(r)})),s.setSkin(GOWN.RadioButton.SKIN_NAME,GOWN.ToggleButton.SELECTED_DOWN,(function(){return new PIXI.Sprite(o)}));var a=new GOWN.RadioButton(s);return a.width=t.width,a.height=t.height,a},Object.defineProperties(GOWN.ScrollBar.prototype,{isFixedThumbSize:{value:!1,writable:!0},thumbSize:{value:20,writable:!0},isAlwaysVisible:{value:!1,writable:!0}}),GOWN.ScrollBar.FromTexture=function(t,e){if(null==e||0==e.length||!(t instanceof GOWN.ScrollArea))return null;var i=e[0],r=e[1],n=null==e[2]?r:e[2],o=null==e[3]?r:e[3],s=null==e[4]?PIXI.Texture.EMPTY:e[4],a=new GOWN.Theme(!1);return a.setSkin(GOWN.ScrollBar.SKIN_NAME,"horizontal_track",(function(){return new PIXI.Sprite(i)})),a.setSkin(GOWN.ScrollBar.SKIN_NAME,"vertical_track",(function(){return new PIXI.Sprite(i)})),a.setSkin(GOWN.ScrollThumb.SKIN_NAME,"horizontal_"+GOWN.Button.UP,(function(){return new PIXI.Sprite(r)})),a.setSkin(GOWN.ScrollThumb.SKIN_NAME,"horizontal_"+GOWN.Button.DOWN,(function(){return new PIXI.Sprite(n)})),a.setSkin(GOWN.ScrollThumb.SKIN_NAME,"horizontal_"+GOWN.Button.HOVER,(function(){return new PIXI.Sprite(o)})),a.setSkin(GOWN.ScrollThumb.SKIN_NAME,"horizontal_thumb",(function(){return new PIXI.Sprite(s)})),a.setSkin(GOWN.ScrollThumb.SKIN_NAME,"vertical_"+GOWN.Button.UP,(function(){return new PIXI.Sprite(r)})),a.setSkin(GOWN.ScrollThumb.SKIN_NAME,"vertical_"+GOWN.Button.DOWN,(function(){return new PIXI.Sprite(n)})),a.setSkin(GOWN.ScrollThumb.SKIN_NAME,"vertical_"+GOWN.Button.HOVER,(function(){return new PIXI.Sprite(o)})),a.setSkin(GOWN.ScrollThumb.SKIN_NAME,"vertical_thumb",(function(){return new PIXI.Sprite(s)})),a.thumbSize=r.height,new GOWN.ScrollBar(t,null,a)},Object.defineProperties(GOWN.TextInput.prototype,{_retrict:{value:/[]/gi,writable:!0},retrict:{get:function(){return this._retrict},set:function(t){this._retrict!==t&&(this._retrict=t)}},formatText:{value:null,writable:!0},enabled:{get:function(){return this._enabled},set:function(t){this._enabled=t,!0===t?(this.interactive=!0,this.interactiveChildren=!0,this.alpha=1):(this.interactive=!1,this.interactiveChildren=!1,this.alpha=.8)}},_enabled:{value:!0,writable:!0},_hint:{value:null,writable:!0},hint:{get:function(){return this._hint||(this._hint=new PIXI.Text("",{fontFamily:"Myriad Pro",fontSize:"22pt",fill:7829367}),this.addChild(this._hint)),this._hint},set:function(t){""!=t&&this._hint.text!=t&&(this._hint.text=t)}},isToUpperCase:{value:!1,writable:!0}}),GOWN.TextInput.prototype.updateTextState=function(){var t=GOWN.utils.InputWrapper.getText();t!==this.text&&(this.text=this.isToUpperCase?t.toUpperCase():t);var e=GOWN.utils.InputWrapper.getSelection();this.updateSelection(e[0],e[1])&&(this.cursorPos=e[0]),this.setCursorPos()},GOWN.TextInput.prototype.restrictCharacters=function(t){this.retrict.test(t)&&(this.text=this.text.replace(this.retrict,""),GOWN.utils.InputWrapper.setText(this.text))},GOWN.TextInput.prototype.onKeyDown=function(t){if(this.onlyNumber&&-1===t.code.indexOf("Digit")&&-1===t.code.indexOf("Backspace")&&-1===t.code.indexOf("Numpad"))t.preventDefault();else if(this.isUpdateText){var e=t.which;if(37===e||40===e?this.cursorPos--:this.value.length>=this.cursorPos&&this.cursorPos++,46===e?this.cursorPos--:8===e&&(this.cursorPos-=2),27===t.which)return void this.blur();if(65===e&&(t.ctrlKey||t.metaKey))return t.preventDefault(),void this.updateSelection(0,this.text.length);if(17===e||t.metaKey||t.ctrlKey)return;13===e&&(t.preventDefault(),this.onSubmit(t)),this.updateTextState()}},GOWN.TextInput.prototype.onKeyUp=function(){this.isUpdateText&&(this.updateTextState(),this.restrictCharacters(this.text),this.formatText&&(this.text=this.formatText(this.text)),this.updateTextState())},GOWN.TextInput.prototype.redraw=function(){this.drawCursor(),GOWN.Control.prototype.redraw.call(this),GOWN.Skinable.prototype.redraw.call(this)},GOWN.TextInput.prototype.setCursorPos=function(){(!this.cursorPos||this.cursorPos<0)&&(this.cursorPos=0),this.cursor.x=this.pixiText.x+this.textWidth(this.text.substring(0,this.cursorPos))||0},GOWN.TextInput.BACKGROUND="background",GOWN.TextInput.stateNames=[GOWN.TextInput.BACKGROUND],GOWN.InputControl.prototype.preloadSkins=function(){for(var t=0;t<this._validStates.length;t++){var e=this._validStates[t],i=this.theme.getSkin(this.skinName,e);this.skinCache[e]=i,i&&(this.addChildAt(i,0),i.alpha=0,this.width&&(i.width=this.width),this.height&&(i.height=this.height))}this.invalidState=!0},GOWN.CheckBoxWithTitle=function(t){PIXI.Container.call(this),this.checkBox=new GOWN.CheckBox,this.checkBox.lable="Không hiển thị ván sau",this.addChild(this.checkBox);this.textField=new PIXI.Text("",{fontFamily:"Arial",fontSize:"18px",fill:65535,align:"left"}),this.textField.x=25,this.textField.y=-3,this.addChild(this.textField),this.lable=t||"lable",this.interactive=!0,this.mousedown=this.onMouseDown.bind(this),this.mouseup=this.onMouseUp.bind(this),this.mouseover=this.onMouseOver.bind(this),this.mouseout=this.onMouseOut.bind(this),this.buttonMode=!0},GOWN.CheckBoxWithTitle.prototype=Object.create(PIXI.Container.prototype),GOWN.CheckBoxWithTitle.prototype.constructor=GOWN.CheckBoxWithTitle,Object.defineProperties(GOWN.CheckBoxWithTitle.prototype,{checkBox:{value:null,writable:!0},textField:{value:null,writable:!0},selected:{get:function(){return this.checkBox.selected},set:function(t){this.checkBox.selected=t}},enable:{get:function(){return this._enable},set:function(t){this._enable=t,this.interactive=t,this.interactiveChildren=t}},_enable:{value:!0,writable:!0},style:{set:function(t){this.textField.style=t}}}),Object.defineProperty(GOWN.CheckBoxWithTitle.prototype,"lable",{get:function(){return this.textField.text},set:function(t){this.textField.text=t}}),Object.defineProperty(GOWN.CheckBoxWithTitle.prototype,"change",{get:function(){return this.checkBox.change},set:function(t){this.checkBox.change=t}}),GOWN.TextInput.prototype.onMouseUp=function(t){var e=t.data.originalEvent;if(2===e.which||3===e.which)return e.preventDefault(),!1;var i=this.mousePos(t),r=this.clickPos(i.x,i.y);return this.selectionStart>=0&&r!==this.selectionStart||(this.cursorPos=r,this.setCursorPos(),this.updateSelection(this.cursorPos,this.cursorPos)),this.selectionStart=-1,this._mouseDown=!1,!0},GOWN.TextInput.prototype.onMouseDown=function(t){var e=t.data.originalEvent;if(2===e.which||3===e.which)return e.preventDefault(),!1;this._mouseDown=!0;var i=this.mousePos(t);return this.selectionStart=this.clickPos(i.x,i.y),this.updateSelection(this.selectionStart,this.selectionStart),this.cursorPos=this.selectionStart,this.setCursorPos(),!0},GOWN.TextInput.prototype.onMouseMove=function(t){var e=this.mousePos(t);if(!this.hasFocus||!this._mouseDown||this.selectionStart<0)return!1;var i=this.clickPos(e.x,e.y),r=Math.min(this.selectionStart,i),n=Math.max(this.selectionStart,i);return this.updateSelection(r,n)&&(this.cursorPos=i,this.setCursorPos(),this._cursorNeedsUpdate=!0),!0},GOWN.InputControl.prototype.onMouseUpOutside=function(t){if("mouseupoutside"===t.type){var e=this.mousePos(t),i=this.clickPos(e.x,e.y);this.selectionStart>=0&&i!==this.selectionStart||(this.cursorPos=i,this.setCursorPos(),this.updateSelection(this.cursorPos,this.cursorPos)),this.selectionStart=-1,this._mouseDown=!1,this.hasFocus&&!this._mouseDown&&this.blur()}},GOWN.CheckBoxWithTitle.prototype.onMouseDown=function(){this.checkBox.mousedown()},GOWN.CheckBoxWithTitle.prototype.onMouseUp=function(){this.checkBox.mouseup()},GOWN.CheckBoxWithTitle.prototype.onMouseOver=function(){this.checkBox.mouseover()},GOWN.CheckBoxWithTitle.prototype.onMouseOut=function(){this.checkBox.mouseout()},GOWN}.call(e,i,e,t))||(t.exports=r)},function(t,e,i){(function(e){var i=t.exports&&void 0!==e?e:this||window;(i._gsQueue||(i._gsQueue=[])).push((function(){"use strict";var t=Math.PI/180,e=180/Math.PI,r=/[achlmqstvz]|(-?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,n=/(?:(-|-=|\+=)?\d*\.?\d*(?:e[\-+]?\d+)?)[0-9]/gi,o=/[achlmqstvz]/gi,s=i.TweenLite,a=function(t){window.console},l=function(i,r,n,o,s,a,l,h,u){if(i!==h||r!==u){n=Math.abs(n),o=Math.abs(o);var c=s%360*t,p=Math.cos(c),f=Math.sin(c),d=(i-h)/2,g=(r-u)/2,m=p*d+f*g,v=-f*d+p*g,y=n*n,_=o*o,x=m*m,b=v*v,T=x/y+b/_;T>1&&(y=(n=Math.sqrt(T)*n)*n,_=(o=Math.sqrt(T)*o)*o);var w=a===l?-1:1,S=(y*_-y*b-_*x)/(y*b+_*x);0>S&&(S=0);var A=w*Math.sqrt(S),P=A*(n*v/o),E=A*(-o*m/n),C=(i+h)/2+(p*P-f*E),O=(r+u)/2+(f*P+p*E),I=(m-P)/n,M=(v-E)/o,R=(-m-P)/n,D=(-v-E)/o,k=Math.sqrt(I*I+M*M),L=I,N=(w=0>M?-1:1)*Math.acos(L/k)*e;k=Math.sqrt((I*I+M*M)*(R*R+D*D)),L=I*R+M*D;var F=(w=0>I*D-M*R?-1:1)*Math.acos(L/k)*e;!l&&F>0?F-=360:l&&0>F&&(F+=360);var B,j,U,X=function(e,i){var r,n,o,s,a,l,h=Math.ceil(Math.abs(i)/90),u=0,c=[];for(e*=t,r=(i*=t)/h,n=4/3*Math.sin(r/2)/(1+Math.cos(r/2)),l=0;h>l;l++)o=e+l*r,s=Math.cos(o),a=Math.sin(o),c[u++]=s-n*a,c[u++]=a+n*s,o+=r,s=Math.cos(o),a=Math.sin(o),c[u++]=s+n*a,c[u++]=a-n*s,c[u++]=s,c[u++]=a;return c}(N%=360,F%=360),G=p*n,W=f*n,V=f*-o,z=p*o,H=X.length-2;for(B=0;H>B;B+=2)j=X[B],U=X[B+1],X[B]=j*G+U*V+C,X[B+1]=j*W+U*z+O;return X[X.length-2]=h,X[X.length-1]=u,X}},h=function(t){var e,i,n,o,s,h,u,c,p,f,d,g,m,v=(t+"").match(r)||[],y=[],_=0,x=0,b=v.length,T=2,w=0;if(!t||!isNaN(v[0])||isNaN(v[1]))return a(),y;for(e=0;b>e;e++)if(m=s,isNaN(v[e])?h=(s=v[e].toUpperCase())!==v[e]:e--,n=+v[e+1],o=+v[e+2],h&&(n+=_,o+=x),0===e&&(c=n,p=o),"M"===s)_=c=n,x=p=o,u=[n,o],w+=T,T=2,y.push(u),e+=2;else if("C"===s)u||(u=[0,0]),u[T++]=n,u[T++]=o,h||(_=x=0),u[T++]=_+1*v[e+3],u[T++]=x+1*v[e+4],u[T++]=_+=1*v[e+5],u[T++]=x+=1*v[e+6],e+=6;else if("S"===s)"C"===m||"S"===m?(f=_-u[T-4],d=x-u[T-3],u[T++]=_+f,u[T++]=x+d):(u[T++]=_,u[T++]=x),u[T++]=n,u[T++]=o,h||(_=x=0),u[T++]=_+=1*v[e+3],u[T++]=x+=1*v[e+4],e+=4;else if("Q"===s)f=n-_,d=o-x,u[T++]=_+2*f/3,u[T++]=x+2*d/3,h||(_=x=0),f=n-(_+=1*v[e+3]),d=o-(x+=1*v[e+4]),u[T++]=_+2*f/3,u[T++]=x+2*d/3,u[T++]=_,u[T++]=x,e+=4;else if("T"===s)f=_-u[T-4],d=x-u[T-3],u[T++]=_+f,u[T++]=x+d,f=_+1.5*f-n,d=x+1.5*d-o,u[T++]=n+2*f/3,u[T++]=o+2*d/3,u[T++]=_=n,u[T++]=x=o,e+=2;else if("H"===s)o=x,u[T++]=_+(n-_)/3,u[T++]=x+(o-x)/3,u[T++]=_+2*(n-_)/3,u[T++]=x+2*(o-x)/3,u[T++]=_=n,u[T++]=o,e+=1;else if("V"===s)o=n,n=_,h&&(o+=x-_),u[T++]=n,u[T++]=x+(o-x)/3,u[T++]=n,u[T++]=x+2*(o-x)/3,u[T++]=n,u[T++]=x=o,e+=1;else if("L"===s||"Z"===s)"Z"===s&&(n=c,o=p,u.closed=!0),("L"===s||Math.abs(_-n)>1||Math.abs(x-o)>1)&&(u[T++]=_+(n-_)/3,u[T++]=x+(o-x)/3,u[T++]=_+2*(n-_)/3,u[T++]=x+2*(o-x)/3,u[T++]=n,u[T++]=o,e+=2),_=n,x=o;else if("A"===s){for(g=l(_,x,1*v[e+1],1*v[e+2],1*v[e+3],1*v[e+4],1*v[e+5],(h?_:0)+1*v[e+6],(h?x:0)+1*v[e+7]),i=0;i<g.length;i++)u[T++]=g[i];_=u[T-2],x=u[T-1],e+=7}else a();return y.totalPoints=w+T,y},u=function(t,e){var i,r,n,o,s,a,l,h,u,c,p,f,d,g,m=0,v=t.length,y=e/((v-2)/6);for(d=2;v>d;d+=6)for(m+=y;m>.999999;)i=t[d-2],r=t[d-1],n=t[d],o=t[d+1],s=t[d+2],a=t[d+3],l=t[d+4],h=t[d+5],u=i+(n-i)*(g=1/(Math.floor(m)+1)),u+=((p=n+(s-n)*g)-u)*g,p+=(s+(l-s)*g-p)*g,c=r+(o-r)*g,c+=((f=o+(a-o)*g)-c)*g,f+=(a+(h-a)*g-f)*g,t.splice(d,4,i+(n-i)*g,r+(o-r)*g,u,c,u+(p-u)*g,c+(f-c)*g,p,f,s+(l-s)*g,a+(h-a)*g),d+=6,v+=6,m--;return t},c=function(t){var e,i,r,n,o="",s=t.length,a=100;for(i=0;s>i;i++){for(o+="M"+(n=t[i])[0]+","+n[1]+" C",e=n.length,r=2;e>r;r++)o+=(n[r++]*a|0)/a+","+(n[r++]*a|0)/a+" "+(n[r++]*a|0)/a+","+(n[r++]*a|0)/a+" "+(n[r++]*a|0)/a+","+(n[r]*a|0)/a+" ";n.closed&&(o+="z")}return o},p=function(t){for(var e=[],i=t.length-1,r=0;--i>-1;)e[r++]=t[i],e[r++]=t[i+1],i--;for(i=0;r>i;i++)t[i]=e[i];t.reversed=!t.reversed},f=function(t){var e,i=t.length,r=0,n=0;for(e=0;i>e;e++)r+=t[e++],n+=t[e];return[r/(i/2),n/(i/2)]},d=function(t){var e,i,r,n=t.length,o=t[0],s=o,a=t[1],l=a;for(r=6;n>r;r+=6)(e=t[r])>o?o=e:s>e&&(s=e),(i=t[r+1])>a?a=i:l>i&&(l=i);return t.centerX=(o+s)/2,t.centerY=(a-l)/2,t.size=(o-s)*(a-l)},g=function(t,e){return e.length-t.length},m=function(t,e){var i=t.size||d(t),r=e.size||d(e);return Math.abs(r-i)<(i+r)/20?e.centerX-t.centerX||e.centerY-t.centerY:r-i},v=function(t,e){var i,r,n=t.slice(0),o=t.length,s=o-2;for(e|=0,i=0;o>i;i++)r=(i+e)%s,t[i++]=n[r],t[i]=n[r+1]},y=function(t,e,i,r,n){var o,s,a,l,h=t.length,u=0,c=h-2;for(i*=6,s=0;h>s;s+=6)l=t[o=(s+i)%c]-(e[s]-r),a=t[o+1]-(e[s+1]-n),u+=Math.sqrt(a*a+l*l);return u},_=function(t,e,i){var r,n,o,s=t.length,a=f(t),l=f(e),h=l[0]-a[0],u=l[1]-a[1],c=y(t,e,0,h,u),d=0;for(o=6;s>o;o+=6)c>(n=y(t,e,o/6,h,u))&&(c=n,d=o);if(i)for(r=t.slice(0),p(r),o=6;s>o;o+=6)c>(n=y(r,e,o/6,h,u))&&(c=n,d=-o);return d/6},x=function(t,e,i){var r,n,o,s,a=t.length,l=99999999999,h=0;for(s=0;a>s;s+=6)r=t[s]-e,n=t[s+1]-i,l>(o=Math.sqrt(r*r+n*n))&&(l=o,h=s);return h},b=function(t,e,i){var r,n,o,s,a=e.length,l=0,h=.8*(e[i].size||d(e[i])),u=999999999999,c=(t.size||d(t),t.centerX),p=t.centerY;for(r=i;a>r&&!(h>(e[r].size||d(e[r])));r++)n=e[r].centerX-c,o=e[r].centerY-p,u>(s=Math.sqrt(n*n+o*o))&&(l=r,u=s);return s=e[l],e.splice(l,1),s},T=function(t,e,i,r){var n,o,s,a,l,h=e.length-t.length,c=h>0?e:t,f=h>0?t:e,d=0,y="complexity"===r?g:m,T=f.length,w="object"==typeof i&&i.push?i.slice(0):[i],S="reverse"===w[0]||w[0]<0;if(f[0]){if(h){if(0>h&&(h=-h),t.sort(y),e.sort(y),y===m)for(T=0;T<f.length;T++)c.splice(T,0,b(f[T],c,T));for(c[0].length>f[0].length&&u(f[0],(c[0].length-f[0].length)/6|0),T=f.length;h>d;)s=x(f[0],c[T][0],c[T][1]),a=f[0][s],l=f[0][s+1],f[T++]=[a,l,a,l,a,l,a,l],f.totalPoints+=8,d++}for(T=0;T<t.length;T++)n=e[T],o=t[T],0>(h=n.length-o.length)?u(n,-h/6|0):h>0&&u(o,h/6|0),S&&!o.reversed&&p(o),(i=w[T]||0===w[T]?w[T]:"auto")&&(o.closed||Math.abs(o[0]-o[o.length-2])<.5&&Math.abs(o[1]-o[o.length-1])<.5?"auto"===i?(w[T]=i=_(o,n,0===T),0>i&&(S=!0,p(o),i=-i),v(o,6*i)):"reverse"!==i&&(T&&0>i&&p(o),v(o,6*(0>i?-i:i))):!S&&("auto"===i&&Math.abs(n[0]-o[0])+Math.abs(n[1]-o[1])+Math.abs(n[n.length-2]-o[o.length-2])+Math.abs(n[n.length-1]-o[o.length-1])>Math.abs(n[0]-o[o.length-2])+Math.abs(n[1]-o[o.length-1])+Math.abs(n[n.length-2]-o[0])+Math.abs(n[n.length-1]-o[1])||i%2)?(p(o),w[T]=-1,S=!0):"auto"===i?w[T]=0:"reverse"===i&&(w[T]=-1));return w}},w=function(t,e,i){var r=h(t[0]),n=h(t[1]);T(r,n,e||0===e?e:"auto",i)&&(t[0]=c(r),t[1]=c(n))},S=function(t,e){var i,r,n,o,s,a,l,h=0,u=parseFloat(t[0]),c=parseFloat(t[1]),p=u+","+c+" ",f=.999999;for(i=.5*e/(.5*(n=t.length)-1),r=0;n-2>r;r+=2){if(h+=i,a=parseFloat(t[r+2]),l=parseFloat(t[r+3]),h>f)for(s=1/(Math.floor(h)+1),o=1;h>f;)p+=(u+(a-u)*s*o).toFixed(2)+","+(c+(l-c)*s*o).toFixed(2)+" ",h--,o++;p+=a+","+l+" ",u=a,c=l}return p},A=function(t){var e=t[0].match(n)||[],i=t[1].match(n)||[],r=i.length-e.length;r>0?t[0]=S(e,r):t[1]=S(i,-r)},P=function(t){return isNaN(t)?A:function(e){A(e),e[1]=function(t,e){if(!e)return t;var i,r,o,s=t.match(n)||[],a=s.length,l="";for("reverse"===e?(r=a-1,i=-2):(r=(2*(parseInt(e,10)||0)+1+100*a)%a,i=2),o=0;a>o;o+=2)l+=s[r-1]+","+s[r]+" ",r=(r+i)%a;return l}(e[1],parseInt(t,10))}},E=function(t,e){var i,r,o,s,a,l,h,u,c,p,f,d,g,m,v,y,_,x,b,T,w,S=t.tagName.toLowerCase(),A=.552284749831;return"path"!==S&&t.getBBox?(l=function(t,e){var i=document.createElementNS("http://www.w3.org/2000/svg","path"),r=Array.prototype.slice.call(t.attributes),n=r.length;for(e=","+e+",";--n>-1;)-1===e.indexOf(","+r[n].nodeName+",")&&i.setAttributeNS(null,r[n].nodeName,r[n].nodeValue);return i}(t,"x,y,width,height,cx,cy,rx,ry,r,x1,x2,y1,y2,points"),"rect"===S?(s=+t.getAttribute("rx")||0,a=+t.getAttribute("ry")||0,r=+t.getAttribute("x")||0,o=+t.getAttribute("y")||0,p=(+t.getAttribute("width")||0)-2*s,f=(+t.getAttribute("height")||0)-2*a,s||a?i="M"+(y=(m=(g=r+s)+p)+s)+","+(x=o+a)+" V"+(b=x+f)+" C"+[y,T=b+a*A,v=m+s*A,w=b+a,m,w,m-(m-g)/3,w,g+(m-g)/3,w,g,w,d=r+s*(1-A),w,r,T,r,b,r,b-(b-x)/3,r,x+(b-x)/3,r,x,r,_=o+a*(1-A),d,o,g,o,g+(m-g)/3,o,m-(m-g)/3,o,m,o,v,o,y,_,y,x].join(",")+"z":i="M"+(r+p)+","+o+" v"+f+" h"+-p+" v"+-f+" h"+p+"z"):"circle"===S||"ellipse"===S?("circle"===S?u=(s=a=+t.getAttribute("r")||0)*A:(s=+t.getAttribute("rx")||0,u=(a=+t.getAttribute("ry")||0)*A),i="M"+((r=+t.getAttribute("cx")||0)+s)+","+(o=+t.getAttribute("cy")||0)+" C"+[r+s,o+u,r+(h=s*A),o+a,r,o+a,r-h,o+a,r-s,o+u,r-s,o,r-s,o-u,r-h,o-a,r,o-a,r+h,o-a,r+s,o-u,r+s,o].join(",")+"z"):"line"===S?i="M"+t.getAttribute("x1")+","+t.getAttribute("y1")+" L"+t.getAttribute("x2")+","+t.getAttribute("y2"):("polyline"===S||"polygon"===S)&&(i="M"+(r=(c=(t.getAttribute("points")+"").match(n)||[]).shift())+","+(o=c.shift())+" L"+c.join(","),"polygon"===S&&(i+=","+r+","+o+"z")),l.setAttribute("d",i),e&&t.parentNode&&(t.parentNode.insertBefore(l,t),t.parentNode.removeChild(t)),l):t},C=function(t,e){var i,r;return("string"!=typeof t||(t.match(n)||[]).length<3)&&((i=s.selector(t))&&i[0]?(r=(i=i[0]).nodeName.toUpperCase(),e&&"PATH"!==r&&(i=E(i,!1),r="PATH"),t=i.getAttribute("PATH"===r?"d":"points")||""):(a(),t=!1)),t},O=i._gsDefine.plugin({propName:"morphSVG",API:2,global:!0,version:"0.3.1",init:function(t,e,i){var r,n,s,l,h;return"function"==typeof t.setAttribute&&(h="POLYLINE"===(r=t.nodeName.toUpperCase())||"POLYGON"===r,"PATH"===r||h?(n="PATH"===r?"d":"points",("string"==typeof e||e.getBBox)&&(e={shape:e}),l=C(e.shape||e.d||e.points||"","d"===n),h&&o.test(l)?(a(),!1):(l&&(this._target=t,(s=this._addTween(t,"setAttribute",t.getAttribute(n)+"",l+"","morphSVG",!1,n,"d"===n?function(t,e){return e||t||0===t?function(i){w(i,t,e)}:w}(e.shapeIndex,e.map):P(e.shapeIndex)))&&(this._overwriteProps.push("morphSVG"),s.end=l,s.endProp=n)),!0)):(a(),!1))},set:function(t){var e;if(this._super.setRatio.call(this,t),1===t)for(e=this._firstPT;e;)e.end&&this._target.setAttribute(e.endProp,e.end),e=e._next}});O.pathFilter=w,O.pointsFilter=A,O.subdivideRawBezier=u,O.pathDataToRawBezier=function(t){return h(C(t,!0))},O.equalizeSegmentQuantity=T,O.convertToPath=function(t,e){"string"==typeof t&&(t=s.selector(t));for(var i=t&&0!==t.length?t.length&&t[0]&&t[0].nodeType?Array.prototype.slice.call(t,0):[t]:[],r=i.length;--r>-1;)i[r]=E(i[r],!1!==e);return i},O.pathDataToBezier=function(t,e){var i,r,n,o,s,a,l=h(C(t,!0))[0]||[];if(o=(e=e||{}).matrix,i=[],n=l.length,o)for(e.relative&&((o=o.slice(0))[4]-=l[0],o[5]-=l[1]),r=0;n>r;r+=2)i.push({x:l[r]*o[0]+l[r+1]*o[2]+o[4],y:l[r]*o[1]+l[r+1]*o[3]+o[5]});else for(s=e.offsetX||0,a=e.offsetY||0,e.relative&&(s-=l[0],a-=l[1]),r=0;n>r;r+=2)i.push({x:l[r]+s,y:l[r+1]+a});return i}})),i._gsDefine&&i._gsQueue.pop()()}).call(this,i(3))},function(t,e,i){(function(e){t.exports=function(){"use strict";if("undefined"==typeof PIXI)throw"PixiJS required";var t=setTimeout;function i(){}function r(t){if(!(this instanceof r))throw new TypeError("Promises must be constructed via new");if("function"!=typeof t)throw new TypeError("not a function");this._state=0,this._handled=!1,this._value=void 0,this._deferreds=[],h(t,this)}function n(t,e){for(;3===t._state;)t=t._value;0!==t._state?(t._handled=!0,r._immediateFn((function(){var i=1===t._state?e.onFulfilled:e.onRejected;if(null!==i){var r;try{r=i(t._value)}catch(t){return void s(e.promise,t)}o(e.promise,r)}else(1===t._state?o:s)(e.promise,t._value)}))):t._deferreds.push(e)}function o(t,e){try{if(e===t)throw new TypeError("A promise cannot be resolved with itself.");if(e&&("object"==typeof e||"function"==typeof e)){var i=e.then;if(e instanceof r)return t._state=3,t._value=e,void a(t);if("function"==typeof i)return void h((n=i,o=e,function(){n.apply(o,arguments)}),t)}t._state=1,t._value=e,a(t)}catch(e){s(t,e)}var n,o}function s(t,e){t._state=2,t._value=e,a(t)}function a(t){2===t._state&&0===t._deferreds.length&&r._immediateFn((function(){t._handled||r._unhandledRejectionFn(t._value)}));for(var e=0,i=t._deferreds.length;e<i;e++)n(t,t._deferreds[e]);t._deferreds=null}function l(t,e,i){this.onFulfilled="function"==typeof t?t:null,this.onRejected="function"==typeof e?e:null,this.promise=i}function h(t,e){var i=!1;try{t((function(t){i||(i=!0,o(e,t))}),(function(t){i||(i=!0,s(e,t))}))}catch(t){if(i)return;i=!0,s(e,t)}}r.prototype.catch=function(t){return this.then(null,t)},r.prototype.then=function(t,e){var r=new this.constructor(i);return n(this,new l(t,e,r)),r},r.prototype.finally=function(t){var e=this.constructor;return this.then((function(i){return e.resolve(t()).then((function(){return i}))}),(function(i){return e.resolve(t()).then((function(){return e.reject(i)}))}))},r.all=function(t){return new r((function(e,i){if(!t||void 0===t.length)throw new TypeError("Promise.all accepts an array");var r=Array.prototype.slice.call(t);if(0===r.length)return e([]);var n=r.length;function o(t,s){try{if(s&&("object"==typeof s||"function"==typeof s)){var a=s.then;if("function"==typeof a)return void a.call(s,(function(e){o(t,e)}),i)}r[t]=s,0==--n&&e(r)}catch(t){i(t)}}for(var s=0;s<r.length;s++)o(s,r[s])}))},r.resolve=function(t){return t&&"object"==typeof t&&t.constructor===r?t:new r((function(e){e(t)}))},r.reject=function(t){return new r((function(e,i){i(t)}))},r.race=function(t){return new r((function(e,i){for(var r=0,n=t.length;r<n;r++)t[r].then(e,i)}))},r._immediateFn="function"==typeof e&&function(t){e(t)}||function(e){t(e,0)},r._unhandledRejectionFn=function(t){"undefined"!=typeof console&&console};var u=function(){function t(t,e){this._output=e,this._input=t}return Object.defineProperty(t.prototype,"destination",{get:function(){return this._input},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._filters},set:function(t){var e=this;if(this._filters&&(this._filters.forEach((function(t){t&&t.disconnect()})),this._filters=null,this._input.connect(this._output)),t&&t.length){this._filters=t.slice(0),this._input.disconnect();var i=null;t.forEach((function(t){null===i?e._input.connect(t.destination):i.connect(t.destination),i=t})),i.connect(this._output)}},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){this.filters=null,this._input=null,this._output=null},t}(),c=function(){function t(t,e){this.init(t,e)}return t.prototype.init=function(t,e){this.destination=t,this.source=e||t},t.prototype.connect=function(t){this.source.connect(t)},t.prototype.disconnect=function(){this.source.disconnect()},t.prototype.destroy=function(){this.disconnect(),this.destination=null,this.source=null},t}(),p=function(t,e){return(p=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])})(t,e)};function f(t,e){function i(){this.constructor=t}p(t,e),t.prototype=null===e?Object.create(e):(i.prototype=e.prototype,new i)}var d,g=function(){return(g=Object.assign||function(t){for(var e,i=1,r=arguments.length;i<r;i++)for(var n in e=arguments[i])Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t}).apply(this,arguments)};function m(){return d}var v,y,_,x,b=function(){function t(){}return t.setParamValue=function(t,e){if(t.setValueAtTime){var i=m().context;t.setValueAtTime(e,i.audioContext.currentTime)}else t.value=e;return e},t}(),T=0,w=function(t){function e(e){var i=t.call(this)||this;return i.id=T++,i._media=null,i._paused=!1,i._muted=!1,i._elapsed=0,i._updateListener=i._update.bind(i),i.init(e),i}return f(e,t),e.prototype.stop=function(){this._source&&(this._internalStop(),this.emit("stop"))},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh(),this._update(!0)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){if(this._source){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);b.setParamValue(this._gain.gain,n*r*i),b.setParamValue(this._source.playbackRate,this._speed*e.speed*t.speed)}},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._elapsed%this._duration,end:this._end,speed:this._speed,loop:this._loop,volume:this._volume})),this.emit("pause",i))},e.prototype.play=function(t){var e=t.start,i=t.end,r=t.speed,n=t.loop,o=t.volume,s=t.muted;this._paused=!1;var a=this._media.nodes.cloneBufferSource(),l=a.source,h=a.gain;this._source=l,this._gain=h,this._speed=r,this._volume=o,this._loop=!!n,this._muted=s,this.refresh();var u=this._source.buffer.duration;this._duration=u,this._end=i,this._lastUpdate=this._now(),this._elapsed=e,this._source.onended=this._onComplete.bind(this),this._loop?(this._source.loopEnd=i,this._source.loopStart=e,this._source.start(0,e)):i?this._source.start(0,e,i-e):this._source.start(0,e),this.emit("start"),this._update(!0),this._enabled=!0},e.prototype._toSec=function(t){return t>10&&(t/=1e3),t||0},Object.defineProperty(e.prototype,"_enabled",{set:function(t){var e=this._media.nodes.script;e.removeEventListener("audioprocess",this._updateListener),t&&e.addEventListener("audioprocess",this._updateListener)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"progress",{get:function(){return this._progress},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this._internalStop(),this._source&&(this._source.disconnect(),this._source=null),this._gain&&(this._gain.disconnect(),this._gain=null),this._media&&(this._media.context.events.off("refresh",this.refresh,this),this._media.context.events.off("refreshPaused",this.refreshPaused,this),this._media=null),this._end=null,this._speed=1,this._volume=1,this._loop=!1,this._elapsed=0,this._duration=0,this._paused=!1,this._muted=!1,this._pausedReal=!1},e.prototype.toString=function(){return"[WebAudioInstance id="+this.id+"]"},e.prototype._now=function(){return this._media.context.audioContext.currentTime},e.prototype._update=function(t){if(void 0===t&&(t=!1),this._source){var e=this._now(),i=e-this._lastUpdate;if(i>0||t){var r=this._source.playbackRate.value;this._elapsed+=i*r,this._lastUpdate=e;var n=this._duration,o=void 0;if(this._source.loopStart){var s=this._source.loopEnd-this._source.loopStart;o=(this._source.loopStart+this._elapsed%s)/n}else o=this._elapsed%n/n;this._progress=o,this.emit("progress",this._progress,n)}}},e.prototype.init=function(t){this._media=t,t.context.events.on("refresh",this.refresh,this),t.context.events.on("refreshPaused",this.refreshPaused,this)},e.prototype._internalStop=function(){this._source&&(this._enabled=!1,this._source.onended=null,this._source.stop(0),this._source=null)},e.prototype._onComplete=function(){this._source&&(this._enabled=!1,this._source.onended=null),this._source=null,this._progress=1,this.emit("progress",1,this._duration),this.emit("end",this)},e}(PIXI.utils.EventEmitter),S=function(t){function e(e){var i=this,r=e.audioContext,n=r.createBufferSource(),o=r.createScriptProcessor(0),s=r.createGain(),a=r.createAnalyser();return n.connect(a),a.connect(s),s.connect(e.destination),o.connect(e.destination),(i=t.call(this,a,s)||this).context=e,i.bufferSource=n,i.script=o,i.gain=s,i.analyser=a,i}return f(e,t),e.prototype.destroy=function(){t.prototype.destroy.call(this),this.bufferSource.disconnect(),this.script.disconnect(),this.gain.disconnect(),this.analyser.disconnect(),this.bufferSource=null,this.script=null,this.gain=null,this.analyser=null,this.context=null},e.prototype.cloneBufferSource=function(){var t=this.bufferSource,e=this.context.audioContext.createBufferSource();e.buffer=t.buffer,b.setParamValue(e.playbackRate,t.playbackRate.value),e.loop=t.loop;var i=this.context.audioContext.createGain();return e.connect(i),i.connect(this.destination),{source:e,gain:i}},Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this.script.bufferSize},enumerable:!0,configurable:!0}),e}(u),A=function(){function t(){}return t.prototype.init=function(t){this.parent=t,this._nodes=new S(this.context),this._source=this._nodes.bufferSource,this.source=t.options.source},t.prototype.destroy=function(){this.parent=null,this._nodes.destroy(),this._nodes=null,this._source=null,this.source=null},t.prototype.create=function(){return new w(this)},Object.defineProperty(t.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"isPlayable",{get:function(){return!!this._source&&!!this._source.buffer},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this._nodes.filters},set:function(t){this._nodes.filters=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this._source.buffer.duration},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"buffer",{get:function(){return this._source.buffer},set:function(t){this._source.buffer=t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nodes",{get:function(){return this._nodes},enumerable:!0,configurable:!0}),t.prototype.load=function(t){this.source?this._decode(this.source,t):this.parent.url?this._loadUrl(t):t&&t(new Error("sound.url or sound.source must be set"))},t.prototype._loadUrl=function(t){var e=this,i=new XMLHttpRequest,r=this.parent.url;i.open("GET",r,!0),i.responseType="arraybuffer",i.onload=function(){e.source=i.response,e._decode(i.response,t)},i.send()},t.prototype._decode=function(t,e){var i=this;this.parent.context.decode(t,(function(t,r){if(t)e&&e(t);else{i.parent.isLoaded=!0,i.buffer=r;var n=i.parent.autoPlayStart();e&&e(null,i.parent,n)}}))},t}(),P=function(t){function e(){var i=this,r=window,n=new e.AudioContext,o=n.createDynamicsCompressor(),s=n.createAnalyser();return s.connect(o),o.connect(n.destination),(i=t.call(this,s,o)||this)._ctx=n,i._offlineCtx=new e.OfflineAudioContext(1,2,r.OfflineAudioContext?n.sampleRate:44100),i._unlocked=!1,i.compressor=o,i.analyser=s,i.events=new PIXI.utils.EventEmitter,i.volume=1,i.speed=1,i.muted=!1,i.paused=!1,"running"!==n.state&&(i._unlock(),i._unlock=i._unlock.bind(i),document.addEventListener("mousedown",i._unlock,!0),document.addEventListener("touchstart",i._unlock,!0),document.addEventListener("touchend",i._unlock,!0)),i}return f(e,t),e.prototype._unlock=function(){this._unlocked||(this.playEmptySound(),"running"===this._ctx.state&&(document.removeEventListener("mousedown",this._unlock,!0),document.removeEventListener("touchend",this._unlock,!0),document.removeEventListener("touchstart",this._unlock,!0),this._unlocked=!0))},e.prototype.playEmptySound=function(){var t=this._ctx.createBufferSource();t.buffer=this._ctx.createBuffer(1,1,22050),t.connect(this._ctx.destination),t.start(0,0,0),"suspended"===t.context.state&&t.context.resume()},Object.defineProperty(e,"AudioContext",{get:function(){var t=window;return t.AudioContext||t.webkitAudioContext||null},enumerable:!0,configurable:!0}),Object.defineProperty(e,"OfflineAudioContext",{get:function(){var t=window;return t.OfflineAudioContext||t.webkitOfflineAudioContext||null},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this);var e=this._ctx;void 0!==e.close&&e.close(),this.events.removeAllListeners(),this.analyser.disconnect(),this.compressor.disconnect(),this.analyser=null,this.compressor=null,this.events=null,this._offlineCtx=null,this._ctx=null},Object.defineProperty(e.prototype,"audioContext",{get:function(){return this._ctx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"offlineContext",{get:function(){return this._offlineCtx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){t&&"running"===this._ctx.state?this._ctx.suspend():t||"suspended"!==this._ctx.state||this._ctx.resume(),this._paused=t},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){this.events.emit("refresh")},e.prototype.refreshPaused=function(){this.events.emit("refreshPaused")},e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this._paused},e.prototype.decode=function(t,e){this._offlineCtx.decodeAudioData(t,(function(t){e(null,t)}),(function(t){e(new Error(t.message||"Unable to decode file"))}))},e}(u),E=Object.freeze({WebAudioMedia:A,WebAudioInstance:w,WebAudioNodes:S,WebAudioContext:P,WebAudioUtils:b}),C=function(t){function e(i,r,n,o,s,a,l,h,u,c){void 0===i&&(i=0),void 0===r&&(r=0),void 0===n&&(n=0),void 0===o&&(o=0),void 0===s&&(s=0),void 0===a&&(a=0),void 0===l&&(l=0),void 0===h&&(h=0),void 0===u&&(u=0),void 0===c&&(c=0);var p=this;if(!m().useLegacy){var f=[{f:e.F32,type:"lowshelf",gain:i},{f:e.F64,type:"peaking",gain:r},{f:e.F125,type:"peaking",gain:n},{f:e.F250,type:"peaking",gain:o},{f:e.F500,type:"peaking",gain:s},{f:e.F1K,type:"peaking",gain:a},{f:e.F2K,type:"peaking",gain:l},{f:e.F4K,type:"peaking",gain:h},{f:e.F8K,type:"peaking",gain:u},{f:e.F16K,type:"highshelf",gain:c}].map((function(t){var e=m().context.audioContext.createBiquadFilter();return e.type=t.type,b.setParamValue(e.Q,1),e.frequency.value=t.f,b.setParamValue(e.gain,t.gain),e}));(p=t.call(this,f[0],f[f.length-1])||this).bands=f,p.bandsMap={};for(var d=0;d<p.bands.length;d++){var g=p.bands[d];d>0&&p.bands[d-1].connect(g),p.bandsMap[g.frequency.value]=g}return p}p=t.call(this,null)||this}return f(e,t),e.prototype.setGain=function(t,e){if(void 0===e&&(e=0),!this.bandsMap[t])throw new Error("No band found for frequency "+t);b.setParamValue(this.bandsMap[t].gain,e)},e.prototype.getGain=function(t){if(!this.bandsMap[t])throw new Error("No band found for frequency "+t);return this.bandsMap[t].gain.value},Object.defineProperty(e.prototype,"f32",{get:function(){return this.getGain(e.F32)},set:function(t){this.setGain(e.F32,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f64",{get:function(){return this.getGain(e.F64)},set:function(t){this.setGain(e.F64,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f125",{get:function(){return this.getGain(e.F125)},set:function(t){this.setGain(e.F125,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f250",{get:function(){return this.getGain(e.F250)},set:function(t){this.setGain(e.F250,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f500",{get:function(){return this.getGain(e.F500)},set:function(t){this.setGain(e.F500,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f1k",{get:function(){return this.getGain(e.F1K)},set:function(t){this.setGain(e.F1K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f2k",{get:function(){return this.getGain(e.F2K)},set:function(t){this.setGain(e.F2K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f4k",{get:function(){return this.getGain(e.F4K)},set:function(t){this.setGain(e.F4K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f8k",{get:function(){return this.getGain(e.F8K)},set:function(t){this.setGain(e.F8K,t)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"f16k",{get:function(){return this.getGain(e.F16K)},set:function(t){this.setGain(e.F16K,t)},enumerable:!0,configurable:!0}),e.prototype.reset=function(){this.bands.forEach((function(t){b.setParamValue(t.gain,0)}))},e.prototype.destroy=function(){this.bands.forEach((function(t){t.disconnect()})),this.bands=null,this.bandsMap=null},e.F32=32,e.F64=64,e.F125=125,e.F250=250,e.F500=500,e.F1K=1e3,e.F2K=2e3,e.F4K=4e3,e.F8K=8e3,e.F16K=16e3,e}(c),O=function(t){function e(e){void 0===e&&(e=0);var i=this;if(!m().useLegacy){var r=m().context.audioContext.createWaveShaper();return(i=t.call(this,r)||this)._distortion=r,i.amount=e,i}i=t.call(this,null)||this}return f(e,t),Object.defineProperty(e.prototype,"amount",{get:function(){return this._amount},set:function(t){t*=1e3,this._amount=t;for(var e,i=new Float32Array(44100),r=Math.PI/180,n=0;n<44100;++n)e=2*n/44100-1,i[n]=(3+t)*e*20*r/(Math.PI+t*Math.abs(e));this._distortion.curve=i,this._distortion.oversample="4x"},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this._distortion=null,t.prototype.destroy.call(this)},e}(c),I=function(t){function e(e){void 0===e&&(e=0);var i=this;if(!m().useLegacy){var r,n,o,s=m().context.audioContext;return s.createStereoPanner?o=r=s.createStereoPanner():((n=s.createPanner()).panningModel="equalpower",o=n),(i=t.call(this,o)||this)._stereo=r,i._panner=n,i.pan=e,i}i=t.call(this,null)||this}return f(e,t),Object.defineProperty(e.prototype,"pan",{get:function(){return this._pan},set:function(t){this._pan=t,this._stereo?b.setParamValue(this._stereo.pan,t):this._panner.setPosition(t,0,1-Math.abs(t))},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){t.prototype.destroy.call(this),this._stereo=null,this._panner=null},e}(c),M=function(t){function e(e,i,r){void 0===e&&(e=3),void 0===i&&(i=2),void 0===r&&(r=!1);var n=this;if(!m().useLegacy)return(n=t.call(this,null)||this)._seconds=n._clamp(e,1,50),n._decay=n._clamp(i,0,100),n._reverse=r,n._rebuild(),n;n=t.call(this,null)||this}return f(e,t),e.prototype._clamp=function(t,e,i){return Math.min(i,Math.max(e,t))},Object.defineProperty(e.prototype,"seconds",{get:function(){return this._seconds},set:function(t){this._seconds=this._clamp(t,1,50),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"decay",{get:function(){return this._decay},set:function(t){this._decay=this._clamp(t,0,100),this._rebuild()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"reverse",{get:function(){return this._reverse},set:function(t){this._reverse=t,this._rebuild()},enumerable:!0,configurable:!0}),e.prototype._rebuild=function(){for(var t,e=m().context.audioContext,i=e.sampleRate,r=i*this._seconds,n=e.createBuffer(2,r,i),o=n.getChannelData(0),s=n.getChannelData(1),a=0;a<r;a++)t=this._reverse?r-a:a,o[a]=(2*Math.random()-1)*Math.pow(1-t/r,this._decay),s[a]=(2*Math.random()-1)*Math.pow(1-t/r,this._decay);var l=m().context.audioContext.createConvolver();l.buffer=n,this.init(l)},e}(c),R=function(t){function e(){var e=this;if(!m().useLegacy){var i=m().context.audioContext,r=i.createChannelSplitter(),n=i.createChannelMerger();return n.connect(r),(e=t.call(this,n,r)||this)._merger=n,e}e=t.call(this,null)||this}return f(e,t),e.prototype.destroy=function(){this._merger.disconnect(),this._merger=null,t.prototype.destroy.call(this)},e}(c),D=function(t){function e(){if(!m().useLegacy){var e=m().context.audioContext,i=e.createBiquadFilter(),r=e.createBiquadFilter(),n=e.createBiquadFilter(),o=e.createBiquadFilter();return i.type="lowpass",b.setParamValue(i.frequency,2e3),r.type="lowpass",b.setParamValue(r.frequency,2e3),n.type="highpass",b.setParamValue(n.frequency,500),o.type="highpass",b.setParamValue(o.frequency,500),i.connect(r),r.connect(n),n.connect(o),t.call(this,i,o)||this}t.call(this,null)}return f(e,t),e}(c),k=Object.freeze({Filter:c,EqualizerFilter:C,DistortionFilter:O,StereoFilter:I,ReverbFilter:M,MonoFilter:R,TelephoneFilter:D}),L=0,N=function(t){function e(e){var i=t.call(this)||this;return i.id=L++,i.init(e),i}return f(e,t),Object.defineProperty(e.prototype,"progress",{get:function(){return this._source.currentTime/this._duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),e.prototype._onPlay=function(){this._playing=!0},e.prototype._onPause=function(){this._playing=!1},e.prototype.init=function(t){this._playing=!1,this._duration=t.source.duration;var e=this._source=t.source.cloneNode(!1);e.src=t.parent.url,e.onplay=this._onPlay.bind(this),e.onpause=this._onPause.bind(this),t.context.on("refresh",this.refresh,this),t.context.on("refreshPaused",this.refreshPaused,this),this._media=t},e.prototype._internalStop=function(){this._source&&this._playing&&(this._source.onended=null,this._source.pause())},e.prototype.stop=function(){this._internalStop(),this._source&&this.emit("stop")},Object.defineProperty(e.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),e.prototype.refresh=function(){var t=this._media.context,e=this._media.parent;this._source.loop=this._loop||e.loop;var i=t.volume*(t.muted?0:1),r=e.volume*(e.muted?0:1),n=this._volume*(this._muted?0:1);this._source.volume=n*i*r,this._source.playbackRate=this._speed*t.speed*e.speed},e.prototype.refreshPaused=function(){var t=this._media.context,e=this._media.parent,i=this._paused||e.paused||t.paused;i!==this._pausedReal&&(this._pausedReal=i,i?(this._internalStop(),this.emit("paused")):(this.emit("resumed"),this.play({start:this._source.currentTime,end:this._end,volume:this._volume,speed:this._speed,loop:this._loop})),this.emit("pause",i))},e.prototype.play=function(t){var i=this,r=t.start,n=t.end,o=t.speed,s=t.loop,a=t.volume,l=t.muted;this._speed=o,this._volume=a,this._loop=!!s,this._muted=l,this.refresh(),this.loop&&null!==n&&(this.loop=!1),this._start=r,this._end=n||this._duration,this._start=Math.max(0,this._start-e.PADDING),this._end=Math.min(this._end+e.PADDING,this._duration),this._source.onloadedmetadata=function(){i._source&&(i._source.currentTime=r,i._source.onloadedmetadata=null,i.emit("progress",r,i._duration),PIXI.ticker.shared.add(i._onUpdate,i))},this._source.onended=this._onComplete.bind(this),this._source.play(),this.emit("start")},e.prototype._onUpdate=function(){this.emit("progress",this.progress,this._duration),this._source.currentTime>=this._end&&!this._source.loop&&this._onComplete()},e.prototype._onComplete=function(){PIXI.ticker.shared.remove(this._onUpdate,this),this._internalStop(),this.emit("progress",1,this._duration),this.emit("end",this)},e.prototype.destroy=function(){PIXI.ticker.shared.remove(this._onUpdate,this),this.removeAllListeners();var t=this._source;t&&(t.onended=null,t.onplay=null,t.onpause=null,this._internalStop()),this._source=null,this._speed=1,this._volume=1,this._loop=!1,this._end=null,this._start=0,this._duration=0,this._playing=!1,this._pausedReal=!1,this._paused=!1,this._muted=!1,this._media&&(this._media.context.off("refresh",this.refresh,this),this._media.context.off("refreshPaused",this.refreshPaused,this),this._media=null)},e.prototype.toString=function(){return"[HTMLAudioInstance id="+this.id+"]"},e.PADDING=.1,e}(PIXI.utils.EventEmitter),F=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return f(e,t),e.prototype.init=function(t){this.parent=t,this._source=t.options.source||new Audio,t.url&&(this._source.src=t.url)},e.prototype.create=function(){return new N(this)},Object.defineProperty(e.prototype,"isPlayable",{get:function(){return!!this._source&&4===this._source.readyState},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._source.duration},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"context",{get:function(){return this.parent.context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),e.prototype.destroy=function(){this.removeAllListeners(),this.parent=null,this._source&&(this._source.src="",this._source.load(),this._source=null)},Object.defineProperty(e.prototype,"source",{get:function(){return this._source},enumerable:!0,configurable:!0}),e.prototype.load=function(t){var e=this._source,i=this.parent;if(4!==e.readyState){if(!i.url)return t(new Error("sound.url or sound.source must be set"));e.src=i.url;var r=function(){e.removeEventListener("canplaythrough",n),e.removeEventListener("load",n),e.removeEventListener("abort",o),e.removeEventListener("error",s)},n=function(){r(),i.isLoaded=!0;var e=i.autoPlayStart();t&&t(null,i,e)},o=function(){r(),t&&t(new Error("Sound loading has been aborted"))},s=function(){r();var i="Failed to load audio element (code: "+e.error.code+")";t&&t(new Error(i))};e.addEventListener("canplaythrough",n,!1),e.addEventListener("load",n,!1),e.addEventListener("abort",o,!1),e.addEventListener("error",s,!1),e.load()}else{i.isLoaded=!0;var a=i.autoPlayStart();t&&setTimeout((function(){t(null,i,a)}),0)}},e}(PIXI.utils.EventEmitter),B=function(t){function e(){var e=t.call(this)||this;return e.speed=1,e.volume=1,e.muted=!1,e.paused=!1,e}return f(e,t),e.prototype.refresh=function(){this.emit("refresh")},e.prototype.refreshPaused=function(){this.emit("refreshPaused")},Object.defineProperty(e.prototype,"filters",{get:function(){return null},set:function(t){},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"audioContext",{get:function(){return null},enumerable:!0,configurable:!0}),e.prototype.toggleMute=function(){return this.muted=!this.muted,this.refresh(),this.muted},e.prototype.togglePause=function(){return this.paused=!this.paused,this.refreshPaused(),this.paused},e.prototype.destroy=function(){this.removeAllListeners()},e}(PIXI.utils.EventEmitter),j=Object.freeze({HTMLAudioMedia:F,HTMLAudioInstance:N,HTMLAudioContext:B}),U=["mp3","ogg","oga","opus","mpeg","wav","m4a","aiff","wma","mid"],X=(v={m4a:"mp4",oga:"ogg"},y=document.createElement("audio"),_={},x=/^no$/,U.forEach((function(t){var e=v[t]||t,i=y.canPlayType("audio/"+t).replace(x,""),r=y.canPlayType("audio/"+e).replace(x,"");_[t]=!!i||!!r})),Object.freeze(_)),G=/\.(\{([^\}]+)\})(\?.*)?$/;function W(t){var e=G,i="string"==typeof t?t:t.url;if(e.test(i)){for(var r=e.exec(i),n=r[2].split(","),o=n[n.length-1],s=0,a=n.length;s<a;s++){var l=n[s];if(X[l]){o=l;break}}var h=i.replace(r[1],o);return"string"!=typeof t&&(t.extension=o,t.url=h),h}return i}var V=function(){function t(){}return t.add=function(){t.legacy=m().useLegacy},Object.defineProperty(t,"legacy",{set:function(t){var e=PIXI.loaders.Resource,i=U;t?i.forEach((function(t){e.setExtensionXhrType(t,e.XHR_RESPONSE_TYPE.DEFAULT),e.setExtensionLoadType(t,e.LOAD_TYPE.AUDIO)})):i.forEach((function(t){e.setExtensionXhrType(t,e.XHR_RESPONSE_TYPE.BUFFER),e.setExtensionLoadType(t,e.LOAD_TYPE.XHR)}))},enumerable:!0,configurable:!0}),t.pre=function(t,e){W(t),e()},t.use=function(t,e){t.data&&U.indexOf(t.extension)>-1?t.sound=m().add(t.name,{loaded:e,preload:!0,url:t.url,source:t.data}):e()},t}(),z=function(t){function e(e,i){var r=t.call(this,e,i)||this;return r.use(V.use),r.pre(V.pre),r}return f(e,t),e.addPixiMiddleware=function(e){t.addPixiMiddleware.call(this,e)},e}(PIXI.loaders.Loader),H=function(){function t(t,e){this.parent=t,Object.assign(this,e),this.duration=this.end-this.start}return t.prototype.play=function(t){return this.parent.play({complete:t,speed:this.speed||this.parent.speed,end:this.end,start:this.start,loop:this.loop})},t.prototype.destroy=function(){this.parent=null},t}(),Y=function(){function t(t,e){this.media=t,this.options=e,this._instances=[],this._sprites={},this.media.init(this);var i=e.complete;this._autoPlayOptions=i?{complete:i}:null,this.isLoaded=!1,this.isPlaying=!1,this.autoPlay=e.autoPlay,this.singleInstance=e.singleInstance,this.preload=e.preload||this.autoPlay,this.url=e.url,this.speed=e.speed,this.volume=e.volume,this.loop=e.loop,e.sprites&&this.addSprites(e.sprites),this.preload&&this._preload(e.loaded)}return t.from=function(e){var i={};return"string"==typeof e?i.url=e:e instanceof ArrayBuffer||e instanceof HTMLAudioElement?i.source=e:i=e,(i=g({autoPlay:!1,singleInstance:!1,url:null,source:null,preload:!1,volume:1,speed:1,complete:null,loaded:null,loop:!1},i)).url&&(i.url=W(i.url)),Object.freeze(i),new t(m().useLegacy?new F:new A,i)},Object.defineProperty(t.prototype,"context",{get:function(){return m().context},enumerable:!0,configurable:!0}),t.prototype.pause=function(){return this.isPlaying=!1,this.paused=!0,this},t.prototype.resume=function(){return this.isPlaying=this._instances.length>0,this.paused=!1,this},Object.defineProperty(t.prototype,"paused",{get:function(){return this._paused},set:function(t){this._paused=t,this.refreshPaused()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speed",{get:function(){return this._speed},set:function(t){this._speed=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filters",{get:function(){return this.media.filters},set:function(t){this.media.filters=t},enumerable:!0,configurable:!0}),t.prototype.addSprites=function(t,e){if("object"==typeof t){var i={};for(var r in t)i[r]=this.addSprites(r,t[r]);return i}if("string"==typeof t){var n=new H(this,e);return this._sprites[t]=n,n}},t.prototype.destroy=function(){this._removeInstances(),this.removeSprites(),this.media.destroy(),this.media=null,this._sprites=null,this._instances=null},t.prototype.removeSprites=function(t){if(t){var e=this._sprites[t];void 0!==e&&(e.destroy(),delete this._sprites[t])}else for(var i in this._sprites)this.removeSprites(i);return this},Object.defineProperty(t.prototype,"isPlayable",{get:function(){return this.isLoaded&&this.media&&this.media.isPlayable},enumerable:!0,configurable:!0}),t.prototype.stop=function(){if(!this.isPlayable)return this.autoPlay=!1,this._autoPlayOptions=null,this;this.isPlaying=!1;for(var t=this._instances.length-1;t>=0;t--)this._instances[t].stop();return this},t.prototype.play=function(t,e){var i,r=this;if("string"==typeof t?i={sprite:o=t,loop:this.loop,complete:e}:"function"==typeof t?(i={}).complete=t:i=t,(i=g({complete:null,loaded:null,sprite:null,end:null,start:0,volume:1,speed:1,muted:!1,loop:!1},i||{})).sprite){var n=i.sprite,o=this._sprites[n];i.start=o.start,i.end=o.end,i.speed=o.speed||1,i.loop=o.loop||i.loop,delete i.sprite}if(i.offset&&(i.start=i.offset),!this.isLoaded)return new Promise((function(t,e){r.autoPlay=!0,r._autoPlayOptions=i,r._preload((function(r,n,o){r?e(r):(i.loaded&&i.loaded(r,n,o),t(o))}))}));this.singleInstance&&this._removeInstances();var s=this._createInstance();return this._instances.push(s),this.isPlaying=!0,s.once("end",(function(){i.complete&&i.complete(r),r._onComplete(s)})),s.once("stop",(function(){r._onComplete(s)})),s.play(i),s},t.prototype.refresh=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refresh()},t.prototype.refreshPaused=function(){for(var t=this._instances.length,e=0;e<t;e++)this._instances[e].refreshPaused()},Object.defineProperty(t.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t,this.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loop",{get:function(){return this._loop},set:function(t){this._loop=t,this.refresh()},enumerable:!0,configurable:!0}),t.prototype._preload=function(t){this.media.load(t)},Object.defineProperty(t.prototype,"instances",{get:function(){return this._instances},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"sprites",{get:function(){return this._sprites},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"duration",{get:function(){return this.media.duration},enumerable:!0,configurable:!0}),t.prototype.autoPlayStart=function(){var t;return this.autoPlay&&(t=this.play(this._autoPlayOptions)),t},t.prototype._removeInstances=function(){for(var t=this._instances.length-1;t>=0;t--)this._poolInstance(this._instances[t]);this._instances.length=0},t.prototype._onComplete=function(t){if(this._instances){var e=this._instances.indexOf(t);e>-1&&this._instances.splice(e,1),this.isPlaying=this._instances.length>0}this._poolInstance(t)},t.prototype._createInstance=function(){if(t._pool.length>0){var e=t._pool.pop();return e.init(this.media),e}return this.media.create()},t.prototype._poolInstance=function(e){e.destroy(),t._pool.indexOf(e)<0&&t._pool.push(e)},t._pool=[],t}(),q=function(){function t(){this.init()}return t.prototype.init=function(){return this.supported&&(this._webAudioContext=new P),this._htmlAudioContext=new B,this._sounds={},this.useLegacy=!this.supported,this},Object.defineProperty(t.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"filtersAll",{get:function(){return this.useLegacy?[]:this._context.filters},set:function(t){this.useLegacy||(this._context.filters=t)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"supported",{get:function(){return null!==P.AudioContext},enumerable:!0,configurable:!0}),t.prototype.add=function(t,e){if("object"==typeof t){var i={};for(var r in t){var n=this._getOptions(t[r],e);i[r]=this.add(r,n)}return i}if("string"==typeof t){if(e instanceof Y)return this._sounds[t]=e,e;n=this._getOptions(e);var o=Y.from(n);return this._sounds[t]=o,o}},t.prototype._getOptions=function(t,e){var i;return i="string"==typeof t?{url:t}:t instanceof ArrayBuffer||t instanceof HTMLAudioElement?{source:t}:t,g({},i,e||{})},Object.defineProperty(t.prototype,"useLegacy",{get:function(){return this._useLegacy},set:function(t){V.legacy=t,this._useLegacy=t,this._context=!t&&this.supported?this._webAudioContext:this._htmlAudioContext},enumerable:!0,configurable:!0}),t.prototype.remove=function(t){return this.exists(t,!0),this._sounds[t].destroy(),delete this._sounds[t],this},Object.defineProperty(t.prototype,"volumeAll",{get:function(){return this._context.volume},set:function(t){this._context.volume=t,this._context.refresh()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"speedAll",{get:function(){return this._context.speed},set:function(t){this._context.speed=t,this._context.refresh()},enumerable:!0,configurable:!0}),t.prototype.togglePauseAll=function(){return this._context.togglePause()},t.prototype.pauseAll=function(){return this._context.paused=!0,this._context.refreshPaused(),this},t.prototype.resumeAll=function(){return this._context.paused=!1,this._context.refreshPaused(),this},t.prototype.toggleMuteAll=function(){return this._context.toggleMute()},t.prototype.muteAll=function(){return this._context.muted=!0,this._context.refresh(),this},t.prototype.unmuteAll=function(){return this._context.muted=!1,this._context.refresh(),this},t.prototype.removeAll=function(){for(var t in this._sounds)this._sounds[t].destroy(),delete this._sounds[t];return this},t.prototype.stopAll=function(){for(var t in this._sounds)this._sounds[t].stop();return this},t.prototype.exists=function(t,e){return void 0===e&&(e=!1),!!this._sounds[t]},t.prototype.find=function(t){return this.exists(t,!0),this._sounds[t]},t.prototype.play=function(t,e){return this.find(t).play(e)},t.prototype.stop=function(t){return this.find(t).stop()},t.prototype.pause=function(t){return this.find(t).pause()},t.prototype.resume=function(t){return this.find(t).resume()},t.prototype.volume=function(t,e){var i=this.find(t);return void 0!==e&&(i.volume=e),i.volume},t.prototype.speed=function(t,e){var i=this.find(t);return void 0!==e&&(i.speed=e),i.speed},t.prototype.duration=function(t){return this.find(t).duration},t.prototype.close=function(){return this.removeAll(),this._sounds=null,this._webAudioContext&&(this._webAudioContext.destroy(),this._webAudioContext=null),this._htmlAudioContext&&(this._htmlAudioContext.destroy(),this._htmlAudioContext=null),this._context=null,this},t}(),K=0,Z=Object.freeze({get PLAY_ID(){return K},playOnce:function(t,e){var i="alias"+K++;return m().add(i,{url:t,preload:!0,autoPlay:!0,loaded:function(t){t&&(m().remove(i),e&&e(t))},complete:function(){m().remove(i),e&&e(null)}}),i},render:function(t,e){var i=document.createElement("canvas");e=g({width:512,height:128,fill:"black"},e||{}),i.width=e.width,i.height=e.height;var r=PIXI.BaseTexture.fromCanvas(i);if(!(t.media instanceof A))return r;var n=t.media,o=i.getContext("2d");o.fillStyle=e.fill;for(var s=n.buffer.getChannelData(0),a=Math.ceil(s.length/e.width),l=e.height/2,h=0;h<e.width;h++){for(var u=1,c=-1,p=0;p<a;p++){var f=s[h*a+p];f<u&&(u=f),f>c&&(c=f)}o.fillRect(h,(1+u)*l,1,Math.max(1,(c-u)*l))}return r},resolveUrl:W,sineTone:function(t,e){void 0===t&&(t=200),void 0===e&&(e=1);var i=Y.from({singleInstance:!0});if(!(i.media instanceof A))return i;for(var r=i.media,n=i.context.audioContext.createBuffer(1,48e3*e,48e3),o=n.getChannelData(0),s=0;s<o.length;s++){var a=t*(s/n.sampleRate)*Math.PI;o[s]=2*Math.sin(a)}return r.buffer=n,i.isLoaded=!0,i},extensions:U,supported:X}),Q=function(t){return d=t,t}(new q),J=window,$=PIXI;if("undefined"==typeof Promise&&(J.Promise=r),void 0!==PIXI.loaders){var tt=parseInt(PIXI.VERSION.split(".")[0],10);4===tt?(PIXI.loaders.Loader=z,V.add(),PIXI.loader.use(V.use),PIXI.loader.pre(V.pre)):tt>=5&&$.Loader.registerPlugin(V)}return void 0===J.__pixiSound&&delete J.__pixiSound,$.sound||(Object.defineProperty($,"sound",{get:function(){return Q}}),Object.defineProperties(Q,{Filterable:{get:function(){return u}},filters:{get:function(){return k}},htmlaudio:{get:function(){return j}},Sound:{get:function(){return Y}},SoundLibrary:{get:function(){return q}},SoundSprite:{get:function(){return H}},utils:{get:function(){return Z}},webaudio:{get:function(){return E}},sound:{get:function(){return Q}}})),Q}()}).call(this,i(51).setImmediate)},function(t,e,i){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,n=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(n.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(n.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout((function(){t._onTimeout&&t._onTimeout()}),e))},i(52),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,i(3))},function(t,e,i){(function(t,e){!function(t,i){"use strict";if(!t.setImmediate){var r,n,o,s,a,l=1,h={},u=!1,c=t.document,p=Object.getPrototypeOf&&Object.getPrototypeOf(t);p=p&&p.setTimeout?p:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick((function(){d(t)}))}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,i=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=i,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){d(t.data)},r=function(t){o.port2.postMessage(t)}):c&&"onreadystatechange"in c.createElement("script")?(n=c.documentElement,r=function(t){var e=c.createElement("script");e.onreadystatechange=function(){d(t),e.onreadystatechange=null,n.removeChild(e),e=null},n.appendChild(e)}):r=function(t){setTimeout(d,0,t)}:(s="setImmediate$"+Math.random()+"$",a=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(s)&&d(+e.data.slice(s.length))},t.addEventListener?t.addEventListener("message",a,!1):t.attachEvent("onmessage",a),r=function(e){t.postMessage(s+e,"*")}),p.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),i=0;i<e.length;i++)e[i]=arguments[i+1];var n={callback:t,args:e};return h[l]=n,r(l),l++},p.clearImmediate=f}function f(t){delete h[t]}function d(t){if(u)setTimeout(d,0,t);else{var e=h[t];if(e){u=!0;try{!function(t){var e=t.callback,i=t.args;switch(i.length){case 0:e();break;case 1:e(i[0]);break;case 2:e(i[0],i[1]);break;case 3:e(i[0],i[1],i[2]);break;default:e.apply(void 0,i)}}(e)}finally{f(t),u=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,i(3),i(53))},function(t,e){var i,r,n=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(i===setTimeout)return setTimeout(t,0);if((i===o||!i)&&setTimeout)return i=setTimeout,setTimeout(t,0);try{return i(t,0)}catch(e){try{return i.call(null,t,0)}catch(e){return i.call(this,t,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:o}catch(t){i=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(t){r=s}}();var l,h=[],u=!1,c=-1;function p(){u&&l&&(u=!1,l.length?h=l.concat(h):c=-1,h.length&&f())}function f(){if(!u){var t=a(p);u=!0;for(var e=h.length;e;){for(l=h,h=[];++c<e;)l&&l[c].run();c=-1,e=h.length}l=null,u=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function d(t,e){this.fun=t,this.array=e}function g(){}n.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new d(t,e)),1!==h.length||u||a(f)},d.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(t){return[]},n.binding=function(t){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(t){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(t,e){var i=function(t,e){"use strict";var i="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",r=function(t){function e(e){t.call(this,i,"varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float gamma;\nuniform float contrast;\nuniform float saturation;\nuniform float brightness;\nuniform float red;\nuniform float green;\nuniform float blue;\nuniform float alpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (c.a > 0.0) {\n        c.rgb /= c.a;\n\n        vec3 rgb = pow(c.rgb, vec3(1. / gamma));\n        rgb = mix(vec3(.5), mix(vec3(dot(vec3(.2125, .7154, .0721), rgb)), rgb, saturation), contrast);\n        rgb.r *= red;\n        rgb.g *= green;\n        rgb.b *= blue;\n        c.rgb = rgb * brightness;\n\n        c.rgb *= c.a;\n    }\n\n    gl_FragColor = c * alpha;\n}\n"),Object.assign(this,{gamma:1,saturation:1,contrast:1,brightness:1,red:1,green:1,blue:1,alpha:1},e)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t,e,i,r){this.uniforms.gamma=Math.max(this.gamma,1e-4),this.uniforms.saturation=this.saturation,this.uniforms.contrast=this.contrast,this.uniforms.brightness=this.brightness,this.uniforms.red=this.red,this.uniforms.green=this.green,this.uniforms.blue=this.blue,this.uniforms.alpha=this.alpha,t.applyFilter(this,e,i,r)},e}(e.Filter),n=function(t){function i(i,r,n){void 0===i&&(i=4),void 0===r&&(r=3),void 0===n&&(n=!1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}",n?"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, clamp(vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y), filterClamp.xy, filterClamp.zw));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}\n":"\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 uOffset;\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n\n    // Sample top left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample top right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y + uOffset.y));\n\n    // Sample bottom right pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x + uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Sample bottom left pixel\n    color += texture2D(uSampler, vec2(vTextureCoord.x - uOffset.x, vTextureCoord.y - uOffset.y));\n\n    // Average\n    color *= 0.25;\n\n    gl_FragColor = color;\n}"),this.uniforms.uOffset=new Float32Array(2),this._pixelSize=new e.Point,this.pixelSize=1,this._clamp=n,this._kernels=null,Array.isArray(i)?this.kernels=i:(this._blur=i,this.quality=r)}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={kernels:{configurable:!0},clamp:{configurable:!0},pixelSize:{configurable:!0},quality:{configurable:!0},blur:{configurable:!0}};return i.prototype.apply=function(t,e,i,r){var n,o=this.pixelSize.x/e.size.width,s=this.pixelSize.y/e.size.height;if(1===this._quality||0===this._blur)n=this._kernels[0]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*s,t.applyFilter(this,e,i,r);else{for(var a,l=t.getRenderTarget(!0),h=e,u=l,c=this._quality-1,p=0;p<c;p++)n=this._kernels[p]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*s,t.applyFilter(this,h,u,!0),a=h,h=u,u=a;n=this._kernels[c]+.5,this.uniforms.uOffset[0]=n*o,this.uniforms.uOffset[1]=n*s,t.applyFilter(this,h,i,r),t.returnRenderTarget(l)}},i.prototype._generateKernels=function(){var t=this._blur,e=this._quality,i=[t];if(t>0)for(var r=t,n=t/e,o=1;o<e;o++)r-=n,i.push(r);this._kernels=i},r.kernels.get=function(){return this._kernels},r.kernels.set=function(t){Array.isArray(t)&&t.length>0?(this._kernels=t,this._quality=t.length,this._blur=Math.max.apply(Math,t)):(this._kernels=[0],this._quality=1)},r.clamp.get=function(){return this._clamp},r.pixelSize.set=function(t){"number"==typeof t?(this._pixelSize.x=t,this._pixelSize.y=t):Array.isArray(t)?(this._pixelSize.x=t[0],this._pixelSize.y=t[1]):t instanceof e.Point?(this._pixelSize.x=t.x,this._pixelSize.y=t.y):(this._pixelSize.x=1,this._pixelSize.y=1)},r.pixelSize.get=function(){return this._pixelSize},r.quality.get=function(){return this._quality},r.quality.set=function(t){this._quality=Math.max(1,Math.round(t)),this._generateKernels()},r.blur.get=function(){return this._blur},r.blur.set=function(t){this._blur=t,this._generateKernels()},Object.defineProperties(i.prototype,r),i}(e.Filter),o=i,s=function(t){function e(e){void 0===e&&(e=.5),t.call(this,o,"\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform float threshold;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    // A simple & fast algorithm for getting brightness.\n    // It's inaccuracy , but good enought for this feature.\n    float _max = max(max(color.r, color.g), color.b);\n    float _min = min(min(color.r, color.g), color.b);\n    float brightness = (_max + _min) * 0.5;\n\n    if(brightness > threshold) {\n        gl_FragColor = color;\n    } else {\n        gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);\n    }\n}\n"),this.threshold=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={threshold:{configurable:!0}};return i.threshold.get=function(){return this.uniforms.threshold},i.threshold.set=function(t){this.uniforms.threshold=t},Object.defineProperties(e.prototype,i),e}(e.Filter),a=function(t){function i(i){t.call(this,o,"uniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D bloomTexture;\nuniform float bloomScale;\nuniform float brightness;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    color.rgb *= brightness;\n    vec4 bloomColor = vec4(texture2D(bloomTexture, vTextureCoord).rgb, 0.0);\n    bloomColor.rgb *= bloomScale;\n    gl_FragColor = color + bloomColor;\n}\n"),"number"==typeof i&&(i={threshold:i}),i=Object.assign({threshold:.5,bloomScale:1,brightness:1,kernels:null,blur:8,quality:4,pixelSize:1,resolution:e.settings.RESOLUTION},i),this.bloomScale=i.bloomScale,this.brightness=i.brightness;var r=i.kernels,a=i.blur,l=i.quality,h=i.pixelSize,u=i.resolution;this._extractFilter=new s(i.threshold),this._extractFilter.resolution=u,this._blurFilter=r?new n(r):new n(a,l),this.pixelSize=h,this.resolution=u}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={resolution:{configurable:!0},threshold:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return i.prototype.apply=function(t,e,i,r,n){var o=t.getRenderTarget(!0);this._extractFilter.apply(t,e,o,!0,n);var s=t.getRenderTarget(!0);this._blurFilter.apply(t,o,s,!0,n),this.uniforms.bloomScale=this.bloomScale,this.uniforms.brightness=this.brightness,this.uniforms.bloomTexture=s,t.applyFilter(this,e,i,r),t.returnRenderTarget(s),t.returnRenderTarget(o)},r.resolution.get=function(){return this._resolution},r.resolution.set=function(t){this._resolution=t,this._extractFilter&&(this._extractFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},r.threshold.get=function(){return this._extractFilter.threshold},r.threshold.set=function(t){this._extractFilter.threshold=t},r.kernels.get=function(){return this._blurFilter.kernels},r.kernels.set=function(t){this._blurFilter.kernels=t},r.blur.get=function(){return this._blurFilter.blur},r.blur.set=function(t){this._blurFilter.blur=t},r.quality.get=function(){return this._blurFilter.quality},r.quality.set=function(t){this._blurFilter.quality=t},r.pixelSize.get=function(){return this._blurFilter.pixelSize},r.pixelSize.set=function(t){this._blurFilter.pixelSize=t},Object.defineProperties(i.prototype,r),i}(e.Filter),l=function(t){function e(e){void 0===e&&(e=8),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform float pixelSize;\nuniform sampler2D uSampler;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n    return floor( coord / size ) * size;\n}\n\nvec2 getMod(vec2 coord, vec2 size)\n{\n    return mod( coord , size) / size;\n}\n\nfloat character(float n, vec2 p)\n{\n    p = floor(p*vec2(4.0, -4.0) + 2.5);\n    if (clamp(p.x, 0.0, 4.0) == p.x && clamp(p.y, 0.0, 4.0) == p.y)\n    {\n        if (int(mod(n/exp2(p.x + 5.0*p.y), 2.0)) == 1) return 1.0;\n    }\n    return 0.0;\n}\n\nvoid main()\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    // get the rounded color..\n    vec2 pixCoord = pixelate(coord, vec2(pixelSize));\n    pixCoord = unmapCoord(pixCoord);\n\n    vec4 color = texture2D(uSampler, pixCoord);\n\n    // determine the character to use\n    float gray = (color.r + color.g + color.b) / 3.0;\n\n    float n =  65536.0;             // .\n    if (gray > 0.2) n = 65600.0;    // :\n    if (gray > 0.3) n = 332772.0;   // *\n    if (gray > 0.4) n = 15255086.0; // o\n    if (gray > 0.5) n = 23385164.0; // &\n    if (gray > 0.6) n = 15252014.0; // 8\n    if (gray > 0.7) n = 13199452.0; // @\n    if (gray > 0.8) n = 11512810.0; // #\n\n    // get the mod..\n    vec2 modd = getMod(coord, vec2(pixelSize));\n\n    gl_FragColor = color * character( n, vec2(-1.0) + modd * 2.0);\n\n}"),this.size=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0}};return i.size.get=function(){return this.uniforms.pixelSize},i.size.set=function(t){this.uniforms.pixelSize=t},Object.defineProperties(e.prototype,i),e}(e.Filter),h=function(t){function i(e){void 0===e&&(e={}),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float transformX;\nuniform float transformY;\nuniform vec3 lightColor;\nuniform float lightAlpha;\nuniform vec3 shadowColor;\nuniform float shadowAlpha;\n\nvoid main(void) {\n    vec2 transform = vec2(1.0 / filterArea) * vec2(transformX, transformY);\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float light = texture2D(uSampler, vTextureCoord - transform).a;\n    float shadow = texture2D(uSampler, vTextureCoord + transform).a;\n\n    color.rgb = mix(color.rgb, lightColor, clamp((color.a - light) * lightAlpha, 0.0, 1.0));\n    color.rgb = mix(color.rgb, shadowColor, clamp((color.a - shadow) * shadowAlpha, 0.0, 1.0));\n    gl_FragColor = vec4(color.rgb * color.a, color.a);\n}\n"),this.uniforms.lightColor=new Float32Array(3),this.uniforms.shadowColor=new Float32Array(3),e=Object.assign({rotation:45,thickness:2,lightColor:16777215,lightAlpha:.7,shadowColor:0,shadowAlpha:.7},e),this.rotation=e.rotation,this.thickness=e.thickness,this.lightColor=e.lightColor,this.lightAlpha=e.lightAlpha,this.shadowColor=e.shadowColor,this.shadowAlpha=e.shadowAlpha}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={rotation:{configurable:!0},thickness:{configurable:!0},lightColor:{configurable:!0},lightAlpha:{configurable:!0},shadowColor:{configurable:!0},shadowAlpha:{configurable:!0}};return i.prototype._updateTransform=function(){this.uniforms.transformX=this._thickness*Math.cos(this._angle),this.uniforms.transformY=this._thickness*Math.sin(this._angle)},r.rotation.get=function(){return this._angle/e.DEG_TO_RAD},r.rotation.set=function(t){this._angle=t*e.DEG_TO_RAD,this._updateTransform()},r.thickness.get=function(){return this._thickness},r.thickness.set=function(t){this._thickness=t,this._updateTransform()},r.lightColor.get=function(){return e.utils.rgb2hex(this.uniforms.lightColor)},r.lightColor.set=function(t){e.utils.hex2rgb(t,this.uniforms.lightColor)},r.lightAlpha.get=function(){return this.uniforms.lightAlpha},r.lightAlpha.set=function(t){this.uniforms.lightAlpha=t},r.shadowColor.get=function(){return e.utils.rgb2hex(this.uniforms.shadowColor)},r.shadowColor.set=function(t){e.utils.hex2rgb(t,this.uniforms.shadowColor)},r.shadowAlpha.get=function(){return this.uniforms.shadowAlpha},r.shadowAlpha.set=function(t){this.uniforms.shadowAlpha=t},Object.defineProperties(i.prototype,r),i}(e.Filter),u=e.filters,c=u.BlurXFilter,p=u.BlurYFilter,f=u.AlphaFilter,d=function(t){function i(i,r,n,o){var s,a;void 0===i&&(i=2),void 0===r&&(r=4),void 0===n&&(n=e.settings.RESOLUTION),void 0===o&&(o=5),t.call(this),"number"==typeof i?(s=i,a=i):i instanceof e.Point?(s=i.x,a=i.y):Array.isArray(i)&&(s=i[0],a=i[1]),this.blurXFilter=new c(s,r,n,o),this.blurYFilter=new p(a,r,n,o),this.blurYFilter.blendMode=e.BLEND_MODES.SCREEN,this.defaultFilter=new f}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={blur:{configurable:!0},blurX:{configurable:!0},blurY:{configurable:!0}};return i.prototype.apply=function(t,e,i){var r=t.getRenderTarget(!0);this.defaultFilter.apply(t,e,i),this.blurXFilter.apply(t,e,r),this.blurYFilter.apply(t,r,i),t.returnRenderTarget(r)},r.blur.get=function(){return this.blurXFilter.blur},r.blur.set=function(t){this.blurXFilter.blur=this.blurYFilter.blur=t},r.blurX.get=function(){return this.blurXFilter.blur},r.blurX.set=function(t){this.blurXFilter.blur=t},r.blurY.get=function(){return this.blurYFilter.blur},r.blurY.set=function(t){this.blurYFilter.blur=t},Object.defineProperties(i.prototype,r),i}(e.Filter),g=function(t){function e(e,i,r){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","uniform float radius;\nuniform float strength;\nuniform vec2 center;\nuniform sampler2D uSampler;\nvarying vec2 vTextureCoord;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nvoid main()\n{\n    vec2 coord = vTextureCoord * filterArea.xy;\n    coord -= center * dimensions.xy;\n    float distance = length(coord);\n    if (distance < radius) {\n        float percent = distance / radius;\n        if (strength > 0.0) {\n            coord *= mix(1.0, smoothstep(0.0, radius / distance, percent), strength * 0.75);\n        } else {\n            coord *= mix(1.0, pow(percent, 1.0 + strength * 0.75) * radius / distance, 1.0 - percent);\n        }\n    }\n    coord += center * dimensions.xy;\n    coord /= filterArea.xy;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    gl_FragColor = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.center=e||[.5,.5],this.radius=i||100,this.strength=r||1}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={radius:{configurable:!0},strength:{configurable:!0},center:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){this.uniforms.dimensions[0]=e.sourceFrame.width,this.uniforms.dimensions[1]=e.sourceFrame.height,t.applyFilter(this,e,i,r)},i.radius.get=function(){return this.uniforms.radius},i.radius.set=function(t){this.uniforms.radius=t},i.strength.get=function(){return this.uniforms.strength},i.strength.set=function(t){this.uniforms.strength=t},i.center.get=function(){return this.uniforms.center},i.center.set=function(t){this.uniforms.center=t},Object.defineProperties(e.prototype,i),e}(e.Filter),m=function(t){function i(e,i,r){void 0===i&&(i=!1),void 0===r&&(r=1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform sampler2D colorMap;\n\nuniform float _mix;\nuniform float _size;\nuniform float _sliceSize;\nuniform float _slicePixelSize;\nuniform float _sliceInnerSize;\n\nvoid main() {\n    vec4 color = texture2D(uSampler, vTextureCoord.xy);\n\n    float sliceIndex = color.b * (_size - 1.0);\n    float zSlice0 = floor(sliceIndex);\n    float zSlice1 = ceil(sliceIndex);\n\n    float xOffset = _slicePixelSize * 0.5 + color.r * _sliceInnerSize;\n    float s0 = xOffset + zSlice0 * _sliceSize;\n    float s1 = xOffset + zSlice1 * _sliceSize;\n    vec4 slice0Color = texture2D(colorMap, vec2(s0, color.g));\n    vec4 slice1Color = texture2D(colorMap, vec2(s1, color.g));\n    vec4 adjusted = mix(slice0Color, slice1Color, fract(sliceIndex));\n\n    gl_FragColor = mix(color, adjusted, _mix);\n}\n"),this._size=0,this._sliceSize=0,this._slicePixelSize=0,this._sliceInnerSize=0,this._scaleMode=null,this._nearest=!1,this.nearest=i,this.mix=r,this.colorMap=e}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={colorSize:{configurable:!0},colorMap:{configurable:!0},nearest:{configurable:!0}};return i.prototype.apply=function(t,e,i,r){this.uniforms._mix=this.mix,t.applyFilter(this,e,i,r)},r.colorSize.get=function(){return this._size},r.colorMap.get=function(){return this._colorMap},r.colorMap.set=function(t){t instanceof e.Texture||(t=e.Texture.from(t)),t&&t.baseTexture&&(t.baseTexture.scaleMode=this._scaleMode,t.baseTexture.mipmap=!1,this._size=t.height,this._sliceSize=1/this._size,this._slicePixelSize=this._sliceSize/this._size,this._sliceInnerSize=this._slicePixelSize*(this._size-1),this.uniforms._size=this._size,this.uniforms._sliceSize=this._sliceSize,this.uniforms._slicePixelSize=this._slicePixelSize,this.uniforms._sliceInnerSize=this._sliceInnerSize,this.uniforms.colorMap=t),this._colorMap=t},r.nearest.get=function(){return this._nearest},r.nearest.set=function(t){this._nearest=t,this._scaleMode=t?e.SCALE_MODES.NEAREST:e.SCALE_MODES.LINEAR;var i=this._colorMap;i&&i.baseTexture&&(i.baseTexture._glTextures={},i.baseTexture.scaleMode=this._scaleMode,i.baseTexture.mipmap=!1,i._updateID++,i.baseTexture.emit("update",i.baseTexture))},i.prototype.updateColorMap=function(){var t=this._colorMap;t&&t.baseTexture&&(t._updateID++,t.baseTexture.emit("update",t.baseTexture),this.colorMap=t)},i.prototype.destroy=function(e){this._colorMap&&this._colorMap.destroy(e),t.prototype.destroy.call(this)},Object.defineProperties(i.prototype,r),i}(e.Filter),v=function(t){function i(e,i,r){void 0===e&&(e=16711680),void 0===i&&(i=0),void 0===r&&(r=.4),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec3 originalColor;\nuniform vec3 newColor;\nuniform float epsilon;\nvoid main(void) {\n    vec4 currentColor = texture2D(uSampler, vTextureCoord);\n    vec3 colorDiff = originalColor - (currentColor.rgb / max(currentColor.a, 0.0000000001));\n    float colorDistance = length(colorDiff);\n    float doReplace = step(colorDistance, epsilon);\n    gl_FragColor = vec4(mix(currentColor.rgb, (newColor + colorDiff) * currentColor.a, doReplace), currentColor.a);\n}\n"),this.uniforms.originalColor=new Float32Array(3),this.uniforms.newColor=new Float32Array(3),this.originalColor=e,this.newColor=i,this.epsilon=r}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={originalColor:{configurable:!0},newColor:{configurable:!0},epsilon:{configurable:!0}};return r.originalColor.set=function(t){var i=this.uniforms.originalColor;"number"==typeof t?(e.utils.hex2rgb(t,i),this._originalColor=t):(i[0]=t[0],i[1]=t[1],i[2]=t[2],this._originalColor=e.utils.rgb2hex(i))},r.originalColor.get=function(){return this._originalColor},r.newColor.set=function(t){var i=this.uniforms.newColor;"number"==typeof t?(e.utils.hex2rgb(t,i),this._newColor=t):(i[0]=t[0],i[1]=t[1],i[2]=t[2],this._newColor=e.utils.rgb2hex(i))},r.newColor.get=function(){return this._newColor},r.epsilon.set=function(t){this.uniforms.epsilon=t},r.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(i.prototype,r),i}(e.Filter),y=function(t){function e(e,i,r){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying mediump vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec2 texelSize;\nuniform float matrix[9];\n\nvoid main(void)\n{\n   vec4 c11 = texture2D(uSampler, vTextureCoord - texelSize); // top left\n   vec4 c12 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y - texelSize.y)); // top center\n   vec4 c13 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y - texelSize.y)); // top right\n\n   vec4 c21 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y)); // mid left\n   vec4 c22 = texture2D(uSampler, vTextureCoord); // mid center\n   vec4 c23 = texture2D(uSampler, vec2(vTextureCoord.x + texelSize.x, vTextureCoord.y)); // mid right\n\n   vec4 c31 = texture2D(uSampler, vec2(vTextureCoord.x - texelSize.x, vTextureCoord.y + texelSize.y)); // bottom left\n   vec4 c32 = texture2D(uSampler, vec2(vTextureCoord.x, vTextureCoord.y + texelSize.y)); // bottom center\n   vec4 c33 = texture2D(uSampler, vTextureCoord + texelSize); // bottom right\n\n   gl_FragColor =\n       c11 * matrix[0] + c12 * matrix[1] + c13 * matrix[2] +\n       c21 * matrix[3] + c22 * matrix[4] + c23 * matrix[5] +\n       c31 * matrix[6] + c32 * matrix[7] + c33 * matrix[8];\n\n   gl_FragColor.a = c22.a;\n}\n"),this.uniforms.texelSize=new Float32Array(9),this.matrix=e,this.width=i,this.height=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={matrix:{configurable:!0},width:{configurable:!0},height:{configurable:!0}};return i.matrix.get=function(){return this.uniforms.matrix},i.matrix.set=function(t){this.uniforms.matrix=new Float32Array(t)},i.width.get=function(){return 1/this.uniforms.texelSize[0]},i.width.set=function(t){this.uniforms.texelSize[0]=1/t},i.height.get=function(){return 1/this.uniforms.texelSize[1]},i.height.set=function(t){this.uniforms.texelSize[1]=1/t},Object.defineProperties(e.prototype,i),e}(e.Filter),_=function(t){function e(){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    float lum = length(texture2D(uSampler, vTextureCoord.xy).rgb);\n\n    gl_FragColor = vec4(1.0, 1.0, 1.0, 1.0);\n\n    if (lum < 1.00)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.75)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.50)\n    {\n        if (mod(gl_FragCoord.x + gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n\n    if (lum < 0.3)\n    {\n        if (mod(gl_FragCoord.x - gl_FragCoord.y - 5.0, 10.0) == 0.0)\n        {\n            gl_FragColor = vec4(0.0, 0.0, 0.0, 1.0);\n        }\n    }\n}\n")}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(e.Filter),x=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nconst float SQRT_2 = 1.414213;\n\nconst float light = 1.0;\n\nuniform float curvature;\nuniform float lineWidth;\nuniform float lineContrast;\nuniform bool verticalLine;\nuniform float noise;\nuniform float noiseSize;\n\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\n\nuniform float seed;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    vec2 dir = vec2(coord - vec2(0.5, 0.5));\n\n    float _c = curvature > 0. ? curvature : 1.;\n    float k = curvature > 0. ?(length(dir * dir) * 0.25 * _c * _c + 0.935 * _c) : 1.;\n    vec2 uv = dir * k;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 rgb = gl_FragColor.rgb;\n\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        rgb += _noise * noise;\n    }\n\n    if (lineWidth > 0.0) {\n        float v = (verticalLine ? uv.x * dimensions.x : uv.y * dimensions.y) * min(1.0, 2.0 / lineWidth ) / _c;\n        float j = 1. + cos(v * 1.2 - time) * 0.5 * lineContrast;\n        rgb *= j;\n        float segment = verticalLine ? mod((dir.x + .5) * dimensions.x, 4.) : mod((dir.y + .5) * dimensions.y, 4.);\n        rgb *= 0.99 + ceil(segment) * 0.015;\n    }\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    gl_FragColor.rgb = rgb;\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.time=0,this.seed=0,Object.assign(this,{curvature:1,lineWidth:1,lineContrast:.25,verticalLine:!1,noise:0,noiseSize:1,seed:0,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3,time:0},e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={curvature:{configurable:!0},lineWidth:{configurable:!0},lineContrast:{configurable:!0},verticalLine:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){this.uniforms.dimensions[0]=e.sourceFrame.width,this.uniforms.dimensions[1]=e.sourceFrame.height,this.uniforms.seed=this.seed,this.uniforms.time=this.time,t.applyFilter(this,e,i,r)},i.curvature.set=function(t){this.uniforms.curvature=t},i.curvature.get=function(){return this.uniforms.curvature},i.lineWidth.set=function(t){this.uniforms.lineWidth=t},i.lineWidth.get=function(){return this.uniforms.lineWidth},i.lineContrast.set=function(t){this.uniforms.lineContrast=t},i.lineContrast.get=function(){return this.uniforms.lineContrast},i.verticalLine.set=function(t){this.uniforms.verticalLine=t},i.verticalLine.get=function(){return this.uniforms.verticalLine},i.noise.set=function(t){this.uniforms.noise=t},i.noise.get=function(){return this.uniforms.noise},i.noiseSize.set=function(t){this.uniforms.noiseSize=t},i.noiseSize.get=function(){return this.uniforms.noiseSize},i.vignetting.set=function(t){this.uniforms.vignetting=t},i.vignetting.get=function(){return this.uniforms.vignetting},i.vignettingAlpha.set=function(t){this.uniforms.vignettingAlpha=t},i.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},i.vignettingBlur.set=function(t){this.uniforms.vignettingBlur=t},i.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(e.prototype,i),e}(e.Filter),b=function(t){function e(e,i){void 0===e&&(e=1),void 0===i&&(i=5),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform vec4 filterArea;\nuniform sampler2D uSampler;\n\nuniform float angle;\nuniform float scale;\n\nfloat pattern()\n{\n   float s = sin(angle), c = cos(angle);\n   vec2 tex = vTextureCoord * filterArea.xy;\n   vec2 point = vec2(\n       c * tex.x - s * tex.y,\n       s * tex.x + c * tex.y\n   ) * scale;\n   return (sin(point.x) * sin(point.y)) * 4.0;\n}\n\nvoid main()\n{\n   vec4 color = texture2D(uSampler, vTextureCoord);\n   float average = (color.r + color.g + color.b) / 3.0;\n   gl_FragColor = vec4(vec3(average * 10.0 - 5.0 + pattern()), color.a);\n}\n"),this.scale=e,this.angle=i}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={scale:{configurable:!0},angle:{configurable:!0}};return i.scale.get=function(){return this.uniforms.scale},i.scale.set=function(t){this.uniforms.scale=t},i.angle.get=function(){return this.uniforms.angle},i.angle.set=function(t){this.uniforms.angle=t},Object.defineProperties(e.prototype,i),e}(e.Filter),T=i,w="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform vec3 color;\nvoid main(void){\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n\n    // Un-premultiply alpha before applying the color\n    if (sample.a > 0.0) {\n        sample.rgb /= sample.a;\n    }\n\n    // Premultiply alpha again\n    sample.rgb = color.rgb * sample.a;\n\n    // alpha user alpha\n    sample *= alpha;\n\n    gl_FragColor = sample;\n}",S=function(t){function i(i){i&&i.constructor!==Object&&(i={rotation:i},void 0!==arguments[1]&&(i.distance=arguments[1]),void 0!==arguments[2]&&(i.blur=arguments[2]),void 0!==arguments[3]&&(i.color=arguments[3]),void 0!==arguments[4]&&(i.alpha=arguments[4])),i=Object.assign({rotation:45,distance:5,color:0,alpha:.5,shadowOnly:!1,kernels:null,blur:2,quality:3,pixelSize:1,resolution:e.settings.RESOLUTION},i),t.call(this);var r=i.kernels,o=i.blur,s=i.quality,a=i.pixelSize,l=i.resolution;this._tintFilter=new e.Filter(T,w),this._tintFilter.uniforms.color=new Float32Array(4),this._tintFilter.resolution=l,this._blurFilter=r?new n(r):new n(o,s),this.pixelSize=a,this.resolution=l,this.targetTransform=new e.Matrix;var h=i.shadowOnly,u=i.rotation,c=i.distance,p=i.alpha,f=i.color;this.shadowOnly=h,this.rotation=u,this.distance=c,this.alpha=p,this.color=f,this._updatePadding()}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={resolution:{configurable:!0},distance:{configurable:!0},rotation:{configurable:!0},alpha:{configurable:!0},color:{configurable:!0},kernels:{configurable:!0},blur:{configurable:!0},quality:{configurable:!0},pixelSize:{configurable:!0}};return i.prototype.apply=function(t,e,i,r){var n=t.getRenderTarget();n.transform=this.targetTransform,this._tintFilter.apply(t,e,n,!0),n.transform=null,this._blurFilter.apply(t,n,i),!0!==this.shadowOnly&&t.applyFilter(this,e,i,r),t.returnRenderTarget(n)},i.prototype._updatePadding=function(){this.padding=this.distance+2*this.blur},i.prototype._updateTargetTransform=function(){this.targetTransform.tx=this.distance*Math.cos(this.angle),this.targetTransform.ty=this.distance*Math.sin(this.angle)},r.resolution.get=function(){return this._resolution},r.resolution.set=function(t){this._resolution=t,this._tintFilter&&(this._tintFilter.resolution=t),this._blurFilter&&(this._blurFilter.resolution=t)},r.distance.get=function(){return this._distance},r.distance.set=function(t){this._distance=t,this._updatePadding(),this._updateTargetTransform()},r.rotation.get=function(){return this.angle/e.DEG_TO_RAD},r.rotation.set=function(t){this.angle=t*e.DEG_TO_RAD,this._updateTargetTransform()},r.alpha.get=function(){return this._tintFilter.uniforms.alpha},r.alpha.set=function(t){this._tintFilter.uniforms.alpha=t},r.color.get=function(){return e.utils.rgb2hex(this._tintFilter.uniforms.color)},r.color.set=function(t){e.utils.hex2rgb(t,this._tintFilter.uniforms.color)},r.kernels.get=function(){return this._blurFilter.kernels},r.kernels.set=function(t){this._blurFilter.kernels=t},r.blur.get=function(){return this._blurFilter.blur},r.blur.set=function(t){this._blurFilter.blur=t,this._updatePadding()},r.quality.get=function(){return this._blurFilter.quality},r.quality.set=function(t){this._blurFilter.quality=t},r.pixelSize.get=function(){return this._blurFilter.pixelSize},r.pixelSize.set=function(t){this._blurFilter.pixelSize=t},Object.defineProperties(i.prototype,r),i}(e.Filter),A=function(t){function e(e){void 0===e&&(e=5),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float strength;\nuniform vec4 filterArea;\n\n\nvoid main(void)\n{\n\tvec2 onePixel = vec2(1.0 / filterArea);\n\n\tvec4 color;\n\n\tcolor.rgb = vec3(0.5);\n\n\tcolor -= texture2D(uSampler, vTextureCoord - onePixel) * strength;\n\tcolor += texture2D(uSampler, vTextureCoord + onePixel) * strength;\n\n\tcolor.rgb = vec3((color.r + color.g + color.b) / 3.0);\n\n\tfloat alpha = texture2D(uSampler, vTextureCoord).a;\n\n\tgl_FragColor = vec4(color.rgb * alpha, alpha);\n}\n"),this.strength=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={strength:{configurable:!0}};return i.strength.get=function(){return this.uniforms.strength},i.strength.set=function(t){this.uniforms.strength=t},Object.defineProperties(e.prototype,i),e}(e.Filter),P=function(t){function i(i){void 0===i&&(i={}),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","// precision highp float;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\nuniform float aspect;\n\nuniform sampler2D displacementMap;\nuniform float offset;\nuniform float sinDir;\nuniform float cosDir;\nuniform int fillMode;\n\nuniform float seed;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nconst int TRANSPARENT = 0;\nconst int ORIGINAL = 1;\nconst int LOOP = 2;\nconst int CLAMP = 3;\nconst int MIRROR = 4;\n\nvoid main(void)\n{\n    vec2 coord = (vTextureCoord * filterArea.xy) / dimensions;\n\n    if (coord.x > 1.0 || coord.y > 1.0) {\n        return;\n    }\n\n    float cx = coord.x - 0.5;\n    float cy = (coord.y - 0.5) * aspect;\n    float ny = (-sinDir * cx + cosDir * cy) / aspect + 0.5;\n\n    // displacementMap: repeat\n    // ny = ny > 1.0 ? ny - 1.0 : (ny < 0.0 ? 1.0 + ny : ny);\n\n    // displacementMap: mirror\n    ny = ny > 1.0 ? 2.0 - ny : (ny < 0.0 ? -ny : ny);\n\n    vec4 dc = texture2D(displacementMap, vec2(0.5, ny));\n\n    float displacement = (dc.r - dc.g) * (offset / filterArea.x);\n\n    coord = vTextureCoord + vec2(cosDir * displacement, sinDir * displacement * aspect);\n\n    if (fillMode == CLAMP) {\n        coord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    } else {\n        if( coord.x > filterClamp.z ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.x -= filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x = filterClamp.z * 2.0 - coord.x;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        } else if( coord.x < filterClamp.x ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.x += filterClamp.z;\n            } else if (fillMode == MIRROR) {\n                coord.x *= -filterClamp.z;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        }\n\n        if( coord.y > filterClamp.w ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.y -= filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y = filterClamp.w * 2.0 - coord.y;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        } else if( coord.y < filterClamp.y ) {\n            if (fillMode == ORIGINAL) {\n                gl_FragColor = texture2D(uSampler, vTextureCoord);\n                return;\n            } else if (fillMode == LOOP) {\n                coord.y += filterClamp.w;\n            } else if (fillMode == MIRROR) {\n                coord.y *= -filterClamp.w;\n            } else {\n                gl_FragColor = vec4(0., 0., 0., 0.);\n                return;\n            }\n        }\n    }\n\n    gl_FragColor.r = texture2D(uSampler, coord + red * (1.0 - seed * 0.4) / filterArea.xy).r;\n    gl_FragColor.g = texture2D(uSampler, coord + green * (1.0 - seed * 0.3) / filterArea.xy).g;\n    gl_FragColor.b = texture2D(uSampler, coord + blue * (1.0 - seed * 0.2) / filterArea.xy).b;\n    gl_FragColor.a = texture2D(uSampler, coord).a;\n}\n"),this.uniforms.dimensions=new Float32Array(2),i=Object.assign({slices:5,offset:100,direction:0,fillMode:0,average:!1,seed:0,red:[0,0],green:[0,0],blue:[0,0],minSize:8,sampleSize:512},i),this.direction=i.direction,this.red=i.red,this.green=i.green,this.blue=i.blue,this.offset=i.offset,this.fillMode=i.fillMode,this.average=i.average,this.seed=i.seed,this.minSize=i.minSize,this.sampleSize=i.sampleSize,this._canvas=document.createElement("canvas"),this._canvas.width=4,this._canvas.height=this.sampleSize,this.texture=e.Texture.fromCanvas(this._canvas,e.SCALE_MODES.NEAREST),this._slices=0,this.slices=i.slices}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={sizes:{configurable:!0},offsets:{configurable:!0},slices:{configurable:!0},direction:{configurable:!0},red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return i.prototype.apply=function(t,e,i,r){var n=e.sourceFrame.width,o=e.sourceFrame.height;this.uniforms.dimensions[0]=n,this.uniforms.dimensions[1]=o,this.uniforms.aspect=o/n,this.uniforms.seed=this.seed,this.uniforms.offset=this.offset,this.uniforms.fillMode=this.fillMode,t.applyFilter(this,e,i,r)},i.prototype._randomizeSizes=function(){var t=this._sizes,e=this._slices-1,i=this.sampleSize,r=Math.min(this.minSize/i,.9/this._slices);if(this.average){for(var n=this._slices,o=1,s=0;s<e;s++){var a=o/(n-s),l=Math.max(a*(1-.6*Math.random()),r);t[s]=l,o-=l}t[e]=o}else{for(var h=1,u=Math.sqrt(1/this._slices),c=0;c<e;c++){var p=Math.max(u*h*Math.random(),r);t[c]=p,h-=p}t[e]=h}this.shuffle()},i.prototype.shuffle=function(){for(var t=this._sizes,e=this._slices-1;e>0;e--){var i=Math.random()*e>>0,r=t[e];t[e]=t[i],t[i]=r}},i.prototype._randomizeOffsets=function(){for(var t=0;t<this._slices;t++)this._offsets[t]=Math.random()*(Math.random()<.5?-1:1)},i.prototype.refresh=function(){this._randomizeSizes(),this._randomizeOffsets(),this.redraw()},i.prototype.redraw=function(){var t,e=this.sampleSize,i=this.texture,r=this._canvas.getContext("2d");r.clearRect(0,0,8,e);for(var n=0,o=0;o<this._slices;o++){t=Math.floor(256*this._offsets[o]);var s=this._sizes[o]*e,a=t>0?t:0,l=t<0?-t:0;r.fillStyle="rgba("+a+", "+l+", 0, 1)",r.fillRect(0,n>>0,e,s+1>>0),n+=s}i.baseTexture.emit("update",i.baseTexture),this.uniforms.displacementMap=i},r.sizes.set=function(t){for(var e=Math.min(this._slices,t.length),i=0;i<e;i++)this._sizes[i]=t[i]},r.sizes.get=function(){return this._sizes},r.offsets.set=function(t){for(var e=Math.min(this._slices,t.length),i=0;i<e;i++)this._offsets[i]=t[i]},r.offsets.get=function(){return this._offsets},r.slices.get=function(){return this._slices},r.slices.set=function(t){this._slices!==t&&(this._slices=t,this.uniforms.slices=t,this._sizes=this.uniforms.slicesWidth=new Float32Array(t),this._offsets=this.uniforms.slicesOffset=new Float32Array(t),this.refresh())},r.direction.get=function(){return this._direction},r.direction.set=function(t){if(this._direction!==t){this._direction=t;var i=t*e.DEG_TO_RAD;this.uniforms.sinDir=Math.sin(i),this.uniforms.cosDir=Math.cos(i)}},r.red.get=function(){return this.uniforms.red},r.red.set=function(t){this.uniforms.red=t},r.green.get=function(){return this.uniforms.green},r.green.set=function(t){this.uniforms.green=t},r.blue.get=function(){return this.uniforms.blue},r.blue.set=function(t){this.uniforms.blue=t},i.prototype.destroy=function(){this.texture.destroy(!0),this.texture=null,this._canvas=null,this.red=null,this.green=null,this.blue=null,this._sizes=null,this._offsets=null},Object.defineProperties(i.prototype,r),i}(e.Filter);P.TRANSPARENT=0,P.ORIGINAL=1,P.LOOP=2,P.CLAMP=3,P.MIRROR=4;var E=function(t){function i(e,i,r,n,o){void 0===e&&(e=10),void 0===i&&(i=4),void 0===r&&(r=0),void 0===n&&(n=16777215),void 0===o&&(o=.1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform sampler2D uSampler;\n\nuniform float distance;\nuniform float outerStrength;\nuniform float innerStrength;\nuniform vec4 glowColor;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nconst float PI = 3.14159265358979323846264;\n\nvoid main(void) {\n    vec2 px = vec2(1.0 / filterArea.x, 1.0 / filterArea.y);\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float totalAlpha = 0.0;\n    float maxTotalAlpha = 0.0;\n    float cosAngle;\n    float sinAngle;\n    vec2 displaced;\n    for (float angle = 0.0; angle <= PI * 2.0; angle += %QUALITY_DIST%) {\n       cosAngle = cos(angle);\n       sinAngle = sin(angle);\n       for (float curDistance = 1.0; curDistance <= %DIST%; curDistance++) {\n           displaced.x = vTextureCoord.x + cosAngle * curDistance * px.x;\n           displaced.y = vTextureCoord.y + sinAngle * curDistance * px.y;\n           curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n           totalAlpha += (distance - curDistance) * curColor.a;\n           maxTotalAlpha += (distance - curDistance);\n       }\n    }\n    maxTotalAlpha = max(maxTotalAlpha, 0.0001);\n\n    ownColor.a = max(ownColor.a, 0.0001);\n    ownColor.rgb = ownColor.rgb / ownColor.a;\n    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);\n    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;\n    float resultAlpha = (ownColor.a + outerGlowAlpha);\n    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);\n}\n".replace(/%QUALITY_DIST%/gi,""+(1/o/e).toFixed(7)).replace(/%DIST%/gi,""+e.toFixed(7))),this.uniforms.glowColor=new Float32Array([0,0,0,1]),this.distance=e,this.color=n,this.outerStrength=i,this.innerStrength=r}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={color:{configurable:!0},distance:{configurable:!0},outerStrength:{configurable:!0},innerStrength:{configurable:!0}};return r.color.get=function(){return e.utils.rgb2hex(this.uniforms.glowColor)},r.color.set=function(t){e.utils.hex2rgb(t,this.uniforms.glowColor)},r.distance.get=function(){return this.uniforms.distance},r.distance.set=function(t){this.uniforms.distance=t},r.outerStrength.get=function(){return this.uniforms.outerStrength},r.outerStrength.set=function(t){this.uniforms.outerStrength=t},r.innerStrength.get=function(){return this.uniforms.innerStrength},r.innerStrength.set=function(t){this.uniforms.innerStrength=t},Object.defineProperties(i.prototype,r),i}(e.Filter),C=i,O="vec3 mod289(vec3 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x)\n{\n    return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 permute(vec4 x)\n{\n    return mod289(((x * 34.0) + 1.0) * x);\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n    return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec3 fade(vec3 t)\n{\n    return t * t * t * (t * (t * 6.0 - 15.0) + 10.0);\n}\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n    vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n    vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n    Pi0 = mod289(Pi0);\n    Pi1 = mod289(Pi1);\n    vec3 Pf0 = fract(P); // Fractional part for interpolation\n    vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n    vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n    vec4 iy = vec4(Pi0.yy, Pi1.yy);\n    vec4 iz0 = Pi0.zzzz;\n    vec4 iz1 = Pi1.zzzz;\n    vec4 ixy = permute(permute(ix) + iy);\n    vec4 ixy0 = permute(ixy + iz0);\n    vec4 ixy1 = permute(ixy + iz1);\n    vec4 gx0 = ixy0 * (1.0 / 7.0);\n    vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n    gx0 = fract(gx0);\n    vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n    vec4 sz0 = step(gz0, vec4(0.0));\n    gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n    gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n    vec4 gx1 = ixy1 * (1.0 / 7.0);\n    vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n    gx1 = fract(gx1);\n    vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n    vec4 sz1 = step(gz1, vec4(0.0));\n    gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n    gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n    vec3 g000 = vec3(gx0.x, gy0.x, gz0.x);\n    vec3 g100 = vec3(gx0.y, gy0.y, gz0.y);\n    vec3 g010 = vec3(gx0.z, gy0.z, gz0.z);\n    vec3 g110 = vec3(gx0.w, gy0.w, gz0.w);\n    vec3 g001 = vec3(gx1.x, gy1.x, gz1.x);\n    vec3 g101 = vec3(gx1.y, gy1.y, gz1.y);\n    vec3 g011 = vec3(gx1.z, gy1.z, gz1.z);\n    vec3 g111 = vec3(gx1.w, gy1.w, gz1.w);\n    vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n    g000 *= norm0.x;\n    g010 *= norm0.y;\n    g100 *= norm0.z;\n    g110 *= norm0.w;\n    vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n    g001 *= norm1.x;\n    g011 *= norm1.y;\n    g101 *= norm1.z;\n    g111 *= norm1.w;\n    float n000 = dot(g000, Pf0);\n    float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n    float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n    float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n    float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n    float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n    float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n    float n111 = dot(g111, Pf1);\n    vec3 fade_xyz = fade(Pf0);\n    vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n    vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n    float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x);\n    return 2.2 * n_xyz;\n}\nfloat turb(vec3 P, vec3 rep, float lacunarity, float gain)\n{\n    float sum = 0.0;\n    float sc = 1.0;\n    float totalgain = 1.0;\n    for (float i = 0.0; i < 6.0; i++)\n    {\n        sum += totalgain * pnoise(P * sc, rep);\n        sc *= lacunarity;\n        totalgain *= gain;\n    }\n    return abs(sum);\n}\n",I="varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform vec2 light;\nuniform bool parallel;\nuniform float aspect;\n\nuniform float gain;\nuniform float lacunarity;\nuniform float time;\n\n${perlin}\n\nvoid main(void) {\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    float d;\n\n    if (parallel) {\n        float _cos = light.x;\n        float _sin = light.y;\n        d = (_cos * coord.x) + (_sin * coord.y * aspect);\n    } else {\n        float dx = coord.x - light.x / dimensions.x;\n        float dy = (coord.y - light.y / dimensions.y) * aspect;\n        float dis = sqrt(dx * dx + dy * dy) + 0.00001;\n        d = dy / dis;\n    }\n\n    vec3 dir = vec3(d, d, 0.0);\n\n    float noise = turb(dir + vec3(time, 0.0, 62.1 + time) * 0.05, vec3(480.0, 320.0, 480.0), lacunarity, gain);\n    noise = mix(noise, 0.0, 0.3);\n    //fade vertically.\n    vec4 mist = vec4(noise, noise, noise, 1.0) * (1.0 - coord.y);\n    mist.a = 1.0;\n\n    gl_FragColor = texture2D(uSampler, vTextureCoord) + mist;\n}\n",M=function(t){function i(i){t.call(this,C,I.replace("${perlin}",O)),this.uniforms.dimensions=new Float32Array(2),"number"==typeof i&&(i={angle:i},void 0!==arguments[1]&&(i.gain=arguments[1]),void 0!==arguments[2]&&(i.lacunarity=arguments[2]),void 0!==arguments[3]&&(i.time=arguments[3])),i=Object.assign({angle:30,gain:.5,lacunarity:2.5,time:0,parallel:!0,center:[0,0]},i),this._angleLight=new e.Point,this.angle=i.angle,this.gain=i.gain,this.lacunarity=i.lacunarity,this.parallel=i.parallel,this.center=i.center,this.time=i.time}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={angle:{configurable:!0},gain:{configurable:!0},lacunarity:{configurable:!0}};return i.prototype.apply=function(t,e,i,r){var n=e.sourceFrame,o=n.width,s=n.height;this.uniforms.light=this.parallel?this._angleLight:this.center,this.uniforms.parallel=this.parallel,this.uniforms.dimensions[0]=o,this.uniforms.dimensions[1]=s,this.uniforms.aspect=s/o,this.uniforms.time=this.time,t.applyFilter(this,e,i,r)},r.angle.get=function(){return this._angle},r.angle.set=function(t){this._angle=t;var i=t*e.DEG_TO_RAD;this._angleLight.x=Math.cos(i),this._angleLight.y=Math.sin(i)},r.gain.get=function(){return this.uniforms.gain},r.gain.set=function(t){this.uniforms.gain=t},r.lacunarity.get=function(){return this.uniforms.lacunarity},r.lacunarity.set=function(t){this.uniforms.lacunarity=t},Object.defineProperties(i.prototype,r),i}(e.Filter),R=function(t){function i(i,r,n){void 0===i&&(i=[0,0]),void 0===r&&(r=5),void 0===n&&(n=0),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uVelocity;\nuniform int uKernelSize;\nuniform float uOffset;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\n// Notice:\n// the perfect way:\n//    int kernelSize = min(uKernelSize, MAX_KERNELSIZE);\n// BUT in real use-case , uKernelSize < MAX_KERNELSIZE almost always.\n// So use uKernelSize directly.\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    vec2 velocity = uVelocity / filterArea.xy;\n    float offset = -uOffset / length(uVelocity) - 0.5;\n    int k = uKernelSize - 1;\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n        vec2 bias = velocity * (float(i) / float(k) + offset);\n        color += texture2D(uSampler, vTextureCoord + bias);\n    }\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this.uniforms.uVelocity=new Float32Array(2),this._velocity=new e.ObservablePoint(this.velocityChanged,this),this.velocity=i,this.kernelSize=r,this.offset=n}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={velocity:{configurable:!0},offset:{configurable:!0}};return i.prototype.apply=function(t,e,i,r){var n=this.velocity,o=n.x,s=n.y;this.uniforms.uKernelSize=0!==o||0!==s?this.kernelSize:0,t.applyFilter(this,e,i,r)},r.velocity.set=function(t){Array.isArray(t)?this._velocity.set(t[0],t[1]):(t instanceof e.Point||t instanceof e.ObservablePoint)&&this._velocity.copy(t)},r.velocity.get=function(){return this._velocity},i.prototype.velocityChanged=function(){this.uniforms.uVelocity[0]=this._velocity.x,this.uniforms.uVelocity[1]=this._velocity.y},r.offset.set=function(t){this.uniforms.uOffset=t},r.offset.get=function(){return this.uniforms.uOffset},Object.defineProperties(i.prototype,r),i}(e.Filter),D=function(t){function i(e,i,r){void 0===i&&(i=.05),void 0===r&&(r=null),r=r||e.length,t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform float epsilon;\n\nconst int MAX_COLORS = %maxColors%;\n\nuniform vec3 originalColors[MAX_COLORS];\nuniform vec3 targetColors[MAX_COLORS];\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n\n    float alpha = gl_FragColor.a;\n    if (alpha < 0.0001)\n    {\n      return;\n    }\n\n    vec3 color = gl_FragColor.rgb / alpha;\n\n    for(int i = 0; i < MAX_COLORS; i++)\n    {\n      vec3 origColor = originalColors[i];\n      if (origColor.r < 0.0)\n      {\n        break;\n      }\n      vec3 colorDiff = origColor - color;\n      if (length(colorDiff) < epsilon)\n      {\n        vec3 targetColor = targetColors[i];\n        gl_FragColor = vec4((targetColor + colorDiff) * alpha, alpha);\n        return;\n      }\n    }\n}\n".replace(/%maxColors%/g,r)),this.epsilon=i,this._maxColors=r,this._replacements=null,this.uniforms.originalColors=new Float32Array(3*r),this.uniforms.targetColors=new Float32Array(3*r),this.replacements=e}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={replacements:{configurable:!0},maxColors:{configurable:!0},epsilon:{configurable:!0}};return r.replacements.set=function(t){var i=this.uniforms.originalColors,r=this.uniforms.targetColors,n=t.length;if(n>this._maxColors)throw"Length of replacements ("+n+") exceeds the maximum colors length ("+this._maxColors+")";i[3*n]=-1;for(var o=0;o<n;o++){var s=t[o],a=s[0];"number"==typeof a?a=e.utils.hex2rgb(a):s[0]=e.utils.rgb2hex(a),i[3*o]=a[0],i[3*o+1]=a[1],i[3*o+2]=a[2];var l=s[1];"number"==typeof l?l=e.utils.hex2rgb(l):s[1]=e.utils.rgb2hex(l),r[3*o]=l[0],r[3*o+1]=l[1],r[3*o+2]=l[2]}this._replacements=t},r.replacements.get=function(){return this._replacements},i.prototype.refresh=function(){this.replacements=this._replacements},r.maxColors.get=function(){return this._maxColors},r.epsilon.set=function(t){this.uniforms.epsilon=t},r.epsilon.get=function(){return this.uniforms.epsilon},Object.defineProperties(i.prototype,r),i}(e.Filter),k=function(t){function e(e,i){void 0===i&&(i=0),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\n\nuniform float sepia;\nuniform float noise;\nuniform float noiseSize;\nuniform float scratch;\nuniform float scratchDensity;\nuniform float scratchWidth;\nuniform float vignetting;\nuniform float vignettingAlpha;\nuniform float vignettingBlur;\nuniform float seed;\n\nconst float SQRT_2 = 1.414213;\nconst vec3 SEPIA_RGB = vec3(112.0 / 255.0, 66.0 / 255.0, 20.0 / 255.0);\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvec3 Overlay(vec3 src, vec3 dst)\n{\n    // if (dst <= 0.5) then: 2 * src * dst\n    // if (dst > 0.5) then: 1 - 2 * (1 - dst) * (1 - src)\n    return vec3((dst.x <= 0.5) ? (2.0 * src.x * dst.x) : (1.0 - 2.0 * (1.0 - dst.x) * (1.0 - src.x)),\n                (dst.y <= 0.5) ? (2.0 * src.y * dst.y) : (1.0 - 2.0 * (1.0 - dst.y) * (1.0 - src.y)),\n                (dst.z <= 0.5) ? (2.0 * src.z * dst.z) : (1.0 - 2.0 * (1.0 - dst.z) * (1.0 - src.z)));\n}\n\n\nvoid main()\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord);\n    vec3 color = gl_FragColor.rgb;\n\n    if (sepia > 0.0)\n    {\n        float gray = (color.x + color.y + color.z) / 3.0;\n        vec3 grayscale = vec3(gray);\n\n        color = Overlay(SEPIA_RGB, grayscale);\n\n        color = grayscale + sepia * (color - grayscale);\n    }\n\n    vec2 coord = vTextureCoord * filterArea.xy / dimensions.xy;\n\n    if (vignetting > 0.0)\n    {\n        float outter = SQRT_2 - vignetting * SQRT_2;\n        vec2 dir = vec2(vec2(0.5, 0.5) - coord);\n        dir.y *= dimensions.y / dimensions.x;\n        float darker = clamp((outter - length(dir) * SQRT_2) / ( 0.00001 + vignettingBlur * SQRT_2), 0.0, 1.0);\n        color.rgb *= darker + (1.0 - darker) * (1.0 - vignettingAlpha);\n    }\n\n    if (scratchDensity > seed && scratch != 0.0)\n    {\n        float phase = seed * 256.0;\n        float s = mod(floor(phase), 2.0);\n        float dist = 1.0 / scratchDensity;\n        float d = distance(coord, vec2(seed * dist, abs(s - seed * dist)));\n        if (d < seed * 0.6 + 0.4)\n        {\n            highp float period = scratchDensity * 10.0;\n\n            float xx = coord.x * period + phase;\n            float aa = abs(mod(xx, 0.5) * 4.0);\n            float bb = mod(floor(xx / 0.5), 2.0);\n            float yy = (1.0 - bb) * aa + bb * (2.0 - aa);\n\n            float kk = 2.0 * period;\n            float dw = scratchWidth / dimensions.x * (0.75 + seed);\n            float dh = dw * kk;\n\n            float tine = (yy - (2.0 - dh));\n\n            if (tine > 0.0) {\n                float _sign = sign(scratch);\n\n                tine = s * tine / period + scratch + 0.1;\n                tine = clamp(tine + 1.0, 0.5 + _sign * 0.5, 1.5 + _sign * 0.5);\n\n                color.rgb *= tine;\n            }\n        }\n    }\n\n    if (noise > 0.0 && noiseSize > 0.0)\n    {\n        vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n        pixelCoord.x = floor(pixelCoord.x / noiseSize);\n        pixelCoord.y = floor(pixelCoord.y / noiseSize);\n        // vec2 d = pixelCoord * noiseSize * vec2(1024.0 + seed * 512.0, 1024.0 - seed * 512.0);\n        // float _noise = snoise(d) * 0.5;\n        float _noise = rand(pixelCoord * noiseSize * seed) - 0.5;\n        color += _noise * noise;\n    }\n\n    gl_FragColor.rgb = color;\n}\n"),this.uniforms.dimensions=new Float32Array(2),"number"==typeof e?(this.seed=e,e=null):this.seed=i,Object.assign(this,{sepia:.3,noise:.3,noiseSize:1,scratch:.5,scratchDensity:.3,scratchWidth:1,vignetting:.3,vignettingAlpha:1,vignettingBlur:.3},e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={sepia:{configurable:!0},noise:{configurable:!0},noiseSize:{configurable:!0},scratch:{configurable:!0},scratchDensity:{configurable:!0},scratchWidth:{configurable:!0},vignetting:{configurable:!0},vignettingAlpha:{configurable:!0},vignettingBlur:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){this.uniforms.dimensions[0]=e.sourceFrame.width,this.uniforms.dimensions[1]=e.sourceFrame.height,this.uniforms.seed=this.seed,t.applyFilter(this,e,i,r)},i.sepia.set=function(t){this.uniforms.sepia=t},i.sepia.get=function(){return this.uniforms.sepia},i.noise.set=function(t){this.uniforms.noise=t},i.noise.get=function(){return this.uniforms.noise},i.noiseSize.set=function(t){this.uniforms.noiseSize=t},i.noiseSize.get=function(){return this.uniforms.noiseSize},i.scratch.set=function(t){this.uniforms.scratch=t},i.scratch.get=function(){return this.uniforms.scratch},i.scratchDensity.set=function(t){this.uniforms.scratchDensity=t},i.scratchDensity.get=function(){return this.uniforms.scratchDensity},i.scratchWidth.set=function(t){this.uniforms.scratchWidth=t},i.scratchWidth.get=function(){return this.uniforms.scratchWidth},i.vignetting.set=function(t){this.uniforms.vignetting=t},i.vignetting.get=function(){return this.uniforms.vignetting},i.vignettingAlpha.set=function(t){this.uniforms.vignettingAlpha=t},i.vignettingAlpha.get=function(){return this.uniforms.vignettingAlpha},i.vignettingBlur.set=function(t){this.uniforms.vignettingBlur=t},i.vignettingBlur.get=function(){return this.uniforms.vignettingBlur},Object.defineProperties(e.prototype,i),e}(e.Filter),L=function(t){function i(e,r,n){void 0===e&&(e=1),void 0===r&&(r=0),void 0===n&&(n=.1);var o=Math.max(n*i.MAX_SAMPLES,i.MIN_SAMPLES),s=(2*Math.PI/o).toFixed(7);t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec2 thickness;\nuniform vec4 outlineColor;\nuniform vec4 filterClamp;\n\nconst float DOUBLE_PI = 3.14159265358979323846264 * 2.;\n\nvoid main(void) {\n    vec4 ownColor = texture2D(uSampler, vTextureCoord);\n    vec4 curColor;\n    float maxAlpha = 0.;\n    vec2 displaced;\n    for (float angle = 0.; angle <= DOUBLE_PI; angle += ${angleStep}) {\n        displaced.x = vTextureCoord.x + thickness.x * cos(angle);\n        displaced.y = vTextureCoord.y + thickness.y * sin(angle);\n        curColor = texture2D(uSampler, clamp(displaced, filterClamp.xy, filterClamp.zw));\n        maxAlpha = max(maxAlpha, curColor.a);\n    }\n    float resultAlpha = max(maxAlpha, ownColor.a);\n    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);\n}\n".replace(/\$\{angleStep\}/,s)),this.uniforms.thickness=new Float32Array([0,0]),this.thickness=e,this.uniforms.outlineColor=new Float32Array([0,0,0,1]),this.color=r,this.quality=n}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={color:{configurable:!0}};return i.prototype.apply=function(t,e,i,r){this.uniforms.thickness[0]=this.thickness/e.size.width,this.uniforms.thickness[1]=this.thickness/e.size.height,t.applyFilter(this,e,i,r)},r.color.get=function(){return e.utils.rgb2hex(this.uniforms.outlineColor)},r.color.set=function(t){e.utils.hex2rgb(t,this.uniforms.outlineColor)},Object.defineProperties(i.prototype,r),i}(e.Filter);L.MIN_SAMPLES=1,L.MAX_SAMPLES=100;var N=function(t){function e(e){void 0===e&&(e=10),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform vec2 size;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 pixelate(vec2 coord, vec2 size)\n{\n\treturn floor( coord / size ) * size;\n}\n\nvoid main(void)\n{\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = pixelate(coord, size);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord);\n}\n"),this.size=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={size:{configurable:!0}};return i.size.get=function(){return this.uniforms.size},i.size.set=function(t){"number"==typeof t&&(t=[t,t]),this.uniforms.size=t},Object.defineProperties(e.prototype,i),e}(e.Filter),F=function(t){function e(e,i,r,n){void 0===e&&(e=0),void 0===i&&(i=[0,0]),void 0===r&&(r=5),void 0===n&&(n=-1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform float uRadian;\nuniform vec2 uCenter;\nuniform float uRadius;\nuniform int uKernelSize;\n\nconst int MAX_KERNEL_SIZE = 2048;\n\nvoid main(void)\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n\n    if (uKernelSize == 0)\n    {\n        gl_FragColor = color;\n        return;\n    }\n\n    float aspect = filterArea.y / filterArea.x;\n    vec2 center = uCenter.xy / filterArea.xy;\n    float gradient = uRadius / filterArea.x * 0.3;\n    float radius = uRadius / filterArea.x - gradient * 0.5;\n    int k = uKernelSize - 1;\n\n    vec2 coord = vTextureCoord;\n    vec2 dir = vec2(center - coord);\n    float dist = length(vec2(dir.x, dir.y * aspect));\n\n    float radianStep = uRadian;\n    if (radius >= 0.0 && dist > radius) {\n        float delta = dist - radius;\n        float gap = gradient;\n        float scale = 1.0 - abs(delta / gap);\n        if (scale <= 0.0) {\n            gl_FragColor = color;\n            return;\n        }\n        radianStep *= scale;\n    }\n    radianStep /= float(k);\n\n    float s = sin(radianStep);\n    float c = cos(radianStep);\n    mat2 rotationMatrix = mat2(vec2(c, -s), vec2(s, c));\n\n    for(int i = 0; i < MAX_KERNEL_SIZE - 1; i++) {\n        if (i == k) {\n            break;\n        }\n\n        coord -= center;\n        coord.y *= aspect;\n        coord = rotationMatrix * coord;\n        coord.y /= aspect;\n        coord += center;\n\n        vec4 sample = texture2D(uSampler, coord);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample;\n    }\n\n    gl_FragColor = color / float(uKernelSize);\n}\n"),this._angle=0,this.angle=e,this.center=i,this.kernelSize=r,this.radius=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={angle:{configurable:!0},center:{configurable:!0},radius:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){this.uniforms.uKernelSize=0!==this._angle?this.kernelSize:0,t.applyFilter(this,e,i,r)},i.angle.set=function(t){this._angle=t,this.uniforms.uRadian=t*Math.PI/180},i.angle.get=function(){return this._angle},i.center.get=function(){return this.uniforms.uCenter},i.center.set=function(t){this.uniforms.uCenter=t},i.radius.get=function(){return this.uniforms.uRadius},i.radius.set=function(t){(t<0||t===1/0)&&(t=-1),this.uniforms.uRadius=t},Object.defineProperties(e.prototype,i),e}(e.Filter),B=function(t){function e(e){t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\n\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\nuniform vec2 dimensions;\n\nuniform bool mirror;\nuniform float boundary;\nuniform vec2 amplitude;\nuniform vec2 waveLength;\nuniform vec2 alpha;\nuniform float time;\n\nfloat rand(vec2 co) {\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main(void)\n{\n    vec2 pixelCoord = vTextureCoord.xy * filterArea.xy;\n    vec2 coord = pixelCoord / dimensions;\n\n    if (coord.y < boundary) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    float k = (coord.y - boundary) / (1. - boundary + 0.0001);\n    float areaY = boundary * dimensions.y / filterArea.y;\n    float v = areaY + areaY - vTextureCoord.y;\n    float y = mirror ? v : vTextureCoord.y;\n\n    float _amplitude = ((amplitude.y - amplitude.x) * k + amplitude.x ) / filterArea.x;\n    float _waveLength = ((waveLength.y - waveLength.x) * k + waveLength.x) / filterArea.y;\n    float _alpha = (alpha.y - alpha.x) * k + alpha.x;\n\n    float x = vTextureCoord.x + cos(v * 6.28 / _waveLength - time) * _amplitude;\n    x = clamp(x, filterClamp.x, filterClamp.z);\n\n    vec4 color = texture2D(uSampler, vec2(x, y));\n\n    gl_FragColor = color * _alpha;\n}\n"),this.uniforms.amplitude=new Float32Array(2),this.uniforms.waveLength=new Float32Array(2),this.uniforms.alpha=new Float32Array(2),this.uniforms.dimensions=new Float32Array(2),Object.assign(this,{mirror:!0,boundary:.5,amplitude:[0,20],waveLength:[30,100],alpha:[1,1],time:0},e)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={mirror:{configurable:!0},boundary:{configurable:!0},amplitude:{configurable:!0},waveLength:{configurable:!0},alpha:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){this.uniforms.dimensions[0]=e.sourceFrame.width,this.uniforms.dimensions[1]=e.sourceFrame.height,this.uniforms.time=this.time,t.applyFilter(this,e,i,r)},i.mirror.set=function(t){this.uniforms.mirror=t},i.mirror.get=function(){return this.uniforms.mirror},i.boundary.set=function(t){this.uniforms.boundary=t},i.boundary.get=function(){return this.uniforms.boundary},i.amplitude.set=function(t){this.uniforms.amplitude[0]=t[0],this.uniforms.amplitude[1]=t[1]},i.amplitude.get=function(){return this.uniforms.amplitude},i.waveLength.set=function(t){this.uniforms.waveLength[0]=t[0],this.uniforms.waveLength[1]=t[1]},i.waveLength.get=function(){return this.uniforms.waveLength},i.alpha.set=function(t){this.uniforms.alpha[0]=t[0],this.uniforms.alpha[1]=t[1]},i.alpha.get=function(){return this.uniforms.alpha},Object.defineProperties(e.prototype,i),e}(e.Filter),j=function(t){function e(e,i,r){void 0===e&&(e=[-10,0]),void 0===i&&(i=[0,10]),void 0===r&&(r=[0,0]),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision mediump float;\n\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec2 red;\nuniform vec2 green;\nuniform vec2 blue;\n\nvoid main(void)\n{\n   gl_FragColor.r = texture2D(uSampler, vTextureCoord + red/filterArea.xy).r;\n   gl_FragColor.g = texture2D(uSampler, vTextureCoord + green/filterArea.xy).g;\n   gl_FragColor.b = texture2D(uSampler, vTextureCoord + blue/filterArea.xy).b;\n   gl_FragColor.a = texture2D(uSampler, vTextureCoord).a;\n}\n"),this.red=e,this.green=i,this.blue=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={red:{configurable:!0},green:{configurable:!0},blue:{configurable:!0}};return i.red.get=function(){return this.uniforms.red},i.red.set=function(t){this.uniforms.red=t},i.green.get=function(){return this.uniforms.green},i.green.set=function(t){this.uniforms.green=t},i.blue.get=function(){return this.uniforms.blue},i.blue.set=function(t){this.uniforms.blue=t},Object.defineProperties(e.prototype,i),e}(e.Filter),U=function(t){function e(e,i,r){void 0===e&&(e=[0,0]),void 0===i&&(i={}),void 0===r&&(r=0),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\nuniform vec4 filterClamp;\n\nuniform vec2 center;\n\nuniform float amplitude;\nuniform float wavelength;\n// uniform float power;\nuniform float brightness;\nuniform float speed;\nuniform float radius;\n\nuniform float time;\n\nconst float PI = 3.14159;\n\nvoid main()\n{\n    float halfWavelength = wavelength * 0.5 / filterArea.x;\n    float maxRadius = radius / filterArea.x;\n    float currentRadius = time * speed / filterArea.x;\n\n    float fade = 1.0;\n\n    if (maxRadius > 0.0) {\n        if (currentRadius > maxRadius) {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n        fade = 1.0 - pow(currentRadius / maxRadius, 2.0);\n    }\n\n    vec2 dir = vec2(vTextureCoord - center / filterArea.xy);\n    dir.y *= filterArea.y / filterArea.x;\n    float dist = length(dir);\n\n    if (dist <= 0.0 || dist < currentRadius - halfWavelength || dist > currentRadius + halfWavelength) {\n        gl_FragColor = texture2D(uSampler, vTextureCoord);\n        return;\n    }\n\n    vec2 diffUV = normalize(dir);\n\n    float diff = (dist - currentRadius) / halfWavelength;\n\n    float p = 1.0 - pow(abs(diff), 2.0);\n\n    // float powDiff = diff * pow(p, 2.0) * ( amplitude * fade );\n    float powDiff = 1.25 * sin(diff * PI) * p * ( amplitude * fade );\n\n    vec2 offset = diffUV * powDiff / filterArea.xy;\n\n    // Do clamp :\n    vec2 coord = vTextureCoord + offset;\n    vec2 clampedCoord = clamp(coord, filterClamp.xy, filterClamp.zw);\n    vec4 color = texture2D(uSampler, clampedCoord);\n    if (coord != clampedCoord) {\n        color *= max(0.0, 1.0 - length(coord - clampedCoord));\n    }\n\n    // No clamp :\n    // gl_FragColor = texture2D(uSampler, vTextureCoord + offset);\n\n    color.rgb *= 1.0 + (brightness - 1.0) * p * fade;\n\n    gl_FragColor = color;\n}\n"),this.center=e,Array.isArray(i)&&(i={}),i=Object.assign({amplitude:30,wavelength:160,brightness:1,speed:500,radius:-1},i),this.amplitude=i.amplitude,this.wavelength=i.wavelength,this.brightness=i.brightness,this.speed=i.speed,this.radius=i.radius,this.time=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={center:{configurable:!0},amplitude:{configurable:!0},wavelength:{configurable:!0},brightness:{configurable:!0},speed:{configurable:!0},radius:{configurable:!0}};return e.prototype.apply=function(t,e,i,r){this.uniforms.time=this.time,t.applyFilter(this,e,i,r)},i.center.get=function(){return this.uniforms.center},i.center.set=function(t){this.uniforms.center=t},i.amplitude.get=function(){return this.uniforms.amplitude},i.amplitude.set=function(t){this.uniforms.amplitude=t},i.wavelength.get=function(){return this.uniforms.wavelength},i.wavelength.set=function(t){this.uniforms.wavelength=t},i.brightness.get=function(){return this.uniforms.brightness},i.brightness.set=function(t){this.uniforms.brightness=t},i.speed.get=function(){return this.uniforms.speed},i.speed.set=function(t){this.uniforms.speed=t},i.radius.get=function(){return this.uniforms.radius},i.radius.set=function(t){this.uniforms.radius=t},Object.defineProperties(e.prototype,i),e}(e.Filter),X=function(t){function i(e,i,r){void 0===i&&(i=0),void 0===r&&(r=1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform sampler2D uLightmap;\nuniform vec4 filterArea;\nuniform vec2 dimensions;\nuniform vec4 ambientColor;\nvoid main() {\n    vec4 diffuseColor = texture2D(uSampler, vTextureCoord);\n    vec2 lightCoord = (vTextureCoord * filterArea.xy) / dimensions;\n    vec4 light = texture2D(uLightmap, lightCoord);\n    vec3 ambient = ambientColor.rgb * ambientColor.a;\n    vec3 intensity = ambient + light.rgb;\n    vec3 finalColor = diffuseColor.rgb * intensity;\n    gl_FragColor = vec4(finalColor, diffuseColor.a);\n}\n"),this.uniforms.dimensions=new Float32Array(2),this.uniforms.ambientColor=new Float32Array([0,0,0,r]),this.texture=e,this.color=i}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={texture:{configurable:!0},color:{configurable:!0},alpha:{configurable:!0}};return i.prototype.apply=function(t,e,i,r){this.uniforms.dimensions[0]=e.sourceFrame.width,this.uniforms.dimensions[1]=e.sourceFrame.height,t.applyFilter(this,e,i,r)},r.texture.get=function(){return this.uniforms.uLightmap},r.texture.set=function(t){this.uniforms.uLightmap=t},r.color.set=function(t){var i=this.uniforms.ambientColor;"number"==typeof t?(e.utils.hex2rgb(t,i),this._color=t):(i[0]=t[0],i[1]=t[1],i[2]=t[2],i[3]=t[3],this._color=e.utils.rgb2hex(i))},r.color.get=function(){return this._color},r.alpha.get=function(){return this.uniforms.ambientColor[3]},r.alpha.set=function(t){this.uniforms.ambientColor[3]=t},Object.defineProperties(i.prototype,r),i}(e.Filter),G=function(t){function i(i,r,n,o){void 0===i&&(i=100),void 0===r&&(r=600),void 0===n&&(n=null),void 0===o&&(o=null),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float blur;\nuniform float gradientBlur;\nuniform vec2 start;\nuniform vec2 end;\nuniform vec2 delta;\nuniform vec2 texSize;\n\nfloat random(vec3 scale, float seed)\n{\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main(void)\n{\n    vec4 color = vec4(0.0);\n    float total = 0.0;\n\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n    vec2 normal = normalize(vec2(start.y - end.y, end.x - start.x));\n    float radius = smoothstep(0.0, 1.0, abs(dot(vTextureCoord * texSize - start, normal)) / gradientBlur) * blur;\n\n    for (float t = -30.0; t <= 30.0; t++)\n    {\n        float percent = (t + offset - 0.5) / 30.0;\n        float weight = 1.0 - abs(percent);\n        vec4 sample = texture2D(uSampler, vTextureCoord + delta / texSize * percent * radius);\n        sample.rgb *= sample.a;\n        color += sample * weight;\n        total += weight;\n    }\n\n    color /= total;\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.uniforms.blur=i,this.uniforms.gradientBlur=r,this.uniforms.start=n||new e.Point(0,window.innerHeight/2),this.uniforms.end=o||new e.Point(600,window.innerHeight/2),this.uniforms.delta=new e.Point(30,30),this.uniforms.texSize=new e.Point(window.innerWidth,window.innerHeight),this.updateDelta()}t&&(i.__proto__=t),i.prototype=Object.create(t&&t.prototype),i.prototype.constructor=i;var r={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return i.prototype.updateDelta=function(){this.uniforms.delta.x=0,this.uniforms.delta.y=0},r.blur.get=function(){return this.uniforms.blur},r.blur.set=function(t){this.uniforms.blur=t},r.gradientBlur.get=function(){return this.uniforms.gradientBlur},r.gradientBlur.set=function(t){this.uniforms.gradientBlur=t},r.start.get=function(){return this.uniforms.start},r.start.set=function(t){this.uniforms.start=t,this.updateDelta()},r.end.get=function(){return this.uniforms.end},r.end.set=function(t){this.uniforms.end=t,this.updateDelta()},Object.defineProperties(i.prototype,r),i}(e.Filter),W=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.x=t/i,this.uniforms.delta.y=e/i},e}(G),V=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.updateDelta=function(){var t=this.uniforms.end.x-this.uniforms.start.x,e=this.uniforms.end.y-this.uniforms.start.y,i=Math.sqrt(t*t+e*e);this.uniforms.delta.x=-e/i,this.uniforms.delta.y=t/i},e}(G),z=function(t){function e(e,i,r,n){void 0===e&&(e=100),void 0===i&&(i=600),void 0===r&&(r=null),void 0===n&&(n=null),t.call(this),this.tiltShiftXFilter=new W(e,i,r,n),this.tiltShiftYFilter=new V(e,i,r,n)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={blur:{configurable:!0},gradientBlur:{configurable:!0},start:{configurable:!0},end:{configurable:!0}};return e.prototype.apply=function(t,e,i){var r=t.getRenderTarget(!0);this.tiltShiftXFilter.apply(t,e,r),this.tiltShiftYFilter.apply(t,r,i),t.returnRenderTarget(r)},i.blur.get=function(){return this.tiltShiftXFilter.blur},i.blur.set=function(t){this.tiltShiftXFilter.blur=this.tiltShiftYFilter.blur=t},i.gradientBlur.get=function(){return this.tiltShiftXFilter.gradientBlur},i.gradientBlur.set=function(t){this.tiltShiftXFilter.gradientBlur=this.tiltShiftYFilter.gradientBlur=t},i.start.get=function(){return this.tiltShiftXFilter.start},i.start.set=function(t){this.tiltShiftXFilter.start=this.tiltShiftYFilter.start=t},i.end.get=function(){return this.tiltShiftXFilter.end},i.end.set=function(t){this.tiltShiftXFilter.end=this.tiltShiftYFilter.end=t},Object.defineProperties(e.prototype,i),e}(e.Filter),H=function(t){function e(e,i,r){void 0===e&&(e=200),void 0===i&&(i=4),void 0===r&&(r=20),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float radius;\nuniform float angle;\nuniform vec2 offset;\nuniform vec4 filterArea;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvec2 twist(vec2 coord)\n{\n    coord -= offset;\n\n    float dist = length(coord);\n\n    if (dist < radius)\n    {\n        float ratioDist = (radius - dist) / radius;\n        float angleMod = ratioDist * ratioDist * angle;\n        float s = sin(angleMod);\n        float c = cos(angleMod);\n        coord = vec2(coord.x * c - coord.y * s, coord.x * s + coord.y * c);\n    }\n\n    coord += offset;\n\n    return coord;\n}\n\nvoid main(void)\n{\n\n    vec2 coord = mapCoord(vTextureCoord);\n\n    coord = twist(coord);\n\n    coord = unmapCoord(coord);\n\n    gl_FragColor = texture2D(uSampler, coord );\n\n}\n"),this.radius=e,this.angle=i,this.padding=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={offset:{configurable:!0},radius:{configurable:!0},angle:{configurable:!0}};return i.offset.get=function(){return this.uniforms.offset},i.offset.set=function(t){this.uniforms.offset=t},i.radius.get=function(){return this.uniforms.radius},i.radius.set=function(t){this.uniforms.radius=t},i.angle.get=function(){return this.uniforms.angle},i.angle.set=function(t){this.uniforms.angle=t},Object.defineProperties(e.prototype,i),e}(e.Filter),Y=function(t){function e(e,i,r,n){void 0===e&&(e=.1),void 0===i&&(i=[0,0]),void 0===r&&(r=0),void 0===n&&(n=-1),t.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\nuniform vec2 uCenter;\nuniform float uStrength;\nuniform float uInnerRadius;\nuniform float uRadius;\n\nconst float MAX_KERNEL_SIZE = 32.0;\n\nfloat random(vec3 scale, float seed) {\n    // use the fragment position for a different seed per-pixel\n    return fract(sin(dot(gl_FragCoord.xyz + seed, scale)) * 43758.5453 + seed);\n}\n\nvoid main() {\n\n    float minGradient = uInnerRadius * 0.3;\n    float innerRadius = (uInnerRadius + minGradient * 0.5) / filterArea.x;\n\n    float gradient = uRadius * 0.3;\n    float radius = (uRadius - gradient * 0.5) / filterArea.x;\n\n    float countLimit = MAX_KERNEL_SIZE;\n\n    vec2 dir = vec2(uCenter.xy / filterArea.xy - vTextureCoord);\n    float dist = length(vec2(dir.x, dir.y * filterArea.y / filterArea.x));\n\n    float strength = uStrength;\n\n    float delta = 0.0;\n    float gap;\n    if (dist < innerRadius) {\n        delta = innerRadius - dist;\n        gap = minGradient;\n    } else if (radius >= 0.0 && dist > radius) { // radius < 0 means it's infinity\n        delta = dist - radius;\n        gap = gradient;\n    }\n\n    if (delta > 0.0) {\n        float normalCount = gap / filterArea.x;\n        delta = (normalCount - delta) / normalCount;\n        countLimit *= delta;\n        strength *= delta;\n        if (countLimit < 1.0)\n        {\n            gl_FragColor = texture2D(uSampler, vTextureCoord);\n            return;\n        }\n    }\n\n    // randomize the lookup values to hide the fixed number of samples\n    float offset = random(vec3(12.9898, 78.233, 151.7182), 0.0);\n\n    float total = 0.0;\n    vec4 color = vec4(0.0);\n\n    dir *= strength;\n\n    for (float t = 0.0; t < MAX_KERNEL_SIZE; t++) {\n        float percent = (t + offset) / MAX_KERNEL_SIZE;\n        float weight = 4.0 * (percent - percent * percent);\n        vec2 p = vTextureCoord + dir * percent;\n        vec4 sample = texture2D(uSampler, p);\n\n        // switch to pre-multiplied alpha to correctly blur transparent images\n        // sample.rgb *= sample.a;\n\n        color += sample * weight;\n        total += weight;\n\n        if (t > countLimit){\n            break;\n        }\n    }\n\n    color /= total;\n    // switch back from pre-multiplied alpha\n    color.rgb /= color.a + 0.00001;\n\n    gl_FragColor = color;\n}\n"),this.center=i,this.strength=e,this.innerRadius=r,this.radius=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var i={center:{configurable:!0},strength:{configurable:!0},innerRadius:{configurable:!0},radius:{configurable:!0}};return i.center.get=function(){return this.uniforms.uCenter},i.center.set=function(t){this.uniforms.uCenter=t},i.strength.get=function(){return this.uniforms.uStrength},i.strength.set=function(t){this.uniforms.uStrength=t},i.innerRadius.get=function(){return this.uniforms.uInnerRadius},i.innerRadius.set=function(t){this.uniforms.uInnerRadius=t},i.radius.get=function(){return this.uniforms.uRadius},i.radius.set=function(t){(t<0||t===1/0)&&(t=-1),this.uniforms.uRadius=t},Object.defineProperties(e.prototype,i),e}(e.Filter);return t.AdjustmentFilter=r,t.AdvancedBloomFilter=a,t.AsciiFilter=l,t.BevelFilter=h,t.BloomFilter=d,t.BulgePinchFilter=g,t.ColorMapFilter=m,t.ColorReplaceFilter=v,t.ConvolutionFilter=y,t.CrossHatchFilter=_,t.CRTFilter=x,t.DotFilter=b,t.DropShadowFilter=S,t.EmbossFilter=A,t.GlitchFilter=P,t.GlowFilter=E,t.GodrayFilter=M,t.KawaseBlurFilter=n,t.MotionBlurFilter=R,t.MultiColorReplaceFilter=D,t.OldFilmFilter=k,t.OutlineFilter=L,t.PixelateFilter=N,t.RadialBlurFilter=F,t.ReflectionFilter=B,t.RGBSplitFilter=j,t.ShockwaveFilter=U,t.SimpleLightmapFilter=X,t.TiltShiftFilter=z,t.TiltShiftAxisFilter=G,t.TiltShiftXFilter=W,t.TiltShiftYFilter=V,t.TwistFilter=H,t.ZoomBlurFilter=Y,t}({},PIXI);for(var r in i)PIXI.filters[r]=i[r]},function(t,e,i){function r(t,e,i,r,n,o,s){(PIXI.Filter||PIXI.AbstractFilter).call(this,null,["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float distance;","uniform float outerStrength;","uniform float innerStrength;","uniform vec4 glowColor;","uniform float pixelWidth;","uniform float pixelHeight;","vec2 px = vec2(pixelWidth, pixelHeight);","void main(void) {","    const float PI = 3.14159265358979323846264;","    vec4 ownColor = texture2D(uSampler, vTextureCoord);","    vec4 curColor;","    float totalAlpha = 0.0;","    float maxTotalAlpha = 0.0;","    float cosAngle;","    float sinAngle;","    for (float angle = 0.0; angle <= PI * 2.0; angle += "+(1/s/i).toFixed(7)+") {","       cosAngle = cos(angle);","       sinAngle = sin(angle);","       for (float curDistance = 1.0; curDistance <= "+i.toFixed(7)+"; curDistance++) {","           curColor = texture2D(uSampler, vec2(vTextureCoord.x + cosAngle * curDistance * px.x, vTextureCoord.y + sinAngle * curDistance * px.y));","           totalAlpha += (distance - curDistance) * curColor.a;","           maxTotalAlpha += (distance - curDistance);","       }","    }","    maxTotalAlpha = max(maxTotalAlpha, 0.0001);","    ownColor.a = max(ownColor.a, 0.0001);","    ownColor.rgb = ownColor.rgb / ownColor.a;","    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);","    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;","    float resultAlpha = (ownColor.a + outerGlowAlpha);","    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);","}"].join("\n"),{distance:{type:"1f",value:i},outerStrength:{type:"1f",value:0},innerStrength:{type:"1f",value:0},glowColor:{type:"4f",value:new Float32Array([0,0,0,1])},pixelWidth:{type:"1f",value:0},pixelHeight:{type:"1f",value:0}}),s=Math.pow(s,1/3),this.quality=s,this.uniforms.distance.value*=s,t*=s,e*=s,this.color=o,this.outerStrength=r,this.innerStrength=n,this.viewWidth=t,this.viewHeight=e}!function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){var i=e[s][1][t];return n(i||t)}),h,h.exports,t,e,i,r)}return i[s].exports}for(var o=!1,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){var r=PIXI.Filter||PIXI.AbstractFilter;function n(t,e,i,n,o,s,a){r.call(this,null,["precision mediump float;","varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","uniform float distance;","uniform float outerStrength;","uniform float innerStrength;","uniform vec4 glowColor;","uniform float pixelWidth;","uniform float pixelHeight;","vec2 px = vec2(pixelWidth, pixelHeight);","void main(void) {","    const float PI = 3.14159265358979323846264;","    vec4 ownColor = texture2D(uSampler, vTextureCoord);","    vec4 curColor;","    float totalAlpha = 0.0;","    float maxTotalAlpha = 0.0;","    float cosAngle;","    float sinAngle;","    for (float angle = 0.0; angle <= PI * 2.0; angle += "+(1/a/i).toFixed(7)+") {","       cosAngle = cos(angle);","       sinAngle = sin(angle);","       for (float curDistance = 1.0; curDistance <= "+i.toFixed(7)+"; curDistance++) {","           curColor = texture2D(uSampler, vec2(vTextureCoord.x + cosAngle * curDistance * px.x, vTextureCoord.y + sinAngle * curDistance * px.y));","           totalAlpha += (distance - curDistance) * curColor.a;","           maxTotalAlpha += (distance - curDistance);","       }","    }","    maxTotalAlpha = max(maxTotalAlpha, 0.0001);","    ownColor.a = max(ownColor.a, 0.0001);","    ownColor.rgb = ownColor.rgb / ownColor.a;","    float outerGlowAlpha = (totalAlpha / maxTotalAlpha)  * outerStrength * (1. - ownColor.a);","    float innerGlowAlpha = ((maxTotalAlpha - totalAlpha) / maxTotalAlpha) * innerStrength * ownColor.a;","    float resultAlpha = (ownColor.a + outerGlowAlpha);","    gl_FragColor = vec4(mix(mix(ownColor.rgb, glowColor.rgb, innerGlowAlpha / ownColor.a), glowColor.rgb, outerGlowAlpha / resultAlpha) * resultAlpha, resultAlpha);","}"].join("\n"),{distance:{type:"1f",value:i},outerStrength:{type:"1f",value:0},innerStrength:{type:"1f",value:0},glowColor:{type:"4f",value:new Float32Array([0,0,0,1])},pixelWidth:{type:"1f",value:0},pixelHeight:{type:"1f",value:0}}),a=Math.pow(a,1/3),this.quality=a,this.uniforms.distance.value*=a,t*=a,e*=a,this.color=s,this.outerStrength=n,this.innerStrength=o,this.viewWidth=t,this.viewHeight=e}n.prototype=Object.create(r.prototype),n.prototype.constructor=n,e.exports=n,Object.defineProperties(n.prototype,{color:{get:function(){return PIXI.utils.rgb2hex(this.uniforms.glowColor.value)},set:function(t){PIXI.utils.hex2rgb(t,this.uniforms.glowColor.value)}},outerStrength:{get:function(){return this.uniforms.outerStrength.value},set:function(t){this.uniforms.outerStrength.value=t}},innerStrength:{get:function(){return this.uniforms.innerStrength.value},set:function(t){this.uniforms.innerStrength.value=t}},viewWidth:{get:function(){return 1/this.uniforms.pixelWidth.value},set:function(t){this.uniforms.pixelWidth.value=1/t}},viewHeight:{get:function(){return 1/this.uniforms.pixelHeight.value},set:function(t){this.uniforms.pixelHeight.value=1/t}}})},{}],2:[function(t,e,i){function r(t,e,i,r){(PIXI.Filter||PIXI.AbstractFilter).call(this,null,["precision mediump float;","varying vec2 vTextureCoord;","uniform sampler2D uSampler;","uniform float thickness;","uniform vec4 outlineColor;","uniform float pixelWidth;","uniform float pixelHeight;","vec2 px = vec2(pixelWidth, pixelHeight);","void main(void) {","    const float PI = 3.14159265358979323846264;","    vec4 ownColor = texture2D(uSampler, vTextureCoord);","    vec4 curColor;","    float maxAlpha = 0.;","    for (float angle = 0.; angle < PI * 2.; angle += "+(1/i).toFixed(7)+") {","        curColor = texture2D(uSampler, vec2(vTextureCoord.x + thickness * px.x * cos(angle), vTextureCoord.y + thickness * px.y * sin(angle)));","        maxAlpha = max(maxAlpha, curColor.a);","    }","    float resultAlpha = max(maxAlpha, ownColor.a);","    gl_FragColor = vec4((ownColor.rgb + outlineColor.rgb * (1. - ownColor.a)) * resultAlpha, resultAlpha);","}"].join("\n"),{thickness:{type:"1f",value:i},outlineColor:{type:"4f",value:new Float32Array([0,0,0,1])},pixelWidth:{type:"1f",value:null},pixelHeight:{type:"1f",value:null}}),this.color=r,this.viewWidth=t,this.viewHeight=e}r.prototype=Object.create((PIXI.Filter||PIXI.AbstractFilter).prototype),r.prototype.constructor=r,e.exports=r,Object.defineProperties(r.prototype,{color:{get:function(){return PIXI.utils.rgb2hex(this.uniforms.outlineColor.value)},set:function(t){PIXI.utils.hex2rgb(t,this.uniforms.outlineColor.value)}},viewWidth:{get:function(){return 1/this.uniforms.pixelWidth.value},set:function(t){this.uniforms.pixelWidth.value=1/t}},viewHeight:{get:function(){return 1/this.uniforms.pixelHeight.value},set:function(t){this.uniforms.pixelHeight.value=1/t}}})},{}],3:[function(t,e,i){for(var r in e.exports={GlowFilter:t("./filters/glow/GlowFilter"),OutlineFilter:t("./filters/outline/OutlineFilter")},e.exports)PIXI.filters[r]=e.exports[r]},{"./filters/glow/GlowFilter":1,"./filters/outline/OutlineFilter":2}]},{},[3]),r.prototype=Object.create((PIXI.Filter||PIXI.AbstractFilter).prototype),r.prototype.constructor=r,Object.defineProperties(r.prototype,{color:{get:function(){return PIXI.utils.rgb2hex(this.uniforms.glowColor.value)},set:function(t){PIXI.utils.hex2rgb(t,this.uniforms.glowColor.value)}},outerStrength:{get:function(){return this.uniforms.outerStrength.value},set:function(t){this.uniforms.outerStrength.value=t}},innerStrength:{get:function(){return this.uniforms.innerStrength.value},set:function(t){this.uniforms.innerStrength.value=t}},viewWidth:{get:function(){return 1/this.uniforms.pixelWidth.value},set:function(t){this.uniforms.pixelWidth.value=1/t}},viewHeight:{get:function(){return 1/this.uniforms.pixelHeight.value},set:function(t){this.uniforms.pixelHeight.value=1/t}}}),PIXI.filters.FakeGlowFilter=r},function(t,e){!function(t){var e=function(){function t(t,e,i,r){void 0===e&&(e=!1),this.initalize(t,e,i,r)}return t.prototype.initalize=function(t,e,i,r){return void 0===e&&(e=!1),this.mask=t,this.skipNextObservers=e,this.target=i,this.currentTarget=r,this},t}();t.EventState=e;var i=function(t,e,i){void 0===i&&(i=null),this.callback=t,this.mask=e,this.scope=i,this._willBeUnregistered=!1,this.unregisterOnNextCall=!1};t.Observer=i;var r=function(){function t(){}return t.prototype.dispose=function(){if(this._observers&&this._observables)for(var t=0;t<this._observers.length;t++)this._observables[t].remove(this._observers[t]);this._observers=null,this._observables=null},t.Watch=function(e,i,r,n){void 0===r&&(r=-1),void 0===n&&(n=null);var o=new t;o._observers=new Array,o._observables=e;for(var s=0,a=e;s<a.length;s++){var l=a[s].add(i,r,!1,n);l&&o._observers.push(l)}return o},t}();t.MultiObserver=r;var n=function(){function t(t){this._observers=new Array,this._eventState=new e(0),t&&(this._onObserverAdded=t)}return t.prototype.add=function(t,e,r,n,o){if(void 0===r&&(r=-1),void 0===n&&(n=!1),void 0===e&&(e=null),void 0===o&&(o=!1),!t)return null;var s=new i(t,r,e);return s.unregisterOnNextCall=o,n?this._observers.unshift(s):this._observers.push(s),this._onObserverAdded&&this._onObserverAdded(s),s},t.prototype.addOnce=function(t,e,i,r){return this.add(t,e,i,r,!0)},t.prototype.remove=function(t){return!!t&&(-1!==this._observers.indexOf(t)&&(this._deferUnregister(t),!0))},t.prototype.removeCallback=function(t,e){for(var i=0;i<this._observers.length;i++)if(this._observers[i].callback===t&&(!e||e===this._observers[i].scope))return this._deferUnregister(this._observers[i]),!0;return!1},t.prototype._deferUnregister=function(t){var e=this;t.unregisterOnNextCall=!1,t._willBeUnregistered=!0;var i=function(){e._remove(t)};"undefined"!=typeof window&&window.setImmediate?window.setImmediate(i):setTimeout(i,1)},t.prototype._remove=function(t){if(!t)return!1;var e=this._observers.indexOf(t);return-1!==e&&(this._observers.splice(e,1),!0)},t.prototype.notifyObservers=function(t,e,i,r){if(void 0===e&&(e=-1),!this._observers.length)return!0;var n=this._eventState;n.mask=e,n.target=i,n.currentTarget=r,n.skipNextObservers=!1,n.lastReturnValue=t;for(var o=0,s=this._observers;o<s.length;o++){var a=s[o];if(!a._willBeUnregistered&&(a.mask&e&&(a.scope?n.lastReturnValue=a.callback.apply(a.scope,[t,n]):n.lastReturnValue=a.callback(t,n),a.unregisterOnNextCall&&this._deferUnregister(a)),n.skipNextObservers))return!1}return!0},t.prototype.notifyObserversWithPromise=function(t,e,i,r){var n=this;void 0===e&&(e=-1);var o=Promise.resolve(t);if(!this._observers.length)return o;var s=this._eventState;return s.mask=e,s.target=i,s.currentTarget=r,s.skipNextObservers=!1,this._observers.forEach((function(i){s.skipNextObservers||i._willBeUnregistered||i.mask&e&&(o=i.scope?o.then((function(e){return s.lastReturnValue=e,i.callback.apply(i.scope,[t,s])})):o.then((function(e){return s.lastReturnValue=e,i.callback(t,s)})),i.unregisterOnNextCall&&n._deferUnregister(i))})),o.then((function(){return t}))},t.prototype.notifyObserver=function(t,e,i){void 0===i&&(i=-1);var r=this._eventState;r.mask=i,r.skipNextObservers=!1,t.callback(e,r)},t.prototype.hasObservers=function(){return this._observers.length>0},t.prototype.clear=function(){this._observers=new Array,this._onObserverAdded=null},t.prototype.clone=function(){var e=new t;return e._observers=this._observers.slice(0),e},t.prototype.hasSpecificMask=function(t){void 0===t&&(t=-1);for(var e=0,i=this._observers;e<i.length;e++){var r=i[e];if(r.mask&t||r.mask===t)return!0}return!1},t}();t.Observable=n}(PIXI||(PIXI={}))},function(module,exports,__webpack_require__){var require,require,f;f=function(){var define,module,exports;return function t(e,i,r){function n(s,a){if(!i[s]){if(!e[s]){if(!a&&"function"==typeof require&&require)return require(s,!0);if(o)return o(s,!0);var l=new Error("Cannot find module '"+s+"'");throw l.code="MODULE_NOT_FOUND",l}var h=i[s]={exports:{}};e[s][0].call(h.exports,(function(t){var i=e[s][1][t];return n(i||t)}),h,h.exports,t,e,i,r)}return i[s].exports}for(var o="function"==typeof require&&require,s=0;s<r.length;s++)n(r[s]);return n}({1:[function(t,e,i){"use strict";var r=t("./ParticleUtils"),n=t("./Particle"),o=PIXI.Texture,s=function(t){n.call(this,t),this.textures=null,this.duration=0,this.framerate=0,this.elapsed=0,this.loop=!1},a=n.prototype,l=s.prototype=Object.create(a);l.init=function(){this.Particle_init(),this.elapsed=0,this.framerate<0&&(this.duration=this.maxLife,this.framerate=this.textures.length/this.duration)},l.applyArt=function(t){this.textures=t.textures,this.framerate=t.framerate,this.duration=t.duration,this.loop=t.loop},l.update=function(t){if(this.Particle_update(t)>=0){this.elapsed+=t,this.elapsed>this.duration&&(this.loop?this.elapsed=this.elapsed%this.duration:this.elapsed=this.duration-1e-6);var e=this.elapsed*this.framerate+1e-7|0;this.texture=this.textures[e]||r.EMPTY_TEXTURE}},l.Particle_destroy=n.prototype.destroy,l.destroy=function(){this.Particle_destroy(),this.textures=null},s.parseArt=function(t){var e,i,r,n,s,a,l=[];for(e=0;e<t.length;++e){for(i=t[e],t[e]=l={},l.textures=a=[],n=i.textures,r=0;r<n.length;++r)if("string"==typeof(s=n[r]))a.push(o.fromImage(s));else if(s instanceof o)a.push(s);else{var h=s.count||1;for(s="string"==typeof s.texture?o.fromImage(s.texture):s.texture;h>0;--h)a.push(s)}"matchLife"==i.framerate?(l.framerate=-1,l.duration=0,l.loop=!1):(l.loop=!!i.loop,l.framerate=i.framerate>0?i.framerate:60,l.duration=a.length/l.framerate)}return t},e.exports=s},{"./Particle":3,"./ParticleUtils":4}],2:[function(t,e,i){"use strict";var r=t("./ParticleUtils"),n=t("./Particle"),o=PIXI.particles.ParticleContainer||PIXI.ParticleContainer,s=PIXI.ticker.shared,a=function(t,e,i){this._particleConstructor=n,this.particleImages=null,this.startAlpha=1,this.endAlpha=1,this.startSpeed=0,this.endSpeed=0,this.minimumSpeedMultiplier=1,this.acceleration=null,this.maxSpeed=NaN,this.startScale=1,this.endScale=1,this.minimumScaleMultiplier=1,this.startColor=null,this.endColor=null,this.minLifetime=0,this.maxLifetime=0,this.minStartRotation=0,this.maxStartRotation=0,this.noRotation=!1,this.minRotationSpeed=0,this.maxRotationSpeed=0,this.particleBlendMode=0,this.customEase=null,this.extraData=null,this._frequency=1,this.maxParticles=1e3,this.emitterLifetime=-1,this.spawnPos=null,this.spawnType=null,this._spawnFunc=null,this.spawnRect=null,this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,this.rotation=0,this.ownerPos=null,this._prevEmitterPos=null,this._prevPosIsValid=!1,this._posChanged=!1,this._parentIsPC=!1,this._parent=null,this.addAtBack=!1,this.particleCount=0,this._emit=!1,this._spawnTimer=0,this._emitterLife=-1,this._activeParticlesFirst=null,this._activeParticlesLast=null,this._poolFirst=null,this._origConfig=null,this._origArt=null,this._autoUpdate=!1,this._destroyWhenComplete=!1,this.parent=t,e&&i&&this.init(e,i),this.recycle=this.recycle,this.update=this.update,this.rotate=this.rotate,this.updateSpawnPos=this.updateSpawnPos,this.updateOwnerPos=this.updateOwnerPos},l=a.prototype={},h=new PIXI.Point;Object.defineProperty(l,"frequency",{get:function(){return this._frequency},set:function(t){this._frequency="number"==typeof t&&t>0?t:1}}),Object.defineProperty(l,"particleConstructor",{get:function(){return this._particleConstructor},set:function(t){if(t!=this._particleConstructor){this._particleConstructor=t,this.cleanup();for(var e=this._poolFirst;e;e=e.next)e.destroy();this._poolFirst=null,this._origConfig&&this._origArt&&this.init(this._origArt,this._origConfig)}}}),Object.defineProperty(l,"parent",{get:function(){return this._parent},set:function(t){if(this._parentIsPC)for(var e=this._poolFirst;e;e=e.next)e.parent&&e.parent.removeChild(e);this.cleanup(),this._parent=t,this._parentIsPC=o&&t&&t instanceof o}}),l.init=function(t,e){if(t&&e){this.cleanup(),this._origConfig=e,this._origArt=t,t=Array.isArray(t)?t.slice():[t];var i=this._particleConstructor;this.particleImages=i.parseArt?i.parseArt(t):t,e.alpha?(this.startAlpha=e.alpha.start,this.endAlpha=e.alpha.end):this.startAlpha=this.endAlpha=1,e.speed?(this.startSpeed=e.speed.start,this.endSpeed=e.speed.end,this.minimumSpeedMultiplier=e.speed.minimumSpeedMultiplier||1):(this.minimumSpeedMultiplier=1,this.startSpeed=this.endSpeed=0);var n,o=e.acceleration;switch(o&&(o.x||o.y)?(this.endSpeed=this.startSpeed,this.acceleration=new PIXI.Point(o.x,o.y),this.maxSpeed=e.maxSpeed||NaN):this.acceleration=new PIXI.Point,e.scale?(this.startScale=e.scale.start,this.endScale=e.scale.end,this.minimumScaleMultiplier=e.scale.minimumScaleMultiplier||1):this.startScale=this.endScale=this.minimumScaleMultiplier=1,e.color&&(this.startColor=r.hexToRGB(e.color.start),e.color.start!=e.color.end?this.endColor=r.hexToRGB(e.color.end):this.endColor=null),e.startRotation?(this.minStartRotation=e.startRotation.min,this.maxStartRotation=e.startRotation.max):this.minStartRotation=this.maxStartRotation=0,e.noRotation&&(this.minStartRotation||this.maxStartRotation)?this.noRotation=!!e.noRotation:this.noRotation=!1,e.rotationSpeed?(this.minRotationSpeed=e.rotationSpeed.min,this.maxRotationSpeed=e.rotationSpeed.max):this.minRotationSpeed=this.maxRotationSpeed=0,this.minLifetime=e.lifetime.min,this.maxLifetime=e.lifetime.max,this.particleBlendMode=r.getBlendMode(e.blendMode),e.ease?this.customEase="function"==typeof e.ease?e.ease:r.generateEase(e.ease):this.customEase=null,i.parseData?this.extraData=i.parseData(e.extraData):this.extraData=e.extraData||null,this.spawnRect=this.spawnCircle=null,this.particlesPerWave=1,this.particleSpacing=0,this.angleStart=0,e.spawnType){case"rect":this.spawnType="rect",this._spawnFunc=this._spawnRect;var s=e.spawnRect;this.spawnRect=new PIXI.Rectangle(s.x,s.y,s.w,s.h);break;case"circle":this.spawnType="circle",this._spawnFunc=this._spawnCircle,n=e.spawnCircle,this.spawnCircle=new PIXI.Circle(n.x,n.y,n.r);break;case"ring":this.spawnType="ring",this._spawnFunc=this._spawnRing,n=e.spawnCircle,this.spawnCircle=new PIXI.Circle(n.x,n.y,n.r),this.spawnCircle.minRadius=n.minR;break;case"burst":this.spawnType="burst",this._spawnFunc=this._spawnBurst,this.particlesPerWave=e.particlesPerWave,this.particleSpacing=e.particleSpacing,this.angleStart=e.angleStart?e.angleStart:0;break;case"point":default:this.spawnType="point",this._spawnFunc=this._spawnPoint}this.frequency=e.frequency,this.emitterLifetime=e.emitterLifetime||-1,this.maxParticles=e.maxParticles>0?e.maxParticles:1e3,this.addAtBack=!!e.addAtBack,this.rotation=0,this.ownerPos=new PIXI.Point,this.spawnPos=new PIXI.Point(e.pos.x,e.pos.y),this._prevEmitterPos=this.spawnPos.clone(),this._prevPosIsValid=!1,this._spawnTimer=0,this.emit=void 0===e.emit||!!e.emit,this.autoUpdate=void 0!==e.autoUpdate&&!!e.autoUpdate}},l.recycle=function(t){t.next&&(t.next.prev=t.prev),t.prev&&(t.prev.next=t.next),t==this._activeParticlesLast&&(this._activeParticlesLast=t.prev),t==this._activeParticlesFirst&&(this._activeParticlesFirst=t.next),t.prev=null,t.next=this._poolFirst,this._poolFirst=t,this._parentIsPC?(t.alpha=0,t.visible=!1):t.parent&&t.parent.removeChild(t),--this.particleCount},l.rotate=function(t){if(this.rotation!=t){var e=t-this.rotation;this.rotation=t,r.rotatePoint(e,this.spawnPos),this._posChanged=!0}},l.updateSpawnPos=function(t,e){this._posChanged=!0,this.spawnPos.x=t,this.spawnPos.y=e},l.updateOwnerPos=function(t,e){this._posChanged=!0,this.ownerPos.x=t,this.ownerPos.y=e},l.resetPositionTracking=function(){this._prevPosIsValid=!1},Object.defineProperty(l,"emit",{get:function(){return this._emit},set:function(t){this._emit=!!t,this._emitterLife=this.emitterLifetime}}),Object.defineProperty(l,"autoUpdate",{get:function(){return this._autoUpdate},set:function(t){this._autoUpdate&&!t?s.remove(this.update,this):!this._autoUpdate&&t&&s.add(this.update,this),this._autoUpdate=!!t}}),l.playOnceAndDestroy=function(){this.autoUpdate=!0,this.emit=!0,this._destroyWhenComplete=!0},l.update=function(t){if(this._autoUpdate&&(t=t/PIXI.settings.TARGET_FPMS/1e3),this._parent){var e,i,r,n,o;for(i=this._activeParticlesFirst;i;i=r)r=i.next,i.update(t);this._prevPosIsValid&&(n=this._prevEmitterPos.x,o=this._prevEmitterPos.y);var s=this.ownerPos.x+this.spawnPos.x,a=this.ownerPos.y+this.spawnPos.y;if(this._emit)for(this._spawnTimer-=t;this._spawnTimer<=0;){if(this._emitterLife>0&&(this._emitterLife-=this._frequency,this._emitterLife<=0)){this._spawnTimer=0,this._emitterLife=0,this.emit=!1;break}if(this.particleCount>=this.maxParticles)this._spawnTimer+=this._frequency;else{var l;if(l=this.minLifetime==this.maxLifetime?this.minLifetime:Math.random()*(this.maxLifetime-this.minLifetime)+this.minLifetime,-this._spawnTimer<l){var h,u;if(this._prevPosIsValid&&this._posChanged){var c=1+this._spawnTimer/t;h=(s-n)*c+n,u=(a-o)*c+o}else h=s,u=a;e=0;for(var p=Math.min(this.particlesPerWave,this.maxParticles-this.particleCount);e<p;++e){var f,d;if(this._poolFirst?(f=this._poolFirst,this._poolFirst=this._poolFirst.next,f.next=null):f=new this.particleConstructor(this),this.particleImages.length>1?f.applyArt(this.particleImages.random()):f.applyArt(this.particleImages[0]),f.startAlpha=this.startAlpha,f.endAlpha=this.endAlpha,1!=this.minimumSpeedMultiplier?(d=Math.random()*(1-this.minimumSpeedMultiplier)+this.minimumSpeedMultiplier,f.startSpeed=this.startSpeed*d,f.endSpeed=this.endSpeed*d):(f.startSpeed=this.startSpeed,f.endSpeed=this.endSpeed),f.acceleration.x=this.acceleration.x,f.acceleration.y=this.acceleration.y,f.maxSpeed=this.maxSpeed,1!=this.minimumScaleMultiplier?(d=Math.random()*(1-this.minimumScaleMultiplier)+this.minimumScaleMultiplier,f.startScale=this.startScale*d,f.endScale=this.endScale*d):(f.startScale=this.startScale,f.endScale=this.endScale),f.startColor=this.startColor,f.endColor=this.endColor,this.minRotationSpeed==this.maxRotationSpeed?f.rotationSpeed=this.minRotationSpeed:f.rotationSpeed=Math.random()*(this.maxRotationSpeed-this.minRotationSpeed)+this.minRotationSpeed,f.noRotation=this.noRotation,f.maxLife=l,f.blendMode=this.particleBlendMode,f.ease=this.customEase,f.extraData=this.extraData,this._spawnFunc(f,h,u,e),f.init(),f.update(-this._spawnTimer),this._parentIsPC&&f.parent){var g=this._parent.children;if(g[0]==f)g.shift();else if(g[g.length-1]==f)g.pop();else{var m=g.indexOf(f);g.splice(m,1)}this.addAtBack?g.unshift(f):g.push(f)}else this.addAtBack?this._parent.addChildAt(f,0):this._parent.addChild(f);this._activeParticlesLast?(this._activeParticlesLast.next=f,f.prev=this._activeParticlesLast,this._activeParticlesLast=f):this._activeParticlesLast=this._activeParticlesFirst=f,++this.particleCount}}this._spawnTimer+=this._frequency}}this._posChanged&&(this._prevEmitterPos.x=s,this._prevEmitterPos.y=a,this._prevPosIsValid=!0,this._posChanged=!1),!this._destroyWhenComplete||this._emit||this._activeParticlesFirst||this.destroy()}},l._spawnPoint=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,t.position.x=e,t.position.y=i},l._spawnRect=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,h.x=Math.random()*this.spawnRect.width+this.spawnRect.x,h.y=Math.random()*this.spawnRect.height+this.spawnRect.y,0!==this.rotation&&r.rotatePoint(this.rotation,h),t.position.x=e+h.x,t.position.y=i+h.y},l._spawnCircle=function(t,e,i){this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,h.x=Math.random()*this.spawnCircle.radius,h.y=0,r.rotatePoint(360*Math.random(),h),h.x+=this.spawnCircle.x,h.y+=this.spawnCircle.y,0!==this.rotation&&r.rotatePoint(this.rotation,h),t.position.x=e+h.x,t.position.y=i+h.y},l._spawnRing=function(t,e,i){var n=this.spawnCircle;this.minStartRotation==this.maxStartRotation?t.rotation=this.minStartRotation+this.rotation:t.rotation=Math.random()*(this.maxStartRotation-this.minStartRotation)+this.minStartRotation+this.rotation,n.minRadius==n.radius?h.x=Math.random()*(n.radius-n.minRadius)+n.minRadius:h.x=n.radius,h.y=0;var o=360*Math.random();t.rotation+=o,r.rotatePoint(o,h),h.x+=this.spawnCircle.x,h.y+=this.spawnCircle.y,0!==this.rotation&&r.rotatePoint(this.rotation,h),t.position.x=e+h.x,t.position.y=i+h.y},l._spawnBurst=function(t,e,i,r){0===this.particleSpacing?t.rotation=360*Math.random():t.rotation=this.angleStart+this.particleSpacing*r+this.rotation,t.position.x=e,t.position.y=i},l.cleanup=function(){var t,e;for(t=this._activeParticlesFirst;t;t=e)e=t.next,this.recycle(t),t.parent&&t.parent.removeChild(t);this._activeParticlesFirst=this._activeParticlesLast=null,this.particleCount=0},l.destroy=function(){var t;this.autoUpdate=!1,this.cleanup();for(var e=this._poolFirst;e;e=t)t=e.next,e.destroy();this._poolFirst=this._parent=this.particleImages=this.spawnPos=this.ownerPos=this.startColor=this.endColor=this.customEase=null},e.exports=a},{"./Particle":3,"./ParticleUtils":4}],3:[function(t,e,i){var r=t("./ParticleUtils"),n=PIXI.Sprite,o=function(t){n.call(this),this.emitter=t,this.anchor.x=this.anchor.y=.5,this.velocity=new PIXI.Point,this.maxLife=0,this.age=0,this.ease=null,this.extraData=null,this.startAlpha=0,this.endAlpha=0,this.startSpeed=0,this.endSpeed=0,this.acceleration=new PIXI.Point,this.maxSpeed=NaN,this.startScale=0,this.endScale=0,this.startColor=null,this._sR=0,this._sG=0,this._sB=0,this.endColor=null,this._eR=0,this._eG=0,this._eB=0,this._doAlpha=!1,this._doScale=!1,this._doSpeed=!1,this._doAcceleration=!1,this._doColor=!1,this._doNormalMovement=!1,this._oneOverLife=0,this.next=null,this.prev=null,this.init=this.init,this.Particle_init=this.Particle_init,this.update=this.update,this.Particle_update=this.Particle_update,this.applyArt=this.applyArt,this.kill=this.kill},s=o.prototype=Object.create(n.prototype);s.init=s.Particle_init=function(){this.age=0,this.velocity.x=this.startSpeed,this.velocity.y=0,r.rotatePoint(this.rotation,this.velocity),this.noRotation?this.rotation=0:this.rotation*=r.DEG_TO_RADS,this.rotationSpeed*=r.DEG_TO_RADS,this.alpha=this.startAlpha,this.scale.x=this.scale.y=this.startScale,this.startColor&&(this._sR=this.startColor[0],this._sG=this.startColor[1],this._sB=this.startColor[2],this.endColor&&(this._eR=this.endColor[0],this._eG=this.endColor[1],this._eB=this.endColor[2])),this._doAlpha=this.startAlpha!=this.endAlpha,this._doSpeed=this.startSpeed!=this.endSpeed,this._doScale=this.startScale!=this.endScale,this._doColor=!!this.endColor,this._doAcceleration=0!==this.acceleration.x||0!==this.acceleration.y,this._doNormalMovement=this._doSpeed||0!==this.startSpeed||this._doAcceleration,this._oneOverLife=1/this.maxLife,this.tint=r.combineRGBComponents(this._sR,this._sG,this._sB),this.visible=!0},s.applyArt=function(t){this.texture=t||r.EMPTY_TEXTURE},s.update=s.Particle_update=function(t){if(this.age+=t,this.age>=this.maxLife)return this.kill(),-1;var e=this.age*this._oneOverLife;if(this.ease&&(e=4==this.ease.length?this.ease(e,0,1,1):this.ease(e)),this._doAlpha&&(this.alpha=(this.endAlpha-this.startAlpha)*e+this.startAlpha),this._doScale){var i=(this.endScale-this.startScale)*e+this.startScale;this.scale.x=this.scale.y=i}if(this._doNormalMovement){if(this._doSpeed){var n=(this.endSpeed-this.startSpeed)*e+this.startSpeed;r.normalize(this.velocity),r.scaleBy(this.velocity,n)}else if(this._doAcceleration&&(this.velocity.x+=this.acceleration.x*t,this.velocity.y+=this.acceleration.y*t,this.maxSpeed)){var o=r.length(this.velocity);o>this.maxSpeed&&r.scaleBy(this.velocity,this.maxSpeed/o)}this.position.x+=this.velocity.x*t,this.position.y+=this.velocity.y*t}if(this._doColor){var s=(this._eR-this._sR)*e+this._sR,a=(this._eG-this._sG)*e+this._sG,l=(this._eB-this._sB)*e+this._sB;this.tint=r.combineRGBComponents(s,a,l)}return 0!==this.rotationSpeed?this.rotation+=this.rotationSpeed*t:this.acceleration&&!this.noRotation&&(this.rotation=Math.atan2(this.velocity.y,this.velocity.x)),e},s.kill=function(){this.emitter.recycle(this)},s.Sprite_Destroy=n.prototype.destroy,s.destroy=function(){this.parent&&this.parent.removeChild(this),this.Sprite_Destroy&&this.Sprite_Destroy(),this.emitter=this.velocity=this.startColor=this.endColor=this.ease=this.next=this.prev=null},o.parseArt=function(t){var e;for(e=t.length;e>=0;--e)"string"==typeof t[e]&&(t[e]=PIXI.Texture.fromImage(t[e]));if(r.verbose)for(e=t.length-1;e>0;--e)if(t[e].baseTexture!=t[e-1].baseTexture){window.console;break}return t},o.parseData=function(t){return t},e.exports=o},{"./ParticleUtils":4}],4:[function(t,e,i){"use strict";var r=PIXI.BLEND_MODES||PIXI.blendModes,n=PIXI.Texture,o={verbose:!1},s=o.DEG_TO_RADS=Math.PI/180,a=o.EMPTY_TEXTURE=n.EMPTY;a.on=a.destroy=a.once=a.emit=function(){},o.rotatePoint=function(t,e){if(t){t*=s;var i=Math.sin(t),r=Math.cos(t),n=e.x*r-e.y*i,o=e.x*i+e.y*r;e.x=n,e.y=o}},o.combineRGBComponents=function(t,e,i){return t<<16|e<<8|i},o.normalize=function(t){var e=1/o.length(t);t.x*=e,t.y*=e},o.scaleBy=function(t,e){t.x*=e,t.y*=e},o.length=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},o.hexToRGB=function(t,e){var i;return e?e.length=0:e=[],"#"==t.charAt(0)?t=t.substr(1):0===t.indexOf("0x")&&(t=t.substr(2)),8==t.length&&(i=t.substr(0,2),t=t.substr(2)),e.push(parseInt(t.substr(0,2),16)),e.push(parseInt(t.substr(2,2),16)),e.push(parseInt(t.substr(4,2),16)),i&&e.push(parseInt(i,16)),e},o.generateEase=function(t){var e=t.length,i=1/e;return function(r){var n,o,s=e*r|0;return n=(r-s*i)*e,(o=t[s]||t[e-1]).s+n*(2*(1-n)*(o.cp-o.s)+n*(o.e-o.s))}},o.getBlendMode=function(t){if(!t)return r.NORMAL;for(t=t.toUpperCase();t.indexOf(" ")>=0;)t=t.replace(" ","_");return r[t]||r.NORMAL},e.exports=o},{}],5:[function(require,module,exports){"use strict";var ParticleUtils=require("./ParticleUtils"),Particle=require("./Particle"),PathParticle=function(t){Particle.call(this,t),this.path=null,this.initialRotation=0,this.initialPosition=new PIXI.Point,this.movement=0},s=Particle.prototype,p=PathParticle.prototype=Object.create(s),helperPoint=new PIXI.Point;p.init=function(){this.initialRotation=this.rotation,this.Particle_init(),this.path=this.extraData.path,this._doNormalMovement=!this.path,this.movement=0,this.initialPosition.x=this.position.x,this.initialPosition.y=this.position.y};for(var MATH_FUNCS=["pow","sqrt","abs","floor","round","ceil","E","PI","sin","cos","tan","asin","acos","atan","atan2","log"],WHITELISTER="[01234567890\\.\\*\\-\\+\\/\\(\\)x ,]",index=MATH_FUNCS.length-1;index>=0;--index)WHITELISTER+="|"+MATH_FUNCS[index];WHITELISTER=new RegExp(WHITELISTER,"g");var parsePath=function(pathString){for(var rtn,matches=pathString.match(WHITELISTER),i=matches.length-1;i>=0;--i)MATH_FUNCS.indexOf(matches[i])>=0&&(matches[i]="Math."+matches[i]);return pathString=matches.join(""),eval("rtn = function(x){ return "+pathString+"; };"),rtn};p.update=function(t){var e=this.Particle_update(t);if(e>=0&&this.path){var i=(this.endSpeed-this.startSpeed)*e+this.startSpeed;this.movement+=i*t,helperPoint.x=this.movement,helperPoint.y=this.path(this.movement),ParticleUtils.rotatePoint(this.initialRotation,helperPoint),this.position.x=this.initialPosition.x+helperPoint.x,this.position.y=this.initialPosition.y+helperPoint.y}},p.Particle_destroy=Particle.prototype.destroy,p.destroy=function(){this.Particle_destroy(),this.path=this.initialPosition=null},PathParticle.parseArt=function(t){return Particle.parseArt(t)},PathParticle.parseData=function(t){var e={};if(t&&t.path)try{e.path=parsePath(t.path)}catch(t){ParticleUtils.verbose,e.path=null}else ParticleUtils.verbose,e.path=null;return e},module.exports=PathParticle},{"./Particle":3,"./ParticleUtils":4}],6:[function(t,e,i){},{}],7:[function(t,e,i){t("./polyfills.js"),i.ParticleUtils=t("./ParticleUtils.js"),i.Particle=t("./Particle.js"),i.Emitter=t("./Emitter.js"),i.PathParticle=t("./PathParticle.js"),i.AnimatedParticle=t("./AnimatedParticle.js"),t("./deprecation.js")},{"./AnimatedParticle.js":1,"./Emitter.js":2,"./Particle.js":3,"./ParticleUtils.js":4,"./PathParticle.js":5,"./deprecation.js":6,"./polyfills.js":8}],8:[function(t,e,i){Array.prototype.shuffle||Object.defineProperty(Array.prototype,"shuffle",{enumerable:!1,writable:!1,value:function(){for(var t,e,i=this.length;i;t=Math.floor(Math.random()*i),e=this[--i],this[i]=this[t],this[t]=e);return this}}),Array.prototype.random||Object.defineProperty(Array.prototype,"random",{enumerable:!1,writable:!1,value:function(){return this[Math.floor(Math.random()*this.length)]}})},{}],9:[function(t,e,i){"use strict";var r="undefined"!=typeof window?window:GLOBAL;if(r.PIXI.particles||(r.PIXI.particles={}),void 0!==e&&e.exports)"undefined"==typeof PIXI&&t("pixi.js"),e.exports=r.PIXI.particles||n;else if("undefined"==typeof PIXI)throw"pixi-particles requires pixi.js to be loaded first";var n=t("./particles");for(var o in n)r.PIXI.particles[o]=n[o]},{"./particles":7,"pixi.js":void 0}]},{},[9])(9)},module.exports=f()},function(t,e){var i,r,n,o=this&&this.__extends||(i=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var i in e)e.hasOwnProperty(i)&&(t[i]=e[i])},function(t,e){function r(){this.constructor=t}i(t,e),t.prototype=null===e?Object.create(e):(r.prototype=e.prototype,new r)});!function(t){!function(t){var e,i,r,n=function(){function t(t,e,i){if(null==t)throw new Error("name cannot be null.");if(null==e)throw new Error("timelines cannot be null.");this.name=t,this.timelines=e,this.duration=i}return t.prototype.apply=function(t,e,i,r,n,o,s,a){if(null==t)throw new Error("skeleton cannot be null.");r&&0!=this.duration&&(i%=this.duration,e>0&&(e%=this.duration));for(var l=this.timelines,h=0,u=l.length;h<u;h++)l[h].apply(t,e,i,n,o,s,a)},t.binarySearch=function(t,e,i){void 0===i&&(i=1);var r=0,n=t.length/i-2;if(0==n)return i;for(var o=n>>>1;;){if(t[(o+1)*i]<=e?r=o+1:n=o,r==n)return(r+1)*i;o=r+n>>>1}},t.linearSearch=function(t,e,i){for(var r=0,n=t.length-i;r<=n;r+=i)if(t[r]>e)return r;return-1},t}();t.Animation=n,function(t){t[t.setup=0]="setup",t[t.current=1]="current",t[t.currentLayered=2]="currentLayered"}(e=t.MixPose||(t.MixPose={})),function(t){t[t.in=0]="in",t[t.out=1]="out"}(i=t.MixDirection||(t.MixDirection={})),function(t){t[t.rotate=0]="rotate",t[t.translate=1]="translate",t[t.scale=2]="scale",t[t.shear=3]="shear",t[t.attachment=4]="attachment",t[t.color=5]="color",t[t.deform=6]="deform",t[t.event=7]="event",t[t.drawOrder=8]="drawOrder",t[t.ikConstraint=9]="ikConstraint",t[t.transformConstraint=10]="transformConstraint",t[t.pathConstraintPosition=11]="pathConstraintPosition",t[t.pathConstraintSpacing=12]="pathConstraintSpacing",t[t.pathConstraintMix=13]="pathConstraintMix",t[t.twoColor=14]="twoColor"}(r=t.TimelineType||(t.TimelineType={}));var s=function(){function e(i){if(i<=0)throw new Error("frameCount must be > 0: "+i);this.curves=t.Utils.newFloatArray((i-1)*e.BEZIER_SIZE)}return e.prototype.getFrameCount=function(){return this.curves.length/e.BEZIER_SIZE+1},e.prototype.setLinear=function(t){this.curves[t*e.BEZIER_SIZE]=e.LINEAR},e.prototype.setStepped=function(t){this.curves[t*e.BEZIER_SIZE]=e.STEPPED},e.prototype.getCurveType=function(t){var i=t*e.BEZIER_SIZE;if(i==this.curves.length)return e.LINEAR;var r=this.curves[i];return r==e.LINEAR?e.LINEAR:r==e.STEPPED?e.STEPPED:e.BEZIER},e.prototype.setCurve=function(t,i,r,n,o){var s=.03*(2*-i+n),a=.03*(2*-r+o),l=.006*(3*(i-n)+1),h=.006*(3*(r-o)+1),u=2*s+l,c=2*a+h,p=.3*i+s+.16666667*l,f=.3*r+a+.16666667*h,d=t*e.BEZIER_SIZE,g=this.curves;g[d++]=e.BEZIER;for(var m=p,v=f,y=d+e.BEZIER_SIZE-1;d<y;d+=2)g[d]=m,g[d+1]=v,p+=u,f+=c,u+=l,c+=h,m+=p,v+=f},e.prototype.getCurvePercent=function(i,r){r=t.MathUtils.clamp(r,0,1);var n=this.curves,o=i*e.BEZIER_SIZE,s=n[o];if(s==e.LINEAR)return r;if(s==e.STEPPED)return 0;for(var a=0,l=++o,h=o+e.BEZIER_SIZE-1;o<h;o+=2)if((a=n[o])>=r){var u=void 0,c=void 0;return o==l?(u=0,c=0):(u=n[o-2],c=n[o-1]),c+(n[o+1]-c)*(r-u)/(a-u)}var p=n[o-1];return p+(1-p)*(r-a)/(1-a)},e.LINEAR=0,e.STEPPED=1,e.BEZIER=2,e.BEZIER_SIZE=19,e}();t.CurveTimeline=s;var a=function(i){function s(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e<<1),r}return o(s,i),s.prototype.getPropertyId=function(){return(r.rotate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,i){t<<=1,this.frames[t]=e,this.frames[t+s.ROTATION]=i},s.prototype.apply=function(t,i,r,o,a,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(r<u[0])switch(l){case e.setup:return void(c.rotation=c.data.rotation);case e.current:var p=c.data.rotation-c.rotation;p-=360*(16384-(16384.499999999996-p/360|0)),c.rotation+=p*a}else if(r>=u[u.length-s.ENTRIES])if(l==e.setup)c.rotation=c.data.rotation+u[u.length+s.PREV_ROTATION]*a;else{var f=c.data.rotation+u[u.length+s.PREV_ROTATION]-c.rotation;f-=360*(16384-(16384.499999999996-f/360|0)),c.rotation+=f*a}else{var d=n.binarySearch(u,r,s.ENTRIES),g=u[d+s.PREV_ROTATION],m=u[d],v=this.getCurvePercent((d>>1)-1,1-(r-m)/(u[d+s.PREV_TIME]-m)),y=u[d+s.ROTATION]-g;y=g+(y-=360*(16384-(16384.499999999996-y/360|0)))*v,l==e.setup?(y-=360*(16384-(16384.499999999996-y/360|0)),c.rotation=c.data.rotation+y*a):(y=c.data.rotation+y-c.rotation,y-=360*(16384-(16384.499999999996-y/360|0)),c.rotation+=y*a)}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_ROTATION=-1,s.ROTATION=1,s}(s);t.RotateTimeline=a;var l=function(i){function s(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*s.ENTRIES),r}return o(s,i),s.prototype.getPropertyId=function(){return(r.translate<<24)+this.boneIndex},s.prototype.setFrame=function(t,e,i,r){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.X]=i,this.frames[t+s.Y]=r},s.prototype.apply=function(t,i,r,o,a,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(r<u[0])switch(l){case e.setup:return c.x=c.data.x,void(c.y=c.data.y);case e.current:c.x+=(c.data.x-c.x)*a,c.y+=(c.data.y-c.y)*a}else{var p=0,f=0;if(r>=u[u.length-s.ENTRIES])p=u[u.length+s.PREV_X],f=u[u.length+s.PREV_Y];else{var d=n.binarySearch(u,r,s.ENTRIES);p=u[d+s.PREV_X],f=u[d+s.PREV_Y];var g=u[d],m=this.getCurvePercent(d/s.ENTRIES-1,1-(r-g)/(u[d+s.PREV_TIME]-g));p+=(u[d+s.X]-p)*m,f+=(u[d+s.Y]-f)*m}l==e.setup?(c.x=c.data.x+p*a,c.y=c.data.y+f*a):(c.x+=(c.data.x+p-c.x)*a,c.y+=(c.data.y+f-c.y)*a)}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_X=-2,s.PREV_Y=-1,s.X=1,s.Y=2,s}(s);t.TranslateTimeline=l;var h=function(s){function a(t){return s.call(this,t)||this}return o(a,s),a.prototype.getPropertyId=function(){return(r.scale<<24)+this.boneIndex},a.prototype.apply=function(r,o,s,l,h,u,c){var p=this.frames,f=r.bones[this.boneIndex];if(s<p[0])switch(u){case e.setup:return f.scaleX=f.data.scaleX,void(f.scaleY=f.data.scaleY);case e.current:f.scaleX+=(f.data.scaleX-f.scaleX)*h,f.scaleY+=(f.data.scaleY-f.scaleY)*h}else{var d=0,g=0;if(s>=p[p.length-a.ENTRIES])d=p[p.length+a.PREV_X]*f.data.scaleX,g=p[p.length+a.PREV_Y]*f.data.scaleY;else{var m=n.binarySearch(p,s,a.ENTRIES);d=p[m+a.PREV_X],g=p[m+a.PREV_Y];var v=p[m],y=this.getCurvePercent(m/a.ENTRIES-1,1-(s-v)/(p[m+a.PREV_TIME]-v));d=(d+(p[m+a.X]-d)*y)*f.data.scaleX,g=(g+(p[m+a.Y]-g)*y)*f.data.scaleY}if(1==h)f.scaleX=d,f.scaleY=g;else{var _=0,x=0;u==e.setup?(_=f.data.scaleX,x=f.data.scaleY):(_=f.scaleX,x=f.scaleY),c==i.out?(d=Math.abs(d)*t.MathUtils.signum(_),g=Math.abs(g)*t.MathUtils.signum(x)):(_=Math.abs(_)*t.MathUtils.signum(d),x=Math.abs(x)*t.MathUtils.signum(g)),f.scaleX=_+(d-_)*h,f.scaleY=x+(g-x)*h}}},a}(l);t.ScaleTimeline=h;var u=function(t){function i(e){return t.call(this,e)||this}return o(i,t),i.prototype.getPropertyId=function(){return(r.shear<<24)+this.boneIndex},i.prototype.apply=function(t,r,o,s,a,l,h){var u=this.frames,c=t.bones[this.boneIndex];if(o<u[0])switch(l){case e.setup:return c.shearX=c.data.shearX,void(c.shearY=c.data.shearY);case e.current:c.shearX+=(c.data.shearX-c.shearX)*a,c.shearY+=(c.data.shearY-c.shearY)*a}else{var p=0,f=0;if(o>=u[u.length-i.ENTRIES])p=u[u.length+i.PREV_X],f=u[u.length+i.PREV_Y];else{var d=n.binarySearch(u,o,i.ENTRIES);p=u[d+i.PREV_X],f=u[d+i.PREV_Y];var g=u[d],m=this.getCurvePercent(d/i.ENTRIES-1,1-(o-g)/(u[d+i.PREV_TIME]-g));p+=(u[d+i.X]-p)*m,f+=(u[d+i.Y]-f)*m}l==e.setup?(c.shearX=c.data.shearX+p*a,c.shearY=c.data.shearY+f*a):(c.shearX+=(c.data.shearX+p-c.shearX)*a,c.shearY+=(c.data.shearY+f-c.shearY)*a)}},i}(l);t.ShearTimeline=u;var c=function(i){function s(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*s.ENTRIES),r}return o(s,i),s.prototype.getPropertyId=function(){return(r.color<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,i,r,n,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=i,this.frames[t+s.G]=r,this.frames[t+s.B]=n,this.frames[t+s.A]=o},s.prototype.apply=function(t,i,r,o,a,l,h){var u=t.slots[this.slotIndex],c=this.frames;if(r<c[0])switch(l){case e.setup:return void u.color.setFromColor(u.data.color);case e.current:var p=u.color,f=u.data.color;p.add((f.r-p.r)*a,(f.g-p.g)*a,(f.b-p.b)*a,(f.a-p.a)*a)}else{var d=0,g=0,m=0,v=0;if(r>=c[c.length-s.ENTRIES]){var y=c.length;d=c[y+s.PREV_R],g=c[y+s.PREV_G],m=c[y+s.PREV_B],v=c[y+s.PREV_A]}else{var _=n.binarySearch(c,r,s.ENTRIES);d=c[_+s.PREV_R],g=c[_+s.PREV_G],m=c[_+s.PREV_B],v=c[_+s.PREV_A];var x=c[_],b=this.getCurvePercent(_/s.ENTRIES-1,1-(r-x)/(c[_+s.PREV_TIME]-x));d+=(c[_+s.R]-d)*b,g+=(c[_+s.G]-g)*b,m+=(c[_+s.B]-m)*b,v+=(c[_+s.A]-v)*b}if(1==a)u.color.set(d,g,m,v);else{p=u.color;l==e.setup&&p.setFromColor(u.data.color),p.add((d-p.r)*a,(g-p.g)*a,(m-p.b)*a,(v-p.a)*a)}}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_R=-4,s.PREV_G=-3,s.PREV_B=-2,s.PREV_A=-1,s.R=1,s.G=2,s.B=3,s.A=4,s}(s);t.ColorTimeline=c;var p=function(i){function s(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*s.ENTRIES),r}return o(s,i),s.prototype.getPropertyId=function(){return(r.twoColor<<24)+this.slotIndex},s.prototype.setFrame=function(t,e,i,r,n,o,a,l,h){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.R]=i,this.frames[t+s.G]=r,this.frames[t+s.B]=n,this.frames[t+s.A]=o,this.frames[t+s.R2]=a,this.frames[t+s.G2]=l,this.frames[t+s.B2]=h},s.prototype.apply=function(t,i,r,o,a,l,h){var u=t.slots[this.slotIndex],c=this.frames;if(r<c[0])switch(l){case e.setup:return u.color.setFromColor(u.data.color),void u.darkColor.setFromColor(u.data.darkColor);case e.current:var p=u.color,f=u.darkColor,d=u.data.color,g=u.data.darkColor;p.add((d.r-p.r)*a,(d.g-p.g)*a,(d.b-p.b)*a,(d.a-p.a)*a),f.add((g.r-f.r)*a,(g.g-f.g)*a,(g.b-f.b)*a,0)}else{var m=0,v=0,y=0,_=0,x=0,b=0,T=0;if(r>=c[c.length-s.ENTRIES]){var w=c.length;m=c[w+s.PREV_R],v=c[w+s.PREV_G],y=c[w+s.PREV_B],_=c[w+s.PREV_A],x=c[w+s.PREV_R2],b=c[w+s.PREV_G2],T=c[w+s.PREV_B2]}else{var S=n.binarySearch(c,r,s.ENTRIES);m=c[S+s.PREV_R],v=c[S+s.PREV_G],y=c[S+s.PREV_B],_=c[S+s.PREV_A],x=c[S+s.PREV_R2],b=c[S+s.PREV_G2],T=c[S+s.PREV_B2];var A=c[S],P=this.getCurvePercent(S/s.ENTRIES-1,1-(r-A)/(c[S+s.PREV_TIME]-A));m+=(c[S+s.R]-m)*P,v+=(c[S+s.G]-v)*P,y+=(c[S+s.B]-y)*P,_+=(c[S+s.A]-_)*P,x+=(c[S+s.R2]-x)*P,b+=(c[S+s.G2]-b)*P,T+=(c[S+s.B2]-T)*P}if(1==a)u.color.set(m,v,y,_),u.darkColor.set(x,b,T,1);else{p=u.color,f=u.darkColor;l==e.setup&&(p.setFromColor(u.data.color),f.setFromColor(u.data.darkColor)),p.add((m-p.r)*a,(v-p.g)*a,(y-p.b)*a,(_-p.a)*a),f.add((x-f.r)*a,(b-f.g)*a,(T-f.b)*a,0)}}},s.ENTRIES=8,s.PREV_TIME=-8,s.PREV_R=-7,s.PREV_G=-6,s.PREV_B=-5,s.PREV_A=-4,s.PREV_R2=-3,s.PREV_G2=-2,s.PREV_B2=-1,s.R=1,s.G=2,s.B=3,s.A=4,s.R2=5,s.G2=6,s.B2=7,s}(s);t.TwoColorTimeline=p;var f=function(){function o(e){this.frames=t.Utils.newFloatArray(e),this.attachmentNames=new Array(e)}return o.prototype.getPropertyId=function(){return(r.attachment<<24)+this.slotIndex},o.prototype.getFrameCount=function(){return this.frames.length},o.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.attachmentNames[t]=i},o.prototype.apply=function(t,r,o,s,a,l,h){var u=t.slots[this.slotIndex];if(h!=i.out||l!=e.setup){var c=this.frames;if(o<c[0]){if(l==e.setup){var p=u.data.attachmentName;u.setAttachment(null==p?null:t.getAttachment(this.slotIndex,p))}}else{var f=0;f=o>=c[c.length-1]?c.length-1:n.binarySearch(c,o,1)-1;var d=this.attachmentNames[f];t.slots[this.slotIndex].setAttachment(null==d?null:t.getAttachment(this.slotIndex,d))}}else{var g=u.data.attachmentName;u.setAttachment(null==g?null:t.getAttachment(this.slotIndex,g))}},o}();t.AttachmentTimeline=f;var d=null,g=function(i){function s(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e),r.frameVertices=new Array(e),null==d&&(d=t.Utils.newFloatArray(64)),r}return o(s,i),s.prototype.getPropertyId=function(){return(r.deform<<27)+ +this.attachment.id+this.slotIndex},s.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.frameVertices[t]=i},s.prototype.apply=function(i,r,o,s,a,l,h){var u=i.slots[this.slotIndex],c=u.getAttachment();if(c instanceof t.VertexAttachment&&c.applyDeform(this.attachment)){var p=u.attachmentVertices;0==p.length&&(a=1);var f=this.frameVertices,d=f[0].length,g=this.frames;if(o<g[0]){var m=c;switch(l){case e.setup:return void(p.length=0);case e.current:if(1==a){p.length=0;break}var v=t.Utils.setArraySize(p,d);if(null==m.bones)for(var y=m.vertices,_=0;_<d;_++)v[_]+=(y[_]-v[_])*a;else{a=1-a;for(_=0;_<d;_++)v[_]*=a}}}else{var x=t.Utils.setArraySize(p,d);if(o>=g[g.length-1]){var b=f[g.length-1];if(1==a)t.Utils.arrayCopy(b,0,x,0,d);else if(l==e.setup){if(null==(m=c).bones)for(y=m.vertices,_=0;_<d;_++){var T=y[_];x[_]=T+(b[_]-T)*a}else for(_=0;_<d;_++)x[_]=b[_]*a}else for(_=0;_<d;_++)x[_]+=(b[_]-x[_])*a}else{var w=n.binarySearch(g,o),S=f[w-1],A=f[w],P=g[w],E=this.getCurvePercent(w-1,1-(o-P)/(g[w-1]-P));if(1==a)for(_=0;_<d;_++){var C=S[_];x[_]=C+(A[_]-C)*E}else if(l==e.setup){if(null==(m=c).bones)for(y=m.vertices,_=0;_<d;_++){C=S[_],T=y[_];x[_]=T+(C+(A[_]-C)*E-T)*a}else for(_=0;_<d;_++){C=S[_];x[_]=(C+(A[_]-C)*E)*a}}else for(_=0;_<d;_++){C=S[_];x[_]+=(C+(A[_]-C)*E-x[_])*a}}}}},s}(s);t.DeformTimeline=g;var m=function(){function e(e){this.frames=t.Utils.newFloatArray(e),this.events=new Array(e)}return e.prototype.getPropertyId=function(){return r.event<<24},e.prototype.getFrameCount=function(){return this.frames.length},e.prototype.setFrame=function(t,e){this.frames[t]=e.time,this.events[t]=e},e.prototype.apply=function(t,e,i,r,o,s,a){if(null!=r){var l=this.frames,h=this.frames.length;if(e>i)this.apply(t,e,Number.MAX_VALUE,r,o,s,a),e=-1;else if(e>=l[h-1])return;if(!(i<l[0])){var u=0;if(e<l[0])u=0;else for(var c=l[u=n.binarySearch(l,e)];u>0&&l[u-1]==c;)u--;for(;u<h&&i>=l[u];u++)r.push(this.events[u])}}},e}();t.EventTimeline=m;var v=function(){function o(e){this.frames=t.Utils.newFloatArray(e),this.drawOrders=new Array(e)}return o.prototype.getPropertyId=function(){return r.drawOrder<<24},o.prototype.getFrameCount=function(){return this.frames.length},o.prototype.setFrame=function(t,e,i){this.frames[t]=e,this.drawOrders[t]=i},o.prototype.apply=function(r,o,s,a,l,h,u){var c=r.drawOrder,p=r.slots;if(u!=i.out||h!=e.setup){var f=this.frames;if(s<f[0])h==e.setup&&t.Utils.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length);else{var d=0;d=s>=f[f.length-1]?f.length-1:n.binarySearch(f,s)-1;var g=this.drawOrders[d];if(null==g)t.Utils.arrayCopy(p,0,c,0,p.length);else for(var m=0,v=g.length;m<v;m++)c[m]=p[g[m]]}}else t.Utils.arrayCopy(r.slots,0,r.drawOrder,0,r.slots.length)},o}();t.DrawOrderTimeline=v;var y=function(s){function a(e){var i=s.call(this,e)||this;return i.frames=t.Utils.newFloatArray(e*a.ENTRIES),i}return o(a,s),a.prototype.getPropertyId=function(){return(r.ikConstraint<<24)+this.ikConstraintIndex},a.prototype.setFrame=function(t,e,i,r){t*=a.ENTRIES,this.frames[t]=e,this.frames[t+a.MIX]=i,this.frames[t+a.BEND_DIRECTION]=r},a.prototype.apply=function(t,r,o,s,l,h,u){var c=this.frames,p=t.ikConstraints[this.ikConstraintIndex];if(o<c[0])switch(h){case e.setup:return p.mix=p.data.mix,void(p.bendDirection=p.data.bendDirection);case e.current:p.mix+=(p.data.mix-p.mix)*l,p.bendDirection=p.data.bendDirection}else if(o>=c[c.length-a.ENTRIES])h==e.setup?(p.mix=p.data.mix+(c[c.length+a.PREV_MIX]-p.data.mix)*l,p.bendDirection=u==i.out?p.data.bendDirection:c[c.length+a.PREV_BEND_DIRECTION]):(p.mix+=(c[c.length+a.PREV_MIX]-p.mix)*l,u==i.in&&(p.bendDirection=c[c.length+a.PREV_BEND_DIRECTION]));else{var f=n.binarySearch(c,o,a.ENTRIES),d=c[f+a.PREV_MIX],g=c[f],m=this.getCurvePercent(f/a.ENTRIES-1,1-(o-g)/(c[f+a.PREV_TIME]-g));h==e.setup?(p.mix=p.data.mix+(d+(c[f+a.MIX]-d)*m-p.data.mix)*l,p.bendDirection=u==i.out?p.data.bendDirection:c[f+a.PREV_BEND_DIRECTION]):(p.mix+=(d+(c[f+a.MIX]-d)*m-p.mix)*l,u==i.in&&(p.bendDirection=c[f+a.PREV_BEND_DIRECTION]))}},a.ENTRIES=3,a.PREV_TIME=-3,a.PREV_MIX=-2,a.PREV_BEND_DIRECTION=-1,a.MIX=1,a.BEND_DIRECTION=2,a}(s);t.IkConstraintTimeline=y;var _=function(i){function s(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*s.ENTRIES),r}return o(s,i),s.prototype.getPropertyId=function(){return(r.transformConstraint<<24)+this.transformConstraintIndex},s.prototype.setFrame=function(t,e,i,r,n,o){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=i,this.frames[t+s.TRANSLATE]=r,this.frames[t+s.SCALE]=n,this.frames[t+s.SHEAR]=o},s.prototype.apply=function(t,i,r,o,a,l,h){var u=this.frames,c=t.transformConstraints[this.transformConstraintIndex];if(r<u[0]){var p=c.data;switch(l){case e.setup:return c.rotateMix=p.rotateMix,c.translateMix=p.translateMix,c.scaleMix=p.scaleMix,void(c.shearMix=p.shearMix);case e.current:c.rotateMix+=(p.rotateMix-c.rotateMix)*a,c.translateMix+=(p.translateMix-c.translateMix)*a,c.scaleMix+=(p.scaleMix-c.scaleMix)*a,c.shearMix+=(p.shearMix-c.shearMix)*a}}else{var f=0,d=0,g=0,m=0;if(r>=u[u.length-s.ENTRIES]){var v=u.length;f=u[v+s.PREV_ROTATE],d=u[v+s.PREV_TRANSLATE],g=u[v+s.PREV_SCALE],m=u[v+s.PREV_SHEAR]}else{var y=n.binarySearch(u,r,s.ENTRIES);f=u[y+s.PREV_ROTATE],d=u[y+s.PREV_TRANSLATE],g=u[y+s.PREV_SCALE],m=u[y+s.PREV_SHEAR];var _=u[y],x=this.getCurvePercent(y/s.ENTRIES-1,1-(r-_)/(u[y+s.PREV_TIME]-_));f+=(u[y+s.ROTATE]-f)*x,d+=(u[y+s.TRANSLATE]-d)*x,g+=(u[y+s.SCALE]-g)*x,m+=(u[y+s.SHEAR]-m)*x}if(l==e.setup){p=c.data;c.rotateMix=p.rotateMix+(f-p.rotateMix)*a,c.translateMix=p.translateMix+(d-p.translateMix)*a,c.scaleMix=p.scaleMix+(g-p.scaleMix)*a,c.shearMix=p.shearMix+(m-p.shearMix)*a}else c.rotateMix+=(f-c.rotateMix)*a,c.translateMix+=(d-c.translateMix)*a,c.scaleMix+=(g-c.scaleMix)*a,c.shearMix+=(m-c.shearMix)*a}},s.ENTRIES=5,s.PREV_TIME=-5,s.PREV_ROTATE=-4,s.PREV_TRANSLATE=-3,s.PREV_SCALE=-2,s.PREV_SHEAR=-1,s.ROTATE=1,s.TRANSLATE=2,s.SCALE=3,s.SHEAR=4,s}(s);t.TransformConstraintTimeline=_;var x=function(i){function s(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*s.ENTRIES),r}return o(s,i),s.prototype.getPropertyId=function(){return(r.pathConstraintPosition<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,i){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.VALUE]=i},s.prototype.apply=function(t,i,r,o,a,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(r<u[0])switch(l){case e.setup:return void(c.position=c.data.position);case e.current:c.position+=(c.data.position-c.position)*a}else{var p=0;if(r>=u[u.length-s.ENTRIES])p=u[u.length+s.PREV_VALUE];else{var f=n.binarySearch(u,r,s.ENTRIES);p=u[f+s.PREV_VALUE];var d=u[f],g=this.getCurvePercent(f/s.ENTRIES-1,1-(r-d)/(u[f+s.PREV_TIME]-d));p+=(u[f+s.VALUE]-p)*g}l==e.setup?c.position=c.data.position+(p-c.data.position)*a:c.position+=(p-c.position)*a}},s.ENTRIES=2,s.PREV_TIME=-2,s.PREV_VALUE=-1,s.VALUE=1,s}(s);t.PathConstraintPositionTimeline=x;var b=function(t){function i(e){return t.call(this,e)||this}return o(i,t),i.prototype.getPropertyId=function(){return(r.pathConstraintSpacing<<24)+this.pathConstraintIndex},i.prototype.apply=function(t,r,o,s,a,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(o<u[0])switch(l){case e.setup:return void(c.spacing=c.data.spacing);case e.current:c.spacing+=(c.data.spacing-c.spacing)*a}else{var p=0;if(o>=u[u.length-i.ENTRIES])p=u[u.length+i.PREV_VALUE];else{var f=n.binarySearch(u,o,i.ENTRIES);p=u[f+i.PREV_VALUE];var d=u[f],g=this.getCurvePercent(f/i.ENTRIES-1,1-(o-d)/(u[f+i.PREV_TIME]-d));p+=(u[f+i.VALUE]-p)*g}l==e.setup?c.spacing=c.data.spacing+(p-c.data.spacing)*a:c.spacing+=(p-c.spacing)*a}},i}(x);t.PathConstraintSpacingTimeline=b;var T=function(i){function s(e){var r=i.call(this,e)||this;return r.frames=t.Utils.newFloatArray(e*s.ENTRIES),r}return o(s,i),s.prototype.getPropertyId=function(){return(r.pathConstraintMix<<24)+this.pathConstraintIndex},s.prototype.setFrame=function(t,e,i,r){t*=s.ENTRIES,this.frames[t]=e,this.frames[t+s.ROTATE]=i,this.frames[t+s.TRANSLATE]=r},s.prototype.apply=function(t,i,r,o,a,l,h){var u=this.frames,c=t.pathConstraints[this.pathConstraintIndex];if(r<u[0])switch(l){case e.setup:return c.rotateMix=c.data.rotateMix,void(c.translateMix=c.data.translateMix);case e.current:c.rotateMix+=(c.data.rotateMix-c.rotateMix)*a,c.translateMix+=(c.data.translateMix-c.translateMix)*a}else{var p=0,f=0;if(r>=u[u.length-s.ENTRIES])p=u[u.length+s.PREV_ROTATE],f=u[u.length+s.PREV_TRANSLATE];else{var d=n.binarySearch(u,r,s.ENTRIES);p=u[d+s.PREV_ROTATE],f=u[d+s.PREV_TRANSLATE];var g=u[d],m=this.getCurvePercent(d/s.ENTRIES-1,1-(r-g)/(u[d+s.PREV_TIME]-g));p+=(u[d+s.ROTATE]-p)*m,f+=(u[d+s.TRANSLATE]-f)*m}l==e.setup?(c.rotateMix=c.data.rotateMix+(p-c.data.rotateMix)*a,c.translateMix=c.data.translateMix+(f-c.data.translateMix)*a):(c.rotateMix+=(p-c.rotateMix)*a,c.translateMix+=(f-c.translateMix)*a)}},s.ENTRIES=3,s.PREV_TIME=-3,s.PREV_ROTATE=-2,s.PREV_TRANSLATE=-1,s.ROTATE=1,s.TRANSLATE=2,s}(s);t.PathConstraintMixTimeline=T}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(e){this.tracks=new Array,this.events=new Array,this.listeners=new Array,this.queue=new n(this),this.propertyIDs=new t.IntSet,this.mixingTo=new Array,this.animationsChanged=!1,this.timeScale=1,this.trackEntryPool=new t.Pool((function(){return new i})),this.data=e}return e.prototype.update=function(t){t*=this.timeScale;for(var e=this.tracks,i=0,r=e.length;i<r;i++){var n=e[i];if(null!=n){n.animationLast=n.nextAnimationLast,n.trackLast=n.nextTrackLast;var o=t*n.timeScale;if(n.delay>0){if(n.delay-=o,n.delay>0)continue;o=-n.delay,n.delay=0}var s=n.next;if(null!=s){var a=n.trackLast-s.delay;if(a>=0){for(s.delay=0,s.trackTime=a+t*s.timeScale,n.trackTime+=o,this.setCurrent(i,s,!0);null!=s.mixingFrom;)s.mixTime+=o,s=s.mixingFrom;continue}}else if(n.trackLast>=n.trackEnd&&null==n.mixingFrom){e[i]=null,this.queue.end(n),this.disposeNext(n);continue}if(null!=n.mixingFrom&&this.updateMixingFrom(n,t)){var l=n.mixingFrom;for(n.mixingFrom=null;null!=l;)this.queue.end(l),l=l.mixingFrom}n.trackTime+=o}}this.queue.drain()},e.prototype.updateMixingFrom=function(t,e){var i=t.mixingFrom;if(null==i)return!0;var r=this.updateMixingFrom(i,e);return t.mixTime>0&&(t.mixTime>=t.mixDuration||0==t.timeScale)?(0==i.totalAlpha&&(t.mixingFrom=i.mixingFrom,t.interruptAlpha=i.interruptAlpha,this.queue.end(i)),r):(i.animationLast=i.nextAnimationLast,i.trackLast=i.nextTrackLast,i.trackTime+=e*i.timeScale,t.mixTime+=e*t.timeScale,!1)},e.prototype.apply=function(i){if(null==i)throw new Error("skeleton cannot be null.");this.animationsChanged&&this._animationsChanged();for(var r=this.events,n=this.tracks,o=!1,s=0,a=n.length;s<a;s++){var l=n[s];if(!(null==l||l.delay>0)){o=!0;var h=0==s?t.MixPose.current:t.MixPose.currentLayered,u=l.alpha;null!=l.mixingFrom?u*=this.applyMixingFrom(l,i,h):l.trackTime>=l.trackEnd&&null==l.next&&(u=0);var c=l.animationLast,p=l.getAnimationTime(),f=l.animation.timelines.length,d=l.animation.timelines;if(1==u)for(var g=0;g<f;g++)d[g].apply(i,c,p,r,1,t.MixPose.setup,t.MixDirection.in);else{var m=l.timelineData,v=0==l.timelinesRotation.length;v&&t.Utils.setArraySize(l.timelinesRotation,f<<1,null);var y=l.timelinesRotation;for(g=0;g<f;g++){var _=d[g],x=m[g]>=e.FIRST?t.MixPose.setup:h;_ instanceof t.RotateTimeline?this.applyRotateTimeline(_,i,p,u,x,y,g<<1,v):(t.Utils.webkit602BugfixHelper(u,x),_.apply(i,c,p,r,u,x,t.MixDirection.in))}}this.queueEvents(l,p),r.length=0,l.nextAnimationLast=p,l.nextTrackLast=l.trackTime}}return this.queue.drain(),o},e.prototype.applyMixingFrom=function(i,r,n){var o=i.mixingFrom;null!=o.mixingFrom&&this.applyMixingFrom(o,r,n);var s=0;0==i.mixDuration?(s=1,n=t.MixPose.setup):(s=i.mixTime/i.mixDuration)>1&&(s=1);var a=s<o.eventThreshold?this.events:null,l=s<o.attachmentThreshold,h=s<o.drawOrderThreshold,u=o.animationLast,c=o.getAnimationTime(),p=o.animation.timelines.length,f=o.animation.timelines,d=o.timelineData,g=o.timelineDipMix,m=0==o.timelinesRotation.length;m&&t.Utils.setArraySize(o.timelinesRotation,p<<1,null);var v,y=o.timelinesRotation,_=o.alpha*i.interruptAlpha,x=_*(1-s),b=0;o.totalAlpha=0;for(var T=0;T<p;T++){var w=f[T];switch(d[T]){case e.SUBSEQUENT:if(!l&&w instanceof t.AttachmentTimeline)continue;if(!h&&w instanceof t.DrawOrderTimeline)continue;v=n,b=x;break;case e.FIRST:v=t.MixPose.setup,b=x;break;case e.DIP:v=t.MixPose.setup,b=_;break;default:v=t.MixPose.setup,b=_;var S=g[T];b*=Math.max(0,1-S.mixTime/S.mixDuration)}o.totalAlpha+=b,w instanceof t.RotateTimeline?this.applyRotateTimeline(w,r,c,b,v,y,T<<1,m):w.apply(r,u,c,a,b,v,t.MixDirection.out)}return i.mixDuration>0&&this.queueEvents(o,c),this.events.length=0,o.nextAnimationLast=c,o.nextTrackLast=o.trackTime,s},e.prototype.applyRotateTimeline=function(e,i,r,n,o,s,a,l){if(l&&(s[a]=0),1!=n){var h=e,u=h.frames,c=i.bones[h.boneIndex];if(r<u[0])o==t.MixPose.setup&&(c.rotation=c.data.rotation);else{var p=0;if(r>=u[u.length-t.RotateTimeline.ENTRIES])p=c.data.rotation+u[u.length+t.RotateTimeline.PREV_ROTATION];else{var f=t.Animation.binarySearch(u,r,t.RotateTimeline.ENTRIES),d=u[f+t.RotateTimeline.PREV_ROTATION],g=u[f],m=h.getCurvePercent((f>>1)-1,1-(r-g)/(u[f+t.RotateTimeline.PREV_TIME]-g));p=u[f+t.RotateTimeline.ROTATION]-d,p=d+(p-=360*(16384-(16384.499999999996-p/360|0)))*m+c.data.rotation,p-=360*(16384-(16384.499999999996-p/360|0))}var v=o==t.MixPose.setup?c.data.rotation:c.rotation,y=0,_=p-v;if(0==_)y=s[a];else{_-=360*(16384-(16384.499999999996-_/360|0));var x=0,b=0;l?(x=0,b=_):(x=s[a],b=s[a+1]);var T=_>0,w=x>=0;t.MathUtils.signum(b)!=t.MathUtils.signum(_)&&Math.abs(b)<=90&&(Math.abs(x)>180&&(x+=360*t.MathUtils.signum(x)),w=T),y=_+x-x%360,w!=T&&(y+=360*t.MathUtils.signum(x)),s[a]=y}s[a+1]=_,v+=y*n,c.rotation=v-360*(16384-(16384.499999999996-v/360|0))}}else e.apply(i,0,r,null,1,o,t.MixDirection.in)},e.prototype.queueEvents=function(t,e){for(var i=t.animationStart,r=t.animationEnd,n=r-i,o=t.trackLast%n,s=this.events,a=0,l=s.length;a<l;a++){var h=s[a];if(h.time<o)break;h.time>r||this.queue.event(t,h)}for((t.loop?o>t.trackTime%n:e>=r&&t.animationLast<r)&&this.queue.complete(t);a<l;a++){s[a].time<i||this.queue.event(t,s[a])}},e.prototype.clearTracks=function(){var t=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var e=0,i=this.tracks.length;e<i;e++)this.clearTrack(e);this.tracks.length=0,this.queue.drainDisabled=t,this.queue.drain()},e.prototype.clearTrack=function(t){if(!(t>=this.tracks.length)){var e=this.tracks[t];if(null!=e){this.queue.end(e),this.disposeNext(e);for(var i=e;;){var r=i.mixingFrom;if(null==r)break;this.queue.end(r),i.mixingFrom=null,i=r}this.tracks[e.trackIndex]=null,this.queue.drain()}}},e.prototype.setCurrent=function(t,e,i){var r=this.expandToIndex(t);this.tracks[t]=e,null!=r&&(i&&this.queue.interrupt(r),e.mixingFrom=r,e.mixTime=0,null!=r.mixingFrom&&r.mixDuration>0&&(e.interruptAlpha*=Math.min(1,r.mixTime/r.mixDuration)),r.timelinesRotation.length=0),this.queue.start(e)},e.prototype.setAnimation=function(t,e,i){var r=this.data.skeletonData.findAnimation(e);if(null==r)throw new Error("Animation not found: "+e);return this.setAnimationWith(t,r,i)},e.prototype.setAnimationWith=function(t,e,i){if(null==e)throw new Error("animation cannot be null.");var r=!0,n=this.expandToIndex(t);null!=n&&(-1==n.nextTrackLast?(this.tracks[t]=n.mixingFrom,this.queue.interrupt(n),this.queue.end(n),this.disposeNext(n),n=n.mixingFrom,r=!1):this.disposeNext(n));var o=this.trackEntry(t,e,i,n);return this.setCurrent(t,o,r),this.queue.drain(),o},e.prototype.addAnimation=function(t,e,i,r){var n=this.data.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);return this.addAnimationWith(t,n,i,r)},e.prototype.addAnimationWith=function(t,e,i,r){if(null==e)throw new Error("animation cannot be null.");var n=this.expandToIndex(t);if(null!=n)for(;null!=n.next;)n=n.next;var o=this.trackEntry(t,e,i,n);if(null==n)this.setCurrent(t,o,!0),this.queue.drain();else if(n.next=o,r<=0){var s=n.animationEnd-n.animationStart;0!=s?(n.loop?r+=s*(1+(n.trackTime/s|0)):r+=s,r-=this.data.getMix(n.animation,e)):r=0}return o.delay=r,o},e.prototype.setEmptyAnimation=function(t,i){var r=this.setAnimationWith(t,e.emptyAnimation,!1);return r.mixDuration=i,r.trackEnd=i,r},e.prototype.addEmptyAnimation=function(t,i,r){r<=0&&(r-=i);var n=this.addAnimationWith(t,e.emptyAnimation,!1,r);return n.mixDuration=i,n.trackEnd=i,n},e.prototype.setEmptyAnimations=function(t){var e=this.queue.drainDisabled;this.queue.drainDisabled=!0;for(var i=0,r=this.tracks.length;i<r;i++){var n=this.tracks[i];null!=n&&this.setEmptyAnimation(n.trackIndex,t)}this.queue.drainDisabled=e,this.queue.drain()},e.prototype.expandToIndex=function(e){return e<this.tracks.length?this.tracks[e]:(t.Utils.ensureArrayCapacity(this.tracks,e-this.tracks.length+1,null),this.tracks.length=e+1,null)},e.prototype.trackEntry=function(t,e,i,r){var n=this.trackEntryPool.obtain();return n.trackIndex=t,n.animation=e,n.loop=i,n.eventThreshold=0,n.attachmentThreshold=0,n.drawOrderThreshold=0,n.animationStart=0,n.animationEnd=e.duration,n.animationLast=-1,n.nextAnimationLast=-1,n.delay=0,n.trackTime=0,n.trackLast=-1,n.nextTrackLast=-1,n.trackEnd=Number.MAX_VALUE,n.timeScale=1,n.alpha=1,n.interruptAlpha=1,n.mixTime=0,n.mixDuration=null==r?0:this.data.getMix(r.animation,e),n},e.prototype.disposeNext=function(t){for(var e=t.next;null!=e;)this.queue.dispose(e),e=e.next;t.next=null},e.prototype._animationsChanged=function(){this.animationsChanged=!1;var t=this.propertyIDs;t.clear();for(var e=this.mixingTo,i=0,r=this.tracks.length;i<r;i++){var n=this.tracks[i];null!=n&&n.setTimelineData(null,e,t)}},e.prototype.getCurrent=function(t){return t>=this.tracks.length?null:this.tracks[t]},e.prototype.addListener=function(t){if(null==t)throw new Error("listener cannot be null.");this.listeners.push(t)},e.prototype.removeListener=function(t){var e=this.listeners.indexOf(t);e>=0&&this.listeners.splice(e,1)},e.prototype.clearListeners=function(){this.listeners.length=0},e.prototype.clearListenerNotifications=function(){this.queue.clear()},e.prototype.setAnimationByName=function(t,i,r){e.deprecatedWarning1||(e.deprecatedWarning1=!0),this.setAnimation(t,i,r)},e.prototype.addAnimationByName=function(t,i,r,n){e.deprecatedWarning2||(e.deprecatedWarning2=!0),this.addAnimation(t,i,r,n)},e.prototype.hasAnimation=function(t){return null!==this.data.skeletonData.findAnimation(t)},e.prototype.hasAnimationByName=function(t){return e.deprecatedWarning3||(e.deprecatedWarning3=!0),this.hasAnimation(t)},e.emptyAnimation=new t.Animation("<empty>",[],0),e.SUBSEQUENT=0,e.FIRST=1,e.DIP=2,e.DIP_MIX=3,e.deprecatedWarning1=!1,e.deprecatedWarning2=!1,e.deprecatedWarning3=!1,e}();t.AnimationState=e;var i=function(){function i(){this.timelineData=new Array,this.timelineDipMix=new Array,this.timelinesRotation=new Array}return i.prototype.reset=function(){this.next=null,this.mixingFrom=null,this.animation=null,this.listener=null,this.timelineData.length=0,this.timelineDipMix.length=0,this.timelinesRotation.length=0},i.prototype.setTimelineData=function(i,r,n){null!=i&&r.push(i);var o=null!=this.mixingFrom?this.mixingFrom.setTimelineData(this,r,n):this;null!=i&&r.pop();var s=r,a=r.length-1,l=this.animation.timelines,h=this.animation.timelines.length,u=t.Utils.setArraySize(this.timelineData,h);this.timelineDipMix.length=0;var c=t.Utils.setArraySize(this.timelineDipMix,h);t:for(var p=0;p<h;p++){var f=l[p].getPropertyId();if(n.add(f))if(null!=i&&i.hasTimeline(f)){for(var d=a;d>=0;d--){var g=s[d];if(!g.hasTimeline(f)&&g.mixDuration>0){u[p]=e.DIP_MIX,c[p]=g;continue t}}u[p]=e.DIP}else u[p]=e.FIRST;else u[p]=e.SUBSEQUENT}return o},i.prototype.hasTimeline=function(t){for(var e=this.animation.timelines,i=0,r=e.length;i<r;i++)if(e[i].getPropertyId()==t)return!0;return!1},i.prototype.getAnimationTime=function(){if(this.loop){var t=this.animationEnd-this.animationStart;return 0==t?this.animationStart:this.trackTime%t+this.animationStart}return Math.min(this.trackTime+this.animationStart,this.animationEnd)},i.prototype.setAnimationLast=function(t){this.animationLast=t,this.nextAnimationLast=t},i.prototype.isComplete=function(){return this.trackTime>=this.animationEnd-this.animationStart},i.prototype.resetRotationDirections=function(){this.timelinesRotation.length=0},Object.defineProperty(i.prototype,"time",{get:function(){return i.deprecatedWarning1||(i.deprecatedWarning1=!0),this.trackTime},set:function(t){i.deprecatedWarning1||(i.deprecatedWarning1=!0),this.trackTime=t},enumerable:!0,configurable:!0}),Object.defineProperty(i.prototype,"endTime",{get:function(){return i.deprecatedWarning2||(i.deprecatedWarning2=!0),this.trackTime},set:function(t){i.deprecatedWarning2||(i.deprecatedWarning2=!0),this.trackTime=t},enumerable:!0,configurable:!0}),i.prototype.loopsCount=function(){return Math.floor(this.trackTime/this.trackEnd)},i.deprecatedWarning1=!1,i.deprecatedWarning2=!1,i}();t.TrackEntry=i;var r,n=function(){function e(t){this.objects=[],this.drainDisabled=!1,this.animState=t}return e.prototype.start=function(t){this.objects.push(r.start),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.interrupt=function(t){this.objects.push(r.interrupt),this.objects.push(t)},e.prototype.end=function(t){this.objects.push(r.end),this.objects.push(t),this.animState.animationsChanged=!0},e.prototype.dispose=function(t){this.objects.push(r.dispose),this.objects.push(t)},e.prototype.complete=function(t){this.objects.push(r.complete),this.objects.push(t)},e.prototype.event=function(t,e){this.objects.push(r.event),this.objects.push(t),this.objects.push(e)},e.prototype.deprecateStuff=function(){return e.deprecatedWarning1||(e.deprecatedWarning1=!0),!0},e.prototype.drain=function(){if(!this.drainDisabled){this.drainDisabled=!0;for(var e=this.objects,i=this.animState.listeners,n=0;n<e.length;n+=2){var o=e[n],s=e[n+1];switch(o){case r.start:null!=s.listener&&s.listener.start&&s.listener.start(s);for(var a=0;a<i.length;a++)i[a].start&&i[a].start(s);s.onStart&&this.deprecateStuff()&&s.onStart(s.trackIndex),this.animState.onStart&&this.deprecateStuff()&&this.deprecateStuff&&this.animState.onStart(s.trackIndex);break;case r.interrupt:null!=s.listener&&s.listener.interrupt&&s.listener.interrupt(s);for(a=0;a<i.length;a++)i[a].interrupt&&i[a].interrupt(s);break;case r.end:null!=s.listener&&s.listener.end&&s.listener.end(s);for(a=0;a<i.length;a++)i[a].end&&i[a].end(s);s.onEnd&&this.deprecateStuff()&&s.onEnd(s.trackIndex),this.animState.onEnd&&this.deprecateStuff()&&this.animState.onEnd(s.trackIndex);case r.dispose:null!=s.listener&&s.listener.dispose&&s.listener.dispose(s);for(a=0;a<i.length;a++)i[a].dispose&&i[a].dispose(s);this.animState.trackEntryPool.free(s);break;case r.complete:null!=s.listener&&s.listener.complete&&s.listener.complete(s);for(a=0;a<i.length;a++)i[a].complete&&i[a].complete(s);var l=t.MathUtils.toInt(s.loopsCount());s.onComplete&&this.deprecateStuff()&&s.onComplete(s.trackIndex,l),this.animState.onComplete&&this.deprecateStuff()&&this.animState.onComplete(s.trackIndex,l);break;case r.event:var h=e[2+n++];null!=s.listener&&s.listener.event&&s.listener.event(s,h);for(a=0;a<i.length;a++)i[a].event&&i[a].event(s,h);s.onEvent&&this.deprecateStuff()&&s.onEvent(s.trackIndex,h),this.animState.onEvent&&this.deprecateStuff()&&this.animState.onEvent(s.trackIndex,h)}}this.clear(),this.drainDisabled=!1}},e.prototype.clear=function(){this.objects.length=0},e.deprecatedWarning1=!1,e}();t.EventQueue=n,function(t){t[t.start=0]="start",t[t.interrupt=1]="interrupt",t[t.end=2]="end",t[t.dispose=3]="dispose",t[t.complete=4]="complete",t[t.event=5]="event"}(r=t.EventType||(t.EventType={}));var o=function(){function t(){}return t.prototype.start=function(t){},t.prototype.interrupt=function(t){},t.prototype.end=function(t){},t.prototype.dispose=function(t){},t.prototype.complete=function(t){},t.prototype.event=function(t,e){},t}();t.AnimationStateAdapter2=o}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function t(t){if(this.animationToMixTime={},this.defaultMix=0,null==t)throw new Error("skeletonData cannot be null.");this.skeletonData=t}return t.prototype.setMix=function(t,e,i){var r=this.skeletonData.findAnimation(t);if(null==r)throw new Error("Animation not found: "+t);var n=this.skeletonData.findAnimation(e);if(null==n)throw new Error("Animation not found: "+e);this.setMixWith(r,n,i)},t.prototype.setMixByName=function(e,i,r){t.deprecatedWarning1||(t.deprecatedWarning1=!0),this.setMix(e,i,r)},t.prototype.setMixWith=function(t,e,i){if(null==t)throw new Error("from cannot be null.");if(null==e)throw new Error("to cannot be null.");var r=t.name+"."+e.name;this.animationToMixTime[r]=i},t.prototype.getMix=function(t,e){var i=t.name+"."+e.name,r=this.animationToMixTime[i];return void 0===r?this.defaultMix:r},t.deprecatedWarning1=!1,t}();t.AnimationStateData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t){this.atlas=t}return e.prototype.newRegionAttachment=function(e,i,r){var n=this.atlas.findRegion(r);if(null==n)throw new Error("Region not found in atlas: "+r+" (region attachment: "+i+")");var o=new t.RegionAttachment(i);return o.region=n,o},e.prototype.newMeshAttachment=function(e,i,r){var n=this.atlas.findRegion(r);if(null==n)throw new Error("Region not found in atlas: "+r+" (mesh attachment: "+i+")");var o=new t.MeshAttachment(i);return o.region=n,o},e.prototype.newBoundingBoxAttachment=function(e,i){return new t.BoundingBoxAttachment(i)},e.prototype.newPathAttachment=function(e,i){return new t.PathAttachment(i)},e.prototype.newPointAttachment=function(e,i){return new t.PointAttachment(i)},e.prototype.newClippingAttachment=function(e,i){return new t.ClippingAttachment(i)},e}();t.AtlasAttachmentLoader=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){!function(t){t[t.Normal=0]="Normal",t[t.Additive=1]="Additive",t[t.Multiply=2]="Multiply",t[t.Screen=3]="Screen"}(t.BlendMode||(t.BlendMode={}))}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t,e,i){if(this.matrix=new PIXI.Matrix,this.children=new Array,this.x=0,this.y=0,this.rotation=0,this.scaleX=0,this.scaleY=0,this.shearX=0,this.shearY=0,this.ax=0,this.ay=0,this.arotation=0,this.ascaleX=0,this.ascaleY=0,this.ashearX=0,this.ashearY=0,this.appliedValid=!1,this.sorted=!1,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.skeleton=e,this.parent=i,this.setToSetupPose()}return Object.defineProperty(e.prototype,"worldX",{get:function(){return this.matrix.tx},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"worldY",{get:function(){return this.matrix.ty},enumerable:!0,configurable:!0}),e.prototype.update=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransform=function(){this.updateWorldTransformWith(this.x,this.y,this.rotation,this.scaleX,this.scaleY,this.shearX,this.shearY)},e.prototype.updateWorldTransformWith=function(i,r,n,o,s,a,l){this.ax=i,this.ay=r,this.arotation=n,this.ascaleX=o,this.ascaleY=s,this.ashearX=a,this.ashearY=l,this.appliedValid=!0;var h=this.parent,u=this.matrix;if(null==h){var c=n+90+l,p=t.MathUtils.cosDeg(n+a)*o,f=t.MathUtils.cosDeg(c)*s,d=t.MathUtils.sinDeg(n+a)*o,g=t.MathUtils.sinDeg(c)*s,m=this.skeleton;return m.flipX&&(i=-i,p=-p,f=-f),m.flipY!==e.yDown&&(r=-r,d=-d,g=-g),u.a=p,u.c=f,u.b=d,u.d=g,u.tx=i+m.x,void(u.ty=r+m.y)}var v=h.matrix.a,y=h.matrix.c,_=h.matrix.b,x=h.matrix.d;switch(u.tx=v*i+y*r+h.matrix.tx,u.ty=_*i+x*r+h.matrix.ty,this.data.transformMode){case t.TransformMode.Normal:c=n+90+l,p=t.MathUtils.cosDeg(n+a)*o,f=t.MathUtils.cosDeg(c)*s,d=t.MathUtils.sinDeg(n+a)*o,g=t.MathUtils.sinDeg(c)*s;return u.a=v*p+y*d,u.c=v*f+y*g,u.b=_*p+x*d,void(u.d=_*f+x*g);case t.TransformMode.OnlyTranslation:c=n+90+l;u.a=t.MathUtils.cosDeg(n+a)*o,u.c=t.MathUtils.cosDeg(c)*s,u.b=t.MathUtils.sinDeg(n+a)*o,u.d=t.MathUtils.sinDeg(c)*s;break;case t.TransformMode.NoRotationOrReflection:var b=0;(S=v*v+_*_)>1e-4?(y=_*(S=Math.abs(v*x-y*_)/S),x=v*S,b=Math.atan2(_,v)*t.MathUtils.radDeg):(v=0,_=0,b=90-Math.atan2(x,y)*t.MathUtils.radDeg);var T=n+a-b,w=n+l-b+90;p=t.MathUtils.cosDeg(T)*o,f=t.MathUtils.cosDeg(w)*s,d=t.MathUtils.sinDeg(T)*o,g=t.MathUtils.sinDeg(w)*s;u.a=v*p-y*d,u.c=v*f-y*g,u.b=_*p+x*d,u.d=_*f+x*g;break;case t.TransformMode.NoScale:case t.TransformMode.NoScaleOrReflection:var S,A=t.MathUtils.cosDeg(n),P=t.MathUtils.sinDeg(n),E=v*A+y*P,C=_*A+x*P;(S=Math.sqrt(E*E+C*C))>1e-5&&(S=1/S),E*=S,C*=S,S=Math.sqrt(E*E+C*C);var O=Math.PI/2+Math.atan2(C,E),I=Math.cos(O)*S,M=Math.sin(O)*S;p=t.MathUtils.cosDeg(a)*o,f=t.MathUtils.cosDeg(90+l)*s,d=t.MathUtils.sinDeg(a)*o,g=t.MathUtils.sinDeg(90+l)*s;return u.a=E*p+I*d,u.c=E*f+I*g,u.b=C*p+M*d,u.d=C*f+M*g,void((this.data.transformMode!=t.TransformMode.NoScaleOrReflection?v*x-y*_<0:this.skeleton.flipX!=this.skeleton.flipY!=e.yDown)&&(u.c=-u.c,u.d=-u.d))}this.skeleton.flipX&&(u.a=-u.a,u.c=-u.c),this.skeleton.flipY!=e.yDown&&(u.b=-u.b,u.d=-u.d)},e.prototype.setToSetupPose=function(){var t=this.data;this.x=t.x,this.y=t.y,this.rotation=t.rotation,this.scaleX=t.scaleX,this.scaleY=t.scaleY,this.shearX=t.shearX,this.shearY=t.shearY},e.prototype.getWorldRotationX=function(){return Math.atan2(this.matrix.b,this.matrix.a)*t.MathUtils.radDeg},e.prototype.getWorldRotationY=function(){return Math.atan2(this.matrix.d,this.matrix.c)*t.MathUtils.radDeg},e.prototype.getWorldScaleX=function(){var t=this.matrix;return Math.sqrt(t.a*t.a+t.c*t.c)},e.prototype.getWorldScaleY=function(){var t=this.matrix;return Math.sqrt(t.b*t.b+t.d*t.d)},e.prototype.updateAppliedTransform=function(){this.appliedValid=!0;var e=this.parent,i=this.matrix;if(null==e)return this.ax=i.tx,this.ay=i.ty,this.arotation=Math.atan2(i.b,i.a)*t.MathUtils.radDeg,this.ascaleX=Math.sqrt(i.a*i.a+i.b*i.b),this.ascaleY=Math.sqrt(i.c*i.c+i.d*i.d),this.ashearX=0,void(this.ashearY=Math.atan2(i.a*i.c+i.b*i.d,i.a*i.d-i.b*i.c)*t.MathUtils.radDeg);var r=e.matrix,n=1/(r.a*r.d-r.b*r.c),o=i.tx-r.tx,s=i.ty-r.ty;this.ax=o*r.d*n-s*r.c*n,this.ay=s*r.a*n-o*r.b*n;var a=n*r.d,l=n*r.a,h=n*r.c,u=n*r.b,c=a*i.a-h*i.b,p=a*i.c-h*i.d,f=l*i.b-u*i.a,d=l*i.d-u*i.c;if(this.ashearX=0,this.ascaleX=Math.sqrt(c*c+f*f),this.ascaleX>1e-4){var g=c*d-p*f;this.ascaleY=g/this.ascaleX,this.ashearY=Math.atan2(c*p+f*d,g)*t.MathUtils.radDeg,this.arotation=Math.atan2(f,c)*t.MathUtils.radDeg}else this.ascaleX=0,this.ascaleY=Math.sqrt(p*p+d*d),this.ashearY=0,this.arotation=90-Math.atan2(d,p)*t.MathUtils.radDeg},e.prototype.worldToLocal=function(t){var e=this.matrix,i=e.a,r=e.c,n=e.b,o=e.d,s=1/(i*o-r*n),a=t.x-e.tx,l=t.y-e.ty;return t.x=a*o*s-l*r*s,t.y=l*i*s-a*n*s,t},e.prototype.localToWorld=function(t){var e=this.matrix,i=t.x,r=t.y;return t.x=i*e.a+r*e.c+e.tx,t.y=i*e.b+r*e.d+e.ty,t},e.prototype.worldToLocalRotation=function(e){var i=t.MathUtils.sinDeg(e),r=t.MathUtils.cosDeg(e),n=this.matrix;return Math.atan2(n.a*i-n.b*r,n.d*r-n.c*i)*t.MathUtils.radDeg},e.prototype.localToWorldRotation=function(e){var i=t.MathUtils.sinDeg(e),r=t.MathUtils.cosDeg(e),n=this.matrix;return Math.atan2(r*n.b+i*n.d,r*n.a+i*n.c)*t.MathUtils.radDeg},e.prototype.rotateWorld=function(e){var i=this.matrix,r=i.a,n=i.c,o=i.b,s=i.d,a=t.MathUtils.cosDeg(e),l=t.MathUtils.sinDeg(e);i.a=a*r-l*o,i.c=a*n-l*s,i.b=l*r+a*o,i.d=l*n+a*s,this.appliedValid=!1},e.yDown=!1,e}();t.Bone=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e,i=function(t,i,r){if(this.x=0,this.y=0,this.rotation=0,this.scaleX=1,this.scaleY=1,this.shearX=0,this.shearY=0,this.transformMode=e.Normal,t<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");this.index=t,this.name=i,this.parent=r};t.BoneData=i,function(t){t[t.Normal=0]="Normal",t[t.OnlyTranslation=1]="OnlyTranslation",t[t.NoRotationOrReflection=2]="NoRotationOrReflection",t[t.NoScale=3]="NoScale",t[t.NoScaleOrReflection=4]="NoScaleOrReflection"}(e=t.TransformMode||(t.TransformMode={}))}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t,e){if(null==e)throw new Error("data cannot be null.");this.time=t,this.data=e};t.Event=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){this.name=t};t.EventData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t,e){if(this.mix=1,this.bendDirection=0,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.mix=t.mix,this.bendDirection=t.bendDirection,this.bones=new Array;for(var i=0;i<t.bones.length;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findBone(t.target.name)}return e.prototype.getOrder=function(){return this.data.order},e.prototype.apply=function(){this.update()},e.prototype.update=function(){var t=this.target,e=this.bones;switch(e.length){case 1:this.apply1(e[0],t.worldX,t.worldY,this.mix);break;case 2:this.apply2(e[0],e[1],t.worldX,t.worldY,this.bendDirection,this.mix)}},e.prototype.apply1=function(e,i,r,n){e.appliedValid||e.updateAppliedTransform();var o=e.parent.matrix,s=1/(o.a*o.d-o.b*o.c),a=i-o.tx,l=r-o.ty,h=(a*o.d-l*o.c)*s-e.ax,u=(l*o.a-a*o.b)*s-e.ay,c=Math.atan2(u,h)*t.MathUtils.radDeg-e.ashearX-e.arotation;e.ascaleX<0&&(c+=180),c>180?c-=360:c<-180&&(c+=360),e.updateWorldTransformWith(e.ax,e.ay,e.arotation+c*n,e.ascaleX,e.ascaleY,e.ashearX,e.ashearY)},e.prototype.apply2=function(e,i,r,n,o,s){if(0!=s){e.appliedValid||e.updateAppliedTransform(),i.appliedValid||i.updateAppliedTransform();var a=e.ax,l=e.ay,h=e.ascaleX,u=e.ascaleY,c=i.ascaleX,p=e.matrix,f=0,d=0,g=0;h<0?(h=-h,f=180,g=-1):(f=0,g=1),u<0&&(u=-u,g=-g),c<0?(c=-c,d=180):d=0;var m=i.ax,v=0,y=0,_=0,x=p.a,b=p.c,T=p.b,w=p.d,S=Math.abs(h-u)<=1e-4;S?(y=x*m+b*(v=i.ay)+p.tx,_=T*m+w*v+p.ty):(v=0,y=x*m+p.tx,_=T*m+p.ty);var A=e.parent.matrix;x=A.a,b=A.c,T=A.b;var P=1/(x*(w=A.d)-b*T),E=r-A.tx,C=n-A.ty,O=(E*w-C*b)*P-a,I=(C*x-E*T)*P-l,M=((E=y-A.tx)*w-(C=_-A.ty)*b)*P-a,R=(C*x-E*T)*P-l,D=Math.sqrt(M*M+R*R),k=i.data.length*c,L=0,N=0;t:if(S){var F=(O*O+I*I-D*D-(k*=h)*k)/(2*D*k);F<-1?F=-1:F>1&&(F=1),N=Math.acos(F)*o,x=D+k*F,b=k*Math.sin(N),L=Math.atan2(I*x-O*b,O*x+I*b)}else{var B=(x=h*k)*x,j=(b=u*k)*b,U=O*O+I*I,X=Math.atan2(I,O),G=-2*j*D,W=j-B;if((w=G*G-4*W*(T=j*D*D+B*U-B*j))>=0){var V=Math.sqrt(w);G<0&&(V=-V);var z=(V=-(G+V)/2)/W,H=T/V,Y=Math.abs(z)<Math.abs(H)?z:H;if(Y*Y<=U){C=Math.sqrt(U-Y*Y)*o,L=X-Math.atan2(C,Y),N=Math.atan2(C/u,(Y-D)/h);break t}}var q=t.MathUtils.PI,K=D-x,Z=K*K,Q=0,J=0,$=D+x,tt=$*$,et=0;(T=-x*D/(B-j))>=-1&&T<=1&&(T=Math.acos(T),(w=(E=x*Math.cos(T)+D)*E+(C=b*Math.sin(T))*C)<Z&&(q=T,Z=w,K=E,Q=C),w>tt&&(J=T,tt=w,$=E,et=C)),U<=(Z+tt)/2?(L=X-Math.atan2(Q*o,K),N=q*o):(L=X-Math.atan2(et*o,$),N=J*o)}var it=Math.atan2(v,m)*g,rt=e.arotation;(L=(L-it)*t.MathUtils.radDeg+f-rt)>180?L-=360:L<-180&&(L+=360),e.updateWorldTransformWith(a,l,rt+L*s,e.ascaleX,e.ascaleY,0,0),rt=i.arotation,(N=((N+it)*t.MathUtils.radDeg-i.ashearX)*g+d-rt)>180?N-=360:N<-180&&(N+=360),i.updateWorldTransformWith(m,v,rt+N*s,i.ascaleX,i.ascaleY,i.ashearX,i.ashearY)}else i.updateWorldTransform()},e}();t.IkConstraint=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){this.order=0,this.bones=new Array,this.bendDirection=1,this.mix=1,this.name=t};t.IkConstraintData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t,e){if(this.position=0,this.spacing=0,this.rotateMix=0,this.translateMix=0,this.spaces=new Array,this.positions=new Array,this.world=new Array,this.curves=new Array,this.lengths=new Array,this.segments=new Array,null==t)throw new Error("data cannot be null.");if(null==e)throw new Error("skeleton cannot be null.");this.data=t,this.bones=new Array;for(var i=0,r=t.bones.length;i<r;i++)this.bones.push(e.findBone(t.bones[i].name));this.target=e.findSlot(t.target.name),this.position=t.position,this.spacing=t.spacing,this.rotateMix=t.rotateMix,this.translateMix=t.translateMix}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){var i=this.target.getAttachment();if(i instanceof t.PathAttachment){var r=this.rotateMix,n=this.translateMix,o=r>0;if(n>0||o){var s=this.data,a=s.spacingMode,l=a==t.SpacingMode.Length,h=s.rotateMode,u=h==t.RotateMode.Tangent,c=h==t.RotateMode.ChainScale,p=this.bones.length,f=u?p:p+1,d=this.bones,g=t.Utils.setArraySize(this.spaces,f),m=null,v=this.spacing;if(c||l){c&&(m=t.Utils.setArraySize(this.lengths,p));for(var y=0,_=f-1;y<_;){var x=(I=d[y]).data.length;if(x<e.epsilon)c&&(m[y]=0),g[++y]=0;else{var b=x*I.matrix.a,T=x*I.matrix.b,w=Math.sqrt(b*b+T*T);c&&(m[y]=w),g[++y]=(l?x+v:v)*w/x}}}else for(y=1;y<f;y++)g[y]=v;var S=this.computeWorldPositions(i,f,u,s.positionMode==t.PositionMode.Percent,a==t.SpacingMode.Percent),A=S[0],P=S[1],E=s.offsetRotation,C=!1;if(0==E)C=h==t.RotateMode.Chain;else C=!1,E*=(O=this.target.bone.matrix).a*O.d-O.b*O.c>0?t.MathUtils.degRad:-t.MathUtils.degRad;y=0;for(var O=3;y<p;y++,O+=3){var I,M=(I=d[y]).matrix;M.tx+=(A-M.tx)*n,M.ty+=(P-M.ty)*n;var R=(b=S[O])-A,D=(T=S[O+1])-P;if(c){var k=m[y];if(0!=k){var L=(Math.sqrt(R*R+D*D)/k-1)*r+1;M.a*=L,M.b*=L}}if(A=b,P=T,o){var N=M.a,F=M.c,B=M.b,j=M.d,U=0,X=0,G=0;if(U=u?S[O-1]:0==g[y+1]?S[O+2]:Math.atan2(D,R),U-=Math.atan2(B,N),C){X=Math.cos(U),G=Math.sin(U);var W=I.data.length;A+=(W*(X*N-G*B)-R)*r,P+=(W*(G*N+X*B)-D)*r}else U+=E;U>t.MathUtils.PI?U-=t.MathUtils.PI2:U<-t.MathUtils.PI&&(U+=t.MathUtils.PI2),U*=r,X=Math.cos(U),G=Math.sin(U),M.a=X*N-G*B,M.c=X*F-G*j,M.b=G*N+X*B,M.d=G*F+X*j}I.appliedValid=!1}}}},e.prototype.computeWorldPositions=function(i,r,n,o,s){var a=this.target,l=this.position,h=this.spaces,u=t.Utils.setArraySize(this.positions,3*r+2),c=null,p=i.closed,f=i.worldVerticesLength,d=f/6,g=e.NONE;if(!i.constantSpeed){var m=i.lengths,v=m[d-=p?1:2];if(o&&(l*=v),s)for(var y=0;y<r;y++)h[y]*=v;c=t.Utils.setArraySize(this.world,8);y=0;for(var _=0,x=0;y<r;y++,_+=3){var b=l+=z=h[y];if(p)(b%=v)<0&&(b+=v),x=0;else{if(b<0){g!=e.BEFORE&&(g=e.BEFORE,i.computeWorldVertices(a,2,4,c,0,2)),this.addBeforePosition(b,c,0,u,_);continue}if(b>v){g!=e.AFTER&&(g=e.AFTER,i.computeWorldVertices(a,f-6,4,c,0,2)),this.addAfterPosition(b-v,c,0,u,_);continue}}for(;;x++){var T=m[x];if(!(b>T)){if(0==x)b/=T;else b=(b-(K=m[x-1]))/(T-K);break}}x!=g&&(g=x,p&&x==d?(i.computeWorldVertices(a,f-4,4,c,0,2),i.computeWorldVertices(a,0,4,c,4,2)):i.computeWorldVertices(a,6*x+2,8,c,0,2)),this.addCurvePosition(b,c[0],c[1],c[2],c[3],c[4],c[5],c[6],c[7],u,_,n||y>0&&0==z)}return u}p?(f+=2,c=t.Utils.setArraySize(this.world,f),i.computeWorldVertices(a,2,f-4,c,0,2),i.computeWorldVertices(a,0,2,c,f-4,2),c[f-2]=c[0],c[f-1]=c[1]):(d--,f-=4,c=t.Utils.setArraySize(this.world,f),i.computeWorldVertices(a,2,f,c,0,2));for(var w=t.Utils.setArraySize(this.curves,d),S=0,A=c[0],P=c[1],E=0,C=0,O=0,I=0,M=0,R=0,D=0,k=0,L=0,N=0,F=0,B=0,j=0,U=0,X=(y=0,2);y<d;y++,X+=6)E=c[X],C=c[X+1],O=c[X+2],I=c[X+3],F=2*(D=.1875*(A-2*E+O))+(L=.09375*(3*(E-O)-A+(M=c[X+4]))),B=2*(k=.1875*(P-2*C+I))+(N=.09375*(3*(C-I)-P+(R=c[X+5]))),j=.75*(E-A)+D+.16666667*L,U=.75*(C-P)+k+.16666667*N,S+=Math.sqrt(j*j+U*U),j+=F,U+=B,F+=L,B+=N,S+=Math.sqrt(j*j+U*U),j+=F,U+=B,S+=Math.sqrt(j*j+U*U),j+=F+L,U+=B+N,S+=Math.sqrt(j*j+U*U),w[y]=S,A=M,P=R;if(o&&(l*=S),s)for(y=0;y<r;y++)h[y]*=S;for(var G=this.segments,W=0,V=(y=0,_=0,x=0,0);y<r;y++,_+=3){var z;b=l+=z=h[y];if(p)(b%=S)<0&&(b+=S),x=0;else{if(b<0){this.addBeforePosition(b,c,0,u,_);continue}if(b>S){this.addAfterPosition(b-S,c,f-4,u,_);continue}}for(;;x++){var H=w[x];if(!(b>H)){if(0==x)b/=H;else b=(b-(K=w[x-1]))/(H-K);break}}if(x!=g){g=x;var Y=6*x;for(A=c[Y],P=c[Y+1],E=c[Y+2],C=c[Y+3],O=c[Y+4],I=c[Y+5],F=2*(D=.03*(A-2*E+O))+(L=.006*(3*(E-O)-A+(M=c[Y+6]))),B=2*(k=.03*(P-2*C+I))+(N=.006*(3*(C-I)-P+(R=c[Y+7]))),j=.3*(E-A)+D+.16666667*L,U=.3*(C-P)+k+.16666667*N,W=Math.sqrt(j*j+U*U),G[0]=W,Y=1;Y<8;Y++)j+=F,U+=B,F+=L,B+=N,W+=Math.sqrt(j*j+U*U),G[Y]=W;j+=F,U+=B,W+=Math.sqrt(j*j+U*U),G[8]=W,j+=F+L,U+=B+N,W+=Math.sqrt(j*j+U*U),G[9]=W,V=0}for(b*=W;;V++){var q=G[V];if(!(b>q)){var K;if(0==V)b/=q;else b=V+(b-(K=G[V-1]))/(q-K);break}}this.addCurvePosition(.1*b,A,P,E,C,O,I,M,R,u,_,n||y>0&&0==z)}return u},e.prototype.addBeforePosition=function(t,e,i,r,n){var o=e[i],s=e[i+1],a=e[i+2]-o,l=e[i+3]-s,h=Math.atan2(l,a);r[n]=o+t*Math.cos(h),r[n+1]=s+t*Math.sin(h),r[n+2]=h},e.prototype.addAfterPosition=function(t,e,i,r,n){var o=e[i+2],s=e[i+3],a=o-e[i],l=s-e[i+1],h=Math.atan2(l,a);r[n]=o+t*Math.cos(h),r[n+1]=s+t*Math.sin(h),r[n+2]=h},e.prototype.addCurvePosition=function(t,e,i,r,n,o,s,a,l,h,u,c){(0==t||isNaN(t))&&(t=1e-4);var p=t*t,f=p*t,d=1-t,g=d*d,m=g*d,v=d*t,y=3*v,_=d*y,x=y*t,b=e*m+r*_+o*x+a*f,T=i*m+n*_+s*x+l*f;h[u]=b,h[u+1]=T,c&&(h[u+2]=Math.atan2(T-(i*g+n*v*2+s*p),b-(e*g+r*v*2+o*p)))},e.prototype.getOrder=function(){return this.data.order},e.NONE=-1,e.BEFORE=-2,e.AFTER=-3,e.epsilon=1e-5,e}();t.PathConstraint=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){this.order=0,this.bones=new Array,this.name=t};t.PathConstraintData=e,function(t){t[t.Fixed=0]="Fixed",t[t.Percent=1]="Percent"}(t.PositionMode||(t.PositionMode={})),function(t){t[t.Length=0]="Length",t[t.Fixed=1]="Fixed",t[t.Percent=2]="Percent"}(t.SpacingMode||(t.SpacingMode={})),function(t){t[t.Tangent=0]="Tangent",t[t.Chain=1]="Chain",t[t.ChainScale=2]="ChainScale"}(t.RotateMode||(t.RotateMode={}))}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(e){if(this._updateCache=new Array,this.updateCacheReset=new Array,this.time=0,this.flipX=!1,this.flipY=!1,this.x=0,this.y=0,null==e)throw new Error("data cannot be null.");this.data=e,this.bones=new Array;for(var i=0;i<e.bones.length;i++){var r=e.bones[i],n=void 0;if(null==r.parent)n=new t.Bone(r,this,null);else{var o=this.bones[r.parent.index];n=new t.Bone(r,this,o),o.children.push(n)}this.bones.push(n)}this.slots=new Array,this.drawOrder=new Array;for(i=0;i<e.slots.length;i++){var s=e.slots[i],a=(n=this.bones[s.boneData.index],new t.Slot(s,n));this.slots.push(a),this.drawOrder.push(a)}this.ikConstraints=new Array;for(i=0;i<e.ikConstraints.length;i++){var l=e.ikConstraints[i];this.ikConstraints.push(new t.IkConstraint(l,this))}this.transformConstraints=new Array;for(i=0;i<e.transformConstraints.length;i++){var h=e.transformConstraints[i];this.transformConstraints.push(new t.TransformConstraint(h,this))}this.pathConstraints=new Array;for(i=0;i<e.pathConstraints.length;i++){var u=e.pathConstraints[i];this.pathConstraints.push(new t.PathConstraint(u,this))}this.color=new t.Color(1,1,1,1),this.updateCache()}return e.prototype.updateCache=function(){this._updateCache.length=0,this.updateCacheReset.length=0;for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].sorted=!1;var r=this.ikConstraints,n=this.transformConstraints,o=this.pathConstraints,s=r.length,a=n.length,l=o.length,h=s+a+l;t:for(e=0;e<h;e++){for(var u=0;u<s;u++){if((c=r[u]).data.order==e){this.sortIkConstraint(c);continue t}}for(u=0;u<a;u++){if((c=n[u]).data.order==e){this.sortTransformConstraint(c);continue t}}for(u=0;u<l;u++){var c;if((c=o[u]).data.order==e){this.sortPathConstraint(c);continue t}}}for(e=0,i=t.length;e<i;e++)this.sortBone(t[e])},e.prototype.sortIkConstraint=function(t){var e=t.target;this.sortBone(e);var i=t.bones,r=i[0];if(this.sortBone(r),i.length>1){var n=i[i.length-1];this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}this._updateCache.push(t),this.sortReset(r.children),i[i.length-1].sorted=!0},e.prototype.sortPathConstraint=function(e){var i=e.target,r=i.data.index,n=i.bone;null!=this.skin&&this.sortPathConstraintAttachment(this.skin,r,n),null!=this.data.defaultSkin&&this.data.defaultSkin!=this.skin&&this.sortPathConstraintAttachment(this.data.defaultSkin,r,n);for(var o=0,s=this.data.skins.length;o<s;o++)this.sortPathConstraintAttachment(this.data.skins[o],r,n);var a=i.getAttachment();a instanceof t.PathAttachment&&this.sortPathConstraintAttachmentWith(a,n);var l=e.bones,h=l.length;for(o=0;o<h;o++)this.sortBone(l[o]);this._updateCache.push(e);for(o=0;o<h;o++)this.sortReset(l[o].children);for(o=0;o<h;o++)l[o].sorted=!0},e.prototype.sortTransformConstraint=function(t){this.sortBone(t.target);var e=t.bones,i=e.length;if(t.data.local)for(var r=0;r<i;r++){var n=e[r];this.sortBone(n.parent),this._updateCache.indexOf(n)>-1||this.updateCacheReset.push(n)}else for(r=0;r<i;r++)this.sortBone(e[r]);this._updateCache.push(t);for(var o=0;o<i;o++)this.sortReset(e[o].children);for(o=0;o<i;o++)e[o].sorted=!0},e.prototype.sortPathConstraintAttachment=function(t,e,i){var r=t.attachments[e];if(r)for(var n in r)this.sortPathConstraintAttachmentWith(r[n],i)},e.prototype.sortPathConstraintAttachmentWith=function(e,i){if(e instanceof t.PathAttachment){var r=e.bones;if(null==r)this.sortBone(i);else for(var n=this.bones,o=0;o<r.length;)for(var s=r[o++],a=o+s;o<a;o++){var l=r[o];this.sortBone(n[l])}}},e.prototype.sortBone=function(t){if(!t.sorted){var e=t.parent;null!=e&&this.sortBone(e),t.sorted=!0,this._updateCache.push(t)}},e.prototype.sortReset=function(t){for(var e=0,i=t.length;e<i;e++){var r=t[e];r.sorted&&this.sortReset(r.children),r.sorted=!1}},e.prototype.updateWorldTransform=function(){for(var t=this.updateCacheReset,e=0,i=t.length;e<i;e++){var r=t[e];r.ax=r.x,r.ay=r.y,r.arotation=r.rotation,r.ascaleX=r.scaleX,r.ascaleY=r.scaleY,r.ashearX=r.shearX,r.ashearY=r.shearY,r.appliedValid=!0}var n=this._updateCache;for(e=0,i=n.length;e<i;e++)n[e].update()},e.prototype.setToSetupPose=function(){this.setBonesToSetupPose(),this.setSlotsToSetupPose()},e.prototype.setBonesToSetupPose=function(){for(var t=this.bones,e=0,i=t.length;e<i;e++)t[e].setToSetupPose();var r=this.ikConstraints;for(e=0,i=r.length;e<i;e++){(a=r[e]).bendDirection=a.data.bendDirection,a.mix=a.data.mix}var n=this.transformConstraints;for(e=0,i=n.length;e<i;e++){var o=(a=n[e]).data;a.rotateMix=o.rotateMix,a.translateMix=o.translateMix,a.scaleMix=o.scaleMix,a.shearMix=o.shearMix}var s=this.pathConstraints;for(e=0,i=s.length;e<i;e++){var a;o=(a=s[e]).data;a.position=o.position,a.spacing=o.spacing,a.rotateMix=o.rotateMix,a.translateMix=o.translateMix}},e.prototype.setSlotsToSetupPose=function(){var e=this.slots;t.Utils.arrayCopy(e,0,this.drawOrder,0,e.length);for(var i=0,r=e.length;i<r;i++)e[i].setToSetupPose()},e.prototype.getRootBone=function(){return 0==this.bones.length?null:this.bones[0]},e.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},e.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].data.name==t)return i;return-1},e.prototype.setSkinByName=function(t){var e=this.data.findSkin(t);if(null==e)throw new Error("Skin not found: "+t);this.setSkin(e)},e.prototype.setSkin=function(t){if(null!=t)if(null!=this.skin)t.attachAll(this,this.skin);else for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i],o=n.data.attachmentName;if(null!=o){var s=t.getAttachment(i,o);null!=s&&n.setAttachment(s)}}this.skin=t},e.prototype.getAttachmentByName=function(t,e){return this.getAttachment(this.data.findSlotIndex(t),e)},e.prototype.getAttachment=function(t,e){if(null==e)throw new Error("attachmentName cannot be null.");if(null!=this.skin){var i=this.skin.getAttachment(t,e);if(null!=i)return i}return null!=this.data.defaultSkin?this.data.defaultSkin.getAttachment(t,e):null},e.prototype.setAttachment=function(t,e){if(null==t)throw new Error("slotName cannot be null.");for(var i=this.slots,r=0,n=i.length;r<n;r++){var o=i[r];if(o.data.name==t){var s=null;if(null!=e&&null==(s=this.getAttachment(r,e)))throw new Error("Attachment not found: "+e+", for slot: "+t);return void o.setAttachment(s)}}throw new Error("Slot not found: "+t)},e.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.data.name==t)return n}return null},e.prototype.getBounds=function(e,i,r){if(null==e)throw new Error("offset cannot be null.");if(null==i)throw new Error("size cannot be null.");for(var n=this.drawOrder,o=Number.POSITIVE_INFINITY,s=Number.POSITIVE_INFINITY,a=Number.NEGATIVE_INFINITY,l=Number.NEGATIVE_INFINITY,h=0,u=n.length;h<u;h++){var c=n[h],p=0,f=null,d=c.getAttachment();if(d instanceof t.RegionAttachment)p=8,f=t.Utils.setArraySize(r,p,0),d.computeWorldVertices(c.bone,f,0,2);else if(d instanceof t.MeshAttachment){var g=d;p=g.worldVerticesLength,f=t.Utils.setArraySize(r,p,0),g.computeWorldVertices(c,0,p,f,0,2)}if(null!=f)for(var m=0,v=f.length;m<v;m+=2){var y=f[m],_=f[m+1];o=Math.min(o,y),s=Math.min(s,_),a=Math.max(a,y),l=Math.max(l,_)}}e.set(o,s),i.set(a-o,l-s)},e.prototype.update=function(t){this.time+=t},e}();t.Skeleton=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(){this.minX=0,this.minY=0,this.maxX=0,this.maxY=0,this.boundingBoxes=new Array,this.polygons=new Array,this.polygonPool=new t.Pool((function(){return t.Utils.newFloatArray(16)}))}return e.prototype.update=function(e,i){if(null==e)throw new Error("skeleton cannot be null.");var r=this.boundingBoxes,n=this.polygons,o=this.polygonPool,s=e.slots,a=s.length;r.length=0,o.freeAll(n),n.length=0;for(var l=0;l<a;l++){var h=s[l],u=h.getAttachment();if(u instanceof t.BoundingBoxAttachment){var c=u;r.push(c);var p=o.obtain();p.length!=c.worldVerticesLength&&(p=t.Utils.newFloatArray(c.worldVerticesLength)),n.push(p),c.computeWorldVertices(h,0,c.worldVerticesLength,p,0,2)}}i?this.aabbCompute():(this.minX=Number.POSITIVE_INFINITY,this.minY=Number.POSITIVE_INFINITY,this.maxX=Number.NEGATIVE_INFINITY,this.maxY=Number.NEGATIVE_INFINITY)},e.prototype.aabbCompute=function(){for(var t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,i=Number.NEGATIVE_INFINITY,r=Number.NEGATIVE_INFINITY,n=this.polygons,o=0,s=n.length;o<s;o++)for(var a=n[o],l=a,h=0,u=a.length;h<u;h+=2){var c=l[h],p=l[h+1];t=Math.min(t,c),e=Math.min(e,p),i=Math.max(i,c),r=Math.max(r,p)}this.minX=t,this.minY=e,this.maxX=i,this.maxY=r},e.prototype.aabbContainsPoint=function(t,e){return t>=this.minX&&t<=this.maxX&&e>=this.minY&&e<=this.maxY},e.prototype.aabbIntersectsSegment=function(t,e,i,r){var n=this.minX,o=this.minY,s=this.maxX,a=this.maxY;if(t<=n&&i<=n||e<=o&&r<=o||t>=s&&i>=s||e>=a&&r>=a)return!1;var l=(r-e)/(i-t),h=l*(n-t)+e;if(h>o&&h<a)return!0;if((h=l*(s-t)+e)>o&&h<a)return!0;var u=(o-e)/l+t;return u>n&&u<s||(u=(a-e)/l+t)>n&&u<s},e.prototype.aabbIntersectsSkeleton=function(t){return this.minX<t.maxX&&this.maxX>t.minX&&this.minY<t.maxY&&this.maxY>t.minY},e.prototype.containsPoint=function(t,e){for(var i=this.polygons,r=0,n=i.length;r<n;r++)if(this.containsPointPolygon(i[r],t,e))return this.boundingBoxes[r];return null},e.prototype.containsPointPolygon=function(t,e,i){for(var r=t,n=t.length,o=n-2,s=!1,a=0;a<n;a+=2){var l=r[a+1],h=r[o+1];if(l<i&&h>=i||h<i&&l>=i){var u=r[a];u+(i-l)/(h-l)*(r[o]-u)<e&&(s=!s)}o=a}return s},e.prototype.intersectsSegment=function(t,e,i,r){for(var n=this.polygons,o=0,s=n.length;o<s;o++)if(this.intersectsSegmentPolygon(n[o],t,e,i,r))return this.boundingBoxes[o];return null},e.prototype.intersectsSegmentPolygon=function(t,e,i,r,n){for(var o=t,s=t.length,a=e-r,l=i-n,h=e*n-i*r,u=o[s-2],c=o[s-1],p=0;p<s;p+=2){var f=o[p],d=o[p+1],g=u*d-c*f,m=u-f,v=c-d,y=a*v-l*m,_=(h*m-a*g)/y;if((_>=u&&_<=f||_>=f&&_<=u)&&(_>=e&&_<=r||_>=r&&_<=e)){var x=(h*v-l*g)/y;if((x>=c&&x<=d||x>=d&&x<=c)&&(x>=i&&x<=n||x>=n&&x<=i))return!0}u=f,c=d}return!1},e.prototype.getPolygon=function(t){if(null==t)throw new Error("boundingBox cannot be null.");var e=this.boundingBoxes.indexOf(t);return-1==e?null:this.polygons[e]},e.prototype.getWidth=function(){return this.maxX-this.minX},e.prototype.getHeight=function(){return this.maxY-this.minY},e}();t.SkeletonBounds=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(){this.triangulator=new t.Triangulator,this.clippingPolygon=new Array,this.clipOutput=new Array,this.clippedVertices=new Array,this.clippedTriangles=new Array,this.scratch=new Array}return e.prototype.clipStart=function(i,r){if(null!=this.clipAttachment)return 0;this.clipAttachment=r;var n=r.worldVerticesLength,o=t.Utils.setArraySize(this.clippingPolygon,n);r.computeWorldVertices(i,0,n,o,0,2);var s=this.clippingPolygon;e.makeClockwise(s);for(var a=this.clippingPolygons=this.triangulator.decompose(s,this.triangulator.triangulate(s)),l=0,h=a.length;l<h;l++){var u=a[l];e.makeClockwise(u),u.push(u[0]),u.push(u[1])}return a.length},e.prototype.clipEndWithSlot=function(t){null!=this.clipAttachment&&this.clipAttachment.endSlot==t.data&&this.clipEnd()},e.prototype.clipEnd=function(){null!=this.clipAttachment&&(this.clipAttachment=null,this.clippingPolygons=null,this.clippedVertices.length=0,this.clippedTriangles.length=0,this.clippingPolygon.length=0)},e.prototype.isClipping=function(){return null!=this.clipAttachment},e.prototype.clipTriangles=function(e,i,r,n,o,s,a,l){var h=this.clipOutput,u=this.clippedVertices,c=this.clippedTriangles,p=this.clippingPolygons,f=this.clippingPolygons.length,d=l?12:8,g=0;u.length=0,c.length=0;t:for(var m=0;m<n;m+=3)for(var v=r[m]<<1,y=e[v],_=e[v+1],x=o[v],b=o[v+1],T=e[v=r[m+1]<<1],w=e[v+1],S=o[v],A=o[v+1],P=e[v=r[m+2]<<1],E=e[v+1],C=o[v],O=o[v+1],I=0;I<f;I++){var M=u.length;if(!this.clip(y,_,T,w,P,E,p[I],h)){(U=t.Utils.setArraySize(u,M+3*d))[M]=y,U[M+1]=_,U[M+2]=s.r,U[M+3]=s.g,U[M+4]=s.b,U[M+5]=s.a,l?(U[M+6]=x,U[M+7]=b,U[M+8]=a.r,U[M+9]=a.g,U[M+10]=a.b,U[M+11]=a.a,U[M+12]=T,U[M+13]=w,U[M+14]=s.r,U[M+15]=s.g,U[M+16]=s.b,U[M+17]=s.a,U[M+18]=S,U[M+19]=A,U[M+20]=a.r,U[M+21]=a.g,U[M+22]=a.b,U[M+23]=a.a,U[M+24]=P,U[M+25]=E,U[M+26]=s.r,U[M+27]=s.g,U[M+28]=s.b,U[M+29]=s.a,U[M+30]=C,U[M+31]=O,U[M+32]=a.r,U[M+33]=a.g,U[M+34]=a.b,U[M+35]=a.a):(U[M+6]=x,U[M+7]=b,U[M+8]=T,U[M+9]=w,U[M+10]=s.r,U[M+11]=s.g,U[M+12]=s.b,U[M+13]=s.a,U[M+14]=S,U[M+15]=A,U[M+16]=P,U[M+17]=E,U[M+18]=s.r,U[M+19]=s.g,U[M+20]=s.b,U[M+21]=s.a,U[M+22]=C,U[M+23]=O),M=c.length,(K=t.Utils.setArraySize(c,M+3))[M]=g,K[M+1]=g+1,K[M+2]=g+2,g+=3;continue t}var R=h.length;if(0!=R){for(var D=w-E,k=P-T,L=y-P,N=E-_,F=1/(D*L+k*(_-E)),B=R>>1,j=this.clipOutput,U=t.Utils.setArraySize(u,M+B*d),X=0;X<R;X+=2){var G=j[X],W=j[X+1];U[M]=G,U[M+1]=W,U[M+2]=s.r,U[M+3]=s.g,U[M+4]=s.b,U[M+5]=s.a;var V=G-P,z=W-E,H=(D*V+k*z)*F,Y=(N*V+L*z)*F,q=1-H-Y;U[M+6]=x*H+S*Y+C*q,U[M+7]=b*H+A*Y+O*q,l&&(U[M+8]=a.r,U[M+9]=a.g,U[M+10]=a.b,U[M+11]=a.a),M+=d}M=c.length;var K=t.Utils.setArraySize(c,M+3*(B-2));B--;for(X=1;X<B;X++)K[M]=g,K[M+1]=g+X,K[M+2]=g+X+1,M+=3;g+=B+1}}},e.prototype.clip=function(t,e,i,r,n,o,s,a){var l=a,h=!1,u=null;s.length%4>=2?(u=a,a=this.scratch):u=this.scratch,u.length=0,u.push(t),u.push(e),u.push(i),u.push(r),u.push(n),u.push(o),u.push(t),u.push(e),a.length=0;for(var c=s,p=s.length-4,f=0;;f+=2){for(var d=c[f],g=c[f+1],m=c[f+2],v=c[f+3],y=d-m,_=g-v,x=u,b=u.length-2,T=a.length,w=0;w<b;w+=2){var S=x[w],A=x[w+1],P=x[w+2],E=x[w+3],C=y*(E-v)-_*(P-m)>0;if(y*(A-v)-_*(S-m)>0){if(C){a.push(P),a.push(E);continue}var O=((M=P-S)*(g-A)-(I=E-A)*(d-S))/(I*(m-d)-M*(v-g));a.push(d+(m-d)*O),a.push(g+(v-g)*O)}else if(C){var I,M;O=((M=P-S)*(g-A)-(I=E-A)*(d-S))/(I*(m-d)-M*(v-g));a.push(d+(m-d)*O),a.push(g+(v-g)*O),a.push(P),a.push(E)}h=!0}if(T==a.length)return l.length=0,!0;if(a.push(a[0]),a.push(a[1]),f==p)break;var R=a;(a=u).length=0,u=R}if(l!=a){l.length=0;f=0;for(var D=a.length-2;f<D;f++)l[f]=a[f]}else l.length=l.length-2;return h},e.makeClockwise=function(t){for(var e=t,i=t.length,r=e[i-2]*e[1]-e[0]*e[i-1],n=0,o=0,s=0,a=0,l=i-3;a<l;a+=2)n=e[a],o=e[a+1],s=e[a+2],r+=n*e[a+3]-s*o;if(!(r<0)){a=0;var h=i-2;for(l=i>>1;a<l;a+=2){var u=e[a],c=e[a+1],p=h-a;e[a]=e[p],e[a+1]=e[p+1],e[p]=u,e[p+1]=c}}},e}();t.SkeletonClipping=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function t(){this.bones=new Array,this.slots=new Array,this.skins=new Array,this.events=new Array,this.animations=new Array,this.ikConstraints=new Array,this.transformConstraints=new Array,this.pathConstraints=new Array,this.fps=0}return t.prototype.findBone=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findBoneIndex=function(t){if(null==t)throw new Error("boneName cannot be null.");for(var e=this.bones,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSlot=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findSlotIndex=function(t){if(null==t)throw new Error("slotName cannot be null.");for(var e=this.slots,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t.prototype.findSkin=function(t){if(null==t)throw new Error("skinName cannot be null.");for(var e=this.skins,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findEvent=function(t){if(null==t)throw new Error("eventDataName cannot be null.");for(var e=this.events,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findAnimation=function(t){if(null==t)throw new Error("animationName cannot be null.");for(var e=this.animations,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findIkConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.ikConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findTransformConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.transformConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraint=function(t){if(null==t)throw new Error("constraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++){var n=e[i];if(n.name==t)return n}return null},t.prototype.findPathConstraintIndex=function(t){if(null==t)throw new Error("pathConstraintName cannot be null.");for(var e=this.pathConstraints,i=0,r=e.length;i<r;i++)if(e[i].name==t)return i;return-1},t}();t.SkeletonData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t){this.scale=1,this.linkedMeshes=new Array,this.attachmentLoader=t}return e.prototype.readSkeletonData=function(i){var r=this.scale,n=new t.SkeletonData,o="string"==typeof i?JSON.parse(i):i,s=o.skeleton;if(null!=s&&(n.hash=s.hash,n.version=s.spine,n.width=s.width,n.height=s.height,n.fps=s.fps,n.imagesPath=s.images),o.bones)for(var a=0;a<o.bones.length;a++){var l=o.bones[a],h=null,u=this.getValue(l,"parent",null);if(null!=u&&null==(h=n.findBone(u)))throw new Error("Parent bone not found: "+u);(d=new t.BoneData(n.bones.length,l.name,h)).length=this.getValue(l,"length",0)*r,d.x=this.getValue(l,"x",0)*r,d.y=this.getValue(l,"y",0)*r,d.rotation=this.getValue(l,"rotation",0),d.scaleX=this.getValue(l,"scaleX",1),d.scaleY=this.getValue(l,"scaleY",1),d.shearX=this.getValue(l,"shearX",0),d.shearY=this.getValue(l,"shearY",0),d.transformMode=e.transformModeFromString(this.getValue(l,"transform","normal")),n.bones.push(d)}if(o.slots)for(a=0;a<o.slots.length;a++){var c=(A=o.slots[a]).name,p=A.bone,f=n.findBone(p);if(null==f)throw new Error("Slot bone not found: "+p);var d=new t.SlotData(n.slots.length,c,f),g=this.getValue(A,"color",null);null!=g&&d.color.setFromString(g);var m=this.getValue(A,"dark",null);null!=m&&(d.darkColor=new t.Color(1,1,1,1),d.darkColor.setFromString(m)),d.attachmentName=this.getValue(A,"attachment",null),d.blendMode=e.blendModeFromString(this.getValue(A,"blend","normal")),n.slots.push(d)}if(o.ik)for(a=0;a<o.ik.length;a++){var v=o.ik[a];(d=new t.IkConstraintData(v.name)).order=this.getValue(v,"order",0);for(var y=0;y<v.bones.length;y++){p=v.bones[y];if(null==(x=n.findBone(p)))throw new Error("IK bone not found: "+p);d.bones.push(x)}var _=v.target;if(d.target=n.findBone(_),null==d.target)throw new Error("IK target bone not found: "+_);d.bendDirection=this.getValue(v,"bendPositive",!0)?1:-1,d.mix=this.getValue(v,"mix",1),n.ikConstraints.push(d)}if(o.transform)for(a=0;a<o.transform.length;a++){v=o.transform[a];(d=new t.TransformConstraintData(v.name)).order=this.getValue(v,"order",0);for(y=0;y<v.bones.length;y++){p=v.bones[y];if(null==(x=n.findBone(p)))throw new Error("Transform constraint bone not found: "+p);d.bones.push(x)}_=v.target;if(d.target=n.findBone(_),null==d.target)throw new Error("Transform constraint target bone not found: "+_);d.local=this.getValue(v,"local",!1),d.relative=this.getValue(v,"relative",!1),d.offsetRotation=this.getValue(v,"rotation",0),d.offsetX=this.getValue(v,"x",0)*r,d.offsetY=this.getValue(v,"y",0)*r,d.offsetScaleX=this.getValue(v,"scaleX",0),d.offsetScaleY=this.getValue(v,"scaleY",0),d.offsetShearY=this.getValue(v,"shearY",0),d.rotateMix=this.getValue(v,"rotateMix",1),d.translateMix=this.getValue(v,"translateMix",1),d.scaleMix=this.getValue(v,"scaleMix",1),d.shearMix=this.getValue(v,"shearMix",1),n.transformConstraints.push(d)}if(o.path)for(a=0;a<o.path.length;a++){v=o.path[a];(d=new t.PathConstraintData(v.name)).order=this.getValue(v,"order",0);for(y=0;y<v.bones.length;y++){var x;p=v.bones[y];if(null==(x=n.findBone(p)))throw new Error("Transform constraint bone not found: "+p);d.bones.push(x)}_=v.target;if(d.target=n.findSlot(_),null==d.target)throw new Error("Path target slot not found: "+_);d.positionMode=e.positionModeFromString(this.getValue(v,"positionMode","percent")),d.spacingMode=e.spacingModeFromString(this.getValue(v,"spacingMode","length")),d.rotateMode=e.rotateModeFromString(this.getValue(v,"rotateMode","tangent")),d.offsetRotation=this.getValue(v,"rotation",0),d.position=this.getValue(v,"position",0),d.positionMode==t.PositionMode.Fixed&&(d.position*=r),d.spacing=this.getValue(v,"spacing",0),d.spacingMode!=t.SpacingMode.Length&&d.spacingMode!=t.SpacingMode.Fixed||(d.spacing*=r),d.rotateMix=this.getValue(v,"rotateMix",1),d.translateMix=this.getValue(v,"translateMix",1),n.pathConstraints.push(d)}if(o.skins)for(var b in o.skins){var T=o.skins[b],w=new t.Skin(b);for(var c in T){var S=n.findSlotIndex(c);if(-1==S)throw new Error("Slot not found: "+c);var A=T[c];for(var P in A){var E=this.readAttachment(A[P],w,S,P,n);null!=E&&w.addAttachment(S,P,E)}}n.skins.push(w),"default"==w.name&&(n.defaultSkin=w)}a=0;for(var C=this.linkedMeshes.length;a<C;a++){var O=this.linkedMeshes[a];if(null==(w=null==O.skin?n.defaultSkin:n.findSkin(O.skin)))throw new Error("Skin not found: "+O.skin);var I=w.getAttachment(O.slotIndex,O.parent);if(null==I)throw new Error("Parent mesh not found: "+O.parent);O.mesh.setParentMesh(I)}if(this.linkedMeshes.length=0,o.events)for(var M in o.events){var R=o.events[M];(d=new t.EventData(M)).intValue=this.getValue(R,"int",0),d.floatValue=this.getValue(R,"float",0),d.stringValue=this.getValue(R,"string",""),d.audio=this.getValue(R,"audio",null),n.events.push(d)}if(o.animations)for(var D in o.animations){var k=o.animations[D];this.readAnimation(k,D,n)}return n},e.prototype.readAttachment=function(e,r,n,o,s){var a=this.scale;switch(o=this.getValue(e,"name",o),this.getValue(e,"type","region")){case"region":var l=this.getValue(e,"path",o),h=this.attachmentLoader.newRegionAttachment(r,o,l);return null==h?null:(h.path=l,h.x=this.getValue(e,"x",0)*a,h.y=this.getValue(e,"y",0)*a,h.scaleX=this.getValue(e,"scaleX",1),h.scaleY=this.getValue(e,"scaleY",1),h.rotation=this.getValue(e,"rotation",0),h.width=e.width*a,h.height=e.height*a,null!=(b=this.getValue(e,"color",null))&&h.color.setFromString(b),h);case"boundingbox":var u=this.attachmentLoader.newBoundingBoxAttachment(r,o);return null==u?null:(this.readVertices(e,u,e.vertexCount<<1),null!=(b=this.getValue(e,"color",null))&&u.color.setFromString(b),u);case"mesh":case"linkedmesh":l=this.getValue(e,"path",o);var c=this.attachmentLoader.newMeshAttachment(r,o,l);if(null==c)return null;c.path=l,null!=(b=this.getValue(e,"color",null))&&c.color.setFromString(b);var p=this.getValue(e,"parent",null);if(null!=p)return c.inheritDeform=this.getValue(e,"deform",!0),this.linkedMeshes.push(new i(c,this.getValue(e,"skin",null),n,p)),c;var f=e.uvs;return this.readVertices(e,c,f.length),c.triangles=e.triangles,c.regionUVs=f,c.hullLength=2*this.getValue(e,"hull",0),c;case"path":if(null==(l=this.attachmentLoader.newPathAttachment(r,o)))return null;l.closed=this.getValue(e,"closed",!1),l.constantSpeed=this.getValue(e,"constantSpeed",!0);var d=e.vertexCount;this.readVertices(e,l,d<<1);for(var g=t.Utils.newArray(d/3,0),m=0;m<e.lengths.length;m++)g[m]=e.lengths[m]*a;return l.lengths=g,null!=(b=this.getValue(e,"color",null))&&l.color.setFromString(b),l;case"point":var v=this.attachmentLoader.newPointAttachment(r,o);return null==v?null:(v.x=this.getValue(e,"x",0)*a,v.y=this.getValue(e,"y",0)*a,v.rotation=this.getValue(e,"rotation",0),null!=(b=this.getValue(e,"color",null))&&v.color.setFromString(b),v);case"clipping":var y=this.attachmentLoader.newClippingAttachment(r,o);if(null==y)return null;var _=this.getValue(e,"end",null);if(null!=_){var x=s.findSlot(_);if(null==x)throw new Error("Clipping end slot not found: "+_);y.endSlot=x}var b;d=e.vertexCount;return this.readVertices(e,y,d<<1),null!=(b=this.getValue(e,"color",null))&&y.color.setFromString(b),y}return null},e.prototype.readVertices=function(e,i,r){var n=this.scale;i.worldVerticesLength=r;var o=e.vertices;if(r!=o.length){var s=new Array,a=new Array;for(c=0,p=o.length;c<p;){var l=o[c++];a.push(l);for(var h=c+4*l;c<h;c+=4)a.push(o[c]),s.push(o[c+1]*n),s.push(o[c+2]*n),s.push(o[c+3])}i.bones=a,i.vertices=t.Utils.toFloatArray(s)}else{var u=t.Utils.toFloatArray(o);if(1!=n)for(var c=0,p=o.length;c<p;c++)u[c]*=n;i.vertices=u}},e.prototype.readAnimation=function(e,i,r){var n=this.scale,o=new Array,s=0;if(e.slots)for(var a in e.slots){var l=e.slots[a];if(-1==(K=r.findSlotIndex(a)))throw new Error("Slot not found: "+a);for(var h in l){var u=l[h];if("attachment"==h){(x=new t.AttachmentTimeline(u.length)).slotIndex=K;for(var c=0,p=0;p<u.length;p++){var f=u[p];x.setFrame(c++,f.time,f.name)}o.push(x),s=Math.max(s,x.frames[x.getFrameCount()-1])}else if("color"==h){(x=new t.ColorTimeline(u.length)).slotIndex=K;for(c=0,p=0;p<u.length;p++){f=u[p];var d=new t.Color;d.setFromString(f.color||"ffffffff"),x.setFrame(c,f.time,d.r,d.g,d.b,d.a),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.ColorTimeline.ENTRIES])}else{if("twoColor"!=h)throw new Error("Invalid timeline type for a slot: "+h+" ("+a+")");(x=new t.TwoColorTimeline(u.length)).slotIndex=K;for(c=0,p=0;p<u.length;p++){f=u[p];var g=new t.Color,m=new t.Color;g.setFromString(f.light),m.setFromString(f.dark),x.setFrame(c,f.time,g.r,g.g,g.b,g.a,m.r,m.g,m.b),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.TwoColorTimeline.ENTRIES])}}}if(e.bones)for(var v in e.bones){var y=e.bones[v],_=r.findBoneIndex(v);if(-1==_)throw new Error("Bone not found: "+v);for(var h in y){u=y[h];if("rotate"===h){(x=new t.RotateTimeline(u.length)).boneIndex=_;for(c=0,p=0;p<u.length;p++){f=u[p];x.setFrame(c,f.time,f.angle),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.RotateTimeline.ENTRIES])}else{if("translate"!==h&&"scale"!==h&&"shear"!==h)throw new Error("Invalid timeline type for a bone: "+h+" ("+v+")");var x=null,b=1;"scale"===h?x=new t.ScaleTimeline(u.length):"shear"===h?x=new t.ShearTimeline(u.length):(x=new t.TranslateTimeline(u.length),b=n),x.boneIndex=_;for(c=0,p=0;p<u.length;p++){f=u[p];var T=this.getValue(f,"x",0),w=this.getValue(f,"y",0);x.setFrame(c,f.time,T*b,w*b),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.TranslateTimeline.ENTRIES])}}}if(e.ik)for(var S in e.ik){var A=e.ik[S],P=r.findIkConstraint(S);(x=new t.IkConstraintTimeline(A.length)).ikConstraintIndex=r.ikConstraints.indexOf(P);for(c=0,p=0;p<A.length;p++){f=A[p];x.setFrame(c,f.time,this.getValue(f,"mix",1),this.getValue(f,"bendPositive",!0)?1:-1),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.IkConstraintTimeline.ENTRIES])}if(e.transform)for(var S in e.transform){A=e.transform[S],P=r.findTransformConstraint(S);(x=new t.TransformConstraintTimeline(A.length)).transformConstraintIndex=r.transformConstraints.indexOf(P);for(c=0,p=0;p<A.length;p++){f=A[p];x.setFrame(c,f.time,this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1),this.getValue(f,"scaleMix",1),this.getValue(f,"shearMix",1)),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.TransformConstraintTimeline.ENTRIES])}if(e.paths)for(var S in e.paths){A=e.paths[S];var E=r.findPathConstraintIndex(S);if(-1==E)throw new Error("Path constraint not found: "+S);var C=r.pathConstraints[E];for(var h in A){u=A[h];if("position"===h||"spacing"===h){x=null,b=1;"spacing"===h?(x=new t.PathConstraintSpacingTimeline(u.length),C.spacingMode!=t.SpacingMode.Length&&C.spacingMode!=t.SpacingMode.Fixed||(b=n)):(x=new t.PathConstraintPositionTimeline(u.length),C.positionMode==t.PositionMode.Fixed&&(b=n)),x.pathConstraintIndex=E;for(c=0,p=0;p<u.length;p++){f=u[p];x.setFrame(c,f.time,this.getValue(f,h,0)*b),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.PathConstraintPositionTimeline.ENTRIES])}else if("mix"===h){(x=new t.PathConstraintMixTimeline(u.length)).pathConstraintIndex=E;for(c=0,p=0;p<u.length;p++){f=u[p];x.setFrame(c,f.time,this.getValue(f,"rotateMix",1),this.getValue(f,"translateMix",1)),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[(x.getFrameCount()-1)*t.PathConstraintMixTimeline.ENTRIES])}}}if(e.deform)for(var O in e.deform){var I=e.deform[O],M=r.findSkin(O);if(null==M)throw new Error("Skin not found: "+O);for(var a in I){l=I[a];if(-1==(K=r.findSlotIndex(a)))throw new Error("Slot not found: "+l.name);for(var h in l){u=l[h];var R=M.getAttachment(K,h);if(null==R)throw new Error("Deform attachment not found: "+u.name);var D=null!=R.bones,k=R.vertices,L=D?k.length/3*2:k.length;(x=new t.DeformTimeline(u.length)).slotIndex=K,x.attachment=R;c=0;for(var N=0;N<u.length;N++){f=u[N];var F=void 0,B=this.getValue(f,"vertices",null);if(null==B)F=D?t.Utils.newFloatArray(L):k;else{F=t.Utils.newFloatArray(L);var j=this.getValue(f,"offset",0);if(t.Utils.arrayCopy(B,0,F,j,B.length),1!=n)for(var U=(p=j)+B.length;p<U;p++)F[p]*=n;if(!D)for(p=0;p<L;p++)F[p]+=k[p]}x.setFrame(c,f.time,F),this.readCurve(f,x,c),c++}o.push(x),s=Math.max(s,x.frames[x.getFrameCount()-1])}}}var X=e.drawOrder;if(null==X&&(X=e.draworder),null!=X){x=new t.DrawOrderTimeline(X.length);var G=r.slots.length;for(c=0,N=0;N<X.length;N++){var W=X[N],V=null,z=this.getValue(W,"offsets",null);if(null!=z){V=t.Utils.newArray(G,-1);var H=t.Utils.newArray(G-z.length,0),Y=0,q=0;for(p=0;p<z.length;p++){var K,Z=z[p];if(-1==(K=r.findSlotIndex(Z.slot)))throw new Error("Slot not found: "+Z.slot);for(;Y!=K;)H[q++]=Y++;V[Y+Z.offset]=Y++}for(;Y<G;)H[q++]=Y++;for(p=G-1;p>=0;p--)-1==V[p]&&(V[p]=H[--q])}x.setFrame(c++,W.time,V)}o.push(x),s=Math.max(s,x.frames[x.getFrameCount()-1])}if(e.events){for(x=new t.EventTimeline(e.events.length),c=0,p=0;p<e.events.length;p++){var Q=e.events[p],J=r.findEvent(Q.name);if(null==J)throw new Error("Event not found: "+Q.name);var $=new t.Event(t.Utils.toSinglePrecision(Q.time),J);$.intValue=this.getValue(Q,"int",J.intValue),$.floatValue=this.getValue(Q,"float",J.floatValue),$.stringValue=this.getValue(Q,"string",J.stringValue),x.setFrame(c++,$)}o.push(x),s=Math.max(s,x.frames[x.getFrameCount()-1])}if(isNaN(s))throw new Error("Error while parsing animation, duration is NaN");r.animations.push(new t.Animation(i,o,s))},e.prototype.readCurve=function(t,e,i){if(t.curve)if("stepped"===t.curve)e.setStepped(i);else if("[object Array]"===Object.prototype.toString.call(t.curve)){var r=t.curve;e.setCurve(i,r[0],r[1],r[2],r[3])}},e.prototype.getValue=function(t,e,i){return void 0!==t[e]?t[e]:i},e.blendModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.BlendMode.Normal;if("additive"==e)return t.BlendMode.Additive;if("multiply"==e)return t.BlendMode.Multiply;if("screen"==e)return t.BlendMode.Screen;throw new Error("Unknown blend mode: "+e)},e.positionModeFromString=function(e){if("fixed"==(e=e.toLowerCase()))return t.PositionMode.Fixed;if("percent"==e)return t.PositionMode.Percent;throw new Error("Unknown position mode: "+e)},e.spacingModeFromString=function(e){if("length"==(e=e.toLowerCase()))return t.SpacingMode.Length;if("fixed"==e)return t.SpacingMode.Fixed;if("percent"==e)return t.SpacingMode.Percent;throw new Error("Unknown position mode: "+e)},e.rotateModeFromString=function(e){if("tangent"==(e=e.toLowerCase()))return t.RotateMode.Tangent;if("chain"==e)return t.RotateMode.Chain;if("chainscale"==e)return t.RotateMode.ChainScale;throw new Error("Unknown rotate mode: "+e)},e.transformModeFromString=function(e){if("normal"==(e=e.toLowerCase()))return t.TransformMode.Normal;if("onlytranslation"==e)return t.TransformMode.OnlyTranslation;if("norotationorreflection"==e)return t.TransformMode.NoRotationOrReflection;if("noscale"==e)return t.TransformMode.NoScale;if("noscaleorreflection"==e)return t.TransformMode.NoScaleOrReflection;throw new Error("Unknown transform mode: "+e)},e}();t.SkeletonJson=e;var i=function(t,e,i,r){this.mesh=t,this.skin=e,this.slotIndex=i,this.parent=r}}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function t(t){if(this.attachments=new Array,null==t)throw new Error("name cannot be null.");this.name=t}return t.prototype.addAttachment=function(t,e,i){if(null==i)throw new Error("attachment cannot be null.");var r=this.attachments;t>=r.length&&(r.length=t+1),r[t]||(r[t]={}),r[t][e]=i},t.prototype.getAttachment=function(t,e){var i=this.attachments[t];return i?i[e]:null},t.prototype.attachAll=function(t,e){for(var i=0,r=0;r<t.slots.length;r++){var n=t.slots[r],o=n.getAttachment();if(o&&i<e.attachments.length){var s=e.attachments[i];for(var a in s){if(o==s[a]){var l=this.getAttachment(i,a);null!=l&&n.setAttachment(l);break}}}i++}},t}();t.Skin=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(e,i){if(this.attachmentVertices=new Array,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("bone cannot be null.");this.data=e,this.bone=i,this.color=new t.Color,this.darkColor=null==e.darkColor?null:new t.Color,this.setToSetupPose(),this.blendMode=this.data.blendMode}return e.prototype.getAttachment=function(){return this.attachment},e.prototype.setAttachment=function(t){this.attachment!=t&&(this.attachment=t,this.attachmentTime=this.bone.skeleton.time,this.attachmentVertices.length=0)},e.prototype.setAttachmentTime=function(t){this.attachmentTime=this.bone.skeleton.time-t},e.prototype.getAttachmentTime=function(){return this.bone.skeleton.time-this.attachmentTime},e.prototype.setToSetupPose=function(){this.color.setFromColor(this.data.color),null!=this.darkColor&&this.darkColor.setFromColor(this.data.darkColor),null==this.data.attachmentName?this.attachment=null:(this.attachment=null,this.setAttachment(this.bone.skeleton.getAttachment(this.data.index,this.data.attachmentName)))},e}();t.Slot=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e,i,r){if(this.color=new t.Color(1,1,1,1),e<0)throw new Error("index must be >= 0.");if(null==i)throw new Error("name cannot be null.");if(null==r)throw new Error("boneData cannot be null.");this.index=e,this.name=i,this.boneData=r};t.SlotData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e,i,r=function(){function t(t){this._image=t}return t.prototype.getImage=function(){return this._image},t.filterFromString=function(t){switch(t.toLowerCase()){case"nearest":return e.Nearest;case"linear":return e.Linear;case"mipmap":return e.MipMap;case"mipmapnearestnearest":return e.MipMapNearestNearest;case"mipmaplinearnearest":return e.MipMapLinearNearest;case"mipmapnearestlinear":return e.MipMapNearestLinear;case"mipmaplinearlinear":return e.MipMapLinearLinear;default:throw new Error("Unknown texture filter "+t)}},t.wrapFromString=function(t){switch(t.toLowerCase()){case"mirroredtepeat":return i.MirroredRepeat;case"clamptoedge":return i.ClampToEdge;case"repeat":return i.Repeat;default:throw new Error("Unknown texture wrap "+t)}},t}();t.Texture=r,function(t){t[t.Nearest=9728]="Nearest",t[t.Linear=9729]="Linear",t[t.MipMap=9987]="MipMap",t[t.MipMapNearestNearest=9984]="MipMapNearestNearest",t[t.MipMapLinearNearest=9985]="MipMapLinearNearest",t[t.MipMapNearestLinear=9986]="MipMapNearestLinear",t[t.MipMapLinearLinear=9987]="MipMapLinearLinear"}(e=t.TextureFilter||(t.TextureFilter={})),function(t){t[t.MirroredRepeat=33648]="MirroredRepeat",t[t.ClampToEdge=33071]="ClampToEdge",t[t.Repeat=10497]="Repeat"}(i=t.TextureWrap||(t.TextureWrap={}));var n=function(){function t(){this.size=null}return Object.defineProperty(t.prototype,"width",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.width:t.trim?t.trim.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"height",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.crop.height:t.trim?t.trim.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u",{get:function(){return this.texture._uvs.x0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v",{get:function(){return this.texture._uvs.y0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"u2",{get:function(){return this.texture._uvs.x2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"v2",{get:function(){return this.texture._uvs.y2},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetX",{get:function(){var t=this.texture;return t.trim?t.trim.x:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"offsetY",{get:function(){return this.spineOffsetY},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"pixiOffsetY",{get:function(){var t=this.texture;return t.trim?t.trim.y:0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"spineOffsetY",{get:function(){var t=this.texture;return this.originalHeight-this.height-(t.trim?t.trim.y:0)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalWidth",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.width:t.crop.width:t.orig.width},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"originalHeight",{get:function(){var t=this.texture;return"3"==PIXI.VERSION[0]?t.trim?t.trim.height:t.crop.height:t.orig.height},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"x",{get:function(){return this.texture.frame.x},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"y",{get:function(){return this.texture.frame.y},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"rotate",{get:function(){return 0!==this.texture.rotate},enumerable:!0,configurable:!0}),t}();t.TextureRegion=n}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t,e,i){this.pages=new Array,this.regions=new Array,t&&this.addSpineAtlas(t,e,i)}return e.prototype.addTexture=function(e,i){for(var o=this.pages,s=null,a=0;a<o.length;a++)if(o[a].baseTexture===i.baseTexture){s=o[a];break}if(null===s){(s=new r).name="texturePage";var l=i.baseTexture;s.width=l.realWidth,s.height=l.realHeight,s.baseTexture=l,s.minFilter=s.magFilter=t.TextureFilter.Nearest,s.uWrap=t.TextureWrap.ClampToEdge,s.vWrap=t.TextureWrap.ClampToEdge,o.push(s)}var h=new n;return h.name=e,h.page=s,h.texture=i,h.index=-1,this.regions.push(h),h},e.prototype.addTextureHash=function(t,e){for(var i in t)t.hasOwnProperty(i)&&this.addTexture(e&&-1!==i.indexOf(".")?i.substr(0,i.lastIndexOf(".")):i,t[i])},e.prototype.addSpineAtlas=function(t,e,i){return this.load(t,e,i)},e.prototype.load=function(e,o,s){var a=this;if(null==o)throw new Error("textureLoader cannot be null.");var l=new i(e),h=new Array(4),u=null,c=function(){for(;;){var e=l.readLine();if(null==e)return s&&s(a);if(0==(e=e.trim()).length)u=null;else{if(!u){(u=new r).name=e,2==l.readTuple(h)&&(u.width=parseInt(h[0]),u.height=parseInt(h[1]),l.readTuple(h)),l.readTuple(h),u.minFilter=t.Texture.filterFromString(h[0]),u.magFilter=t.Texture.filterFromString(h[1]);var i=l.readValue();u.uWrap=t.TextureWrap.ClampToEdge,u.vWrap=t.TextureWrap.ClampToEdge,"x"==i?u.uWrap=t.TextureWrap.Repeat:"y"==i?u.vWrap=t.TextureWrap.Repeat:"xy"==i&&(u.uWrap=u.vWrap=t.TextureWrap.Repeat),o(e,(function(t){u.baseTexture=t,t.hasLoaded||(t.width=u.width,t.height=u.height),a.pages.push(u),u.setFilters(),u.width&&u.height||(u.width=t.realWidth,u.height=t.realHeight,!u.width||u.height),c()})),a.pages.push(u);break}var p=new n;p.name=e,p.page=u;var f="true"==l.readValue()?6:0;l.readTuple(h);var d=parseInt(h[0]),g=parseInt(h[1]);l.readTuple(h);var m=parseInt(h[0]),v=parseInt(h[1]),y=u.baseTexture.resolution;d/=y,g/=y,m/=y,v/=y;var _=new PIXI.Rectangle(d,g,f?v:m,f?m:v);4==l.readTuple(h)&&4==l.readTuple(h)&&l.readTuple(h);var x=parseInt(h[0])/y,b=parseInt(h[1])/y;l.readTuple(h);var T=parseInt(h[0])/y,w=parseInt(h[1])/y,S=new PIXI.Rectangle(0,0,x,b),A=new PIXI.Rectangle(T,b-v-w,m,v);if("3"!=PIXI.VERSION[0])p.texture=new PIXI.Texture(p.page.baseTexture,_,S,A,f);else{var P=new PIXI.Rectangle(d,g,m,v),E=P.clone();A.width=x,A.height=b,p.texture=new PIXI.Texture(p.page.baseTexture,P,E,A,f)}p.index=parseInt(l.readValue()),p.texture._updateUvs(),a.regions.push(p)}}};c()},e.prototype.findRegion=function(t){for(var e=0;e<this.regions.length;e++)if(this.regions[e].name==t)return this.regions[e];return null},e.prototype.dispose=function(){for(var t=0;t<this.pages.length;t++)this.pages[t].baseTexture.dispose()},e}();t.TextureAtlas=e;var i=function(){function t(t){this.index=0,this.lines=t.split(/\r\n|\r|\n/)}return t.prototype.readLine=function(){return this.index>=this.lines.length?null:this.lines[this.index++]},t.prototype.readValue=function(){var t=this.readLine(),e=t.indexOf(":");if(-1==e)throw new Error("Invalid line: "+t);return t.substring(e+1).trim()},t.prototype.readTuple=function(t){var e=this.readLine(),i=e.indexOf(":");if(-1==i)throw new Error("Invalid line: "+e);for(var r=0,n=i+1;r<3;r++){var o=e.indexOf(",",n);if(-1==o)break;t[r]=e.substr(n,o-n).trim(),n=o+1}return t[r]=e.substring(n).trim(),r+1},t}(),r=function(){function e(){}return e.prototype.setFilters=function(){var e=this.baseTexture,i=this.minFilter;i==t.TextureFilter.Linear?e.scaleMode=PIXI.SCALE_MODES.LINEAR:this.minFilter==t.TextureFilter.Nearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:(e.mipmap=!0,i==t.TextureFilter.MipMapNearestNearest?e.scaleMode=PIXI.SCALE_MODES.NEAREST:e.scaleMode=PIXI.SCALE_MODES.LINEAR)},e}();t.TextureAtlasPage=r;var n=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return o(e,t),e}(t.TextureRegion);t.TextureAtlasRegion=n}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(e,i){if(this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.temp=new t.Vector2,null==e)throw new Error("data cannot be null.");if(null==i)throw new Error("skeleton cannot be null.");this.data=e,this.rotateMix=e.rotateMix,this.translateMix=e.translateMix,this.scaleMix=e.scaleMix,this.shearMix=e.shearMix,this.bones=new Array;for(var r=0;r<e.bones.length;r++)this.bones.push(i.findBone(e.bones[r].name));this.target=i.findBone(e.target.name)}return e.prototype.apply=function(){this.update()},e.prototype.update=function(){this.data.local?this.data.relative?this.applyRelativeLocal():this.applyAbsoluteLocal():this.data.relative?this.applyRelativeWorld():this.applyAbsoluteWorld()},e.prototype.applyAbsoluteWorld=function(){for(var e=this.rotateMix,i=this.translateMix,r=this.scaleMix,n=this.shearMix,o=this.target,s=o.matrix,a=s.a,l=s.c,h=s.b,u=s.d,c=a*u-l*h>0?t.MathUtils.degRad:-t.MathUtils.degRad,p=this.data.offsetRotation*c,f=this.data.offsetShearY*c,d=this.bones,g=0,m=d.length;g<m;g++){var v=d[g],y=!1,_=v.matrix;if(0!=e){var x=_.a,b=_.c,T=_.b,w=_.d;(O=Math.atan2(h,a)-Math.atan2(T,x)+p)>t.MathUtils.PI?O-=t.MathUtils.PI2:O<-t.MathUtils.PI&&(O+=t.MathUtils.PI2),O*=e;var S=Math.cos(O),A=Math.sin(O);_.a=S*x-A*T,_.c=S*b-A*w,_.b=A*x+S*T,_.d=A*b+S*w,y=!0}if(0!=i){var P=this.temp;o.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),_.tx+=(P.x-_.tx)*i,_.ty+=(P.y-_.ty)*i,y=!0}if(r>0){var E=Math.sqrt(_.a*_.a+_.b*_.b),C=Math.sqrt(a*a+h*h);E>1e-5&&(E=(E+(C-E+this.data.offsetScaleX)*r)/E),_.a*=E,_.b*=E,E=Math.sqrt(_.c*_.c+_.d*_.d),C=Math.sqrt(l*l+u*u),E>1e-5&&(E=(E+(C-E+this.data.offsetScaleY)*r)/E),_.c*=E,_.d*=E,y=!0}if(n>0){b=_.c,w=_.d;var O,I=Math.atan2(w,b);(O=Math.atan2(u,l)-Math.atan2(h,a)-(I-Math.atan2(_.b,_.a)))>t.MathUtils.PI?O-=t.MathUtils.PI2:O<-t.MathUtils.PI&&(O+=t.MathUtils.PI2),O=I+(O+f)*n;E=Math.sqrt(b*b+w*w);_.c=Math.cos(O)*E,_.d=Math.sin(O)*E,y=!0}y&&(v.appliedValid=!1)}},e.prototype.applyRelativeWorld=function(){for(var e=this.rotateMix,i=this.translateMix,r=this.scaleMix,n=this.shearMix,o=this.target,s=o.matrix,a=s.a,l=s.c,h=s.b,u=s.d,c=a*u-l*h>0?t.MathUtils.degRad:-t.MathUtils.degRad,p=this.data.offsetRotation*c,f=this.data.offsetShearY*c,d=this.bones,g=0,m=d.length;g<m;g++){var v=d[g],y=!1,_=v.matrix;if(0!=e){var x=_.a,b=_.c,T=_.b,w=_.d;(C=Math.atan2(h,a)+p)>t.MathUtils.PI?C-=t.MathUtils.PI2:C<-t.MathUtils.PI&&(C+=t.MathUtils.PI2),C*=e;var S=Math.cos(C),A=Math.sin(C);_.a=S*x-A*T,_.c=S*b-A*w,_.b=A*x+S*T,_.d=A*b+S*w,y=!0}if(0!=i){var P=this.temp;o.localToWorld(P.set(this.data.offsetX,this.data.offsetY)),_.tx+=P.x*i,_.ty+=P.y*i,y=!0}if(r>0){var E=(Math.sqrt(a*a+h*h)-1+this.data.offsetScaleX)*r+1;_.a*=E,_.b*=E,E=(Math.sqrt(l*l+u*u)-1+this.data.offsetScaleY)*r+1,_.c*=E,_.d*=E,y=!0}if(n>0){var C;(C=Math.atan2(u,l)-Math.atan2(h,a))>t.MathUtils.PI?C-=t.MathUtils.PI2:C<-t.MathUtils.PI&&(C+=t.MathUtils.PI2);b=_.c,w=_.d;C=Math.atan2(w,b)+(C-t.MathUtils.PI/2+f)*n;E=Math.sqrt(b*b+w*w);_.c=Math.cos(C)*E,_.d=Math.sin(C)*E,y=!0}y&&(v.appliedValid=!1)}},e.prototype.applyAbsoluteLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;if(0!=t){var u=n.arotation-h+this.data.offsetRotation;h+=(u-=360*(16384-(16384.499999999996-u/360|0)))*t}var c=l.ax,p=l.ay;0!=e&&(c+=(n.ax-c+this.data.offsetX)*e,p+=(n.ay-p+this.data.offsetY)*e);var f=l.ascaleX,d=l.ascaleY;i>0&&(f>1e-5&&(f=(f+(n.ascaleX-f+this.data.offsetScaleX)*i)/f),d>1e-5&&(d=(d+(n.ascaleY-d+this.data.offsetScaleY)*i)/d));var g=l.ashearY;if(r>0){u=n.ashearY-g+this.data.offsetShearY;u-=360*(16384-(16384.499999999996-u/360|0)),l.shearY+=u*r}l.updateWorldTransformWith(c,p,h,f,d,l.ashearX,g)}},e.prototype.applyRelativeLocal=function(){var t=this.rotateMix,e=this.translateMix,i=this.scaleMix,r=this.shearMix,n=this.target;n.appliedValid||n.updateAppliedTransform();for(var o=this.bones,s=0,a=o.length;s<a;s++){var l=o[s];l.appliedValid||l.updateAppliedTransform();var h=l.arotation;0!=t&&(h+=(n.arotation+this.data.offsetRotation)*t);var u=l.ax,c=l.ay;0!=e&&(u+=(n.ax+this.data.offsetX)*e,c+=(n.ay+this.data.offsetY)*e);var p=l.ascaleX,f=l.ascaleY;i>0&&(p>1e-5&&(p*=(n.ascaleX-1+this.data.offsetScaleX)*i+1),f>1e-5&&(f*=(n.ascaleY-1+this.data.offsetScaleY)*i+1));var d=l.ashearY;r>0&&(d+=(n.ashearY+this.data.offsetShearY)*r),l.updateWorldTransformWith(u,c,h,p,f,l.ashearX,d)}},e.prototype.getOrder=function(){return this.data.order},e}();t.TransformConstraint=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){if(this.order=0,this.bones=new Array,this.rotateMix=0,this.translateMix=0,this.scaleMix=0,this.shearMix=0,this.offsetRotation=0,this.offsetX=0,this.offsetY=0,this.offsetScaleX=0,this.offsetScaleY=0,this.offsetShearY=0,this.relative=!1,this.local=!1,null==t)throw new Error("name cannot be null.");this.name=t};t.TransformConstraintData=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(){this.convexPolygons=new Array,this.convexPolygonsIndices=new Array,this.indicesArray=new Array,this.isConcaveArray=new Array,this.triangles=new Array,this.polygonPool=new t.Pool((function(){return new Array})),this.polygonIndicesPool=new t.Pool((function(){return new Array}))}return e.prototype.triangulate=function(t){var i=t,r=t.length>>1,n=this.indicesArray;n.length=0;for(var o=0;o<r;o++)n[o]=o;var s=this.isConcaveArray;s.length=0;o=0;for(var a=r;o<a;++o)s[o]=e.isConcave(o,r,i,n);var l=this.triangles;for(l.length=0;r>3;){for(var h=r-1,u=(o=0,1);;){t:if(!s[o]){for(var c=n[h]<<1,p=n[o]<<1,f=n[u]<<1,d=i[c],g=i[c+1],m=i[p],v=i[p+1],y=i[f],_=i[f+1],x=(u+1)%r;x!=h;x=(x+1)%r)if(s[x]){var b=n[x]<<1,T=i[b],w=i[b+1];if(e.positiveArea(y,_,d,g,T,w)&&e.positiveArea(d,g,m,v,T,w)&&e.positiveArea(m,v,y,_,T,w))break t}break}if(0==u){do{if(!s[o])break;o--}while(o>0);break}h=o,o=u,u=(u+1)%r}l.push(n[(r+o-1)%r]),l.push(n[o]),l.push(n[(o+1)%r]),n.splice(o,1),s.splice(o,1);var S=(--r+o-1)%r,A=o==r?0:o;s[S]=e.isConcave(S,r,i,n),s[A]=e.isConcave(A,r,i,n)}return 3==r&&(l.push(n[2]),l.push(n[0]),l.push(n[1])),l},e.prototype.decompose=function(t,i){var r=t,n=this.convexPolygons;this.polygonPool.freeAll(n),n.length=0;var o=this.convexPolygonsIndices;this.polygonIndicesPool.freeAll(o),o.length=0;var s=this.polygonIndicesPool.obtain();s.length=0;var a=this.polygonPool.obtain();a.length=0;for(var l=-1,h=0,u=0,c=i.length;u<c;u+=3){var p=i[u]<<1,f=i[u+1]<<1,d=i[u+2]<<1,g=r[p],m=r[p+1],v=r[f],y=r[f+1],_=r[d],x=r[d+1],b=!1;if(l==p){var T=a.length-4,w=e.winding(a[T],a[T+1],a[T+2],a[T+3],_,x),S=e.winding(_,x,a[0],a[1],a[2],a[3]);w==h&&S==h&&(a.push(_),a.push(x),s.push(d),b=!0)}b||(a.length>0?(n.push(a),o.push(s)):(this.polygonPool.free(a),this.polygonIndicesPool.free(s)),(a=this.polygonPool.obtain()).length=0,a.push(g),a.push(m),a.push(v),a.push(y),a.push(_),a.push(x),(s=this.polygonIndicesPool.obtain()).length=0,s.push(p),s.push(f),s.push(d),h=e.winding(g,m,v,y,_,x),l=p)}a.length>0&&(n.push(a),o.push(s));for(u=0,c=n.length;u<c;u++)if(0!=(s=o[u]).length)for(var A=s[0],P=s[s.length-1],E=(a=n[u])[T=a.length-4],C=a[T+1],O=a[T+2],I=a[T+3],M=a[0],R=a[1],D=a[2],k=a[3],L=e.winding(E,C,O,I,M,R),N=0;N<c;N++)if(N!=u){var F=o[N];if(3==F.length){var B=F[0],j=F[1],U=F[2],X=n[N];_=X[X.length-2],x=X[X.length-1];if(B==A&&j==P){w=e.winding(E,C,O,I,_,x),S=e.winding(_,x,M,R,D,k);w==L&&S==L&&(X.length=0,F.length=0,a.push(_),a.push(x),s.push(U),E=O,C=I,O=_,I=x,N=0)}}}for(u=n.length-1;u>=0;u--)0==(a=n[u]).length&&(n.splice(u,1),this.polygonPool.free(a),s=o[u],o.splice(u,1),this.polygonIndicesPool.free(s));return n},e.isConcave=function(t,e,i,r){var n=r[(e+t-1)%e]<<1,o=r[t]<<1,s=r[(t+1)%e]<<1;return!this.positiveArea(i[n],i[n+1],i[o],i[o+1],i[s],i[s+1])},e.positiveArea=function(t,e,i,r,n,o){return t*(o-r)+i*(e-o)+n*(r-e)>=0},e.winding=function(t,e,i,r,n,o){var s=i-t,a=r-e;return n*a-o*s+s*e-t*a>=0?1:-1},e}();t.Triangulator=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function t(){this.array=new Array}return t.prototype.add=function(t){var e=this.contains(t);return this.array[0|t]=0|t,!e},t.prototype.contains=function(t){return null!=this.array[0|t]},t.prototype.remove=function(t){this.array[0|t]=void 0},t.prototype.clear=function(){this.array.length=0},t}();t.IntSet=e;var i=function(){function t(t,e,i,r){void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=0),void 0===r&&(r=0),this.r=t,this.g=e,this.b=i,this.a=r}return t.prototype.set=function(t,e,i,r){return this.r=t,this.g=e,this.b=i,this.a=r,this.clamp(),this},t.prototype.setFromColor=function(t){return this.r=t.r,this.g=t.g,this.b=t.b,this.a=t.a,this},t.prototype.setFromString=function(t){return t="#"==t.charAt(0)?t.substr(1):t,this.r=parseInt(t.substr(0,2),16)/255,this.g=parseInt(t.substr(2,2),16)/255,this.b=parseInt(t.substr(4,2),16)/255,this.a=(8!=t.length?255:parseInt(t.substr(6,2),16))/255,this},t.prototype.add=function(t,e,i,r){return this.r+=t,this.g+=e,this.b+=i,this.a+=r,this.clamp(),this},t.prototype.clamp=function(){return this.r<0?this.r=0:this.r>1&&(this.r=1),this.g<0?this.g=0:this.g>1&&(this.g=1),this.b<0?this.b=0:this.b>1&&(this.b=1),this.a<0?this.a=0:this.a>1&&(this.a=1),this},t.WHITE=new t(1,1,1,1),t.RED=new t(1,0,0,1),t.GREEN=new t(0,1,0,1),t.BLUE=new t(0,0,1,1),t.MAGENTA=new t(1,0,1,1),t}();t.Color=i;var r=function(){function t(){}return t.clamp=function(t,e,i){return t<e?e:t>i?i:t},t.cosDeg=function(e){return Math.cos(e*t.degRad)},t.sinDeg=function(e){return Math.sin(e*t.degRad)},t.signum=function(t){return t>0?1:t<0?-1:0},t.toInt=function(t){return t>0?Math.floor(t):Math.ceil(t)},t.cbrt=function(t){var e=Math.pow(Math.abs(t),1/3);return t<0?-e:e},t.randomTriangular=function(e,i){return t.randomTriangularWith(e,i,.5*(e+i))},t.randomTriangularWith=function(t,e,i){var r=Math.random(),n=e-t;return r<=(i-t)/n?t+Math.sqrt(r*n*(i-t)):e-Math.sqrt((1-r)*n*(e-i))},t.PI=3.1415927,t.PI2=2*t.PI,t.radiansToDegrees=180/t.PI,t.radDeg=t.radiansToDegrees,t.degreesToRadians=t.PI/180,t.degRad=t.degreesToRadians,t}();t.MathUtils=r;var n=function(){function t(){}return t.prototype.apply=function(t,e,i){return t+(e-t)*this.applyInternal(i)},t}();t.Interpolation=n;var s=function(t){function e(e){var i=t.call(this)||this;return i.power=2,i.power=e,i}return o(e,t),e.prototype.applyInternal=function(t){return t<=.5?Math.pow(2*t,this.power)/2:Math.pow(2*(t-1),this.power)/(this.power%2==0?-2:2)+1},e}(n);t.Pow=s;var a=function(t){function e(e){return t.call(this,e)||this}return o(e,t),e.prototype.applyInternal=function(t){return Math.pow(t-1,this.power)*(this.power%2==0?-1:1)+1},e}(s);t.PowOut=a;var l=function(){function t(){}return t.arrayCopy=function(t,e,i,r,n){for(var o=e,s=r;o<e+n;o++,s++)i[s]=t[o]},t.setArraySize=function(t,e,i){void 0===i&&(i=0);var r=t.length;if(r==e)return t;if(t.length=e,r<e)for(var n=r;n<e;n++)t[n]=i;return t},t.ensureArrayCapacity=function(e,i,r){return void 0===r&&(r=0),e.length>=i?e:t.setArraySize(e,i,r)},t.newArray=function(t,e){for(var i=new Array(t),r=0;r<t;r++)i[r]=e;return i},t.newFloatArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Float32Array(e);for(var i=new Array(e),r=0;r<i.length;r++)i[r]=0;return i},t.newShortArray=function(e){if(t.SUPPORTS_TYPED_ARRAYS)return new Int16Array(e);for(var i=new Array(e),r=0;r<i.length;r++)i[r]=0;return i},t.toFloatArray=function(e){return t.SUPPORTS_TYPED_ARRAYS?new Float32Array(e):e},t.toSinglePrecision=function(e){return t.SUPPORTS_TYPED_ARRAYS?Math.fround(e):e},t.webkit602BugfixHelper=function(t,e){},t.SUPPORTS_TYPED_ARRAYS="undefined"!=typeof Float32Array,t}();t.Utils=l;var h=function(){function t(){}return t.logBones=function(t){for(var e=0;e<t.bones.length;e++)t.bones[e].matrix},t}();t.DebugUtils=h;var u=function(){function t(t){this.items=new Array,this.instantiator=t}return t.prototype.obtain=function(){return this.items.length>0?this.items.pop():this.instantiator()},t.prototype.free=function(t){t.reset&&t.reset(),this.items.push(t)},t.prototype.freeAll=function(t){for(var e=0;e<t.length;e++)t[e].reset&&t[e].reset(),this.items[e]=t[e]},t.prototype.clear=function(){this.items.length=0},t}();t.Pool=u;var c=function(){function t(t,e){void 0===t&&(t=0),void 0===e&&(e=0),this.x=t,this.y=e}return t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.length=function(){var t=this.x,e=this.y;return Math.sqrt(t*t+e*e)},t.prototype.normalize=function(){var t=this.length();return 0!=t&&(this.x/=t,this.y/=t),this},t}();t.Vector2=c;var p=function(){function t(){this.maxDelta=.064,this.framesPerSecond=0,this.delta=0,this.totalTime=0,this.lastTime=Date.now()/1e3,this.frameCount=0,this.frameTime=0}return t.prototype.update=function(){var t=Date.now()/1e3;this.delta=t-this.lastTime,this.frameTime+=this.delta,this.totalTime+=this.delta,this.delta>this.maxDelta&&(this.delta=this.maxDelta),this.lastTime=t,this.frameCount++,this.frameTime>1&&(this.framesPerSecond=this.frameCount/this.frameTime,this.frameTime=0,this.frameCount=0)},t}();t.TimeKeeper=p;var f=function(){function t(t){void 0===t&&(t=32),this.addedValues=0,this.lastValue=0,this.mean=0,this.dirty=!0,this.values=new Array(t)}return t.prototype.hasEnoughData=function(){return this.addedValues>=this.values.length},t.prototype.addValue=function(t){this.addedValues<this.values.length&&this.addedValues++,this.values[this.lastValue++]=t,this.lastValue>this.values.length-1&&(this.lastValue=0),this.dirty=!0},t.prototype.getMean=function(){if(this.hasEnoughData()){if(this.dirty){for(var t=0,e=0;e<this.values.length;e++)t+=this.values[e];this.mean=t/this.values.length,this.dirty=!1}return this.mean}return 0},t}();t.WindowedMean=f}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(t){if(null==t)throw new Error("name cannot be null.");this.name=t};t.Attachment=e;var i=function(t){function e(i){var r=t.call(this,i)||this;return r.id=(65535&e.nextID++)<<11,r.worldVerticesLength=0,r}return o(e,t),e.prototype.computeWorldVerticesOld=function(t,e){this.computeWorldVertices(t,0,this.worldVerticesLength,e,0,2)},e.prototype.computeWorldVertices=function(t,e,i,r,n,o){i=n+(i>>1)*o;var s=t.bone.skeleton,a=t.attachmentVertices,l=this.vertices,h=this.bones;if(null!=h){for(var u=0,c=0,p=0;p<e;p+=2){u+=(m=h[u])+1,c+=m}var f=s.bones;if(0==a.length)for(C=n,S=3*c;C<i;C+=o){var d=0,g=0,m=h[u++];for(m+=u;u<m;u++,S+=3){x=f[h[u]].matrix,O=l[S],I=l[S+1];var v=l[S+2];d+=(O*x.a+I*x.c+x.tx)*v,g+=(O*x.b+I*x.d+x.ty)*v}r[C]=d,r[C+1]=g}else for(var y=a,_=(C=n,S=3*c,c<<1);C<i;C+=o){d=0,g=0,m=h[u++];for(m+=u;u<m;u++,S+=3,_+=2){x=f[h[u]].matrix,O=l[S]+y[_],I=l[S+1]+y[_+1],v=l[S+2];d+=(O*x.a+I*x.c+x.tx)*v,g+=(O*x.b+I*x.d+x.ty)*v}r[C]=d,r[C+1]=g}}else{a.length>0&&(l=a);for(var x,b=(x=t.bone.matrix).tx,T=x.ty,w=x.a,S=x.c,A=x.b,P=x.d,E=e,C=n;C<i;E+=2,C+=o){var O=l[E],I=l[E+1];r[C]=O*w+I*S+b,r[C+1]=O*A+I*P+T}}},e.prototype.applyDeform=function(t){return this==t},e.nextID=0,e}(e);t.VertexAttachment=i}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){!function(t){t[t.Region=0]="Region",t[t.BoundingBox=1]="BoundingBox",t[t.Mesh=2]="Mesh",t[t.LinkedMesh=3]="LinkedMesh",t[t.Path=4]="Path",t[t.Point=5]="Point"}(t.AttachmentType||(t.AttachmentType={}))}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.color=new t.Color(1,1,1,1),r}return o(i,e),i}(t.VertexAttachment);t.BoundingBoxAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.color=new t.Color(.2275,.2275,.8078,1),r}return o(i,e),i}(t.VertexAttachment);t.ClippingAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.color=new t.Color(1,1,1,1),r.inheritDeform=!1,r.tempColor=new t.Color(0,0,0,0),r}return o(i,e),i.prototype.updateUVs=function(e,i){var r=this.regionUVs.length;if(i&&i.length==r||(i=t.Utils.newFloatArray(r)),null!=e){for(var n=e.texture._uvs,o=e.width,s=e.height,a=e.originalWidth,l=e.originalHeight,h=e.offsetX,u=e.pixiOffsetY,c=0;c<r;c+=2){var p=this.regionUVs[c],f=this.regionUVs[c+1];p=(p*a-h)/o,f=(f*l-u)/s,i[c]=(n.x0*(1-p)+n.x1*p)*(1-f)+(n.x3*(1-p)+n.x2*p)*f,i[c+1]=(n.y0*(1-p)+n.y1*p)*(1-f)+(n.y3*(1-p)+n.y2*p)*f}return i}},i.prototype.applyDeform=function(t){return this==t||this.inheritDeform&&this.parentMesh==t},i.prototype.getParentMesh=function(){return this.parentMesh},i.prototype.setParentMesh=function(t){this.parentMesh=t,null!=t&&(this.bones=t.bones,this.vertices=t.vertices,this.worldVerticesLength=t.worldVerticesLength,this.regionUVs=t.regionUVs,this.triangles=t.triangles,this.hullLength=t.hullLength,this.worldVerticesLength=t.worldVerticesLength)},i}(t.VertexAttachment);t.MeshAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.closed=!1,r.constantSpeed=!1,r.color=new t.Color(1,1,1,1),r}return o(i,e),i}(t.VertexAttachment);t.PathAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.color=new t.Color(.38,.94,0,1),r}return o(i,e),i.prototype.computeWorldPosition=function(t,e){var i=t.matrix;return e.x=this.x*i.a+this.y*i.c+t.worldX,e.y=this.x*i.b+this.y*i.d+t.worldY,e},i.prototype.computeWorldRotation=function(e){var i=e.matrix,r=t.MathUtils.cosDeg(this.rotation),n=t.MathUtils.sinDeg(this.rotation),o=r*i.a+n*i.c,s=r*i.b+n*i.d;return Math.atan2(s,o)*t.MathUtils.radDeg},i}(t.VertexAttachment);t.PointAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(e){function i(i){var r=e.call(this,i)||this;return r.x=0,r.y=0,r.scaleX=1,r.scaleY=1,r.rotation=0,r.width=0,r.height=0,r.color=new t.Color(1,1,1,1),r.offset=t.Utils.newFloatArray(8),r.uvs=t.Utils.newFloatArray(8),r.tempColor=new t.Color(1,1,1,1),r}return o(i,e),i.prototype.updateOffset=function(){var t=this.width/this.region.originalWidth*this.scaleX,e=this.height/this.region.originalHeight*this.scaleY,r=-this.width/2*this.scaleX+this.region.offsetX*t,n=-this.height/2*this.scaleY+this.region.offsetY*e,o=r+this.region.width*t,s=n+this.region.height*e,a=this.rotation*Math.PI/180,l=Math.cos(a),h=Math.sin(a),u=r*l+this.x,c=r*h,p=n*l+this.y,f=n*h,d=o*l+this.x,g=o*h,m=s*l+this.y,v=s*h,y=this.offset;y[i.OX1]=u-f,y[i.OY1]=p+c,y[i.OX2]=u-v,y[i.OY2]=m+c,y[i.OX3]=d-v,y[i.OY3]=m+g,y[i.OX4]=d-f,y[i.OY4]=p+g},i.prototype.setRegion=function(t){this.region=t;var e=this.uvs;t.rotate?(e[2]=t.u,e[3]=t.v2,e[4]=t.u,e[5]=t.v,e[6]=t.u2,e[7]=t.v,e[0]=t.u2,e[1]=t.v2):(e[0]=t.u,e[1]=t.v2,e[2]=t.u,e[3]=t.v,e[4]=t.u2,e[5]=t.v,e[6]=t.u2,e[7]=t.v2)},i.prototype.computeWorldVertices=function(t,e,r,n){var o=this.offset,s=t.matrix,a=s.tx,l=s.ty,h=s.a,u=s.c,c=s.b,p=s.d,f=0,d=0;f=o[i.OX1],d=o[i.OY1],e[r]=f*h+d*u+a,e[r+1]=f*c+d*p+l,r+=n,f=o[i.OX2],d=o[i.OY2],e[r]=f*h+d*u+a,e[r+1]=f*c+d*p+l,r+=n,f=o[i.OX3],d=o[i.OY3],e[r]=f*h+d*u+a,e[r+1]=f*c+d*p+l,r+=n,f=o[i.OX4],d=o[i.OY4],e[r]=f*h+d*u+a,e[r+1]=f*c+d*p+l},i.OX1=0,i.OY1=1,i.OX2=2,i.OY2=3,i.OX3=4,i.OY3=5,i.OX4=6,i.OY4=7,i.X1=0,i.Y1=1,i.C1R=2,i.C1G=3,i.C1B=4,i.C1A=5,i.U1=6,i.V1=7,i.X2=8,i.Y2=9,i.C2R=10,i.C2G=11,i.C2B=12,i.C2A=13,i.U2=14,i.V2=15,i.X3=16,i.Y3=17,i.C3R=18,i.C3G=19,i.C3B=20,i.C3A=21,i.U3=22,i.V3=23,i.X4=24,i.Y4=25,i.C4R=26,i.C4G=27,i.C4B=28,i.C4A=29,i.U4=30,i.V4=31,i}(t.Attachment);t.RegionAttachment=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t,e){this.jitterX=0,this.jitterY=0,this.jitterX=t,this.jitterY=e}return e.prototype.begin=function(t){},e.prototype.transform=function(e,i,r,n){e.x+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY),e.y+=t.MathUtils.randomTriangular(-this.jitterX,this.jitterY)},e.prototype.end=function(){},e}();t.JitterEffect=e}(t.core||(t.core={}))}(n||(n={})),function(t){!function(t){var e=function(){function e(t){this.centerX=0,this.centerY=0,this.radius=0,this.angle=0,this.worldX=0,this.worldY=0,this.radius=t}return e.prototype.begin=function(t){this.worldX=t.x+this.centerX,this.worldY=t.y+this.centerY},e.prototype.transform=function(i,r,n,o){var s=this.angle*t.MathUtils.degreesToRadians,a=i.x-this.worldX,l=i.y-this.worldY,h=Math.sqrt(a*a+l*l);if(h<this.radius){var u=e.interpolation.apply(0,s,(this.radius-h)/this.radius),c=Math.cos(u),p=Math.sin(u);i.x=c*a-p*l+this.worldX,i.y=p*a+c*l+this.worldY}},e.prototype.end=function(){},e.interpolation=new t.PowOut(2),e}();t.SwirlEffect=e}(t.core||(t.core={}))}(n||(n={})),Math.fround||(Math.fround=Math.fround=(r=new Float32Array(1),function(t){return r[0]=t,r[0]})),function(t){t.core.Bone.yDown=!0;var e=[0,0,0],i=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.region=null,e}return o(e,t),e}(PIXI.Sprite);t.SpineSprite=i;var r=function(t){function e(e,i,r,n,o){return t.call(this,e,i,r,n,o)||this}return o(e,t),e}(PIXI.mesh.Mesh);t.SpineMesh=r;var n=function(n){function a(e){var i=n.call(this)||this;if(!e)throw new Error("The spineData param is required.");if("string"==typeof e)throw new Error('spineData param cant be string. Please use spine.Spine.fromAtlas("YOUR_RESOURCE_NAME") from now on.');i.spineData=e,i.skeleton=new t.core.Skeleton(e),i.skeleton.updateWorldTransform(),i.stateData=new t.core.AnimationStateData(e),i.state=new t.core.AnimationState(i.stateData),i.slotContainers=[],i.tempClipContainers=[];for(var r=0,o=i.skeleton.slots.length;r<o;r++){var s=i.skeleton.slots[r],a=s.attachment,l=i.newContainer();if(i.slotContainers.push(l),i.addChild(l),i.tempClipContainers.push(null),a instanceof t.core.RegionAttachment){var h=a.region.name,u=i.createSprite(s,a,h);s.currentSprite=u,s.currentSpriteName=h,l.addChild(u)}else if(a instanceof t.core.MeshAttachment){var c=i.createMesh(s,a);s.currentMesh=c,s.currentMeshName=a.name,l.addChild(c)}else{if(!(a instanceof t.core.ClippingAttachment))continue;i.createGraphics(s,a),l.addChild(s.clippingContainer),l.addChild(s.currentGraphics)}}return i.autoUpdate=!0,i.tintRgb=new Float32Array([1,1,1]),i}return o(a,n),Object.defineProperty(a.prototype,"autoUpdate",{get:function(){return this.updateTransform===a.prototype.autoUpdateTransform},set:function(t){this.updateTransform=t?a.prototype.autoUpdateTransform:PIXI.Container.prototype.updateTransform},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tint",{get:function(){return PIXI.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=PIXI.utils.hex2rgb(t,this.tintRgb)},enumerable:!0,configurable:!0}),a.prototype.update=function(i){this.state.update(i),this.state.apply(this.skeleton),this.skeleton.updateWorldTransform();var r=this.skeleton.slots,n=this.color,o=null,a=null;n?(o=n.light,a=n.dark):o=this.tintRgb;for(var l=PIXI.TransformBase&&1==this.transformHack(),h=0,u=r.length;h<u;h++){var c=(M=r[h]).attachment,p=this.slotContainers[h];if(c){var f=null,d=c.color;if(c instanceof t.core.RegionAttachment){var g=c.region;if(g){M.currentMesh&&(M.currentMesh.visible=!1,M.currentMesh=null,M.currentMeshName=void 0);var m=g;if(!M.currentSpriteName||M.currentSpriteName!==m.name){var v=m.name;if(M.currentSprite&&(M.currentSprite.visible=!1),M.sprites=M.sprites||{},void 0!==M.sprites[v])M.sprites[v].visible=!0;else{var y=this.createSprite(M,c,v);p.addChild(y)}M.currentSprite=M.sprites[v],M.currentSpriteName=v}}if(p.transform){var _=b=p.transform,x=null;_.matrix2d?(x=_.matrix2d,_._dirtyVersion++,_.version=_._dirtyVersion,_.isStatic=!0,_.operMode=0):l?(_.position&&((b=new PIXI.TransformBase)._parentID=-1,b._worldID=p.transform._worldID,p.transform=b),x=b.localTransform):_.setFromMatrix(M.bone.matrix),x&&M.bone.matrix.copy(x)}else{x=p.localTransform||new PIXI.Matrix;M.bone.matrix.copy(x),p.localTransform=x,p.displayObjectUpdateTransform=s}M.currentSprite.color?f=M.currentSprite.color:(e[0]=o[0]*M.color.r*d.r,e[1]=o[1]*M.color.g*d.g,e[2]=o[2]*M.color.b*d.b,M.currentSprite.tint=PIXI.utils.rgb2hex(e)),M.currentSprite.blendMode=M.blendMode}else if(c instanceof t.core.MeshAttachment){var b;if(M.currentSprite)if(M.currentSprite.visible=!1,M.currentSprite=null,M.currentSpriteName=void 0,p.transform)(b=new PIXI.TransformStatic)._parentID=-1,b._worldID=p.transform._worldID,p.transform=b;else p.localTransform=new PIXI.Matrix,p.displayObjectUpdateTransform=PIXI.DisplayObject.prototype.updateTransform;if(!M.currentMeshName||M.currentMeshName!==c.name){var T=c.name;if(M.currentMesh&&(M.currentMesh.visible=!1),M.meshes=M.meshes||{},void 0!==M.meshes[T])M.meshes[T].visible=!0;else{var w=this.createMesh(M,c);p.addChild(w)}M.currentMesh=M.meshes[T],M.currentMeshName=T}if(c.computeWorldVerticesOld(M,M.currentMesh.vertices),M.currentMesh.color)f=M.currentMesh.color;else if("3"!==PIXI.VERSION[0]){var S=M.currentMesh.tintRgb;S[0]=o[0]*M.color.r*d.r,S[1]=o[1]*M.color.g*d.g,S[2]=o[2]*M.color.b*d.b}M.currentMesh.blendMode=M.blendMode}else{if(!(c instanceof t.core.ClippingAttachment)){p.visible=!1;continue}M.currentGraphics||(this.createGraphics(M,c),p.addChild(M.clippingContainer),p.addChild(M.currentGraphics)),this.updateGraphics(M,c)}if(p.visible=!0,f){var A=M.color.r*d.r,P=M.color.g*d.g,E=M.color.b*d.b;f.setLight(o[0]*A+a[0]*(1-A),o[1]*P+a[1]*(1-P),o[2]*E+a[2]*(1-E)),M.darkColor?(A=M.darkColor.r,P=M.darkColor.g,E=M.darkColor.b):(A=0,P=0,E=0),f.setDark(o[0]*A+a[0]*(1-A),o[1]*P+a[1]*(1-P),o[2]*E+a[2]*(1-E))}p.alpha=M.color.a}else p.visible=!1}var C=this.skeleton.drawOrder,O=null,I=null;for(h=0,u=C.length;h<u;h++){var M=r[C[h].data.index];p=this.slotContainers[C[h].data.index];if(I||p.parent!==this&&(p.parent.removeChild(p),p.parent=this),M.currentGraphics&&M.attachment)I=M.clippingContainer,O=M.attachment,I.children.length=0,this.children[h]=p,O.endSlot==M.data&&(O.endSlot=null);else if(I){var R=this.tempClipContainers[h];R||((R=this.tempClipContainers[h]=this.newContainer()).visible=!1),this.children[h]=R,p.parent=null,I.addChild(p),O.endSlot==M.data&&(I.renderable=!0,I=null,O=null)}else this.children[h]=p}},a.prototype.setSpriteRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.size?(e.scale.x=i.size.width/i.originalWidth,e.scale.y=-i.size.height/i.originalHeight):(e.scale.x=t.scaleX*t.width/i.originalWidth,e.scale.y=-t.scaleY*t.height/i.originalHeight)},a.prototype.setMeshRegion=function(t,e,i){e.region=i,e.texture=i.texture,i.texture._updateUvs(),t.updateUVs(i,e.uvs),e.dirty++},a.prototype.autoUpdateTransform=function(){if(a.globalAutoUpdate){this.lastTime=this.lastTime||Date.now();var t=.001*(Date.now()-this.lastTime);this.lastTime=Date.now(),this.update(t)}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},a.prototype.createSprite=function(e,i,r){var n=i.region;e.tempAttachment===i&&(n=e.tempRegion,e.tempAttachment=null,e.tempRegion=null);var o=n.texture,s=this.newSprite(o);return s.rotation=i.rotation*t.core.MathUtils.degRad,s.anchor.x=.5,s.anchor.y=.5,s.position.x=i.x,s.position.y=i.y,s.alpha=i.color.a,s.region=i.region,this.setSpriteRegion(i,s,i.region),e.sprites=e.sprites||{},e.sprites[r]=s,s},a.prototype.createMesh=function(t,e){var i=e.region;t.tempAttachment===e&&(i=t.tempRegion,t.tempAttachment=null,t.tempRegion=null);var r=this.newMesh(i.texture,new Float32Array(e.regionUVs.length),new Float32Array(e.regionUVs.length),new Uint16Array(e.triangles),PIXI.mesh.Mesh.DRAW_MODES.TRIANGLES);return r.canvasPadding=1.5,r.alpha=e.color.a,r.region=e.region,this.setMeshRegion(e,r,i),t.meshes=t.meshes||{},t.meshes[e.name]=r,r},a.prototype.createGraphics=function(t,e){var i=this.newGraphics(),r=new PIXI.Polygon([]);return i.clear(),i.beginFill(16777215,1),i.drawPolygon(r),i.renderable=!1,t.currentGraphics=i,t.clippingContainer=this.newContainer(),t.clippingContainer.mask=t.currentGraphics,i},a.prototype.updateGraphics=function(t,e){var i=t.currentGraphics.graphicsData[0].shape.points,r=e.worldVerticesLength;i.length=r,e.computeWorldVertices(t,0,r,i,0,2),t.currentGraphics.dirty++,t.currentGraphics.clearDirty++},a.prototype.hackTextureBySlotIndex=function(e,i,r){void 0===i&&(i=null),void 0===r&&(r=null);var n=this.skeleton.slots[e];if(!n)return!1;var o=n.attachment,s=o.region;return i&&((s=new t.core.TextureRegion).texture=i,s.size=r),n.currentSprite&&n.currentSprite.region!=s?(this.setSpriteRegion(o,n.currentSprite,s),n.currentSprite.region=s):n.currentMesh&&n.currentMesh.region!=s?this.setMeshRegion(o,n.currentMesh,s):(n.tempRegion=s,n.tempAttachment=o),!0},a.prototype.hackTextureBySlotName=function(t,e,i){void 0===e&&(e=null),void 0===i&&(i=null);var r=this.skeleton.findSlotIndex(t);return-1!=r&&this.hackTextureBySlotIndex(r,e,i)},a.prototype.newContainer=function(){return new PIXI.Container},a.prototype.newSprite=function(t){return new i(t)},a.prototype.newGraphics=function(){return new PIXI.Graphics},a.prototype.newMesh=function(t,e,i,n,o){return new r(t,e,i,n,o)},a.prototype.transformHack=function(){return 1},a.globalAutoUpdate=!0,a.clippingPolygon=[],a}(PIXI.Container);function s(){var t=this.parent.worldTransform,e=this.worldTransform,i=this.localTransform;e.a=i.a*t.a+i.b*t.c,e.b=i.a*t.b+i.b*t.d,e.c=i.c*t.a+i.d*t.c,e.d=i.c*t.b+i.d*t.d,e.tx=i.tx*t.a+i.ty*t.c+t.tx,e.ty=i.tx*t.b+i.ty*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha,this._currentBounds=null}t.Spine=n}(n||(n={})),function(t){PIXI.spine=t;var e=PIXI.Texture.prototype;e._updateUvs||(e._updateUvs=e.updateUvs)}(n||(n={})),function(t){function e(){return function(e,n){if(!e.data||!function(t){return t.type===PIXI.loaders.Resource.TYPE.JSON}(e)||!e.data.bones)return n();var o=e.metadata||{},s=o?e.metadata.spineSkeletonScale:null,a=o?e.metadata.spineAtlas:null;if(!1===a)return n();if(a&&a.pages){var l=new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(a)).readSkeletonData(e.data);return e.spineData=l,e.spineAtlas=a,n()}var h=o.spineAtlasSuffix||".atlas",u=e.url.substr(0,e.url.lastIndexOf("."))+h;e.metadata&&e.metadata.spineAtlasFile&&(u=e.metadata.spineAtlasFile),u=u.replace(this.baseUrl,"");var c={crossOrigin:e.crossOrigin,xhrType:PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT,metadata:o.spineMetadata||null,parentResource:e},p={crossOrigin:e.crossOrigin,metadata:o.imageMetadata||null,parentResource:e},f=e.url.substr(0,e.url.lastIndexOf("/")+1);f=f.replace(this.baseUrl,"");var d=o.images?r(o.images):o.image?r({default:o.image}):o.imageLoader?o.imageLoader(this,e.name+"_atlas_page_",f,p):i(this,e.name+"_atlas_page_",f,p),g=function(i){new t.core.TextureAtlas(i,d,(function(i){var r=new t.core.SkeletonJson(new t.core.AtlasAttachmentLoader(i));s&&(r.scale=s),e.spineData=r.readSkeletonData(e.data),e.spineAtlas=i,n()}))};e.metadata&&e.metadata.atlasRawData?g(e.metadata.atlasRawData):this.add(e.name+"_atlas",u,c,(function(t){g(t.xhr.responseText)}))}}function i(t,e,i,r){return i&&i.lastIndexOf("/")!==i.length-1&&(i+="/"),function(n,o){var s=e+n,a=i+n;t.add(s,a,r,(function(t){o(t.texture.baseTexture)}))}}function r(t){return function(e,i){var r=t[e]||t.default;r&&r.baseTexture?i(r.baseTexture):i(r)}}t.atlasParser=e,t.imageLoaderAdapter=i,t.syncImageLoaderAdapter=function(t,e){return t&&t.lastIndexOf("/")!==t.length-1&&(t+="/"),function(t,i){i(PIXI.BaseTexture.fromImage(t,e))}},t.staticImageLoader=r,PIXI.loaders.Loader.addPixiMiddleware(e),PIXI.loader.use(e())}(n||(n={}))},function(t,e,i){"use strict";(function(r){var n;void 0===(n=function(t){function e(){throw new Error("Cannot instance this class")}var n,o,s,a,l;for(i(13),e.prototype=Object.create(Object.prototype),e.prototype.constructor=e,Object.defineProperties(e.prototype,{}),PIXI.Event_pointercancel="pointercancel",PIXI.Event_pointerdown="pointerdown",PIXI.Event_pointermove="pointermove",PIXI.Event_pointerout="pointerout",PIXI.Event_pointerover="pointerover",PIXI.Event_pointertap="pointertap",PIXI.Event_pointerup="pointerup",PIXI.Event_pointerupoutside="pointerupoutside",Object.defineProperty(PIXI.DisplayObject.prototype,"draggable",{get:function(){return this._draggable},set:function(t){this._draggable=t,1==t?this.on("mousedown",this._onMouseDownUp).on("touchstart",this._onMouseDownUp).on("mouseup",this._onMouseDownUp).on("mouseupoutside",this._onMouseDownUp).on("touchend",this._onMouseDownUp).on("touchendoutside",this._onMouseDownUp).on("mousemove",this._onDragMove).on("touchmove",this._onDragMove):this.off("mousedown",this._onMouseDownUp).off("touchstart",this._onMouseDownUp).off("mouseup",this._onMouseDownUp).off("mouseupoutside",this._onMouseDownUp).off("touchend",this._onMouseDownUp).off("touchendoutside",this._onMouseDownUp).off("mousemove",this._onDragMove).off("touchmove",this._onDragMove)}}),Object.defineProperty(PIXI.DisplayObject.prototype,"dragBounding",{value:null,writable:!0}),Object.defineProperty(PIXI.DisplayObject.prototype,"_regionDragBounding",{value:null,writable:!0}),Object.defineProperty(PIXI.DisplayObject.prototype,"visibleDragBounding",{get:function(){return!!this._regionDragBounding},set:function(t){t?!this._regionDragBounding&&this.dragBounding&&(this._regionDragBounding=new PIXI.Graphics,this._regionDragBounding.name="dragBounding",this._regionDragBounding.beginFill(0,.5),this._regionDragBounding.drawRect(this.dragBounding.x,this.dragBounding.y,this.dragBounding.width,this.dragBounding.height),this._regionDragBounding.visible=!0,this.parent.addChild(this._regionDragBounding)):this._regionDragBounding&&(this.parent.removeChild(this._regionDragBounding),this._regionDragBounding=null)}}),Object.defineProperty(PIXI.DisplayObject.prototype,"isOverlap",{value:!1,writable:!0}),Object.defineProperty(PIXI.DisplayObject.prototype,"mouseChildren",{set:function(t){if(this.children&&this.children.length>0)for(var e=0;e<this.children.length;e++)this.children[e].interactive=t}}),PIXI.utils.EventEmitter.prototype.pointerCancel=function(t,e,i){i?this.once(PIXI.Event_pointercancel,t,e):this.on(PIXI.Event_pointercancel,t,e)},PIXI.utils.EventEmitter.prototype.pointerDown=function(t,e,i){i?this.once(PIXI.Event_pointerdown,t,e):this.on(PIXI.Event_pointerdown,t,e)},PIXI.utils.EventEmitter.prototype.pointerMove=function(t,e,i){i?this.once(PIXI.Event_pointermove,t,e):this.on(PIXI.Event_pointermove,t,e)},PIXI.utils.EventEmitter.prototype.pointerOut=function(t,e,i){i?this.once(PIXI.Event_pointerout,t,e):this.on(PIXI.Event_pointerout,t,e)},PIXI.utils.EventEmitter.prototype.pointerOver=function(t,e,i){i?this.once(PIXI.Event_pointerover,t,e):this.on(PIXI.Event_pointerover,t,e)},PIXI.utils.EventEmitter.prototype.pointerTap=function(t,e,i){i?this.once(PIXI.Event_pointertap,t,e):this.on(PIXI.Event_pointertap,t,e)},PIXI.utils.EventEmitter.prototype.pointerUp=function(t,e,i){i?this.once(PIXI.Event_pointerup,t,e):this.on(PIXI.Event_pointerup,t,e)},PIXI.utils.EventEmitter.prototype.pointerUpOutSide=function(t,e,i){i?this.once(PIXI.Event_pointerupoutside,t,e):this.on(PIXI.Event_pointerupoutside,t,e)},PIXI.DisplayObject.prototype.startDrag=function(t){t=null==t?null:t,this.dragBounding=t,this.dragging=!0,this.draggable||(this.draggable=!0)},PIXI.DisplayObject.prototype.stopDrag=function(){this.dragBounding=null,this.dragging=!1},PIXI.Point.prototype.rotate=function(t,e){void 0===e&&(e=new PIXI.Point);var i=this.x,r=this.y,n=Math.cos(t),o=Math.sin(t);return this.x=(i-e.x)*n-(r-e.y)*o+e.x,this.y=(i-e.x)*o+(r-e.y)*n+e.y,this},PIXI.Graphics.prototype.drawRoundRectComplex=function(t,e,i,r,n,o,s,a){this.moveTo(t,e+n),this.quadraticCurveTo(t+n/4,e+n/4,t+n,e),this.lineTo(t+i-o,e),this.quadraticCurveTo(t+i-o/4,e+o/4,t+i,e+o),this.lineTo(t+i,e+r-s),this.quadraticCurveTo(t+i-s/4,e+r-s/4,t+i-s,e+r),this.lineTo(t+a,e+r),this.quadraticCurveTo(t+a/4,e+r-a/4,t,e+r-a)},PIXI.Graphics.prototype.DrawDashedLine=function(t,e,i,r,n,o,s,a){o=o||1,n=n||16777215,s=s||1,(a=a||10)<6&&(a=6),a>20&&(a=20);var l=Math.abs(i-t),h=Math.abs(r-e),u=Math.sqrt(l*l+h*h);if(this.lineStyle(o,n,s),u<2*a)return this.moveTo(t,e),void this.lineTo(i,r);for(var c,p,f=t,d=e,g=a/u*(i-t),m=a/u*(r-e),v=g/2,y=m/2,_=0;Math.abs(f-t)<l||Math.abs(d-e)<h;){if(_%2==0){if(this.moveTo(f,d),c=f+g,p=d+m,Math.abs(c-t)>=l&&(c=i),Math.abs(p-t)>=h&&(p=r),f=c,d=p,this.lineTo(f,d),c==i&&p==r)break}else f+=v,d+=y;_++}c==i&&p==r||(this.moveTo(c,p),this.lineTo(i,r))},Object.defineProperties(PIXI.DisplayObject.prototype,{_draggable:{value:!1,writable:!0},_timeClick:{value:0,writable:!0},_mouseclickcallback:{value:null,writable:!0},mouseclick:{get:function(){return this._mouseclickcallback},set:function(t){null!=this._mouseclickcallback&&this.off("click",this._mouseclickcallback),this.mousedbclick?this._mouseclickcallback=function(){var e=performance.now();TweenMax.delayedCall(PreLoaderConfig.TimeDoubleClick/1e3,t),e-this._timeClick<PreLoaderConfig.TimeDoubleClick&&(TweenMax.killTweensOf(t),this._mousedbclickcallback()),this._timeClick=e}.bind(this):this._mouseclickcallback=t,null!=this._mouseclickcallback&&this.on("click",this._mouseclickcallback)}},_mousedbclickcallback:{value:null,writable:!0},mousedbclick:{get:function(){return this._mousedbclickcallback},set:function(t){this._mousedbclickcallback=t}},_data:{value:null,writable:!0},_deltaMouseMoveX:{value:0,writable:!0},_deltaMouseMoveY:{value:0,writable:!0},_pointMouseDownX:{value:0,writable:!0},_pointMouseDownY:{value:0,writable:!0},scaleX:{get:function(){return this.scale.x},set:function(t){this.scale.x=t}},scaleY:{get:function(){return this.scale.y},set:function(t){this.scale.y=t}},touchstart:{get:function(){return this.mousedown}},touchend:{get:function(){return this.mouseup}},touchendoutside:{get:function(){return this.mouseupoutside}},touchcancel:{get:function(){return this.mouseupoutside}},tap:{get:function(){return this.mouseclick}}}),Object.defineProperties(PIXI.Container.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position&&this.position.set(Math.round(t),this.y)}},y:{get:function(){return this.position.y},set:function(t){this.position&&this.position.set(this.x,Math.round(t))}}}),Object.defineProperties(PIXI.Graphics.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.set(Math.round(t),this.y)}},y:{get:function(){return this.position.y},set:function(t){this.position.set(this.x,Math.round(t))}}}),Object.defineProperties(PIXI.Sprite.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.set(Math.round(t),this.y)}},y:{get:function(){return this.position.y},set:function(t){this.position.set(this.x,Math.round(t))}}}),Object.defineProperties(PIXI.Text.prototype,{x:{get:function(){return this.position.x},set:function(t){this.position.set(Math.round(t),this.y)}},y:{get:function(){return this.position.y},set:function(t){this.position.set(this.x,Math.round(t))}},dropTarget:{value:null,writable:!0}}),PIXI.DisplayObject.prototype._onDragMove=function(t){if(this.dragging&&this.data){var e=this.data.getLocalPosition(this.parent),i=e.x+this.deltaX,r=e.y+this.deltaY;if(this.dragBounding&&(i<this.dragBounding.x?i=this.dragBounding.x:i>this.dragBounding.x+this.dragBounding.width&&(i=this.dragBounding.x+this.dragBounding.width),r<this.dragBounding.y?r=this.dragBounding.y:r>this.dragBounding.y+this.dragBounding.height&&(r=this.dragBounding.y+this.dragBounding.height)),this.x=i,this.y=r,this.isOverlap)for(var n,o,s=this.parent.numChildren,a=this.data.global.x,l=this.data.global.y,h=s-1;h>=0;h--){if((n=this.parent.getChildAt(h)).visible)if(this!==n)if(!(n.name&&n.name.indexOf("dragBounding")>-1))if(a>(o=n.getBounds()).x&&a<o.x+o.width&&l>o.y&&l<o.y+o.height){this.dropTarget=n;break}}}},PIXI.DisplayObject.prototype._onMouseDownUp=function(t){switch(t.type){case"mousedown":case"touchstart":this.data=t.data;var e=this.data.getLocalPosition(this.parent);this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.dropTarget=null;break;case"mouseup":case"touchend":if(this.data)for(var i,r,n=this.data.global.x,o=this.data.global.y,s=(this.deltaX,this.deltaY,this.parent.numChildren-1);s>=0;s--){if((i=this.parent.getChildAt(s)).visible)if(this!==i)if(!(i.name&&i.name.indexOf("dragBounding")>-1))if(n>(r=i.getBounds()).x&&n<r.x+r.width&&o>r.y&&o<r.y+r.height){this.dropTarget=i;break}}this.data=null;break;case"mouseupoutside":case"touchendoutside":this.data=null,this.dragging=!1}},Object.defineProperties(PIXI.Container.prototype,{numChildren:{get:function(){return this.children.length}}}),PIXI.DisplayObject.prototype.setToCenterScreen=function(){"undefined"!=typeof AppInfo?(this.x=AppInfo.appRealWidth-this.width>>1,this.y=AppInfo.appRealHeight-this.height>>1):(this.x=this.stage.stageWidth-this.width>>1,this.y=this.stage.stageHeight-this.height>>1)},PIXI.DisplayObject.prototype.setXToCenterScreen=function(){"undefined"!=typeof AppInfo?this.x=AppInfo.appRealWidth-this.width>>1:this.x=this.stage.stageWidth-this.width>>1},PIXI.DisplayObject.prototype.setYToCenterScreen=function(){"undefined"!=typeof AppInfo?this.y=AppInfo.appRealHeight-this.height>>1:this.y=this.stage.stageHeight-this.height>>1},PIXI.Graphics.Rectangle=function(t,e,i,r,n,o,s,a,l){return(new PIXI.Graphics).beginFill(n,o).lineStyle(s,a,l).drawRect(t,e,i,r).endFill()},PIXI.Graphics.RoundedRect=function(t,e,i,r,n,o,s,a,l,h){return(new PIXI.Graphics).beginFill(o,s).lineStyle(a,l,h).drawRoundedRect(t,e,i,r,n).endFill()},PIXI.Graphics.Triangle=function(t,e,i,r,n,o){return(new PIXI.Graphics).beginFill(e,i).lineStyle(r,n,o).drawPolygon(t).endFill()},PIXI.Graphics.RoundedRectComplex=function(t,e,i,r,n,o,s,a,l,h,u,c,p){var f,d,g,m,v,y,_,x,b,T,w,S,A,P,E,C,O,I,M,R,D,k,L,N,F=new PIXI.Graphics;return g=f=t+i,m=(d=e)+o,_=(v=f)-s,x=y=d+r,S=(w=b=t)-a,E=(A=t)+n,C=P=e,O=f-o,I=d,L=v,N=y-s,D=b+a,k=T=e+r,M=A,R=P+n,F.beginFill(l,h).lineStyle(u,c,p),F.moveTo(E,C),F.lineTo(O,I),F.arcTo(f,d,g,m,o),F.lineTo(L,N),F.arcTo(v,y,_,x,s),F.lineTo(D,k),F.arcTo(b,T,w,S,a),F.lineTo(M,R),F.arcTo(A,P,E,C,n),F.endFill(),F},PIXI.Graphics.Circle=function(t,e,i,r,n,o,s,a){return(new PIXI.Graphics).beginFill(r,n).lineStyle(o,s,a).drawCircle(t,e,i).endFill()},PIXI.Graphics.Ellipse=function(t,e,i,r,n,o,s,a,l){return(new PIXI.Graphics).beginFill(n,o).lineStyle(s,a,l).drawEllipse(t,e,i,r).endFill()},o=function(t){return(t-90)*Math.PI/180},s=0,a=(l=["drawArc","drawSlice"]).length;s<a;s++)n=l[s],PIXI.Graphics.prototype[n];PIXI.Graphics.prototype.drawArc=function(t,e,i,r,n){var s,a,l,h,u,c,p;for(s=(h=n-r)/(l=Math.ceil(Math.abs(Math.sqrt(1-Math.pow(1-Math.min(i/60,1),2))*h*i*.01))),a=p=1;1<=l?p<=l:p>=l;a=1<=l?++p:--p)u=t+Math.cos(o(r+s*a))*i,c=e+Math.sin(o(r+s*a))*i,this.lineTo(u,c);return this},PIXI.Graphics.prototype.drawSlice=function(t,e,i,r,n,s){var a,l;return a=t+Math.cos(o(i))*s,l=e+Math.sin(o(i))*s,this.moveTo(a,l),this.drawArc(t,e,s,i,r),this.lineTo(t+Math.cos(o(r))*n,e+Math.sin(o(r))*n),this.drawArc(t,e,n,r,i),this.lineTo(a,l),this},PIXI.Container.prototype.contains=function(t){return-1!==this.children.indexOf(t)},Array.ASC=function(t,e){return t-e},Array.DESC=function(t,e){return e-t},Object.defineProperties(PIXI.filters.GlowFilter.prototype,{distance:{get:function(){return this.uniforms.distance.value},set:function(t){this.uniforms.distance.value=t}}}),PIXI.MultiStyleText.prototype.wordWrap=function(t){for(var e=/(\<[\<\>\/a-zA-Z]+\>)/gi,i=[],r="",n=t.split("\n"),o=this._style.wordWrapWidth,s=0;s<n.length;s++){var a,l=o,h=[],u=[],c=n[s].split(" ");for(a=0;a<c.length;a++)if(c[a].search(e)>=0){u=c[a].split(e);for(var p=0;p<u.length;p++)""!=u[p]&&h.push(u[p])}else h.push(c[a]);for(a=0;a<h.length;a++)if(h[a].search(e)<0){var f=this.context.measureText(h[a]).width,d=f+4;0===a||d>l?(a>0&&(r+="\n",i.push(r.length)),r+=h[a],l=o-f):(l-=d,r+=" "+h[a])}else r+=h[a];s<n.length-1&&(r+="\n")}return r};function h(t){PIXI.Container.call(this),this.isHorizontal=t||!1,this._wChild=0,this._hChild=0,this._lasChildPos={x:0,y:0,width:0,height:0},this._space=0,this._reverse=!1}return PIXI.loaders.Resource.prototype._loadImage=function(){this.data=new Image,this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.data.src=this.url+"?"+r.gameUrlArgs,this.isImage=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},PIXI.loaders.Resource.prototype._loadElement=function(t){this.metadata.loadElement?this.data=this.metadata.loadElement:"image"===t&&void 0!==window.Image?this.data=new Image:this.data=document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource?this.data.src&&-1==this.data.src.indexOf("?"+r.gameUrlArgs)&&(this.data.src=this.data.src+"?"+r.gameUrlArgs):this.data.src=this.url+"?"+r.gameUrlArgs,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},PIXI.loaders.Resource.prototype._loadSourceElement=function(t){if(this.metadata.loadElement?this.data=this.metadata.loadElement:"audio"===t&&void 0!==window.Audio?this.data=new Audio:this.data=document.createElement(t),null!==this.data){if(this.metadata.skipSource)this.data.src&&-1==this.data.src.indexOf("?"+r.gameUrlArgs)&&(this.data.src=this.data.src+"?"+r.gameUrlArgs);else if(navigator.isCocoonJS)this.data.src=(Array.isArray(this.url)?this.url[0]:this.url)+"?"+r.gameUrlArgs;else if(Array.isArray(this.url))for(var e=0;e<this.url.length;++e)this.data.appendChild(this._createSource(t,this.url[e]+"?"+r.gameUrlArgs));else this.data.appendChild(this._createSource(t,this.url+"?"+r.gameUrlArgs));this["is"+t[0].toUpperCase()+t.substring(1)]=!0,this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element "+t)},PIXI.loaders.Resource.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XMLHttpRequest;t.open("GET",this.url+"?"+r.gameUrlArgs,!0),this.xhrType===PIXI.loaders.Resource.XHR_RESPONSE_TYPE.JSON||this.xhrType===PIXI.loaders.Resource.XHR_RESPONSE_TYPE.DOCUMENT?t.responseType=PIXI.loaders.Resource.XHR_RESPONSE_TYPE.TEXT:t.responseType=this.xhrType,t.addEventListener("error",this._boundXhrOnError,!1),t.addEventListener("abort",this._boundXhrOnAbort,!1),t.addEventListener("progress",this._boundOnProgress,!1),t.addEventListener("load",this._boundXhrOnLoad,!1),t.send()},PIXI.loaders.Resource.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url+"?"+r.gameUrlArgs,!0),setTimeout((function(){t.send()}),0)},PIXI.interaction.InteractionManager.prototype.mapPositionToPoint=function(t,e,i){var n;n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var o=navigator.isCocoonJS?this.resolution:1/this.resolution;if(t.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*o,t.y=(i-n.top)*(this.interactionDOMElement.height/n.height)*o,90==r.canvasRotation){var s=t.x,a=t.y;"undefined"!=typeof AppInfo?(t.x=a/AppInfo.appRealHeight*AppInfo.appRealWidth,t.y=-s/AppInfo.appRealWidth*AppInfo.appRealHeight+AppInfo.appRealHeight):(t.x=a/PreLoaderConfig.AppRealHeight*PreLoaderConfig.AppRealWidth,t.y=-s/PreLoaderConfig.AppRealWidth*PreLoaderConfig.AppRealHeight+PreLoaderConfig.AppRealHeight)}},Object.defineProperties(PIXI.extras.AnimatedSprite.prototype,{lastFrame:{value:0,writable:!0},onUpdate:{value:null,writable:!0},textures:{get:function(){return this._textures},set:function(t){if(t[0]instanceof PIXI.Texture)this._textures=t,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<t.length;e++)this._textures.push(t[e].texture),this._durations.push(t[e].time)}this.gotoAndStop(0),this.updateTexture(),this.gotoAndPlay(0)}}}),Object.defineProperties(PIXI.spine.Spine.prototype,{_totalFrame:{value:-1,writable:!0},totalFrame:{get:function(){return-1==this._totalFrame?PIXI.spine.globalTotalFrame:this._totalFrame},set:function(t){this._totalFrame=t}},elapsedFrame:{value:0,writable:!0},_fpsInterval:{value:0,writable:!0},fpsInterval:{get:function(){return 0==this._fpsInterval?1e3/PIXI.spine.Spine.globalTotalFrame:this._fpsInterval},set:function(t){this._fpsInterval=1e3/t}},_startTimeFPS:{value:0,writable:!0},startTimeFPS:{get:function(){return 0==this._startTimeFPS?(this._startTimeFPS,performance.now(),this._startTimeFPS):this._startTimeFPS},set:function(t){this._startTimeFPS=t}}}),PIXI.spine.Spine.globalTotalFrame=60,PIXI.spine.Spine.prototype.autoUpdateTransform=function(){if(PIXI.spine.Spine.globalAutoUpdate){if(this.elapsedFrame=performance.now()-this.startTimeFPS,this.elapsedFrame>=this.fpsInterval){this.startTimeFPS=performance.now(),this.lastTime=this.lastTime||performance.now();var t=.001*(performance.now()-this.lastTime);this.lastTime=performance.now(),this.update(t)}}else this.lastTime=0;PIXI.Container.prototype.updateTransform.call(this)},PIXI.spine.Spine.prototype.destroy=function(t){for(var e=0,i=this.skeleton.slots.length;e<i;e++){var r=this.skeleton.slots[e];for(var n in r.meshes)r.meshes[n].destroy(t);for(var o in r.meshes=null,r.sprites)r.sprites[o].destroy(t);r.sprites=null}for(e=0,i=this.slotContainers.length;e<i;e++)this.slotContainers[e].destroy(t);this.spineData=null,this.skeleton=null,this.slotContainers=null,this.stateData=null,this.state=null,this.tempClipContainers=null,PIXI.Container.prototype.destroy.call(this,t)},h.prototype=Object.create(PIXI.Container.prototype),h.prototype.constructor=h,Object.defineProperties(PIXI.Container.prototype,{isHorizontal:{get:function(){return this._isHorizontal},set:function(t){this._isHorizontal=t}},spaceChild:{get:function(){return this._space},set:function(t){this._space=t}},widthChild:{get:function(){return this._wChild},set:function(t){this._wChild=t}},heightChild:{get:function(){return this._hChild},set:function(t){this._hChild=t}},useReverse:{get:function(){return this._reverse},set:function(t){this._reverse=t}}}),h.prototype.drawChild=function(){var t,e=0;if(this._lasChildPos=0,this._reverse)for(t=0;t<this.children.length;t++)this.children[t].visible&&(this._updateChildReverse(this.children[t],e),e++);else for(t=0;t<this.children.length;t++)this.children[t].visible&&(this._updateChild(this.children[t],e),e++)},h.prototype._updateChild=function(t,e){var i=0!==this._wChild?this._wChild:this._lasChildPos.width,r=0!==this._hChild?this._hChild:this._lasChildPos.height,n=0===e?0:this.spaceChild;this.isHorizontal?t.position.set(this._lasChildPos.x+i+n,0):t.position.set(0,this._lasChildPos.y+r+n),this._lasChildPos=t},h.prototype._updateChildReverse=function(t,e){var i=0!==this._wChild?this._wChild:t.width,r=0!==this._hChild?this._hChild:t.height,n=0===e?0:this.spaceChild;this.isHorizontal?t.position.set(this._lasChildPos.x-i-n,0):t.position.set(0,this._lasChildPos.y-r-n),this._lasChildPos=t},PIXI.StackLayout=h,PIXI}.call(e,i,e,t))||(t.exports=n)}).call(this,i(3))}]);