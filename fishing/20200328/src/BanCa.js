(window.webpackJsonp=window.webpackJsonp||[]).push([[0],Array(69).concat([function(e,t,i){"use strict";i.r(t);const s=PIXI.Container;var o=class extends s{constructor(){super(),this.isDisposed=!0}updateBackground(){Utilities.warn("not yet implement IGame.prototype.updateBackground")}init(){Utilities.warn("not yet implement IGame.prototype.init")}dispose(){Utilities.warn("not yet implement IGame.prototype.dispose")}onResize(e){Utilities.warn("not yet implement IGame.prototype.onResize")}clearUI(){Utilities.warn("not yet implement IGame.prototype.clearUI")}processGameDataForViewer(e){Utilities.warn("not yet implement IGame.prototype.processGameDataForViewer")}updatePosition(e,t){Utilities.warn("not yet implement IGame.prototype.updatePosition")}addUserSit(e){Utilities.warn("not yet implement IGame.prototype.addUserSit")}userLeaveGame(e,t){Utilities.warn("not yet implement IGame.prototype.userLeaveGame")}},n=i(19),a=i(7);const h=PreLoaderConfig.Tikitaka;a.a.LoginGame={Main:100+h,Sub:{loginGameSuccess:2,loginGameFail:3,loginWeb:5,iniciarJuego:14},HandleCode:{ERR_GP_ERROR_UNKNOW:0,ERR_GP_ERROR_ROOM_FUIL:20,NOT_ENOUGHT_COIN:59},Document:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20595 phần 2.1"},a.a.JoinServerGameInfo={Main:101+h,Sub:{listUserOnlineInfo:1,listUserNetCutInfo:2,boardInfo:3},HandleCode:{ERR_GR_LIST_PART:11,ERR_GR_LIST_FINISH:12},Document:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20595 phần 2.2"},a.a.UserActionInfo={Main:102+h,Sub:{userUp:1,userSit:2,userCome:5,userLeft:6},HandleCode:{ERR_GR_LEFT_SUCCESS:0,ASS_GR_ROOM_QUEUE_READY:13,ERR_GR_SIT_SUCCESS:50},Document:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20595 phần 2.8"},a.a.StartGame={Main:150+h,Sub:{start:1},Document:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20596 phần 1. Message Input"},a.a.GunSkillInfo={Main:2222+h,Sub:{gunSkillInfo:101,gunDragonInfo:107,gunTrace:1004,useBossSkillResponse:2005}},a.a.GameNotifyInfo={Main:180+h,Sub:{userFire:2,userCatchFish:3,getSkillList:32,userSkill:33,skillCatchFish:34,gunSkillFireSpecial:36,fishTrace:101,bulletTrace:104,catchFishTrace:105,startCaTran:111,endCaTran:113,bossInfo:128,starBossMap:141,fishInsideFish:142,bossMapInfo:150,bossMapDie:151,hitBossMap:152,listSpecialGun:153,skillList:154,userUseSkill:155,startBossFish:157,stopFreeBullet:160,levelUp:161,bonusGif:205,userHitFish:733,specialFish:1001,boomDie:1002,specialDieFish:1003,skillCatchFishResult:1013,skillCatchFishBattleResult:1014,fishItemTrace:1015,catchFishItem:1016,updateMoneyUser:1017,winJackpot:2001},HandleCode:{ERR_GR_LEVEL_SUCCESS:0},Document:{userFire:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20591",userHitFish:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20594",fishTrace:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20591",bulletTrace:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20591",hitFishTrace:"http://wiki.hoanglinhonline.com/#/ProjectFunction/View/20594"}},a.a.KickUserOutGameInfo={Main:221+h,Sub:{kickOutGame:1},HandleCode:{ERR_GP_ERROR_OTHER_SESSION:0}},a.a.PopupNotify={Main:223+h,Sub:{popupNotifyNormal:1,popupNotifyBigFishDie:2,notifyBigWin:3},HandleCode:{}},a.a.GiftBox={Main:2234+h,Sub:{giftBoxHealthUpdate:201},HandleCode:{}},a.a.UserLog={Main:69+h,Sub:{userLog:0},HandleCode:{}},a.a.BonusGame={Main:2235+h,Sub:{BonusLuckySpin:101,BonusLuckyBox:111,ChoiceBox:112,ResultBonusLuckyBox:113,FishAreaGame:{FishArea:114,EndFishArea:115,UserFireFishArea:116,UserFireReceiveFishArea:117,UserCatchFishFishArea:118,UserCatchFishTraceFishArea:119,UserCatchFishSpecial:120,FishSpecialDie:121,UserHitFishInArea:122},BonusCollectGame:{CollectInfo:130,StartGame:131,ChoiceItem:132,ResponseItemChoice:133,ChoiceItemShell:135,ResponseItemShellChoice:136,ChoiceItemChest:137,ResponseItemChestChoice:138}},HandleCode:{}},a.a.ContentFishTrace={Main:1241+h,Sub:{ContentSetUp:1,FishTrace:2,ContentFileSetUp:11,FishTraceFile:12},HandleCode:{}},a.a.GuildInfo={Main:2240+h,Sub:{MyGuildInfo:150,GuildInfoNewComer:151,GuildInfoUserInGame:152}},a.a.ChatInfo={Main:2340+h,Sub:{userChat:1}},a.a.GemInfo={Main:2400+h,Sub:{gemUp:1,getGemLeaveRoom:2}},a.a.MissionInGame={Main:2341+h,Sub:{missionInfo:3,missionComplete:4,missionCompleteResponse:5,missionUpdate:6,missionDailyInGame:7}},a.a.ItemInGame={Main:2350+h,Sub:{userUseItem:1,userGetItem:3,userUseItemSkill:5}},a.a.TickerGame={Main:2450+h,Sub:{getTicker:1}},a.a.OtherAction={Main:229+h,Sub:{renewalRecharge:2}},a.a.TournamentInGame={Main:701+h,Sub:{fishTrace:1,bossAttack:2,leaderBoard:3,gameTourInfo:4,startGameTour:5,startWave:6,endWave:7,fishAttack:8,killBossBonus:9,bossKillAll:10,endGame:11,bloodFish:12,userHeal:13,jackpot:14,clearFish:15,buyItemInGame:16,configShopTour:17}},a.a.ValidChangeCardPoint={Main:1100+h,Sub:{status:1},HandleCode:{}},a.a.BotInfo={Main:1200+h,Sub:{listBot:1},HandleCode:{}},a.a.SkillInfo={Main:1023+h,Sub:{skillAvailable:1,activeSkill:2,userSkill:3,endSkill:4},HandleCode:{}},a.a.SecondWallet={Main:1024+h,Sub:{start:1},HandleCode:{startInfo:0,update:1,end:2}},a.a.BattleBossMedusa={Main:1203+h,Sub:{joinRoom:1,ready:2,positionUser:3,bossAttack:4,userBeAttacked:5,statueBroken:6,positionEye:7,angleEye:8,releaseEye:9,endGame:10,listMission:11,completeMission:12,infoHitBoss:13,fireEye:14,releaseBoss:15,accumulatePoints:16,infoSummonBoss:19,collectGun:20,realCoin:21},HandleCode:{lose:0,win:1}},a.a.SeverMessageGame={Main:1025+h,Sub:{messageInfo:1},HandleCode:{}};var l=a.a,r=i(1),p=i(0);class d extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage(),p.a.preLoader.StopTimeConnectGame();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.LoginGame.Sub.loginGameSuccess)if(i==RequestKeys.LoginGame.HandleCode.ERR_GP_ERROR_UNKNOW){let t;p.a.MyInfo.gamePower=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),p.a.MyInfo.masterPower=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.GameInfo.roomRule=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.GameInfo.lessPoint=e.getUint32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.GameInfo.maxPoint=e.getUint32(s=DataView.calculateByteIndexInt32(s+=4),!0),Utilities.warn("LoginGameHandler - Phải thêm 4 byte nữa mới đọc đúng chỗ lấy userID"),s+=4,p.a.MyInfo.userID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.experence=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.accID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.point=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.money=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),p.a.MyInfo.bank=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0),p.a.MyInfo.winCount=e.getUint32(s=DataView.calculateByteIndexInt32(s+=8),!0),p.a.MyInfo.lostCount=e.getUint32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.cutCount=e.getUint32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.midCount=e.getUint32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.name=e.getStringUint8(s+=4,61),p.a.MyInfo.className=e.getStringUint8(s+=61,61),p.a.MyInfo.logoID=e.getUint32(s=DataView.calculateByteIndexInt32(s+=61),!0),p.a.MyInfo.deskNo=e.getInt8(s=DataView.calculateByteIndexInt8(s+=4),!0),p.a.MyInfo.deskStation=e.getInt8(s=DataView.calculateByteIndexInt8(s+=1),!0),p.a.MyInfo.userState=e.getInt8(s=DataView.calculateByteIndexInt8(s+=1),!0),p.a.MyInfo.member=e.getInt8(s=DataView.calculateByteIndexInt8(s+=1),!0),p.a.MyInfo.gameMaster=e.getInt8(s=DataView.calculateByteIndexInt8(s+=1),!0),p.a.MyInfo.userIP=e.getInt32(s+=1,!0),p.a.MyInfo.boy=e.getInt8(s=DataView.calculateByteIndexInt8(s+=4),!0),Utilities.warn("LoginGameHandler - Phải thêm 5 byte nữa mới đọc đúng chỗ lấy nickName"),s+=5,p.a.MyInfo.nickName=e.getStringUint8(s+=1,61),p.a.MyInfo.deskBasePoint=e.getUint32(s+=61,!0),p.a.MyInfo.fascination=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.vipTime=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.doublePointTime=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.protectTime=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.virtual=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.tax=e.getUint32(s+=4,!0),p.a.MyInfo.occupation=e.getStringUint8(s+=4,61),p.a.MyInfo.phoneNum=e.getStringUint8(s+=61,61),p.a.MyInfo.adrProvince=e.getStringUint8(s+=61,61),p.a.MyInfo.adrCity=e.getStringUint8(s+=61,61),p.a.MyInfo.zone=e.getStringUint8(s+=61,61),p.a.MyInfo.haveVideo=e.getInt8(s=DataView.calculateByteIndexInt8(s+=61),!0),p.a.MyInfo.signDescr=e.getStringUint8(s+=1,128),p.a.MyInfo.userType=e.getInt32(s=DataView.calculateByteIndexInt32(s+=128),!0),p.a.MyInfo.userInfoEx1=e.getUint32(s+=4,!0),p.a.MyInfo.userInfoEx2=e.getUint32(s+=4,!0),p.a.MyInfo.trader=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.matchID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.contestScore=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),p.a.MyInfo.contestCount=e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0),p.a.MyInfo.timeLeft=e.getStringUint8(s+=4,8),p.a.MyInfo.rankNum=e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0),p.a.MyInfo.remainPeople=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.award=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.levelUserInfo=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.expUserInfo=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),p.a.MyInfo.fullNameInfo=e.getStringUint8(s+=8,20),s+=620,p.a.MyInfo.isOpen=e.getInt8(s=DataView.calculateByteIndexInt8(s),!0),Utilities.warn("LoginGameHandler - Ở trên đã có thông tin money, dưới này không hiểu là money gì"),t=p.a.MyInfo.money,p.a.MyInfo.money=e.getInt64(s=DataView.calculateByteIndexInt64(s+=1),!0),p.a.MyInfo.money=t,p.a.MyInfo.minMoney=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0),p.a.MyInfo.count=e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0),p.a.MyInfo.total=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.time=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.resultCode=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.lessPoint=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.virtualUser=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.presentCoinNum=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.contestID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.lowCount=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.chip=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),p.a.MyInfo.timeStart=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0),p.a.MyInfo.timeEnd=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0),p.a.MyInfo.lowChip=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0),p.a.MyInfo.timeOut=e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0),p.a.MyInfo.basePoint=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p.a.MyInfo.grmUser=e.getInt8(s=DataView.calculateByteIndexInt8(s+=4),!0),p.a.MyInfo.grmRoom=e.getInt8(s=DataView.calculateByteIndexInt8(s+=1),!0),p.a.MyInfo.alWinAndLostAutoCtrl=e.getInt8(s=DataView.calculateByteIndexInt8(s+=1),!0),p.a.MyInfo.resetAllHaveWinMoney=e.getInt64(s=DataView.calculateByteIndexInt64(s+=41),!0),p.a.MyInfo.allHaveWinMoney=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0),p.a.MyInfo.winProbCtrl=e.getInt8(s=DataView.calculateByteIndexInt8(s+=8),!0),p.a.MyInfo.listSpecialGun=[],p.a.preLoader.requestController.setLanguageGame(p.a.gameSetting.language.key.length,p.a.gameSetting.language.key),Utilities.warn("LoginGameHandler - Thông tin lấy được sau khi điểu chỉnh byteIndex thủ công gồm userID: "+p.a.MyInfo.userID+", nickName: "+p.a.MyInfo.nickName+", money: "+p.a.MyInfo.money),Utilities.warn("LoginGameHandler - Kết thúc hàm lấy info của user login, độ dài data gồm cả header là "+e.byteLength+", byteIndex hiện tại đã đọc đến "+s),Utilities.warn("LoginGameHandler - Login thành công, chuyển đến game screen và chờ message user online info để build hoàn chỉnh thông tin user login gồm position"),p.a.GameInfo.tournamentRoom?(p.a.GameInfo.accpectTournament=!1,p.a.preLoader.screenController.showBattleScreen()):p.a.preLoader.screenController.showGameScreen()}else Utilities.log("LoginGameHandler unknown handlecode");else if(t==RequestKeys.LoginGame.Sub.loginGameFail){if(i==RequestKeys.LoginGame.HandleCode.NOT_ENOUGHT_COIN){var o=Utilities.Base64._utf8_decode(e.getStringUint8(s,200));p.a.preLoader.popUpController.showPopupNotifyWithBtnRefresh(o)}else if(i==RequestKeys.LoginGame.HandleCode.ERR_GP_ERROR_ROOM_FUIL){o=Utilities.Base64._utf8_decode(e.getStringUint8(s,200));p.a.preLoader.popUpController.showPopupNotifyWithBtnRefresh(o)}}else Utilities.log("LoginGameHandler.prototype.handleMessage fail with subID "+t+" and handleCode "+i)}}var c=d,u=i(79);class m extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.JoinServerGameInfo.Sub.listUserOnlineInfo){let t;if(i==RequestKeys.JoinServerGameInfo.HandleCode.ERR_GR_LIST_FINISH)for(Utilities.warn("JoinServerGameInfoHandler - RequestKeys.JoinServerGameInfo.HandleCode.ERR_GR_LIST_FINISH");s<e.byteLength-100;)t=new u.a,s=t.parseData(e,s),""==t.nickName&&(t.nickName="user "+t.userID),Utilities.log(t),Utilities.warn("JoinServerGameInfoHandler - Get user userID: "+t.userID+", nickName: "+t.nickName+", money: "+t.money),AppInfo.gameMovie.gameBoard.addUserOnlineModel(t,t.userID==AppInfo.MyInfo.userID);else if(i==RequestKeys.JoinServerGameInfo.HandleCode.ERR_GR_LIST_PART){for(Utilities.warn("JoinServerGameInfoHandler - RequestKeys.JoinServerGameInfo.HandleCode.ERR_GR_LIST_PART");s<e.byteLength-300;)t=new u.a,s=t.parseData(e,s),""==t.nickName&&(t.nickName="user "+t.userID),Utilities.log(t),Utilities.warn("JoinServerGameInfoHandler - Get next user userID: "+t.userID+", nickName: "+t.nickName+", money: "+t.money),AppInfo.gameMovie.gameBoard.addUserOnlineModel(t,!1);Utilities.log("byteIndex: "+s+", length: "+e.byteLength)}else Utilities.log("JoinServerGameInfoHandler unknown handlecode")}else t==RequestKeys.JoinServerGameInfo.Sub.listUserNetCutInfo?i==RequestKeys.JoinServerGameInfo.HandleCode.ERR_GR_LIST_FINISH?Utilities.log("Received Get final user net cut in room."):i==RequestKeys.JoinServerGameInfo.HandleCode.ERR_GR_LIST_PART?Utilities.log("Received Get user user net cut in room."):Utilities.log("Received Get user user net cut with unknown handlecode: "+i):t==RequestKeys.JoinServerGameInfo.Sub.boardInfo&&Utilities.log("Received Get board info message")}}var f=m;class g extends r.a{constructor(){super(),this.testCount=0,this.deltaPoint={x:(PreLoaderConfig.ServerScreenWidth-PreLoaderConfig.AppRealWidth)/2,y:(PreLoaderConfig.ServerScreenHeight-PreLoaderConfig.AppRealHeight)/2}}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.GameNotifyInfo.Sub.fishTrace)for(var o=[],n=0,a=0,h=0,l=0;s<e.byteLength;)n=0,a=0,h=0,l=0,o=[{x:e.getFloat32(s=DataView.calculateByteIndexInt32(s),!0)-this.deltaPoint.x,y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)-this.deltaPoint.y},{x:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)-this.deltaPoint.x,y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)-this.deltaPoint.y},{x:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)-this.deltaPoint.x,y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)-this.deltaPoint.y}],s+=16,n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),s+=20,h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a<32?AppInfo.gameMovie.gameBoard.medusaDie||AppInfo.gameMovie.displayController.addGroupFish(h,a,o,n,l):a>=32&&a<35?AppInfo.gameMovie.displayController.addBossFish(h,a,o,n,l):a>=35&&a<101&&AppInfo.gameMovie.displayController.addBossMini(h,a,o,n,l),s+=4;else if(t==RequestKeys.GameNotifyInfo.Sub.bulletTrace){const t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);var p=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),d=e.getUint16(s=DataView.calculateByteIndexInt16(s+=4),!0);e.getUint16(s=DataView.calculateByteIndexInt16(s+=2),!0);var c=e.getFloat32(s=DataView.calculateByteIndexInt32(s+=2),!0);const i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);var u=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0);e.getInt8(s=DataView.calculateByteIndexInt8(s+=8),!0);AppInfo.GameInfo.tournamentRoom||(2==d?d=1:3==d?d=2:5==d&&(d=3)),d!=AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation&&AppInfo.gameMovie.displayController.onUserFire(d,c,u,t,i,o,p)}else if(t==RequestKeys.GameNotifyInfo.Sub.userHitFish){if(PreLoaderConfig.EnableHitFishMessage){AppInfo.gameMovie.gameBoard.enableHitFishMessage=!0;p=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);var m=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);d=e.getUint16(s=DataView.calculateByteIndexInt16(s+=4),!0);AppInfo.GameInfo.tournamentRoom||(2==d?d=1:3==d?d=2:5==d&&(d=3)),AppInfo.gameMovie.displayController.onHitFish(p,m,d)}}else if(t==RequestKeys.GameNotifyInfo.Sub.catchFishTrace){d=e.getUint16(s=DataView.calculateByteIndexInt16(s),!0),m=e.getInt32(s=DataView.calculateByteIndexInt32(s+=2),!0);var f=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),g=(e.getInt8(s=DataView.calculateByteIndexInt8(s+=4),!0),u=e.getInt64(s=DataView.calculateByteIndexInt32(s+=1),!0),e.getInt64(s=DataView.calculateByteIndexInt32(s+=8),!0));e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0);if(e.byteLength>63)var I=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),y=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),C=e.getStringUint8(s+=4,100);AppInfo.GameInfo.tournamentRoom||(2===d?d=1:3===d?d=2:5===d&&(d=3)),0!==y&&AppInfo.gameMovie.displayController.handlerActiveSkill(y,d),AppInfo.gameMovie.displayController.onCatchFish(d,m,u,C,I,g,f)}else if(t==RequestKeys.GameNotifyInfo.Sub.specialFish){(o=[]).push({x:e.getFloat32(s=DataView.calculateByteIndexInt32(s),!0),y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)}),o.push({x:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0),y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)}),o.push({x:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0),y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)}),f=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),m=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),AppInfo.gameMovie.displayController.addGroupFish(m,f,o,0,0,!0)}else if(t==RequestKeys.GameNotifyInfo.Sub.specialDieFish){var x=[];b=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),M=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),s+=4;for(var w=0;w<S;w++){m=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);var _=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);s+=4,x.push({fishID:m,fishScore:_})}A=e.getInt64(s=DataView.calculateByteIndexInt64(s),!0);const t=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0);S>0&&AppInfo.gameMovie.displayController.onCatchFishSpecial(b,M,x,A,t)}else if(t==RequestKeys.GameNotifyInfo.Sub.boomDie){var M,S,A;x=[];b=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),M=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0)}else if(t==RequestKeys.GameNotifyInfo.Sub.startCaTran){let t=-1,i=-1;PreLoaderConfig.configCaTran.id=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),PreLoaderConfig.configCaTran.idBackground=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),PreLoaderConfig.configCaTran.count=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),PreLoaderConfig.configCaTran.fishId=[],PreLoaderConfig.configCaTran.fishType=[];for(w=0;w<PreLoaderConfig.configCaTran.count;w++)PreLoaderConfig.configCaTran.fishId.push(e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0));t=e.getInt32(s+4,!0),s+=4*(245-PreLoaderConfig.configCaTran.count),s+=40;for(let t=0;t<PreLoaderConfig.configCaTran.count;t++)PreLoaderConfig.configCaTran.fishType.push(e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0));i=e.getInt32(s+4,!0),Utilities.warn("ID Cá Trận: "+PreLoaderConfig.configCaTran.id+"\nID background: "+PreLoaderConfig.configCaTran.idBackground+"\nSố lượng cá: "+PreLoaderConfig.configCaTran.count+"\nList ID Cá Trận: "+PreLoaderConfig.configCaTran.fishId+"\nList Type Cá Trận: "+PreLoaderConfig.configCaTran.fishType+"\nID cá ở vị trí thứ : "+(PreLoaderConfig.configCaTran.count+1)+" có giá trị là: "+t+"\nType cá ở vị trí thứ : "+(PreLoaderConfig.configCaTran.count+1)+" có giá trị là: "+i),AppInfo.gameMovie.gameBoard.boss33Dance?AppInfo.gameMovie.displayController.addFishCaTranInBoss():AppInfo.gameMovie.gameBoard.currentBoss||AppInfo.gameMovie.displayController.startTransferScreenToBattleField(PreLoaderConfig.configCaTran.id)}else if(t==RequestKeys.GameNotifyInfo.Sub.endCaTran);else if(t==RequestKeys.GameNotifyInfo.Sub.startBossFish);else if(t==RequestKeys.GameNotifyInfo.Sub.bossInfo){var v=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),T=(e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0));e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.gameMovie.displayController.updateHpBoss(v,T)}else if(t==RequestKeys.GameNotifyInfo.Sub.stopFreeBullet){var b=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);AppInfo.gameMovie.displayController.stopCountDownFreeGun(b)}else if(t==RequestKeys.GameNotifyInfo.Sub.levelUp){if(i==RequestKeys.GameNotifyInfo.HandleCode.ERR_GR_LEVEL_SUCCESS){b=e.getInt32(DataView.calculateByteIndexInt32(s),!0);const t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);Utilities.error("GameNotifyInfoHandler.prototype.handleMessage\nUser level up"),Utilities.error("UserId ",b+"\nLevel ",t+"\nAward ",i+"\nCoin ",o+"\n"),AppInfo.gameMovie.displayController.onUserLevelUp(b,t,i,o)}}else if(t==RequestKeys.GameNotifyInfo.Sub.listSpecialGun){if(i==RequestKeys.GameNotifyInfo.HandleCode.ERR_GR_LEVEL_SUCCESS){b=e.getInt32(DataView.calculateByteIndexInt32(s),!0);const t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=[];if(t>0){s+=4;for(let o=0;o<t;o++){const t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);C=e.getStringUint8(s+=4,200);s+=200;const n={id:t,type:o,moreInfo:C};i.push(n)}for(let e=0;e<t;e++)Utilities.error(i[e])}AppInfo.gameMovie.displayController.handlerChangeSpecialGun(b,i),Utilities.error("GameNotifyInfoHandler.prototype.handleMessage\nlistSpecialGun"),Utilities.error("UserId "+b+"\nlengthGun "+t)}}else if(t==RequestKeys.GameNotifyInfo.Sub.skillList){const t=[];if(PreLoaderConfig.IsEnableGunSkill){const i=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);AppInfo.gameMovie.gameBoard.isNewSkillMode=!0;let o=-1;for(w=0;w<i;w++){h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);let i=e.getStringBase64(s+=4,50);i=Utilities.Base64.decode(i);const n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=50),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),l={id:h,nameSkill:i,timeLostSkill:n,scoreGetSkill:a,timeEffect:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),timeDelay:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),timeCooldown:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),numberfishGet:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0)};t.push(l),-1!=o&&o!=a&&(AppInfo.gameMovie.gameBoard.isNewSkillMode=!1),-1==o&&(o=a)}t.sort((e,t)=>e.id-t.id);e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.gameMovie.displayController.handlerMessageGetInfoCompoGunSkill(t)}}else if(t==RequestKeys.GameNotifyInfo.Sub.userUseSkill){if(PreLoaderConfig.IsEnableGunSkill){d=e.getUint16(s=DataView.calculateByteIndexInt16(s),!0),p=e.getInt32(s=DataView.calculateByteIndexInt32(s+=2),!0),y=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);const t=e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);d!=AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation&&AppInfo.gameMovie.displayController.onUserUseSkill(d,t,y,i,o)}}else if(t==RequestKeys.GameNotifyInfo.Sub.starBossMap){const t=e.getInt32(DataView.calculateByteIndexInt32(s),!0);var B=e.getInt32(DataView.calculateByteIndexInt32(s+=4),!0);const i=e.getInt32(DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.gameMovie.gameBoard.currentCaTran||AppInfo.gameMovie.displayController.addBossMap(B,t,i)}else if(t==RequestKeys.GameNotifyInfo.Sub.fishInsideFish){o=[],n=0,a=0;h=0,l=0;let t=0;for(t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);s+4<e.byteLength;)o=[],n=0,a=0,h=0,l=0,n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),s+=20,h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.gameMovie.displayController.addFishInsideFish(t,h,a,n,l)}else if(t==RequestKeys.GameNotifyInfo.Sub.bossMapInfo){v=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),T=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.gameMovie.displayController.updateHpBoss(v,T)}else if(t==RequestKeys.GameNotifyInfo.Sub.bossMapDie){B=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),b=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);const t=e.getStringUint8(s+=4,50);_=e.getInt64(s=DataView.calculateByteIndexInt32(s+=50),!0),g=e.getInt64(s=DataView.calculateByteIndexInt32(s+=8),!0);AppInfo.gameMovie.displayController.onBossMapDie(B,b,_,g,t,i)}else if(t==RequestKeys.GameNotifyInfo.Sub.bonusGif){d=e.getUint16(s=DataView.calculateByteIndexInt16(s),!0),m=e.getInt32(s=DataView.calculateByteIndexInt32(s+=2),!0),f=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt8(s=DataView.calculateByteIndexInt8(s+=4),!0),u=e.getInt32(s=DataView.calculateByteIndexInt32(s+=1),!0);e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);g=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0);if(e.byteLength>63)I=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),y=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),C=e.getStringUint8(s+=4,100);2==d?d=1:3==d?d=2:5==d&&(d=3),Utilities.error("---------BonusGif-------------"),Utilities.error("position: "+d+"\nfishID:   "+m+"\nfishType: "+f+"\nmoreInfo: "+C),AppInfo.gameMovie.displayController.bonusGif(d,m,f,C)}else if(t==RequestKeys.GameNotifyInfo.Sub.skillCatchFishResult){const t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),l=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0);AppInfo.gameMovie.displayController.skillCatchFishResult(t,i,o,n,a,h,l)}else if(t==RequestKeys.GameNotifyInfo.Sub.skillCatchFishBattleResult){b=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),d=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),m=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);var P=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);y=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),_=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),g=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),C=e.getStringUint8(s+=4,50);AppInfo.gameMovie.displayController.skillCatchFishResult(b,d,m,P,y,_,g,C)}else if(t==RequestKeys.GameNotifyInfo.Sub.fishItemTrace){let t;t=[{x:e.getFloat32(s=DataView.calculateByteIndexInt32(s),!0),y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)},{x:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0),y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)},{x:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0),y:e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0)}];const i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);k=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);const n=e.getStringUint8(s+=4,50);AppInfo.gameMovie.displayController.addSpecialFish(t,i,o,k,n)}else if(t==RequestKeys.GameNotifyInfo.Sub.catchFishItem){var k;b=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),m=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),k=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),_=e.getInt64(s=DataView.calculateByteIndexInt32(s+=4),!0),C=e.getStringUint8(s+=8,50),AppInfo.gameMovie.displayController.catchFishItem(b,m,k,_,C)}else if(t==RequestKeys.GameNotifyInfo.Sub.gunSkillFireSpecial){let t,i,o,n,a;const h=[],l=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),r=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p=e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0);t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);for(w=0;w<a;w++)h.push(e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0));AppInfo.gameMovie.displayController.gunSkillRemain(l,r,p,t,i,o,n,a,h)}else if(t==RequestKeys.GameNotifyInfo.Sub.updateMoneyUser){let t,i,o;const n=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);t=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),i=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0),o=e.getStringUint8(s+=8,200),o=Utilities.Base64._utf8_decode(o),AppInfo.gameMovie.displayController.updateMoneyUserInGame(n,t,i,o)}switch(t){case RequestKeys.GameNotifyInfo.Sub.winJackpot:this._winJackpotInGame(e,t,i,s)}}_winJackpotInGame(e,t,i,s){const o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),n=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0),h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);e.getStringUint8(s+=4,h);AppInfo.gameMovie.displayController.userWinJackpot(o,n,a)}}var I=g;class y extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s,o=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.UserActionInfo.Sub.userSit)if(i==RequestKeys.UserActionInfo.HandleCode.ERR_GR_SIT_SUCCESS){Utilities.warn("UserActionHandler - RequestKeys.UserActionInfo.HandleCode.ERR_GR_SIT_SUCCESS"),s=new u.a,s.userID=e.getInt32(o=DataView.calculateByteIndexInt32(o),!0),s.lock=e.getInt8(o=DataView.calculateByteIndexInt8(o+=4),!0),s.deskNO=e.getInt8(o=DataView.calculateByteIndexInt8(o+=1),!0),s.deskStation=e.getInt8(o=DataView.calculateByteIndexInt8(o+=1),!0),s.userState=e.getInt8(o=DataView.calculateByteIndexInt8(o+=1),!0),s.isDeskOwner=e.getInt8(o=DataView.calculateByteIndexInt8(o+=1),!0),AppInfo.GameInfo.tournamentRoom||(2==s.deskStation?s.deskStation=1:3==s.deskStation?s.deskStation=2:5==s.deskStation&&(s.deskStation=3));const t=AppInfo.gameMovie.gameBoard.getUserOnlineModelByUserID(s.userID);if(t)if(""==t.nickName&&(t.nickName="user "+t.userID),t.money,t.userID=s.userID,t.lock=s.lock,t.deskNO=s.deskNO,t.deskStation=s.deskStation,t.userState=s.userState,t.isDeskOwner=s.isDeskOwner,s.userID==AppInfo.MyInfo.userID){AppInfo.gameMovie.gameBoard.myUserOnlineModel.lock=t.lock,AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskNO=t.deskNO,AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation=t.deskStation,AppInfo.gameMovie.gameBoard.myUserOnlineModel.userState=t.userState,AppInfo.gameMovie.gameBoard.myUserOnlineModel.isDeskOwner=t.isDeskOwner,AppInfo.gameMovie.gameBoard.coinStartGame=t.money;const e=AppInfo.gameMovie.gameBoard.listUserOnlineModel;let i;for(let t=0;t<e.length;t++)i=e[t],i.deskNO==s.deskNO&&AppInfo.gameMovie.displayController.addUserSeat(e[t].userID,e[t].deskStation,e[t].nickName,e[t].money,e[t].levelUserInfo);AppInfo.preLoader.requestController.startGame()}else t.deskNO==AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskNO&&AppInfo.gameMovie.displayController.addUserSeat(t.userID,t.deskStation,t.nickName,t.money,t.levelUserInfo);Utilities.log(s)}else Utilities.log("UserActionHandler unknow with subID "+t+" and handleCode "+i);else if(t==RequestKeys.UserActionInfo.Sub.userCome)Utilities.warn("UserActionHandler - RequestKeys.UserActionInfo.Sub.userCome"),s=new u.a,s.parseData(e,o,!0),""==s.nickName&&(s.nickName="user "+s.userID),Utilities.log(s),Utilities.warn("UserActionHandler - Get user come with info userID: "+s.userID+", nickName: "+s.nickName+", money: "+s.money),AppInfo.gameMovie.gameBoard.addUserOnlineModel(s,!1);else if(t==RequestKeys.UserActionInfo.Sub.userUp)if(i==RequestKeys.UserActionInfo.HandleCode.ERR_GR_SIT_SUCCESS){var n=e.getInt32(o=DataView.calculateByteIndexInt32(o),!0);const t=e.getInt8(o=DataView.calculateByteIndexInt8(o+=4),!0),i=e.getInt8(o=DataView.calculateByteIndexInt8(o+=1),!0),s=e.getInt8(o=DataView.calculateByteIndexInt8(o+=1),!0),a=e.getInt8(o=DataView.calculateByteIndexInt8(o+=1),!0),h=e.getInt8(o=DataView.calculateByteIndexInt8(o+=1),!0);Utilities.warn("UserActionHandler - user up with info userID: "+n+", lock: "+t+", deskIndex: "+i+", deskStation: "+s+", userState: "+a+", deskOwner: "+h),n===AppInfo.MyInfo.userID?AppInfo.outGameBanCa():(AppInfo.gameMovie.gameBoard.removeUserOnlineModelByUserID(n),AppInfo.gameMovie.displayController.removeUserSeatByUserID(n))}else Utilities.log("UserActionHandler unknow with subID "+t+" and handleCode "+i);else if(t==RequestKeys.UserActionInfo.Sub.userLeft)if(i==RequestKeys.UserActionInfo.HandleCode.ERR_GR_LEFT_SUCCESS){n=e.getInt32(o=DataView.calculateByteIndexInt32(o),!0);Utilities.warn("UserActionHandler - user with userID: "+n+"has left. Try to remove CompoBaseStation"),AppInfo.gameMovie.gameBoard.removeUserOnlineModelByUserID(n),AppInfo.gameMovie.displayController.removeUserSeatByUserID(n)}else Utilities.log("UserActionHandler unknow with subID "+t+" and handleCode "+i)}}var C=y;class x extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.PopupNotify.Sub.popupNotifyNormal){let t=e.getStringBase64(s,500),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=500),!0);const o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);t=Utilities.Base64.decode(t),i=Math.min(i,PreLoaderConfig.MaxRepeatTimeNotify),Utilities.log("PopupHandler.prototype.handleMessage - Receive broadcast message: "+t+", repeat: "+i+" times, priority: "+o);const n={message:t,repeat:i,priority:o,isGameMessage:!0};AppInfo.GameInfo.messNotify.push(n),1==AppInfo.GameInfo.messNotify.length?AppInfo.preLoader.globalCompoController.compoNotifyGame.show(n,n.repeat):AppInfo.GameInfo.messNotify.sort(this.sortMessage)}}sortMessage({priorityA:e},{priorityB:t}){return t-e}get gameMovie(){return AppInfo.gameMovie}}var w=x;class _ extends r.a{constructor(){super()}handleMessage({byteLength:e},t,i){super.handleMessage();r.a.CONTEN_START_BYTE_INDEX;t==RequestKeys.KickUserOutGameInfo.Sub.kickOutGame&&i==RequestKeys.KickUserOutGameInfo.HandleCode.ERR_GP_ERROR_OTHER_SESSION?AppInfo.preLoader.popUpController.showPopupNotify(PreLoaderConfig.MessagesConfig.KickOutGameMessage):Utilities.log("KickUserOutGameHandler.prototype.handleMessage fail with subID "+t+" and handleCode "+i)}}var M=_;class S extends r.a{constructor(){super(),this.isFristTime=!1}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.GunSkillInfo.Sub.gunSkillInfo){var o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);const t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=[];if(t>0){s+=4;for(let o=0;o<t;o++){const t={id:e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),type:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),isAvailable:n=e.getInt8(s=DataView.calculateByteIndexInt8(s+=4),!0),bulletLeft:e.getInt32(s=DataView.calculateByteIndexInt32(s+=1),!0),timeLeft:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0)};i.push(t),s+=4}for(let e=0;e<t;e++);}AppInfo.gameMovie.gameBoard.isFristTime?AppInfo.gameMovie.displayController.setGunReadyFireEffect(o,i):AppInfo.gameMovie.displayController.handlerChangeSpecialGun(o,i),AppInfo.gameMovie.gameBoard.isFristTime=!0}else if(t==RequestKeys.GunSkillInfo.Sub.useBossSkillResponse){const t={listFish:[]};t.position=e.getUint16(s=DataView.calculateByteIndexInt16(s),!0),t.bulletID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=2),!0),t.bulletType=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);const i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);s+=4;for(let o=0;o<i;o++){const i=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);s+=4,t.listFish.push(i)}AppInfo.GameInfo.tournamentRoom||(2==t.position?t.position=1:3==t.position?t.position=2:5==t.position&&(t.position=3)),AppInfo.gameMovie.displayController.playGunBossEffectForUser(t)}else if(t==RequestKeys.GunSkillInfo.Sub.gunTrace){let t=e.getUint16(s=DataView.calculateByteIndexInt16(s),!0);const i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=2),!0),o=e.getFloat32(s=DataView.calculateByteIndexInt32(s+=4),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.GameInfo.tournamentRoom||(2==t?t=1:3==t?t=2:5==t&&(t=3)),t!=AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation&&AppInfo.gameMovie.displayController.onGunTrace(t,i,o,n,a)}else if(t==RequestKeys.GunSkillInfo.Sub.gunDragonInfo){o=e.getInt32(s=DataView.calculateByteIndexInt16(s),!0);const t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);var n=e.getInt8(s=DataView.calculateByteIndexInt8(s+=4),!0);const h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=1),!0),l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.gameMovie.displayController.updateInfoGun(o,t,i,a,n,h,l)}}}var A=S;class v extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.GiftBox.Sub.giftBoxHealthUpdate){let t,i,o,n,a;t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getStringUint8(s+=4,50)}}}var T=v;var b=class{constructor(){this.listFish=[],this.contextID=null,this.listFish=[]}parseData(e,t,i){this.contextID=e.getStringUint8(t,20);const s=e.getInt32(t=DataView.calculateByteIndexInt32(t+=20),!0);for(let i=0;i<s;i++){const i={};i.fishType=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),i.quantity=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),i.time=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),i.pathArray=[{x:e.getFloat32(t=DataView.calculateByteIndexInt32(t+=4),!0),y:e.getFloat32(t=DataView.calculateByteIndexInt32(t+=4),!0)},{x:e.getFloat32(t=DataView.calculateByteIndexInt32(t+=4),!0),y:e.getFloat32(t=DataView.calculateByteIndexInt32(t+=4),!0)},{x:e.getFloat32(t=DataView.calculateByteIndexInt32(t+=4),!0),y:e.getFloat32(t=DataView.calculateByteIndexInt32(t+=4),!0)}],this.listFish.push(i)}return t}};class B extends r.a{constructor(){super(),this.fishModel=null,this.listContext=null}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.ContentFishTrace.Sub.ContentSetUp){let t;const i=[],o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);for(s+=4,t=0;t<o;t++){const t=new b;s=t.parseData(e,s),i.push(t),s+=4}AppInfo.gameMovie.displayController.setupContext(i)}else if(t==RequestKeys.ContentFishTrace.Sub.FishTrace){var o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.gameMovie.displayController.buildListFishByContextID(o,n,a)}else if(t==RequestKeys.ContentFishTrace.Sub.ContentFileSetUp){let t,i=[];t=e.getStringUint8(s,200),i=t.split(","),AppInfo.gameMovie.displayController.setupContext(AppInfo.listTemplateFishTrace)}else if(t==RequestKeys.ContentFishTrace.Sub.FishTraceFile){o=+(o=e.getStringUint8(s,20));n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=20),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.gameMovie.displayController.buildListFishByContextID(o,n,a)}}}var P=B;class k extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.BonusGame.Sub.BonusLuckySpin){var o,n,a;const t=[];e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);var h=4;for(_=0;_<a;_++){var l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=h),!0);h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);var p=e.getStringUint8(s+=4,h);t.push({userID:l,userName:p})}AppInfo.gameMovie.displayController.addCompoLuckySpin(a,n,o,t)}if(t==RequestKeys.BonusGame.Sub.BonusLuckyBox){let t,i,o;const n=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p=e.getStringUint8(s+=4,t),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=t),!0),o=2*i;const l=(Math.round(a/1e4)+h)%(2*o),r=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4+l),!0),d=e.getStringUint8(s+=4,i).split("");AppInfo.gameMovie.displayController.addBonusGame(n,a,h,p,r,d)}if(t==RequestKeys.BonusGame.Sub.ResultBonusLuckyBox){let t,i,o;t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),(e={type:2}).userChoice=t,e.result=i,e.userCoin=o,AppInfo.gameMovie.displayController.showResultMiniGame(e)}if(t==RequestKeys.BonusGame.Sub.FishAreaGame.FishArea){var d,c;let t,i,o,n;var u=[];d=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),c=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),s+=4;for(let t=0;t<n;t++){(m={}).id=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),m.name=e.getStringUint8(s+=4,h),s+=h,u.push(m)}AppInfo.gameMovie.displayController.startTransferScreenForFishArea(d,c,t,i,o,u)}if(t==RequestKeys.BonusGame.Sub.FishAreaGame.EndFishArea){let t,i,o;const n=[],a=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),s+=4;for(let t=0;t<o;t++){var m;(m={}).id=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),m.score=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),m.isWin=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),m.userCoin=e.getInt64(s=DataView.calculateByteIndexInt32(s+=4),!0),h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0),m.name=e.getStringUint8(s+=4,h),s+=h,n.push(m)}(e={}).type=a,e.awardValue=l,e.winScore=t,e.timeShowEffect=i,e.listUserInfo=n,AppInfo.gameMovie.displayController.showResultMiniGame(e),Utilities.error("\n awardType: "+a+"\n  awardValue: "+l+"\n  winScore: "+t+"\n  timeShowEffect: "+i+"\n  userWin: "+o+"\n  listUserInfo: "+n)}if(t==RequestKeys.BonusGame.Sub.FishAreaGame.UserFireReceiveFishArea){const t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);var f=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),g=e.getUint16(s=DataView.calculateByteIndexInt16(s+=4),!0);e.getUint16(s=DataView.calculateByteIndexInt16(s+=2),!0);const i=e.getFloat32(s=DataView.calculateByteIndexInt32(s+=2),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);var I=e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0);e.getInt8(s=DataView.calculateByteIndexInt8(s+=8),!0);2==g?g=1:3==g?g=2:5==g&&(g=3),AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation,AppInfo.gameMovie.displayController.onUserFireInArea(g,i,I,t,o,n,f)}if(t==RequestKeys.BonusGame.Sub.FishAreaGame.UserCatchFishTraceFishArea){g=e.getUint16(s=DataView.calculateByteIndexInt16(s),!0);var y=e.getInt32(s=DataView.calculateByteIndexInt32(s+=2),!0);e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt8(s=DataView.calculateByteIndexInt8(s+=4),!0);I=e.getInt32(s=DataView.calculateByteIndexInt32(s+=1),!0);e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getInt64(s=DataView.calculateByteIndexInt64(s+=4),!0),e.getInt32(s=DataView.calculateByteIndexInt32(s+=8),!0);if(e.byteLength>63)var C=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),x=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),w=e.getStringUint8(s+=4,100);2==g?g=1:3==g?g=2:5==g&&(g=3),0!==x&&AppInfo.gameMovie.displayController.handlerActiveSkill(x,g),AppInfo.gameMovie.displayController.onCatchFishInFishArea(g,y,I,w,C)}else if(t==RequestKeys.BonusGame.Sub.FishAreaGame.UserHitFishInArea){if(PreLoaderConfig.EnableHitFishMessage){AppInfo.gameMovie.gameBoard.enableHitFishMessage=!0;f=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),y=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);2==(g=e.getUint16(s=DataView.calculateByteIndexInt16(s+=4),!0))?g=1:3==g?g=2:5==g&&(g=3),AppInfo.gameMovie.displayController.onHitFishInArea(f,y,g)}}else if(t==RequestKeys.BonusGame.Sub.FishAreaGame.FishSpecialDie){let t,i,o;const n=[],a=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),s+=4;for(var _=0;_<i;_++){y=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);const t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);s+=4,n.push({fishID:y,fishScore:t})}o=e.getInt64(s=DataView.calculateByteIndexInt64(s),!0);const h=e.getInt64(s=DataView.calculateByteIndexInt64(s+=8),!0);i>0&&AppInfo.gameMovie.displayController.onCatchFishSpecialInArea(a,t,n,o,h)}else if(t==RequestKeys.BonusGame.Sub.BonusCollectGame.CollectInfo){let t;var M;let i;const o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),M=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),Utilities.error("CollectInfo"),AppInfo.gameMovie.displayController.updateCollectMiniGame(o,t,M,i)}else if(t==RequestKeys.BonusGame.Sub.BonusCollectGame.StartGame){let t,i,o;const n=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);const a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);o=e.getStringUint8(s+=4,20),AppInfo.gameMovie.displayController.addCollectGame(n,t,i,a,o)}else if(t==RequestKeys.BonusGame.Sub.BonusCollectGame.ResponseItemChoice){(S={}).userID=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),S.itemID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.itemValue=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.isFinishGame=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.winCoin=e.getInt64(s=DataView.calculateByteIndexInt32(s+=4),!0),S.totalCoin=e.getInt64(s=DataView.calculateByteIndexInt32(s+=8),!0),Utilities.error("ResponseItemChoices"),Utilities.error(S),AppInfo.gameMovie.displayController.onChoiceItemBonusGame(S)}else if(t==RequestKeys.BonusGame.Sub.BonusCollectGame.ResponseItemShellChoice){(S={}).userID=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),S.itemID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.itemValue=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.isFinishGame=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.winCoin=e.getInt64(s=DataView.calculateByteIndexInt32(s+=4),!0),S.totalCoin=e.getInt64(s=DataView.calculateByteIndexInt32(s+=8),!0),S.arrayRatio=e.getStringUint8(s+=8,50),Utilities.error("ResponseItemChoiceShell"),Utilities.error(S),AppInfo.gameMovie.displayController.onChoiceItemBonusGame(S)}else if(t==RequestKeys.BonusGame.Sub.BonusCollectGame.ResponseItemChestChoice){var S;(S={}).userID=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),S.itemID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.itemValue=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.isFinishGame=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),S.winCoin=e.getInt64(s=DataView.calculateByteIndexInt32(s+=4),!0),S.totalCoin=e.getInt64(s=DataView.calculateByteIndexInt32(s+=8),!0),S.arrayRatio=e.getStringUint8(s+=8,50),Utilities.error("ResponseItemChestChoice"),Utilities.error(S),AppInfo.gameMovie.displayController.onChoiceItemBonusGame(S)}}}var L=k;class R extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t===RequestKeys.GuildInfo.Sub.MyGuildInfo)(o={}).userID=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),o.guildID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o.guildNameLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o.guildName=e.getStringUint8(s+=4,o.guildNameLength),o.guildAvatarLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=o.guildNameLength),!0),o.guildAvatar=e.getStringUint8(s+=4,o.guildAvatarLength),o.factionID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=o.guildAvatarLength),!0),o.factionNameLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o.factionName=e.getStringUint8(s+=4,o.factionNameLength),o.moreInfoLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=o.factionNameLength),!0),o.moreInfo=e.getStringUint8(s+=4,o.moreInfoLength),AppInfo.gameMovie.displayController.updateGuild(o);else if(t===RequestKeys.GuildInfo.Sub.GuildInfoNewComer){var o;(o={}).userID=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),o.guildID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o.guildNameLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o.guildName=e.getStringUint8(s+=4,o.guildNameLength),o.guildAvatarLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=o.guildNameLength),!0),o.guildAvatar=e.getStringUint8(s+=4,o.guildAvatarLength),o.factionID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=o.guildAvatarLength),!0),o.factionNameLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o.factionName=e.getStringUint8(s+=4,o.factionNameLength),o.moreInfoLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=o.factionNameLength),!0),o.moreInfo=e.getStringUint8(s+=4,o.moreInfoLength),AppInfo.gameMovie.displayController.updateGuild(o)}else if(t===RequestKeys.GuildInfo.Sub.GuildInfoUserInGame){let t;const i=[];let o;for(t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),s+=4,o=0;o<t;o++){const t={};t.userID=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),t.stationID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),t.guildID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),t.guildNameLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),t.guildName=e.getStringUint8(s+=4,t.guildNameLength),t.guildAvatarLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=t.guildNameLength),!0),t.guildAvatar=e.getStringUint8(s+=4,t.guildAvatarLength),t.factionID=e.getInt32(s=DataView.calculateByteIndexInt32(s+=t.guildAvatarLength),!0),t.factionNameLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),t.factionName=e.getStringUint8(s+=4,t.factionNameLength),t.moreInfoLength=e.getInt32(s=DataView.calculateByteIndexInt32(s+=t.factionNameLength),!0),t.moreInfo=e.getStringUint8(s+=4,t.moreInfoLength),s+=t.moreInfoLength,i.push(t)}const n=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);e.getStringUint8(s+=4,n);AppInfo.gameMovie.displayController.updateGuild(i)}}get gameMovie(){return AppInfo.gameMovie}}var F=R;class E extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.GemInfo.Sub.gemUp){var o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);2==n?n=1:3==n?n=2:5==n&&(n=3),AppInfo.gameMovie.displayController.gemUp(o,n,a,h,l)}else if(t==RequestKeys.GemInfo.Sub.getGemLeaveRoom){o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);AppInfo.MyInfo.mygem!=l&&(AppInfo.MyInfo.mygem=l)}}sortMessage({priorityA:e},{priorityB:t}){return t-e}get gameMovie(){return AppInfo.gameMovie}}var G=E;class D extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t===RequestKeys.ChatInfo.Sub.userChat){let t,i,o,n;t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getStringUint8(s+=4,50),n=e.getStringUint8(s+=50,200),n=Utilities.Base64._utf8_decode(n),Utilities.error("type : "+t),Utilities.error("displayName : "+o),Utilities.error("content : "+n),Utilities.error("userID : "+i),AppInfo.gameMovie.displayController.appendChat(t,o,n,i)}}get gameMovie(){return AppInfo.gameMovie}}var U=D;class N extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t==RequestKeys.MissionInGame.Sub.missionInfo){let t;const i=[],n={};var o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);for(s+=4,t=0;t<o;t++)n.type=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),n.info=e.getStringUint8(s+=4,100),s+=100,i.push(n);AppInfo.gameMovie.displayController.addMission(i)}else if(t==RequestKeys.MissionInGame.Sub.missionCompleteResponse){let t,i;n=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),h=e.getStringUint8(s+=4,100),AppInfo.gameMovie.displayController.completeMission(n,t,i,a,h)}else if(t==RequestKeys.MissionInGame.Sub.missionUpdate){var n,a,h;n=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),h=e.getStringUint8(s+=4,100),AppInfo.gameMovie.displayController.updateMission(a,h)}else if(t===RequestKeys.MissionInGame.Sub.missionDailyInGame){const t={missionType:e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),fishKind:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),current:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),total:e.getInt32(DataView.calculateByteIndexInt32(s+=4),!0)};AppInfo.gameMovie.displayController.showItemDailyMission(t)}}sortMessage({priorityA:e},{priorityB:t}){return t-e}get gameMovie(){return AppInfo.gameMovie}}var O=N;class X extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t===RequestKeys.TickerGame.Sub.getTicker){let t,i,o,n;t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),AppInfo.gameMovie.displayController.ticketUp(t,o,n)}}get gameMovie(){return AppInfo.gameMovie}}var W=X;class H extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;var o,n,a,h,l,p,d;if(t===RequestKeys.ItemInGame.Sub.userUseItem)o=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),p=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),e.getStringUint8(s+=4,100),d=e.getStringUint8(s+=100,50),AppInfo.gameMovie.displayController.userUseItem(o,n,a,h,l,p,d);else if(t===RequestKeys.ItemInGame.Sub.userGetItem){let t;const i=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0);t=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);const o=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),n=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),a=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),h=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),l=e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0);let r=e.getStringUint8(s+=4,100);const p=e.getStringUint8(s+=100,50);r=Utilities.Base64._utf8_decode(r),AppInfo.gameMovie.displayController.getItemBag(i,t,o,n,a,h,l,r,p)}else if(t===RequestKeys.ItemInGame.Sub.userUseItemSkill){const t={userUseId:e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),userId:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),itemId:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),itemType:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),effectTime:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),quantity:e.getInt32(s=DataView.calculateByteIndexInt32(s+=4),!0),itemName:e.getStringUint8(s+=4,100),moreInfo:e.getStringUint8(s+=100,50)};AppInfo.gameMovie.displayController.userUseItem(t.userUseId,t.itemId,t.itemType,t.effectTime,null,t.quantity,t.moreInfo,t.userId)}}get gameMovie(){return AppInfo.gameMovie}}var V=H,Y=i(17);class z extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();const s=r.a.CONTEN_START_BYTE_INDEX;switch(t){case RequestKeys.TournamentInGame.Sub.fishTrace:this._fishTrace(s,e);break;case RequestKeys.TournamentInGame.Sub.bossAttack:this._bossAttack(s,e);break;case RequestKeys.TournamentInGame.Sub.leaderBoard:this._leaderBoard(s,e);break;case RequestKeys.TournamentInGame.Sub.gameTourInfo:this._gameTourInfo(s,e);break;case RequestKeys.TournamentInGame.Sub.startGameTour:this._startGameTour(s,e);break;case RequestKeys.TournamentInGame.Sub.startWave:this._startWave(s,e);break;case RequestKeys.TournamentInGame.Sub.endWave:this._endWave(s,e);break;case RequestKeys.TournamentInGame.Sub.bossKillAll:this._bossKillAll(s,e);break;case RequestKeys.TournamentInGame.Sub.endGame:this._endGame(s,e);break;case RequestKeys.TournamentInGame.Sub.bloodFish:this._bloodFish(s,e);break;case RequestKeys.TournamentInGame.Sub.userHeal:this._userHeal(s,e);break;case RequestKeys.TournamentInGame.Sub.jackpot:this._updateJackpot(s,e);break;case RequestKeys.TournamentInGame.Sub.buyItemInGame:this._buyItemInGame(s,e,i);break;case RequestKeys.TournamentInGame.Sub.configShopTour:this._getConfigShopInTour(s,e,i)}}_fishTrace(e,t){let i,s,o,n,a,h=0;const l=[];i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),e+=4;let r=0,p=-1,d=0,c=0;for(var u=0;u<i;u++)s=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),o=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),n=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),a=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),h=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),0==d&&(d=n),d===n&&c++,l.push({fishID:s,fishKind:o,userID:n,timeline:a,fishBlood:h}),o>35&&AppInfo.gameMovie.displayController.addBossMap(s,o,n,a),e+=4;let m=0,f=0;const g=[0,1,2,3];for(var I=0;I<AppInfo.gameMovie.displayController.listBaseStation.length;I++)g.splice(g.indexOf(AppInfo.gameMovie.displayController.listBaseStation[I].basePosition),1);l.sort((e,t)=>e.userID-t.userID),f=g.pop();for(u=0;u<l.length;u++)m===c&&g.length>0&&(f=g.pop(),m=0),0===l[u].userID&&(l[u].userID=f),m++;if(l.length>1){l.sort((e,t)=>e.userID-t.userID||e.fishKind-t.fishKind);for(I=0;I<l.length;I++)p!==l[I].userID?r=0:r++,AppInfo.gameMovie.displayController.addGroupFish(l[I].fishID,l[I].fishKind,l[I].userID,l[I].timeline,r,l[I].fishBlood),p=l[I].userID}}_bossAttack(e,t){let i,s,o;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),s=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),o=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),AppInfo.gameMovie.displayController.bossAttack(i,s,o)}_leaderBoard(e,t){let i;const s=[],o=[];i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),e+=4;let n,a=!1;for(n=0;n<i;n++){const i={};i.displayName=t.getStringUint8(e,50),i.userID=t.getInt32(e=DataView.calculateByteIndexInt32(e+=50),!0),i.score=t.getInt64(e=DataView.calculateByteIndexInt64(e+=4),!0),i.totalReward=t.getInt32(e=DataView.calculateByteIndexInt64(e+=8),!0),e+=4;for(let e=0;e<s.length;e++)if(s[e].userID===i.userID){a=!0,o.push(s[e]);break}a||s.push(i)}AppInfo.gameMovie.displayController.updateLeaderBoard(s),AppInfo.gameMovie.displayController.updateTotalPoint(o)}_gameTourInfo(e,t){let i,s,o,n,a;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),s=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),o=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),n=t.getStringUint8(e+=4,30),a=t.getInt32(e=DataView.calculateByteIndexInt32(e+=30),!0),AppInfo.GameInfo.MyHP=s,AppInfo.GameInfo.WaveQuality=o,AppInfo.GameInfo.BulletMultiple=n,AppInfo.GameInfo.WaitTime=a}_startWave(e,t){let i,s,o;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),s=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),o=t.getStringUint8(e+=4,50),AppInfo.gameMovie.gameBoard.currentWave?AppInfo.gameMovie.gameBoard.currentWave++:AppInfo.gameMovie.gameBoard.currentWave=1,o=o.split("|"),AppInfo.gameMovie.displayController.updateWave(i,s,o)}_bossKillAll(e,t){let i;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),AppInfo.gameMovie.displayController.bossKillAll()}_endWave(e,t){let i,s,o,n,a;const h=[];Utilities.error("Kết thúc wave"),i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),e+=4;for(let l=0;l<i;l++)s=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),o=t.getInt64(e=DataView.calculateByteIndexInt32(e+=4),!0),n=t.getInt64(e=DataView.calculateByteIndexInt32(e+=8),!0),a=t.getInt32(e=DataView.calculateByteIndexInt32(e+=8),!0),h.push({userID:s,rewardValue:o,userCoin:n,waveScore:a}),e+=4;AppInfo.gameMovie.displayController.showFinishWave(h),AppInfo.gameMovie.gameBoard.currentWave,AppInfo.GameInfo.WaveQuality}_endGame(e,t){setTimeout(()=>{AppInfo.gameMovie.displayController.showEffectEndGame()},6e3)}_bloodFish(e,t){let i,s,o,n;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),s=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),o=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),n=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),AppInfo.gameMovie.displayController.updateFishHP(i,s,o,n)}_startGameTour(e,t){let i;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0)}_userHeal(e,t){let i,s,o;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),s=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),o=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),AppInfo.gameMovie.displayController.userHeal(i,s,o)}_updateJackpot(e,t){let i,s;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),s=t.getInt64(e=DataView.calculateByteIndexInt64(e+=4),!0),AppInfo.gameMovie.displayController.updateCoinJackpot(s)}_getConfigShopInTour(e,t){let i;const s=[];let o,n;i=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),e+=4;for(let a=0;a<i;a++){const i={ItemInfo:{}};i.ID=t.getInt32(e=DataView.calculateByteIndexInt32(e),!0),i.ItemID=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),i.Type=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),n=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),i.Name=t.getStringUint8(e+=4,n),i.Price=t.getInt32(e=DataView.calculateByteIndexInt32(e+=n),!0),i.Promotion=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),i.NumberPromotion=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),i.ItemInfo.ItemID=i.ItemID,i.ItemInfo.EffectTime=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),i.GroupID=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),i.GroupName=t.getStringUint8(e+=4,20),o=t.getInt32(e=DataView.calculateByteIndexInt32(e+=20),!0),i.ItemInfo.DetailInfo=t.getStringUint8(e+=4,o),i.ItemInfo.Image=t.getStringUint8(e+=o,50),i.CheckSum=t.getStringUint8(e+=50,50),i.Image=t.getStringUint8(e+=50,50),i.ItemInfo.CheckSum=t.getStringUint8(e+=50,50),i.roomKind=t.getInt32(e=DataView.calculateByteIndexInt32(e+=50),!0),i.ItemInfo.DetailInfo=Utilities.Base64._utf8_decode(i.ItemInfo.DetailInfo),i.ItemLevel=2,i.Status=!0,i.ItemInfo.Image=PreLoaderConfig.PathToImage+i.ItemInfo.Image,i.Image=PreLoaderConfig.PathToImage+i.Image,s.push(i),e+=4}const a={Result:1,Code:1,Message:"Thành công",Data:{ItemData:s}};AppInfo.GameInfo.ConfigShopInTour=a}_buyItemInGame(e,t,i){switch(AppInfo.preLoader.globalCompoController.Loading.hide(),i){case z.BUY_ITEM_SUSSESS:const i={Data:{}};i.Data.Coin=t.getInt64(e=DataView.calculateByteIndexInt64(e),!0),i.Data.ID=t.getInt32(e=DataView.calculateByteIndexInt32(e+=8),!0),i.Data.ItemID=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),i.Data.buyQuantity=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),i.Data.itemQuantity=t.getInt32(e=DataView.calculateByteIndexInt32(e+=4),!0),AppInfo.gameMovie.displayController.buyItemSussess(i),AppInfo.preLoader.popUpController.popupHoyeahShopInGame.hide(),AppInfo.gameMovie.displayController.lockIconShop(!1);break;case z.CAN_NOT_BUY_NOW:AppInfo.preLoader.popUpController.showPopupNotify(PreLoaderConfig.languageConfig.key_can_not_buy);break;case z.OUT_OF_COUNT_BUY:AppInfo.preLoader.popUpController.showPopupNotify(PreLoaderConfig.languageConfig.key_out_of_count_buy);break;case z.NOT_EXIST_ITEM:AppInfo.preLoader.popUpController.showPopupNotify(PreLoaderConfig.languageConfig.key_not_exist);break;case z.CHANGE_PRICE:AppInfo.preLoader.popUpController.popupHoyeahShopInGame.hide(),setTimeout(()=>{AppInfo.preLoader.popUpController.showPopupNotify(PreLoaderConfig.languageConfig.key_change_price)},600);break;case z.NOT_ENOUGH_MONEY:AppInfo.preLoader.popUpController.showPopupNotify(PreLoaderConfig.languageConfig.key_not_enough_money);break;case z.USE_OTHER_ITEM:AppInfo.preLoader.popUpController.showPopupNotify(PreLoaderConfig.languageConfig.key_use_other_item)}}}z.BUY_ITEM_SUSSESS=0,z.CAN_NOT_BUY_NOW=1,z.OUT_OF_COUNT_BUY=2,z.NOT_EXIST_ITEM=3,z.CHANGE_PRICE=4,z.NOT_ENOUGH_MONEY=5,z.USE_OTHER_ITEM=6;var K=z;class q extends r.a{constructor(){super(),this.isFristTime=!1}handleMessage(e,t,i){super.handleMessage();r.a.CONTEN_START_BYTE_INDEX;t==RequestKeys.ValidChangeCardPoint.Sub.status&&PreLoaderConfig.ValidChangeCardPoint&&(AppInfo.gameMovie.gameBoard.validChangeCardPoint=1===i,AppInfo.gameMovie.gameBoard.validChangeCardPoint?(AppInfo.gameMovie.displayController.myBaseStation.playEffectValidChangeCardPoint(),AppInfo.gameMovie.displayController.myBaseStation.changeGun(4)):AppInfo.gameMovie.displayController.myBaseStation.stopEffectValidChangeCardPoint())}}var Q=q;class J extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t===RequestKeys.BotInfo.Sub.listBot){let t,i;const o=[];t=e.getInt32(s=DataView.calculateByteIndexInt32(s),!0),s+=4;for(let n=0;n<t;n++)i=e.getStringUint8(s,50),o.push(i),s+=50;AppInfo.GameInfo.listBotSeverPush=o}}get gameMovie(){return AppInfo.gameMovie}}var Z=J;class j extends r.a{constructor(){super(),this.isFristTime=!1}handleMessage(e,t,i){super.handleMessage();let s,o,n=r.a.CONTEN_START_BYTE_INDEX;const a=[];let h;switch(t){case RequestKeys.SkillInfo.Sub.skillAvailable:for(s=e.getInt32(n=DataView.calculateByteIndexInt32(n),!0),o=e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0),n+=4,h=0;h<s;h++)a.push(e.getInt32(n=DataView.calculateByteIndexInt32(n),!0)),n+=4;AppInfo.gameMovie.displayController.availableSkill(a);break;case RequestKeys.SkillInfo.Sub.userSkill:s=e.getInt32(n=DataView.calculateByteIndexInt32(n),!0),o=e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0);const t=[];for(h=0;h<s;h++)t.push({id:e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0),remainSecond:e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0),scoreGetSkill:e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0),timeEffect:e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0)});AppInfo.gameMovie.displayController.updateInfoSkillBoss(t);break;case RequestKeys.SkillInfo.Sub.endSkill:const i=e.getInt32(n=DataView.calculateByteIndexInt32(n),!0),l=e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0),r=e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0),p=e.getInt32(n=DataView.calculateByteIndexInt32(n+=4),!0);AppInfo.gameMovie.displayController.endEffectSkill(i,l,r,p)}}}var $=j;class ee extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;const o=RequestKeys.BattleBossMedusa.Sub;if(t===o.joinRoom){const t=e.getUint32(s,!0);var n=e.getUint64(s+4,!0);AppInfo.gameMovie.displayController.joinRoomFightBoss(t,n)}else if(t===o.positionUser){const t=e.getUint32(s,!0);AppInfo.gameMovie.displayController.requestBattleBossPositionUser(t)}else if(t===o.bossAttack){var a=e.getUint32(s,!0),h=e.getUint32(s+=4,!0);const t=e.getUint32(s+=4,!0);var l=e.getUint32(s+=4,!0),p=e.getUint32(s+4,!0);AppInfo.gameMovie.displayController.battleBossAttack(a,h,t,l,p)}else if(t===o.userBeAttacked){const t=e.getUint32(s,!0);n=e.getUint64(s+=4,!0),p=e.getUint32(s+=8,!0);const i=e.getUint32(s+=4,!0),o=e.getUint32(s+=4,!0);l=e.getUint32(s+4,!0);AppInfo.gameMovie.displayController.battleBossUserBeAttacked(t,n,p,i,1===o,l)}else if(t===o.statueBroken)AppInfo.gameMovie.displayController.battleBossMedusaStatueBroken();else if(t===o.angleEye){a=e.getUint32(s,!0),h=e.getUint32(s+=4,!0);const t=e.getUint32(s+=4,!0),i=e.getUint32(s+4,!0);AppInfo.gameMovie.displayController.battleBossMedusaHitEye(a,h,t,1===i)}else if(t===o.releaseEye){const t=e.getUint32(s,!0),i=e.getUint32(s+=4,!0),o=e.getUint32(s+=4,!0),n=e.getUint32(s+4,!0);AppInfo.gameMovie.displayController.battleBossMedusaReleaseEye(t,i,o,n)}else if(t===o.endGame){const t=RequestKeys.BattleBossMedusa.HandleCode.win===i,o=e.getUint32(s,!0);var d=e.getUint32(s+=4,!0);const n=[];for(var c=0;c<o;c++){const t=e.getUint32(s+=4,!0),i=e.getUint32(s+=4,!0),o=e.getUint32(s+=4,!0);n.push({rewardType:t,rewardDetail:i,rewardValue:o}),s+=d-12}AppInfo.gameMovie.displayController.finishFightBoss(t,n)}else if(t===o.listMission){const t=e.getUint32(s,!0),i=e.getUint32(s+=4,!0);d=e.getUint32(s+=4,!0);const o=[];for(c=0;c<i;c++){var u=e.getUint32(s+=4,!0);const t=e.getUint32(s+=4,!0),i=e.getUint32(s+=4,!0);var m=e.getUint32(s+=4,!0);o.push({info:t+"|0|"+i,id:u,point:m}),s+=d-16}AppInfo.gameMovie.displayController.missionBattleBoss(t,o)}else if(t===o.completeMission){e.getUint32(s,!0);u=e.getUint32(s+=4,!0);const t=e.getUint32(s+=4,!0),i=e.getUint32(s+=4,!0);m=e.getUint32(s+=4,!0);var f=e.getUint32(s+4,!0);AppInfo.gameMovie.displayController.updateProgressBattleBoss(u,t,i,m,f)}else if(t===o.infoHitBoss){l=e.getUint32(s,!0);const t=e.getUint32(s+=4,!0),i=e.getUint32(s+4,!0);AppInfo.gameMovie.displayController.battleBossUpdateInfoBoss(l,t,i)}else if(t===o.releaseBoss){const t=e.getUint32(DataView.calculateByteIndexInt32(s),!0),i=e.getUint32(DataView.calculateByteIndexInt32(s+=4),!0),o=e.getUint32(DataView.calculateByteIndexInt32(s+=4),!0),n=e.getUint32(DataView.calculateByteIndexInt32(s+=4),!0),a=e.getUint32(DataView.calculateByteIndexInt32(s+=4),!0),h=e.getUint32(DataView.calculateByteIndexInt32(s+4),!0);AppInfo.gameMovie.displayController.addBossBattle(t,n,i,o,a,h)}else if(t===o.accumulatePoints){f=e.getUint32(DataView.calculateByteIndexInt32(s),!0);const t=e.getUint32(DataView.calculateByteIndexInt32(s+4),!0);AppInfo.gameMovie.displayController.battleBossAccumulatePoints(f,t)}switch(t){case o.collectGun:ee._collectGun(e,i,s);break;case o.infoSummonBoss:ee._receiveInfoBoss(e,i,s);break;case o.realCoin:ee._updateRealCoin(e,i,s)}}static _collectGun(e,t,i){let s,o,n,a,h;const l=[];let r,p,d,c,u;c=e.getUint32(DataView.calculateByteIndexInt32(i),!0),u=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0),s=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0),o=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0),n=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0),a=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0),h=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0);for(let t=0;t<a;t++)r=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0),p=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0),d=e.getUint32(DataView.calculateByteIndexInt32(i+=4),!0),l.push({id:r,collect:p,target:d});AppInfo.gameMovie.displayController.updateStatusCollectGun(s,o,n,a,l)}static _receiveInfoBoss(e,t,i){let s;s=e.getUint32(DataView.calculateByteIndexInt32(i),!0),AppInfo.gameMovie.displayController.infoSummonBoss(s)}static _updateRealCoin(e,t,i){let s;s=e.getUint32(DataView.calculateByteIndexInt32(i),!0),AppInfo.gameMovie.displayController.myBaseStation.updateRealCoin(s)}}var te=ee;class ie extends r.a{constructor(){super(),this.isFristTime=!1}handleMessage(e,t,i){super.handleMessage();const s=r.a.CONTEN_START_BYTE_INDEX;t===RequestKeys.SecondWallet.Sub.start&&this._addCrabWallet(s,e,i)}_addCrabWallet(e,t,i){const s=t.getUint64(e=DataView.calculateByteIndexInt64(e),!0),o=t.getUint32(e=DataView.calculateByteIndexInt32(e+=8),!0);i===RequestKeys.SecondWallet.HandleCode.startInfo?AppInfo.gameMovie.displayController.addCrabWallet(s,o):i===RequestKeys.SecondWallet.HandleCode.update?AppInfo.gameMovie.displayController.updateCrabWallet(s):i===RequestKeys.SecondWallet.HandleCode.end&&AppInfo.gameMovie.displayController.updateCrabZero(s)}}var se=ie;class oe extends r.a{constructor(){super()}handleMessage(e,t,i){super.handleMessage();let s=r.a.CONTEN_START_BYTE_INDEX;if(t===RequestKeys.SeverMessageGame.Sub.messageInfo){let t,i,o;t=e.getStringUint8(s,200),i=e.getInt32(s=DataView.calculateByteIndexInt32(s+=200),!0),o=e.getStringUint8(s+=4,200),this._showInfo(t,i,o)}}_showInfo(e,t,i){switch(t){case oe.TYPE_MESSAGE.POP_UP:AppInfo.preLoader.popUpController.showPopupNotify(e);break;case oe.TYPE_MESSAGE.TOAST:AppInfo.preLoader.globalCompoController.compoToast.addMessage(e);break;case oe.TYPE_MESSAGE.NOTIFICATION:const t={message:e,repeat:1,priority:!1,isGameMessage:!0};AppInfo.GameInfo.messNotify.push(t),1===AppInfo.GameInfo.messNotify.length?AppInfo.preLoader.globalCompoController.compoNotifyGame.show(t,t.repeat):AppInfo.GameInfo.messNotify.sort(this.sortMessage)}}get gameMovie(){return AppInfo.gameMovie}}oe.TYPE_MESSAGE={POP_UP:0,TOAST:1,NOTIFICATION:2};var ne=oe;class ae extends n.a{constructor(e,t){super(e,t),this.severMessageHandler=null,this.secondWalletHandler=null,this.skillInfoHandler=null,this.botInfoHandler=null,this.validChangeCardPointHandler=null,this.tournamentNotifyGameHandler=null,this.notifyAchievementHandler=null,this.userUseItemHandler=null,this.ticketHandler=null,this.missionInGameHandler=null,this.chatInfoHandler=null,this.gemHandler=null,this.guildInfoHandler=null,this.contextFishHandler=null,this.bonusGameHandler=null,this.giftBoxHandler=null,this.gunSkillInfoHandler=null,this.kickUserOutGameHandler=null,this.popupInGameHandler=null,this.userActionHandler=null,this.gameNotifyInfoHandler=null,this.joinServerGameInfoHandler=null,this.loginGameHandler=null,this.initGameHandler()}initGameHandler(){this.loginGameHandler=new c,this.joinServerGameInfoHandler=new f,this.gameNotifyInfoHandler=new I,this.userActionHandler=new C,this.popupInGameHandler=new w,this.kickUserOutGameHandler=new M,this.gunSkillInfoHandler=new A,this.giftBoxHandler=new T,this.bonusGameHandler=new L,this.contextFishHandler=new P,this.guildInfoHandler=new F,this.gemHandler=new G,this.chatInfoHandler=new U,this.missionInGameHandler=new O,this.ticketHandler=new W,this.userUseItemHandler=new V,this.notifyAchievementHandler=new Y.a,this.tournamentNotifyGameHandler=new K,this.validChangeCardPointHandler=new Q,this.botInfoHandler=new Z,this.skillInfoHandler=new $,this.medusaHandler=new te,this.secondWalletHandler=new se,this.severMessageHandler=new ne,AppInfo.preLoader.receiveController=this}getGameHandlerByMainID(e){return e===l.GameNotifyInfo.Main?this.gameNotifyInfoHandler:e===l.UserActionInfo.Main?this.userActionHandler:e===l.PopupNotify.Main?this.popupInGameHandler:e===l.GiftBox.Main?this.giftBoxHandler:e===l.GunSkillInfo.Main?this.gunSkillInfoHandler:e===l.LoginGame.Main?this.loginGameHandler:e===l.JoinServerGameInfo.Main?this.joinServerGameInfoHandler:e===l.KickUserOutGameInfo.Main?this.kickUserOutGameHandler:e===l.BonusGame.Main?this.bonusGameHandler:e===l.ContentFishTrace.Main?this.contextFishHandler:e===l.GuildInfo.Main?this.guildInfoHandler:e===l.GemInfo.Main?this.gemHandler:e===l.ChatInfo.Main?this.chatInfoHandler:e===l.MissionInGame.Main?this.missionInGameHandler:e===l.TickerGame.Main?this.ticketHandler:e===l.ItemInGame.Main?this.userUseItemHandler:e===l.NotiAchievement.Main?this.notifyAchievementHandler:e===l.TournamentInGame.Main?this.tournamentNotifyGameHandler:e===l.ValidChangeCardPoint.Main?this.validChangeCardPointHandler:e===l.BotInfo.Main?this.botInfoHandler:e===l.SkillInfo.Main?this.skillInfoHandler:e===l.BattleBossMedusa.Main?this.medusaHandler:e===l.SecondWallet.Main?this.secondWalletHandler:e===l.SeverMessageGame.Main?this.severMessageHandler:void 0}}var he=ae,le=i(18);class re extends le.a{constructor(e){super(e),this.socketController=e,AppInfo.preLoader.requestController=this}startGame(){setTimeout(()=>{Utilities.warn("sending startGame message to server "+this.defaultServerAndPortGame),this.socketController.sendMessage(MessageHelper.startGameMessage(),this.defaultServerAndPortGame)},1e3)}userLog(e){Utilities.error("send userLog : "+e),this.socketController.sendMessage(MessageHelper.sendUserLog(e),this.defaultServerAndPortGame)}userFire(e,t,i,s,o,n){Utilities.error("send userFire with bulletType: "+e+", at angle "+t+" with lockFishID: "+o+", and power: "+s),s=s||0,o=o||0,n=n||!1,this.socketController.sendMessage(MessageHelper.userFireMessage(e,t,s,o,i,n),this.defaultServerAndPortGame)}userFireInFishArea(e,t,i,s=0,o=0,n=!1){this.socketController.sendMessage(MessageHelper.userFireInFishAreaMessage(e,t,s,o,i,n),this.defaultServerAndPortGame)}catchFishInFishArea(e,t,i,s,o){1==e?e=2:2==e?e=3:3==e&&(e=5),this.socketController.sendMessage(MessageHelper.catchFishInAreaMessage(e,t,i,s,o),this.defaultServerAndPortGame)}catchFish(e,t,i,s,o){1==e?e=2:2==e?e=3:3==e&&(e=5),this.socketController.sendMessage(MessageHelper.catchFishMessage(e,t,i,s,o),this.defaultServerAndPortGame)}catchBossMap(e,t,i,s){this.socketController.sendMessage(MessageHelper.catchBossMapMessage(e,t,i,s),this.defaultServerAndPortGame)}getTopHitBoss(){Utilities.log("RequestController.prototype.getTopHitBoss"),this.socketController.sendMessage(MessageHelper.UpdateTopHitBoss())}userUp(){this.socketController.sendMessage(MessageHelper.userUpMessage(),this.defaultServerAndPortGame)}getSkillList(){Utilities.log("send getSkillList"),this.socketController.sendMessage(MessageHelper.getSkillListMessage(),this.defaultServerAndPortGame)}userUseSkill(e,t,i,s,o,n,a){this.socketController.sendMessage(MessageHelper.userUseSkillMessage(e,t,i,s,o,n,a),this.defaultServerAndPortGame)}userActiveSkill(e){this.socketController.sendMessage(MessageHelper.userActiveSkill(e),this.defaultServerAndPortGame)}skillCatchFish(e,t,i,s,o){Utilities.error("send skillCatchFish - position: "+e+", fishID: "+t+", bulletType: "+i+", bulletID: "+s),this.socketController.sendMessage(MessageHelper.skillCatchFishMessage(e,t,i,s,o),this.defaultServerAndPortGame)}catchBoomFish(e,t,i){this.socketController.sendMessage(MessageHelper.catchBoomFish(e,t,i),this.defaultServerAndPortGame)}catchBoomFishInFishArea(e,t,i){this.socketController.sendMessage(MessageHelper.catchBoomFishInFishArea(e,t,i),this.defaultServerAndPortGame)}nuevaBalaFish(e,t,i,s,o,n){1==e?e=2:2==e?e=3:3==e&&(e=5),this.socketController.sendMessage(MessageHelper.nuevaBalaFishMessage(e,t,i,s,o,n),this.defaultServerAndPortGame)}nuevaBalaBoss(e,t,i,s,o){this.socketController.sendMessage(MessageHelper.nuevaBalaBossMessage(e,t,i,s,o),this.defaultServerAndPortGame)}nuevaBalaBoom(e,t,i,s){this.socketController.sendMessage(MessageHelper.nuevaBalaBoomMessage(e,t,i,s),this.defaultServerAndPortGame)}gunTrace(e,t,i,s){this.socketController.sendMessage(MessageHelper.gunTraceMessage(e,t,i,s),this.defaultServerAndPortGame)}EN9KA6(e,t,i,s,o,n,a,h,l){"EN9KA6"==l?this.socketController.sendMessage(MessageHelper.ZDFJDI(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.EN9KA6(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}HEVT10(e,t,i,s,o,n,a,h,l){"HEVT10"==l?this.socketController.sendMessage(MessageHelper.B326HV(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.HEVT10(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}XJP1I5(e,t,i,s,o,n,a,h,l){"XJP1I5"==l?this.socketController.sendMessage(MessageHelper.O1GOXW(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.XJP1I5(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}UQHYWW(e,t,i,s,o,n,a,h,l){"UQHYWW"==l?this.socketController.sendMessage(MessageHelper.HEVT10(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.UQHYWW(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}S8E1J9(e,t,i,s,o,n,a,h,l){"S8E1J9"==l?this.socketController.sendMessage(MessageHelper.TP8OVQ(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.S8E1J9(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}O1GOXW(e,t,i,s,o,n,a,h,l){"O1GOXW"==l?this.socketController.sendMessage(MessageHelper.EN9KA6(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.O1GOXW(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}ZDFJDI(e,t,i,s,o,n,a,h,l){"ZDFJDI"==l?this.socketController.sendMessage(MessageHelper.L5L8NC(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.ZDFJDI(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}L5L8NC(e,t,i,s,o,n,a,h,l){"L5L8NC"==l?this.socketController.sendMessage(MessageHelper.UQHYWW(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.L5L8NC(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}B326HV(e,t,i,s,o,n,a,h,l){"B326HV"==l?this.socketController.sendMessage(MessageHelper.S8E1J9(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.B326HV(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}TP8OVQ(e,t,i,s,o,n,a,h,l){"TP8OVQ"==l?this.socketController.sendMessage(MessageHelper.XJP1I5(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.TP8OVQ(e,t,s||0,o||0,i,n||!1,h),this.defaultServerAndPortGame)}P59UG8(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"P59UG8"==h?this.socketController.sendMessage(MessageHelper.MGTTQB(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.P59UG8(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}D4US1K(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"D4US1K"==h?this.socketController.sendMessage(MessageHelper.XL9V68(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.D4US1K(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}N7TKK8(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"N7TKK8"==h?this.socketController.sendMessage(MessageHelper.OJNDH2(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.N7TKK8(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}MGU5P3(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"MGU5P3"==h?this.socketController.sendMessage(MessageHelper.UU4751(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.MGU5P3(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}MGTTQB(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"MGTTQB"==h?this.socketController.sendMessage(MessageHelper.N8EPT3(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.MGTTQB(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}XL9V68(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"XL9V68"==h?this.socketController.sendMessage(MessageHelper.FKCT44(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.XL9V68(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}OJNDH2(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"OJNDH2"==h?this.socketController.sendMessage(MessageHelper.MGU5P3(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.OJNDH2(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}N8EPT3(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"N8EPT3"==h?this.socketController.sendMessage(MessageHelper.D4US1K(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.N8EPT3(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}UU4751(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"UU4751"==h?this.socketController.sendMessage(MessageHelper.P59UG8(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.UU4751(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}FKCT44(e,t,i,s,o,n,a,h){1==e?e=2:2==e?e=3:3==e&&(e=5),"FKCT44"==h?this.socketController.sendMessage(MessageHelper.N7TKK8(e,t,i,s,o,a),this.defaultServerAndPortGame,!0):this.socketController.sendMessage(MessageHelper.FKCT44(e,t,i,s,o,a),this.defaultServerAndPortGame,!0)}YD4I2W(e,t,i,s,o,n,a,h){"YD4I2W"==h?this.socketController.sendMessage(MessageHelper.M1GGY2(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.YD4I2W(e,t,i,s,o,a),this.defaultServerAndPortGame)}P2ASMG(e,t,i,s,o,n,a,h){"P2ASMG"==h?this.socketController.sendMessage(MessageHelper.NJHODH(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.P2ASMG(e,t,i,s,o,a),this.defaultServerAndPortGame)}M1GGY2(e,t,i,s,o,n,a,h){"M1GGY2"==h?this.socketController.sendMessage(MessageHelper.AYD2FV(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.M1GGY2(e,t,i,s,o,a),this.defaultServerAndPortGame)}MGVW5S(e,t,i,s,o,n,a,h){"MGVW5S"==h?this.socketController.sendMessage(MessageHelper.BHBQBD(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.MGVW5S(e,t,i,s,o,a),this.defaultServerAndPortGame)}PENQX2(e,t,i,s,o,n,a,h){"PENQX2"==h?this.socketController.sendMessage(MessageHelper.D27HF1(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.PENQX2(e,t,i,s,o,a),this.defaultServerAndPortGame)}GGKYKB(e,t,i,s,o,n,a,h){"GGKYKB"==h?this.socketController.sendMessage(MessageHelper.YD4I2W(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.GGKYKB(e,t,i,s,o,a),this.defaultServerAndPortGame)}NJHODH(e,t,i,s,o,n,a,h){"NJHODH"==h?this.socketController.sendMessage(MessageHelper.PENQX2(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.NJHODH(e,t,i,s,o,a),this.defaultServerAndPortGame)}D27HF1(e,t,i,s,o,n,a,h){"D27HF1"==h?this.socketController.sendMessage(MessageHelper.P2ASMG(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.D27HF1(e,t,i,s,o,a),this.defaultServerAndPortGame)}BHBQBD(e,t,i,s,o,n,a,h){"BHBQBD"==h?this.socketController.sendMessage(MessageHelper.GGKYKB(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.BHBQBD(e,t,i,s,o,a),this.defaultServerAndPortGame)}AYD2FV(e,t,i,s,o,n,a,h){"AYD2FV"==h?this.socketController.sendMessage(MessageHelper.MGVW5S(e,t,i,s,o,a),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.AYD2FV(e,t,i,s,o,a),this.defaultServerAndPortGame)}HCRE11(e,t,i,s,o,n,a){"HCRE11"==a?this.socketController.sendMessage(MessageHelper.WXBBQW(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.HCRE11(e,t,i,s,n),this.defaultServerAndPortGame)}BY7YM3(e,t,i,s,o,n,a){"BY7YM3"==a?this.socketController.sendMessage(MessageHelper.U4KRH4(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.BY7YM3(e,t,i,s,n),this.defaultServerAndPortGame)}RRMPS6(e,t,i,s,o,n,a){"RRMPS6"==a?this.socketController.sendMessage(MessageHelper.SKB44Y(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.RRMPS6(e,t,i,s,n),this.defaultServerAndPortGame)}QWP5UN(e,t,i,s,o,n,a){"QWP5UN"==a?this.socketController.sendMessage(MessageHelper.BY7YM3(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.QWP5UN(e,t,i,s,n),this.defaultServerAndPortGame)}WXBBQW(e,t,i,s,o,n,a){"WXBBQW"==a?this.socketController.sendMessage(MessageHelper.RRMPS6(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.WXBBQW(e,t,i,s,n),this.defaultServerAndPortGame)}U4KRH4(e,t,i,s,o,n,a){"U4KRH4"==a?this.socketController.sendMessage(MessageHelper.T9RIQN(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.U4KRH4(e,t,i,s,n),this.defaultServerAndPortGame)}T9RIQN(e,t,i,s,o,n,a){"T9RIQN"==a?this.socketController.sendMessage(MessageHelper.CEBNIC(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.T9RIQN(e,t,i,s,n),this.defaultServerAndPortGame)}YA1SQF(e,t,i,s,o,n,a){"YA1SQF"==a?this.socketController.sendMessage(MessageHelper.HCRE11(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.YA1SQF(e,t,i,s,n),this.defaultServerAndPortGame)}SKB44Y(e,t,i,s,o,n,a){"SKB44Y"==a?this.socketController.sendMessage(MessageHelper.QWP5UN(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.SKB44Y(e,t,i,s,n),this.defaultServerAndPortGame)}CEBNIC(e,t,i,s,o,n,a){"CEBNIC"==a?this.socketController.sendMessage(MessageHelper.YA1SQF(e,t,i,s,n),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.CEBNIC(e,t,i,s,n),this.defaultServerAndPortGame)}QO0RA3(e,t,i,s,o,n){"QO0RA3"==n?this.socketController.sendMessage(MessageHelper.DVSPV1(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.QO0RA3(e,t,i,o),this.defaultServerAndPortGame)}MG9553(e,t,i,s,o,n){"MG9553"==n?this.socketController.sendMessage(MessageHelper.B19957(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.MG9553(e,t,i,o),this.defaultServerAndPortGame)}YSH7AZ(e,t,i,s,o,n){"YSH7AZ"==n?this.socketController.sendMessage(MessageHelper.JJHZDG(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.YSH7AZ(e,t,i,o),this.defaultServerAndPortGame)}JOSZYF(e,t,i,s,o,n){"JOSZYF"==n?this.socketController.sendMessage(MessageHelper.Z59AFF(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.JOSZYF(e,t,i,o),this.defaultServerAndPortGame)}BG0SH3(e,t,i,s,o,n){"BG0SH3"==n?this.socketController.sendMessage(MessageHelper.QO0RA3(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.BG0SH3(e,t,i,o),this.defaultServerAndPortGame)}Z59AFF(e,t,i,s,o,n){"Z59AFF"==n?this.socketController.sendMessage(MessageHelper.JOSZYF(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.Z59AFF(e,t,i,o),this.defaultServerAndPortGame)}WYE7IB(e,t,i,s,o,n){"WYE7IB"==n?this.socketController.sendMessage(MessageHelper.MG9553(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.WYE7IB(e,t,i,o),this.defaultServerAndPortGame)}B19957(e,t,i,s,o,n){"B19957"==n?this.socketController.sendMessage(MessageHelper.YSH7AZ(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.B19957(e,t,i,o),this.defaultServerAndPortGame)}DVSPV1(e,t,i,s,o,n){"DVSPV1"==n?this.socketController.sendMessage(MessageHelper.WYE7IB(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.DVSPV1(e,t,i,o),this.defaultServerAndPortGame)}JJHZDG(e,t,i,s,o,n){"JJHZDG"==n?this.socketController.sendMessage(MessageHelper.BG0SH3(e,t,i,o),this.defaultServerAndPortGame):this.socketController.sendMessage(MessageHelper.JJHZDG(e,t,i,o),this.defaultServerAndPortGame)}userChoiceBox(e){Utilities.error(e),this.socketController.sendMessage(MessageHelper.userChoiceBox(e),this.defaultServerAndPortGame)}userChoiceCoin(e,t){Utilities.error("bonusID "+e),Utilities.error("itemID "+t),this.socketController.sendMessage(MessageHelper.userChoiceCoin(e,t),this.defaultServerAndPortGame)}userChoiceChest(e,t){Utilities.error("bonusID "+e),Utilities.error("itemID "+t),this.socketController.sendMessage(MessageHelper.userChoiceChest(e,t),this.defaultServerAndPortGame)}userChoiceShell(e,t){Utilities.error("bonusID "+e),Utilities.error("itemID "+t),this.socketController.sendMessage(MessageHelper.userChoiceShell(e,t),this.defaultServerAndPortGame)}userChat(e,t){this.socketController.sendMessage(MessageHelper.userChat(e,t),this.defaultServerAndPortGame)}userCompleteMission(e){this.socketController.sendMessage(MessageHelper.userCompleteMission(e),this.defaultServerAndPortGame)}userUseItem(e){this.socketController.sendMessage(MessageHelper.userUseItem(e),this.defaultServerAndPortGame)}getItemBag(e){this.socketController.sendMessage(MessageHelper.userUseItem(e),this.defaultServerAndPortGame)}userUseItemSkill(e,t){this.socketController.sendMessage(MessageHelper.userUseItemSkill(e,t),this.defaultServerAndPortGame)}sendSpecialBulletFire(e,t,i,s,o,n,a,h){this.socketController.sendMessage(MessageHelper.sendSpecialBulletFire(e,t,i,s,o,n,a,h),this.defaultServerAndPortGame)}fishAttackUserTournament(e){this.socketController.sendMessage(MessageHelper.fishAttackUserTournament(e),this.defaultServerAndPortGame)}clearFish(){this.socketController.sendMessage(MessageHelper.clearFish(),this.defaultServerAndPortGame)}sendBonusKillBoss(e){this.socketController.sendMessage(MessageHelper.sendBonusKillBoss(e),this.defaultServerAndPortGame)}sendBuyItemInGame(e,t){this.socketController.sendMessage(MessageHelper.buyItemInGame(e,t),this.defaultServerAndPortGame)}sendRenewalRecharge(){this.socketController.sendMessage(MessageHelper.sendRenewalRecharge(),this.defaultServerAndPortGame)}setLanguageGame(e,t){this.socketController.sendMessage(MessageHelper.setLanguageInGame(e,t),this.defaultServerAndPortGame)}readyBattleBoss(e){this.socketController.sendMessage(MessageHelper.readyBattleBoss(e),this.defaultServerAndPortGame)}battleBossPositionUser(e,t){this.socketController.sendMessage(MessageHelper.battleBossPositionUser(e,t),this.defaultServerAndPortGame)}battleBossUserBeAttacked(e){this.socketController.sendMessage(MessageHelper.battleBossUserBeAttacked(e),this.defaultServerAndPortGame)}battleBossMedusaPositionEye(e,t){this.socketController.sendMessage(MessageHelper.battleBossMedusaPositionEye(e,t),this.defaultServerAndPortGame)}battleBossMedusaHitEye(e,t,i){this.socketController.sendMessage(MessageHelper.battleBossMedusaHitEye(e,t,i),this.defaultServerAndPortGame)}battleBossMedusaFireEye(e,t,i,s,o){this.socketController.sendMessage(MessageHelper.battleBossMedusaFireEye(e,t,i,s,o,0),this.defaultServerAndPortGame)}get defaultServerAndPortGame(){return AppInfo.GameInfo.serverAndPort}}var pe=re,de=i(16);de.a;var ce=i(15);class ue extends ce.a{constructor(){super(),this._ratioBossSound=1,this._listSoundBanTrungCaThuong=[],this._listSoundBanTrungCaLon=[],this._listSoundGunFireEnemy=[],this._listSoundCoinBayVe=[],this._listSoundGunFire=[],this._bossComingSound=null,this._countPlaySoundBG=-1,this._backgroundMusicName="bgmusic",this._listBackgroundSound=[]}initInGame(){this.count=1,this._listBackgroundSound=[],this._listSoundGunFire=[],this._listSoundCoinBayVe=[],this._listSoundGunFireEnemy=[],this._listSoundBanTrungCaLon=[],this._listSoundBanTrungCaThuong=[];for(const e in ResourceManager.Sounds)ResourceManager.Sounds.hasOwnProperty(e)&&e.includes(this._backgroundMusicName)&&ResourceManager.Sounds[e]!=ResourceManager.Sounds.Sanh_bgmusic&&ResourceManager.Sounds[e]!=ResourceManager.Sounds.SevenSea_bgmusic&&this._listBackgroundSound.push(ResourceManager.Sounds[e]);Utilities.shuffleArray(this._listBackgroundSound)}disposeInGame(){this.stopGameBGSound()}playGameBGSound(){AppInfo.GameInfo.tournamentRoom||AppInfo.preLoader.screenController.isLobby()||(this._countPlaySoundBG++,this._countPlaySoundBG===this._listBackgroundSound.length&&(this._countPlaySoundBG=0,Utilities.shuffleArray(this._listBackgroundSound)),this._insSoundBG=this._listBackgroundSound[this._countPlaySoundBG].name,this.playSound(this._insSoundBG,this.playGameBGSound.bind(this),"complete",{volume:this._ratioBossSound}))}stopGameBGSound(){this.stopSound(this._insSoundBG),this._countPlaySoundBG=-1}playPoseidonGong(){this._insPoseidonGong=ResourceManager.Sounds.PoseidonGong.name,this.playSound(this._insPoseidonGong,this.playPoseidonGong.bind(this),"complete",{volume:1})}stopPoseidonGong(){this.stopSound(this._insPoseidonGong)}playPoseidonNo(){const e=ResourceManager.Sounds.PoseidonNo.name;this.playSound(e,null,"",{interrupt:"",volume:1})}playBGMerMaid(){this._ratioBossSound=.2,this._insBGMerMaid=ResourceManager.Sounds.bgMermaid.name,this.playSound(this._insBGMerMaid,this.playBGMerMaid.bind(this),"complete",{volume:1})}stopBGMerMaid(){this._ratioBossSound=1,this.stopSound(this._insBGMerMaid)}playMerMaidHarp(){const e="MermaidHarp_"+Utilities.Number.randRange(1,13),t=ResourceManager.Sounds[e].name;this.playSound(t,null,"",{interrupt:"",volume:.5})}playFishDieBigSound(){}playFishDieNormalSound(){}playGunFireSound(){this.playSound(ResourceManager.Sounds.SungBan.name)}playGunFireEnemySound(){this.playSound(ResourceManager.Sounds.SungBan_DoiPhuong.name)}playMoonAngleDeathSound(){this._insMoonAngelDeath=ResourceManager.Sounds.Boss_Death.name,this.playSound(this._insMoonAngelDeath,null,"",{interrupt:""})}playCaTranXuatHienSound(){this._insCaTranXuatHien||(this._insCaTranXuatHien=ResourceManager.Sounds.CaTranXuatHien.name),this.playSound(this._insCaTranXuatHien,null,"",{interrupt:""})}playChangeGunSound(){this._insDoiSung=ResourceManager.Sounds.DoiSung.name,this.playSound(this._insDoiSung)}playWaveSound(){this._insWave||(this._insWave=ResourceManager.Sounds.wave.name),this.playSound(this._insWave)}playCaDoChet(){this._insCaDoChet||(this._insCaDoChet=ResourceManager.Sounds.CaDoChet.name),this.playSound(this._insCaDoChet)}playSet(){this._insSet||(this._insSet=ResourceManager.Sounds.Set.name),this.playSound(this._insSet)}stopWaveSound(){this.stopSound(this._insWave)}playBossComingSound(){this._insMiniBoss||(this._ratioBossSound=.1,this._insBossComing&&this.stopBossComingSound(),this._insBossComing=ResourceManager.Sounds.bosscome.name,AppInfo.GameInfo.tournamentRoom&&(this._isDefStartWaveBG.volume=.1),this.playSound(this._insBossComing,null,"",{loop:-1,volume:.5}))}stopBossComingSound(){this._ratioBossSound=1,this._insBossComing&&(this.stopSound(this._insBossComing),this._insBossComing=null),AppInfo.GameInfo.tournamentRoom&&(this._isDefStartWaveBG.volume=1)}getInsBossComing(){return this._insBossComing?this._insBossComing:null}playBoom(){this._insBoom||(this._insBoom=ResourceManager.Sounds.bom.name),this.playSound(this._insBoom)}playGayChoang(){this._insGayChoang||(this._insGayChoang=ResourceManager.Sounds.GayChoang.name),this.playSound(this._insGayChoang)}playNhanMaChet(){this._insNhanMaChet||(this._insNhanMaChet=ResourceManager.Sounds.NhanMaChet.name),this.playSound(this._insNhanMaChet)}playSkillFull(){this._insSkillFull||(this._insSkillFull=ResourceManager.Sounds.SkillFull.name),this.stopSound(this._insSkillFull),this.playSound(this._insSkillFull,null,"",{loop:6})}playSkillActive(){this._insSkillActive||(this._insSkillActive=ResourceManager.Sounds.SkillActive.name),this.stopSound(this._insSkillActive),this.playSound(this._insSkillActive)}playTrungCa(){this.playSound(ResourceManager.Sounds.TrungCa.name)}playWarning(){this._insWarning||(this._insWarning=ResourceManager.Sounds.Warning.name),this.stopSound(this._insWarning),this.playSound(this._insWarning)}playCoinBayVe(){this.playSound(ResourceManager.Sounds.CoinBayVe.name)}playCoinWin(){this.playSound(ResourceManager.Sounds.CoinWin.name)}playHopQuaMo(){this._insHopQuaMo||(this._insHopQuaMo=ResourceManager.Sounds.HopQuaMo.name),this.playSound(this._insHopQuaMo)}playHopQuaNo(){this._insHopQuaNo||(this._insHopQuaNo=ResourceManager.Sounds.HopQuaNo.name),this.playSound(this._insHopQuaNo)}playThanTai(){this._insThanTai=ResourceManager.Sounds.thantai.name,this.playSound(this._insThanTai,this.playThanTai.bind(this),"complete",{volume:1})}stopThanTai(){this.stopSound(this._insThanTai)}onPlaySoundComplete(e){e.idle=!0}getSoundInPool(e){PIXI.sound.play(e)}playBrokenGlass(){this._insBrokenGlass=ResourceManager.Sounds.BrokenGlass.name,this.playSound(this._insBrokenGlass)}playTomatoExplode(){this._insTomatoExplode=ResourceManager.Sounds.TomatoExplode.name,this.playSound(this._insTomatoExplode)}stopAllSkillGun(){this._insSkillLaser&&this.stopSound(this._insSkillLaser),this._insSungSkillBan&&this.stopSound(this._insSungSkillBan),this._insSkillBomb&&this.stopSound(this._insSkillBomb),this._insSkillTorpedo&&this.stopSound(this._insSkillTorpedo),this._insSkillSockWave&&this.stopSound(this._insSkillSockWave)}playGunSkillFire(e){switch(e){case 1:this.playSkillLaser();break;case 2:this.playSkillSockWave();break;case 3:this.playSkillBomb();break;case 4:this.playSkillTorpedo();break;default:this.playSkillDefault()}}playSkillDefault(){this._insSungSkillBan||(this._insSungSkillBan=ResourceManager.Sounds.SungSkillBan.name),this.stopAllSkillGun(),this.playSound(this._insSungSkillBan)}playSkillBomb(){this._insSkillBomb||(this._insSkillBomb=ResourceManager.Sounds.SungSkillBomb.name),this.stopAllSkillGun(),this.playSound(this._insSkillBomb)}playSkillTorpedo(){this._insSkillTorpedo||(this._insSkillTorpedo=ResourceManager.Sounds.SungSkillTorpedo.name),this.stopAllSkillGun(),this.playSound(this._insSkillTorpedo)}playSkillLaser(){this._insSkillLaser||(this._insSkillLaser=ResourceManager.Sounds.SungSkillLaser.name),this.stopAllSkillGun(),this.playSound(this._insSkillLaser)}playSkillSockWave(){this._insSkillSockWave||(this._insSkillSockWave=ResourceManager.Sounds.SungSkillSockWave.name),this.stopAllSkillGun(),this.playSound(this._insSkillSockWave)}playPoseidonBullet(){this._insPoseidonBullet||(this._insPoseidonBullet=ResourceManager.Sounds.PoseidonBullet.name),this.playSound(this._insPoseidonBullet)}playXoetDien(){this._insXoetDien||(this._insXoetDien=ResourceManager.Sounds.XoetDien.name),this.playSound(this._insXoetDien)}playChonCa(){this._insChonCa||(this._insChonCa=ResourceManager.Sounds.ChonVoCa.name),this.playSound(this._insChonCa)}playKeoCa(){this._insKeoCa||(this._insKeoCa=ResourceManager.Sounds.KeoCa.name),this.playSound(this._insKeoCa)}playSoundTorpedoSpin(){this._insTorpedoSpin||(this._insTorpedoSpin=ResourceManager.Sounds.TorpedoSpin.name),this.playSound(this._insTorpedoSpin)}playSoundDragonMultibleBullet(){}playSoundDragonBullet(){}playSoundDragonGongLong(){this._insDragonGong||(this._insDragonGong=ResourceManager.Sounds.BossRong_RongGamGuDai.name),this.playSound(this._insDragonGong)}playSoundDragonGongShort(){}playSoundDragonMove(){this._insDragonMove||(this._insDragonMove=ResourceManager.Sounds.BossRong_RongDi.name),this.playSound(this._insDragonMove)}playSoundMiniBoss(){this._insBossComing&&this.stopBossComingSound()}playSoundDefBG(){this.stopGameBGSound(),this._isDefStartWaveBG||(this._isDefStartWaveBG=ResourceManager.Sounds.DefBackgroundInGameTour.name),this.playSound(this._isDefStartWaveBG,null,"",{loop:-1})}stopSoundDefBG(){this._isDefStartWaveBG&&this.stopSound(this._isDefStartWaveBG)}playSoundDefStartWave(){this._isDefStartWave||(this._isDefStartWave=ResourceManager.Sounds.StartWave.name),this.playSound(this._isDefStartWave)}stopSoundMiniBoss(){this._insMiniBoss&&this.stopSound(this._insMiniBoss)}playFrozen(){this._insFrozen||(this._insFrozen=ResourceManager.Sounds.Frozen.name),this.playSound(this._insFrozen)}playStone(){this._insStone||(this._insStone=ResourceManager.Sounds.Stone.name),this.playSound(this._insStone)}playMedusaAbsorbent(){this._insMedusaAbsorbent||(this._insMedusaAbsorbent=ResourceManager.Sounds.MedusaAbsorbent.name),this.playSound(this._insMedusaAbsorbent,null,"",{loop:-1})}playMedusaArrow(){this._insMedusaArrow||(this._insMedusaArrow=ResourceManager.Sounds.MedusaArrow.name),this.playSound(this._insMedusaArrow)}playMedusaComeIn(){this._insMedusaComeIn||(this._insMedusaComeIn=ResourceManager.Sounds.MedusaComeIn.name),this.playSound(this._insMedusaComeIn)}playMedusaComeOut(){this._insMedusaComeOut||(this._insMedusaComeOut=ResourceManager.Sounds.MedusaComeOut.name),this.playSound(this._insMedusaComeOut)}playMedusaLose(){this._insMedusaLose||(this._insMedusaLose=ResourceManager.Sounds.MedusaLose.name),this.playSound(this._insMedusaLose)}playMedusaScream(){this._insMedusaScream||(this._insMedusaScream=ResourceManager.Sounds.MedusaScream.name),this.playSound(this._insMedusaScream)}playMedusaStatueBroken(){this._insMedusaStatueBroken||(this._insMedusaStatueBroken=ResourceManager.Sounds.MedusaStatueBroken.name),this.playSound(this._insMedusaStatueBroken)}playMedusaTransformRock(e){return this._insMedusaTransformRock||(this._insMedusaTransformRock=ResourceManager.Sounds.MedusaTransformRock.name),this._insMedusaTransformRock}playMedusaWelcome(){this._insMedusaWelcome||(this._insMedusaWelcome=ResourceManager.Sounds.MedusaWelcome.name),this.playSound(this._insMedusaWelcome)}playMedusaWin(){this._insMedusaWin||(this._insMedusaWin=ResourceManager.Sounds.MedusaWin.name),this.playSound(this._insMedusaWin)}stopMedusaAbsorbent(){this._insMedusaAbsorbent&&this.stopSound(this._insMedusaAbsorbent)}playBgNoel(){this._insBgNoel=ResourceManager.Sounds["bgNoel"+Utilities.Number.randRange(1,2)].name,this.playSound(this._insBgNoel,this.playBgNoel.bind(this),"complete",{volume:1})}stopBgNoel(){this.stopSound(this._insBgNoel)}playBgThanTai(){this._insBgThanTai=ResourceManager.Sounds.thantai.name,this.playSound(this._insBgThanTai,this.playBgThanTai.bind(this),"complete",{volume:1})}stopBgThanTai(){this.stopSound(this._insBgThanTai)}playBgThanTaiDen(){this._insBgThanTaiDen=ResourceManager.Sounds.thantaiden.name,this.playSound(this._insBgThanTaiDen,null,"complete",{volume:1})}playWinThanTai(){this._insWinThanTai=ResourceManager.Sounds.thangthantai.name,this.playSound(this._insWinThanTai,null,"complete",{volume:1})}playDropBar(){this._insBgThanTaiDropBar=ResourceManager.Sounds.GayChoang.name,this.playSound(this._insBgThanTaiDropBar,null,"complete",{volume:1})}poseidonAttack(){this._insPoseidonAttack=ResourceManager.Sounds.PoseidonAttack.name,this.playSound(this._insPoseidonAttack,null,"complete",{volume:1})}summonPoseidon(){this._insSummonPoseidon=ResourceManager.Sounds.SummonPoseidon.name,this.playSound(this._insSummonPoseidon,null,"complete",{volume:1})}}var me=ue,fe=i(103);var ge=class{initInGame(){PreLoaderConfig.TimeCheckCollision=PreLoaderConfig.TimeCheckCollision||16,this.listFishIDDuplicate=[],this.listClickSaving=[],this.oldIntervalFireGun=PreLoaderConfig.TimeIntervalFireGun,this.oldTimeSpaceBetween2Bullet=PreLoaderConfig.TimeSpaceBetween2Bullet,this.performanceTracing={performanceSpeedRange:0,performanceSpeedCounting:0,userConfig:{enableWaveBG:{defaultValue:PreLoaderConfig.GameSettingConfig.listSetting.enableWaveBG.defaultValue},enableFishShadow:{defaultValue:PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue},enableBubbleBullet:{defaultValue:PreLoaderConfig.GameSettingConfig.listSetting.enableBubbleBullet.defaultValue}}},this.enableHitFishMessage=!1,this.listItemGame=[],this.timeBlurTab=[],this.isFightingBoss=!1,this.isJoinBattleBoss=!1,this.listUserOnlineModel=[],this.listFish=[],this.lastBulletFire=0,this.quantityBulletOnScreen=0,this.listBullet=[],this.listFish=[],this.listFishBoss33Run=[],this.boss33Dance=!1,this.inFishArea=!1,this.isMedusa=!1,this.listFishDieParticle=[],this.listEffects=[],this.listBullet=[],this.nextBulletID=0,this.waitLockFish=!1,this.waitLightning=!1,this.lockFish=null,this.myUserOnlineModel=null,this.listUserOnlineModel=[],this.currentBoss=null,this.currentWave=0,this.waittingidCaTran=-1,this.infoTopHitBoss={bossID:0,listIdUser:[],nickName:[],score:[],rank:[],avatar:[]},this.infoOwnerHitBoss={userId:0,score:0},this.listBossReady=[],this.lastFirePoint=null,this.fireDuplicatePointCount=0,this.firstClickInGameScreen=!1,this.quantityBulletOnScreen=0,this.freeGunflag=!1,this.timeFreeGun=0,this.valueCardReward=0,this.fastGunFlag=!1,this.valueFastBulletReward=0,this.valueX2BulletReward=0,this.x2BulletValue=2,this.fastBulletValue=1,this.valueJactpotReward=0,this.valueLuckySpinReward=0,this.lastBulletFire=0,this.medusaDie=!1,this.listResourceHasLoad=[],this.listFishUserKill=[],this.listBossUserKill=[],this.totalCoinFish=0,this.coinStartGame=0,this.listFishIDDuplicate=[],this.roomSevenSeaKind=0,this.isFristTime=!1,this.oldIntervalFireGun=200,this.oldTimeSpaceBetween2Bullet=150,this.isNewSkillMode=!1,this.timeMouseClickBtnLockFish=0,this.mousePositionClickBtnLockFish={x:0,y:0},this.performanceTracing={performanceSpeedRange:0,performanceSpeedCounting:0,userConfig:null,intervalID:-1},this.enableHitFishMessage=!1,this.backToLobby=!1,this.newMessFishTrace=!1,this.timeBlurTab=[],this.fishLightning=null,this.listClickSaving=null}disposeInGame(){this.listItemGame=[],this.listBossReady=[],this.listFishBoss33Run=[],this.listFish=[],this.listFishDieParticle=[],this.listEffects=[],this.listBullet=[],this.listUserOnlineModel=[],this.listResourceHasLoad=[],this.listFishUserKill=[],this.listBossUserKill=[],this.listClickSaving=[],this.myUserOnlineModel=null,this.totalCoinFish=0,this.coinStartGame=0,this.nextBulletID=0,this.timeFreeGun=0,this.valueCardReward=0,this.lockFish=null,this.boss33Dance=!1,this.inFishArea=!1,this.isMedusa=!1,this.waitLockFish=!1,this.waitLightning=!1,this.fishLightning=null,this.freeGunflag=!1,this.x2GunFlag=!1,this.fastGunFlag=!1,this.newMessFishTrace=!1,this.x2BulletValue=0,this.fastBulletValue=0,this.medusaDie=!1,this.isFristTime=!1,this.currentBoss=null,this.currentWave=0,this.timeSpace2Bullet=0,this.roomSevenSeaKind=0,this.waittingidCaTran=-1,this.validChangeCardPoint=!1,this.isFightingBoss=!1,this.isJoinBattleBoss=!1,this.infoTopHitBoss={userCount:0,listIdUser:[],nickName:[],coinBonus:[],userIdLastHit:0,userScoreLastHit:0,userIndexLastHit:0,isBossDie:0},this.infoOwnerHitBoss={userId:0,score:0,rank:0,avatar:""},this.lastFirePoint=null,this.fireDuplicatePointCount=0,this.firstClickInGameScreen=!1,this.quantityBulletOnScreen=0,this.listFishIDDuplicate=[],PreLoaderConfig.TimeIntervalFireGun=this.oldIntervalFireGun,PreLoaderConfig.TimeSpaceBetween2Bullet=this.oldTimeSpaceBetween2Bullet,-1!=this.performanceTracing.intervalID&&(clearInterval(this.performanceTracing.intervalID),this.performanceTracing.intervalID=-1),this.performanceTracing.performanceSpeedRange=0,this.performanceTracing.performanceSpeedCounting=0,this.performanceTracing.userConfig={},this.performanceTracing.userConfig.enableWaveBG={defaultValue:PreLoaderConfig.GameSettingConfig.listSetting.enableWaveBG.defaultValue},this.performanceTracing.userConfig.enableFishShadow={defaultValue:PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue},this.performanceTracing.userConfig.enableBubbleBullet={defaultValue:PreLoaderConfig.GameSettingConfig.listSetting.enableBubbleBullet.defaultValue},this.enableHitFishMessage=!1}getNextBulletID(){return this.nextBulletID++}addUserOnlineModel(e,t){this.removeUserOnlineModelByUserID(e.userID),this.listUserOnlineModel.push(e),t&&(this.myUserOnlineModel=e)}removeUserOnlineModel(e){this.listUserOnlineModel.splice(this.listUserOnlineModel.indexOf(e),1)}getUserOnlineModelByUserID(e){for(let t=this.listUserOnlineModel.length-1;t>=0;t-=1)if(this.listUserOnlineModel[t].userID==e)return this.listUserOnlineModel[t];return null}removeUserOnlineModelByUserID(e){for(let t=this.listUserOnlineModel.length-1;t>=0;t-=1)if(this.listUserOnlineModel[t].userID==e)return this.listUserOnlineModel.splice(t,1);return null}getBulletByIDAndPosition(e,t){for(let i=this.listBullet.length-1;i>=0;i-=1)if(this.listBullet[i].basePosition==t&&this.listBullet[i].id==e)return this.listBullet[i];return null}getFishByID(e){for(let t=this.listFish.length-1;t>=0;t-=1)if(this.listFish[t].id==e)return this.listFish[t];return null}checkHasFishID(e){for(let t=this.listFish.length-1;t>=0;t-=1)if(this.listFish[t].id==e)return!0;return!1}removeBullet(e){Utilities.removeElementFromArray(this.listBullet,e)}removeBulletAtIndex(e){Utilities.removeElementAtIndex(this.listBullet,e)}removeOthersBullet(){this.listBullet.forEach((e,t)=>{e.isMe||(e.dispose(),Utilities.removeElementFromArray(this.listBullet,e)&&0)})}removeAllBullet(){for(;this.listBullet.length>0;){const e=this.listBullet[0];e.dispose(),Utilities.removeElementFromArray(this.listBullet,e)}this.quantityBulletOnScreen=0}removeFish(e){Utilities.removeElementFromArray(this.listFish,e)}removeFishAtIndex(e){Utilities.removeElementAtIndex(this.listFish,e)}},Ie=i(70);t.default=class extends o{constructor(){super(),AppInfo.gameMovie=this,this.socketController=AppInfo.preLoader.socketController,this.requestController=new pe(this.socketController),this.receiveController=new he(this.requestController,this.socketController)}init(){this.gameBoard=null,this.layerEffect=null,this.layerComponent=null,this.layerFishShadow=null,this.layerFish=null,this.layerBackground=null,this.displayController=null,AppInfo.gameMovie=this,this.displayController=new fe.a,this.gameBoard=new ge,this.layerBackground=new PIXI.Container,this.layerEffectUnderFish=new PIXI.Container,this.layerFish=new PIXI.Container,this.layerFishShadow=new PIXI.Container,this.layerBoss=new PIXI.Container,this.layerComponent=new PIXI.Container,this.layerEffect=new PIXI.Container,this.layerBackground.hitArea=PIXI.Rectangle.EMPTY,this.layerFishShadow.hitArea=PIXI.Rectangle.EMPTY,this.layerCoinEffect=new PIXI.particles.ParticleContainer(1e3,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0}),this.layerExplodeEffect=new PIXI.particles.ParticleContainer(1e3,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0}),this.isDisposed&&(this.isDisposed=!1,AppInfo.gameMovie&&AppInfo.gameMovie.gameBoard&&(this.gameBoard=AppInfo.gameMovie.gameBoard),AppInfo.gameMovie=this,null==this.layerBackground&&(this.layerBackground=new PIXI.Container,this.layerBackground.hitArea=PIXI.Rectangle.EMPTY),null==this.layerEffectUnderFish&&(this.layerEffectUnderFish=new PIXI.Container),null==this.layerFishShadow&&(this.layerFishShadow=new PIXI.Container,this.layerFishShadow.hitArea=PIXI.Rectangle.EMPTY),null==this.layerFish&&(this.layerFish=new PIXI.Container),null==this.layerComponent&&(this.layerComponent=new PIXI.Container),null==this.layerEffect&&(this.layerEffect=new PIXI.Container),null==this.layerBoss&&(this.layerBoss=new PIXI.Container),null==this.layerCoinEffect&&(this.layerCoinEffect=new PIXI.particles.ParticleContainer(1e3,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0})),null==this.layerExplodeEffect&&(this.layerExplodeEffect=new PIXI.particles.ParticleContainer(1e3,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0})),this.collisionManager=new Ie.a,null==this.displayController&&(this.displayController=new fe.a),null==this.gameBoard&&(this.gameBoard=new ge),this.contains(this.layerBackground)||this.addChild(this.layerBackground),this.contains(this.layerEffectUnderFish)||this.addChild(this.layerEffectUnderFish),this.contains(this.layerFishShadow)||this.addChild(this.layerFishShadow),this.contains(this.layerFish)||this.addChild(this.layerFish),this.contains(this.layerBoss)||this.addChild(this.layerBoss),this.contains(this.layerComponent)||this.addChild(this.layerComponent),this.contains(this.layerExplodeEffect)||this.addChild(this.layerExplodeEffect),this.contains(this.layerEffect)||this.addChild(this.layerEffect),this.contains(this.layerCoinEffect)||this.addChild(this.layerCoinEffect),this.soundController=new me,this.gameBoard.initInGame(),this.soundController.initInGame(),this.popupController.initInGame(),this.displayController.initInGame(),this.collisionManager.init(),AppInfo.preLoader.soundController=this.soundController,AppInfo.preLoader.globalCompoController.compoHeader.changeUIForGameScreen())}dispose(){this.isDisposed||(this.isDisposed=!0,this.unfreeze(),this.collisionManager.dispose(),this.soundController.disposeInGame(),this.displayController.disposeInGame(),this.gameBoard.disposeInGame(),this.collisionManager=null,this.removeChild(this.layerBackground),this.removeChild(this.layerFishShadow),this.removeChild(this.layerFish),this.removeChild(this.layerComponent),this.removeChild(this.layerEffect),this.removeChild(this.layerBoss),this.layerBackground.destroy(),this.layerFishShadow.destroy(),this.layerFish.destroy(),this.layerComponent.destroy(),this.layerEffect.destroy(),this.layerBoss.destroy(),this.layerBackground=null,this.layerFishShadow=null,this.layerFish=null,this.layerComponent=null,this.layerEffect=null,this.layerBoss=null)}strongVibration(e){this.strongBackground()}strong(e){TweenMax.fromTo(this.layerBackground,1,{x:-3,y:-3},{x:2,y:2,ease:RoughEase.ease.config({strength:12,points:60,template:Linear.easeNone,randomize:!1}),onComplete(){this.layerBackground.position.set(0),this.layerFishShadow.position.set(0),this.layerFish.position.set(0),this.layerFishShadow.position.set(0),this.layerEffect.position.set(0),e&&e.onComplete&&e.onComplete()},onCompleteScope:this})}strongBackground(){const e=[this.layerBackground,this.layerFishShadow,this.layerFish,this.layerFishShadow,this.layerEffect];TweenMax.fromTo(e,1,{x:-3,y:-3},{x:2,y:2,ease:RoughEase.ease.config({strength:12,points:50,template:Linear.easeNone,randomize:!1}),onComplete(){this.layerBackground.position.set(0),this.layerFishShadow.position.set(0),this.layerFish.position.set(0),this.layerFishShadow.position.set(0),this.layerEffect.position.set(0),vars&&vars.onComplete&&vars.onComplete()},onCompleteScope:this})}strongBackground(e){TweenMax.fromTo(this.layerBackground,1,{x:-3,y:-3},{x:2,y:2,ease:RoughEase.ease.config({strength:12,points:60,template:Linear.easeNone,randomize:!1}),onComplete(){this.layerBackground.position.set(0),this.layerFishShadow.position.set(0),this.layerFish.position.set(0),this.layerFishShadow.position.set(0),this.layerEffect.position.set(0),e&&e.onComplete&&e.onComplete()},onCompleteScope:this})}strongBackgroundBig(e){TweenMax.fromTo(this.layerBackground,1.5,{x:-5,y:-5},{x:4,y:4,ease:RoughEase.ease.config({strength:20,points:70,template:Linear.easeNone,randomize:!1}),onComplete(){this.x=0,this.y=0,e&&e.onComplete&&e.onComplete()},onCompleteScope:this.layerBackground})}slightVibration(e){TweenMax.fromTo(this,1,{x:-1,y:-1},{x:1,y:1,ease:RoughEase.ease.config({strength:6,points:50,template:Linear.easeNone,randomize:!1}),onComplete(){this.x=0,this.y=0,e&&e.onComplete&&e.onComplete()},onCompleteScope:this})}freeze(){this.interactiveChildren=!1}unfreeze(){this.interactiveChildren=!0}freezeLayer(e){this[e]&&(this[e].interactive=!1,this[e].interactiveChildren=!1)}unfreezeLayer(e){this[e]&&(this[e].interactive=!0,this[e].interactiveChildren=!0)}updateBackground(e){this.displayController.updateBackground(e)}onResize(e){Utilities.warn("not yet implement BanCa.prototype.onResize")}addUserSit(e){this.displayController.addUserSit(e)}processGameDataForViewer(e){this.displayController.processGameDataForViewer(e)}updatePosition(e,t){this.displayController.updatePosition(e,t)}userLeaveGame(e,t){this.displayController.userLeaveGame(e,t)}get popupController(){return AppInfo.preLoader.popUpController}get componentController(){return AppInfo.preLoader.globalCompoController}}},function(e,t,i){"use strict";class s{constructor(e,t){this._level=e,this._bounds=t,this._listNodes=[],this._nodesQuadTree=[]}clear(){for(let e=0;e<this._nodesQuadTree.length;e++)this._nodesQuadTree[e]&&this._nodesQuadTree[e].clear();this._nodesQuadTree.length=0,this._listNodes.length=0}remove(e){if(Utilities.removeElementFromArray(this._listNodes,e))return!0;for(let t=0;t<this._nodesQuadTree.length;t++)if(this._nodesQuadTree[t]&&this._nodesQuadTree[t].remove(e))return;return!1}split(){const e=this._bounds.width/2,t=this._bounds.height/2,i=this._bounds.x,o=this._bounds.y;this._nodesQuadTree[0]=new s(this._level+1,new PIXI.Rectangle(i+e,o,e,t)),this._nodesQuadTree[1]=new s(this._level+1,new PIXI.Rectangle(i,o,e,t)),this._nodesQuadTree[2]=new s(this._level+1,new PIXI.Rectangle(i,o+t,e,t)),this._nodesQuadTree[3]=new s(this._level+1,new PIXI.Rectangle(i+e,o+t,e,t))}getIndex(e){const t=e.getGlobalPosition();let i=-1;const s=this._bounds.x+this._bounds.width/2,o=this._bounds.y+this._bounds.height/2,n=t.y<=o,a=t.y>o;return t.x<s?n?i=1:a&&(i=2):t.x>s&&(n?i=0:a&&(i=3)),i}insert(e){if(void 0!==this._nodesQuadTree[0]&&-1!==(t=this.getIndex(e)))return void this._nodesQuadTree[t].insert(e);if(this._listNodes.push(e),this._listNodes.length>s.MAX_OBJECTS&&this._level<s.MAX_LEVELS){void 0===this._nodesQuadTree[0]&&this.split();let i=0;for(;i<this._listNodes.length;){var t;e=this._listNodes[i];-1!==(t=this.getIndex(e))?(this._nodesQuadTree[t].insert(e),Utilities.removeElementAtIndex(this._listNodes,i)):i++}}}retrieve(e,t){const i=this.getIndex(t);return-1!==i&&void 0!==this._nodesQuadTree[i]&&this._nodesQuadTree[i].retrieve(e,t),Array.prototype.push.apply(e,this._listNodes),e}isEmpty(){return 0===this._listNodes.length}}s.MAX_OBJECTS=100,s.MAX_LEVELS=1;var o=s;var n=class{constructor(e,t,i,s,o,n,a){this.parent=e,this.target=t,this.typeCollision=s||0,this.targetLocal=o||this.target,this.typeShape=n||0,this.metadata=Object.assign({},a),this.triggerOnce=!1,this.checkOnce=!1,this.triggerRoundOnce=!1,this.checkRoundOnce=!1,this.isRelease=!1,this.onRelease=null,this._points=i,this._globalPosition=new PIXI.Point,this._boundsCached=new PIXI.Rectangle,0===this.typeShape?(this._bounding=new SAT.Polygon,this.updatePoints(i)):1===this.typeShape?this._bounding=new SAT.Circle(new SAT.Vector,i):this._bounding=new SAT.Vector(i[0],i[1]),this._targetPosition=this.target,this._targetRotation=this.target,this._targetScale=this.target,this._targetBound=this.target,this._targetLocalBound=this.targetLocal}getBounding(){return this.getGlobalPosition(),0===this.typeShape?this._calculatePolygon():1===this.typeShape?this._calculateCircle():this._calculatePoint(),this._bounding}getGlobalPosition(e){return this._targetPosition.position?this._targetPosition.getGlobalPosition(this._globalPosition,e):(this._targetBound.getBounds(!1,this._boundsCached),this._globalPosition.x=(this._boundsCached.left+this._boundsCached.right)/2,this._globalPosition.y=(this._boundsCached.top+this._boundsCached.bottom)/2),this._globalPosition}getTarget(){return this.target}release(){this.isRelease||(this.isRelease=!0,this.parent&&this.parent.remove(this),this.onRelease&&this.onRelease(),this._graphics&&(this._graphics.alpha=0))}add(){this.parent&&this.parent.add(this)}updatePoints(e){const t=[];for(let i=0,s=e.length;i<s;i+=2){const s=new SAT.Vector(e[i],e[i+1]);t.push(s)}this._bounding.setPoints(t)}setTargetTransform(e){e=Object.assign({position:this.target,rotation:this.target,scale:this.target,bound:this.target,localBound:this.targetLocal},e),this._targetPosition=e.position,this._targetRotation=e.rotation,this._targetScale=e.scale,this._targetBound=e.bound,this._targetLocalBound=e.localBound}_drawBounding(){this.getBounding();const e=this._getGraphic();if(e)if(0===this.typeShape){const t=[],i=this._bounding.calcPoints;for(let e=0;e<i.length;e++)t.push(i[e].x,i[e].y);t.push(i[0].x,i[0].y),e.clear().beginFill(0,0).lineStyle(1,16777215,1).drawPolygon(t).endFill()}else 1===this.typeShape?e.clear().beginFill(0,0).lineStyle(1,16777215,1).drawCircle(this._globalPosition.x,this._globalPosition.y,this._bounding.r).endFill():e.clear().beginFill(0,0).lineStyle(1,16777215,1).drawRect(this._globalPosition.x+this._points[0],this._globalPosition.y+this._points[1],1,1).endFill()}_getGraphic(){return void 0===this._graphics&&(this._graphics=new PIXI.Graphics,AppInfo.gameMovie.layerEffect.addChild(this._graphics)),this._graphics.alpha=1,this._graphics}_calculatePolygon(){this._targetLocalBound.getLocalBounds(this._boundsCached),this._bounding.setCentroid(new SAT.Vector(this._globalPosition.x,this._globalPosition.y)),this._bounding.setOffset(new SAT.Vector(this._globalPosition.x+this._boundsCached.x,this._globalPosition.y+this._boundsCached.y)),void 0!==this._targetRotation.rotation&&null!==this._targetRotation.rotation&&this._bounding.setAngle(this._targetRotation.rotation),void 0!==this._targetScale.scale&&null!==this._targetScale.scale&&this._bounding.setScale(new SAT.Vector(1-this._targetScale.scale.x,1-this._targetScale.scale.y))}_calculateCircle(){this._bounding.setOffset(new SAT.Vector(this._globalPosition.x,this._globalPosition.y))}_calculatePoint(){this._bounding.set(this._globalPosition.x+this._points[0],this._globalPosition.y+this._points[1])}};class a{constructor(){this.listNodesBullet=[],this.listNodesFish=[],this.listNodesGeneric=[],this.listCheckRound=[],this.listRetrieve=[],this.quadTree=new o(0,new PIXI.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight)),this.responseSAT=new SAT.Response}init(){this.start()}dispose(){this.stop(),this.listNodesBullet.length=0,this.listNodesFish.length=0,this.listNodesGeneric.length=0,this.listCheckRound.length=0,this.listRetrieve.length=0,this.quadTree=null,this.responseSAT=null}start(){TweenMax.ticker.addEventListener("tick",this.onUpdateFrame,this)}stop(){TweenMax.ticker.removeEventListener("tick",this.onUpdateFrame)}addShape(e,t,i,s,o,a){const h=new n(this,e,t,i,s,a,o);return this.addToListNodes(h),h}addPolygon(e,t,i,s,o){return this.addShape(e,t,i,s,o,a.TYPE_SHAPE.POLYGON)}addCircle(e,t,i,s,o){return this.addShape(e,t,i,s,o,a.TYPE_SHAPE.CIRCLE)}addPoint(e,t,i,s,o){return this.addShape(e,t,i,s,o,a.TYPE_SHAPE.POINT)}add(e){e&&(e.isRelease=!1,this.addToListNodes(e))}addToListNodes(e){const t=e.typeCollision;t===a.TYPE_COLLISION.FISH?this.listNodesFish.includes(e)||this.listNodesFish.push(e):t===a.TYPE_COLLISION.BULLET?this.listNodesBullet.includes(e)||this.listNodesBullet.push(e):t===a.TYPE_COLLISION.GENERIC&&(this.listNodesGeneric.includes(e)||this.listNodesGeneric.push(e))}remove(e){if(e){const t=e.typeCollision;t===a.TYPE_COLLISION.FISH?Utilities.removeElementFromArray(this.listNodesFish,e):t===a.TYPE_COLLISION.BULLET?Utilities.removeElementFromArray(this.listNodesBullet,e):t===a.TYPE_COLLISION.GENERIC&&Utilities.removeElementFromArray(this.listNodesGeneric,e)}}isNodeLive(e){if(e){const t=e.getTarget();if(t&&!t._destroyed)return!0;this.remove(e)}return!1}isNodeRender(e){if(e){const t=e.getTarget();return!!t&&(t.visible&&t.renderable)}return!1}_insertNode(e){this.quadTree.insert(e),e.checkRoundOnce&&this.listCheckRound.push(e)}onUpdateFrame(){let e;let t;for(PreLoaderConfig.EnabledAreaCollision&&this._drawBounding(),this.quadTree.clear(),e=0,i=this.listNodesBullet.length;e<i;e++)t=this.listNodesBullet[e],this.isNodeLive(t)&&this.isNodeRender(t)&&this._insertNode(t);for(e=0,i=this.listNodesGeneric.length;e<i;e++)t=this.listNodesGeneric[e],this.isNodeLive(t)&&this.isNodeRender(t)&&this._insertNode(t);if(!this.quadTree.isEmpty()){for(let e=0,t=this.listNodesFish.length;e<t;++e){this.listRetrieve.length=0;const t=this.listNodesFish[e];var i;if(void 0!==t)if(this.isNodeLive(t)&&this.isNodeRender(t))if(t.checkRoundOnce&&this.listCheckRound.push(t),this.quadTree.retrieve(this.listRetrieve,t),(i=this.listRetrieve.length)>0){const e=t.getBounding();for(let s=0;s<i;s++){const i=this.listRetrieve[s];i!==t&&(i.isRelease||t.isRelease||this._checkCollision(i,t,e))}}}this._releaseCheckRound()}}_checkCollision(e,t,i){let s=!1;const o=e.getBounding();e.typeShape===a.TYPE_SHAPE.POLYGON?t.typeShape===a.TYPE_SHAPE.POLYGON?s=SAT.testPolygonPolygon(o,i,this.responseSAT):t.typeShape===a.TYPE_SHAPE.CIRCLE?s=SAT.testPolygonCircle(o,i,this.responseSAT):t.typeShape===a.TYPE_SHAPE.POINT&&(s=SAT.pointInPolygon(i,o)):e.typeShape===a.TYPE_SHAPE.CIRCLE?t.typeShape===a.TYPE_SHAPE.POLYGON?s=SAT.testPolygonCircle(i,o,this.responseSAT):t.typeShape===a.TYPE_SHAPE.CIRCLE?s=SAT.testCircleCircle(o,i,this.responseSAT):t.typeShape===a.TYPE_SHAPE.POINT&&(s=SAT.pointInCircle(i,o)):e.typeShape===a.TYPE_SHAPE.POINT&&(t.typeShape===a.TYPE_SHAPE.POLYGON?s=SAT.pointInPolygon(o,i):t.typeShape===a.TYPE_SHAPE.CIRCLE&&(s=SAT.pointInCircle(o,i))),s&&(e.target.onTriggerCollide&&e.target.onTriggerCollide(t,this.responseSAT),t.target.onTriggerCollide&&t.target.onTriggerCollide(e,this.responseSAT),e.triggerOnce&&e.release(),t.triggerOnce&&t.release()),e.checkOnce&&e.release(),t.checkOnce&&t.release()}_releaseCheckRound(){for(let e=0,t=this.listCheckRound.length;e<t;e++){const t=this.listCheckRound[e];t.isRelease||t.release()}this.listCheckRound.length=0}_drawBounding(){let e,t;for(e=0,t=this.listNodesFish.length;e<t;e++)this.listNodesFish[e]._drawBounding();for(e=0,t=this.listNodesBullet.length;e<t;e++)this.listNodesBullet[e]._drawBounding();for(e=0,t=this.listNodesGeneric.length;e<t;e++)this.listNodesGeneric[e]._drawBounding()}}a.TYPE_COLLISION={GENERIC:0,FISH:1,BULLET:2},a.TYPE_SHAPE={POLYGON:0,CIRCLE:1,POINT:2};t.a=a},function(e,t,i){"use strict";var s=i(6);const o=PIXI.particles.Emitter,n=PIXI.particles.ParticleContainer||PIXI.ParticleContainer;class a extends s.a{constructor(e){super(),this.callbackEndEffect=null,this._config=null,this._art=null,this._timeLast=0,this._emitterLife=0,this._emitterContainer=null,this._emitter=null,this._art=e.art,this._config=e,this.autoDispose=!0,this.init(),this.onEnterFrameBind=null}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null==this._emitterContainer&&(this._emitterContainer=new n(500,{vertices:!0,position:!0,rotation:!0,uvs:!0,tint:!0},500),this._emitterContainer.interactive=!1,this._emitterContainer.interactiveChildren=!1,this._emitterContainer.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this._emitterContainer)),null==this._emitter&&(this._emitter=new o(this._emitterContainer,this._art,this._config),this._emitter.particleConstructor=PIXI.particles.AnimatedParticle),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,null==this.txtCoin&&(this.txtCoin=new PIXI.extras.BitmapText("",{font:"150px "+PreLoaderConfig.FontResource.CoinWin.name,align:"center"}),this.txtCoin.font.size=65,this.txtCoin.anchor.set(.5),this.addChild(this.txtCoin)))}playParticle(e,t,i=0,s=0,o=0,n=!1){n?this.txtCoin&&(this.txtCoin.font.name=PreLoaderConfig.FontResource.CoinWin.name):this.txtCoin&&(this.txtCoin.font.name=PreLoaderConfig.FontResource.CoinWinOther.name),this.txtCoin&&this.txtCoin.updateText(),this._emitter&&(this._emitter.emit=!0,this._emitter.resetPositionTracking(),this._emitter.updateOwnerPos(e,t),i&&0!==i&&(this.txtCoin.text=i,this.txtCoin.position.set(e,t),this.updatePosText(),this.showEffectText(s,o)),this._timeLast=performance.now(),this.onEnterFrameBind=this.onEnterFrame.bind(this),AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrameBind))}updatePosText(){this.txtCoin.visible=!0,this.txtCoin.x-this.txtCoin.width/2<0?this.txtCoin.x=this.txtCoin.width/2:this.txtCoin.x+this.txtCoin.width/2>AppInfo.appRealWidth&&(this.txtCoin.x=AppInfo.appRealWidth-this.txtCoin.width/2),this.txtCoin.y-this.txtCoin.height/2<0?this.txtCoin.y=this.txtCoin.height:this.txtCoin.y+this.txtCoin.height/2>AppInfo.appRealHeight&&(this.txtCoin.y=AppInfo.appRealHeight-this.txtCoin.height/2)}showEffectText(e,t){TweenMax.killTweensOf(this.txtCoin),TweenMax.to(this.txtCoin,.5,{startAt:{alpha:0,scaleX:5,scaleY:5},alpha:1,scaleX:1,scaleY:1,ease:Bounce.easeOut}),this.hideEffectTxt(e,t)}hideEffectTxt(e,t){const i=this.toLocal({x:e,y:t},this.parent);TweenMax.to(this.txtCoin,.4,{startAt:{alpha:1},y:i.y,x:i.x,scaleX:.1,scaleY:.1,delay:this._emitter.maxLifetime-2,onComplete:()=>{this.txtCoin.visible=!1}})}dispose(){super.dispose(),AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrameBind),TweenMax.killTweensOf(this.txtCoin),this.parent&&this.parent.removeChild(this),this._emitter&&(this._emitter.destroy(),this._emitter=null),this._emitterContainer&&(this.removeChild(this._emitterContainer),this._emitterContainer.destroy(),this._emitterContainer=null),this.txtCoin&&(this.txtCoin.destroy(),this.txtCoin=null),this._listArt=[]}onEnterFrame(){if(super.onEnterFrame(),this._emitter){const e=(performance.now()-this._timeLast)/1e3;this._timeLast=performance.now(),this._emitterLife+=e,this._emitter.update(e),this._emitter.emitterLifetime>0&&this._emitter.maxLifetime<this._emitterLife&&(this.autoDispose&&this.dispose(),"function"==typeof this.callbackEndEffect&&this.callbackEndEffect())}}}t.a=a},function(e,t,i){"use strict";(function(e){var s=i(6),o=i(88),n=i(78),a=i(127),h=(i(74),i(71)),l=i(73),r=i(70);class p extends s.a{constructor(e,t,i,s,o,n){super(),this.lightning=null,this.pathArray=[],this.effectParticle=null,this.isGift=!1,this.isNote=!1,this.isMultifish=!1,this.iconCanLock=null,this.isHoverFish=!1,this.velocitySwimFish=null,this.listMovieInRedFish=[],this.isRedFish=!1,this.isStuned=!1,this.listFishInSide=null,this.isBossMap=!1,this.isCaTran=!1,this.lockSprite=null,this.isLock=!1,this.fishShadow=null,this.fishStunEffect=null,this.runTween=null,this._deltaWFishLock=85,this.deltaHToCalInView=0,this.deltaWToCalInView=0,this._hasInView=!1,this.indexInGroup=null,this.movie=null,this.type=null,this.id=0,this.listFishInSide=[],s=void 0!==s&&s,this.isMultifish=o||!1,this.name="fish"+e,this.id=e,this.type=t,this.indexInGroup=i,this.isLock=!1,this.isCaTran=s,this.hasStopped=!1,this.hasFrozen=!1,this.pathArray=n||null,this.stoneCount=0,this.effectGunMerMaid=null,this.effectGunCentaur=null,this.effectGunCerberus=null,this.hasItem=!1,this.hasDie=!1,this.isEffectBounce=!1,this._lightningChainEffect=null,this._nodeTree=null,this.listMovieInRedFish=[],this.isMeShot=0,this.init(),PreLoaderConfig.IsUseScaleFish&&(this.scale.set(p.SACLE_RATIO[this.type]||1),this.fishShadow&&this.fishShadow.scale.set(p.SACLE_RATIO[this.type]||1))}init(){if(super.init(),this._isDisposed){let e;this._isDisposed=!1,this.type<32?e=ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Swim"]:this.type>=32&&this.type<35?e=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Swim"]:this.type>=35&&this.type<=50?e=ResourceManager.Atlas.AtlasBossMini.textures["fish"+this.type+"Swim"]:51==this.type?e=ResourceManager.Atlas.AtlasBoss32.textures.fish32Swim:52==this.type&&(e=ResourceManager.Atlas.AtlasBoss33.textures.fish33Swim),this.movie=new PIXI.extras.AnimatedSprite(e),this.movie.anchor.set(.5);let t=p.LIST_ANIMATIONSPEED;AppInfo.gameMovie&&103==AppInfo.gameMovie.gameBoard.roomSevenSeaKind&&(t=p.LIST_ANIMATIONSPEED_LOP),PreLoaderConfig.DomainConfig.CurrentDomain===PreLoaderConfig.DomainConfig.D&&(t=p.LIST_ANIMATIONSPEED_BCV),AppInfo.GameInfo.tournamentRoom&&(t=p.LIST_ANIMATIONSPEED_BATTLE),this.movie.animationSpeed=t[this.type]||1/4,this.addChild(this.movie),this.movie.gotoAndStop(0),this.addCollision(),this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(void 0!==this.fishShadow&&null!==this.fishShadow||(this.fishShadow=new n.a(this.id,this.type,this.indexInGroup),this.fishShadow.movie.animationSpeed=t[this.type]||1/4)),AppInfo.gameMovie&&AppInfo.gameMovie.gameBoard.waitLockFish&&this.readyForLock(),AppInfo.gameMovie&&AppInfo.gameMovie.gameBoard.waitLightning&&this.readyForFireLightning(),AppInfo.gameMovie&&AppInfo.gameMovie.gameBoard.roomSevenSeaKind,this.deltaWToCalInView=Math.max(this.width/2,this.height/2),this.deltaHToCalInView=this.deltaWToCalInView}}addCollision(){const e=l.a.getPointsArea(l.a.TYPE_AREA_COLLISION.FISH,this.type);e.length>0&&(this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,e,r.a.TYPE_COLLISION.FISH,this.movie))}onTriggerCollide({typeCollision:e},t){e===r.a.TYPE_COLLISION.BULLET&&this.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[this.type]||PreLoaderConfig.FishHitBulletDefault)}getNodeTree(){return this._nodeTree}releaseNode(){this._nodeTree&&this._nodeTree.release()}createLightningClay(){if(!this.lightning){let e;e=ResourceManager.Atlas.AtlasEffects.textures.lightningClayGreen,this.lightning=new PIXI.extras.AnimatedSprite(e),this.lightning.anchor.set(.5),this.lightning.gotoAndPlay(0),this.lightning.animationSpeed=.4,this.lightning.loop=!0,this.addChild(this.lightning),this.lightning.interactive=!1,this.lightning.hitArea=PIXI.Rectangle.EMPTY;const t=this.movie.width>this.movie.height?this.movie.width:this.movie.height;this.lightning.scale.set(t/this.lightning.width)}}dispose(){if(this.releaseNode(),null!==this.transform){super.dispose(),this._blood&&(this._blood.idle=!0,this._blood=null),this.effectParticle&&(this.effectParticle.parent.removeChild(this.effectParticle),this.effectParticle.dispose(),this.effectParticle=null),this.effectGunCentaur&&(this.effectGunCentaur.visible=!1),this.disposeTimeOut&&(clearTimeout(this.disposeTimeOut),this.disposeTimeOut=null),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie);const e=TweenMax.getTweensOf(this);for(let t=0;t<e.length;t++)null!=e[t]&&null!=e[t]&&(e[t].pause(),e[t]=null);this.velocitySwimFish&&null!==this.velocitySwimFish&&(this.velocitySwimFish.clearTimeout(),this.velocitySwimFish=null),this.runTween&&(this.runTween.pause(),this.runTween=null);for(let e=0;e<this.listMovieInRedFish.length;e++)void 0!==this.listMovieInRedFish[e]&&null!==this.listMovieInRedFish[e]&&(TweenMax.killTweensOf(this.listMovieInRedFish[e]),this.listMovieInRedFish[e].destroy());AppInfo.gameMovie.gameBoard.listFish.includes(this)&&AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(this)),this.fishShadow&&this.fishShadow.onFishSwimComplete(),this.isLock&&this.unLock(),this.movie&&(this.movie.gotoAndStop(0),this.movie.destroy(),this.movie=null),this.fishStunEffect&&(this.fishStunEffect.dispose(),this.fishStunEffect=null),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&(this.fishShadow.dispose(),this.fishShadow=null),this._timeFishStone&&(this._timeFishStone.Stop(),this._timeFishStone=null),this._timerFishStun&&(this._timerFishStun.Stop(),this._timerFishStun=null),this._timerFishFrozen&&(this._timerFishFrozen.Stop(),this._timerFishFrozen=null),this.freeze&&null!==this.freeze&&(this.freeze.destroy(),this.freeze=null),this.iconCanLock&&(this.iconCanLock.destroy(),this.iconCanLock=null),this.effectGunMerMaid&&(this.parent.removeChild(this.effectGunMerMaid),this.effectGunMerMaid=null),this.effectGunCentaur&&(this.parent.removeChild(this.effectGunCentaur),this.effectGunCentaur=null),this.parent&&this.parent.removeChild(this),this.type>=32&&(33==this.type&&(AppInfo.gameMovie.gameBoard.listFish=[]),AppInfo.gameMovie.gameBoard.currentBoss=null,AppInfo.preLoader.soundController.stopBossComingSound()),this.destroy()}}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}setSpecialFish(e){this.movie.tint=e,this.isRedFish=!0,this._isInitRedFish||(this._isInitRedFish=!0,this._setupSpecialFish())}stand(){this.movie.gotoAndPlay(0),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&this.fishShadow.stand()}run(e,t=0){if(e.length>0){if(e[0].x>=0&&e[0].y>=0&&e[0].x<=AppInfo.appRealWidth&&e[0].y<=AppInfo.appRealHeight?this.hasInView=!0:(this.hasInView=!1,this.visible=!1,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&(this.fishShadow.visible=!1)),this.movie.gotoAndPlay(0),PreLoaderConfig.IsEnableNewFishMove&&!this.isRedFish)void 0!==this.velocitySwimFish&&null!==this.velocitySwimFish||(this.velocitySwimFish=new a.a),this.runTween=this.velocitySwimFish.run(this,e,this.isMultifish);else{const t=this.isMultifish?"quadratic":"thru";this.runTween=TweenMax.to(this,Utilities.Number.distanceBetweenTwoPoint(e[0],e[e.length-1])/((PreLoaderConfig.TimeFishMove[this.type]||75)*(this.isRedFish?.75:1)),{bezier:{type:t,curviness:1,values:e,autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone,repeat:0,delay:this.indexInGroup,onUpdate:this.onFishSwimUpdate.bind(this),onComplete:this.onFishSwimComplete.bind(this)})}this.fishShadow&&PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow.run(e,t),this.type}}setScaleInBattle(){this.scale.set(p.SACLE_RATIO_IN_BATTLE[this.type]||1),this.fishShadow&&PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow.scale.set(p.SACLE_RATIO_IN_BATTLE[this.type]||1)}runInBattle(e,t,i,s,o,n){if(TweenMax.killTweensOf(this),t=t||0,i=i||20,this.hp=n,this.setScaleInBattle(),e.length>0){e[0].x>=0&&e[0].y>=0&&e[0].x<=AppInfo.appRealWidth&&e[0].y<=AppInfo.appRealHeight?this.hasInView=!0:(this.hasInView=!1,this.visible=!1,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&(this.fishShadow.visible=!1)),this.movie.gotoAndPlay(0),this.userID=s;this.isMultifish;const i=AppInfo.gameMovie.gameBoard.listFish[AppInfo.gameMovie.gameBoard.listFish.length-1],n=1400/PreLoaderConfig.TournamentConfig.ListTimeWave[AppInfo.gameMovie.gameBoard.currentWave],a=i.width/2/n;this.runTween=TweenMax.to(this,PreLoaderConfig.TournamentConfig.ListTimeWave[AppInfo.gameMovie.gameBoard.currentWave],{bezier:{type:"cubic",curviness:1,values:e,autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone,repeat:0,delay:o+a,onUpdate:this.onFishSwimUpdate.bind(this),onComplete:this.onFishSwimComplete.bind(this)}),this.fishShadow&&PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow.run(e,t),this.type}}createBlood(){this._blood||(this._blood=AppInfo.gameMovie.displayController.getEffectBlood(),this._blood.setupHP(this.hp),this._blood.visible=!1,this._blood.idle=!1,this._blood.x=this.x,this._blood.y=this.y-this.movie.height/2)}stun(){if(this.type<32&&!this.hasStone&&!this.hasFrozen&&!this.isStuned){if(this.isStuned=!0,this.runTween&&this.runTween.paused(!0),this.movie.stop(),null==this.fishStunEffect){this.fishStunEffect=new o.a,this.fishStunEffect.x=this.width/3;Math.min(this.movie.width,this.movie.height),Math.max(this.fishStunEffect.width,this.fishStunEffect.height);23===this.type&&(this.fishStunEffect.x=0,this.fishStunEffect.scale.set(1)),this.addChild(this.fishStunEffect)}this.fishStunEffect.startEffectStun(),103===AppInfo.gameMovie.gameBoard.roomSevenSeaKind&&this.fishStunEffect.scale.set(.8),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&this.fishShadow.stun(),void 0!==this._timerFishStun&&null!==this._timerFishStun||(this._timerFishStun=new Utilities.Timer(1e3*PreLoaderConfig.TimeStunFish,1,null,this.unStun.bind(this))),this._timerFishStun.Stop(),this._timerFishStun.Start()}}frozen(){!this.isNote&&this.type<32&&!this.hadDead&&!PreLoaderConfig.ListFishAvoidFrozen.includes(this.type)&&(this.hasFrozen?this._timerFishFrozen&&(this._timerFishFrozen.Stop(),this._timerFishFrozen.Start()):(this.hasFrozen=!0,this.hasStopped=!0,TweenMax.to(this,.001,{delay:2*Math.random(),onComplete:()=>{if(this.isNote)this.unFrozen();else{if(this.fishShadow&&null!==this.fishShadow&&this.fishShadow.frozen(),ResourceManager.Atlas.AtlasFishFrozen&&ResourceManager.Atlas.AtlasFishFrozen.textures["fish"+this.type+"Frozen"])this.movie.textures=ResourceManager.Atlas.AtlasFishFrozen.textures["fish"+this.type+"Frozen"],this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasFishFrozen.textures["fish"+this.type+"Frozen"],this.fishShadow.movie.gotoAndPlay(0)),this.movie.gotoAndPlay(0);else{void 0!==this.freeze&&null!==this.freeze||(this.freeze=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.Freeze),this.freeze.anchor.set(.5),this.freeze.position=this.movie.position,this.freeze.interactive=!1,this.freeze.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this.freeze));const e=this.movie.width/this.freeze.width,t=this.movie.height/this.freeze.height;this.freeze.scale.set(e,t),this.freeze.alpha=0,TweenMax.to(this.freeze,1,{alpha:.8}),this.movie.stop()}this.pause(),void 0!==this._timerFishFrozen&&null!==this._timerFishFrozen||(this._timerFishFrozen=new Utilities.Timer(AppInfo.GameInfo.tournamentRoom?1e3*PreLoaderConfig.TimeFrozenFishInBattle:1e3*PreLoaderConfig.TimeFrozenFish,1,null,this.unFrozen.bind(this))),this._timerFishFrozen.Start()}}})))}stone(){this.type<32&&!this.hadDead&&!this.isCaTran&&!this.hasItem&&(this.hasStone||(this.hasStone=!0,this.runTween&&this.runTween.paused(!0),ResourceManager.Atlas.AtlasFishStone.textures["fish"+this.type+"Stone"]?(this.movie.textures=ResourceManager.Atlas.AtlasFishStone.textures["fish"+this.type+"Stone"],this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasFishStone.textures["fish"+this.type+"Stone"])):(this.movie.stop(),this.movie.tint=9408399,this.fishShadow&&this.fishShadow.movie.stop()),this.movie.play(),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&this.fishShadow.stone(),void 0!==this._timerFishStone&&null!==this._timerFishStone||(this._timeFishStone=new Utilities.Timer(1e3*PreLoaderConfig.TimeStoneFish,1,null,this.unStone.bind(this))),this._timeFishStone.Stop(),this._timeFishStone.Start()))}unFrozen(){this.hasFrozen&&(this.hasFrozen=!1,this.hasStopped=!1,void 0!==this.freeze&&null!==this.freeze?(TweenMax.killTweensOf(this.freeze),TweenMax.to(this.freeze,.5,{alpha:0})):ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Swim"]&&!this.isNote&&(this.movie.textures=ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Swim"],this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Swim"])),this.hadDead||this.hasStone||(this.runTween&&this.runTween.resume(),this.fishShadow&&null!==this.fishShadow&&this.fishShadow.unFrozen(),this.movie.play()))}unStone(){this._timeFishStone.Stop(),this.stoneCount++,this.type<32&&(this.hasStone=!1,ResourceManager.Atlas.AtlasFishStone.textures["fish"+this.type+"Stone"]?(this.movie.textures=ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Swim"],this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Swim"])):this.movie.tint=16777215,this.hadDead||this.hasFrozen||(this.runTween&&this.runTween.resume(),this.movie.play(),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&this.fishShadow.unStone()))}unStun(){this.isStuned=!1,this._timerFishStun&&this._timerFishStun.Stop(),this.fishStunEffect&&(this.removeChild(this.fishStunEffect),this.fishStunEffect.dispose(),this.fishStunEffect=null),this.hadDead||this.hasFrozen||this.hasStone||(this.runTween&&this.runTween.resume(),this.movie.play(),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&this.fishShadow.unStun())}resumeGame(){this.type<32&&(this.isStuned=!1,this.runTween&&this.runTween.paused(!1),this.movie.play(),this.fishStunEffect&&(this.removeChild(this.fishStunEffect),this.fishStunEffect.dispose(),this.fishStunEffect=null),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&this.fishShadow.resumeGame())}onFishSwimUpdate(){PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&(this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.rotation=this.rotation);const e=180*this.rotation/Math.PI;this.hasInView&&PreLoaderConfig.ListFishIDFlip.includes(this.type)&&(e>90&&e<=270||e<=-90&&e>-270?-1!==this.movie.scale.y&&(this.movie.scale.y=-1,this.fishShadow&&(this.fishShadow.movie.scale.y=-1)):1!==this.movie.scale.y&&(this.movie.scale.y=1,this.fishShadow&&(this.fishShadow.movie.scale.y=1))),this.iconCanLock&&(this.iconCanLock.rotation=-this.rotation),this._blood&&(this._blood.x=this.x,this._blood.y=this.y-this.movie.height/2),this.refreshInView(),this.refreshIsLock()}onFishSwimComplete(){if(AppInfo.GameInfo.tournamentRoom){AppInfo.gameMovie.displayController.getUserSeatByUserID(this.userID);AppInfo.preLoader.requestController.fishAttackUserTournament(this.id)}this.dispose();let e=0;if(!this.isRedFish){for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(!AppInfo.gameMovie.gameBoard.listFish[t].isRedFish){e++;break}0===e&&AppInfo.preLoader.requestController.clearFish()}}refreshInView(){this.hasInView?(this.x<-this.deltaWToCalInView||this.y<-this.deltaHToCalInView||this.x>AppInfo.appRealWidth+this.deltaWToCalInView||this.y>AppInfo.appRealHeight+this.deltaHToCalInView)&&(this.hasInView=!1):this.x>=-this.deltaWToCalInView&&this.y>=-this.deltaHToCalInView&&this.x<=AppInfo.appRealWidth+this.deltaWToCalInView&&this.y<=AppInfo.appRealHeight+this.deltaHToCalInView&&(this.hasInView=!0)}refreshIsLock(){!this.hasInView&&this.isLock&&this.unLock()}die(){if(this.releaseNode(),AppInfo.GameInfo.tournamentRoom){let e=0;if(this.isRedFish)return;for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(!AppInfo.gameMovie.gameBoard.listFish[t].isRedFish){e++;break}0===e&&AppInfo.preLoader.requestController.clearFish()}if(TweenMax.killTweensOf(this),this.hasDie=!0,this.pause(),this._blood&&this._blood.updateHPPerCent(0,0,!1),this.isLock?this.unLock():this.unreadyForLock(),this.movie.stop(),PreLoaderConfig.ListFishIDHaveDieTexture.includes(this.type))if(this.type<32){const e=ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Die"];23!==this.type&&e?(this.movie.textures=e,this.isNote?(this.movie.loop=!1,this.movie.onComplete=this.onCompleteFishWithEffectDie.bind(this)):(this.movie.loop=!0,TweenMax.to(this,.75,{alpha:.5,rotation:Utilities.Number.randRange(-2,2)*Math.PI,scaleX:0,scaleY:0,delay:.75,onComplete:this.onCompleteFishWithEffectDie.bind(this)})),this.movie.gotoAndPlay(0)):(TweenMax.to(this,.07,{rotation:Math.PI/4,yoyo:!0,ease:Linear.easeNone,repeat:101}),TweenMax.to(this,.5,{alpha:0,delay:1.5,ease:Linear.easeNone,onComplete:this.onCompleteFishWithEffectDie.bind(this)}))}else 51===this.type?this.movie.textures=ResourceManager.Atlas.AtlasBoss32.textures.fish32Die:52===this.type?this.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Die:this.movie.textures=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Die"],this.movie.gotoAndPlay(0),this.movie.loop=!1,this.movie.onComplete=this.onCompleteFishWithEffectDie.bind(this);else PreLoaderConfig.ListFishIDNoRotateWhenDie.includes(this.type)?TweenMax.to(this,2,{alpha:0,onComplete:this.onCompleteFishWithEffectDie.bind(this)}):(TweenMax.to(this,.07,{rotation:Math.PI/4,yoyo:!0,ease:Linear.easeNone,repeat:101}),TweenMax.to(this,.5,{alpha:0,delay:1.5,ease:Linear.easeNone,onComplete:this.onCompleteFishWithEffectDie.bind(this)}));this.type>=32&&AppInfo.gameMovie.displayController.updateHpBoss(0),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&this.fishShadow.die()}onCompleteFishWithEffectDie(){this.movie&&this.movie.gotoAndStop(0),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&this.fishShadow.onCompleteFishWithEffectDie(),this.dispose()}readyForLock(){this.interactive=!0,this.interactiveChildren=!0,this.movie.interactive=!0,this.movie.buttonMode=!0,this.movie.mouseclick=this.onMousecClickToClock.bind(this),this.movie.mouseover=this.onMouseHoverFish.bind(this),this.movie.mouseout=this.onMouseOutFish.bind(this),PreLoaderConfig.LockFishConfig.enableLock&&(!PreLoaderConfig.LockFishConfig.enableLock||PreLoaderConfig.LockFishConfig.listFish.includes(this.type)||PreLoaderConfig.LockFishConfig.enableRedFish&&this.isRedFish)||(null==this.iconCanLock&&(this.iconCanLock=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBaseStation.textures.lockInFish),this.iconCanLock.anchor.set(.5,.5),this.iconCanLock.gotoAndPlay(0),this.iconCanLock.alpha=.7,this.iconCanLock.animationSpeed=1/4,this.iconCanLock.interactive=!1,this.iconCanLock.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this.iconCanLock)),35==this.type&&(this.iconCanLock.y=65),this.iconCanLock.visible=!0)}onMousecClickToClock(){if(PreLoaderConfig.LockFishConfig.enableLock)for(let e=0;e<PreLoaderConfig.LockFishConfig.listFish.length;e++)if(PreLoaderConfig.LockFishConfig.listFish[e]===this.type)return void AppInfo.preLoader.globalCompoController.compoToast.addMessage(PreLoaderConfig.LockFishConfig.message);if(PreLoaderConfig.LockFishConfig.enableRedFish&&this.isRedFish)return void AppInfo.preLoader.globalCompoController.compoToast.addMessage(PreLoaderConfig.LockFishConfig.message);AppInfo.gameMovie.displayController.onUnreadyLockFish(),AppInfo.gameMovie.gameBoard.lockFish=this,!e.isMobilePage&&this.isHoverFish;const t=performance.now()-AppInfo.gameMovie.gameBoard.timeMouseClickBtnLockFish,i=AppInfo.preLoader.renderer.plugins.interaction.eventData.data.global;Utilities.Number.distanceBetweenTwoPoint(AppInfo.gameMovie.gameBoard.mousePositionClickBtnLockFish.x,AppInfo.gameMovie.gameBoard.mousePositionClickBtnLockFish.y,i.x,i.y);this.lock()}onMouseHoverFish(){this.isHoverFish=!0}onMouseOutFish(){this.isHoverFish=!1}unreadyForLock(){this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,this.movie.buttonMode=!1,this.movie.mouseclick=null,this.movie.mouseover=null,this.movie.mouseout=null,this.iconCanLock&&(this.iconCanLock.visible=!1)}unLock(){AppInfo.gameMovie.gameBoard.lockFish&&AppInfo.gameMovie.gameBoard.lockFish.id==this.id&&(AppInfo.gameMovie.gameBoard.lockFish=null,AppInfo.gameMovie.displayController.myBaseStation&&AppInfo.gameMovie.displayController.myBaseStation.onCancelLockFish());for(var e=0;e<AppInfo.gameMovie.gameBoard.listBullet.length;e++)AppInfo.gameMovie.gameBoard.listBullet[e].lockFishID==this.id&&(AppInfo.gameMovie.gameBoard.listBullet[e].lockFishID=0);for(e=0;e<AppInfo.gameMovie.displayController.listBaseStation.length;e++)AppInfo.gameMovie.displayController.listBaseStation[e].compoGun.lockFishID==this.id&&(AppInfo.gameMovie.displayController.listBaseStation[e].compoGun.lockFishID=0);this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,this.movie.buttonMode=!1,this.movie.mouseclick=null,null!==this.lockSprite&&(TweenMax.killTweensOf(this.lockSprite),this.removeChild(this.lockSprite),this.lockSprite.stop(),this.lockSprite.destroy(),this.lockSprite=null),this.isLock=!1}lock(){if(!this.isLock){switch(this.isLock=!0,null==this.lockSprite&&(this.lockSprite=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.gunLock),this.lockSprite.interactive=!1,this.lockSprite.hitArea=PIXI.Rectangle.EMPTY,this.lockSprite.name="lockSprite",this.lockSprite.anchor.set(.5),this.lockSprite.animationSpeed=.3,this.lockSprite.gotoAndPlay(0),this.addChild(this.lockSprite)),this.type){case 14:this.lockSprite.x=50,this.lockSprite.y=0;break;case 19:this.lockSprite.x=95,this.lockSprite.y=0;break;case 26:this.lockSprite.x=60,this.lockSprite.y=20;break;case 27:this.lockSprite.x=65,this.lockSprite.y=0;break;case 35:this.lockSprite.x=10,this.lockSprite.y=65;break;default:this.lockSprite.x=5,this.lockSprite.y=0}this.lockSprite.rotation=0,TweenMax.to(this.lockSprite,4,{rotation:2*Math.PI,ease:Power0.easeNone,repeat:-1})}}onHitBullet(e){if(AppInfo.preLoader.soundController.playTrungCa(),16777215!=e){if(this.isRedFish)return;TweenMax.killTweensOf(this.movie),this.movie.tint=16777215,this.movie.tintAlpha=0,TweenMax.to(this.movie,.1,{tint:e,onComplete:()=>{TweenMax.to(this.movie,.3,{tint:16777215})}})}}onHitBulletSpecial(e){switch(e){case 101:this.stoneCount<6&&!this.isNote&&this.stone()}}hitBulletMermaid(){null===this.effectGunMerMaid&&(this.effectGunMerMaid=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun104.textures.bullet104explode),this.effectGunMerMaid.gotoAndStop(0),this.effectGunMerMaid.anchor.set(.5),this.effectGunMerMaid.loop=!1,this.effectGunMerMaid.animationSpeed=1/4,this.effectGunMerMaid.onComplete=this.onCompleteEffectMerMaid.bind(this),AppInfo.gameMovie.layerEffect.addChild(this.effectGunMerMaid)),this.effectGunMerMaid.visible=!0,this.effectGunMerMaid.position.set(this.x,this.y),this.effectGunMerMaid.gotoAndPlay(0),this.effectSlow()}onCompleteEffectMerMaid(){this.effectGunMerMaid&&(this.effectGunMerMaid.visible=!1)}hitBulletCentaur(){null===this.effectGunCentaur&&(this.effectGunCentaur=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun102.textures.bullet102Boom),this.effectGunCentaur.gotoAndStop(0),this.effectGunCentaur.anchor.set(.5),this.effectGunCentaur.scale.set(.5),this.effectGunCentaur.loop=!1,this.effectGunCentaur.animationSpeed=1/3,this.effectGunCentaur.onComplete=this.onCompleteEffectCentaur.bind(this),AppInfo.gameMovie.layerEffect.addChild(this.effectGunCentaur)),null!==this&&(this.effectGunCentaur.visible=!0,this.effectGunCentaur.position.set(this.x||0,this.y||0),this.effectGunCentaur.gotoAndPlay(0))}onCompleteEffectCentaur(){this.effectGunCentaur&&(this.effectGunCentaur.visible=!1)}hitBulletCerberus(){null===this.effectGunCerberus&&(this.effectGunCerberus=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun105.textures.bullet105explode),this.effectGunCerberus.gotoAndStop(0),this.effectGunCerberus.anchor.set(.5),this.effectGunCerberus.loop=!0,this.effectGunCerberus.animationSpeed=1/4,this.addChild(this.effectGunCerberus)),this.effectGunCerberus.visible=!0,this.effectGunCerberus.scale.set(.3),TweenMax.to(this.effectGunCerberus,.2,{ease:Linear.easeNone,scaleX:.8,scaleY:.8,repeat:3,yoyo:!0,onComplete:this.onCompleteEffectCeberus.bind(this)})}onCompleteEffectCeberus(){this.effectGunCerberus&&TweenMax.to(this.effectGunCerberus,.2,{onComplete:()=>{this.effectGunCerberus.visible=!1}})}powerfulThunder(){this._setupSpecialFish()}setupItemFish({_bgLevelItem:e,mainSprite:t,txtTitle:i}){this.hasItem=!0,this.movie.textures=[e.texture],this.fishShadow.movie.textures=[e.texture];const s=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoItem.textures.ribbonItems[ResourceManager.Atlas.AtlasCompoItem.textures.ribbonItems.length-1]),o=new PIXI.Sprite(t.texture),n=ResourceManager.Atlas.AtlasEffectsInGame.textures.EffectBoom,a=(ResourceManager.Atlas.AtlasEffectsInGame.textures.EffectBoom,n.concat(n.reverse())),l={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"25px",fill:[16777215],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:8787713,align:"center",strokeThickness:4,lineJoin:"round"},r=new PIXI.Text(i.text,l),d=new PIXI.extras.AnimatedSprite(a);d.animationSpeed=1/8,d.anchor.set(this.movie.anchor.x,this.movie.anchor.y),s.anchor.set(this.movie.anchor.x,this.movie.anchor.y),o.anchor.set(this.movie.anchor.x,this.movie.anchor.y),d.position.set(this.movie.x,this.movie.y),d.interactive=!1,d.hitArea=PIXI.Rectangle.EMPTY,d.gotoAndPlay(0),r.position.set(-r.width/2,r.height);Math.max(this.movie.width,this.movie.height);const c=new h.a(p.PARTICLE_ITEM);c.playParticle(0,0),this.addChild(s),this.addChild(r),this.addChildAt(d,0),this.addChildAt(o,0),this.movie.scale.set(1.2),this.fishShadow.movie.scale.set(1.2),o.scale.set(1.5),this.addChildAt(c,0),s.position.set(-10,0),o.position.set(2,3);TweenMax.to(c._emitter,1,{rotation:Utilities.toRad(359),ease:Linear.easeNone,repeat:-1}),TweenMax.to(d,1,{rotation:Utilities.toRad(359),repeat:-1,ease:Linear.easeNone}),this.runTween.vars.bezier.autoRotate=null}_setupSpecialFish(){const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures.RedFishCircle);e.anchor.set(this.movie.anchor.x,this.movie.anchor.y),e.position.set(this.movie.x,this.movie.y),e.interactive=!1,e.hitArea=PIXI.Rectangle.EMPTY;const t=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.RedFishThunderCircle);t.animationSpeed=.2,t.anchor.set(this.movie.anchor.x,this.movie.anchor.y),t.position.set(this.movie.x,this.movie.y),t.interactive=!1,t.hitArea=PIXI.Rectangle.EMPTY,t.gotoAndPlay(0);const i=Math.max(this.movie.width,this.movie.height),s=1.5*i/e.width;e.scale.set(s),t.scale.set(s),this.addChild(e,t),this.swapChildren(this.movie,t);const o=Utilities.toRad(30),n=1.5*i/2;103===AppInfo.gameMovie.gameBoard.roomSevenSeaKind&&(e.scale.set(.5),t.scale.set(.5));for(let e=0;e<12;e++){let t;t=e%2==0?new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.RedFishLight0type):new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.RedFishLight1type),t.animationSpeed=1/8,t.anchor.set(.5),t.position.set(n*Math.cos(e*o),n*Math.sin(e*o)),t.play(),this.addChild(t),this.listMovieInRedFish.push(t);const i=Utilities.Number.randRange(20,40);TweenMax.to(t,.2,{x:t.x+i*Math.cos(e*o),y:t.y+i*Math.sin(e*o),ease:Power0.easeNone,delay:2*Math.random(),repeat:-1,yoyo:!0})}}pause(){this.velocitySwimFish&&null!==this.velocitySwimFish&&this.velocitySwimFish.clearTimeout();const e=TweenMax.getTweensOf(this);for(let t=0;t<e.length;t++)null!=e[t]&&null!=e[t]&&e[t].pause()}play(){this.velocitySwimFish&&null!==this.velocitySwimFish&&this.velocitySwimFish.clearTimeout();const e=TweenMax.getTweensOf(this);for(let t=0;t<e.length;t++)null!=e[t]&&null!=e[t]&&e[t].play()}runOutOfView(){this.velocitySwimFish&&null!==this.velocitySwimFish&&this.velocitySwimFish.clearTimeout();const e=TweenMax.getTweensOf(this);for(let t=0;t<e.length;t++)null!=e[t]&&null!=e[t]&&e[t].timeScale(10)}effectSlow(){this.hasStone||this.hasFrozen||this.isStuned||this.isCaTran||this.isNote||(this.runTween.timeScale(.1),setTimeout(()=>{this.hadDead||this.runTween.timeScale(1)},5e3))}effectBounce(e){if(!(this.hasStone||this.hasFrozen||this.isStuned||this.isCaTran||this.isNote||this.isEffectBounce)){this.isEffectBounce=!0,this.runTween.paused(!0),TweenMax.delayedCall(.4,(function(){this.isEffectBounce=!1,this.hadDead||this.runTween.paused(!1)}),[],this);const t=this.x+80*Math.sin(-e+Math.PI),i=this.y+80*Math.cos(-e+Math.PI);TweenMax.to([this,this.fishShadow],.5,{x:t,y:i,yoyo:!0,repeat:1})}}readyForFireLightning(){this.interactive=!0,this.interactiveChildren=!0,this.movie.interactive=!0,this.movie.buttonMode=!0,this.movie.mouseclick=this.onClickFireLightning.bind(this),this.movie.mousemove=this.onMoveFireLightning.bind(this),this.movie.mouseover=this.onOverFireLightning.bind(this),this.movie.mouseout=this.onOutFireLightning.bind(this),this.movie.mouseup=this.onUpFireLightning.bind(this),this.movie.mouseDown=this.onDownFireLightning.bind(this)}onDownFireLightning(){this.isDownFish=!0}onClickFireLightning(){this.isHoverFish=!0,AppInfo.gameMovie.gameBoard.fishLightning=this}onUpFireLightning(){this.isHoverFish=!0}onOverFireLightning(){this.isHoverFish=!0}onOutFireLightning(){this.isHoverFish=!1}onMoveFireLightning(){this.isHoverFish=!1}initLightningChain(){null===this._lightningChainEffect&&(this._lightningChainEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.lightningClayGreen),this._lightningChainEffect.animationSpeed=1/4,this._lightningChainEffect.anchor.set(.5)),this._lightningChainEffect.scale.set(this.movie.width/this._lightningChainEffect.texture.width);const e=this._lightningChainEffect.scaleX;this._lightningChainEffect.gotoAndPlay(0),this.addChild(this._lightningChainEffect),TweenMax.to(this._lightningChainEffect,.6,{startAt:{scaleX:3,scaleY:3,alpha:0},alpha:1,rotation:Utilities.toRad(360),scaleX:e,scaleY:e})}runFastOutScreen(e=3){this.runTween&&this.runTween.timeScale(e),this.movie.animationSpeed*=e,this.fishShadow&&(this.fishShadow.movie.animationSpeed*=e)}get hasInView(){return this._hasInView}set hasInView(e){this._hasInView!=e&&(this._hasInView=e,this.visible=e,this.visible?this.movie.gotoAndPlay(0):this.movie.gotoAndStop(0),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&(this.fishShadow.visible=e,this.visible?this.fishShadow.movie.gotoAndPlay(0):this.fishShadow.movie.gotoAndStop(0)))}get deltaWFishLock(){return this._deltaWFishLock}set deltaWFishLock(e){this._deltaWFishLock>e&&(this._deltaWFishLock=e)}get canPlayMovie(){return!(this.hasStone||this.isStuned||this.hasStopped)}get hadDead(){return!AppInfo.gameMovie.gameBoard.listFish.includes(this)}}p.LIST_ANIMATIONSPEED_BATTLE={0:.5,1:.5,2:.5,3:.5,4:1,5:.6,6:.5,7:.5,8:.5,9:.5,10:.5,11:.5,12:.5,13:.5,14:.5,15:.5,16:.5,17:.5,18:.25,19:.5,20:.5,21:.5,22:.25,23:.4,24:.35,25:.125,26:.25,27:.25,28:.25,29:.25},p.LIST_ANIMATIONSPEED={0:.5,1:.35,2:.37,3:.4,4:.5,5:.4,6:.25,7:.5,8:.4,9:.5,10:.3,11:.4,12:.4,13:.2,14:.25,15:.25,16:.4,17:.4,18:.25,19:.125,20:.2,21:.2,22:.25,23:.4,24:.35,25:.125,26:.25,27:.25,28:.25,29:.25},p.LIST_ANIMATIONSPEED_LOP={0:.5,1:.3,2:.35,3:.4,4:1,5:.6,6:.25,7:.4,8:.3,9:.4,10:.3,11:.3,12:.3,13:.3,14:.25,15:.25,16:.2,17:.2,18:.25,19:.125,20:.4,21:.4,22:.4,23:.4,24:.35,25:.4,26:.2,27:.25,28:.25,29:.25},p.SACLE_RATIO={0:.9,1:.7,2:.7,3:.7,4:.7,5:.6,6:.6,7:.6,8:.6,9:.9,10:.8,11:.6,12:.6,13:1.2,14:1,15:.8,16:1.2,17:1.2,18:1,19:.8,20:.8,21:.8,22:1,23:1,24:1,25:1,35:1},p.SACLE_RATIO_IN_BATTLE={0:.5,1:.5,2:.5,3:.5,4:.5,5:.5,6:.5,7:.5,8:.5,9:.5,10:.5,11:.5,12:.5,13:.5,14:.5,15:.5,16:.7,17:.7,18:.85,19:.7,20:1,21:1,22:1},p.LIST_ANIMATIONSPEED_BCV={0:.25,1:.2,2:.17,3:.4,4:.5,5:.5,6:.25,7:.25,8:.25,9:.25,10:.25,11:.15,12:.3,13:.2,14:.2,15:.25,16:.2,17:.2,18:.25,19:.2,20:.25,21:.7,22:.25,23:.2,24:.2,25:.2,26:.2,27:.25,28:.25,29:.25},p.PARTICLE_ITEM={art:[{framerate:1,loop:!0,textures:["RedFishParticle0.png"]}],alpha:{start:1,end:.5},scale:{start:.4,end:.5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:65,max:65},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.81,max:.81},blendMode:"normal",frequency:.02,emitterLifetime:-1,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:10,minR:0}},p.CERBERUS_PARTICLE={art:[{framerate:1,loop:!0,textures:["lightProgress.png"]}],alpha:{start:0,end:1},scale:{start:.5,end:1,minimumScaleMultiplier:1},color:{start:"#eb3a0e",end:"#d43a13"},speed:{start:200,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:2},blendMode:"screen",frequency:.01,emitterLifetime:-1,maxParticles:100,pos:{x:.5,y:.5},addAtBack:!0,spawnType:"ring",spawnCircle:{x:0,y:0,r:50,minR:0}},t.a=p}).call(this,i(3))},function(e,t,i){"use strict";class s{static getPointsArea(e,t){const i=this.getListArea(e);for(let e=0,s=i.length;e<s;e++)if(i[e].type===t)return i[e].points;return[]}static getListArea(e){for(let t=0,i=s.listCollision.length;t<i;t++)if(s.listCollision[t].typeArea===e)return s.listCollision[t].listArea;return[]}}s.TYPE_AREA_COLLISION={FISH:0,BULLET:1},s.listCollision=[{typeArea:s.TYPE_AREA_COLLISION.FISH,listArea:[{type:0,points:[6,28,45,28,45,39,6,39]},{type:1,points:[5,9,71,9,71,35,5,35]},{type:2,points:[6,10,66,10,66,37,6,37]},{type:3,points:[19,9,82,9,82,33,19,33]},{type:4,points:[0,19,65,19,65,57,0,57]},{type:5,points:[33,31,141,31,141,84,33,84]},{type:6,points:[0,30,116,30,116,62,0,62]},{type:7,points:[6,10,92,10,92,60,6,60]},{type:8,points:[34,22,148,22,147,56,34,56]},{type:9,points:[5,26,113,26,113,85,5,85]},{type:10,points:[6,26,132,26,132,138,6,138]},{type:11,points:[0,0,137,0,137,117,0,117]},{type:12,points:[17,40,172,40,172,105,17,105]},{type:13,points:[40,40,142,40,142,94,40,94]},{type:14,points:[51,54,168,54,168,129,51,129]},{type:15,points:[52,0,242,0,242,300,52,300]},{type:16,points:[80,62,248,62,248,135,80,135]},{type:17,points:[80,60,263,60,263,136,80,136]},{type:18,points:[20,43,229,43,229,131,20,131]},{type:19,points:[62,53,502,53,502,183,62,183]},{type:20,points:[182,50,471,50,471,146,184,146]},{type:21,points:[182,70,476,70,476,157,182,157]},{type:22,points:[50,0,234,0,234,89,50,89]},{type:24,points:[48,26,214,26,214,191,48,191]},{type:25,points:[31,47,246,47,246,144,31,144]},{type:26,points:[55,50,455,50,455,140,55,140]},{type:27,points:[127,12,263,12,263,259,127,259]},{type:28,points:[0,0,240,0,240,235,0,235]},{type:29,points:[57,0,331,0,331,201,57,201]},{type:23,points:[156,164,330,164,330,333,156,333]},{type:30,points:[169,166]},{type:31,points:[234,124]},{type:32,points:[184,45,450,45,450,122,184,122]},{type:33,points:[76,26,124,26,124,124,145,166,23,166,76,124]},{type:35,points:[106,220,218,220,218,330,106,330]},{type:51,points:[178,35,475,35,475,130,178,130]},{type:52,points:[130,120,285,145,380,235,340,360,220,360]},{type:53,points:[50,150]},{type:54,points:[150,50]},{type:57,points:[39,105,210,105,210,221,39,221]},{type:58,points:[106,220,218,220,218,330,106,330]},{type:59,points:[97,210,277,210,277,516,97,516]},{type:60,points:[323,63,473,63,473,328,323,328]},{type:101,points:[323,63,473,63,473,328,323,328]},{type:102,points:[370,355,579,355,579,641,370,641]},{type:103,points:[256,311,459,311,459,712,256,712]},{type:104,points:[205,148,563,148,563,264,205,264]},{type:105,points:[225,129,608,129,608,338,225,338]}]},{typeArea:s.TYPE_AREA_COLLISION.BULLET,listArea:[{type:0,points:[0,0,46,0,46,10,0,10]},{type:1,points:[5,0,51,0,51,10,5,10]},{type:2,points:[15,0,61,0,61,10,15,10]},{type:3,points:[25,20,100,20,100,30,25,30]},{type:4,points:[25,20,100,20,100,30,25,30]},{type:101,points:[0,0,46,0,46,10,0,10]},{type:102,points:[21,11,58,11,58,10,21,10]},{type:103,points:[17,18,49,18,49,10,17,10]},{type:104,points:[9,11,30,11,30,10,9,10]},{type:105,points:[46,8,92,8,92,10,46,10]},{type:107,points:[35,25,66,25,66,10,35,10]},{type:108,points:[20,20,40,20,40,40,20,20]},{type:207,points:[220,20,280,20,280,1400,220,1400]}]}],t.a=s},function(e,t,i){"use strict";var s=i(6);const o=PIXI.particles.Emitter,n=PIXI.particles.ParticleContainer||PIXI.ParticleContainer;class a extends s.a{constructor(e,t,i){super(),this.cbComplete=null,this._config=null,this._art=null,this._timeLast=0,this._emitterLife=0,this._emitterContainer=null,this._emitter=null,this._art=e,this._config=t,this.noDispose=i||!1,this.onEnterFrameBind=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null==this._emitterContainer&&(this._emitterContainer=new n(500,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0},500),this._emitterContainer.interactive=!1,this._emitterContainer.interactiveChildren=!1,this._emitterContainer.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this._emitterContainer)),null==this._emitter&&(this._emitter=new o(this._emitterContainer,this._art,this._config),this._emitter._destroyWhenComplete=!0),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this.onEnterFrameBind=this.onEnterFrame.bind(this))}playParticle(e,t,i){this.cbComplete=i,this._emitter&&(this._emitterContainer.visible||(this._emitterContainer.visible=!0),this._emitter.emit=!0,this._emitter.resetPositionTracking(),this._emitter.updateOwnerPos(e,t),this._timeLast=performance.now(),AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrameBind))}dispose(){super.dispose(),AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrameBind),this.parent&&this.parent.removeChild(this),this._emitter&&(this._emitter.destroy(),this._emitter=null),this._emitterContainer&&(this.removeChild(this._emitterContainer),this._emitterContainer.destroy(),this._emitterContainer=null),this._listArt=[],this.destroy()}onEnterFrame(){super.onEnterFrame();const e=(performance.now()-this._timeLast)/1e3;this._timeLast=performance.now(),this._emitterLife+=e,this._emitter.update(e),this._emitter.emitterLifetime>0&&!this._emitter.emit&&!this._emitter._activeParticlesFirst&&(this.noDispose?this.hideEffect():this.dispose(),this.cbComplete&&"function"==typeof this.cbComplete&&this.cbComplete())}stop(){AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrameBind),this._emitter.emit=!1}hideEffect(){AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrameBind),this._emitterLife=0,this._emitter.emit=!1,this._emitter.maxLifetime=3,this._emitterContainer.visible=!1}}t.a=a},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t){super(),this.emitter=null,this.callbackEndEffect=null,this._particleContainer=null,this._timeLast=null,this.autoDispose=!1,this._emitterLife=0,this._config=e,t?this._art=t:e.art&&(this._art=e.art),this.init()}init(){this._particleContainer=new PIXI.particles.ParticleContainer(1e3,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0},500),this.emitter=new PIXI.particles.Emitter(this._particleContainer,this._art,this._config),this.emitter.particleConstructor=PIXI.particles.AnimatedParticle,this.interactive=this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this._particleContainer)}playParticle(e,t){this.emitter&&(this.emitter.emit=!0,this.emitter.resetPositionTracking(),this.emitter.updateOwnerPos(e,t),this._timeLast=performance.now(),TweenMax.to(this,.1,{repeat:-1,onUpdate:this._onUpdate,onUpdateScope:this}))}stopParticle(){this.emitter&&TweenMax.killTweensOf(this)}_onUpdate(){if(this.emitter){const e=(performance.now()-this._timeLast)/1e3;this._timeLast=performance.now(),this._emitterLife+=e,this.emitter.update(e),this.emitter.emitterLifetime>0&&(this.emitter.maxLifetime,this._emitterLife)}}dispose(){super.dispose(),TweenMax.killTweensOf(this),this.parent&&this.parent.removeChild(this),this._emitter&&(this._emitter.destroy(),this._emitter=null),this._emitterContainer&&(this.removeChild(this._emitterContainer),this._emitterContainer.destroy(),this._emitterContainer=null)}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(){super(),this._bgWin=null,this.hideComplete=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this._bgWin=new PIXI.spine.Spine(ResourceManager.Atlas.PowerUpBones.textures.PowerUpBones.spineData),this._bgWin.state.timeScale=.75,this._textCoin=new PIXI.Text("0",TextStyleConfig.COIN_WIN_MINI_BOSS),this._textCoin.anchor.set(.5),this._textCoin.x=-20,this.addChild(this._bgWin,this._textCoin))}updateCoin(e,t=o.TIME_TWEEN){Utilities.tweenCoin(this._textCoin,e,t),this._bgWin.state.setAnimation(0,"animation",!0)}hide(){TweenMax.to(this,.5,{x:"+=20",alpha:0,onComplete:this._hideComplete,onCompleteScope:this})}_hideComplete(){"function"==typeof this.hideComplete&&this.hideComplete()}dispose(){super.dispose()}}o.TIME_TWEEN=5;var n=o;class a extends s.a{constructor(){super(),this.init(),this.displayController=AppInfo.gameMovie.displayController,this.gameMovie=AppInfo.gameMovie,this.callBackCompleteEffectDie=null}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this._bgWin=new n,this.addChild(this._bgWin))}play(e){this._info=e,this._container&&this._container.scale.set(0),this._bgWin.scale.set(0),this._iconWin.scale.set(1),this._timeLineMax=new TimelineMax;const t=this.displayController.getUserSeatByUserID(this._info.userID);t&&(this._basePosition=t.position,this._power=t.compoGun.power,this._totalTimePlay=Math.ceil(this._info.fishScore/(40*this._power)));const i=this._info.boss;i&&(this._bgWin.position.set(i.x,i.y),this._iconWin.position.set(i.x,i.y-100));const s=this.getPositionUserByID(t.basePosition),o=TweenMax.to(this._bgWin,.8,{scaleX:1,scaleY:1,ease:Back.easeOut.config(2)}),n=TweenMax.staggerTo([this._bgWin,this._iconWin],.8,{cycle:{x:[s[0].x,s[1].x],y:[s[0].y,s[1].y]},delay:.5,ease:Back.easeOut.config(2)},0);TweenMax.to(this._iconCirle,.2,{scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,yoyo:!0}),TweenMax.to(this._iconWin,.8,{delay:2,scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,y:"-=20",yoyo:!0}),this._timeLineMax.add(o),this._timeLineMax.add(n)}hide(){}onCompleteEffect(){"function"==typeof this.callBackCompleteEffectDie&&this.callBackCompleteEffectDie()}getPositionUserByID(e){switch(e){case 0:return[{x:500,y:600},{x:150,y:550}];case 1:return[{x:780,y:600},{x:1150,y:550}];case 2:return[{x:750,y:150},{x:1150,y:150}];case 3:return[{x:500,y:150},{x:150,y:150}]}return[{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2},{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2+100}]}dispose(){super.dispose()}}t.a=a},function(e,t,i){"use strict";var s=i(6),o=i(5);class n extends s.a{constructor(e){super(),e=e||1,this._imageMain=null,this._imageMask=null,this._darkOverlay=null,this._spine=null,this._info=n.INFO[e],this.callBackChoiceSkill=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this._imageMain=new o.a(ResourceManager.Atlas.AtlasGunSkills.textures[this._info.textures]),this._imageMain.mouseclick=this._onClickSkill.bind(this),this._imageMain.useTween=this._imageMain.useTweenDown=this._imageMain.interactive=this._imageMain.buttonMode=!1,this._imageMain.anchor.set(.5),this._imageMain.hoverLayer.anchor.set(.5),this._spine=new PIXI.spine.Spine(ResourceManager.Atlas.skillEffectBones.textures.skillEffectBones.spineData),this._spine.state.setAnimation(0,"animation",!0),this._spine.state.timeScale=.5,this._spine.hitArea=PIXI.Rectangle.EMPTY,this._spine.visible=!1,this._imageMask=new PIXI.Graphics,this._darkOverlay=new PIXI.Sprite(PIXI.Graphics.Circle(0,0,38,0,.5).generateCanvasTexture()),this._darkOverlay.anchor.set(.5),this._darkOverlay.mask=this._imageMask,this._darkOverlay.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this._imageMain,this._spine,this._darkOverlay,this._imageMask),this._draw(0))}updateData(e){this._currentPercent!==e&&(this._draw(e),this._darkOverlay.visible=e<100,this._spine.visible=e>=100)}activeSkill(e){this._imageMain.interactive=this._imageMain.buttonMode=e}_onClickSkill(){AppInfo.preLoader.requestController.userActiveSkill(this._info.skillID),"function"==typeof this.callBackChoiceSkill&&this.callBackChoiceSkill(this._info)}_draw(e){this._imageMask.clear(),this._imageMask.beginFill(16777215,2).lineStyle(2,16777215,1),this._imageMask.moveTo(0,0);const t=n.RADIUS*Math.cos(Utilities.toRad(n.START_RAD)),i=n.RADIUS*Math.sin(Utilities.toRad(n.START_RAD));this._imageMask.lineTo(t,i);const s=3.6*(100-e);for(let e=1;e<=n.POINT;e++)this._imageMask.lineTo(n.RADIUS*Math.cos(Utilities.toRad(s/n.POINT*e+n.START_RAD))*-1,n.RADIUS*Math.sin(Utilities.toRad(s/n.POINT*e+n.START_RAD)));this._imageMask.endFill(),this._currentPercent=e}dispose(){super.dispose()}}n.RADIUS=47,n.START_RAD=270,n.POINT=25,n.INFO_LAZE={type:1,textures:"laze",skillID:1,skillKind:201},n.INFO_SONIC={type:2,textures:"sonic",skillID:2,skillKind:202},n.INFO_BOOM={type:3,textures:"bom",skillID:3,skillKind:203},n.INFO_MEDUSA={type:6,textures:"medusa",skillID:6,skillKind:6},n.INFO_LIGHTING={type:7,textures:"lighting",skillID:7,skillKind:7},n.INFO={1:n.INFO_LAZE,2:n.INFO_SONIC,3:n.INFO_BOOM,6:n.INFO_MEDUSA,7:n.INFO_LIGHTING},t.a=n},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t,i){super(),this.indexInGroup=null,this._movie=null,this.type=null,this.id=0,this.id=e,this.type=t,this.indexInGroup=i,this.init()}init(){if(super.init(),this._isDisposed){let e;this._isDisposed=!1,this.type<32?e=ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Swim"]:this.type>=32&&this.type<35?e=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Swim"]:this.type>=35&&this.type<=50?e=ResourceManager.Atlas.AtlasBossMini.textures.fish35Swim:51==this.type?e=ResourceManager.Atlas.AtlasBoss32.textures.fish32Swim:52==this.type&&(e=ResourceManager.Atlas.AtlasBoss33.textures.fish33Swim),this.movie=new PIXI.extras.AnimatedSprite(e),this.movie.alpha=.5,this.movie.interactive=!1,this.movie.hitArea=PIXI.Rectangle.EMPTY,this.movie.tint=0,this.movie.anchor.set(.5,.5),this.addChild(this.movie),this.movie.gotoAndStop(0),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY}}dispose(){super.dispose(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie);const e=TweenMax.getTweensOf(this);for(let t=0;t<e.length;t++)null!=e[t]&&null!=e[t]&&(e[t].pause(),e[t]=null);this.removeChild(this.movie),this.movie.gotoAndStop(0),this.movie.destroy(),this.parent&&this.parent.removeChild(this),this.destroy()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}stand(){this.movie.gotoAndPlay(0)}run(){this.movie.gotoAndPlay(0)}frozen(){this.movie.stop()}stun(){this.movie.stop()}stone(){this.movie.stop()}unStone(){this.movie.gotoAndPlay(0)}unFrozen(){this.movie.play()}unStun(){this.movie.play()}resumeGame(){this.movie.play()}onFishSwimComplete(){}die(){if(TweenMax.killTweensOf(this),this.movie.stop(),PreLoaderConfig.ListFishIDHaveDieTexture.includes(this.type))if(this.type<32){const e=ResourceManager.Atlas["AtlasFish"+this.type].textures["fish"+this.type+"Die"];e?(this.movie.textures=e,this.isNote?(this.movie.gotoAndPlay(0),this.movie.loop=!1):(this.movie.gotoAndPlay(0),this.movie.loop=!0,TweenMax.to(this,2,{alpha:0}))):TweenMax.to(this,2,{alpha:0})}else 51==this.type?this.movie.textures=ResourceManager.Atlas.AtlasBoss32.textures.fish32Die:52==this.type?this.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Die:this.movie.textures=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Die"],this.movie.gotoAndPlay(0),this.movie.loop=!1;else PreLoaderConfig.ListFishIDNoRotateWhenDie.includes(this.type)?TweenMax.to(this,2,{alpha:0}):(TweenMax.to(this,.5,{alpha:0,delay:1.5,ease:Linear.easeNone}),TweenMax.to(this,.07,{rotation:Math.PI/4,yoyo:!0,ease:Linear.easeNone,repeat:101}))}onCompleteFishWithEffectDie(){this.movie&&this.movie.gotoAndStop(0)}}t.a=o},function(e,t,i){"use strict";t.a=class{parseData(e,t,i){if(i){Utilities.log("START PARSE DATA FOR USERONLINEMODEL");for(var s=t;s<e.byteLength-4;s++)2==e.getInt8(s,!0)&&Utilities.log("index: "+s+", valueInt: "+e.getInt8(s,!0)+", valueString: "+e.getStringUint8(s,1));Utilities.log("END PARSE DATA FOR USERONLINEMODEL")}try{let i,o;for(this.userID=e.getInt32(t=DataView.calculateByteIndexInt32(t),!0),this.experience=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.accID=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.point=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.money=e.getInt64(t=DataView.calculateByteIndexInt64(t+=4),!0),this.bank=e.getInt64(t=DataView.calculateByteIndexInt64(t+=8),!0),this.winCount=e.getUint32(t=DataView.calculateByteIndexInt32(t+=8),!0),this.lostCount=e.getUint32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.cutCount=e.getUint32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.midCount=e.getUint32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.name=e.getStringUint8(t+=4,61),this.className=e.getStringUint8(t+=61,61),this.logoID=e.getUint32(t=DataView.calculateByteIndexInt32(t+=61),!0),Utilities.warn("UserOnlineModel.prototype.parseData - Phải thêm 2 byte nữa mới đọc đúng chỗ lấy deskStation"),t+=2,this.deskNO=e.getInt8(t=DataView.calculateByteIndexInt8(t+=4),!0),this.deskStation=e.getInt8(t=DataView.calculateByteIndexInt8(t+=1),!0),Utilities.warn("UserOnlineModel.prototype.parseData - deskStation byteIndex: "+t),this.userState=e.getInt8(t=DataView.calculateByteIndexInt8(t+=1),!0),this.member=e.getInt8(t=DataView.calculateByteIndexInt8(t+=1),!0),this.gameMaster=e.getInt8(t=DataView.calculateByteIndexInt8(t+=1),!0),this.userIP=e.getInt32(t=DataView.calculateByteIndexInt32(t+=1),!0),this.boy=e.getInt8(t=DataView.calculateByteIndexInt8(t+=4),!0),Utilities.warn("UserOnlineModel.prototype.parseData - Phải thêm 3 byte nữa mới đọc đúng chỗ lấy nickName"),t+=3,this.nickName=e.getStringUint8(t+=1,61),this.deskBasePoint=e.getUint32(t=DataView.calculateByteIndexInt32(t+=61),!0),this.fascination=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.vipTime=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.doublePointTime=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.protectTime=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.isVirtual=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.tax=e.getUint32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.occupation=e.getStringUint8(t+=4,61),this.phoneNum=e.getStringUint8(t+=61,61),this.province=e.getStringUint8(t+=61,61),this.city=e.getStringUint8(t+=61,61),this.zone=e.getStringUint8(t+=61,61),this.haveVideo=e.getInt8(t=DataView.calculateByteIndexInt8(t+=61),!0),this.signDescr=e.getStringUint8(t+=1,128),this.userType=e.getInt32(t=DataView.calculateByteIndexInt32(t+=128),!0),this.userInfoEx1=e.getUint32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.userInfoEx2=e.getUint32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.trader=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.matchID=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.contestScore=e.getInt64(t=DataView.calculateByteIndexInt64(t+=4),!0),this.contestCount=e.getInt32(t=DataView.calculateByteIndexInt32(t+=8),!0),this.timeLeft=e.getInt64(t=DataView.calculateByteIndexInt64(t+=4),!0),this.rankNum=e.getInt32(t=DataView.calculateByteIndexInt32(t+=8),!0),this.remainPeople=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.award=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),Utilities.warn("UserOnlineModel.prototype.parseData - Phải thêm 4 byte nữa mới đọc đúng chỗ lấy level và exp"),t+=4,this.levelUserInfo=e.getInt32(t=DataView.calculateByteIndexInt32(t+=4),!0),this.expUserInfo=e.getInt64(t=DataView.calculateByteIndexInt64(t+=4),!0),this.fullNameInfo=e.getStringUint8(t+=8,20),this.missionID=[],this.listMission=[],this.listItems=[],t+=20,s=0;s<10;s++)this.missionID.push(e.getInt32(t=DataView.calculateByteIndexInt32(t+=4,!0)));for(s=0;s<4;s++){for(o=[],i=0;i<10;i++)o.push(e.getInt32(t=DataView.calculateByteIndexInt32(t+=4,!0)));this.listMission.push(o)}for(s=0;s<2;s++){for(o=[],i=0;i<50;i++)o.push(e.getInt32(t=DataView.calculateByteIndexInt32(t+=4,!0)));this.listItems.push(o)}t+=4,Utilities.warn("UserOnlineModel.prototype.parseData - UserOnlineModel.prototype.parseData - Phải thêm 4 byte nữa thì byteIndex cuối cùng mới đủ bằng số length của dataView"),t+=4}catch(e){Utilities.error("parse data for UserOnlineModel error at byteIndex: "+t),t=1e5}return AppInfo.GameInfo.tournamentRoom||(2==this.deskStation?this.deskStation=1:3==this.deskStation?this.deskStation=2:5==this.deskStation&&(this.deskStation=3)),t}}},function(e,t,i){"use strict";var s=i(6),o=i(73),n=i(70);class a extends s.a{constructor(e,t,i,s){super(),this.skill=!1,this.listBulletIDHaveMovie=[102,103,104,105,107],this.onCompleteForwardBinded=null,this.onUpdateForwardBinded=null,this.bubbleEffect=null,this.effectThunder=null,this._lockFish=null,this.id=0,this._velocity=950,this._baseRotation=null,this.movie=null,this.power=10,this.type=null,this.basePosition=null,this.hasHitFish=!1,this.idle=!1,this._velocity=PreLoaderConfig.TimeBulletMove,this.basePosition=t,this.power=i,this.type=e,this.particleEffect=null,this.lockFishID=s||0,this.topBorder=!1,this.leftBorder=!1,this.rightBorder=!1,this.bottomBorder=!1,this.isBotFire=!1,this.reduceQuantity=!0,this._tweenForward=null,this.onUpdateForwardBinded=this.onUpdateForward.bind(this),this.onCompleteForwardBinded=this.onCompleteForward.bind(this),this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.hasHitFish=!1,this._nodeTree=null,this.listBulletIDHaveMovie.includes(this.type)?(this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"]),this.movie.animationSpeed=1/4):this.movie=new PIXI.Sprite(ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"][0]),this.movie.interactive=!1,this.movie.hitArea=PIXI.Rectangle.EMPTY,this.movie.anchor.set(.5,0),this.addChild(this.movie),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,null==this.bubbleEffect&&(this.bubbleEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.bulletExplode),this.bubbleEffect.scale.set(1.5),this.bubbleEffect.interactive=!1,this.bubbleEffect.hitArea=PIXI.Rectangle.EMPTY,this.bubbleEffect.visible=!1,this.bubbleEffect.loop=!1,this.bubbleEffect.anchor.set(.5),this.bubbleEffect.animationSpeed=.5,this.bubbleEffect.onComplete=()=>{this.onExplodeComplete()},this.addChild(this.bubbleEffect)),AppInfo.GameInfo.tournamentRoom&&(this.bulletShadow=new PIXI.Sprite(this.movie.texture),this.addChildAt(this.bulletShadow,0),this.bulletShadow.alpha=.5,this.bulletShadow.tint=0,this.bulletShadow.anchor.set(this.movie.anchor.x,this.movie.anchor.y),this.bulletShadow.position.set(this.movie.x+PreLoaderConfig.ConfigPointFishShadow.x,this.movie.y+PreLoaderConfig.ConfigPointFishShadow.y)),this.addCollision())}addCollision(){const e=o.a.getPointsArea(o.a.TYPE_AREA_COLLISION.BULLET,this.type);e.length>0&&(this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,e,n.a.TYPE_COLLISION.BULLET,this.movie)),0!==this.lockFishID&&this.releaseNode()}releaseNode(){this._nodeTree&&this._nodeTree.release()}readdCollision(){0===this.lockFishID&&this._nodeTree&&AppInfo.gameMovie.collisionManager.add(this._nodeTree)}getNodeTree(){return this._nodeTree}hit(e,t){AppInfo.gameMovie.displayController.onBulletHit(this,e.getTarget()),this.explode()}onTriggerCollide(e,t){this.hit(e,t)}dispose(){super.dispose(),this._tweenForward&&(this._tweenForward.kill(),this._tweenForward=null),this.listBulletIDHaveMovie.includes(this.type)&&this.movie.gotoAndStop(0),this.bubbleEffect&&(this.bubbleEffect.destroy(),this.bubbleEffect=null),TweenMax.killTweensOf(this),this.effectThunder&&(this.effectThunder.destroy(),this.effectThunder=null),this.movie&&(TweenMax.killTweensOf(this.movie),this.movie.destroy(),this.movie=null),this.parent&&this.parent.removeChild(this),this.onUpdateForwardBinded=null,this.onCompleteForwardBinded=null,this.destroy()}fireTo(e,t){let i;i="number"==typeof e&&"number"==typeof t?{x:e,y:t}:e,this.fireFollowAngle(Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),i)+Math.PI/2)}fireFollowTarget(e){const t=e.position,i=Utilities.Number.distanceBetweenTwoPoint(this.x,this.y,t.x,t.y);TweenMax.to(this,1,{repeat:-1,ease:Power0.easeNone,onUpdate:this._moveFollowTarget,onUpdateParams:[e,i],onUpdateScope:this})}_moveFollowTarget(e,t){if(null!==e){const i=e.position;this.rotation=Utilities.Number.angleRadBetweenTwoPoint(this.x,this.y,i.x,i.y)+Math.PI/2,void 0===this._tweenFollow||null===this._tweenFollow?this._tweenFollow=TweenMax.to(this,t/this._velocity,{x:i.x,y:i.y,ease:Power0.easeNone,onComplete:this.onCompleteFollow,onCompleteParams:[e.getNodeTree()],onCompleteScope:this}):this._tweenFollow.updateTo({x:i.x,y:i.y},!1)}else TweenMax.killTweensOf(this),this._tweenFollow&&(this._tweenFollow.kill(),this._tweenFollow=null),this.readdCollision(),this.fireFollowAngle(this.rotation)}onCompleteFollow(e){this._tweenFollow&&(this._tweenFollow.kill(),this._tweenFollow=null),this.hit(e)}fireFollowAngle(e){if(null!==this._lockFish)this.fireFollowTarget(this._lockFish);else{this.rotation=e,this._baseRotation=this.rotation,this.listBulletIDHaveMovie.includes(this.type)&&this.movie.gotoAndPlay(0);const t=AppInfo.GameInfo.tournamentRoom?30:0,i={left:t,top:0,width:AppInfo.appRealWidth-t,height:AppInfo.appRealHeight},s=this.x>AppInfo.appRealWidth?AppInfo.appRealWidth:this.x<0?0:this.x,o=this.y>AppInfo.appRealHeight?AppInfo.appRealHeight:this.y<0?0:this.y,n={x:s,y:AppInfo.appRealHeight-o};let a=Utilities.Number.coordinateIntersectionPointBorder(i,n,-(e-Math.PI/2));AppInfo.GameInfo.tournamentRoom&&null===a&&(a={x:t+50,y:n.y},this.x=t+50),null!==a&&(this.forward(a),a.x<=t&&!this.leftBorder?(this.leftBorder=!0,this.topBorder=!1,this.rightBorder=!1,this.bottomBorder=!1):a.x!==AppInfo.appRealWidth||this.rightBorder?0!==a.y||this.bottomBorder?a.y!==AppInfo.appRealHeight||this.topBorder||(this.topBorder=!0,this.leftBorder=!1,this.rightBorder=!1,this.bottomBorder=!1):(this.bottomBorder=!0,this.topBorder=!1,this.leftBorder=!1,this.rightBorder=!1):(this.rightBorder=!0,this.topBorder=!1,this.leftBorder=!1,this.bottomBorder=!1))}}forward({x:e,y:t}){let i=Utilities.Number.distanceBetweenTwoPoint(this.x,AppInfo.appRealHeight-this.y,e,t);0===i&&(i=1),null===this._tweenForward?this._tweenForward=TweenMax.to(this,i/this._velocity,{x:e,y:AppInfo.appRealHeight-t,ease:Power0.easeNone,onUpdate:this.onUpdateForwardBinded,onComplete:this.onCompleteForwardBinded}):(this._tweenForward.duration(i/this._velocity),this._tweenForward.updateTo({x:e,y:AppInfo.appRealHeight-t},!0))}onUpdateForward(){if(null!==this._lockFish){this.rotation=Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),this._lockFish.isLock?this._lockFish.lockSprite.getGlobalPosition():this._lockFish.position||{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2})+Math.PI/2;const e=this.parent.toLocal(this._lockFish.lockSprite.position,this._lockFish.lockSprite.parent),t=Utilities.Number.distanceBetweenTwoPoint(this.x,this.y,e.x,e.y);this._tweenForward.duration(t/this._velocity),this._tweenForward.updateTo({x:e.x,y:e.y},!0);const i=AppInfo.GameInfo.tournamentRoom?120:0;this.x<i?(this._tweenForward&&this._tweenForward.kill(),TweenMax.killTweensOf(this),this.x=i+100,this.lockFishID=0,this.onCompleteForward()):this.x>AppInfo.appRealWidth&&(this._tweenForward&&this._tweenForward.kill(),TweenMax.killTweensOf(this),this.x=AppInfo.appRealWidth,this.lockFishID=0,this.onCompleteForward()),this.y<0?(this._tweenForward&&this._tweenForward.kill(),TweenMax.killTweensOf(this),this.y=0,this.lockFishID=0,this.onCompleteForward()):this.y>AppInfo.appRealHeight&&(this._tweenForward&&this._tweenForward.kill(),TweenMax.killTweensOf(this),this.y=AppInfo.appRealHeight,this.lockFishID=0,this.onCompleteForward())}}onCompleteForward(){if(null!==this._lockFish)this.hit(this._lockFish.getNodeTree());else{let e=0;this.topBorder?e=(this.rotation>0?1:-1)*Math.PI-this.rotation:this.leftBorder||this.rightBorder?e=-1*this.rotation:this.bottomBorder&&(e=(this.rotation>0?1:-1)*Math.PI-this.rotation),this.fireFollowAngle(e)}}moveFollowAngle(e){}explode(){AppInfo.gameMovie.gameBoard.removeBullet(this),this.releaseNode(),TweenMax.killTweensOf(this),this.bulletShadow&&(this.bulletShadow.visible=!1),null!==this._tweenForward&&(this._tweenForward.kill(),this._tweenForward=null),this.listBulletIDHaveMovie.includes(this.type)?(this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"explode"],this.movie.animationSpeed=.5,this.movie.loop=!1,this.movie.anchor.set(.5),this.movie.scale.set(1),105===this.type?TweenMax.to(this.movie,.1,{ease:Linear.easeNone,scaleX:.55,scaleY:.55,repeat:2,yoyo:!0,onComplete:()=>{this.onExplodeComplete()}}):this.movie.onComplete=this.onExplodeComplete.bind(this)):this.movie.visible=!1,PreLoaderConfig.GameSettingConfig.listSetting.enableBubbleBullet.defaultValue&&!this.listBulletIDHaveMovie.includes(this.type)&&this.bubbleEffect&&(this.bubbleEffect.visible=!0,this.bubbleEffect.gotoAndPlay(0)),this.particleEffect&&this.particleEffect.stop()}onExplodeComplete(){this.hideBullet()}setIsMe(){this.listBulletIDHaveMovie.includes(this.type)?this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"]:this.movie.texture=ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"][0]}setNotMe(){this.listBulletIDHaveMovie.includes(this.type)?this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["bulletOther"+this.type+"fire"]:this.movie.texture=ResourceManager.Atlas["AtlasGun"+this.type].textures["bulletOther"+this.type+"fire"][0]}hideBullet(){this.listBulletIDHaveMovie.includes(this.type)?(this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"],this.movie.gotoAndStop(0)):this.movie.texture=ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"][0],this.movie.anchor.set(.5,0),this.movie.scale.set(1),this.skill=!1,this.movie.alpha=1,this.movie.visible=!1,this.skillSkind=-1,this.visible=!1,this.lockFishID=0,this.hasHitFish=!1,this.isBotFire=!1,this.movie.loop=!0,this.idle=!0,this.bubbleEffect,this.effectLightDragon&&(this.effectLightDragon.visible=!1)}get isMe(){return this.basePosition==AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation}get lockFishID(){return this._lockFish?this._lockFish.id:0}set lockFishID(e){if(0==e)this._lockFish=null;else for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(AppInfo.gameMovie.gameBoard.listFish[t].id===e){this._lockFish=AppInfo.gameMovie.gameBoard.listFish[t];break}}}t.a=a},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t,i,s){super(),this._h=0,this._w=0,this._indexShow=0,this._style={},this._text="",this._txtTooltip=null,this._bgTooltip=null;this.isMultiStyleText=e||!1,this._text=t||"",this._style=s||{fontFamily:"Arial",fontWeight:"bold",fontSize:"16px",fill:16777215},this._indexShow=i||0,this._bgColor=0,this._bgAlpha=.8,this._lineAlpha=.8,this._lineColor=0,this.init()}init(){super.init(),null===this._txtTooltip&&(this.isMultiStyleText?this._txtTooltip=new PIXI.MultiStyleText(this._text.toString(),{def:{fontFamily:"Arial",fill:"#ffffff",fontSize:"16px",stroke:"#000000",strokeThickness:4,lineJoin:"miter",miterLimit:2},b:{fontFamily:"Arial",fontWeight:"Bold",fill:"#4dfd73",fontSize:"16px",stroke:"#000000",strokeThickness:4,lineJoin:"miter",miterLimit:2}}):this._txtTooltip=new PIXI.Text(this._text.toString(),this._style),this._txtTooltip.anchor.set(.5),this.addChild(this._txtTooltip),this._txtTooltip.interactive=!1,this._txtTooltip.hitArea=PIXI.Rectangle.EMPTY),this._w=this._txtTooltip.width+30,this._h=this._txtTooltip.height+10,null===this._bgTooltip&&(this._bgTooltip=new PIXI.Sprite(this.setBackgroundTooltip(this._w,this._h).generateCanvasTexture()),this._bgTooltip.anchor.set(.5),this.addChild(this._bgTooltip),this._bgTooltip.interactive=!1,this._bgTooltip.hitArea=PIXI.Rectangle.EMPTY),this._setPosition(this._indexShow)}_setPosition(e){this.setChildIndex(this._txtTooltip,this.children.length-1),this._bgTooltip.position.set(0),this._txtTooltip.position.set(0),e===o.ShowTop&&(this._txtTooltip.y=-5),e===o.ShowBot&&(this._txtTooltip.y=5),e===o.ShowRight&&(this._txtTooltip.x=20),e===o.ShowLeft&&(this._txtTooltip.x=-20)}changeTextTooltip(e,t,i){this._text=e,this._style=i||this._style,this._indexShow=null!=t?t:this._indexShow,this._txtTooltip.text=this._text,this._txtTooltip.style=this._style,this._w=this._txtTooltip.width+30,this._h=this._txtTooltip.height+10,this._bgTooltip.texture=this.setBackgroundTooltip(this._w,this._h).generateCanvasTexture(),this._setPosition(this._indexShow)}setBackgroundTooltip(e=this._w,t=this._h,i,s=this._bgColor,n=this._bgAlpha,a=this._lineColor,h=this._lineAlpha){i=null!=i?i:this._indexShow,this._bgColor=s,this._bgAlpha=n,this._lineColor=a,this._lineAlpha=h,this._indexShow=i;let l={x:0,y:0},r={x:0,y:0},p={x:0,y:0};switch(this._graphic||(this._graphic=new PIXI.Graphics),this._graphic.clear(),this._graphic.beginFill(s,n),this._graphic.lineStyle(1,a,h),this._graphic.drawRoundedRect(0,0,e,t,10),i){case o.ShowTop:l={x:e/2,y:t+10},r={x:e/2-10,y:t},p={x:e/2+10,y:t};break;case o.ShowBot:l={x:e/2,y:-10},r={x:e/2-10,y:0},p={x:e/2+10,y:0};break;case o.ShowRight:l={x:-40,y:t/2},r={x:0,y:t/2-.2*t},p={x:0,y:t/2+.2*t};break;case o.ShowLeft:l={x:e+40,y:t/2},r={x:e,y:t/2-.2*t},p={x:e,y:t/2+.2*t}}return this._graphic.moveTo(l.x,l.y),this._graphic.lineTo(r.x,r.y),this._graphic.lineTo(p.x,p.y),this._graphic}dispose(){super.dispose()}}o.ShowTop=0,o.ShowRight=1,o.ShowBot=2,o.ShowLeft=3,t.a=o},function(e,t,i){"use strict";class s extends PIXI.Container{constructor(e,t){super(),this._id=e,this.type=t,this.isBossMap=!0,this.listFishInSide=[]}dispose(){this.destroy()}move(){}pause(){}resume(){}swim(){}dead(){}get id(){return this._id}set id(e){this._id=e}}t.a=s},function(e,t,i){"use strict";class s extends PIXI.Container{constructor(){super(),this._tweenMask=null,this._tweenBlood=null,this._blood={current:0},this._listTextBloodLose=[],this._preHp=0,this.bgProgressHealth=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBossMedusa.textures.BgProgressHealth),this.addChild(this.bgProgressHealth),this.containerProgressGray=new PIXI.Container,this.addChild(this.containerProgressGray),this.progressBarHealthGray=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBossMedusa.textures.ProgressBarHealthGray),this._maskProgressGray=PIXI.Graphics.Rectangle(0,0,this.progressBarHealthGray.width,this.progressBarHealthGray.height),this.containerProgressGray.mask=this._maskProgressGray,this.containerProgressGray.addChild(this._maskProgressGray),this.containerProgressGray.addChild(this.progressBarHealthGray),this.containerProgress=new PIXI.Container,this.addChild(this.containerProgress),this.progressBarHealth=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBossMedusa.textures.ProgressBarHealth),this._maskProgress=PIXI.Graphics.Rectangle(0,0,this.progressBarHealth.width,this.progressBarHealth.height),this.containerProgress.mask=this._maskProgress,this.containerProgress.addChild(this._maskProgress),this.containerProgress.addChild(this.progressBarHealth),this._widthBar=this.progressBarHealth.width,this.txtBlood=new PIXI.Text("",{fontFamily:PreLoaderConfig.FontResource.UTMTHANCHIENTRANH.name,fontSize:16,fill:16777215}),this.txtBlood.anchor.set(.5),this.txtBlood.position.set(this.containerProgress.width/2,-10),this.addChild(this.txtBlood)}dispose(){TweenMax.killTweensOf(this._maskProgressGray),this._tweenMask&&(this._tweenMask.kill(),this._tweenMask=null),this._tweenBlood&&(this._tweenBlood.kill(),this._tweenBlood=null),this._maskProgressGray.destroy(),this._maskProgressGray=null,this.progressBarHealthGray.destroy(),this.progressBarHealthGray=null,this.containerProgressGray.destroy(),this.containerProgressGray=null,this._maskProgress.destroy(),this._maskProgress=null,this.progressBarHealth.destroy(),this.progressBarHealth=null,this.containerProgress.destroy(),this.containerProgress=null,this.bgProgressHealth.destroy(),this.bgProgressHealth=null,this.txtBlood.destroy(),this.txtBlood=null,this.destroy()}updateHealth(e,t){const i=this._widthBar*(e/t);null===this._tweenMask?this._tweenMask=TweenMax.to(this._maskProgress,1,{width:i}):this._tweenMask.updateTo({width:i},!0),null===this._tweenBlood?this._tweenBlood=TweenMax.to(this._blood,1,{current:e,ease:Power0.easeNone,onUpdate(){this.txtBlood.text=Utilities.Coin(Math.floor(this._blood.current))},onUpdateScope:this}):this._tweenBlood.updateTo({current:e},!0),this._tweenProgressBarGray(i),this._preHp<=0?this._preHp=t-e:this._preHp-=e,this._showBloodLose(Utilities.Coin(this._preHp)),this.txtBlood.text=Utilities.Coin(e),this._preHp=e}_showBloodLose(e){const t=this._getTextFree();t.text="-"+e,this._playEffect(t)}_playEffect(e){void 0===e.tweenEffect&&(e.tweenEffect=TweenMax.to(e,.8,{startAt:{y:0,alpha:1},alpha:0,y:"-=100",ease:Linear.easeNone,onComplete:this._add,onCompleteScope:this,onCompleteParams:[e]})),e.visible=!0,e.tweenEffect.play(0)}_add(e){e.visible=!1,this._listTextBloodLose.push(e)}_getTextFree(){let e=this._listTextBloodLose.pop();return null==e&&(e=new PIXI.Text("",{dropShadow:!0,dropShadowAngle:1.5707963267948966,dropShadowDistance:1,fill:"#FF3219",fontSize:40,fontFamily:PreLoaderConfig.FontResource.UTMROCKWELL.name,stroke:16777215,strokeThickness:3,fontWeight:"bold"})),this.contains(e)||this.addChild(e),e}_tweenProgressBarGray(e){TweenMax.killTweensOf(this._maskProgressGray),TweenMax.to(this._maskProgressGray,1,{width:e,delay:.5})}}t.a=s},function(e,t,i){"use strict";var s=i(5);class o extends PIXI.Container{constructor(e,t){super(),this._isDirty=!0,this._listTexts=[],this._listTextBreak=[],this.onCompleteAppear=null,this.onCompleteDisappear=null,this._tl=null,this._tDisappear=null,this._tAppear=null,this._textConver=e||"",t=t||PIXI.Texture.EMPTY,this._overlay=PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,0,.6),this._overlay.visible=!1,AppInfo.gameMovie.layerEffect.addChildAt(this._overlay,0),this._bgTextContainer=new PIXI.Container,this.addChild(this._bgTextContainer),this._bgText1=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBoss.textures.BgConversation),this._bgText1.anchor.set(.5),this._bgText1.x=-this._bgText1.width/2,this._bgText2=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBoss.textures.BgConversation),this._bgText2.scaleX=-1,this._bgText2.anchor.set(.5),this._bgText2.x=this._bgText1.width/2,this._bgTextContainer.addChild(this._bgText1,this._bgText2),this._containerText=new PIXI.Container,this.addChild(this._containerText),this._textKh=new PIXI.Text("",{fontSize:25,fontFamily:PreLoaderConfig.FontResource.UTMGodWordR.name,fill:16777215,align:"center"}),this._textKh.anchor.set(.5),this._containerText.addChild(this._textKh),this.avatar=new PIXI.Sprite(t),this.avatar.anchor.set(.5),this.avatar.x=-this._bgTextContainer.width/2,this.addChild(this.avatar),this._btnClose=new s.a(ResourceManager.Atlas.AtlasPopupHoYeah.textures.btnClose),this._btnClose.x=this._bgTextContainer.width/2-37,this._btnClose.y=-this._bgTextContainer.height/2-7,this._btnClose.pointerTap(this.hide,this),this.addChild(this._btnClose)}dispose(){for(this._tl&&(this._tl.kill(),this._tl=null),this._tDisappear&&(this._tDisappear.kill(),this._tDisappear=null),this._tAppear&&(this._tAppear.kill(),this._tAppear=null),TweenMax.killDelayedCallsTo(this.disappear);this._listTexts.length>0;){const e=this._listTexts[0];TweenMax.killTweensOf(e),e.destroy(),Utilities.removeElementAtIndex(this._listTexts,0)}this._overlay&&(this._overlay.destroy(),this._overlay=null),this._bgText1&&(this._bgText1.destroy(),this._bgText1=null),this._bgText2&&(this._bgText2.destroy(),this._bgText2=null),this._bgTextContainer&&(this._bgTextContainer.destroy(),this._bgTextContainer=null),this._textKh&&(this._textKh.destroy(),this._textKh=null),this._containerText&&(this._containerText.destroy(),this._containerText=null),this.avatar&&(this.avatar.destroy(),this.avatar=null),this.destroy()}appear(e,t){void 0===e&&(e=!0),e&&(this._overlay.visible=!0),TweenMax.killDelayedCallsTo(this.disappear),this._tDisappear&&this._tDisappear.kill(),this.visible=!0,this.interactiveChildren=!0,this._appearKh(t)}_breakText(){if(!this._isDirty)return;this._isDirty=!1,this._listTextBreak.length=0,this._containerText.removeChildren();let e=new PIXI.Container;this._containerText.addChild(e);let t=0,i=0;const s=this._getTexts(this._textConver);for(let o=0,n=this._textConver.length;o<n;++o){const n=this._textConver[o],a=s[o];a.text=n,a.scaleX=-1,a.x=t,e.addChild(a),this._listTextBreak.push(a),t+=a.width,"\n"===n&&(t=0,i++,e=new PIXI.Container,e.y=30*i,this._containerText.addChild(e))}const o=this._containerText.width,n=this._containerText.children;for(let e=0;e<n.length;e++)n[e].x=(o-n[e].width)/2;this._containerText.x=(this._bgTextContainer.width-o)/2-this._bgTextContainer.width/2,this._containerText.y=(this._bgTextContainer.height-this._containerText.height)/2-this._bgTextContainer.height/2;for(let e=0,t=this._listTextBreak.length;e<t;e++)this._listTextBreak[e].visible=!1}disappear(){this._overlay.visible=!1,this.interactiveChildren=!1,null===this._tDisappear?this._tDisappear=TweenMax.to(this,1,{alpha:0,onComplete(){this.visible=!1,this.onCompleteDisappear&&this.onCompleteDisappear()},onCompleteScope:this}):this._tDisappear.restart()}_getTexts(){const e=this._textConver.length-this._listTexts.length;if(e<=0)return this._listTexts.slice(0,this._textConver.length);for(let t=0;t<e;t++){const e=new PIXI.Text("",{fontSize:22,fontFamily:PreLoaderConfig.FontResource.UTMGodWordR.name,fill:16777215});this._listTexts.push(e)}return this._listTexts.slice()}_appearKh(e){void 0===e&&(e=5),this._textKh.text=this._textConver,this.alpha=0,null===this._tAppear?this._tAppear=TweenMax.to(this,1,{alpha:1,ease:Power0.easeNone,onComplete(){TweenMax.delayedCall(e,this.disappear,[],this)},onCompleteScope:this}):this._tAppear.restart()}hide(){null!==this._tl&&this._tl.eventCallback("onComplete",null),TweenMax.killDelayedCallsTo(this.disappear),this.disappear()}get textConver(){return this._textConver}set textConver(e){this._textConver!==e&&(this._textConver=e,this._isDirty=!0)}}t.a=o},function(e,t,i){"use strict";(function(e){var s=i(6),o=i(104),n=i(177),a=i(111),h=i(166),l=i(89),r=(i(4),i(5)),p=i(112),d=i(113),c=i(175),u=i(114),m=i(160),f=i(116),g=i(87),I=i(117),y=i(118);i(119);class C extends s.a{constructor(e,t,i,s){super(),this._isActivatingSkill=!1,this.vipGem=null,this.compoItem=null,this.ticketGame=null,this.gem=null,this.faction=null,this._isHoverBtnClock=!1,this.screws=0,this._indexCurrentSpecGun=0,this._btnPlus=null,this._btnMinus=null,this.componentSpinner=null,this.txtUseSkill=null,this.timeUseSkill=null,this.compoGunSkill=null,this._currentTextureLevel=null,this.txtLevel=null,this.level=null,this.medusaCC=!1,this.spinnerStone=null,this.screwsStone=null,this.baseStone=null,this.txtTime=null,this.timerReward=null,this.freeGun=null,this.bossMiniRewardEffect=null,this.compoToolTipGun=null,this.txtPowerOfGun=null,this.animateCoin=null,this._coin=0,this._btnCancelLockFish=null,this._btnLockFish=null,this._nickName="",this._baseRotation=null,this.basePosition=null,this.userID=0,this.compoChangeGun=null,this.compoGunPrevious=null,this.compoGun=null,this.spinner=null,this.baseStationBack=null,this.baseStationFront=null,this.iconPeople=null,this.iconCoin=null,this.lblCoin=null,this.lblNickName=null,this._isMe=!1,this.userID=e,this.basePosition=t||0,this._nickName=i,this._coin=s,this.animateCoin={coin:0},this.emotion=null,this.chatEmotion=null,this._typeGunPrevious=0,this.dragonCollectBullet=null,this.vipGem=null,this._baseTopOld=null,this._baseBotOld=null,this.seasonNoel=null,this._iconNapXu=null,this.gunSkillId=-1,this.compoCollectMiniGame=null,this.loadAtlasByName=null,this.usingSkill=!1,this._isMe=e==AppInfo.MyInfo.userID,this.timerUseItem=null,this.effectLightning=null,this.onBulletFireSuccess=null,this.iceContainer=null,this._skillMedusa=null,this._skillLighting=null,this.setCoinComplete=new PIXI.Observable,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1,this.backgroundUserInfo=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.BackgroundUserInfo),this.backgroundUserInfo.x=-220,this.backgroundUserInfo.y=-this.backgroundUserInfo.height,this.backgroundUserInfo.interactive=!1,this.backgroundUserInfo.hitArea=PIXI.Rectangle.EMPTY;const t={fontSize:"14px",fontFamily:PreLoaderConfig.FontResource.RobotoSlabBold.name,fillGradientStops:[.7,.55,.5,.2],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,strokeThickness:2,lineJoin:"round"};this.lblNickName=new PIXI.Text("",t),this.lblNickName.anchor.set(.5),this.lblNickName.position.set(85,19),this.lblCoin=new PIXI.extras.BitmapText("",{font:"14px "+PreLoaderConfig.FontResource.CoinWin.name}),this.lblCoin.anchor.set(.5),this.lblCoin.position.set(80,45),this.iconCoin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBanCaGeneral.textures.IconCoin),this.iconCoin.position.set(21,46),this.iconCoin.anchor.set(.5),this.iconPeople=new PIXI.Sprite(ResourceManager.Atlas.AtlasBanCaGeneral.textures.IconPeople),this.iconPeople.position.set(18,8),this.compoGun=new o.a(0,this.basePosition),this.baseStationBack=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.BaseStationBack),this.baseStationBack.anchor.set(.5,1),this.baseStationBack.x=2,this.baseStationFront=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.BaseStationFront),this.baseStationFront.anchor.set(.5,1),this.screws=new PIXI.Container;const i=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.Screws),s=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.Screws);if(s.x=135,this.screws.addChild(i,s),this.screws.x=-this.baseStationFront.width/2+11,this.screws.y=-20,this.componentSpinner=new PIXI.Container,this.componentSpinner.y=-35,this.componentSpinner.interactive=!1,this.componentSpinner.hitArea=PIXI.Rectangle.EMPTY,this.spinner=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.Spinner),this.spinner.anchor.set(.5),this.compoGun.y=C.POSITION_GUN_DEFAULT-15,null==this.freeGun&&ResourceManager.Atlas.AtlasBossMini&&(this.freeGun=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossMini.textures.rewardFreeGunNoText),null==this.txtTime&&(this.txtTime=new PIXI.Text("10s",{fontFamily:"Open Sans",fontSize:"35px",fontWeight:"Bold",fill:3407616,stroke:0,strokeThickness:3}),this.txtTime.y=0,this.txtTime.x=0),this.freeGun.addChild(this.txtTime),this.freeGun.anchor.set(.5,.5),this.addChild(this.freeGun),this.freeGun.visible=!1,this.freeGun.y=-80,this.freeGun.x=-180,2!=this.basePosition&&3!=this.basePosition||(this.freeGun.rotation=Utilities.toRad(180),this.freeGun.x=170,this.freeGun.y=-50)),null==this.level&&(this.level=new PIXI.Sprite,this.level.position.set(50,-12),this.level.anchor.set(.5),this.level.visible=PreLoaderConfig.IsShowLevel),null==this.txtLevel){const e={fontFamily:"Open Sans",fill:16777215,fontSize:18,fontWeight:"bold",stroke:0,strokeThickness:1};this.txtLevel=new PIXI.Text("",e),this.txtLevel.anchor.set(.5),this.txtLevel.position.set(1,1),this.level.addChild(this.txtLevel),this.level.visible=!1}if(this.txtPowerOfGun=new PIXI.Text("",PreLoaderConfig.StyleFontRoom),this.txtPowerOfGun.style.fontSize=24,this.txtPowerOfGun.style.strokeThickness=3,this.txtPowerOfGun.style.fontFamily="Arial",this.txtPowerOfGun.style.dropShadow=!1,this.txtPowerOfGun.anchor.set(.5),this.txtPowerOfGun.y=0,this.setTextPowerGun(PreLoaderConfig.ListGunConfig[this.compoGun.type].power[0]),this._isMe&&(this.compoToolTipGun=new a.a(this.basePosition),this.compoToolTipGun.x=1,this.compoToolTipGun.y=-65,this.compoToolTipGun.hitArea=PIXI.Rectangle.EMPTY,this.compoToolTipGun.show()),null==this.faction&&ResourceManager.Atlas.AtlasPopupMyInfo.textures.navy&&(this.faction=new p.a(ResourceManager.Atlas.AtlasPopupMyInfo.textures.navy),this.faction.position.set(-80,-48),this.faction.visible=!1,this.addChild(this.faction)),this.backgroundUserInfo.addChild(this.lblNickName,this.lblCoin,this.iconCoin,this.iconPeople,this.level),this.componentSpinner.addChild(this.spinner,this.txtPowerOfGun),this._isMe?this.addChild(this.baseStationBack,this.compoToolTipGun,this.compoGun,this.baseStationFront,this.screws,this.backgroundUserInfo,this.componentSpinner):this.addChild(this.baseStationBack,this.compoGun,this.baseStationFront,this.screws,this.backgroundUserInfo,this.componentSpinner),this._isMe&&(null===this.dragonCollectBullet&&ResourceManager.Atlas.AtlasEffectsInGame&&(this.dragonCollectBullet=new g.a,this.dragonCollectBullet.visible=!1,this.addChild(this.dragonCollectBullet),this.dragonCollectBullet.setUpPosition(this.basePosition)),PreLoaderConfig.IsShowNewGun?(this.baseStationBack.interactive=!1,this.baseStationBack.hitArea=PIXI.Rectangle.EMPTY,this.baseStationFront.buttonMode=!0,this.baseStationFront.interactive=!0,this.baseStationFront.mouseclick=this.onMouseClick.bind(this)):(this.baseStationFront.buttonMode=!0,this.baseStationFront.interactive=!0,this.baseStationFront.mouseclick=this.onMouseClick.bind(this)),this._btnLockFish||(this._btnLockFish=new r.a(ResourceManager.Atlas.AtlasBaseStation.textures.LockFish_UP),this._btnLockFish.name="btnLockFish",this._btnLockFish.x=200,this._btnLockFish.y=-90,this._btnLockFish.useTween=this._btnLockFish.useTweenDown=!1,this._btnLockFish.mouseclick=this.onMouseClick.bind(this),this._btnLockFish.mouseover=this.onMouseOverBtnClick.bind(this),this._btnLockFish.mouseout=this.onMouseOutBtnClick.bind(this),this.addChild(this._btnLockFish)),this._btnCancelLockFish||(this._btnCancelLockFish=new r.a(ResourceManager.Atlas.AtlasBaseStation.textures.UnlockFish_UP),this._btnCancelLockFish.name="btnCancelLockFish",this._btnCancelLockFish.position.set(this._btnLockFish.x,this._btnLockFish.y),this._btnCancelLockFish.useTween=this._btnCancelLockFish.useTweenDown=!1,this._btnCancelLockFish.visible=!1,this._btnCancelLockFish.mouseclick=this.onMouseClick.bind(this),this.addChild(this._btnCancelLockFish)),this.compoChangeGun=new n.a(this.callBackChoiceGun.bind(this),this.basePosition),PreLoaderConfig.IsEnableGunSkill&&(this.compoGunSkill||(this.compoGunSkill=new h.a(this.basePosition),this.compoGunSkill.y=-this.compoGunSkill.height-10,this.compoGunSkill.cbActiveSkill=e=>{this.isActivatingSkill=e},this.compoGunSkill.callBackButtonClick=this.changeGunSkill.bind(this)),null==this.txtUseSkill&&(this.txtUseSkill=new PIXI.Text("",PreLoaderConfig.StyleFontRoom),this.txtUseSkill.style.fontSize=30,this.txtUseSkill.anchor.set(.5),this.txtUseSkill.x=160,this.txtUseSkill.y=-93,this.txtUseSkill.visible=!1),this.addChild(this.compoGunSkill),this.addChild(this.txtUseSkill)),this._btnMinus=new r.a(ResourceManager.Atlas.AtlasBaseStation.textures.BtnMinus_UP),this._btnPlus=new r.a(ResourceManager.Atlas.AtlasBaseStation.textures.BtnPlus_UP),this._btnMinus.name="BtnMinus",this._btnPlus.name="BtnPlus",this._btnMinus.position.set(this.baseStationBack.x-this.baseStationBack.width/2-12,-65),this._btnPlus.position.set(this.baseStationBack.x+this.baseStationBack.width/2-this._btnPlus.width+12,-65),this._btnMinus.mouseclick=this.onMouseClick.bind(this),this._btnPlus.mouseclick=this.onMouseClick.bind(this),this.addChild(this._btnMinus),this.addChild(this._btnPlus),this.addChild(this.compoChangeGun)),null===this.loadAtlasByName&&(this.loadAtlasByName=new f.a),null===this.emotion&&ResourceManager.Atlas.AtlasCompoChat&&(this.emotion=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasCompoChat.textures.emotion),this.emotion.anchor.set(.5),this.emotion.visible=!1,this.emotion.animationSpeed=1/6,this.emotion.interactive=!1,this.emotion.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this.emotion),this.emotion.gotoAndStop(0)),this._isMe&&PreLoaderConfig.CompoChat.enableEmotion&&null===this.chatEmotion&&ResourceManager.Atlas.AtlasCompoChat&&(this.chatEmotion=new u.a,this.addChild(this.chatEmotion)),this.initCompoItem(),null===this.vipGem&&PreLoaderConfig.IsVipInGame&&(this.vipGem=new I.a,this.addChild(this.vipGem),this.vipGem.scale.set(.4)),this.timeUseSkill=new Utilities.Timer(1e3,PreLoaderConfig.TimeoutGunSkill,this.updateTxtUseSkill.bind(this),this.onCompleteUseSkill.bind(this)),this.setPosition(this.basePosition),this.checkIsFastShoot(),this.nickName=this._nickName,this.coin=this._coin,null===this._baseTopOld){var e=this.isMe?ResourceManager.Atlas.AtlasBaseStation.textures.MyBaseStationTopUp:ResourceManager.Atlas.AtlasBaseStation.textures.OtherBaseStationTopUp;this._baseTopOld=new PIXI.Sprite(e),this._baseTopOld.y=-50,this._baseTopOld.x=-97,this.addChildAt(this._baseTopOld,this.getChildIndex(this.backgroundUserInfo)+1),this._baseTopOld.addChild(this.txtPowerOfGun),this.txtPowerOfGun.x=93,this.txtPowerOfGun.y=39,this._baseTopOld.interactive=!0,this._baseTopOld.buttonMode=!0,this.isMe&&(this._baseTopOld.mouseclick=this.onMouseClick.bind(this))}if(null===this._baseBotOld){e=this.isMe?ResourceManager.Atlas.AtlasBaseStation.textures.MyBaseStationBottomUp:ResourceManager.Atlas.AtlasBaseStation.textures.OtherBaseStationBottomUp;this._baseBotOld=new PIXI.Sprite(e),this._baseBotOld.x=-54,this._baseBotOld.y=-96,this.addChildAt(this._baseBotOld,0)}this._btnPlus&&this._btnPlus.position.set(41,-28),this._btnMinus&&this._btnMinus.position.set(-86,-27),this.baseStationFront.visible=!1,this.baseStationBack.visible=!1,this.componentSpinner.visible=!1}}saveClickToList(){}initCompoItem(){PreLoaderConfig.CompoItemConfig.enable&&(null===this.compoItem?AppInfo.GameInfo.tournamentRoom?(this.compoItem=new m.a(this.isMe,1),this.addChild(this.compoItem),this.compoItem.name="compoItem",this.compoItem.setUpByBaseStation(1),AppInfo.GameInfo.tournamentRoom&&this.compoItem.iconActive.position.set(-45,-25)):ResourceManager.Atlas.AtlasCompoItem&&(this.compoItem=new m.a(this.isMe,this.basePosition),this.addChild(this.compoItem),this.compoItem.name="compoItem",this.compoItem.setUpByBaseStation(this.basePosition),this.setPosition(this.basePosition)):ResourceManager.Atlas.AtlasCompoItem&&this.compoItem.initItem())}dispose(){for(super.dispose(),TweenMax.killTweensOf(this.animateCoin),TweenMax.killTweensOf(this),this.timerReward&&this.timerReward.Stop(),this._iconNapXu&&(this._iconNapXu.destroy(),this._iconNapXu=null),this.timeUseSkill&&this.timeUseSkill.Stop(),this.timerToFrezzeGun&&this.timerToFrezzeGun.Stop(),this._tweenUnturnedStone&&(this._tweenUnturnedStone.kill(),this._tweenUnturnedStone=null),this._tweenFreeze&&(this._tweenFreeze.kill(),this._tweenFreeze=null),this._tweenUnfreeze&&(this._tweenUnfreeze.kill(),this._tweenUnfreeze=null),this.healthBarContainer&&(this.bgHealth&&(this.bgHealth.destroy(),this.bgHealth=null),this.maskBarHealth&&(this.maskBarHealth.destroy(),this.maskBarHealth=null),this.barHealth&&(this.barHealth.destroy(),this.barHealth=null),this.panelPower&&(this.panelPower.destroy(),this.panelPower=null),this.txtBlood&&(this.txtBlood.destroy(),this.txtBlood=null),this.healthBarContainer&&(this.healthBarContainer.destroy({children:!0}),this.healthBarContainer=null)),this.iceContainer&&(this.iceContainer.destroy({children:!0}),this.iceContainer=null),this.timerUseItem&&(this.timerUseItem.Stop(),this.timerUseItem=null);this.numChildren>0;){const e=this.removeChildAt(0);e&&null!==e&&(TweenMax.killTweensOf(e),e.dispose?e.dispose():e.destroy&&e.destroy())}this._btnCancelLockFish=null,this._btnLockFish=null,this._btnMinus=null,this._btnPlus=null,this.backgroundUserInfo=null,this.dragonCollectBullet=null,this.baseStone=null,this.spinnerStone=null,this.screwsStone=null,this.baseStationBack=null,this.baseStationFront=null,this.bossMiniRewardEffect=null,this.compoChangeGun=null,this.compoGun=null,this.compoGunPrevious=null,this.compoGunSkill=null,this.componentSpinner=null,this.compoToolTipGun=null,this.freeGun=null,this.iconCoin=null,this.iconPeople=null,this.lblCoin=null,this.lblNickName=null,this.level=null,this.spinner=null,this.txtLevel=null,this.txtPowerOfGun=null,this.txtUseSkill=null,this.faction=null,this.gem=null,this.compoCollectMiniGame=null,this.emotion=null,this.chatEmotion=null,this.loadAtlasByName=null,this.compoItem=null,this.seasonNoel=null,this._overlayNoel=null,this.effectLightning&&(this.effectLightning.dispose(),this.effectLightning=null),this.parent&&this.parent.removeChild(this),this.destroy()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}updateLevel(e){this._updateStyleTextName(e)}levelUp(e){this.updateLevel(e),TweenMax.killTweensOf(this.level),TweenMax.to(this.level,.4,{scaleX:1.5,scaleY:1.5,yoyo:!0,repeat:1,ease:Bounce.easeOut})}changeGunSkill(e){this.gunSkillId=e;let t=!0;switch(e){case h.a.ID_LAZE:this.changeGun(h.a.TYPE_LAZE);break;case h.a.ID_SONIC:this.changeGun(h.a.TYPE_SONIC);break;case h.a.ID_BOOM:this.changeGun(h.a.TYPE_BOOM);break;case h.a.ID_MEDUSA:t=!1,this._addSkillMedusa();break;case h.a.ID_LIGHTING:this._addSkillLighting(),this.changeGun(205);break;case 205:this.changeGun(205)}this.isMe&&(this.onCancelLockFish(),t&&(PreLoaderConfig.IsShowNewGun?(this.baseStationFront.interactive=!1,this._btnMinus.interactive=!1,this._btnPlus.interactive=!1):(this.buttonMode=!1,this.interactive=!1,this.interactiveChildren=!1)),this.startCountDownUseSkill(e))}_addSkillMedusa(){null===this._skillMedusa&&(this._skillMedusa=new y.a(this.basePosition),this.addChild(this._skillMedusa)),this._skillMedusa.show()}_addSkillLighting(){}_onComplteLevelUp(e){}onLockFish(){this._btnLockFish.visible=!1,this._btnCancelLockFish.visible=!0,AppInfo.gameMovie.displayController.onReadyLockFish()}onCancelLockFish(){this._btnLockFish.visible=!0,this._btnCancelLockFish.visible=!1,AppInfo.gameMovie.gameBoard.lockFish?AppInfo.gameMovie.gameBoard.lockFish.unLock():AppInfo.gameMovie.displayController.onUnreadyLockFish()}onMouseOverBtnClick(e){GOWN.Button.prototype.mouseover.call(this._btnLockFish),this._isHoverBtnClock=!0}onMouseOutBtnClick(e){GOWN.Button.prototype.mouseout.call(this._btnLockFish),this._isHoverBtnClock=!1}onMouseClick(t){if(AppInfo.gameMovie.gameBoard.waitLightning)return void AppInfo.preLoader.globalCompoController.compoToast.addMessage(PreLoaderConfig.ListTextConfig.NotifyLockFishInLightning);AppInfo.preLoader.soundController.playButtonClick();const i=t.target.name;"btnLockFish"==i?(this.onLockFish(),t.stopPropagation(),AppInfo.gameMovie.gameBoard.timeMouseClickBtnLockFish=performance.now(),AppInfo.gameMovie.gameBoard.mousePositionClickBtnLockFish={x:AppInfo.preLoader.renderer.plugins.interaction.eventData.data.global.x,y:AppInfo.preLoader.renderer.plugins.interaction.eventData.data.global.y},e.isMobilePage||this._isHoverBtnClock||AppInfo.listLogType.includes(0)||(AppInfo.listLogType.push(0),AppInfo.preLoader.requestController.userLog(0))):"btnCancelLockFish"==i?(this.onCancelLockFish(),t.stopPropagation()):i==this._btnMinus.name?this.compoGun.type<100?this.compoChangeGun.onUpdateGun(this.compoGun.type,!1):this.compoGun.type>100&&this.compoGun.type<200&&(this._indexCurrentSpecGun--,this._indexCurrentSpecGun<0&&(this._indexCurrentSpecGun=PreLoaderConfig.ListGunConfig.length-1),this.compoGun.power=PreLoaderConfig.ListGunConfig[this._indexCurrentSpecGun].power[0],this.setTextPowerGun(this.compoGun.power)):i==this._btnPlus.name?this.compoGun.type<100?this.compoChangeGun.onUpdateGun(this.compoGun.type,!0):this.compoGun.type>100&&this.compoGun.type<200&&(this._indexCurrentSpecGun++,this._indexCurrentSpecGun>=PreLoaderConfig.ListGunConfig.length&&(this._indexCurrentSpecGun=0),this.compoGun.power=PreLoaderConfig.ListGunConfig[this._indexCurrentSpecGun].power[0],this.setTextPowerGun(this.compoGun.power)):(null===i||this.compoChangeGun)&&(PreLoaderConfig.IsShowNewGun?(this.baseStationFront.buttonMode=!1,this.baseStationFront.interactive=!1):(this.buttonMode=!1,this.interactive=!1),this.compoChangeGun.show(this.compoGun.type)),this.disposeCompoToolTipGun()}updateGuild(e){e.factionID&&(this.faction.visible=!0,this.faction.updateInfoGuild(e,this.basePosition)),e.moreInfo&&(this.vipGem&&this.vipGem.updateVipGem(e.moreInfo),this.lblNickName.style.fill=Utilities.formatTextByVip(e.moreInfo))}_updateStyleTextName(e){const t=(e=+e||0)/5>5?5:e/5;this.lblNickName.style.fill=Utilities.formatTextByVip(Math.ceil(t)),this.lblNickName.style.fillGradientType=PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,this.lblNickName.style.stroke=0,this.lblNickName.style.strokeThickness=2}onHideCompoChangeGun(){this.compoChangeGun&&(this.compoChangeGun.hide(),PreLoaderConfig.IsShowNewGun?(this.baseStationFront.buttonMode=!0,this.baseStationFront.interactive=!0):(this.buttonMode=!0,this.interactive=!0))}callBackChoiceGun(e){AppInfo.preLoader.stage.mouseclick=null,this.onHideCompoChangeGun(),this.dragonCollectBullet.visible=107===e,AppInfo.gameMovie.gameBoard.inFishArea&&e>100?this.changeGun(0):this.changeGun(e)}hideCompoChangeGun(){this.compoChangeGun&&this.compoChangeGun.visible&&this.onHideCompoChangeGun()}changeCoinStyle(e=16580352){this.lblCoin.style.fill=e}disposeCompoToolTipGun(){null!==this.compoToolTipGun&&(this.compoToolTipGun.dispose(),this.compoToolTipGun=null)}setPosition(e){switch(e){case 0:this._pos0();break;case 1:this._pos1();break;case 2:this._pos2();break;case 3:this._pos3()}this.basePosition=e,this.rotation=this._baseRotation,this.compoGun.basePosition=this.basePosition,this.compoGun.movie.rotation=this.rotation,this.compoGun.rotation=-this.rotation,this.chatEmotion&&this.chatEmotion.setUpByBaseStation(e),this.vipGem&&this.addChildAt(this.vipGem,this.numChildren-1),this.faction&&this.addChildAt(this.faction,this.numChildren-1)}_pos0(){this._iconNapXu&&this._iconNapXu.position.set(262,-54),this._baseRotation=Utilities.toRad(0),this.compoGun.y+=15,this.txtTime&&(this.txtTime.y=-27,this.txtTime.x=35),this.emotion&&this.emotion.position.set(160,-120),this.chatEmotion&&this.chatEmotion.position.set(-130,-104),this.compoItem&&this.compoItem.position.set(-95,-106),this.vipGem&&this.vipGem.position.set(-175,-80),this._btnLockFish&&(this._btnLockFish.position.set(90,-70),this._btnCancelLockFish.position.set(this._btnLockFish.x,this._btnLockFish.y)),this.compoGunSkill&&(this.compoGunSkill.scale.set(.8),this.compoGunSkill.position.set(200,-37))}_pos1(){let e;for(this._baseRotation=Utilities.toRad(0),this.backgroundUserInfo.x=220,this.backgroundUserInfo.scale.x=-1,e=0;e<this.backgroundUserInfo.numChildren;e++)this.backgroundUserInfo.children[e].scale.x=-1;this.iconPeople.scale.x=1,this.iconCoin.scale.x=1,this.compoGun.y+=15,this.baseStationBack.x=2,this.txtTime&&(this.txtTime.y=-27,this.txtTime.x=265),this.level.x-=10,this.faction.x=80,this._iconNapXu&&this._iconNapXu.position.set(-314,-54),this.txtUseSkill&&(this.txtUseSkill.x=-160),this.vipGem&&this.vipGem.position.set(190,-80),this.compoItem&&this.compoItem.position.set(70,-108),this.emotion&&this.emotion.position.set(-165,-120),this.chatEmotion&&this.chatEmotion.position.set(130,-102),this._btnLockFish&&(this._btnLockFish.scale.x=-1,this._btnCancelLockFish.scale.x=-1,this._btnLockFish.position.set(-90,-70),this._btnCancelLockFish.position.set(this._btnLockFish.x,this._btnLockFish.y)),this.compoGunSkill&&(this.compoGunSkill.scale.set(.8),this.compoGunSkill.position.set(-190,-37))}_pos2(){this._baseRotation=Utilities.toRad(-180),this.txtPowerOfGun.rotation=this.lblNickName.rotation=this.lblCoin.rotation=this.iconCoin.rotation=this.iconPeople.rotation=this.txtLevel.rotation=this.emotion.rotation=this._baseRotation,this.iconCoin.scale.x=this.iconPeople.scale.x=-1,this.iconCoin.position.set(21,46),this.iconPeople.position.set(21,30),this.txtPowerOfGun.y=0,this.txtLevel.position.set(-1,3),this.compoGun.y+=15,this.txtTime&&this.txtTime.position.set(20,265),this.txtUseSkill&&(this.txtUseSkill.rotation=this._baseRotation,this.txtUseSkill.position.set(160,-105)),this._btnPlus&&(this._btnPlus.x=-91),this._btnMinus&&(this._btnMinus.x=36),this.emotion&&this.emotion.position.set(155,-130),this._iconNapXu&&(this._iconNapXu.rotation=Utilities.toRad(180),this._iconNapXu.position.set(320,0)),this.compoItem&&this.compoItem.position.set(-62,-55),this.vipGem&&(this.vipGem.position.set(-183,-80),this.vipGem.rotation=Math.PI),this.chatEmotion&&this.chatEmotion.position.set(-120,-62),this._btnLockFish&&(this._btnLockFish.position.set(90,-68),this._btnCancelLockFish.position.set(this._btnLockFish.x,this._btnLockFish.y)),this.compoGunSkill&&(this.compoGunSkill.scale.set(-.8),this.compoGunSkill.position.set(200,-37))}_pos3(){let e;for(this._baseRotation=Utilities.toRad(-180),this.txtPowerOfGun.rotation=this.lblNickName.rotation=this.lblCoin.rotation=this.iconCoin.rotation=this.iconPeople.rotation=this.txtLevel.rotation=this.emotion.rotation=this._baseRotation,this.backgroundUserInfo.scale.x=-1,e=0;e<this.backgroundUserInfo.numChildren;e++)this.backgroundUserInfo.children[e].scale.x=-1;this.backgroundUserInfo.x=220,this.iconCoin.position.set(21,46),this.iconPeople.position.set(21,30),this.txtPowerOfGun.y=0,this.txtLevel.position.set(-1,3),this.compoGun.y+=15,this.txtTime&&(this.txtTime.y=20,this.txtTime.x=35,this.txtTime.position.set(35,20)),this.faction.x=80,this.txtUseSkill&&(this.txtUseSkill.rotation=this._baseRotation,this.txtUseSkill.position.set(-160,-105)),this._btnPlus&&(this._btnPlus.x=-91),this._btnMinus&&(this._btnMinus.x=36),this.compoItem&&this.compoItem.position.set(122,-57),this.emotion&&this.emotion.position.set(-158,-125),this._iconNapXu&&(this._iconNapXu.rotation=Utilities.toRad(180),this._iconNapXu.position.set(-271,0)),this.vipGem&&(this.vipGem.position.set(185,-80),this.vipGem.rotation=Math.PI),this.chatEmotion&&this.chatEmotion.position.set(160,-62),this._btnLockFish&&(this._btnLockFish.position.set(-180,-70),this._btnCancelLockFish.x=this._btnLockFish.x,this._btnCancelLockFish.y=this._btnLockFish.y),this.compoGunSkill&&(this.compoGunSkill.scale.set(-.8),this.compoGunSkill.position.set(-220,-37))}fireAtPoint(e,t,i){let s;s="number"==typeof e&&"number"==typeof t?{x:e,y:t}:e;const o=Utilities.Number.angleRadBetweenTwoPoint(this.compoGun.movie.getGlobalPosition(),s);o<=0&&Math.PI,this._tweenSpinnerByAngle(o+Math.PI/2);let n=null;if(n=AppInfo.gameMovie.gameBoard.fishLightning?this.compoGun.lightningBullet:this.compoGun.fireAtPoint(e,t,i),null!=n)return this.compoGun.rotation=-this.rotation,this.compoGun.lockFishID=i,AppInfo.preLoader.soundController.playGunFireSound(),n}calculateBezier(e,{x:t,y:i}){let s,o,n,a,h,l,r,p;s=e.x,h=e.y,a=t,p=i;const d=Math.round(Math.sqrt(e.x**2+e.y**2)),c=Utilities.Number.angleRadBetweenTwoPoint(s,h,a,p)+Math.PI;a=s-d*Math.cos(c),p=h-d*Math.sin(c);const u=Utilities.Number.randRange(-1,1),m=.1*Utilities.Number.randRange(-10,1),f=.1*Utilities.Number.randRange(1,10),g=Utilities.Number.randRange(-1e3,1e3);o=(s+a)/2-g*u*Math.cos(m),l=(h+p)/2-g*u*Math.sin(0),n=(s+a)/2+g*u*Math.cos(f),r=(h+p)/2+g*u*Math.sin(0);const I=[{x:s,y:h},{x:o,y:l},{x:n,y:r},{x:a,y:p}],y=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.LightDot);y.anchor.set(.5),AppInfo.gameMovie.layerEffect.addChild(y),y.position.set(s,h),TweenMax.to(y,d/500,{bezier:{type:"cubic",curviness:1,values:I},ease:Linear.easeNone})}fireAtAngle(e,t,i,s){const o=this.compoGun.fireAtAngle(e,t,i,s);return this.compoGun.rotation=-this.rotation,this.compoGun.lockFishID=t,this._tweenSpinnerByAngle(e+Math.PI/2),AppInfo.preLoader.soundController.playGunFireEnemySound(),o}rotateToAngle(e,t,i){this.compoGun.rotateToAngle(e,t,i),this.compoGun.rotation=-this.rotation}setCoin(e,t){this.setCoinComplete.notifyObservers(this.coin-e),void 0!==t&&null!=t||(t=!0),TweenMax.killTweensOf(this.animateCoin),t?(this._coin=e,TweenMax.to(this.animateCoin,.2,{coin:this._coin,onUpdate:this.onAnimateCoin.bind(this),onComplete:this.onAnimateCoinComplete.bind(this)})):(this.coin=e,this.animateCoin.coin=this._coin),AppInfo.gameMovie.gameBoard.isFightingBoss&&this.updateBlood(e)}onAnimateCoin(){this.lblCoin.text=Utilities.Coin(Math.floor(this.animateCoin.coin))}onAnimateCoinComplete(){TweenMax.killTweensOf(this.animateCoin),this.coin=this._coin}changeGunAfterUseSkill(e){"number"==typeof this.gunTypeBeforeUseSkill&&(this.compoItem?this.compoItem.usingItem&&!this.compoItem.isGunSkill(this.compoItem.currentType)?this.changeGun(this.compoItem.typeCurrentGun,e):this.compoItem.usingItem&&this.compoItem&&this.compoItem.isGunSkill(this.compoItem.currentType)?(this.compoItem.effectStopCD(),this.changeGun(this.compoItem.typePreviousGun,e)):this.changeGun(this.gunTypeBeforeUseSkill,e):this.changeGun(this.gunTypeBeforeUseSkill,e)),PreLoaderConfig.IsShowNewGun?(this.baseStationFront.interactive=!0,this.isMe&&(this._btnMinus.interactive=!0,this._btnPlus.interactive=!0)):(this.buttonMode=!0,this.interactive=!0,this.interactiveChildren=!0)}changeGun(e,t,i){if(this.txtPowerOfGun.visible=205!==e,this.compoGun.type!=e){if(void 0!==t&&null!=t||(t=!0),this.compoGunPrevious=this.compoGun,this._typeGunPrevious=this.compoGunPrevious.type,this.compoGun=new o.a(e,this.basePosition),e>100&&e<200&&PreLoaderConfig.IsShowNewGun){if(this.compoGun.power=this.compoGunPrevious.power,this.compoGunPrevious.type<100&&(this._indexCurrentSpecGun=this.compoGunPrevious.type),this.isMe)for(let t=0;t<AppInfo.MyInfo.ListBossGun.length;t++)e==AppInfo.MyInfo.ListBossGun[t].type&&(this.compoGun.countBullet=AppInfo.MyInfo.ListBossGun[t].bulletLeft)}else PreLoaderConfig.IsShowNewGun||(this._indexCurrentSpecGun=this.compoGunPrevious.type);if(e>200&&(this.compoGun.power=this.compoGunPrevious.power,this.areaCollistion&&(this.areaCollistion.visible=!0)),this.setTextPowerGun(this.compoGun.power),this.addChildAt(this.compoGun,this.getChildIndex(this.compoGunPrevious)),this.compoGun.basePosition=this.basePosition,this.compoGun.movie.rotation=this.rotation,this.compoGun.rotation=-this.rotation,this.compoGun.updateGuildTextPosition(),this.compoGun.isSkillGun&&(this.gunTypeBeforeUseSkill=this.compoGunPrevious.type),t)this.compoGun.y=C.POSITION_GUN_DEFAULT+this.compoGun.height,this.compoGun.type>100?(this.compoGun.y=C.POSITION_GUN_BOSS_DEFAULT+this.compoGun.height,TweenMax.to(this.compoGunPrevious,.1,{y:C.POSITION_GUN_BOSS_DEFAULT+this.compoGunPrevious.height,onComplete:this.onTweenPreviousGunOutComplete.bind(this)})):TweenMax.to(this.compoGunPrevious,.1,{y:C.POSITION_GUN_DEFAULT+this.compoGunPrevious.height,onComplete:this.onTweenPreviousGunOutComplete.bind(this)});else{this.isMe&&this.compoGun.isSkillGun&&this.compoGun.enableAutoRotateFollowMouse(),null!==this.compoGunPrevious&&(this.removeChild(this.compoGunPrevious),this.compoGunPrevious.dispose(),this.compoGunPrevious=null);let e=C.POSITION_GUN_DEFAULT;this.compoGun.type>100&&(e=C.POSITION_GUN_BOSS_DEFAULT),101==this.compoGun.type?e-=30:102==this.compoGun.type&&(e+=20),this.compoGun.y=e}AppInfo.gameMovie.gameBoard.validChangeCardPoint&&this.isMe&&this.playEffectValidChangeCardPoint(),AppInfo.preLoader.soundController.playChangeGunSound()}else this._typeGunPrevious=this.compoGun.type;this.compoGun.effectTime=i}onTweenPreviousGunOutComplete(){if(this.compoGunPrevious){this.removeChild(this.compoGunPrevious),this.compoGunPrevious.dispose(),this.compoGunPrevious=null;let e=C.POSITION_GUN_DEFAULT;this.compoGun.type>100&&(e=C.POSITION_GUN_BOSS_DEFAULT),101==this.compoGun.type?e-=30:102==this.compoGun.type&&(e+=20),TweenMax.killTweensOf(this.compoGun),TweenMax.to(this.compoGun,.1,{y:e,onComplete:this.onTweenCurrentGunInComplete.bind(this)})}}onTweenCurrentGunInComplete(){this.compoGun.swapStateIdleMovie(),this.compoGun.isSkillGun&&this.isMe&&this.compoGun.enableAutoRotateFollowMouse()}autoRotationGunFishLock(){this.compoGun.autoRotationGunFishLock(),this.compoGun.rotation=-this.rotation}updateTxtUseSkill(){this.txtUseSkill.text=this.timeUseSkill.counter-this.timeUseSkill.counterPass}onCompleteUseSkill(){if(this.stoptCountDownUseSkill(),this.gunSkillId===h.a.ID_MEDUSA||this.gunSkillId===h.a.ID_LIGHTING)this.resetSkill();else{const e=AppInfo.preLoader.getGlobalPositionMouse(),t=this.fireAtPoint(e.x,e.y);AppInfo.gameMovie.displayController.requestUserFire(t,e)}}onAutoFireFollowMouse(){var t=e.isMobilePage?AppInfo.preLoader.renderer.plugins.interaction.eventData.data.global:AppInfo.preLoader.renderer.plugins.interaction.mouse.global;PIXI.utils.isMobile.other.firefox&&(t=AppInfo.preLoader.renderer.plugins.interaction.mouse.global);t=AppInfo.preLoader.getGlobalPositionMouse();const i=this.fireAtPoint(t.x,t.y);AppInfo.gameMovie.displayController.requestUserFire(i,t)}startCountDownUseSkill(e){if(e===h.a.ID_MEDUSA||e===h.a.ID_LIGHTING){let t=-1;for(const i of this.compoGunSkill.listInfoSkillGun)if(i.id===e){t=i.timeEffect;break}-1===t&&(t=60),this.txtUseSkill.text=t,this.timeUseSkill.counter=t}else AppInfo.preLoader.globalCompoController.compoToast.addMessage(Utilities.String.formatString(PreLoaderConfig.MessagesConfig.NoticeTimeoutGunSkill,PreLoaderConfig.TimeoutGunSkill,PreLoaderConfig.TimeoutGunSkill)),this.usingSkill=!0,this.compoItem&&(this.compoItem.interactive=!1),this.txtUseSkill.text=PreLoaderConfig.TimeoutGunSkill,this.timeUseSkill.counter=PreLoaderConfig.TimeoutGunSkill;this.txtUseSkill.visible=!0,this.timeUseSkill.Start()}stoptCountDownUseSkill(){this.txtUseSkill.visible=!1,this.usingSkill=!1,this.compoGunSkill.isUseSkill=!1,this.compoItem&&(this.compoItem.interactive=!0),this.timeUseSkill.Stop()}StartCountDown(e){switch(this.timerReward&&this.StopCountDown(),e){case l.a.TYPE_FREE_GUN:this.freeGun.visible=!0,this.txtTime.text=AppInfo.gameMovie.gameBoard.timeFreeGun/1e3+"s",this.timerReward=new Utilities.Timer(1e3,AppInfo.gameMovie.gameBoard.timeFreeGun/1e3,this.updateTxtTimer.bind(this),this.onCompleteFreeGun.bind(this)),this.timerReward.Start(),AppInfo.gameMovie.gameBoard.freeGunflag=!0;break;case l.a.TYPE_FAST_BULLET:this.freeGun.visible=!0,this.txtTime.text=AppInfo.gameMovie.gameBoard.valueFastBulletReward/1e3+"s",this.timerReward=new Utilities.Timer(1e3,AppInfo.gameMovie.gameBoard.valueFastBulletReward/1e3,this.updateTxtTimer.bind(this),this.onCompleteFastGun.bind(this)),this.timerReward.Start(),AppInfo.gameMovie.gameBoard.fastGunFlag=!0,this.checkIsFastShoot();break;case l.a.TYPE_BULLET_X2:this.freeGun.visible=!0,this.txtTime.text=AppInfo.gameMovie.gameBoard.valueX2BulletReward/1e3+"s",this.timerReward=new Utilities.Timer(1e3,AppInfo.gameMovie.gameBoard.valueX2BulletReward/1e3,this.updateTxtTimer.bind(this),this.onCompleteX2Bullet.bind(this)),this.timerReward.Start()}AppInfo.gameMovie.displayController.checkChangeGunStatus(!1,this),this.interactive=!1,this.buttonMode=!1}checkIsFastShoot(){AppInfo.gameMovie.gameBoard.fastGunFlag?(PreLoaderConfig.TimeIntervalFireGun=AppInfo.gameMovie.gameBoard.oldIntervalFireGun/AppInfo.gameMovie.gameBoard.fastBulletValue,PreLoaderConfig.TimeSpaceBetween2Bullet=AppInfo.gameMovie.gameBoard.oldTimeSpaceBetween2Bullet/AppInfo.gameMovie.gameBoard.fastBulletValue):(PreLoaderConfig.TimeIntervalFireGun=AppInfo.gameMovie.gameBoard.oldIntervalFireGun,PreLoaderConfig.TimeSpaceBetween2Bullet=AppInfo.gameMovie.gameBoard.oldTimeSpaceBetween2Bullet),AppInfo.gameMovie.displayController.timerToFireGun.Interval=PreLoaderConfig.TimeIntervalFireGun}StopCountDown(){this.timerReward&&(this.timerReward.Stop(),this.timerReward=null),AppInfo.gameMovie.displayController.checkChangeGunStatus(!0,this),this.interactive=!0,this.buttonMode=!0,this.freeGun&&(this.freeGun.visible=!1)}onCompleteFreeGun(){this.StopCountDown(),AppInfo.gameMovie.gameBoard.freeGunflag=!1}onCompleteX2Bullet(){this.StopCountDown()}onCompleteFastGun(){this.StopCountDown(),AppInfo.gameMovie.gameBoard.fastGunFlag=!1,this.checkIsFastShoot()}updateTxtTimer(){this.txtTime.text=this.timerReward.counter-this.timerReward.counterPass+"s"}medusaCrowdControl(){if(AppInfo.GameInfo.tournamentRoom){if(null==this.baseStone&&(this.baseStone=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.BaseStone),this.baseStone.anchor.set(this.baseStationFront.anchor.x,this.baseStationFront.anchor.y),this.baseStone.position=this.baseStationFront.position),this.baseStationFront.texture=ResourceManager.Atlas.AtlasBattle.textures.baseGunStone,null==this.spinnerStone&&(this.spinnerStone=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.SpinnerStone),this.spinnerStone.anchor.set(this.spinner.anchor.x,this.spinner.anchor.y),this.spinnerStone.position=this.spinner.position),null==this.screwsStone){this.screwsStone=new PIXI.Container;t=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.ScrewStone);(e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.ScrewStone)).x=143,this.screwsStone.addChild(t,e),this.screwsStone.position=this.screws.position}this.baseStone.visible=!0,this.spinnerStone.visible=!0,this.screwsStone.visible=!0,this.baseStone.alpha=0,this.spinnerStone.alpha=0,this.screwsStone.alpha=0,TweenMax.killTweensOf(this.baseStone),TweenMax.to([this.baseStone,this.spinnerStone,this.screwsStone],.5,{alpha:1,yoyo:!0,repeat:4,onComplete:()=>{this.spinner.visible=!1}}),this.spinner.parent.addChildAt(this.spinnerStone,this.spinner.parent.getChildIndex(this.spinner)+1),this.screws.parent.addChildAt(this.screwsStone,this.screws.parent.getChildIndex(this.screws)+1),this.medusaCC=!0,this.startMedusaCountDown()}else{if(null==this.baseStone&&(this.baseStone=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.BaseStone),this.baseStone.anchor.set(this.baseStationFront.anchor.x,this.baseStationFront.anchor.y),this.baseStone.position=this.baseStationFront.position),null==this.spinnerStone&&(this.spinnerStone=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.SpinnerStone),this.spinnerStone.anchor.set(this.spinner.anchor.x,this.spinner.anchor.y),this.spinnerStone.position=this.spinner.position),null==this.screwsStone){this.screwsStone=new PIXI.Container;var e,t=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.ScrewStone);(e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.ScrewStone)).x=143,this.screwsStone.addChild(t,e),this.screwsStone.position=this.screws.position}this.baseStone.visible=!0,this.spinnerStone.visible=!0,this.screwsStone.visible=!0,this.baseStone.alpha=0,this.spinnerStone.alpha=0,this.screwsStone.alpha=0,TweenMax.killTweensOf(this.baseStone),TweenMax.to([this.baseStone,this.spinnerStone,this.screwsStone],.5,{alpha:1,yoyo:!0,repeat:4,onComplete:()=>{this.spinner.visible=!1}}),this.baseStationFront.parent.addChildAt(this.baseStone,this.baseStationFront.parent.getChildIndex(this.baseStationFront)+1),this.spinner.parent.addChildAt(this.spinnerStone,this.spinner.parent.getChildIndex(this.spinner)+1),this.screws.parent.addChildAt(this.screwsStone,this.screws.parent.getChildIndex(this.screws)+1),this.medusaCC=!0,this.startMedusaCountDown()}}startMedusaCountDown(){this.timerToFrezzeGun=new Utilities.Timer(1e3,10,this.onUpdateFrezzeGun.bind(this),this.stopMedusaCountDown.bind(this)),this.timerToFrezzeGun.Start(),this.isMe&&(AppInfo.gameMovie.gameBoard.lockFish?AppInfo.gameMovie.gameBoard.lockFish.unLock():AppInfo.gameMovie.displayController.onUnreadyLockFish(),this._btnLockFish.visible=!1,this._btnCancelLockFish.visible=!1)}onUpdateFrezzeGun(){}stopMedusaCountDown(){this.timerToFrezzeGun.Stop(),this.medusaCC=!1,this.spinner.visible=!0,this.isMe&&(this._btnLockFish.interactive=!0,this._btnLockFish.visible=!0),TweenMax.killTweensOf(this.baseStone),TweenMax.killTweensOf(this.spinnerStone),TweenMax.killTweensOf(this.screwsStone),this.baseStone&&this.spinnerStone&&this.screwsStone&&TweenMax.to([this.baseStone,this.spinnerStone,this.screwsStone],2,{alpha:0,ease:Bounce.easeOut,onComplete:()=>{this.baseStone.visible=!1,this.spinnerStone.visible=!1,this.screwsStone.visible=!1,ResourceManager.Atlas.AtlasBattle&&(this.baseStationFront.texture=ResourceManager.Atlas.AtlasBattle.textures.baseGun)}})}setTextPowerGun(e){parseInt(e)<100?this.txtPowerOfGun.style.fontSize=24:parseInt(e)<1e3?this.txtPowerOfGun.style.fontSize=20:parseInt(e)<1e4?this.txtPowerOfGun.style.fontSize=18:this.txtPowerOfGun.style.fontSize=16,this.txtPowerOfGun.text=e,Math.floor(this.txtPowerOfGun.width)%2!=0&&(this.txtPowerOfGun.width=Math.floor(this.txtPowerOfGun.width)+1)}_tweenSpinnerByAngle(e){this.medusaCC||(TweenMax.killTweensOf(this.spinner),TweenMax.to(this.spinner,.2,{rotation:e,ease:Circ.easeOut}))}activeSkill(e,t){t&&"function"==typeof t&&(this.compoGunSkill.callBackCompleteEffectSkill=t),this.compoGunSkill.activeSkill(e)}playEffectValidChangeCardPoint(){TweenMax.killTweensOf(this.compoGun.movie),TweenMax.killTweensOf(this.iconCoin),this.compoGun.movie.tint=16777215,this.iconCoin.tint=16777215,TweenMax.to([this.compoGun.movie,this.iconCoin],.2,{tint:16711680,yoyo:!0,repeat:-1})}stopEffectValidChangeCardPoint(){TweenMax.killTweensOf(this.compoGun.movie),TweenMax.killTweensOf(this.iconCoin),this.compoGun.movie.tint=16777215,this.iconCoin.tint=16777215}initObjGem(){null===this.gem&&(this.gem=new d.a,this.addChild(this.gem),this.isMe?(this.gem.initEvent(),0==this.basePosition||2==this.basePosition?(this.gem.x=215,this.gem.y=-13,2==this.basePosition&&this.gem.setDown()):1!=this.basePosition&&3!=this.basePosition||(this.gem.x=-285,this.gem.y=-13,3==this.basePosition&&this.gem.setDown())):0==this.basePosition||2==this.basePosition?(this.gem.x=100,this.gem.y=-13,2==this.basePosition&&this.gem.setDown()):1!=this.basePosition&&3!=this.basePosition||(this.gem.x=-190,this.gem.y=-13,3==this.basePosition&&this.gem.setDown()))}initTicketGame(){null===this.ticketGame&&(this.ticketGame=new TicketGame,this.addChildAt(this.ticketGame,0),this.ticketGame.setUpForPosition(this.isMe,this.basePosition))}initCompoCollectMiniGame(e,t,i){null===this.compoCollectMiniGame&&(this.compoCollectMiniGame=new c.a,AppInfo.gameMovie.layerEffect.addChildAt(this.compoCollectMiniGame,0),this.basePosition>1?this.compoCollectMiniGame.position.set(AppInfo.appRealWidth/2,698):this.compoCollectMiniGame.position.set(AppInfo.appRealWidth/2,this.compoCollectMiniGame.height/2-2),this.compoCollectMiniGame.oriX=this.compoCollectMiniGame.x,this.compoCollectMiniGame.oriY=this.compoCollectMiniGame.y,this.compoCollectMiniGame.updateValueCollect(e,t,i))}showEffectBonusGame(e){this.compoCollectMiniGame&&this.compoCollectMiniGame.showEffect(e)}useItem(e,t,i,s,o,n,a,h){this.compoItem&&this.compoItem.startUserItem(s,i,t,n,o,e,h)}updateItem(e){this.compoItem&&this.compoItem.updateItemInfo(e)}showEmotion(e){e=+e,TweenMax.killTweensOf(this.emotion),void 0===ResourceManager.Atlas["AtlasEmotion"+e]?this.loadAtlasByName.loadResourceGameApp("AtlasEmotion"+e,this.showEmotion.bind(this,e)):(this.emotion.visible=!0,TweenMax.to(this.emotion,PreLoaderConfig.CompoChat.timeShowEmotion,{onComplete:this.hideEmotion.bind(this)}),this.emotion.textures=ResourceManager.Atlas["AtlasEmotion"+e].textures["emotion"+e+"MC"],this.emotion.gotoAndPlay(0))}autoRotationGunLightning(){this.compoGun.autoRotationGunLightning()}hideEmotion(){TweenMax.killTweensOf(this.emotion),this.emotion.gotoAndStop(0),this.emotion.visible=!1}removeTarget(e){this.compoItem&&this.compoItem.removeTarget(e)}bossAppearBattleBoss(){this.backgroundUserInfo.visible=!1,this.backgroundUserInfo.x=-10,this.createHealthBarBattleBoss(),this.setCoinComplete.clear()}_initBoxCoin(){this._boxCoinRealRoomBoss=new PIXI.extras.BitmapText(Utilities.Coin(this._coin),{font:"20px "+PreLoaderConfig.FontResource.CoinWinOther.name}),this._bgBoxCoin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.boxCoinBossRoom),this.icoinCoinRoomBoss=new PIXI.Sprite(ResourceManager.Atlas.AtlasBanCaGeneral.textures.iconCoinAvatarSilver),this._boxCoinRealRoomBoss.anchor.set(.5),this._bgBoxCoin.anchor.set(.5),this.icoinCoinRoomBoss.anchor.set(.5),this.addChild(this._bgBoxCoin),this._bgBoxCoin.addChild(this.icoinCoinRoomBoss,this._boxCoinRealRoomBoss),this._bgBoxCoin.position.set(-200,-20),this.icoinCoinRoomBoss.position.set(-60,-2),this._boxCoinRealRoomBoss.position.set(10,-3)}changeStylecoinWin(){this._boxCoinRealRoomBoss.font.name=PreLoaderConfig.FontResource.CoinWin.name,this.icoinCoinRoomBoss.texture=ResourceManager.Atlas.AtlasBanCaGeneral.textures.iconCoinAvatar,this._boxCoinRealRoomBoss.updateText(),Utilities.tweenCoin(this._boxCoinRealRoomBoss,this.realCoin,4)}createHealthBarBattleBoss(){if(this._initBoxCoin(),this._coin=this.totalBlood,!this.healthBarContainer){this.healthBarContainer=new PIXI.Container,this.addChild(this.healthBarContainer),this.bgHealth=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBoss.textures.BgProgressHealth),this.healthBarContainer.addChild(this.bgHealth);const e=new PIXI.Container;this.healthBarContainer.addChild(e),this.barHealth=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBoss.textures.ProgressBarHealth),this.maskBarHealth=PIXI.Graphics.Rectangle(0,0,this.barHealth.width,this.barHealth.height),this.barHealth.mask=this.maskBarHealth,e.addChild(this.maskBarHealth),e.addChild(this.barHealth),this.healthBarContainer.x=-this.healthBarContainer.width/2,this.healthBarContainer.y=2-this.healthBarContainer.height,this.panelPower=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.PanelPower),this.panelPower.anchor.set(.5),this.panelPower.position.set(95,22),this.txtPowerOfGun.parent.addChild(this.panelPower),this.txtPowerOfGun.position.copy(this.panelPower.position),this.txtPowerOfGun.parent.swapChildren(this.panelPower,this.txtPowerOfGun),this.txtBlood=new PIXI.Text(Utilities.Coin(this.totalBlood),{fontSize:14,fontWeight:"bold",fill:16777215}),this.txtBlood.anchor.set(.5),this.txtBlood.position.set(this.bgHealth.width/2,this.bgHealth.height/2),this.healthBarContainer.addChild(this.txtBlood)}}switchModeBattleBoss(e,t){this.setPosition(0),AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation=0,this.totalBlood=t,this.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight),this.chatEmotion&&(this.chatEmotion.visible=!1),this.compoGunSkill.visible=!1,this._btnLockFish.visible=!1,this.baseStationFront&&(this.baseStationFront.buttonMode=!1,this.baseStationFront.interactive=!1),this._baseTopOld&&(this._baseTopOld.buttonMode=!1,this._baseTopOld.interactive=!1),this.vipGem&&(this.vipGem.visible=!1),this.compoItem&&(this.compoItem.visible=!1),this.compoChangeGun&&this.compoChangeGun.hide(),this.visible=!1}updateBlood(e){this._coin=e;let t=e/this.totalBlood;t>1&&(t=1),this.maskBarHealth.width=this.barHealth.width*t,this.txtBlood.text=Utilities.Coin(e)}updateRealCoin(e){this.realCoin=e}turnedStone(e){void 0===this.stoneFilter&&(this.stoneFilter=new PIXI.filters.ColorMatrixFilter,this.stoneFilter.blackAndWhite()),null===this.filters&&(this.filters=[this.stoneFilter]),void 0===this._tweenUnturnedStone?this._tweenUnturnedStone=TweenMax.to(this,e,{onComplete:this.unturnedStone,onCompleteScope:this}):this._tweenUnturnedStone.restart(),AppInfo.gameMovie.freeze(),AppInfo.gameMovie.soundController.playStone()}unturnedStone(){this.filters=null,AppInfo.gameMovie.unfreeze()}freeze(e){if(null===this.iceContainer){this.iceContainer=new PIXI.Container,this.iceContainer.position.set(10,25),this.addChild(this.iceContainer);const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBossMedusa.textures.Ice);e.anchor.set(.5,1),e.mask=PIXI.Graphics.Rectangle(-e.width/2,0,e.width,1),this.iceContainer.addChild(e.mask),this.iceContainer.addChild(e)}const t=this.iceContainer.children[0],i=this.iceContainer.children[1];void 0===this._tweenFreeze?this._tweenFreeze=TweenMax.to(t,.5,{height:-i.height,ease:SteppedEase.config(10),onReverseComplete(){this.iceContainer.visible=!1,AppInfo.gameMovie.unfreeze()},onReverseCompleteScope:this}):this._tweenFreeze.restart(),void 0===this._tweenUnfreeze?this._tweenUnfreeze=TweenMax.to(this,e-this._tweenFreeze.duration(),{onComplete:this.unfreeze,onCompleteScope:this}):this._tweenUnfreeze.restart(),this.iceContainer.visible=!0,AppInfo.gameMovie.freeze(),AppInfo.gameMovie.soundController.playFrozen()}stun(e){this.compoGun.stun(),void 0===this._tweenStun?this._tweenStun=TweenMax.to(this.compoGun,.5,{onReverseComplete(){AppInfo.gameMovie.unfreeze()},onReverseCompleteScope:this}):this._tweenStun.restart(),AppInfo.gameMovie.strong(),void 0===this._tweenUnStun?this._tweenUnStun=TweenMax.to(this,e-this._tweenStun.duration(),{onComplete:this.unStun,onCompleteScope:this}):this._tweenUnStun.restart(),AppInfo.gameMovie.freeze(),AppInfo.gameMovie.soundController.playFrozen()}unStun(){this._tweenStun&&this._tweenStun.reverse(),this.compoGun.releaseStuckEffect(0)}unfreeze(){this._tweenFreeze&&this._tweenFreeze.reverse()}resetSkill(){this.gunSkillId===h.a.ID_MEDUSA&&this._skillMedusa.hide(),this.gunSkillId===h.a.ID_LIGHTING&&this.changeGunAfterUseSkill(!0),this.gunSkillId=-1,this.bulletIdSkillMedusa=0,this.compoGunSkill&&this.compoGunSkill.resetSkill()}updateInfoSkillBoss(e){this.compoGunSkill.getInfoSkill(e)}endEffectSkill(e,t,i){this.resetSkill(),this.isActivatingSkill=!1}get isMe(){return this._isMe}set isMe(e){this._isMe!=e&&(this._isMe=e)}get nickName(){return this._nickName}set nickName(e){this._nickName=e,e.length>11&&(e=e.substr(0,9)+"..."),this.lblNickName.text=e}get coin(){return this._coin}set coin(e){this._coin=e,this.lblCoin.text=Utilities.Coin(e)}set isActivatingSkill(e){this._isActivatingSkill=e}get isActivatingSkill(){return this._isActivatingSkill}}C.POSITION_GUN_DEFAULT=-15,C.POSITION_GUN_BOSS_DEFAULT=10,t.a=C}).call(this,i(3))},function(e,t,i){"use strict";var s=i(6),o=i(73),n=i(70);class a extends s.a{constructor(e,t){super(),this.movie=null,this._nodeTree=null,this.type=207,this.maskItem=null,this._onTrigger=null,this.id=e,this.isMe=t||!1,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun205.textures.bullet205fire),this._explode=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun205.textures.bullet205explode),this.movie.gotoAndPlay(0),this._explode.gotoAndPlay(0),this.movie.animationSpeed=.5,this._explode.animationSpeed=1,this.movie.anchor.set(.5,1),this._explode.anchor.set(.5),this._explode.scale.set(.8),this.addChild(this.movie),this.addChild(this._explode),this.maskItem=new PIXI.Graphics.Rectangle(0,0,this.movie.width,this.movie.height),this.maskItem.position.set(-this.movie.width/2,0),this.movie.mask=this.maskItem,this.addChild(this.movie.mask),this.addCollision(),this._tweenCheck=new TweenMax.to(this._explode,.1,{repeat:-1,onUpdate:this._updateCollision,onUpdateScope:this}),this._tweenSendRequest=new TweenMax.to(this._explode,.2,{repeat:-1,onRepeat:this._sendRequest,onRepeatScope:this}))}_sendRequest(){if(this.isMe){const e={basePosition:AppInfo.gameMovie.displayController.myBaseStation.basePosition,skill:!0,id:this.id,angle:0,skillSkind:7,power:AppInfo.gameMovie.displayController.myBaseStation.compoGun.power};AppInfo.preLoader.requestController.userUseSkill(e.basePosition,e.id,e.angle,e.skillSkind,0,0,e.power),AppInfo.gameMovie.displayController.requestSkillCatchFish(e,[this.currentTarget.id],0)}}run(e,t){}play(e){this.visible=!0,this._tweenShowHide?this._tweenShowHide.play(0):this._tweenShowHide=new TweenMax.to(this._explode,.5,{onComplete:this.onCompletePlay,onCompleteScope:this})}onCompletePlay(){this.visible=!1,this._tweenSendRequest.pause()}_startCheck(){this._tweenCheck.play()}_stopCheck(){this._tweenCheck.pause()}_updateCollision(){if(!this._onTrigger){const e=[220,20,260,20,260,1400,220,1400];this._nodeTree.updatePoints(e),this._stopCheck(),this._tweenSendRequest.pause(),this._explode.visible=!1,this.maskItem.y=-this.movie.height}this._onTrigger=!1}onTriggerCollide({target:e},t){TweenMax.killTweensOf(this);const i=Utilities.Number.distanceBetweenTwoPoint(this.x,this.y,e.x,e.y),s=[220,1400-i,260,1400-i,260,1400,220,1400];this._nodeTree.updatePoints(s),this._onTrigger=!0,this._explode.visible=!0,this._explode.y=-i,this.maskItem.y=-i,this.currentTarget=e,this._tweenCheck.isActive()||(this._startCheck(),this._tweenSendRequest.play())}onCompleteHitFish(){this.visible=!1}addCollision(){const e=o.a.getPointsArea(o.a.TYPE_AREA_COLLISION.BULLET,this.type);e.length>0&&(this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,e,n.a.TYPE_COLLISION.BULLET,this.movie))}releaseNode(){this._nodeTree&&this._nodeTree.release()}dispose(){super.dispose()}}t.a=a},function(e,t,i){"use strict";var s=i(6),o=i(71);class n extends s.a{constructor(){super(),this._bgProcessBar=null,this._processBar=null,this._iconComplete=null,this._headDragon=null,this._bodyDragon=null,this._tailDragon=null,this._tailDragon1=null,this._gemLevel1=null,this._gemLevel2=null,this._gemLevel3=null,this._hightlightLevel1=null,this._hightlightLevel2=null,this._hightlightLevel3=null,this._iconCurrentProcess=null,this.currentLevel=0,this._toolTip=null,this._particleCompleteFloor=null,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null===this._bgProcessBar&&(this._bgProcessBar=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.bgProcessBarDragon)),null===this._processBar&&(this._processBar=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.processBarDragon),this._maskProcessBar=PIXI.Graphics.Rectangle(0,0,this._processBar.width,this._processBar.height),this._processBar.mask=this._maskProcessBar,this._maskProcessBar.position.set(4,this._maskProcessBar.height+4),this._maskProcessBar.interactive=!1),null===this._headDragon&&(this._headDragon=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.collectDragon3Piece)),null===this._bodyDragon&&(this._bodyDragon=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.collectDragon2Piece)),null===this._tailDragon&&(this._tailDragon=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.collectDragon1Piece)),null===this._tailDragon1&&(this._tailDragon1=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.collectDragon1Piece)),null===this._gemLevel1&&(this._gemLevel1=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.gemCollectDragon)),null===this._hightlightLevel1&&(this._hightlightLevel1=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.gemHighLight),this._hightlightLevel1.anchor.set(.5)),null===this._gemLevel2&&(this._gemLevel2=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.gemCollectDragon)),null===this._hightlightLevel2&&(this._hightlightLevel2=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.gemHighLight),this._hightlightLevel2.anchor.set(.5)),null===this._gemLevel3&&(this._gemLevel3=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.gemCollectDragon)),null===this._hightlightLevel3&&(this._hightlightLevel3=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.gemHighLight),this._hightlightLevel3.anchor.set(.5)),null===this._iconCurrentProcess&&(this._iconCurrentProcess=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.lightProgress),this._iconCurrentProcess.anchor.set(.5)),null===this._toolTip){const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.Floor1Dragongun),t=new PIXI.Graphics.RoundedRectComplex(0,0,e.width+20,e.height+20,15,15,15,15,1973552,.5,2,3381469,1);t.addChild(e),t.oriX=t.width,t.oriY=t.height,e.position.set(10,10),t.pivot.y=t.oriY,this.addChild(t),this._toolTip=new TimelineMax,t.scale.set(0),t.x=40,this._toolTip.to(t,.1,{startAt:{scaleX:0,scaleY:0},scaleX:1,scaleY:1,ease:Back.easeOut}),t.visible=!1,this._toolTip.bgImage=t,this._toolTip.imageMain=e}this._processBar.position.set(4,4),this._headDragon.position.set(4,-10),this._bodyDragon.position.set(-5,60),this._tailDragon.position.set(-4,120),this._tailDragon1.position.set(-4,190),this._headDragon.interactive=this._bodyDragon.interactive=this._tailDragon.interactive=this._tailDragon1.interactive=!1,this._hightlightLevel1.interactive=this._hightlightLevel2.interactive=this._hightlightLevel3.interactive=!1;const e=this._gemLevel1.width/2,t=this._gemLevel1.height/2;this._gemLevel1.position.set(3,4),this._hightlightLevel1.position.set(3+e,4+t),this._gemLevel2.position.set(4,80),this._hightlightLevel2.position.set(4+e,80+t),this._gemLevel3.position.set(3,153),this._hightlightLevel3.position.set(3+e,153+t),this._iconCurrentProcess.x=15,this._iconCurrentProcess.y=this._maskProcessBar.height+4,this.addChild(this._bgProcessBar),this.addChild(this._processBar),this.addChild(this._maskProcessBar),this.addChild(this._gemLevel1),this.addChild(this._hightlightLevel1),this.addChild(this._gemLevel2),this.addChild(this._hightlightLevel2),this.addChild(this._gemLevel3),this.addChild(this._hightlightLevel3),this._gemLevel1.interactive=!0,this._gemLevel2.interactive=!0,this._gemLevel3.interactive=!0,this._gemLevel1.buttonMode=!0,this._gemLevel2.buttonMode=!0,this._gemLevel3.buttonMode=!0,this._gemLevel1.name="gem1",this._gemLevel2.name="gem2",this._gemLevel3.name="gem3",this._gemLevel1.mouseover=this.onHoverGem.bind(this),this._gemLevel2.mouseover=this.onHoverGem.bind(this),this._gemLevel3.mouseover=this.onHoverGem.bind(this),this._gemLevel1.mouseout=this.onOutGem.bind(this),this._gemLevel2.mouseout=this.onOutGem.bind(this),this._gemLevel3.mouseout=this.onOutGem.bind(this),this.addChild(this._headDragon),this.addChild(this._bodyDragon),this.addChild(this._tailDragon),this.addChild(this._tailDragon1),this.addChild(this._iconCurrentProcess),this._hightlightLevel3.visible=!1,this._hightlightLevel1.visible=!1,this._hightlightLevel2.visible=!1,null===this._particleCompleteFloor&&(this._particleCompleteFloor=new o.a(n.ParticleBurst),this._particleCompleteFloor.autoDispose=!1,this.addChild(this._particleCompleteFloor),this._particleCompleteFloor.playParticle(0,0)),TweenMax.to(this._iconCurrentProcess,.5,{alpha:0,yoyo:!0,repeat:-1})}}onHoverGem({currentTarget:e}){switch(this._toolTip.play(),this._toolTip.bgImage.visible=!0,e.name){case"gem1":this._toolTip.imageMain.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures.Floor3Dragongun,this._toolTip.bgImage.y=e.y;break;case"gem2":this._toolTip.imageMain.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures.Floor2Dragongun,this._toolTip.bgImage.y=e.y;break;case"gem3":this._toolTip.imageMain.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures.Floor1Dragongun,this._toolTip.bgImage.y=e.y}}onOutGem(e){this._toolTip.reverse()}setUpPosition(e){switch(e){case 0:this.position.set(-220,-310);break;case 1:this._toolTip.bgImage.pivot.x=this._toolTip.bgImage.oriX,this._toolTip.bgImage.x=-30,this.position.set(190,-310);break;case 2:this._toolTip.bgImage.pivot.x=this._toolTip.bgImage.oriX,this._toolTip.bgImage.pivot.y=0,this._toolTip.bgImage.x=-20,this.position.set(-190,-100),this.rotation=Math.PI;break;case 3:this._toolTip.bgImage.pivot.x=0,this._toolTip.bgImage.pivot.y=0,this.position.set(210,-100),this.rotation=Math.PI}}updateProcessBar(e,t,i,s){switch(this.currentLevel=e,e){case 0:this._updateProcessBarFirstSkill(t,i,s);break;case 1:this._updateProcessBarSecondSkill(t,i,s);break;case 2:this._updateProcessBarThirdSkill(t,i,s)}}_updateProcessBarFirstSkill(e,t,i){const s=e/t;if(i&&0===this.currentLevel)return this._hightlightLevel3.visible=!0,this._hightlightLevel1.visible=!0,this._hightlightLevel2.visible=!0,this._particleCompleteFloor.playParticle(this._hightlightLevel1.x,this._hightlightLevel1.y),void TweenMax.to([this._maskProcessBar,this._iconCurrentProcess],.5,{y:this._maskProcessBar.height+4-162-80,ease:Linear.easeNone});this._hightlightLevel3.visible=!1,this._hightlightLevel1.visible=!1,this._hightlightLevel2.visible=!1,TweenMax.to([this._maskProcessBar,this._iconCurrentProcess],.5,{y:this._maskProcessBar.height+4-92*s,ease:Linear.easeNone})}_updateProcessBarSecondSkill(e,t,i){const s=(e=e)/(t=t);0==e&&this._particleCompleteFloor.playParticle(this._hightlightLevel3.x,this._hightlightLevel3.y),this._hightlightLevel3.visible=!0,TweenMax.to([this._maskProcessBar,this._iconCurrentProcess],.5,{y:this._maskProcessBar.height+4-92-75*s,ease:Linear.easeNone})}_updateProcessBarThirdSkill(e,t,i){const s=(e=e)/(t=t);0==e&&this._particleCompleteFloor.playParticle(this._hightlightLevel2.x,this._hightlightLevel2.y),this._hightlightLevel3.visible=!0,this._hightlightLevel2.visible=!0,TweenMax.to([this._maskProcessBar,this._iconCurrentProcess],.5,{y:this._maskProcessBar.height+4-167-80*s,ease:Linear.easeNone})}dispose(){super.dispose()}}n.ParticleBurst={art:[{framerate:20,loop:!0,textures:["lightProgress.png"]},{framerate:20,loop:!0,textures:["lightProgress.png"]}],alpha:{start:1,end:1},scale:{start:.5,end:.5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:100,end:10,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:350},lifetime:{min:1,max:1},blendMode:"normal",frequency:.1,emitterLifetime:1,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"burst",particlesPerWave:10,particleSpacing:36,angleStart:0},t.a=n},function(e,t,i){"use strict";const s=PIXI.extras.AnimatedSprite;t.a=class extends s{constructor(){super(ResourceManager.Atlas.AtlasEffects.textures.fishstun),this.anchor.set(.5),this.animationSpeed=.2,this.loop=!0,this.visible=!1}startEffectStun(){this.visible=!0,this.gotoAndPlay(0)}dispose(){this.gotoAndStop(0),this.parent&&this.parent.removeChild(this),this.destroy()}}},function(e,t,i){"use strict";var s=i(6),o=i(74);class n extends s.a{constructor(e,t,i,s,o){super(e,t,i,s),this.particleRibbon=null,this.particleStar=null,this.particleConfeti=null,this.textReward=null,this._timerToFreeGun=null,this.compoBaseStation=null,this.txtTime=null,this.lightSpin=null,this.lightOut=null,this.lightZoom=null,this.rewardType=0,this.reward=null,this.compoBaseStation=o,this.rewardType=e,this.init(e,t,i,s)}init(e,t,i){if(super.init(),this._isDisposed){if(this._isDisposed=!1,this.lightSpin||(this.lightSpin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossMini.textures.lightSpin),this.lightSpin.anchor.set(.5),this.addChild(this.lightSpin)),this.lightZoom||(this.lightZoom=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossMini.textures.lightZoom),this.lightZoom.anchor.set(.5),this.lightZoom.scale.set(.1,.1),this.addChild(this.lightZoom)),this.lightOut||(this.lightOut=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossMini.textures.lightBig),this.lightOut.anchor.set(.5),this.addChild(this.lightOut)),this.particleConfeti=new o.a(ResourceManager.Atlas.AtlasBossMini.textures.confeti,PreLoaderConfig.ConfigParticleConfeti),this.particleStar=new o.a(ResourceManager.Atlas.AtlasBossMini.textures.star,PreLoaderConfig.ConfigParticleStarFly),this.particleRibbon=new o.a(ResourceManager.Atlas.AtlasBossMini.textures.ribbon,PreLoaderConfig.ConfigParticleRibbon),this.addChild(this.particleConfeti),this.addChild(this.particleStar),this.addChild(this.particleRibbon),null==this.reward){switch(this.reward=new PIXI.Sprite,this.rewardType){case 1:this.reward.texture=ResourceManager.Atlas.AtlasBossMini.textures.rewardCard[0],null==this.txtTime&&(this.txtTime=new PIXI.Text(Utilities.Coin(AppInfo.gameMovie.gameBoard.valueCardReward)+PreLoaderConfig.ListTextConfig.CurrencyUnit,{fontFamily:"Open Sans",fontSize:"70px",fill:16777215,stroke:0,strokeThickness:5}),this.txtTime.y=15,this.txtTime.anchor.set(.5,.5)),this.reward.addChild(this.txtTime),this.reward.name="card";break;case 2:this.reward.texture=ResourceManager.Atlas.AtlasBossMini.textures.rewardFreeGun,this.reward.name="freegun",null==this.txtTime&&(this.txtTime=new PIXI.Text(AppInfo.gameMovie.gameBoard.timeFreeGun/1e3+"S",{fontFamily:"Myriad Pro",fontSize:"70px",fontWeight:"Bold",fill:16774491}),this.txtTime.y=15,this.txtTime.anchor.set(.5,.5)),this.reward.addChild(this.txtTime);break;case 3:this.reward.texture=ResourceManager.Atlas.AtlasBossMini.textures.rewardFastBullet,this.reward.name="fastBullet",null==this.txtTime&&(this.txtTime=new PIXI.Text(AppInfo.gameMovie.gameBoard.valueFastBulletReward/1e3+"S",{fontFamily:"Open Sans",fontSize:"70px",fill:16774491,fontWeight:"Bold"}),this.txtTime.y=15,this.txtTime.anchor.set(.5,.5)),this.reward.addChild(this.txtTime);break;case 4:if(this.reward.texture=ResourceManager.Atlas.AtlasBossMini.textures.rewardBullet2x,this.reward.name="bulletX2",null==this.txtTime){this.txtTime=new PIXI.Text(AppInfo.gameMovie.gameBoard.valueX2BulletReward/1e3+"S",{fontFamily:"Open Sans",fontSize:"70px",fill:16774491,fontWeight:"Bold",stroke:0,strokeThickness:1}),this.txtTime.y=90,this.txtTime.anchor.set(.5,.5);var s=new PIXI.Text(PreLoaderConfig.languageConfig.key_x2_bullet,{fontFamily:"Open Sans",fontSize:"50px",fill:16777215,fontWeight:"Bold",stroke:0,strokeThickness:2});s.y=this.txtTime.y+this.txtTime.height/2+10,s.anchor.set(.5)}this.reward.addChild(this.txtTime),this.reward.addChild(s);break;case 5:this.reward.texture=ResourceManager.Atlas.AtlasBossMini.textures.rewardJackpot,this.reward.name="jackpot",null==this.txtTime&&(this.txtTime=new PIXI.Text(AppInfo.gameMovie.gameBoard.valueJactpotReward,{fontFamily:"Open Sans",fontSize:"70px",fill:16739328,stroke:4197120,strokeThickness:5}),this.txtTime.y=-50,this.txtTime.anchor.set(.5,.5)),this.reward.addChild(this.txtTime);break;case 6:this.reward.texture=ResourceManager.Atlas.AtlasBossMini.textures.rewardLuckySpin,this.reward.name="luckySpin",null==this.txtTime&&(this.txtTime=new PIXI.Text(AppInfo.gameMovie.gameBoard.valueLuckySpinReward,{fontFamily:"Open Sans",fontSize:"70px",fill:16739328,stroke:4197120,strokeThickness:5}),this.txtTime.y=-50,this.txtTime.anchor.set(.5,.5)),this.reward.addChild(this.txtTime)}this.reward.anchor.set(.5,.5),this.addChild(this.reward)}null==this.textReward&&(this.textReward=new PIXI.Text("",{fontFamily:"Tahoma",fontSize:"30px",fill:16777215,fontWeight:"bold",stroke:0,strokeThickness:5}),this.textReward.anchor.set(.5,.5),this.textReward.scale.set(0,0),this.textReward.visible=!1,this.addChild(this.textReward))}}effectShowReward(e,t){TweenMax.killTweensOf(this.reward),TweenMax.killTweensOf(this.lightSpin),TweenMax.killTweensOf(this.lightZoom);const i=this.getGlobalPosition(),s=i.x+10,o=i.y+55;let n=-120,a=50;if(o<0){a=0-o+this.reward.height/2}else if(o+this.reward.height/2+50>AppInfo.appRealHeight){const e=AppInfo.appRealHeight-o;a=e<0?e-this.reward.height/2:-100}if(s-this.reward.width/2-120<0){const e=0-s;n=e>0?e+this.reward.width/2:120}else if(s>AppInfo.appRealWidth){const e=AppInfo.appRealWidth-s;e<0&&(n=e-this.reward.width/2)}this.reward.scale.set(0,0),TweenMax.to(this.reward,.8,{ease:Back.easeOut.config(10),scaleX:1,scaleY:1,onComplete:this._onCompleteEffectShowReward.bind(this),onCompleteParams:[e,t,n,a]}),AppInfo.preLoader.soundController.playHopQuaMo(),this.checkTypeRewardTextWin(),this.textReward.scale.set(0,0),this.textReward.visible=!0,this.particleConfeti.playParticle(10,65),this.particleRibbon.playParticle(0,25),setTimeout(()=>{this.particleStar.playParticle(10,25)},50),TweenMax.to(this.lightSpin,2,{rotation:Utilities.toRad(359),repeat:-1,ease:Power0.easeNone}),TweenMax.to(this.lightSpin,.8,{scaleX:.6,scaleY:.6,yoyo:!0,repeat:-1,ease:Power0.easeNone}),TweenMax.to(this.lightZoom,1,{scaleX:.6,scaleY:.6,ease:Power0.easeNone}),TweenMax.to(this.lightOut,1.5,{scaleX:2,scaleY:2,alpha:.5,repeat:-1,yoyo:!0,ease:Power0.easeNone})}checkTypeRewardTextWin(){switch(this.rewardType){case 1:this.textReward.text=PreLoaderConfig.ListTextConfig.Card;break;case 2:this.textReward.text=PreLoaderConfig.ListTextConfig.FreeBullet;break;case 3:this.textReward.text=PreLoaderConfig.ListTextConfig.FastBullet;break;case 4:this.textReward.text=PreLoaderConfig.ListTextConfig.X2Bullet;break;case 5:this.textReward.text=Utilities.String.formatString(PreLoaderConfig.ListTextConfig.JackpotTurn,1);break;case 6:this.textReward.text=Utilities.String.formatString(PreLoaderConfig.ListTextConfig.LuckySpin,1)}}_onCompleteEffectShowReward(e,t,i,s){if(TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.textReward),TweenMax.killTweensOf(this.lightOut),TweenMax.killTweensOf(this.lightZoom),this.textReward.visible=!1,"freegun"==this.reward.name||"fastBullet"==this.reward.name||"bulletX2"==this.reward.name){let o=0,n=0;if(this.compoBaseStation){const e=this.compoBaseStation.name.replace("baseStation","");o=40,n=e>1?50:-50}TweenMax.to(this,.8,{x:e-i+o,y:t-s+n,delay:1.5,alpha:0,onComplete:this.onMoveToEndPointFreeGun.bind(this)})}else TweenMax.to(this,.8,{x:e-.1*i,y:t-.1*s,delay:1.5,scaleX:.1,scaleY:.1,onComplete:this.onMoveToEndPointComplete.bind(this)})}onMoveToEndPointFreeGun(){this.StartCountDown(),this.dispose()}StartCountDown(){}StopCountDown(){this.onMoveToEndPointComplete()}updateTxtTimer(){this.compoBaseStation&&(null==this.compoBaseStation.parent?this.dispose():this.txtTime.text=this.timerToFreeGun.counter-this.timerToFreeGun.counterPass+"s")}onCompleteFreeGun(){this.StopCountDown()}onMoveToEndPointComplete(){TweenMax.killTweensOf(this),this.reward.visible=!1,this.dispose()}dispose(){super.dispose(),TweenMax.killTweensOf(this),this.textReward&&(TweenMax.killTweensOf(this.textReward),this.removeChild(this.textReward),this.textReward.destroy(),this.textReward=null),this.timerToFreeGun&&this.timerToFreeGun.Stop(),this.reward&&(TweenMax.killTweensOf(this.reward),this.removeChild(this.reward),this.reward.destroy(),this.reward=null),this.lightOut&&(TweenMax.killTweensOf(this.lightOut),this.removeChild(this.lightOut),this.lightOut.destroy(),this.lightOut=null),this.lightZoom&&(TweenMax.killTweensOf(this.lightZoom),this.removeChild(this.lightZoom),this.lightZoom.destroy(),this.lightZoom=null),this.particleConfeti&&(this.particleConfeti.dispose(),this.particleConfeti=null),this.particleStar&&(this.particleStar.dispose(),this.particleStar=null),this.particleRibbon&&(this.particleRibbon.dispose(),this.particleRibbon=null),this.parent&&this.parent.removeChild(this),this.destroy()}}n.TYPE_FREE_GUN=2,n.TYPE_FAST_BULLET=3,n.TYPE_BULLET_X2=4,PreLoaderConfig.ConfigParticleConfeti={alpha:{start:.8,end:.1},scale:{start:1,end:.5,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#f5b830"},speed:{start:50,end:30,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.8},blendMode:"normal",frequency:.001,emitterLifetime:-1,maxParticles:500,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:20,y:-20,r:300}},PreLoaderConfig.ConfigParticleStarFly={alpha:{start:1,end:1},scale:{start:1,end:1.2,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#f7e70d"},speed:{start:100,end:200,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:-360,max:360},lifetime:{min:1,max:1},blendMode:"normal",frequency:.05,emitterLifetime:-1,maxParticles:20,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},PreLoaderConfig.ConfigParticleRibbon={alpha:{start:1,end:.2},scale:{start:.5,end:.8,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#f7e70d"},speed:{start:50,end:30,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:-100,max:-90},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.25,max:.75},blendMode:"normal",frequency:.01,emitterLifetime:1,maxParticles:30,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:10,y:-20,r:300}},t.a=n},function(e,t,i){"use strict";t.a=class{constructor(e,t,i,s,o){this.speed=o||1,this.coin=e,this.fishType=s,this.listCoinWin=[],this.init(e,t,i,s)}init(e,t,i,s){this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this.displayController=AppInfo.gameMovie.displayController}dispose(){}showEffect(e,t,i,s=!1,o=0,n,a){this.visible=!0,this.idle=!0,AppInfo.preLoader.soundController.playCoinWin();const h=this.displayController.textCoinManager.getTextCoinWin();h.setInfo(this.coin,s,a),h.runEffect({x:this.x,y:this.y},{x:e,y:t});const l=i<15?1:8;let r;for(let i=0;i<l;i++)r=this.displayController.coinWinManager.getCoinWin(),r.run(this.x,this.y,e,t,.1*i)}updateCoinText(e){this.coin=e}updateTextCoinPos(){}}},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(),this.id=e,this.iconOpenMC=null,this.iconValue=null,this.value=-1,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this.iconOpenMC&&(this.iconOpenMC=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBonusGame.textures.CoinOpen),this.iconOpenMC.gotoAndStop(0),this.iconOpenMC.animationSpeed=1/4,this.iconOpenMC.anchor.set(.5),this.iconOpenMC.loop=!1,this.iconOpenMC.onComplete=this.onCompleteOpen.bind(this),this.addChild(this.iconOpenMC)),null===this.iconValue&&(this.iconValue=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.CoinNormal),this.iconValue.anchor.set(.5),this.iconValue.visible=!1,this.addChild(this.iconValue)),this.iconOpenMC.interactive=!0,this.iconOpenMC.buttonMode=!0,this.iconOpenMC.mouseclick=this.onClickItem.bind(this))}onClickItem(){AppInfo.preLoader.requestController.userChoiceCoin(this.parent.mathID,this.id)}playEffectOpen(e){this.iconOpenMC.interactive=!1,this.iconOpenMC.buttonMode=!1,this.value=e,this.iconOpenMC.gotoAndPlay(0)}onCompleteOpen(){this.setItemValue(this.value),this.iconOpenMC.visible=!1}setItemValue(e){this.iconValue.visible=!0,this.iconValue.texture=ResourceManager.Atlas.AtlasBonusGame.textures.ItemsCoin[e],this.iconValue.scaleX=-1,TweenMax.to(this.iconValue,.5,{scaleX:1,ease:Back.easeOut.config(1.2)})}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}t.a=o},function(e,t,i){"use strict";var s=i(6),o=i(91);class n extends s.a{constructor(){super(),this.listItemCoin=[],this.textRatio=null,this.textCoin=null,this.index=0,this.init()}init(){if(super.init(),this._isDisposed){let e;this._isDisposed=!1;const t={fontFamily:PreLoaderConfig.FontResource.SVNKimberley.name,fontSize:"25px",fontWeight:"bold",fill:[16777215,3341806,691946],fillGradientStops:[.2,.3,1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:140636,align:"center",strokeThickness:4},i={fontFamily:PreLoaderConfig.FontResource.SVNKimberley.name,fontSize:"20px",fontWeight:"bold",fill:[16777215,3341806,691946],fillGradientStops:[.2,.3,1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:140636,align:"center",strokeThickness:4};null===this.textCoin&&(this.textCoin=new PIXI.Text("0",t),this.textCoin.style.fontSize=35,this.textCoin.anchor.set(.5),this.addChild(this.textCoin));for(let t=0;t<3;t++)e=new o.a(t),e.scale.set(.2),e.x=(e.width*e.scaleX+25)*t,e.y=this.textCoin.height-e.height*e.scaleY,this.addChild(e),e.iconOpenMC.interactive=!1,e.iconOpenMC.buttonMode=!1,this.listItemCoin.push(e);const s=this.listItemCoin[this.listItemCoin.length-2];if(this.textCoin.x=s.x+s.width*s.scaleX/2,null===this.textRatio){this.textRatio=new PIXI.Text("x2",i),this.textRatio.anchor.set(.5);const e=this.listItemCoin[this.listItemCoin.length-1];this.textRatio.x=e.x+e.width*e.scaleX+this.textRatio.width/1.2,this.textRatio.y=e.y-e.height*e.scaleY/3,this.addChild(this.textRatio)}}}openCoin(e){this.listItemCoin[this.index].playEffectOpen(e),this.index++}setRatioGroup(e){this.textRatio.text="x "+e}setCoin(e){this.textCoin.text=Utilities.Coin(e)}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}t.a=n},function(e,t,i){"use strict";var s=i(72);class o extends s.a{constructor(e,t,i){super(e,t,i),this.light=null,this.baseEffect=null}init(){super.init(),null==this.baseEffect&&(51==this.type?(this.baseEffect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBoss32.textures.fish32Base[0]),this.isBossMap=!0):52==this.type?(this.baseEffect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBoss33.textures.fish33Base[0]),this.isBossMap=!0):ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Base"]?this.baseEffect=new PIXI.Sprite(ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Base"][0]):this.baseEffect=new PIXI.Sprite,this.baseEffect.anchor.set(.5,.5),33==this.type&&(this.baseEffect.x=10,this.baseEffect.y=40)),33!=this.type&&52!=this.type||null==this.light&&(this.light=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBoss33.textures.fish33EffectLight),this.light.visible=!1,this.light.anchor.set(.5,.5),this.light.x=0,this.light.y=0,this.addChild(this.light))}dispose(){if(TweenMax.killTweensOf(this.baseEffect),this.removeChild(this.baseEffect),this.baseEffect&&this.baseEffect.destroy(),this.baseEffect=null,null!=this.light&&(this.removeChild(this.light),this.light.gotoAndStop(0),this.light.destroy(),this.light=null),TweenMax.killTweensOf(this.movie),TweenMax.killTweensOf(this.fishShadow),TweenMax.killTweensOf(this),AppInfo.gameMovie.gameBoard.boss33Dance=!1,AppInfo.preLoader.soundController.stopBossComingSound(),AppInfo.gameMovie.gameBoard.currentBoss&&33==AppInfo.gameMovie.gameBoard.currentBoss.type||AppInfo.gameMovie.gameBoard.currentBoss&&52==AppInfo.gameMovie.gameBoard.currentBoss.type){for(let e=0;e<AppInfo.gameMovie.gameBoard.listFishBoss33Run.length;e++)AppInfo.gameMovie.gameBoard.listFishBoss33Run[e].dispose();AppInfo.gameMovie.gameBoard.listFishBoss33Run=[]}super.dispose(),AppInfo.gameMovie.gameBoard.listFish.includes(this)&&AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(this)),AppInfo.gameMovie.gameBoard.currentBoss=null,AppInfo.gameMovie.displayController.disposeTopHitBoss()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}runInBattle(e){TweenMax.killTweensOf(this),this.x=1500,this.y=360,this.scale.x=-1,this.fishShadow.scale.x=-1,this.fishShadow&&this.fishShadow.run(),TweenMax.to(this,e,{bezier:{values:[{x:1500,y:360},{x:640,y:360},{x:115,y:360}],type:"quataric"},onUpdate:()=>{this.onBossSwimUpdate()},onComplete:()=>{this.dispose()},ease:Linear.easeNone})}onBossSwimUpdate(){this.fishShadow&&(this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.movie.rotation=this.movie.rotation),this.refreshInView(),this.refreshIsLock()}run(e,t=0){e=[],33==this.type||52==this.type?(e.push({x:-this.movie.width,y:AppInfo.appRealHeight}),e.push({x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2}),e.push({x:AppInfo.appRealWidth+this.movie.width,y:2*AppInfo.appRealHeight}),e.push({x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2}),e.push({x:-this.movie.width,y:AppInfo.appRealHeight})):(e.push({x:-this.movie.width,y:AppInfo.appRealHeight/2}),e.push({x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2}),e.push({x:AppInfo.appRealWidth+this.movie.width,y:AppInfo.appRealHeight/2}),e.push({x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2}),e.push({x:-this.movie.width,y:AppInfo.appRealHeight/2})),this.x=-this.movie.width,this.y=AppInfo.appRealHeight/2,this.fishShadow&&null!==this.fishShadow&&(this.fishShadow.x=-this.movie.width,this.fishShadow.y=AppInfo.appRealHeight/2),this.movie.gotoAndPlay(0),33==this.type||52==this.type?TweenMax.to(this,PreLoaderConfig.BossConfig.timeBoss33MoveToShowEffect,{x:AppInfo.appRealWidth/2,ease:Linear.easeNone,onUpdate:this.onFishSwimUpdate.bind(this),onComplete:this.onCompleteMoveBoss33.bind(this)}):TweenMax.to(this,PreLoaderConfig.BossConfig.timeBossMove,{bezier:{type:"thru",curviness:1,values:e,autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone,onUpdate:this.onFishSwimUpdate.bind(this),onComplete:this.onFishSwimComplete.bind(this)}),this.fishShadow&&this.fishShadow.run(e,t),this.visible=!0}onCompleteMoveBoss33(){this.light.visible=!0,this.light.gotoAndPlay(0),this.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Dance,this.fishShadow&&null!==this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Dance),TweenMax.to(this.baseEffect,2,{rotation:2*Math.PI,repeat:-1}),AppInfo.gameMovie.gameBoard.currentCaTran&&AppInfo.gameMovie.gameBoard.currentCaTran.stopForBossRun(),AppInfo.gameMovie.gameBoard.listFishBoss33Run.length<=0?this.onCompleteHideFish(null):AppInfo.gameMovie.gameBoard.listFishBoss33Run.forEach((e,t)=>{const i=[{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2}];if(null!=e&&33!=e.type){if(e.runTween&&(e.runTween.paused(!0),e.runTween=null),TweenMax.killTweensOf(e),TweenMax.killTweensOf(e.fishShadow),e.isCaTran){-1==e.scale.x&&(e.scale.x=1);let t=e.getGlobalPosition();e.x=t.x,e.y=t.y,t=e.fishShadow.getGlobalPosition(),e.fishShadow.x=t.x,e.fishShadow.y=t.y,AppInfo.gameMovie.layerFish.addChild(e),AppInfo.gameMovie.layerFishShadow.addChild(e.fishShadow)}const s=60/e.width;TweenMax.to(e,PreLoaderConfig.BossConfig.timeBoss33Attractive,{bezier:{type:"thru",curviness:1,values:[{x:e.x,y:e.y},i[0]],autoRotate:["x","y","rotation",0,!0]},ease:Expo.easeIn,scaleX:s,scaleY:s,delay:.05*t,onComplete:this.onCompleteHideFish.bind(this),onUpdate:this.onFishSwimUpdate1.bind(e),onCompleteParams:[e]})}}),AppInfo.gameMovie.layerFish.setChildIndex(AppInfo.gameMovie.gameBoard.currentBoss,AppInfo.gameMovie.layerFish.numChildren-1)}onFishSwimUpdate1(){this.fishShadow&&(this.fishShadow.scale=this.scale,this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.rotation=this.rotation),this.isLock&&(this.x<-85||this.y<-85||this.x>AppInfo.appRealWidth+85||this.y>AppInfo.appRealHeight+85)&&this.unLock()}onCompleteHideFish(e){if(TweenMax.killTweensOf(this.baseEffect),null!=e){TweenMax.killTweensOf(e),TweenMax.killTweensOf(e.fishShadow);const t=AppInfo.gameMovie.layerFish.getChildByName(e.name);if(null!=t){AppInfo.gameMovie.layerFish.removeChild(t),AppInfo.gameMovie.layerFishShadow.removeChild(t.fishShadow);const i=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBoss33.textures.fish33EffectLaze);i.visible=!0,i.animationSpeed=1/12,i.loop=!1,i.x=0,i.y=0,i.anchor.set(1,1),i.rotation=e.rotation,i.gotoAndPlay(0),i.onComplete=this.onCompeleLaze.bind(this,i),this.addChild(i)}0==AppInfo.gameMovie.gameBoard.listFish.length&&AppInfo.gameMovie.gameBoard.listFish.push(AppInfo.gameMovie.gameBoard.currentBoss),AppInfo.preLoader.interactive=!0,AppInfo.preLoader.interactiveChildren=!0,TweenMax.to(this,PreLoaderConfig.BossConfig.timeBossMove/4,{x:AppInfo.appRealWidth+this.movie.width,ease:Linear.easeNone,delay:PreLoaderConfig.BossConfig.timeBoss33Dance-PreLoaderConfig.BossConfig.timeBoss33Attractive,onStart:this.onStartAfterDance.bind(this),onComplete:this.onCompleteMoveBoss33Turn1.bind(this),onUpdate:this.onFishSwimUpdate.bind(this)})}else AppInfo.gameMovie.gameBoard.listFish.push(AppInfo.gameMovie.gameBoard.currentBoss),TweenMax.to(this,PreLoaderConfig.BossConfig.timeBossMove/4,{x:AppInfo.appRealWidth+this.movie.width,ease:Linear.easeNone,delay:PreLoaderConfig.BossConfig.timeBoss33Dance-PreLoaderConfig.BossConfig.timeBoss33Attractive,onStart:this.onStartAfterDance.bind(this),onComplete:this.onCompleteMoveBoss33Turn1.bind(this),onUpdate:this.onFishSwimUpdate.bind(this)})}onCompeleLaze(e){null!=this.parent&&null!=e&&(e.gotoAndStop(0),e.visible=!1,this.children.includes(e)&&this.removeChild(e))}onStartAfterDance(){this.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Swim,this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Swim),null!=this.light&&(this.light.visible=!1)}onCompleteMoveBoss33Turn1(){this.movie.scale.x=-1,this.fishShadow&&(this.fishShadow.movie.scale.x=-1),TweenMax.to(this,PreLoaderConfig.BossConfig.timeBossMove/4,{x:AppInfo.appRealWidth/2+this.movie.width/2,ease:Linear.easeNone,onUpdate:this.onFishSwimUpdate.bind(this),onComplete:this.onCompleteMoveBoss33Turn2.bind(this)})}onCompleteMoveBoss33Turn2(){this.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Dance,this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Dance),TweenMax.killTweensOf(this),TweenMax.to(this,PreLoaderConfig.BossConfig.timeBossMove/4,{x:-this.movie.width,ease:Linear.easeNone,onUpdate:this.onFishSwimUpdate.bind(this),delay:PreLoaderConfig.BossConfig.timeBoss33Dance,onStart:()=>{this.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Swim,this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBoss33.textures.fish33Swim)},onComplete:()=>{this.onFishSwimComplete()}})}onFishSwimUpdate(){this.fishShadow&&(this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.rotation=this.rotation),this.isLock&&(this.x<-85||this.y<-85||this.x>AppInfo.appRealWidth+85||this.y>AppInfo.appRealHeight+85)&&this.unLock()}onFishSwimComplete(){this.dispose()}onHitBullet(e){TweenMax.killTweensOf(this.baseEffect),TweenMax.to(this.baseEffect,.4,{rotation:this.baseEffect.rotation+2*Math.PI}),16777215!=e&&(TweenMax.killTweensOf(this.movie),this.movie.tint=16777215,TweenMax.to(this.movie,.2,{tint:e,yoyo:!0,onComplete:()=>{this.movie.tint=16777215}}))}}t.a=o},function(e,t,i){"use strict";class s extends PIXI.Container{constructor(){super()}dispose(){this.destroy()}addBoss(e,t,i,s,o,n){}bossAttack(e,t,i,s,o){}updateInfoBoss(e,t){}getBossById(e){}finish(e){}}t.a=s},function(e,t,i){"use strict";(function(e){var s=i(70),o=i(146),n=(i(81),i(147));class a extends PIXI.Container{constructor(e){super(),this.index=e,this.tweenEye=null,this.tweenToPedestal=null,this.linkedPedestal=null,this._nodeTree=null,this.isTriggerPedestal=!1,this.isPerfectlyPedestal=!1,this.onPerfectlyPedestal=null,this.radius=70,this._cachedAngle=0,this._cachedDistance=120,this.eye=new PIXI.spine.Spine(ResourceManager.Atlas.TheEyeBones.textures.TheEyeBones.spineData),this.eye.stateData.setMix("close","normal",1),this.eye.stateData.setMix("normal","close",1),this.eye.stateData.setMix("normal","wink2",.5),this.eye.stateData.setMix("wink2","normal",.5),this.eye.visible=!1,this.addChild(this.eye),this.setAnimation("close"),this._boundingEye=new PIXI.Rectangle(0,0,this.radius,this.radius),this._chat=new n.a,this.addChild(this._chat),this._chat.y=-this._chat.height}hide(){TweenMax.killTweensOf(this),this.visible=!1,this.eye.visible=!1}show(){this.visible=!0,this.scale.set(1)}showEffectChat(){this._chat.showEffect()}stopEffectChat(){this._chat.stopEffect()}dispose(){this.releaseNodeTree(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._appearAnimated),null!==this.tweenEye&&(this.tweenEye.kill(),this.tweenEye=null),null!==this.tweenToPedestal&&(this.tweenToPedestal.kill(),this.tweenToPedestal=null),this.eye&&(TweenMax.killTweensOf(this.eye),this.eye.destroy(),this.eye=null),this._effectPerfectly&&(this._effectPerfectly.destroy(),this._effectPerfectly=null),this._animatedAppear&&(this._animatedAppear.destroy(),this._animatedAppear=null),this.linkedPedestal=null,this._nodeTree=null,this.onPerfectlyPedestal=null,this._boundingEye=null,this.destroy()}addCollision(){null===this._nodeTree?this._nodeTree=AppInfo.gameMovie.collisionManager.addCircle(this,70,s.a.TYPE_COLLISION.FISH,this.eye):this._nodeTree.add()}getNodeTree(){return this._nodeTree}releaseNodeTree(){null!==this._nodeTree&&this._nodeTree.release()}addAnimation(e,t){void 0===t&&(t=!0),this.eye.state.addAnimation(0,e,t,0)}setAnimation(e,t){void 0===t&&(t=!0),this.eye.state.setAnimation(0,e,t)}appear(e,t){this.position.copy(e),TweenMax.delayedCall(t,this._appearAnimated,[],this)}_appearAnimated(){this._animatedAppear=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBattleBossMedusaEyeAppear.textures.EyeAppear),this._animatedAppear.anchor.set(.55,.51),this._animatedAppear.scale.set(4),this._animatedAppear.animationSpeed=.7,this._animatedAppear.loop=!1,this._animatedAppear.onComplete=()=>{this._animatedAppear.destroy(),this._animatedAppear=null},this._animatedAppear.play(),this.addChildAt(this._animatedAppear,0),this._appearEye()}_appearEye(){this.eye.alpha=.2,this.eye.scale.set(.2),TweenMax.to(this.eye,1,{delay:.3,scaleX:1,scaleY:1,alpha:1,ease:Back.easeOut.config(1),onStart(){this.eye.visible=!0},onStartScope:this,onComplete:this.addCollision,onCompleteScope:this})}perfectlyPedestal(){AppInfo.gameMovie.strongVibration(),this.setAnimation("wink2"),this.releaseNodeTree();const e=AppInfo.gameMovie.layerEffect;e.toLocal(new PIXI.Point,this,this.position),e.addChildAt(this,0),this.effectOnPedestal(),this._chat.stopEffect()}fireBullet({basePosition:e,power:t}){const i=AppInfo.preLoader.getGlobalPositionMouse();let s=Utilities.Number.angleRadBetweenTwoPoint(i,this.position);s-=Math.PI/2;const o=AppInfo.gameMovie.displayController.poolManger.getBullet(4,e,t,0);o.movie.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures.bulletEye,o.movie.anchor.set(.5,0),o.visible=!0,o.reduceQuantity=!1,o.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),o.rotation=s;const n=Utilities.Number.getForward(this.x,this.y,-Math.max(o.movie.width,o.movie.height),s+Math.PI/2);return o.position.copy(n),o.fireFollowAngle(s),AppInfo.gameMovie.layerFish.addChild(o),this.setAnimation("normal",!1),this.addAnimation("wink2"),o}moveToPedestal({x:e,y:t}){this.tweenEye&&this.tweenEye.isActive()||(null===this.tweenToPedestal?this.tweenToPedestal=TweenMax.to(this,1,{x:e,y:t,onComplete(){AppInfo.gameMovie.requestController.battleBossMedusaPositionEye(this.position,this.index),this.isPerfectlyPedestal=!0,this.perfectlyPedestal(),this.effectToPedestal(),this.onPerfectlyPedestal&&this.onPerfectlyPedestal(this)},onCompleteScope:this}):this.tweenToPedestal.updateTo({x:e,y:t},!0))}onTriggerCollide(e,t){this.tweenToPedestal&&this.tweenToPedestal.isActive()&&this.tweenToPedestal.kill();const i=e.getTarget();if(i){this.isPerfectlyPedestal=!1;const t=i instanceof o.a,n=e.typeCollision===s.a.TYPE_COLLISION.BULLET;if(n||t){let t=0,s=120;if(n)t=Utilities.Number.angleRadBetweenTwoPoint(this.position,i.getGlobalPosition()),this._cachedAngle=t=-Math.PI+t,this._cachedDistance=s,AppInfo.gameMovie.requestController.battleBossMedusaHitEye(Utilities.toDegree(t),this.index,i.id);else{const i=e.metadata;if(t=0===i.direction||2===i.direction?-this._cachedAngle:Math.PI-this._cachedAngle,null!==this.tweenEye&&this.tweenEye.isActive()){const e=this.tweenEye.progress();s=this._cachedDistance=this._cachedDistance*(1-e)}}AppInfo.gameMovie.requestController.battleBossMedusaPositionEye(this.position,this.index);let o=Utilities.Number.getForward(this.x,this.y,s,t);o=this._formatPosition(o),null===this.tweenEye?this.tweenEye=TweenMax.to(this,1,{x:o.x,y:o.y,onComplete(){this.isTriggerPedestal&&null!==this.linkedPedestal?this.moveToPedestal(this.linkedPedestal.pointFixedEye):AppInfo.gameMovie.requestController.battleBossMedusaPositionEye(this.position,this.index)},onCompleteScope:this}):this.tweenEye.updateTo({x:o.x,y:o.y},!0)}}}_formatPosition(e){return e.x-this._boundingEye.width<0?e.x=this._boundingEye.width:e.x+this._boundingEye.width>AppInfo.appRealWidth&&(e.x=AppInfo.appRealWidth-this._boundingEye.width),e.y-this._boundingEye.height<0?e.y=this._boundingEye.height:e.y+this._boundingEye.height>AppInfo.appRealHeight&&(e.y=AppInfo.appRealHeight-this._boundingEye.height),e}effectOnPedestal(){TweenMax.to(this,1,{y:"-=30",ease:Power0.easeNone,repeat:-1,yoyo:!0})}effectToPedestal(){this._effectPerfectly=new PIXI.spine.Spine(ResourceManager.Atlas.EyePerfectlyBones.textures.EyePerfectlyBones.spineData),this.addChild(this._effectPerfectly),this._effectPerfectly.state.setAnimation(0,"animation",!1),AppInfo.gameMovie.soundController.playXoetDien(),AppInfo.gameMovie.soundController.playMedusaComeOut()}moveToHandMedusa(e,t){return TweenMax.to(this,8,{x:e,y:t,scaleX:.3,scaleY:.3,ease:SlowMo.ease.config(.1,.4,!1)})}addMotionBlur(){if(!e.isMobilePage){const e=new PIXI.filters.MotionBlurFilter;e.velocity.set(-20,0),this.filters=[e]}}removeMotionBlur(){this.filters=null}}t.a=a}).call(this,i(3))},function(e,t,i){"use strict";var s=i(97);class o extends s.a{constructor(e){super(e,101),this.listArrows=[],this.listPowerEyes=[],this.onDeadObservable=new PIXI.Observable,this._tweenAura=null,this._missingText=null,this._tweenMissingText=null,this._tweenHit=null,this._containerAura=new PIXI.Container,this.addChildAt(this._containerAura,0),this._aura=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasMedusaAura.textures.MedusaAura),this._aura.animationSpeed=.8,this._aura.anchor.set(.5),this._aura.play(),this._containerAura.addChild(this._aura),this._auraParticle=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasMedusaAura.textures.MedusaAuraParticle),this._auraParticle.animationSpeed=.8,this._auraParticle.anchor.set(.5,1),this._auraParticle.play(),this._containerAura.addChild(this._auraParticle),this.boss.getLocalBounds(this._boundingBoss),this.boss.position.set(this._boundingBoss.left,250),this._spriteHand=new PIXI.Sprite,this._spriteHand.position.set(206,-52),this.boss.addChild(this._spriteHand),this._spriteEyeArrow=new PIXI.Sprite,this._spriteEyeArrow.position.set(140,-93),this.boss.addChild(this._spriteEyeArrow),this._spriteEyeEye=new PIXI.Sprite,this._spriteEyeEye.position.set(55,15),this.boss.addChild(this._spriteEyeEye),this.compoHealthBar.position.set(this.boss.x+100,this.boss.y-this.boss.height/2),this.addCollision([311,47,418,47,418,287,311,287]),this.linkedAuraToBoss(),this.linkedHealthToBoss()}dispose(){for(super.dispose(),this.onDeadObservable.clear(),this.onDeadObservable=null,TweenMax.killTweensOf(this._addPowerEye),TweenMax.killTweensOf(this._containerAura),this._tweenAura&&(this._tweenAura.kill(),this._tweenAura=null),this._tweenMissingText&&(this._tweenMissingText.kill(),this._tweenMissingText=null),this._tweenHit&&(this._tweenHit.kill(),this._tweenHit=null),this._missingText&&(this._missingText.destroy(),this._missingText=null),this._aura.destroy(),this._aura=null,this._auraParticle.destroy(),this._auraParticle=null,this._containerAura.destroy(),this._containerAura=null,this._spriteHand.destroy(),this._spriteHand=null,this._spriteEyeArrow.destroy(),this._spriteEyeArrow=null,this._spriteEyeEye.destroy(),this._spriteEyeEye=null;this.listArrows.length>0;){const e=this.listArrows[0];TweenMax.killTweensOf(e),e.destroy(),Utilities.removeElementAtIndex(this.listArrows,0)}for(;this.listPowerEyes.length>0;){const e=this.listPowerEyes[0];TweenMax.killTweensOf(e),e.destroy(),Utilities.removeElementAtIndex(this.listPowerEyes,0)}}onTriggerCollide(e){this.boss.tint=9764723,null===this._tweenHit?this._tweenHit=TweenMax.to(this.boss,.1,{onComplete(){this.boss.tint=16777215},onCompleteScope:this}):this._tweenHit.restart()}show(){this.visible=!0,null!==this._tweenAura&&this._tweenAura.restart()}hide(){this.visible=!1,null!==this._tweenAura&&this._tweenAura.pause()}moveTo(e,t,i){void 0===i.duration&&(i.duration=1),void 0===i.delay&&(i.delay=1),TweenMax.to(this.boss,i.duration,{x:e,y:t,delay:i.delay,ease:Power0.easeNone,onStart(){i.onStart&&i.onStart()},onComplete(){i.onComplete&&i.onComplete()}})}dead(){super.dead(),this.tweenMove.kill(),this.compoHealthBar.visible=!1,this.boss.textures=ResourceManager.Atlas.AtlasBossMedusa.textures.fish101Die,this.boss.loop=!1,this.boss.animationSpeed=.15,this.boss.onComplete=()=>{this.onDeadObservable.notifyObservers(this.boss.position),this.visible=!1},AppInfo.gameMovie.soundController.playMoonAngleDeathSound()}move(){super.move(15),this.swim(),this.boss.position.set(this._boundingBoss.left,250)}swim(){super.swim(),this.boss.textures=ResourceManager.Atlas.AtlasBossMedusa.textures.fish101Swim,this.boss.animationSpeed=.15,this.boss.play(),this.boss.getLocalBounds(this._boundingBoss)}callMantra(){this.boss.textures=ResourceManager.Atlas.AtlasBossMedusa.textures.MedusaMantra,this.boss.animationSpeed=.4,this.boss.play(),this._addMantraFX(),this._scaleMantraFX(),this.setState(o.STATE_MANTRA)}endMantra(){this._mantraLeft&&(TweenMax.killTweensOf(this._mantraLeft),this._mantraLeft.destroy(),this._mantraLeft=null),this._mantraRight&&(TweenMax.killTweensOf(this._mantraRight),this._mantraRight.destroy(),this._mantraRight=null)}attackArrow(e){this.setState(s.a.STATE_ATTACK_1),this.pause(),this.boss.textures=ResourceManager.Atlas.AtlasBossMedusa.textures.fish101AttackArrowPhaseOne,this.boss.loop=!1,this.boss.animationSpeed=.3,this.myBaseStation.getGlobalPosition(this.storeGlobalPosition);const t=this._getPositionEyeAttackArrow();this.boss.onComplete=this._attackArrow.bind(this,this.storeGlobalPosition.clone(),e<=0),this.lookAtUser(t)}_attackArrow(e,t){this.boss.textures=ResourceManager.Atlas.AtlasBossMedusa.textures.fish101AttackArrowPhaseTwo,this.boss.animationSpeed=.15,this.boss.loop=!1,this.boss.onComplete=this._completeAttackArrow.bind(this);const i=this._getPositionHand(),s=this._getArrow();s.position.copy(i),s.rotation=Utilities.Number.angleRadBetweenTwoPoint(i,e);const o=Utilities.Number.distanceBetweenTwoPoint(e,i);TweenMax.to(s,o/800,{x:e.x,y:e.y,ease:Power0.easeNone,onComplete:this._completeArrowToUser,onCompleteParams:[s,t],onCompleteScope:this}),AppInfo.gameMovie.soundController.playMedusaArrow()}_completeAttackArrow(){this.swim(),this.resume(),this.restoreScale()}_completeArrowToUser(e,t){AppInfo.gameMovie.requestController.battleBossUserBeAttacked(this.id),this._addArrow(e),t?this._addMissingText():AppInfo.gameMovie.slightVibration()}_addArrow(e){TweenMax.killTweensOf(e),e.visible=!1,this.listArrows.push(e)}_getArrow(){var e;return this.listArrows.length>0?((e=this.listArrows.pop()).visible=!0,e):((e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossMedusa.textures.MedusaArrow)).anchor.set(1,.5),this.addChild(e),e)}_getPositionHand(){return this._spriteHand.getGlobalPosition()}_getPositionEyeAttackArrow(){return this._spriteEyeArrow.getGlobalPosition()}_getPositionEyeAttackEye(){return this._spriteEyeEye.getGlobalPosition()}attackEye(e){this.setState(s.a.STATE_ATTACK_2),this.pause(),this.boss.textures=ResourceManager.Atlas.AtlasBossMedusa.textures.fish101AttackEyePhaseOne,this.boss.animationSpeed=.3,this.boss.loop=!1,this.boss.onComplete=this._attackEye.bind(this,e<=0);const t=this._getPositionEyeAttackEye();this.lookAtUser(t)}_attackEye(e){const t=this._getPowerEye();t.position.copy(this._spriteEyeEye),TweenMax.delayedCall(.5,this._addPowerEye,[t],this),this.boss.textures=ResourceManager.Atlas.AtlasBossMedusa.textures.fish101AttackEyePhaseTwo,this.boss.animationSpeed=.15,this.boss.onComplete=this._completeAttackEye.bind(this),AppInfo.gameMovie.requestController.battleBossUserBeAttacked(this.id),AppInfo.gameMovie.soundController.playKeoCa(),e?this._addMissingText():AppInfo.gameMovie.strongVibration()}_completeAttackEye(){this.swim(),this.resume(),this.restoreScale()}_addPowerEye(e){TweenMax.killTweensOf(e),e.visible=!1,this.listPowerEyes.push(e)}_getPowerEye(){var e;return this.listPowerEyes.length>0?((e=this.listPowerEyes.pop()).visible=!0,e):((e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossMedusa.textures.MedusaPowerEye)).anchor.set(0,.5),this.boss.addChild(e),e)}_addMissingText(){null===this._missingText&&(this._missingText=new PIXI.Text(PreLoaderConfig.languageConfig.key_missing.toUpperCase(),{fontFamily:PreLoaderConfig.FontResource.UTMAzuki.name,fontSize:35,fontWeight:"bold",fill:14557460}),this._missingText.anchor.set(.5),AppInfo.gameMovie.layerEffect.addChild(this._missingText)),this._missingText.position.copy(this.storeGlobalPosition.clone()),null===this._tweenMissingText?this._tweenMissingText=TweenMax.to(this._missingText,1,{startAt:{alpha:0},y:"-=130",alpha:1,onComplete(){TweenMax.to(this._missingText,1,{delay:1,y:"-=100",alpha:0})},onCompleteScope:this}):this._tweenMissingText.restart()}_getMissPoint({x:e,y:t}){const i=Math.random()<.5?Utilities.Number.randRange(0,this.storeGlobalPosition.x-150):Utilities.Number.randRange(this.storeGlobalPosition.x+150,AppInfo.appRealWidth),s=Utilities.Number.angleRadBetweenTwoPoint(e,t,i,AppInfo.appRealHeight);return Utilities.Number.getForward(e,t,2e3,s)}linkedAuraToBoss(){null===this._tweenAura?this._tweenAura=TweenMax.to(this._containerAura,1,{ease:Power0.easeNone,onUpdate(){this._containerAura.x=this.boss.x,this._containerAura.y=this.boss.y+this.boss.height/2,this.statesAction===s.a.STATE_SWIM?(this._containerAura.y-=20,1===this.boss.scale.x?this._containerAura.x+=50:this._containerAura.x-=50):this.statesAction===s.a.STATE_ATTACK_1?this._containerAura.y-=100:this.statesAction===s.a.STATE_ATTACK_2&&(this._containerAura.y-=20,1===this.boss.scale.x?this._containerAura.x-=50:this._containerAura.x+=50)},onUpdateScope:this,repeat:-1}):this._tweenAura.restart()}_addMantraFX(){this._mantraLeft=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasMedusaMantra.textures.Mantra),this._mantraLeft.animationSpeed=.4,this._mantraLeft.position.set(this.boss.x-100,this.boss.y+50),this._mantraLeft.anchor.set(.5,0),this._mantraLeft.rotation=Utilities.toRad(75),this._mantraLeft.play(),this.addChild(this._mantraLeft),this._mantraRight=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasMedusaMantra.textures.Mantra),this._mantraRight.animationSpeed=.4,this._mantraRight.position.set(this.boss.x+100,this.boss.y+50),this._mantraRight.anchor.set(.5,0),this._mantraRight.rotation=Utilities.toRad(-75),this._mantraRight.play(),this.addChild(this._mantraRight)}_scaleMantraFX(){TweenMax.to([this._mantraLeft,this._mantraRight],8,{delay:2,scaleX:0,scaleY:0,ease:SlowMo.ease.config(.1,.4,!1)})}}o.STATE_MANTRA=1010,t.a=o},function(e,t,i){"use strict";var s=i(82),o=i(98),n=i(70),a=i(83);class h extends s.a{constructor(e,t){super(e,t),this.tweenMove=null,this._tweenHealthBoss=null,this._nodeTree=null,this._boundingBoss=new PIXI.Rectangle,this.statesAction=h.STATE_IDLE,this.myBaseStation=AppInfo.gameMovie.displayController.myBaseStation,this.storeGlobalPosition=new PIXI.Point,this._oriScaleX=1,this.boss=new o.a([PIXI.Texture.EMPTY],e,t),this.boss.anchor.set(.5),this.boss.onTriggerCollide=this.onTriggerCollide.bind(this),this.addChild(this.boss),this.compoHealthBar=new a.a,this.compoHealthBar.pivot.set(this.compoHealthBar.width/2,this.compoHealthBar.height/2),this.addChild(this.compoHealthBar),this.swim()}dispose(){super.dispose(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.boss),this.tweenMove&&(this.tweenMove.kill(),this.tweenMove=null),this._tweenHealthBoss&&(this._tweenHealthBoss.kill(),this._tweenHealthBoss=null),this.removeCollision(),this._nodeTree=null,this.compoHealthBar&&(this.compoHealthBar.dispose(),this.compoHealthBar=null),this.boss&&(this.boss.destroy(),this.boss=null),this._boundingBoss=null,this.storeGlobalPosition=null}onTriggerCollide(e){}addCollision(e){null===this._nodeTree?this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this.boss,e,n.a.TYPE_COLLISION.FISH,this.boss):this._nodeTree.add()}updateHealth(e,t){this.compoHealthBar.updateHealth(e,t)}removeCollision(){null!==this._nodeTree&&this._nodeTree.release()}move(e=5){null===this.tweenMove?this.tweenMove=TweenMax.to(this.boss,e,{x:AppInfo.appRealWidth+this._boundingBoss.right,ease:Power0.easeNone,repeat:-1,yoyo:!0,onRepeat(){this.scaleBoss(-this.boss.scaleX)},onRepeatScope:this}):this.tweenMove.updateTo({x:AppInfo.appRealWidth+this._boundingBoss.right})}moveOut(){this.tweenMove&&this.tweenMove.eventCallback("onRepeat",(function(){this.tweenMove.kill()}),[],this)}moveTo(e,t,i){this.setState(h.STATE_SWIM),void 0===i.duration&&(i.duration=1),TweenMax.to(this.boss,i.duration,{x:e,y:t,ease:Power0.easeNone,onComplete(){i.onComplete&&i.onComplete()}})}swim(){this.setState(h.STATE_SWIM),this.boss.loop=!0,this.boss.rotation=0,this.boss.onComplete=null}pause(){null!==this.tweenMove&&this.tweenMove.pause(),this.boss.stop()}resume(){null!==this.tweenMove&&this.tweenMove.resume(),this.boss.play()}restoreScale(){this.scaleBoss(this._oriScaleX)}lookAt(e,t){const i=this.boss.x<=AppInfo.appRealWidth/2,s=-1===Math.sign(this.boss.scaleX);this._oriScaleX=this.boss.scaleX,i&&s?this.scaleBoss(-this.boss.scaleX):i||s||this.scaleBoss(-this.boss.scaleX);const o=Utilities.Number.angleRadBetweenTwoPoint(e,t);TweenMax.to(this.boss,this.boss.totalFrames/(60*this.boss.animationSpeed),{rotation:1===Math.sign(this.boss.scaleX)?o:o-Math.PI,ease:Power0.easeNone})}lookAtUser(e){this.myBaseStation.getGlobalPosition(this.storeGlobalPosition),this.lookAt(e,this.storeGlobalPosition)}scaleBoss(e){this.boss.scaleX=e}linkedHealthToBoss(){null===this._tweenHealthBoss?this._tweenHealthBoss=TweenMax.to(this.compoHealthBar,1,{ease:Power0.easeNone,onUpdate(){this.compoHealthBar.x=this.boss.x+100*Math.sign(this.boss.scaleX)},onUpdateScope:this,repeat:-1}):this._tweenHealthBoss.restart()}visibleHealthBar(e){this.compoHealthBar.visible=e}dead(){this.setState(h.STATE_DEAD),this.removeCollision()}resetState(){this.statesAction=h.STATE_IDLE}setState(e){this.statesAction=e}get id(){return this._id}set id(e){this._id!==e&&(this._id=e,this.boss.id=e)}}h.STATE_IDLE=0,h.STATE_SWIM=1,h.STATE_ATTACK_1=2,h.STATE_ATTACK_2=3,h.STATE_DEAD=4,t.a=h},function(e,t,i){"use strict";class s extends PIXI.extras.AnimatedSprite{constructor(e,t,i){super(e),this.id=t,this.type=i,this.isBossMap=!0,this.listFishInSide=[]}}t.a=s},function(e,t,i){"use strict";class s extends PIXI.Container{constructor(){super(),this.playing=!1,this._boomGreen=s.getGreen(),this._boomGreen.scale.set(2),this._boomGreen.onComplete=this._hideItemBoom.bind(this,this._boomGreen),this.addChild(this._boomGreen),this._boomViolet=s.getViolet(),this._boomViolet.onComplete=this._effectHideBoomViolet.bind(this),this._boomViolet.onFrameChange=this._onCallBackShow.bind(this),this.addChild(this._boomViolet),this.cbCompleteShow=new PIXI.Observable,this._tweenHideViolet=TweenMax.to(this._boomViolet,.2,{alpha:0,ease:Power0.easeNone,paused:!0,onComplete(){this._boomViolet.alpha=1,this._hideItemBoom(this._boomViolet)},onCompleteScope:this})}play(){this.visible=!0,this.playing=!0,this._isCallBack=!1,this._boomGreen.visible=!0,this._boomViolet.visible=!0,this._boomViolet.alpha=1,this._boomGreen.gotoAndPlay(0),this._boomViolet.gotoAndPlay(0)}_onCallBackShow(e){!this._isCallBack&&e>15&&(this._isCallBack=!0,this.cbCompleteShow.notifyObservers(this))}_effectHideBoomViolet(){this._tweenHideViolet.play(0)}_hideItemBoom(e){e.visible=!1,this.playing=!0===this._boomGreen.visible||!0===this._boomViolet.visible,this.visible=this.playing}static getViolet(){const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBattleBossMedusaEyeAppear.textures.EyeAppear);return e.anchor.set(.5),e.animationSpeed=.7,e.loop=!1,e.x=-20,e.y=-40,e.scale.set(2.5),e}static getGreen(){const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffectBoomMedusa.textures.StartBoomGreen);return e.anchor.set(.5),e.animationSpeed=.4,e.loop=!1,e}dispose(){this._tweenHideViolet&&this._tweenHideViolet.kill(),this.cbCompleteShow&&this.cbCompleteShow.clear(),this._boomGreen&&this._boomGreen.destroy(),this._boomViolet&&this._boomViolet.destroy(),this._tweenHideViolet=null,this.cbCompleteShow=null,this._boomGreen=null,this._boomViolet=null,this.destroy()}}t.a=s},function(e,t,i){"use strict";var s=i(93),o=i(72),n=i(6);class a extends n.a{constructor(e,t,i){super(),this.indexInGroup=null,this._movie=null,this.type=null,this.id=0,this.id=e,this.type=t,this.indexInGroup=i,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,101==this.type)var e=ResourceManager.Atlas.AtlasBossMedusaLeftSwim.textures.fish101Swim;else e=ResourceManager.Atlas.AtlasBossCentaur.textures.fish102Swim;this.movie=new PIXI.extras.AnimatedSprite(e),this.movie.alpha=.5,this.type,this.movie.animationSpeed=1/8,this.movie.interactive=!1,this.movie.hitArea=PIXI.Rectangle.EMPTY,this.movie.tint=0,this.addChild(this.movie),this.movie.gotoAndStop(0),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY}}dispose(){super.dispose(),TweenLite.killTweensOf(this),this.removeChild(this.movie),this.movie.gotoAndStop(0),this.movie.destroy(),this.parent&&this.parent.removeChild(this),this.destroy()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}stand(){this.movie.gotoAndPlay(0)}run(){this.movie.gotoAndPlay(0)}stun(){this.movie.stop()}resumeGame(){this.movie.play()}onFishSwimComplete(){}die(){TweenMax.killTweensOf(this),this.movie.stop(),PreLoaderConfig.ListFishIDHaveDieTexture.includes(this.type)?(this.movie.textures=this.type<32?ResourceManager.Atlas.AtlasFish.textures["fish"+this.type+"Die"]:ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Die"],this.movie.gotoAndPlay(0),this.movie.loop=!1):PreLoaderConfig.ListFishIDNoRotateWhenDie.includes(this.type)?TweenMax.to(this,2,{alpha:0}):(TweenMax.to(this,.5,{alpha:0,delay:1.5,ease:Linear.easeNone}),TweenMax.to(this,.07,{rotation:Math.PI/4,yoyo:!0,ease:Linear.easeNone,repeat:101}))}onCompleteFishWithEffectDie(){this.movie&&this.movie.gotoAndStop(0)}}var h=a,l=i(71),r=i(70);class p extends o.a{constructor(e,t,i){super(e,t),this.callBackFrezzeMedusa=null,this.readyFrezze=!1,this.readyAttack=!1,this.rotationDirection=0,this.step=0,this.pathAction=[],this.listPathAction=[],this._timeconfig=10,this._max=300,this._min=200,this.atlas=null,this.frame=null,this.moveY=0,this.moveX=0,this.startY=0,this.startX=0,this.realPosY=215,this.realPosX=265,this._direction=null,this._timeLineMax=null,this.isBossMap=!0,this.x=AppInfo.appRealWidth,this.y=AppInfo.appRealHeight/2-100;const s=[{direction:"Right",x:400,y:0,user:-1,startX:AppInfo.appRealWidth,startY:AppInfo.appRealHeight/2-100},{direction:"Attack",x:0,y:0,user:-1},{direction:"Right",x:250,y:0,user:-1},{direction:"Frezze",x:0,y:0,user:2},{direction:"Frezze",x:0,y:0,user:3},{direction:"Right",x:400,y:0,user:-1},{direction:"Left",x:200,y:0,user:-1},{direction:"Attack",x:0,y:0,user:-1},{direction:"Left",x:200,y:0,user:-1},{direction:"Frezze",x:0,y:0,user:1},{direction:"Frezze",x:0,y:0,user:0},{direction:"Left",x:400,y:0,user:-1},{direction:"Left",x:400,y:0,user:-1}],o=[{direction:"Left",x:400,y:0,user:-1,startX:-100,startY:AppInfo.appRealHeight/2-100},{direction:"Attack",x:0,y:0,user:-1},{direction:"Left",x:250,y:0,user:-1},{direction:"Frezze",x:0,y:0,user:1},{direction:"Frezze",x:0,y:0,user:0},{direction:"Left",x:400,y:0,user:-1},{direction:"Right",x:200,y:0,user:-1},{direction:"Attack",x:0,y:0,user:-1},{direction:"Right",x:200,y:0,user:-1},{direction:"Frezze",x:0,y:0,user:3},{direction:"Frezze",x:0,y:0,user:2},{direction:"Right",x:400,y:0,user:-1},{direction:"Right",x:400,y:0,user:-1}];this.pathAction=0==i?s:o,this.step=0,this.init()}init(){if(this._isDisposed){this._isDisposed=!1,this.atlas="AtlasBossMedusaLeftSwim";ResourceManager.Atlas[this.atlas].textures.fish101Swim;this.Left=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaLeftSwim.textures.fish101Swim),this.Right=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaRightSwim.textures.fish101Swim),this.BotLeft=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaBotRightFrezze.textures.fish101Frezze),this.BotRight=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaBotRightFrezze.textures.fish101Frezze),this.TopRight=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaTopRightFrezze.textures.fish101Frezze),this.TopLeft=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaTopLeftFrezze.textures.fish101Frezze),this.Left.animationSpeed=1/7,this.Right.animationSpeed=1/7,this.BotLeft.animationSpeed=1/7,this.BotRight.animationSpeed=1/7,this.TopRight.animationSpeed=1/7,this.TopLeft.animationSpeed=1/7,this.Left.anchor.set(.25,.35),this.Right.anchor.set(.75,.5),this.BotLeft.anchor.set(.75,.8),this.BotLeft.scaleX=-1,this.BotRight.anchor.set(.75,.8),this.TopRight.anchor.set(.8,.13),this.TopLeft.anchor.set(.25,.13),this.Left.visible=!1,this.Right.visible=!1,this.BotLeft.visible=!1,this.BotRight.visible=!1,this.TopRight.visible=!1,this.TopLeft.visible=!1,this.addChild(this.Left),this.addChild(this.Right),this.addChild(this.BotLeft),this.addChild(this.BotRight),this.addChild(this.TopRight),this.addChild(this.TopLeft),this.movie=this.Left,this.fishShadow=new h(this.id,this.type,this.indexInGroup),this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,AppInfo.gameMovie.gameBoard.waitLockFish&&this.readyForLock(),this.deltaWToCalInView=Math.max(this.width/2,this.height/2),this.deltaHToCalInView=this.deltaWToCalInView,this.addCollision()}}run(){this.x=this.pathAction[0].startX,this.y=this.pathAction[0].startY,this.movie.gotoAndPlay(0),this.atlas="AtlasBossMedusaTopLeft",this._timeLineMax=new TimelineMax,this.changeDirection2()}runInBattle(e){TweenMax.killTweensOf(this),this.x=1280,this.y=360,this.changAtlasTextute("Right"),this._runTween=TweenMax.to(this,e,{bezier:{values:[{x:1280,y:360},{x:640,y:360},{x:115,y:360}],type:"quataric"},onUpdate:this.onFishSwimUpdate.bind(this),onComplete:()=>{this.dispose()},ease:Linear.easeNone})}attackUser(e,t,i){this._runTween.pause(),this._callBack=e,this._endPoint=t,this._attackPosition=i,this._attackInBattle()}_attackInBattle(e){this.movie.textures=ResourceManager.Atlas[this.atlas+"Attack"].textures.fish101Attack,this.movie.gotoAndPlay(0),this.onEnterFrame=this.onEnterFrame.bind(this),this.readyAttack=!0,AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrame),this.fishShadow.movie.textures=ResourceManager.Atlas[this.atlas+"Attack"].textures.fish101Attack,this.fishShadow.movie.gotoAndPlay(0),this.movie.loop=!1,this.movie.onComplete=this._onCompleteAttackBattle.bind(this,0)}_onCompleteAttackBattle(e){AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrame),this.movie.textures=ResourceManager.Atlas[this.atlas+"Swim"].textures.fish101Swim,this.fishShadow.movie.textures=ResourceManager.Atlas[this.atlas+"Swim"].textures.fish101Swim,this.movie.loop=!0,this.fishShadow.movie.loop=!0,this.movie.gotoAndPlay(0),this.fishShadow.movie.gotoAndPlay(0),this._runTween.play()}onBossSwimUpdate(){this.fishShadow&&(this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.movie.rotation=this.movie.rotation),this.refreshInView(),this.refreshIsLock()}changeDirection2(){if(this.step>=this.pathAction.length)return void this.dispose();switch(0!=this.movie.rotation&&(this.movie.rotation=0,this.fishShadow.movie.rotation=0),this.movie.rotation=0,this.fishShadow.movie.rotation=0,this.pathAction[this.step].direction){case"TopLeft":this.moveTopLeftPath(this.pathAction[this.step].x,this.pathAction[this.step].y);break;case"TopRight":this.moveTopRightPath(this.pathAction[this.step].x,this.pathAction[this.step].y);break;case"Left":this.moveLeftPath(this.pathAction[this.step].x,this.pathAction[this.step].y);break;case"Right":this.moveRightPath(this.pathAction[this.step].x,this.pathAction[this.step].y);break;case"BotLeft":this.moveBotLeftPath(this.pathAction[this.step].x,this.pathAction[this.step].y);break;case"BotRight":this.moveBotRightPath(this.pathAction[this.step].x,this.pathAction[this.step].y);break;case"Attack":this.attackPath();break;case"Frezze":this.frezzePath(this.pathAction[this.step].user)}this.step++}changAtlasTextute(e){switch(-1==this.movie.scaleX&&(this.movie.scaleX=1),-1==this.fishShadow.movie.scaleX&&(this.fishShadow.movie.scaleX=1),this.movie&&(this.movie.gotoAndStop(0),this.movie.visible=!1),this.fishShadow.movie.visible=!1,e){case"TopLeft":this.atlas="AtlasBossMedusaTopLeft",this.fishShadow.movie.anchor.set(.25,.13),this.rotationDirection=Math.PI,this.movie=this.TopLeft;break;case"TopRight":this.atlas="AtlasBossMedusaTopRight",this.fishShadow.movie.anchor.set(.8,.13),this.rotationDirection=2*Math.PI/4*3,this.movie=this.TopRight;break;case"BotLeft":this.atlas="AtlasBossMedusaBotRight",this.fishShadow.movie.anchor.set(.75,.8),this.fishShadow.movie.scaleX=-1,this.rotationDirection=0,this.movie=this.BotLeft;break;case"BotRight":this.atlas="AtlasBossMedusaBotRight",this.fishShadow.movie.anchor.set(.75,.8),this.rotationDirection=0,this.movie=this.BotRight;break;case"Left":this.atlas="AtlasBossMedusaLeft",this.fishShadow.movie.anchor.set(.25,.35),this.rotationDirection=Math.PI/4*3,this.movie=this.Left;break;case"Right":this.atlas="AtlasBossMedusaRight",this.fishShadow.movie.anchor.set(.75,.5),this.rotationDirection=2*Math.PI/8*7,this.movie=this.Right}this.fishShadow.movie.visible=!0,this.movie.visible=!0,this.movie.gotoAndPlay(0),ResourceManager.Atlas[this.atlas+"Swim"]&&(this.fishShadow.movie.textures=ResourceManager.Atlas[this.atlas+"Swim"].textures.fish101Swim),this.fishShadow.movie.gotoAndPlay(0),this.fishShadow.movie.animationSpeed=1/7}moveTopLeftPath(e,t){this.changAtlasTextute("TopLeft");const i=TweenMax.fromTo(this,this._timeconfig,{x:this.x,y:this.y},{x:this.x+e,y:this.y+t,onComplete:this.changeDirection2.bind(this),onUpdate:this.onFishSwimUpdate.bind(this),ease:Linear.easeNone});this._timeLineMax.append(i)}moveTopRightPath(e,t){this.changAtlasTextute("TopRight");const i=TweenMax.fromTo(this,this._timeconfig,{x:this.x,y:this.y},{x:this.x-e,y:this.y+t,onComplete:this.changeDirection2.bind(this),onUpdate:this.onFishSwimUpdate.bind(this),ease:Linear.easeNone});this._timeLineMax.append(i)}moveBotRightPath(e,t){this.changAtlasTextute("BotRight");const i=TweenMax.fromTo(this,this._timeconfig,{x:this.x,y:this.y},{x:this.x-e,y:this.y-t,onComplete:this.changeDirection2.bind(this),onUpdate:this.onFishSwimUpdate.bind(this),ease:Linear.easeNone});this._timeLineMax.append(i)}moveBotLeftPath(e,t){this.changAtlasTextute("BotLeft");const i=TweenMax.fromTo(this,this._timeconfig,{x:this.x,y:this.y},{x:this.x+e,y:this.y-t,onComplete:this.changeDirection2.bind(this),onUpdate:this.onFishSwimUpdate.bind(this),ease:Linear.easeNone});this._timeLineMax.append(i)}moveRightPath(e,t){this.changAtlasTextute("Right");const i=TweenMax.fromTo(this,this._timeconfig,{x:this.x,y:this.y},{x:this.x-e,y:this.y+t,onComplete:this.changeDirection2.bind(this),onUpdate:this.onFishSwimUpdate.bind(this),ease:Linear.easeNone});this._timeLineMax.append(i)}moveLeftPath(e,t){this.changAtlasTextute("Left");const i=TweenMax.fromTo(this,this._timeconfig,{x:this.x,y:this.y},{x:this.x+e,y:this.y+t,onComplete:this.changeDirection2.bind(this),onUpdate:this.onFishSwimUpdate.bind(this),ease:Linear.easeNone});this._timeLineMax.append(i)}onFishSwimUpdate(){this.fishShadow.movie.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.movie.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.movie.rotation=this.movie.rotation,this.refreshInView(),this.refreshIsLock()}attackPath(){this._timeLineMax&&(this._timeLineMax.paused(!0),this.movie.textures=ResourceManager.Atlas[this.atlas+"Attack"].textures.fish101Attack,this.movie.gotoAndPlay(0),this.onEnterFrame=this.onEnterFrame.bind(this),this.readyAttack=!0,AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrame),this.fishShadow.movie.textures=ResourceManager.Atlas[this.atlas+"Attack"].textures.fish101Attack,this.fishShadow.movie.gotoAndPlay(0),this.movie.loop=!1,this.movie.onComplete=this.onCompleteAttackPath.bind(this,0))}frezzePath(e){if(this._timeLineMax){let t;switch(this._timeLineMax.paused(!0),e){case 0:this.changAtlasTextute("TopRight"),t=Utilities.Number.angleRadBetweenTwoPoint(215,720,this.x,this.y);break;case 1:this.changAtlasTextute("TopLeft"),t=Utilities.Number.angleRadBetweenTwoPoint(1065,720,this.x,this.y);break;case 2:this.changAtlasTextute("BotRight"),t=Utilities.Number.angleRadBetweenTwoPoint(1065,0,this.x,this.y);break;case 3:this.changAtlasTextute("BotLeft"),t=Utilities.Number.angleRadBetweenTwoPoint(215,0,this.x,this.y);break;default:this.changAtlasTextute("Right"),t=Utilities.Number.angleRadBetweenTwoPoint(215,0,this.x,this.y)}this.movie.textures=ResourceManager.Atlas[this.atlas+"Frezze"].textures.fish101Frezze,this.movie.gotoAndPlay(0),this.fishShadow.movie.textures=ResourceManager.Atlas[this.atlas+"Frezze"].textures.fish101Frezze,this.fishShadow.movie.gotoAndPlay(0),this.onEnterFrame=this.onEnterFrame.bind(this),this.readyFrezze=!0,AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrame),this.movie.loop=!1,this.movie.onComplete=this.onCompleteFrezzePath.bind(this,e)}}onCompleteFrezzePath(e){if(this._timeLineMax){this._timeLineMax.paused(!1);const t=AppInfo.gameMovie.displayController.getUserSeatByPosition(e);t&&t.medusaCrowdControl(),AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrame),this.movie.loop=!0,this.movie.gotoAndPlay(0),this.changeDirection2()}}onCompleteAttackPath(e){this._timeLineMax&&(this._timeLineMax.paused(!1),AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrame),this.movie.textures=ResourceManager.Atlas[this.atlas+"Swim"].textures.fish101Swim,this.movie.loop=!0,this.movie.gotoAndPlay(0),this.changeDirection2())}die(e){if(AppInfo.gameMovie.gameBoard.medusaDie=!0,this.isLock?this.unLock():this.unreadyForLock(),TweenMax.killTweensOf(this),this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),AppInfo.GameInfo.tournamentRoom)return void super.die();(this.movie.scaleX=-1)&&(this.movie.scaleX=1,this.fishShadow.movie.scaleX=1),this.movie.textures=ResourceManager.Atlas.AtlasBossMedusaDie.textures.MedusaBodyAfterDie,this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMedusaDie.textures.MedusaBodyDie;let t,i=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaDie.textures.MedusaBodyDie),s=new PIXI.Graphics.Circle(0,0,i.width,i.height,5),o=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaDie.textures.MedusaLight);this.movie.anchor.set(.5,.5),this.fishShadow.movie.anchor.set(.5,.5),i.anchor.set(.5,.5),o.anchor.set(.5,.5),o.gotoAndPlay(0),o.animationSpeed=1/6,o.visible=!1,i.mask=s,s.scaleTime=0,TweenMax.to(s,PreLoaderConfig.BossConfig.timeShowFrezzeMedusa/1e3,{scaleTime:1,ease:Linear.easeNone,onUpdate:()=>{s.scale.set(s.scaleTime,s.scaleTime),i.mask=s},onComplete:()=>{null!=this.parent&&"function"==typeof e&&e()}}),TweenMax.to(o,5,{rotation:Utilities.toRad(359),repeat:-1,ease:Linear.easeNone}),this.addChild(i),this.addChild(s),this.addChild(o),setTimeout(()=>{null!=this.parent&&(o.visible=!0)},PreLoaderConfig.BossConfig.timeShowCutHead+3e3),setTimeout(()=>{null!=this.parent&&(this.alpha=0,this.fishShadow.alpha=0,o&&(TweenMax.killTweensOf(o),o.gotoAndStop(0),o.destroy(),o=null),i&&(i.destroy(),i=null),s&&(s.destroy(),s=null),this.removeChild(i),this.removeChild(o),this.removeChild(s))},PreLoaderConfig.BossConfig.timeShowCutHead+5e3);for(let e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)t=AppInfo.gameMovie.gameBoard.listFish[e],t.hasStone&&t.unStone(),t.isStuned&&t.resumeGame(),t.runTween.timeScale(5)}onCompleteFishRun(e){null!=e&&null!=e.parent&&e.dispose()}onUpdateSwimFish(e){e.fishShadow.x=e.x+PreLoaderConfig.ConfigPointFishShadow.x,e.fishShadow.y=e.y+PreLoaderConfig.ConfigPointFishShadow.y,e.fishShadow.rotation=e.rotation,e.refreshInView(),e.refreshIsLock()}lock(){this.isLock||(this.isLock=!0,null==this.lockSprite&&(this.lockSprite=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.gunLock),this.lockSprite.interactive=!1,this.lockSprite.hitArea=PIXI.Rectangle.EMPTY,this.lockSprite.name="lockSprite",this.lockSprite.anchor.set(.5,.5)),this.lockSprite.x=0,this.lockSprite.y=0,this.addChild(this.lockSprite))}dispose(){this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),AppInfo.gameMovie.gameBoard.currentBoss=null,AppInfo.gameMovie.gameBoard.listFish.includes(this)&&AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(this)),this.removeChild(this.Left),this.removeChild(this.Right),this.removeChild(this.BotLeft),this.removeChild(this.BotRight),this.removeChild(this.TopRight),this.removeChild(this.TopLeft),this.Left.destroy(),this.Right.destroy(),this.BotLeft.destroy(),this.BotRight.destroy(),this.TopRight.destroy(),this.TopLeft.destroy(),this.Left=null,this.Right=null,this.BotLeft=null,this.BotRight=null,this.TopRight=null,this.TopLeft=null,super.dispose()}onResize(e){super.onResize(e)}onEnterFrame(){if(17==this.movie.currentFrame&&this.readyAttack)if(AppInfo.GameInfo.tournamentRoom)this.readyAttack=!1,this._playEffectShot();else{this.readyAttack=!1;const t=Math.round(Math.sqrt(this.x**2+this.y**2)+1280);for(var e=0;e<5;e++){const i=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaDie.textures.MedusaArrow);i.gotoAndPlay(0);let s=Utilities.toRad(18);s*=e,i.rotation=s+this.rotationDirection,i.x=this.x,i.y=this.y,i.toX=this.x-t*Math.cos(s+this.rotationDirection),i.toY=this.y-t*Math.sin(s+this.rotationDirection),i.anchor.set(1,1),i.animationSpeed=1/6,i.nodeTree?AppInfo.gameMovie.collisionManager.add(i.nodeTree):i.nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(i,[12,20,230,20,230,52,12,52],r.a.TYPE_COLLISION.GENERIC),i.onTriggerCollide=this.onArrowHit.bind(this),AppInfo.gameMovie.layerEffect.addChild(i),TweenMax.fromTo(i,1.5,{x:i.x,y:i.y},{x:i.toX,y:i.toY,ease:Linear.easeNone,onComplete:this.onCompleteMoveArrow,onCompleteParams:[i],onCompleteScope:this})}}else if(12==this.movie.currentFrame&&this.readyFrezze){let t,i,s,o,n;switch(this.readyFrezze=!1,this.atlas.replace("AtlasBossMedusa","")){case"TopLeft":t=this.x,s=this.x+this.movie.width,i=this.y,o=this.y+this.movie.height;break;case"TopRight":t=this.x-this.movie.width,s=this.x,i=this.y,o=this.y+this.movie.height;break;case"BotRight":-1==this.movie.scaleX?(t=this.x,s=this.x+this.movie.width,i=this.y-this.movie.height,o=this.y):(t=this.x-this.movie.width,s=this.x,i=this.y-this.movie.height,o=this.y);break;case"Left":t=this.x,s=this.x+this.movie.width,i=this.y,o=this.y+this.movie.height;break;case"Right":t=this.x-this.movie.width,s=this.x,i=this.y-this.movie.height,o=this.y}for(e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)n=AppInfo.gameMovie.gameBoard.listFish[e],n.x>t&&n.x<s&&n.y>i&&n.y<o&&n.stone()}}onArrowHit({target:e}){const t=e;AppInfo.GameInfo.tournamentRoom||t.stone()}onCompleteMoveArrow(e){e&&(e.nodeTree&&e.nodeTree.release(),e.gotoAndStop(0),e.destroy())}_onCompleteMoveArrowInBattle(e,t){"function"==typeof this._callBack&&4===t&&this._callBack(),e&&(e.gotoAndStop(0),e.destroy(),e.particle&&e.particle.dispose())}_playEffectShot(){const e=Math.round(Math.sqrt(this.x**2+this.y**2)+Utilities.Number.distanceBetweenTwoPoint(this,this._endPoint));let t=0;for(let i=0;i<5;i++){const s=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaDie.textures.MedusaArrow);s.scale.set(.7),s.gotoAndPlay(0);const o=Utilities.toRad(Utilities.Number.angleDegBetweenTwoPoint(this,this._endPoint)+180);s.rotation=o,3==i?t=-1:4==i&&(t=-2),s.x=this.x+100*Math.cos(o+.2*t),s.y=this.y+100*Math.sin(o+.2*t),s.toX=s.x-e*Math.cos(o),s.toY=s.y-e*Math.sin(o),s.anchor.set(.5),s.animationSpeed=1/6,t++;const n=new l.a(p.PARTICLE_ARROW);AppInfo.gameMovie.layerEffect.addChild(s),AppInfo.gameMovie.layerEffect.addChild(n),n.playParticle(s.x,s.y),s.particle=n,TweenMax.to(s,2,{startAt:{x:s.x,y:s.y},x:s.toX,y:s.toY,delay:.01*i,ease:Linear.easeNone,onUpdate:(({_emitter:e},{x:t,y:i})=>{e.ownerPos.x=t,e.ownerPos.y=i}).bind(this,n,s),onComplete:this._onCompleteMoveArrowInBattle.bind(this),onCompleteParams:[s,i]})}}_getAngleByPosition(e){switch(e){case 0:return Utilities.toRad(52);case 1:return Utilities.toRad(40);case 2:return Utilities.toRad(33);case 3:return Utilities.toRad(60)}}}p.PARTICLE_ARROW={art:[{framerate:20,loop:!0,textures:["lightProgress.png"]},{framerate:20,loop:!0,textures:["lightProgress.png"]}],alpha:{start:.73,end:.46},scale:{start:.35,end:.6,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:100,end:100,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:-45,max:45},noRotation:!1,rotationSpeed:{min:0,max:200},lifetime:{min:4,max:4},blendMode:"normal",ease:[{s:0,cp:.379,e:.548},{s:.548,cp:.717,e:.676},{s:.676,cp:.635,e:1}],frequency:.05,emitterLifetime:-1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"};var d=p;class c extends o.a{constructor(e,t,i){super(e,t),this.baseEffect=null,this.step=0,this.pathAction=[],this._timeconfig=20,this._timeLineMax=null,this.init(),this.isBossMap=!0,this._runInBattle=!1;const s=[{animation:"Swim",x:640,startX:-this.width/2,startY:320},{animation:"Attack",x:0},{animation:"Swim",x:1280+this.width/2},{animation:"Swim",x:640},{animation:"Attack",x:0},{animation:"Swim",x:-this.width/2}],o=[{animation:"Swim",x:640,startX:1280+this.width/2,startY:320},{animation:"Attack",x:0},{animation:"Swim",x:0},{animation:"Swim",x:640},{animation:"Attack",x:0},{animation:"Swim",x:1280+this.width/2}];this.pathAction=0==i?s:o,this.pathAction=s,this.step=0}init(){this._isDisposed&&(this._isDisposed=!1,this.attack=ResourceManager.Atlas.AtlasBossCentaur.textures.fish102Attack,this.swim=ResourceManager.Atlas.AtlasBossCentaur.textures.fish102Swim,this.dieTexture=ResourceManager.Atlas.AtlasBossCentaur.textures.fish102Die,this.name="bosscentaur",this.movie=new PIXI.extras.AnimatedSprite(this.swim),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(this.fishShadow=new h(this.id,this.type,this.indexInGroup)),null==this.baseEffect&&(this.baseEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossCentaur.textures.centaurBaseEffect),this.addChild(this.baseEffect),this.baseEffect.animationSpeed=1/8,this.baseEffect.anchor.set(.5,.5),this.baseEffect.x=-40,this.baseEffect.y=146,this.baseEffect.visible=!1,this.baseEffect.gotoAndStop(0)),null==this._timeLineMax&&(this._timeLineMax=new TimelineMax),this.addChild(this.movie),this.movie.animationSpeed=1/6,this.fishShadow&&(this.addChild(this.fishShadow),this.fishShadow.movie.animationSpeed=1/6,this.fishShadow.movie.anchor.set(.5,.5)),this.movie.anchor.set(.5,.5),this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,this.bgEffect=new PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,0,.8),this.bgEffect.name="DarkSky",AppInfo.gameMovie.layerFish.addChild(this.bgEffect),this.bgEffect.visible=!1,AppInfo.gameMovie.gameBoard.waitLockFish&&this.readyForLock(),this.deltaWToCalInView=Math.max(this.width/2,this.height/2),this.deltaHToCalInView=this.deltaWToCalInView,this.addCollision())}die(){AppInfo.gameMovie.gameBoard.medusaDie=!0,AppInfo.gameMovie.gameBoard.listFish.includes(this)&&AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(this)),this.isLock?this.unLock():this.unreadyForLock(),TweenMax.killTweensOf(this),this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),this.bgEffect&&(this.bgEffect.destroy(),this.bgEffect=null),this.movie.textures=this.dieTexture,this.movie.loop=!1,this.movie.gotoAndPlay(0),this.movie.animationSpeed=1/4,this.fishShadow&&(this.fishShadow.movie.textures=this.dieTexture,this.fishShadow.movie.loop=!1,this.fishShadow.movie.gotoAndPlay(0),this.fishShadow.movie.animationSpeed=1/4),this.movie.onComplete=this.onCompleteEffectDie.bind(this)}onCompleteEffectDie(){const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.EffectBoom);e.scale.set(2),e.anchor.set(.5),e.gotoAndPlay(0),e.animationSpeed=1/4,this.addChild(e),e.loop=!1,this.fishShadow?TweenMax.to([this.movie,this.fishShadow],.4,{alpha:0}):TweenMax.to(this.movie,.4,{alpha:0}),e.onComplete=()=>{const e=new l.a(c.ParticleCoinWin);AppInfo.gameMovie.layerEffect.addChild(e),AppInfo.gameMovie.gameBoard.listFishDieParticle.push(e),e.playParticle(this.x,this.y)}}run(){this.x=this.pathAction[0].startX,this.y=this.pathAction[0].startY,this.fishShadow&&this.fishShadow.run(),this.runAnimation()}runInBattle(e){this._runInBattle=!0,TweenMax.killTweensOf(this),this.x=1280,this.y=360,this.scale.x=-1,this.fishShadow.scale.x=-1,this.movie.gotoAndPlay(0),this.fishShadow.movie.gotoAndPlay(0),this._runTween=TweenMax.to(this,e,{bezier:{values:[{x:1280,y:360},{x:640,y:360},{x:115,y:360}],type:"quataric"},onUpdate:this.onBossSwimUpdate.bind(this),onComplete:()=>{this.dispose()},ease:Linear.easeNone})}attackUser(e,t,i){this._runTween.pause(),this._enPoint=t,this._attackPosition=i,this.changeActionAttack(e)}runAnimation(){if(this.step!=this.pathAction.length){switch(this.action=this.pathAction[this.step].animation,this.action){case"Swim":this.changeActionSwim(this.pathAction[this.step].x);break;case"Attack":this.changeActionAttack()}this.step++}else this.dispose()}changeActionSwim(e){if(this._timeLineMax){this.movie.textures=this.swim,this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=this.swim,this.fishShadow.movie.gotoAndPlay(0)),this.x>e?(this.movie.scaleX=-1,this.fishShadow&&(this.fishShadow.movie.scaleX=-1),this.baseEffect.x=0):this.baseEffect.x=-40;const t=TweenMax.to(this,this._timeconfig,{x:e,onUpdate:this.onBossSwimUpdate.bind(this),onComplete:this.runAnimation.bind(this),ease:Linear.easeNone});this._timeLineMax.append(t)}}changeActionAttack(e){this.movie.textures=this.attack,this.fishShadow&&(this.fishShadow.movie.textures=this.attack),this._timeLineMax&&(this.movie.gotoAndPlay(0),this.fishShadow&&this.fishShadow.movie.gotoAndPlay(0),this.onEnterFrame=this.onEnterFrame.bind(this),AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrame),this.fishShadow&&(this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.movie.loop=!1),this.movie.loop=!1,this._runInBattle?this.movie.onComplete=this.onCompleteAttackInBattle.bind(this,e):this.movie.onComplete=this.onCompleteAttack.bind(this),this.bgEffect.visible=!0,TweenMax.to(this.bgEffect,1.5,{startAt:{alpha:0},alpha:1}),AppInfo.gameMovie.layerFish.setChildIndex(this.bgEffect,AppInfo.gameMovie.layerFish.numChildren-2))}onCompleteAttack(){if(this._timeLineMax){let e;for(e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++){const t=AppInfo.gameMovie.gameBoard.listFish[e];if(t&&t.type!=this.type){t.stun();const i=Utilities.Number.randRange(120,1100),s=Utilities.Number.randRange(70,500),o=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossCentaur.textures.thunderEffect);o.anchor.set(.5,.5),o.animationSpeed=1/4,o.loop=!1,o.visible=!1,TweenMax.to(o,.1,{delay:.1*e,onComplete:(e=>{e.gotoAndPlay(0),e.visible=!0,TweenMax.to(e,.1,{y:e.y+50})}).bind(this,o)}),o.onComplete=((e,t)=>{e.visible=!1,e&&e.parent&&(AppInfo.gameMovie.layerEffect.addChild(e),e.destroy(),e=null)}).bind(this,o,t),o.position.set(i,s),AppInfo.gameMovie.layerEffect.addChild(o)}}TweenMax.to(this,5,{onComplete:()=>{null!=this.parent&&(this.bgEffect&&(this.bgEffect.visible=!1),this.movie.loop=!0,this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.loop=!0,this.fishShadow.movie.gotoAndPlay(0)),this.runAnimation())}})}}onCompleteAttackInBattle(e){if(this._timeLineMax){let t;for(t=0;t<10;t++){const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossCentaur.textures.thunderEffect);e.anchor.set(.5,.5),e.scale.set(.8),e.animationSpeed=1/4,e.loop=!1,e.visible=!1,TweenMax.to(e,.1,{delay:.05*t,onComplete:(e=>{e.gotoAndPlay(0),e.visible=!0,TweenMax.to(e,.01,{y:e.y+70})}).bind(this,e)}),e.onComplete=(e=>{e.visible=!1,e&&e.parent&&(AppInfo.gameMovie.layerEffect.removeChild(e),e.destroy(),e=null)}).bind(this,e),e.position.set(this.x-(this.x-this._enPoint.x)/10*(t+1)+50,this.y-(this.y-this._enPoint.y)/10*(t+1)-100),AppInfo.gameMovie.layerEffect.addChild(e)}TweenMax.to(this,1.5,{onComplete:()=>{null!=this.parent&&(this.bgEffect&&(this.bgEffect.visible=!1),this.movie.textures=this.swim,this.movie.loop=!0,this.movie.gotoAndPlay(0),this.movie.animationSpeed=1/6,this.fishShadow&&(this.fishShadow.movie.loop=!0,this.fishShadow.movie.gotoAndPlay(0),this.fishShadow.movie.textures=this.swim,this.fishShadow.movie.animationSpeed=1/6),"function"==typeof e&&e(),this._runTween.play())}})}}onBossSwimUpdate(){this.fishShadow&&(this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.movie.rotation=this.movie.rotation),this.refreshInView(),this.refreshIsLock()}lock(){this.isLock||(this.isLock=!0,null==this.lockSprite&&(this.lockSprite=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.gunLock),this.lockSprite.interactive=!1,this.lockSprite.hitArea=PIXI.Rectangle.EMPTY,this.lockSprite.name="lockSprite",this.lockSprite.anchor.set(.5,.5)),this.lockSprite.x=0,this.lockSprite.y=0,this.addChild(this.lockSprite))}onEnterFrame(){21==this.movie.currentFrame&&(this.baseEffect.visible=!0,this.baseEffect.gotoAndPlay(0),this.baseEffect.loop=!1,this.baseEffect.onComplete=this.onCompleteBase.bind(this))}onCompleteBase(){this.baseEffect.visible=!1,AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrame)}dispose(){this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),AppInfo.gameMovie.gameBoard.currentBoss=null,this.bgEffect&&(this.bgEffect.parent.removeChild(this.bgEffect),this.bgEffect.destroy(),this.bgEffect=null),super.dispose()}}c.ParticleCoinWin={art:[{framerate:10,loop:!0,textures:["CoinWin0.png","CoinWin2.png","CoinWin3.png","CoinWin4.png","CoinWin5.png","CoinWin6.png","CoinWin7.png","CoinWin8.png"]},{framerate:10,loop:!0,textures:["CoinWin8.png","CoinWin7.png","CoinWin6.png","CoinWin5.png","CoinWin4.png","CoinWin3.png","CoinWin2.png","CoinWin1.png"]}],alpha:{start:1,end:1},scale:{start:.5,end:.8,minimumScaleMultiplier:2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:50,minimumSpeedMultiplier:0},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:8,max:8},blendMode:"normal",frequency:.001,emitterLifetime:1,maxParticles:1e3,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:180,minR:0}};var u=c,m=i(78);class f extends m.a{constructor(e,t,i,s,o){super(e,t,i,s,o),this.collisionTemplate=null}init(){if(this._isDisposed){this._isDisposed=!1;const e=ResourceManager.Atlas["AtlasBossSevenSeaFish"+this.type].textures["fish"+this.type+"Swim"];this.movie=new PIXI.extras.AnimatedSprite(e),this.movie.alpha=.5,this.movie.interactive=!1,this.movie.hitArea=PIXI.Rectangle.EMPTY,this.movie.tint=0,this.movie.anchor.set(.5,.5),this.addChild(this.movie),this.movie.gotoAndStop(0),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY}}}var g=f;class I{constructor(){this.defaultValue={width:200,height:200,speed:.5}}getCollision(e){return I.LIST_COLLISION_BY_TYPE[e]||this.defaultValue}}I.LIST_COLLISION_BY_TYPE={57:{width:200,height:200,speed:.5},58:{width:200,height:200,speed:.5},59:{width:200,height:200,speed:.5},60:{width:250,height:250,speed:1/3},103:{width:200,height:200,speed:.5},104:{width:200,height:200,speed:.5},105:{width:250,height:250,speed:.5}};var y=I;class C extends o.a{constructor(e,t,i,s,o){super(e,t,i,s,o),this.isBossMap=!0}init(){if(this._isDisposed){this._isDisposed=!1;const e=ResourceManager.Atlas["AtlasBossSevenSeaFish"+this.type].textures["fish"+this.type+"Swim"];this.swim=ResourceManager.Atlas["AtlasBossSevenSeaFish"+this.type].textures["fish"+this.type+"Swim"],this.attack=ResourceManager.Atlas["AtlasBossSevenSeaFish"+this.type].textures["fish"+this.type+"Attack"],this.movie=new PIXI.extras.AnimatedSprite(e),this.movie.anchor.set(.5,.5),this.movie.animationSpeed=o.a.LIST_ANIMATIONSPEED[this.type]||1/4,this.addChild(this.movie),this.movie.gotoAndStop(0),this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(void 0!==this.fishShadow&&null!==this.fishShadow||(this.fishShadow=new g(this.id,this.type,this.indexInGroup),this.fishShadow.movie.animationSpeed=o.a.LIST_ANIMATIONSPEED[this.type]||1/4)),AppInfo.gameMovie.gameBoard.waitLockFish&&this.readyForLock(),this.deltaWToCalInView=Math.max(this.width/2,this.height/2),this.deltaHToCalInView=this.deltaWToCalInView,null==this._timeLineMax&&(this._timeLineMax=new TimelineMax),this.addCollision()}}dispose(){AppInfo.gameMovie.gameBoard.listFish.slice(AppInfo.gameMovie.gameBoard.listFish.indexOf(this),1),this.visible=!1,this.fishShadow.visible=!1,AppInfo.gameMovie.gameBoard.currentBoss=null,super.dispose()}die(){TweenMax.killTweensOf(this),this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),AppInfo.gameMovie.gameBoard.listFish.slice(AppInfo.gameMovie.gameBoard.listFish.indexOf(this),1),ResourceManager.Atlas["AtlasBossSevenSeaFish"+this.type].textures["fish"+this.type+"Die"]?(this.movie.textures=this.fishShadow.movie.textures=ResourceManager.Atlas["AtlasBossSevenSeaFish"+this.type].textures["fish"+this.type+"Die"],this.movie.gotoAndPlay(0),this.movie.loop=this.fishShadow.movie.loop=!1,TweenMax.to([this.movie,this.fishShadow.movie],10,{alpha:0,onComplete:this.dispose.bind(this)})):TweenMax.to(this,.5,{alpha:0,onComplete:()=>{this.dispose()}})}changeActionTexture(e){this.movie.textures=e,this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=e,this.fishShadow.movie.gotoAndPlay(0))}onEnterFrame(e){}}var x=C;class w extends x{constructor(e,t,i){super(e,t,i),this.limitThunder=5,this.lightEffect=null,this.effectIceBeam=null,this.step=0,this.listThunderBoss=[],this.baseEffect=null,this._timeconfig=20,this.pathID=i||0}init(){if(super.init(),null===this.baseEffect){this.baseEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.Fish103Base),this.baseEffect.anchor.set(.5),this.baseEffect.animationSpeed=.5,this.baseEffect.visible=!0,this.baseEffect.position.set(0,220),this.baseEffect.gotoAndPlay(0);const e=TweenMax.to(this.baseEffect,1,{startAt:{alpha:0},alpha:1,repeat:-1,yoyo:!0});this.baseEffect.tween=e,this.baseEffect.tween.play(),this.addChildAt(this.baseEffect,this.children.length-1)}const e=370,t=[{animation:"Swim",x:640,y:e,startX:-this.width/2,startY:e},{animation:"Attack",x:0},{animation:"Swim",x:1280+this.width/2,y:e},{animation:"Swim",x:640,y:e},{animation:"Attack",x:0},{animation:"Swim",x:-this.width/2,y:e}],i=[{animation:"Swim",x:640,y:e,startX:1280+this.width/2,startY:e},{animation:"Attack",x:0,y:e},{animation:"Swim",x:0,y:e},{animation:"Swim",x:640,y:e},{animation:"Attack",x:0,y:e},{animation:"Swim",x:1280+this.width/2,y:e}];0==this.pathID?this.pathAction=t:this.pathAction=i,this.pathAction=t,this.step=0;PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,Utilities.toRad(120);this.x=this.pathAction[0].startX,this.y=this.pathAction[0].startY,this.scale.set(.9),this.movie.animationSpeed=1/4,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1/4,this.fishShadow.scale.set(.9))}run(){AppInfo.preLoader.soundController.stopGameBGSound(),this.runAnimation(),this.earthQuake()}runInBattle(e){this._runInBattle=!0,TweenMax.killTweensOf(this),this.x=1280,this.y=360,this.scale.x=-1,this.fishShadow.scale.x=-1,this.movie.gotoAndPlay(0),this.fishShadow&&this.fishShadow.movie.gotoAndPlay(0),this._runTween=TweenMax.to(this,e,{bezier:{values:[{x:1280,y:360},{x:640,y:360},{x:115,y:360}],type:"quataric"},onUpdate:this.onFishSwimUpdate.bind(this),onComplete:()=>{this.dispose()},ease:Linear.easeNone})}attackUser(e,t,i){this._runTween.pause(),this._endPoint=t,this._attackPosition=i,this.callBack=e,this.changeActionAttackBattle(e)}runAnimation(){if(this.step!=this.pathAction.length){switch(this.pathAction[this.step].animation){case w.ACTION_SWIM:this.changeActionSwim();break;case w.ACTION_ATTACK:this.changeActionAttack()}this.step++}else this.dispose()}changeActionSwim(){if(this._timeLineMax){this.stopBaseEffect(),this.changeActionTexture(this.swim);const e=this.pathAction[this.step];let t=!1;const i=this;this.x>e.x&&(this.movie.scaleX=-1,this.fishShadow&&(this.fishShadow.movie.scaleX=-1));const s=TweenMax.to(i,this._timeconfig,{ease:Power0.easeNone,bezier:{values:[{x:this.x,y:this.y},{x:e.x,y:e.y}],autoRotate:["rotation",0,!0]},onUpdate:function(e){e.onFishSwimUpdate(),26!=e.movie.currentFrame||t||(e.movie.stop(),e.hasStopped=!0,e.fishShadow&&e.fishShadow.stun(),t=!0,this._timeLineMax.timeScale(4),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.isStuned||e.hasStone||e.hasFrozen||(e.movie.play(),e.hasStopped=!1,e.fishShadow&&e.fishShadow.resumeGame()),t=!1,TweenMax.to(e._timeLineMax,1,{timeScale:1,ease:Power3.easeOut,onComplete(){}}))},10))}.bind(i),onUpdateParams:[i],onComplete:i.runAnimation.bind(i)});this._timeLineMax.append(s)}}playBaseEffect(){if(null==this.lightEffect){this.baseEffect.tween.pause(),this.baseEffect.gotoAndPlay(0),this.lightEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.Fish103Light),this.lightEffect.anchor.set(.5),this.lightEffect.animationSpeed=1/6,this.lightEffect.visible=!1,this.addChild(this.lightEffect),this.listThunderBoss=[];for(var e=0;e<10;e++){(t=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.ThunderBoss)).anchor.set(.5),t.visible=!1;const e=Utilities.Number.randRange(-250,250),i=Utilities.Number.randRange(-20,-120);t.x=e,t.y=i-50,t.gotoAndPlay(0),t.animationSpeed=1/Utilities.Number.randRange(1,8),this.addChild(t),this.listThunderBoss.push(t)}}this.baseEffect.visible=!0,this.lightEffect.visible=!0,this.baseEffect.gotoAndPlay(0),this.lightEffect.gotoAndPlay(0);for(e=0;e<this.listThunderBoss.length;e++){var t;const i=(t=this.listThunderBoss[e]).y+20;TweenMax.killTweensOf(t),TweenMax.to(t,.5,{onStart:function(){this.visible=!0,this.gotoAndPlay(0)}.bind(t),y:i,delay:.1*e,repeat:-1})}}stopBaseEffect(){if(null!=this.lightEffect){this.baseEffect.tween.play(),this.baseEffect.gotoAndStop(0),this.lightEffect.gotoAndStop(0),this.lightEffect.visible=!1;for(const e of this.listThunderBoss)e.visible=!1,TweenMax.killTweensOf(e),e.gotoAndStop(0)}}changeActionAttack(e){this._timeLineMax&&(this.changeActionTexture(this.attack),this.movie.animationSpeed=1/4,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1/4),null==this.effectIceBeam&&(this.effectIceBeam=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.EffectIceBeam),this.movie.addChild(this.effectIceBeam),this.effectIceBeam.visible=!1,this.effectIceBeam.anchor.set(.5),this.effectIceBeam.animationSpeed=1/4,this.effectIceBeam.loop=!1,this.effectIceBeam.onComplete=this.onCompleteIceBeamEffect.bind(this),this.effectIceBeam.position.set(-80,-300)),this.effectIceBeam.visible=!0,this.effectIceBeam.gotoAndPlay(0),this.effectIceBeam.scale.set(0),this.effectIceBeam.alpha=0,AppInfo.preLoader.soundController.playPoseidonGong(),TweenMax.to(this.effectIceBeam,.1,{scaleX:1,scaleY:1,alpha:1}),this.playBaseEffect())}changeActionAttackBattle(e){this.changeActionTexture(this.attack),this.movie.animationSpeed=1/4,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1/4),null==this.effectIceBeam&&(this.effectIceBeam=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.EffectIceBeam),this.movie.addChild(this.effectIceBeam),this.effectIceBeam.visible=!1,this.effectIceBeam.anchor.set(.5),this.effectIceBeam.animationSpeed=1/4,this.effectIceBeam.loop=!1,this.effectIceBeam.onComplete=this.onCompleteIceBeamEffectBattle.bind(this,e),this.effectIceBeam.position.set(-80,-300)),this.effectIceBeam.visible=!0,this.effectIceBeam.gotoAndPlay(0),this.effectIceBeam.scale.set(0),this.effectIceBeam.alpha=0,AppInfo.preLoader.soundController.playPoseidonGong(),TweenMax.to(this.effectIceBeam,.1,{scaleX:1,scaleY:1,alpha:1}),this.playBaseEffect()}onCompleteIceBeamEffect(){AppInfo.preLoader.soundController.playPoseidonNo(),AppInfo.preLoader.soundController.stopPoseidonGong();const e=new PIXI.Sprite(ResourceManager.Atlas["AtlasBossSevenSeaFish"+this.type].textures["fish"+this.type+"Attack"][0]);e.anchor.set(.5),e.scaleX=this.movie.scaleX,this.addChild(e),TweenMax.to(e,.5,{alpha:0,scaleX:3*e.scaleX,scaleY:3*e.scaleY,repeat:5,onComplete:function(e){null!=this.parent&&e.destroy()}.bind(this,e)}),this.effectIceBeam.visible=!1,this.effectIceBeam.gotoAndStop(0);const t=AppInfo.gameMovie.gameBoard.listFish;this.listSpriteThunder=[],this.listMaskSpriteThunder=[];const i=this.toLocal(this.effectIceBeam.position,this.effectIceBeam.parent),s=new PIXI.Point,o=this.effectIceBeam;for(const e of t)if(e.type!=this.type&&!e.isRedFish&&e.hasInView){this.toLocal(e.position,e.parent,s);const t=Utilities.Number.distanceBetweenTwoPoint(o.getGlobalPosition(),e.getGlobalPosition()),n=Utilities.Number.angleRadBetweenTwoPoint(i,s),a=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.EffectThunderBeam);a.animationSpeed=1/8,a.width=t,a.anchor.set(0,.5),a.visible=!1,a.position.set(i.x,i.y),a.rotation=n,a.gotoAndStop(0),this.addChildAt(a,0),this.listSpriteThunder.push(a);const h=PIXI.Graphics.Rectangle(0,0,t,a.height,0,1);h.isMask=!1,h.pivot.set(0,h.height/2),h.oriWidth=h.width,h.oriHeight=h.height,h.toPos={x:i.x,y:i.y},this.addChildAt(h,0),this.listMaskSpriteThunder.push(h),a.mask=h,h.position.set(i.x+t*Math.cos(n+Math.PI),i.y+t*Math.sin(n+Math.PI)),h.rotation=n}this._playEffectBossAttack()}onCompleteIceBeamEffectBattle(e){AppInfo.preLoader.soundController.playPoseidonNo(),AppInfo.preLoader.soundController.stopPoseidonGong();const t=new PIXI.Sprite(ResourceManager.Atlas["AtlasBossSevenSeaFish"+this.type].textures["fish"+this.type+"Attack"][0]);t.anchor.set(.5),t.scaleX=this.movie.scaleX,this.addChild(t),TweenMax.to(t,.5,{alpha:0,scaleX:3*t.scaleX,scaleY:3*t.scaleY,repeat:5,onComplete:function(e){null!=this.parent&&e.destroy()}.bind(this,t)}),this.effectIceBeam.visible=!1,this.effectIceBeam.gotoAndStop(0);AppInfo.gameMovie.gameBoard.listFish;this.listSpriteThunder=[],this.listMaskSpriteThunder=[];const i=this.toLocal(this.effectIceBeam.position,this.effectIceBeam.parent),s=this._endPoint;for(let e=0;e<5;e++){const e=Utilities.Number.angleRadBetweenTwoPoint(i,s),t=Utilities.Number.distanceBetweenTwoPoint(this.getGlobalPosition(),this._endPoint),o=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.EffectThunderBeam);o.animationSpeed=1/8,o.width=t,o.anchor.set(1,.5),o.visible=!1,o.position.set(0,0);const n=this._endPoint;n.y=n.y+Utilities.Number.randRange(-50,50),o.rotation=Utilities.toRad(Utilities.Number.angleDegBetweenTwoPoint(n,this)),o.gotoAndStop(0),o.position.set(this.x,this.y),AppInfo.gameMovie.layerEffect.addChild(o),this.listSpriteThunder.push(o);const a=PIXI.Graphics.Rectangle(0,0,t,o.height,0,1);a.isMask=!1,a.pivot.set(0,a.height/2),a.oriWidth=a.width,a.oriHeight=a.height,a.toPos={x:i.x,y:i.y},this.listMaskSpriteThunder.push(a),a.position.set(i.x+t*Math.cos(e+Math.PI),i.y+t*Math.sin(e+Math.PI)),a.rotation=e}this._playEffectBossAttackBattle(e)}_playEffectBossAttackBattle(e){this.earthQuake();const t=this.listMaskSpriteThunder.length;if(0==this.listMaskSpriteThunder.length);else for(let e=0;e<t;e++){const t=this.listMaskSpriteThunder[e],i=this.listSpriteThunder[e];t.visible=!0,i.visible=!0,i.gotoAndPlay(0),TweenMax.to(t,t.oriWidth/w.ConfigValue.Velocity,{x:t.toPos.x,y:t.toPos.y,ease:Power0.easeNone,onStart:e=>{this.listSpriteThunder[e].visible=!0,this.listSpriteThunder[e].play(),AppInfo.gameMovie.soundController.playSet()},onStartParams:[e],delay:.02*e,onComplete:function(e){TweenMax.to(this.listSpriteThunder[e],.3,{alpha:0,repeat:4,onComplete:(e,t)=>{t===this.listSpriteThunder.length-1&&(e&&null!=e.parent&&(e.visible=!1),this.effectIceBeam.visible=!1,"function"==typeof this.callBack&&this.callBack(),this._runTween.play(),this.stopBaseEffect(),this.changeActionTexture(this.swim))},onCompleteParams:[this.listSpriteThunder[e],e]})}.bind(this,e)})}}_playEffectBossAttack(){this.earthQuake();const e=AppInfo.gameMovie.gameBoard.listFish,t=this.listMaskSpriteThunder.length;if(0==this.listMaskSpriteThunder.length)this.onCompleteAttack();else for(let i=0;i<t;i++){const t=this.listMaskSpriteThunder[i],s=this.listSpriteThunder[i],o=e[i];t.visible=!0,s.visible=!0,s.gotoAndPlay(0),TweenMax.to(t,t.oriWidth/w.ConfigValue.Velocity,{x:t.toPos.x,y:t.toPos.y,ease:Power0.easeNone,onStart:(e,t)=>{this.listSpriteThunder[e].visible=!0,this.listSpriteThunder[e].play(),t&&null!=t.parent&&t.hasInView&&(t.isCaTran||t.stun()),AppInfo.gameMovie.soundController.playSet()},onStartParams:[i,o],delay:.02*i,onComplete:function(e,t){if(t&&null!=t.parent&&t.type!=this.type){const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.ThunderStunFish);e.anchor.set(.5),e.width=w.ConfigValue.ThunderStunWH,e.height=w.ConfigValue.ThunderStunWH,t.addChild(e),t.thunderStun=e,TweenMax.killTweensOf(e),TweenMax.to(e,.1,{startAt:{alpha:0},alpha:1,repeat:20,onComplete:(e,t)=>{t&&e&&null!=e.parent&&(TweenMax.killTweensOf(e),e.visible=!1)},onCompleteParams:[e,t]})}TweenMax.to(this.listSpriteThunder[e],.3,{alpha:0,repeat:10,onComplete:(e,t,i)=>{i&&null!=i.parent&&i.hasInView&&(i.isCaTran,e&&null!=e.parent&&(e.visible=!1)),t===this.listSpriteThunder.length-1&&(e&&null!=e.parent&&(e.visible=!1),this.effectIceBeam.visible=!1,this.onCompleteAttack())},onCompleteParams:[this.listSpriteThunder[e],e,t]})}.bind(this,i,o)})}}onCompleteAttack(){if(this._timeLineMax){for(let e of this.listSpriteThunder)e&&(TweenMax.killTweensOf(e),e.destroy(),e=null);this.listSpriteThunder=[],this.listMaskSpriteThunder=[],this.runAnimation()}}dispose(){AppInfo.preLoader.soundController.playGameBGSound(),TweenMax.killTweensOf(this),this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),super.dispose()}die(){if(TweenMax.killTweensOf(this),this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),this.stopBaseEffect(),this.baseEffect&&(TweenMax.killTweensOf(this.baseEffect),this.baseEffect.destroy(),this.baseEffect=null),this.listThunderBoss&&this.listThunderBoss.length>0){for(var e=0;e<this.listThunderBoss.length;e++){(t=this.listThunderBoss[e])&&(t.visible=!1,TweenMax.killTweensOf(t),t.gotoAndStop(0),t.destroy())}this.listThunderBoss=[]}if(this.listSpriteThunder&&this.listSpriteThunder.length>0){for(e=0;e<this.listSpriteThunder.length;e++){var t;(t=this.listSpriteThunder[e])&&(t.visible=!1,TweenMax.killTweensOf(t),t.gotoAndStop(0),t.destroy())}this.listSpriteThunder=[]}super.die()}earthQuake(){TweenMax.fromTo(AppInfo.gameMovie,1,{x:-3,y:-3},{x:2,y:2,repeat:3,ease:RoughEase.ease.config({strength:12,points:50,template:Linear.easeNone,randomize:!1}),onComplete:()=>{AppInfo.gameMovie.x=0,AppInfo.gameMovie.y=0}})}}w.ACTION_SWIM="Swim",w.ACTION_ATTACK="Attack",w.ConfigValue={Velocity:1700,ThunderStunWH:90},w.ParticleBossComing={art:[{framerate:20,loop:!0,textures:["effectBoss.png","effectBoss.png"]},{framerate:20,loop:!0,textures:["effectBoss.png","effectBoss.png"]}],alpha:{start:.5,end:.5},scale:{start:1,end:1,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:3e3,end:3e3,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:180,max:180},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.81,max:.81},blendMode:"normal",frequency:.004,emitterLifetime:-1,maxParticles:1e3,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:800,h:720}};var _=w;class M extends n.a{constructor(){super(),this.listItemBG=[],this.bgPiece4=null,this.bgPiece3=null,this.bgPiece2=null,this.bgPiece1=null,this.init(),this.listItemBG=[]}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null==this.contaninerBg1&&(this.contaninerBg1=new PIXI.Container),null==this.contaninerBg2&&(this.contaninerBg2=new PIXI.Container),null==this.contaninerItemEffect&&(this.contaninerItemEffect=new PIXI.Container),this.item1Effect,null==this.item2Effect&&(this.item2Effect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.Item2Efect),this.item2Effect.scale.set(1.3),this.contaninerItemEffect.addChild(this.item2Effect)),null==this.item3Effect&&(this.item3Effect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.Item3Efect),this.contaninerItemEffect.addChild(this.item3Effect)),null==this.item4Effect&&(this.item4Effect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.Item4Efect),this.contaninerItemEffect.addChild(this.item4Effect)),null==this.item5Effect&&(this.item5Effect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.Item5Efect),this.contaninerItemEffect.addChild(this.item5Effect)),null==this.item6Effect&&(this.item6Effect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.Item6Efect),this.contaninerItemEffect.addChild(this.item6Effect)),null==this.item7Efffect&&(this.item7Effect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.Item7Efect),this.item7Effect.scale.set(1.25),this.contaninerItemEffect.addChild(this.item7Effect)),null==this.bgRainbow&&(this.bgRainbow=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.BGRainbow),this.bgRainbow.animationSpeed=.1,this.bgRainbow.gotoAndPlay(0),this.bgRainbow.scale.set(1.5),this.contaninerItemEffect.addChild(this.bgRainbow)),this.listItemEffect=[this.item2Effect,this.item3Effect,this.item4Effect,this.item5Effect,this.item6Effect,this.item7Effect],this.addChild(this.contaninerItemEffect),this.initBG())}initBG(){this.item2Effect.position.set(0,360),this.item3Effect.position.set(0,410),this.item4Effect.position.set(0,290),this.item5Effect.position.set(800,0),this.item6Effect.position.set(0,170),this.item7Effect.position.set(0,320),this.bgRainbow.position.set(-80,120),this.runEffect()}runEffect(){for(const e of this.listItemEffect)TweenMax.to(e,Utilities.Number.randRange(1,3),{alpha:0,yoyo:!0,repeat:-1,delay:Utilities.Number.randRange(1,3)});for(let e=0;e<50;e++){const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.LightEffectMermaid[0]);e.scale.set(.1*Utilities.Number.randRange(1,10)),e.position.set(Utilities.Number.randRange(50,1280),Utilities.Number.randRange(200,400)),TweenMax.to(e,Utilities.Number.randRange(1,4),{alpha:0,repeat:-1,onRepeat:(({position:e})=>{e.set(Utilities.Number.randRange(50,1280),Utilities.Number.randRange(200,400))}).bind(this,e)}),this.addChild(e)}}dispose(){super.dispose();for(let e=0;e<this.listItemEffect;e++){let t=this.listItemEffect[e];TweenMax.killTweensOf(t),t.parent.removeChild(t),t.destroy(),t=null}for(this.bgRainbow&&(TweenMax.killTweensOf(this.bgRainbow),this.bgRainbow.parent.removeChild(this.bgRainbow),this.bgRainbow.destroy(),this.bgRainbow=null);this.numChildren>0;){const e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}M.TIME_TWEEN=30;var S=M;class A extends x{constructor(e,t,i){super(e,t,i),this.listNoteFish=[],this.treble=null,this.bgEffectMermaidMask=null,this.bgEffectMermaid=null,this.isCompleteSong=!1,this.limitNote=21,this.indexNote=1,this._timeconfig=40;const s=[{animation:"Swim",x:1280+this.width/2,y:720+this.height/2,startX:-this.width/2,startY:-this.height/2},{animation:"Swim",x:-this.width/2,y:-this.height/2}],o=[{animation:"Swim",x:1280+this.width/2,y:720+this.height/2,startX:-this.width/2,startY:-this.height/2},{animation:"Swim",x:-this.width/2,y:-this.height/2}];this.pathAction=0==i?s:o,this.pathAction=s,this.step=0}init(){super.init()}run(){PIXI.TEXT_GRADIENT.LINEAR_VERTICAL;this.x=this.pathAction[0].startX,this.y=this.pathAction[0].startY,this.runAnimation(),this.movie.animationSpeed=1/1.5,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1/1.5);for(const e of AppInfo.gameMovie.gameBoard.listFish)e.type==this.type||e.isNote||e.runOutOfView();AppInfo.preLoader.soundController.stopGameBGSound(),AppInfo.preLoader.soundController.stopBossComingSound(),AppInfo.preLoader.soundController.playBGMerMaid(),this.visible=!1,this.merMaidBGEffect=new S,this.playEffectComing(),AppInfo.gameMovie.layerFish.addChildAt(this.treble,0),AppInfo.gameMovie.layerFish.addChildAt(this.merMaidBGEffect,0),this.merMaidBGEffect.alpha=0,TweenMax.to(this.merMaidBGEffect,2,{alpha:1})}playEffectComing(){if(null==this.treble){this.treble=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.Treble),this.treble.anchor.set(.5),this.treble.gotoAndPlay(0),this.treble.animationSpeed=.05,this.treble.x=this.merMaidBGEffect.x+this.treble.width,this.treble.y=this.merMaidBGEffect.bgRainbow.y+this.merMaidBGEffect.bgRainbow.height/2,this.treble.alpha=0;const e=this.randomShake(this.treble.x,this.treble.y,20,20);TweenMax.to(this.treble,.5,{alpha:1,repeat:5}),TweenMax.to(this.treble,4,{bezier:{values:e},ease:Linear.easeNone,repeat:-1}),this.initListPositionNoteFish()}}initListPositionNoteFish(){const e=1280/this.limitNote;this.listPosNote=[[{x:0,y:0},{x:0,y:0},{x:0*e,y:360}],[{x:0,y:0},{x:0,y:0},{x:1*e,y:360}],[{x:0,y:0},{x:0,y:0},{x:2*e,y:360}],[{x:0,y:0},{x:0,y:0},{x:3*e,y:360}],[{x:0,y:0},{x:0,y:0},{x:4*e,y:360}],[{x:0,y:0},{x:0,y:0},{x:5*e,y:410}],[{x:0,y:0},{x:0,y:0},{x:6*e,y:410}],[{x:0,y:0},{x:0,y:0},{x:7*e,y:430}],[{x:0,y:0},{x:0,y:0},{x:8*e,y:400}],[{x:0,y:0},{x:0,y:0},{x:9*e,y:400}],[{x:0,y:0},{x:0,y:0},{x:9*e,y:310}],[{x:0,y:0},{x:0,y:0},{x:10*e,y:310}],[{x:0,y:0},{x:0,y:0},{x:11*e,y:310}],[{x:0,y:0},{x:0,y:0},{x:12*e,y:280}],[{x:0,y:0},{x:0,y:0},{x:13*e,y:280}],[{x:0,y:0},{x:0,y:0},{x:14*e,y:280}],[{x:0,y:0},{x:0,y:0},{x:15*e,y:280}],[{x:0,y:0},{x:0,y:0},{x:16*e,y:280}],[{x:0,y:0},{x:0,y:0},{x:17*e,y:280}],[{x:0,y:0},{x:0,y:0},{x:18*e,y:260}],[{x:0,y:0},{x:0,y:0},{x:19*e,y:240}],[{x:0,y:0},{x:0,y:0},{x:20*e,y:220}]]}runAnimation(){if(this.step!=this.pathAction.length){switch(this.action=this.pathAction[this.step].animation,this.action){case"Swim":this.changeActionSwim(this.pathAction[this.step].x,this.pathAction[this.step].y);break;case"Attack":this.changeActionAttack()}this.step++}else this.dispose()}changeActionSwim(e,t){if(this._timeLineMax){this.movie.textures=this.swim,this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=this.swim,this.fishShadow.movie.gotoAndPlay(0)),this.flag=!0;const i=this,s=TweenMax.to(i,this._timeconfig,{ease:Power0.easeNone,bezier:{type:"soft",values:[{x:e/2,y:t/2},{x:e,y:t}],curviness:1,autoRotate:["x","y","rotation",0,!0]},onUpdate:function(e){var t;if(e.onFishSwimUpdate(),24==e.movie.currentFrame&&this.flag)if(this.indexNote<=this.limitNote){if(null!==(t=this.getFishInList())){if(9!=t.type){const i=this.listPosNote[this.indexNote]||this.listPosNote[0];this.flag=!1,e.addNoteFish(t.type,i,t)}this.indexNote++}}else(t=this.getFishInList())&&0!==t.type&&9!==t.type&&t.type<21&&(this.flag=!1,e.addNoteFishNoIndex(t.type,t.pathArray,t))}.bind(this,i),onUpdateParams:[i],onComplete:i.runAnimation.bind(i)});this._timeLineMax.append(s)}}getFishInList(){this.listNoteFish.sort(({idA:e},{idB:t})=>e-t);for(const e of this.listNoteFish)if(null!=e&&!e.hasInView&&e.type!==this.type&&null!==e.pathArray&&!e.isNote&&0!=e.type&&9!=e.type&&e.type<21&&!e.hasItem)return this.listNoteFish.splice(this.listNoteFish.indexOf(e),1),e.isNote=!0,e.effectParticle&&(e.effectParticle.visible=!1,e.effectParticle.parent&&(e.effectParticle.parent.removeChild(e.effectParticle),e.effectParticle.dispose())),e;return null}addNoteFish(e,t,i){AppInfo.preLoader.soundController.playMerMaidHarp();const s=i,o=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures["Note"+e+"Play"][0]);o.anchor.set(.5),o.name="effectBlur",s.addChild(o),s.movie.textures=ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures["Note"+e+"Play"],s.movie.gotoAndPlay(0),s.fishShadow&&(s.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures["Note"+e+"Play"],s.fishShadow.movie.gotoAndPlay(0),s.fishShadow.visible=!1);const n=s.getNodeTree();null!==n&&n.updatePoints([0,0,o.width,0,o.width,o.height,0,o.height]);const a=new l.a(A.ParticleEffect);s.effectParticle=a,o.visible=!1,AppInfo.gameMovie.layerEffect.addChild(s),AppInfo.gameMovie.gameBoard.listFish.push(s),t[0].x=this.x,t[0].y=this.y,s.x=t[0].x+100,s.y=t[0].y,s.movie.animationSpeed=.1,t[1].x=s.pathArray[1].x,t[1].y=s.pathArray[1].y,s.visible=!1,TweenMax.to(s,10,{bezier:{curviness:1,values:t,autoRotate:!1},onStart:function({effectParticle:e}){this.flag=!0,e.playParticle(0,0),AppInfo.gameMovie.layerEffect.addChild(e),this.isCompleteSong}.bind(this,s),ease:Linear.easeNone,onUpdate:(e=>{e.onFishSwimUpdate(),e.rotation=0,e.movie.scaleX=1,e.movie.scaleY=1,e.effectParticle._emitter.ownerPos.x=e.x-o.width/2+20,e.effectParticle._emitter.ownerPos.y=e.y+o.height/2-20,e.fishShadow&&(e.fishShadow.visible=!1)}).bind(this,s),repeat:0,onComplete:this.onCompleteAddNoteFish.bind(this,s)}),s.unFrozen&&s.unFrozen()}addNoteFishNoIndex(e,t,i){AppInfo.preLoader.soundController.playMerMaidHarp();const s=i,o=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures["Note"+e+"Play"][0]);o.anchor.set(.5),o.name="effectBlur",s.addChild(o),s.movie.textures=ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures["Note"+e+"Play"],s.movie.gotoAndPlay(0),s.fishShadow&&(s.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures["Note"+e+"Play"],s.fishShadow.movie.gotoAndPlay(0),s.fishShadow.visible=!1);const n=s.getNodeTree();null!==n&&n.updatePoints([0,0,o.width,0,o.width,o.height,0,o.height]),s.isNote=!0;const a=new l.a(A.ParticleEffect);s.effectParticle=a,s.effectParticle.playParticle(0,0),o.visible=!1,AppInfo.gameMovie.layerEffect.addChild(s),AppInfo.gameMovie.layerEffect.addChild(s.effectParticle),AppInfo.gameMovie.gameBoard.listFish.push(s),t[0].x=this.x,t[0].y=this.y,s.x=t[0].x+100,s.y=t[0].y,s.movie.animationSpeed=.1,t[1].x=s.pathArray[1].x,t[1].y=s.pathArray[1].y,s.visible=!1,TweenMax.to(s,20,{bezier:{curviness:1,values:t,autoRotate:!1},onStart:(e=>{}).bind(this,s),ease:Linear.easeNone,onUpdate:(e=>{e.onFishSwimUpdate(),e.rotation=0,e.movie.scaleX=1,e.movie.scaleY=1,e.effectParticle._emitter.ownerPos.x=e.x-o.width/2+20,e.effectParticle._emitter.ownerPos.y=e.y+o.height/2-20,e.fishShadow&&(e.fishShadow.visible=!1)}).bind(this,s),repeat:0,onComplete:this.onCompleteAddNoteFishNoIndex.bind(this),onCompleteParams:[s,a]}),this.flag=!0,s.unFrozen()}onCompleteAddNoteFishNoIndex(e,t){e.dispose()}onCompleteAddNoteFish(e){e.fishShadow&&(e.fishShadow.visible=!1);const t=e.getChildByName("effectBlur");if(AppInfo.gameMovie.gameBoard.listFish.push(e),e.effectParticle&&(e.effectParticle.visible=!1,e.effectParticle.parent.removeChild(e.effectParticle),e.effectParticle.dispose(),e.effectParticle=null),e.unreadyForLock(),t){t.visible=!0,TweenMax.to(t,.5,{alpha:0,scaleX:3,scaleY:3});const i=this.randomShake(e.x,e.y,20,20);TweenMax.to(e,4,{bezier:{values:i},ease:Linear.easeNone,onUpdate:(e=>{e.onFishSwimUpdate()}).bind(this,e),repeat:-1}),TweenMax.to(e,2,{rotation:.1*Utilities.Number.randRange(-5,5),yoyo:!0,repeat:-1});const s=setTimeout((e=>{null!=e&&e.die()}).bind(this,e),6e4);e.disposeTimeOut=s}}randomShake(e,t,i,s){return[{x:e,y:t},{x:e+Utilities.Number.randRange(-i,i),y:t+Utilities.Number.randRange(-s,s)},{x:e+Utilities.Number.randRange(-i,i),y:t+Utilities.Number.randRange(-s,s)},{x:e,y:t+ +Utilities.Number.randRange(-s,s)},{x:e-Utilities.Number.randRange(-i,i),y:t-+Utilities.Number.randRange(0,-s)},{x:e,y:t}]}dispose(){AppInfo.preLoader.soundController.stopBGMerMaid(),AppInfo.preLoader.soundController.playGameBGSound(),this.merMaidBGEffect&&(TweenMax.killTweensOf(this.merMaidBGEffect),this.merMaidBGEffect.parent.removeChild(this.merMaidBGEffect),this.merMaidBGEffect.dispose(),this.merMaidBGEffect=null),this.bgEffectMermaid&&(TweenMax.killTweensOf(this.bgEffectMermaid),this.bgEffectMermaid.parent.removeChild(this.bgEffectMermaid),this.bgEffectMermaid.destroy(),this.bgEffectMermaid=null),this.bgEffectMermaidMask&&(TweenMax.killTweensOf(this.bgEffectMermaidMask),this.bgEffectMermaidMask.parent.removeChild(this.bgEffectMermaidMask),this.bgEffectMermaidMask.destroy(),this.bgEffectMermaidMask=null),this.treble&&(TweenMax.killTweensOf(this.treble),this.treble.parent.removeChild(this.treble),this.treble.destroy(),this.treble=null),super.dispose()}die(){this._timeLineMax&&(this._timeLineMax.kill(),TweenMax.killTweensOf(this)),super.die()}onEnterFrame(e){}}A.ParticleEffect={art:[{framerate:20,loop:!0,textures:["LightEffectMermaid0.png","LightEffectMermaid0.png"]},{framerate:20,loop:!0,textures:["LightEffectMermaid0.png","LightEffectMermaid0.png"]}],alpha:{start:1,end:0},scale:{start:.2,end:.05,minimumScaleMultiplier:1},color:{start:"#e4f9ff",end:"#3fcbff"},speed:{start:100,end:100,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:100},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:2},blendMode:"normal",frequency:.001,emitterLifetime:-1,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},A.ParticleWinBoss={art:[{framerate:20,loop:!0,textures:["LightEffectMermaid0.png","LightEffectMermaid0.png"]},{framerate:20,loop:!0,textures:["LightEffectMermaid0.png","LightEffectMermaid0.png"]}],alpha:{start:1,end:1},scale:{start:.5,end:.8,minimumScaleMultiplier:2},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:50,minimumSpeedMultiplier:0},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:8,max:8},blendMode:"normal",frequency:.001,emitterLifetime:1,maxParticles:1e3,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:180,minR:0}},A.ParticleBossComing={art:[{framerate:20,loop:!0,textures:["effectBoss.png","effectBoss.png"]},{framerate:20,loop:!0,textures:["effectBoss.png","effectBoss.png"]}],alpha:{start:.5,end:.5},scale:{start:1,end:1,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:3e3,end:3e3,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:180,max:180},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.81,max:.81},blendMode:"normal",frequency:.004,emitterLifetime:-1,maxParticles:1e3,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:800,h:720}};var v=A;class T extends x{constructor(e,t,i){super(e,t,i),this.bgEffect=null,this.particle=null,this.limitThunder=5,this.lightEffect=null,this.effectIceBeam=null,this.step=0,this.listThunderBoss=[],this.baseEffect=null,this._timeconfig=15,this.pathID=i||0}init(){super.init();const e=370,t=[{animation:"Swim",x:640,y:e,startX:-this.width/2,startY:e},{animation:"Attack",x:0},{animation:"Swim",x:1280+this.width/2,y:e},{animation:"Swim",x:640,y:e},{animation:"Attack",x:0},{animation:"Swim",x:-this.width/2,y:e}],i=[{animation:"Swim",x:640,y:e,startX:1280+this.width/2,startY:e},{animation:"Attack",x:0,y:e},{animation:"Swim",x:0,y:e},{animation:"Swim",x:640,y:e},{animation:"Attack",x:0,y:e},{animation:"Swim",x:1280+this.width/2,y:e}];0==this.pathID?this.pathAction=t:this.pathAction=i,this.pathAction=t,this.step=0,this.x=this.pathAction[0].startX,this.y=this.pathAction[0].startY,null===this.bgEffect&&(this.bgEffect=new PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,0,.3),this.bgEffect.name="DarkSky",AppInfo.gameMovie.layerFish.addChild(this.bgEffect)),this.movie.animationSpeed=1/6,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1/6),null===this.particle&&(this.particle=new l.a(T.ParticleBossComing),AppInfo.gameMovie.layerEffect.addChild(this.particle),this.particle.playParticle(0,0))}run(){AppInfo.preLoader.soundController.stopGameBGSound(),this.runAnimation(),this.earthQuake()}runInBattle(e){TweenMax.killTweensOf(this),this.x=1500,this.y=360,this.scale.x=-1,this.fishShadow&&(this.fishShadow.scale.x=-1),this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.gotoAndPlay(0),this.fishShadow.movie.animationSpeed=this.movie.animationSpeed),this._runTween=TweenMax.to(this,e,{x:140,y:360,ease:Linear.easeNone,onUpdate:()=>{this.onFishSwimUpdate()},onUpdateParams:[this],onComplete:()=>{this.dispose()}}),this.rotationDirection=Utilities.toRad(330)}attackUser(e,t,i){this._callBack=e,this._endPoint=t,this._attackPosition=i,this._runTween.pause(),this._changeActionAttackInBattle(e)}runAnimation(){if(this.step!=this.pathAction.length){switch(this.pathAction[this.step].animation){case T.ACTION_SWIM:this.changeActionSwim();break;case T.ACTION_ATTACK:this.changeActionAttack()}this.step++}else this.dispose()}changeActionSwim(){if(this._timeLineMax){this.stopBaseEffect(),this.changeActionTexture(this.swim);const e=this.pathAction[this.step],t=this;this.x>e.x&&(this.movie.scaleX=-1,this.fishShadow&&(this.fishShadow.movie.scaleX=-1));const i=TweenMax.to(t,this._timeconfig,{ease:Power0.easeNone,bezier:{values:[{x:this.x,y:this.y},{x:e.x,y:e.y}],autoRotate:["rotation",0,!0]},onUpdate:(e=>{e.onFishSwimUpdate()}).bind(t),onUpdateParams:[t],onComplete:t.runAnimation.bind(t)});this._timeLineMax.append(i)}}playBaseEffect(){if(null==this.lightEffect){this.baseEffect.tween.pause(),this.baseEffect.gotoAndPlay(0),this.lightEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.Fish103Light),this.lightEffect.anchor.set(.5),this.lightEffect.animationSpeed=1/6,this.lightEffect.visible=!1,this.addChild(this.lightEffect),this.listThunderBoss=[];for(var e=0;e<10;e++){(t=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.ThunderBoss)).anchor.set(.5),t.visible=!1;const e=Utilities.Number.randRange(-250,250),i=Utilities.Number.randRange(-20,-120);t.x=e,t.y=i-50,t.gotoAndPlay(0),t.animationSpeed=1/Utilities.Number.randRange(1,8),this.addChild(t),this.listThunderBoss.push(t)}}this.baseEffect.visible=!0,this.lightEffect.visible=!0,this.baseEffect.gotoAndPlay(0),this.lightEffect.gotoAndPlay(0);for(e=0;e<this.listThunderBoss.length;e++){var t;const i=(t=this.listThunderBoss[e]).y+20;TweenMax.killTweensOf(t),TweenMax.to(t,.5,{onStart:function(){this.visible=!0,this.gotoAndPlay(0)}.bind(t),y:i,delay:.1*e,repeat:-1})}}stopBaseEffect(){if(null!=this.lightEffect){this.baseEffect.tween.play(),this.baseEffect.gotoAndStop(0),this.lightEffect.gotoAndStop(0),this.lightEffect.visible=!1;for(const e of this.listThunderBoss)e.visible=!1,TweenMax.killTweensOf(e),e.gotoAndStop(0)}}changeActionAttack(){if(this._timeLineMax){this.changeActionTexture(this.attack),this.movie.animationSpeed=1/8,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1/8);const e=new l.a(T.EFFECT_PARTICLE);AppInfo.gameMovie.layerFish.addChildAt(e,1),e.playParticle(this.x,this.y),TweenMax.to(this,2,{onComplete:this.runAnimation.bind(this)})}}_changeActionAttackInBattle(e){this.changeActionTexture(this.attack),this.movie.animationSpeed=1/8,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1/8);const t=new l.a(T.EFFECT_PARTICLE);AppInfo.gameMovie.layerFish.addChildAt(t,1),t.playParticle(this.x,this.y),this.onEnterFrame=this.onEnterFrame.bind(this),this.readyAttack=!0,AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrame),TweenMax.to(this,2,{onComplete:()=>{this._runTween.play(),this.changeActionTexture(this.swim),"function"==typeof e&&e()}})}onCompleteIceBeamEffect(){this._playEffectBossAttack()}_playEffectBossAttack(){this.earthQuake();const e=AppInfo.gameMovie.gameBoard.listFish,t=this.listMaskSpriteThunder.length;if(0==this.listMaskSpriteThunder.length)this.onCompleteAttack();else for(let i=0;i<t;i++){const t=this.listMaskSpriteThunder[i],s=this.listSpriteThunder[i],o=e[i];t.visible=!0,s.visible=!0,s.gotoAndPlay(0),TweenMax.to(t,t.oriWidth/T.ConfigValue.Velocity,{x:t.toPos.x,y:t.toPos.y,ease:Power0.easeNone,onStart:(e,t)=>{this.listSpriteThunder[e].visible=!0,this.listSpriteThunder[e].play(),t&&null!=t.parent&&t.hasInView&&(t.isCaTran||t.stun()),AppInfo.gameMovie.soundController.playSet()},onStartParams:[i,o],delay:.02*i,onComplete:function(e,t){if(t&&null!=t.parent&&t.type!=this.type){const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.ThunderStunFish);e.anchor.set(.5),e.width=T.ConfigValue.ThunderStunWH,e.height=T.ConfigValue.ThunderStunWH,t.addChild(e),t.thunderStun=e,TweenMax.killTweensOf(e),TweenMax.to(e,.1,{startAt:{alpha:0},alpha:1,repeat:20,onComplete:(e,t)=>{t&&e&&null!=e.parent&&(TweenMax.killTweensOf(e),e.visible=!1)},onCompleteParams:[e,t]})}TweenMax.to(this.listSpriteThunder[e],.3,{alpha:0,repeat:10,onComplete:(e,t,i)=>{i&&null!=i.parent&&i.hasInView&&(i.isCaTran,e&&null!=e.parent&&(e.visible=!1)),t===this.listSpriteThunder.length-1&&(e&&null!=e.parent&&(e.visible=!1),this.effectIceBeam.visible=!1,this.onCompleteAttack())},onCompleteParams:[this.listSpriteThunder[e],e,t]})}.bind(this,i,o)})}}onCompleteAttack(){if(this._timeLineMax){for(let e of this.listSpriteThunder)e&&(TweenMax.killTweensOf(e),e.destroy(),e=null);this.listSpriteThunder=[],this.listMaskSpriteThunder=[],this.runAnimation()}}dispose(){AppInfo.preLoader.soundController.playGameBGSound(),TweenMax.killTweensOf(this),this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),this.particle&&(this.particle.dispose(),this.particle=null),this.bgEffect&&(this.bgEffect.destroy(),this.bgEffect=null),super.dispose()}die(){TweenMax.killTweensOf(this),this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),super.die()}earthQuake(){TweenMax.fromTo(AppInfo.gameMovie,1,{x:-3,y:-3},{x:2,y:2,repeat:3,ease:RoughEase.ease.config({strength:12,points:50,template:Linear.easeNone,randomize:!1}),onComplete:()=>{AppInfo.gameMovie.x=0,AppInfo.gameMovie.y=0}})}onEnterFrame(){if(5==this.movie.currentFrame&&this.readyAttack){this.readyAttack=!1;let e=0;const t=Math.round(Math.sqrt(this.x**2+this.y**2)+Utilities.Number.distanceBetweenTwoPoint(this,this._endPoint));for(let i=0;i<4;i++){const s=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun105.textures.bullet105fire);s.gotoAndPlay(0);const o=Utilities.toRad(Utilities.Number.angleDegBetweenTwoPoint(this,this._endPoint)+180);s.scale.set(1.5),s.rotation=o+Utilities.toRad(-90),3==i?e=-1:4==i&&(e=-2),s.x=this.x+100*Math.cos(o+.2*e),s.y=this.y+100*Math.sin(o+.2*e),s.toX=s.x-t*Math.cos(o),s.toY=s.y-t*Math.sin(o),s.anchor.set(.5),s.animationSpeed=1/6,e++;const n=new l.a(T.EFFECT_PARTICLE_ARROW);AppInfo.gameMovie.layerEffect.addChild(n),n.playParticle(s.x,s.y),s.particle=n,AppInfo.gameMovie.layerEffect.addChild(s),TweenMax.to(s,2,{startAt:{x:s.x,y:s.y},x:s.toX,y:s.toY,delay:.01*i,ease:Linear.easeNone,onUpdate:((e,{x:t,y:i})=>{e&&e._emitter&&(e._emitter.ownerPos.x=t,e._emitter.ownerPos.y=i)}).bind(this,n,s),onComplete:this.onCompleteMoveArrow.bind(this),onCompleteParams:[s,i]})}}}onCompleteMoveArrow(e){e&&(e.gotoAndStop(0),e.destroy(),e.particle&&e.particle.dispose())}}T.ACTION_SWIM="Swim",T.ACTION_ATTACK="Attack",T.ConfigValue={Velocity:1700,ThunderStunWH:90},T.EFFECT_PARTICLE={art:[{framerate:8,loop:!0,textures:["bullet102Boom0.png","bullet102Boom1.png","bullet102Boom2.png","bullet102Boom3.png","bullet102Boom2.png","bullet102Boom1.png","bullet102Boom0.png"]}],alpha:{start:.74,end:0},scale:{start:3,end:5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:400,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:200},lifetime:{min:1.75,max:2.5},blendMode:"normal",ease:[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],frequency:.001,emitterLifetime:.1,maxParticles:300,pos:{x:0,y:0},addAtBack:!0,spawnType:"point"},T.ParticleBossComing={art:[{framerate:5,loop:!1,textures:["LightEffectCeberus.png"]}],alpha:{start:1,end:0},scale:{start:5,end:1,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#f74905"},speed:{start:100,end:100,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:50,max:70},noRotation:!1,rotationSpeed:{min:0,max:200},lifetime:{min:1,max:1},blendMode:"normal",ease:[{s:0,cp:.379,e:.548},{s:.548,cp:.717,e:.676},{s:.676,cp:.635,e:1}],frequency:.04,emitterLifetime:-1,maxParticles:200,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:1280,h:720}},T.PARTICLE_BLADE={art:[{framerate:5,loop:!1,textures:["effectBullet.png"]}],alpha:{start:0,end:1},scale:{start:1,end:3,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!0,rotationSpeed:{min:0,max:0},lifetime:{min:1,max:2},blendMode:"normal",frequency:.01,emitterLifetime:-1,maxParticles:20,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:-640,y:-360,w:1280,h:720}},T.EFFECT_PARTICLE_ARROW={art:[{framerate:1,loop:!0,textures:["lightProgress.png"]}],alpha:{start:1,end:0},scale:{start:2,end:.4,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:100,end:10,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:100,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:2,max:1.8},blendMode:"screen",frequency:.05,emitterLifetime:1,maxParticles:100,pos:{x:.5,y:.5},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:150}};var b=T;class B extends m.a{constructor(e,t,i,s,o){super(e,t,i,s,o),this.collisionTemplate=null,this.dieTexture=null}init(){if(this._isDisposed){this._isDisposed=!1;const e=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Swim"];this.dieTexture=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Die"],this.movie=new PIXI.extras.AnimatedSprite(e),this.movie.alpha=.5,this.movie.interactive=!1,this.movie.hitArea=PIXI.Rectangle.EMPTY,this.movie.tint=0,this.movie.anchor.set(.5,.5),this.addChild(this.movie),this.movie.gotoAndStop(0),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY}}dispose(){super.dispose()}die(){super.die()}}var P=B;class k extends o.a{constructor(e,t,i,s,o){super(e,t,i,s,o),this.isBossMap=!0,this.swim=null,this.dietexture=null,this.attack=null,this.fishShadow=null}init(){this._isDisposed&&(this._isDisposed=!1,ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Swim"]&&(this.swim=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Swim"]),ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Attack"]&&(this.attack=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Attack"]),ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Die"]&&(this.dietexture=ResourceManager.Atlas["AtlasBoss"+this.type].textures["fish"+this.type+"Die"]),this.movie=new PIXI.extras.AnimatedSprite(this.swim),this.movie.anchor.set(.5,.5),this.addChild(this.movie),this.movie.gotoAndStop(0),this.collisionTemplate=new y,this.sizeOfCollision=this.collisionTemplate.getCollision(this.type),this.movie.animationSpeed=this.sizeOfCollision.speed||1/4,this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,this.initShadow(),AppInfo.gameMovie.gameBoard.waitLockFish&&this.readyForLock(),this.deltaWToCalInView=Math.max(this.width/2,this.height/2),this.deltaHToCalInView=this.deltaWToCalInView,null==this._timeLineMax&&(this._timeLineMax=new TimelineMax))}initShadow(){PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(void 0!==this.fishShadow&&null!==this.fishShadow||(this.fishShadow=new P(this.id,this.type,this.indexInGroup),this.fishShadow.movie.animationSpeed=this.movie.animationSpeed))}dispose(){super.dispose()}die(){TweenMax.killTweensOf(this),this.pause(),this.isLock?this.unLock():this.unreadyForLock(),this.movie.stop(),this.dietexture?(this.movie.textures=this.dietexture,this.movie.loop=!1,this.movie.gotoAndPlay(0),this.movie.onComplete=this.dispose.bind(this),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&(this.fishShadow.movie.textures=this.dietexture,this.fishShadow.movie.loop=!1,this.fishShadow.movie.gotoAndPlay(0))):super.die()}}var L=k,R=i(74);class F extends L{constructor(e,t,i,s,o){super(e,t,i,s,o),this.particleHitFish=null,this.timeMove=50,this.thorwGif=!1,this.isRunParticle=!1,this.init()}init(){super.init()}run(){this.x=0,this.y=0,this.action="swim",this.movie.onComplete=this.changeAction.bind(this),this.movie.loop=!1,this.particle=new l.a(F.ParticleEffect);this.particle.playParticle(0,0),AppInfo.gameMovie.layerEffect.addChild(this.particle),this.startEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.RedFishLight0type),this.startEffect.gotoAndPlay(0),this.startEffect.anchor.set(.5),this.startEffect.animationSpeed=1.5,AppInfo.gameMovie.layerEffect.addChild(this.startEffect);const e=MorphSVGPlugin.pathDataToBezier("M 7 7 L 482 334 A 200 200 0 1 1 684 492 A 50 50 0 1 1 684 116 A 50 50 0 1 1 684 464 A 50 50 0 1 1 684 144 A 50 50 0 1 1 684 428 A 50 50 0 1 1 684 179 A 50 50 0 1 1 684 377 A 50 50 0 1 1 684 213 A 50 50 0 1 1 684 331 A 50 50 0 1 1 684 239 L 684 289 L 1271 714 ");let t;TweenMax.to(this.startEffect,10,{bezier:{values:e,type:"cubic",autoRotate:["x","y","rotation",0,!0]},onUpdate:()=>{this.particle._emitter.ownerPos.x=this.startEffect.x,this.particle._emitter.ownerPos.y=this.startEffect.y},onComplete:this.completeEffectStart.bind(this),ease:Linear.easeNone}),t=this.id%2==0?MorphSVGPlugin.pathDataToBezier("M 8 196 L 788 182 C 1004 247 1120 36 1270 312 C 970 251 1081 495 770 401 C 453 163 554.5 397 289 393 Q 159 414 165 535 Q 158 650 358 682 Q 599 707 858 532 Q 1120 388 1091 153 Q 730 1 259 217 Q 114 312 135 428 Q 204 602 462 582 L 1279 575 "):MorphSVGPlugin.pathDataToBezier("M 4 69 L 988 69 Q 1251 81 1267 230 Q 1252 353 986 347 L 416 348 Q 48 271 53 475 Q 35 698 429 601 L 1275 590 "),t=MorphSVGPlugin.pathDataToBezier("M 20 200 Q 150 50 412 54 Q 935 59 1148 192 Q 1278 288 1153 377 C 952 486 56 140 98 472 C 95 642 566 719 838 645 L 1470 501"),TweenMax.to(this,this.timeMove,{bezier:{values:t,type:"cubic",autoRotate:["x","y","rotation",0,!0]},onUpdate:()=>{this.onFishSwimUpdate(),23!=this.movie.currentFrame||"attack"!=this.action||this.thorwGif||this.throwGift()},onComplete:()=>{this.dispose()},ease:Linear.easeNone})}throwGift(){let e;AppInfo.gameMovie.gameBoard.listFish.sort(({idA:e},{idB:t})=>e-t);for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)!F.FISH_TYPE_GIFT.includes(AppInfo.gameMovie.gameBoard.listFish[t].type)||AppInfo.gameMovie.gameBoard.listFish[t].isGift||AppInfo.gameMovie.gameBoard.listFish[t].isRedFish||AppInfo.gameMovie.gameBoard.listFish[t].hasInView||(e=AppInfo.gameMovie.gameBoard.listFish[t]);e&&(this.thorwGif=!0,e.isGift=!0,TweenMax.killTweensOf(e),e.rotation=Utilities.toRad(0),AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(e)),AppInfo.gameMovie.gameBoard.listFish.push(e),AppInfo.gameMovie.layerFish.addChild(e),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&AppInfo.gameMovie.layerFishShadow.addChild(e.fishShadow),e.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Swim,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&(e.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Swim),-1==this.movie.scale.y?(e.x=this.x+.5*this.width/2+Utilities.Number.randRange(10,20),e.y=this.y+.5*this.height/2+Utilities.Number.randRange(10,20)):(e.x=this.x-.5*this.width/2-Utilities.Number.randRange(10,20),e.y=this.y+.5*this.height/2-Utilities.Number.randRange(10,20)),e.visible=!0,e.scale.set(.1),e.movie.scale.set(1),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&(e.fishShadow.scale.set(.1),e.fishShadow.movie.scale.set(1),TweenMax.to(e.fishShadow,.5,{scaleX:.5,scaleY:.5,rotation:2*Math.PI})),e.pathArray[0].x=e.x,e.pathArray[0].y=e.y,TweenMax.to(e,.5,{scaleX:.5,scaleY:.5,rotation:2*Math.PI,onComplete:function(e){this.thorwGif=!1,e.run(e.pathArray),e.runTween.vars.bezier.autoRotate=null,e.runTween.timeScale(.3)}.bind(this,e)}),e.updateTransform(),e.movie.gotoAndPlay(0),e.die=this.onGifDie.bind(this,e))}onGifDie(e){TweenMax.killTweensOf(e),e.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die,e.movie.loop=!1,e.movie.animationSpeed=1/4,e.movie.gotoAndPlay(0),e.fishShadow&&(e.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die,e.fishShadow.movie.animationSpeed=1/4,e.fishShadow.movie.gotoAndPlay(0),e.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die),AppInfo.preLoader.soundController.playHopQuaNo(),e.movie.onComplete=e.dispose.bind(e)}completeEffectStart(){this.startEffect&&(TweenMax.killTweensOf(this.startEffect),this.startEffect.destroy(),this.startEffect=null,this.particle&&TweenMax.delayedCall(2,this.disposeParticle.bind(this)))}disposeParticle(){this.particle&&(TweenMax.killTweensOf(this.particle),this.particle.dispose(),this.particle=null)}changeAction(){"swim"==this.action?(this.movie.textures=this.attack,this.action="attack",this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=this.attack,this.fishShadow.movie.gotoAndPlay(0))):(this.movie.textures=this.swim,this.action="swim",this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=this.swim,this.fishShadow.movie.gotoAndPlay(0))),this.movie.onComplete=this.changeAction.bind(this),this.movie.loop=!1}onHitBullet(){super.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[this.type]||PreLoaderConfig.FishHitBulletDefault),ResourceManager.Atlas.AtlasEffects.textures.snowflake&&(null==this.particleHitFish||this.isRunParticle)&&(this.particleHitFish=new R.a(ResourceManager.Atlas.AtlasEffects.textures.snowflake,F.HitBulletParticleEffect),this.particleHitFish.playParticle(this.x,this.y,this.onCompleteHit.bind(this)),AppInfo.gameMovie.layerEffect.addChild(this.particleHitFish),this.isRunParticle=!1)}onCompleteHit(){this.isRunParticle=!0}die(){super.die()}dispose(){super.dispose(),this.startEffect&&(TweenMax.killTweensOf(this.startEffect),this.startEffect.destroy(),this.startEffect=null),this.particleHitFish&&(TweenMax.killTweensOf(this.particleHitFish),this.particleHitFish.dispose(),this.particleHitFish=null),this.disposeParticle()}}F.FISH_TYPE_GIFT=[0,1,2,3,4,5],F.ParticleEffect={art:[{framerate:3,loop:!0,textures:["FishDieParticle4explode1.png","FishDieParticle4explode2.png","FishDieParticle4explode3.png"]},{framerate:3,loop:!0,textures:["FishDieParticle4explode3.png","FishDieParticle4explode2.png","FishDieParticle4explode1.png"]}],alpha:{start:1,end:.22},scale:{start:.5,end:1,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:50,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:10},lifetime:{min:4,max:4},blendMode:"normal",frequency:.1,emitterLifetime:-1,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},F.HitBulletParticleEffect={alpha:{start:.8,end:.1},scale:{start:1,end:.3,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"normal",frequency:.004,emitterLifetime:.31,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}};var E=F;class G extends L{constructor(e,t,i,s,o){super(e,t,i,s,o),this.particleHitFish=null,this.timeMove=40,this.thorwGif=!1,this.isRunParticle=!1,this.init()}init(){super.init()}run(){this.x=0,this.y=AppInfo.appRealHeight/2-this.height/2,this.action="swim",this.particle=new l.a(G.ParticleEffect);this.particle.playParticle(0,0),AppInfo.gameMovie.layerEffect.addChild(this.particle),this.startEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.RedFishLight0type),this.startEffect.gotoAndPlay(0),this.startEffect.anchor.set(.5),this.startEffect.animationSpeed=1.5,AppInfo.gameMovie.layerEffect.addChild(this.startEffect);const e=MorphSVGPlugin.pathDataToBezier("M 7 7 L 482 334 A 200 200 0 1 1 684 492 A 50 50 0 1 1 684 116 A 50 50 0 1 1 684 464 A 50 50 0 1 1 684 144 A 50 50 0 1 1 684 428 A 50 50 0 1 1 684 179 A 50 50 0 1 1 684 377 A 50 50 0 1 1 684 213 A 50 50 0 1 1 684 331 A 50 50 0 1 1 684 239 L 684 289 L 1271 714 ");let t;TweenMax.to(this.startEffect,10,{bezier:{values:e,type:"cubic",autoRotate:["x","y","rotation",0,!0]},onUpdate:()=>{this.particle._emitter.ownerPos.x=this.startEffect.x,this.particle._emitter.ownerPos.y=this.startEffect.y},onComplete:this.completeEffectStart.bind(this),ease:Linear.easeNone}),t=this.id%2==0?MorphSVGPlugin.pathDataToBezier("M 8 196 L 788 182 C 1004 247 1120 36 1270 312 C 970 251 1081 495 770 401 C 453 163 554.5 397 289 393 Q 159 414 165 535 Q 158 650 358 682 Q 599 707 858 532 Q 1120 388 1091 153 Q 730 1 259 217 Q 114 312 135 428 Q 204 602 462 582 L 1279 575 "):MorphSVGPlugin.pathDataToBezier("M 4 69 L 988 69 Q 1251 81 1267 230 Q 1252 353 986 347 L 416 348 Q 48 271 53 475 Q 35 698 429 601 L 1275 590 "),t=MorphSVGPlugin.pathDataToBezier("M -100 168 Q 295 336 402 86 Q 594 36 773 87 C 777 242 1173 129 1114 311 C 1191 464 773 246 772 480 C 619.5 363.5 761 179 517 247 Q 225 205 167 424 L 440 422 Q 277 271 39 326 Q 80 570 548 313 Q 458 569 888 300 L 1181 366 L 1340 562 "),TweenMax.to(this,this.timeMove,{bezier:{values:t,type:"cubic"},yoyo:!0,repeat:1,onUpdate:()=>{this.onFishSwimUpdate()},onComplete:()=>{this.dispose()},ease:Linear.easeNone})}throwGift(){let e;AppInfo.gameMovie.gameBoard.listFish.sort(({idA:e},{idB:t})=>e-t);for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)!G.FISH_TYPE_GIFT.includes(AppInfo.gameMovie.gameBoard.listFish[t].type)||AppInfo.gameMovie.gameBoard.listFish[t].isGift||AppInfo.gameMovie.gameBoard.listFish[t].isRedFish||AppInfo.gameMovie.gameBoard.listFish[t].hasInView||AppInfo.gameMovie.gameBoard.listFish[t].hasItem||(e=AppInfo.gameMovie.gameBoard.listFish[t]);e&&(this.thorwGif=!0,e.isGift=!0,TweenMax.killTweensOf(e),e.rotation=Utilities.toRad(0),AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(e)),AppInfo.gameMovie.gameBoard.listFish.push(e),AppInfo.gameMovie.layerFish.addChild(e),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&AppInfo.gameMovie.layerFishShadow.addChild(e.fishShadow),e.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Swim,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&(e.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Swim),-1==this.movie.scale.y?(e.x=this.x+.5*this.width/2+Utilities.Number.randRange(10,20),e.y=this.y+.5*this.height/2+Utilities.Number.randRange(10,20)):(e.x=this.x-.5*this.width/2-Utilities.Number.randRange(10,20),e.y=this.y+.5*this.height/2-Utilities.Number.randRange(10,20)),e.visible=!0,e.scale.set(.1),e.movie.scale.set(1),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&(e.fishShadow.scale.set(.1),e.fishShadow.movie.scale.set(1),TweenMax.to(e.fishShadow,.5,{scaleX:.5,scaleY:.5,rotation:2*Math.PI})),e.pathArray[0].x=e.x,e.pathArray[0].y=e.y,TweenMax.to(e,.5,{scaleX:.5,scaleY:.5,rotation:2*Math.PI,onComplete:function(e){this.thorwGif=!1,e.run(e.pathArray),e.runTween.vars.bezier.autoRotate=null,e.runTween.timeScale(.3)}.bind(this,e)}),e.updateTransform(),e.movie.gotoAndPlay(0),e.die=this.onGifDie.bind(this,e))}onGifDie(e){TweenMax.killTweensOf(e),e.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die,e.movie.loop=!1,e.movie.animationSpeed=1/4,e.movie.gotoAndPlay(0),e.fishShadow&&(e.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die,e.fishShadow.movie.animationSpeed=1/4,e.fishShadow.movie.gotoAndPlay(0),e.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die),AppInfo.preLoader.soundController.playHopQuaNo(),e.movie.onComplete=e.dispose.bind(e)}completeEffectStart(){this.startEffect&&(TweenMax.killTweensOf(this.startEffect),this.startEffect.destroy(),this.startEffect=null,this.particle&&TweenMax.delayedCall(2,this.disposeParticle.bind(this)))}disposeParticle(){this.particle&&(TweenMax.killTweensOf(this.particle),this.particle.dispose(),this.particle=null)}changeAction(){"swim"==this.action?(this.movie.textures=this.attack,this.action="attack",this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=this.attack,this.fishShadow.movie.gotoAndPlay(0))):(this.movie.textures=this.swim,this.action="swim",this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=this.swim,this.fishShadow.movie.gotoAndPlay(0))),this.movie.onComplete=this.changeAction.bind(this),this.movie.loop=!1}onHitBullet(){super.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[this.type]||PreLoaderConfig.FishHitBulletDefault),ResourceManager.Atlas.AtlasEffects.textures.snowflake&&(null==this.particleHitFish||this.isRunParticle)&&(this.particleHitFish=new R.a(ResourceManager.Atlas.AtlasEffects.textures.snowflake,G.HitBulletParticleEffect),this.particleHitFish.playParticle(this.x,this.y,this.onCompleteHit.bind(this)),AppInfo.gameMovie.layerEffect.addChild(this.particleHitFish),this.isRunParticle=!1)}onCompleteHit(){this.isRunParticle=!0}die(){super.die()}dispose(){super.dispose(),this.startEffect&&(TweenMax.killTweensOf(this.startEffect),this.startEffect.destroy(),this.startEffect=null),this.particleHitFish&&(TweenMax.killTweensOf(this.particleHitFish),this.particleHitFish.dispose(),this.particleHitFish=null),this.disposeParticle()}}G.FISH_TYPE_GIFT=[0,1,2,3,4,5],G.ParticleEffect={art:[{framerate:24,loop:!0,textures:["sakuraEffect0.png","sakuraEffect1.png","sakuraEffect2.png","sakuraEffect3.png","sakuraEffect4.png","sakuraEffect5.png","sakuraEffect6.png","sakuraEffect7.png","sakuraEffect8.png","sakuraEffect9.png","sakuraEffect10.png","sakuraEffect11.png","sakuraEffect12.png","sakuraEffect13.png","sakuraEffect14.png","sakuraEffect15.png","sakuraEffect16.png","sakuraEffect17.png","sakuraEffect18.png","sakuraEffect19.png","sakuraEffect20.png","sakuraEffect21.png","sakuraEffect22.png","sakuraEffect23.png","sakuraEffect24.png"]},{framerate:20,loop:!0,textures:["sakuraEffect24.png","sakuraEffect23.png","sakuraEffect22.png","sakuraEffect21.png","sakuraEffect20.png","sakuraEffect19.png","sakuraEffect18.png","sakuraEffect17.png","sakuraEffect16.png","sakuraEffect15.png","sakuraEffect14.png","sakuraEffect13.png","sakuraEffect12.png","sakuraEffect11.png","sakuraEffect10.png","sakuraEffect9.png","sakuraEffect8.png","sakuraEffect7.png","sakuraEffect6.png","sakuraEffect5.png","sakuraEffect4.png","sakuraEffect3.png","sakuraEffect2.png","sakuraEffect1.png","sakuraEffect0.png"]}],alpha:{start:1,end:0},scale:{start:1,end:2,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:100,end:10,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:10},lifetime:{min:1,max:2},blendMode:"normal",frequency:.03,emitterLifetime:-1,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},G.HitBulletParticleEffect={alpha:{start:.8,end:.1},scale:{start:1,end:.3,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"normal",frequency:.004,emitterLifetime:.31,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}};var D=G;class U extends L{constructor(e,t,i,s,o){super(e,t,i,s,o),this.particleHitFish=null,this.timeMove=40,this.thorwGif=!1,this.isRunParticle=!1,this.cloudy=null,this.init()}init(){super.init()}run(){AppInfo.preLoader.soundController.playThanTai(),this.x=0,this.y=0,this.action="swim",this.movie.onComplete=this.changeAction.bind(this),this.movie.loop=!1,this.particle=new l.a(U.ParticleEffect);this.particle.playParticle(0,0),AppInfo.gameMovie.layerEffect.addChild(this.particle),this.startEffect=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.RedFishLight0type),this.startEffect.gotoAndPlay(0),this.startEffect.anchor.set(.5),this.startEffect.animationSpeed=1.5,this.cloudy=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBoss59.textures.cloudy),this.cloudy.gotoAndPlay(0),this.cloudy.anchor.set(.5),this.cloudy.animationSpeed=1.5,this.cloudy.scaleX=-1,this.cloudy.position.set(-this.cloudy.width/4-40,this.movie.height/2-this.cloudy.height/4+20),this.addChildAt(this.cloudy,0),AppInfo.gameMovie.layerEffect.addChild(this.startEffect);const e=MorphSVGPlugin.pathDataToBezier("M 1 496 A 54 172 0 1 1 226 483 A 20 65 0 1 1 383 491 A 50 157 0 1 1 504 497 A 50 84 0 1 1 653 501 A 50 65 0 1 1 868 629 A 14 19 0 1 1 1272 716 ");let t;TweenMax.to(this.startEffect,5,{bezier:{values:e,type:"cubic",autoRotate:["x","y","rotation",0,!0]},onUpdate:()=>{this.particle._emitter.ownerPos.x=this.startEffect.x,this.particle._emitter.ownerPos.y=this.startEffect.y},onComplete:this.completeEffectStart.bind(this),ease:Linear.easeNone}),t=this.id%2==0?MorphSVGPlugin.pathDataToBezier("M 8 196 L 788 182 C 1004 247 1120 36 1270 312 C 970 251 1081 495 770 401 C 453 163 554.5 397 289 393 Q 159 414 165 535 Q 158 650 358 682 Q 599 707 858 532 Q 1120 388 1091 153 Q 730 1 259 217 Q 114 312 135 428 Q 204 602 462 582 L 1279 575 "):MorphSVGPlugin.pathDataToBezier("M 4 69 L 988 69 Q 1251 81 1267 230 Q 1252 353 986 347 L 416 348 Q 48 271 53 475 Q 35 698 429 601 L 1275 590 "),t=MorphSVGPlugin.pathDataToBezier("M -200 332 L 1480 339 "),TweenMax.to(this,this.timeMove,{bezier:{values:t,type:"cubic"},yoyo:!0,repeat:1,onRepeat:()=>{this.scaleX=-this.scaleX,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&this.fishShadow&&(this.fishShadow.scaleX=-this.fishShadow.scaleX)},onUpdate:()=>{this.onFishSwimUpdate(),12!=this.movie.currentFrame||"attack"!=this.action||this.thorwGif||this.throwGift()},onComplete:()=>{this.dispose()},ease:Linear.easeNone})}throwGift(){let e;AppInfo.gameMovie.gameBoard.listFish.sort(({idA:e},{idB:t})=>e-t);const t=[];for(let i=0;i<AppInfo.gameMovie.gameBoard.listFish.length&&(!U.FISH_TYPE_GIFT.includes(AppInfo.gameMovie.gameBoard.listFish[i].type)||AppInfo.gameMovie.gameBoard.listFish[i].isGift||AppInfo.gameMovie.gameBoard.listFish[i].isRedFish||AppInfo.gameMovie.gameBoard.listFish[i].hasInView||(e=AppInfo.gameMovie.gameBoard.listFish[i],t.push(e),!(t.length>=t[0].type)));i++);if(e){this.thorwGif=!0;for(let e=0;e<t.length;e++)this.addGoldBar(t[e])}}addGoldBar(e){let t;e.isGift=!0,TweenMax.killTweensOf(e),e.rotation=Utilities.toRad(0),AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(e)),AppInfo.gameMovie.gameBoard.listFish.push(e),AppInfo.gameMovie.layerFish.addChild(e),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&AppInfo.gameMovie.layerFishShadow.addChild(e.fishShadow),e.movie.textures=ResourceManager.Atlas.AtlasBoss59.textures.goldBar,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&(e.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBoss59.textures.goldBar);const i=e.type%2==0?1:-1;this.scaleX>0?(e.x=this.x-200,e.y=this.y+.5*this.height/4,t=[{x:e.x,y:e.y,scaleX:.1,scaleY:.1},{x:e.x+200,y:e.y-500,scaleX:.5,scaleY:.5},{x:e.x+400,y:e.y+50*e.type*i,scaleX:1,scaleY:1}]):(e.x=this.x-200,e.y=this.y+.5*this.height/4,t=[{x:e.x,y:e.y,scaleX:.1,scaleY:.1},{x:e.x-200,y:e.y-500,scaleX:.5,scaleY:.5},{x:e.x-400,y:e.y+50*e.type*i,scaleX:1,scaleY:1}]),e.visible=!0,e.scale.set(.1),e.movie.scale.set(1),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&(e.fishShadow.scale.set(.1),e.fishShadow.movie.scale.set(1),TweenMax.to(e.fishShadow,1.2,{bezier:{type:"quadratic",values:t,ease:Linear.easeNone},rotation:2*Math.PI})),e.pathArray[0].x=t[2].x,e.pathArray[0].y=t[2].y,TweenMax.to(e,1.2,{bezier:{type:"quadratic",values:t,ease:Linear.easeNone},onStart:()=>{this.thorwGif=!1},rotation:2*Math.PI,onComplete:(e=>{e.run(e.pathArray),e.runTween.vars.bezier.autoRotate=null,e.runTween.timeScale(.3)}).bind(this,e)}),e.updateTransform(),e.movie.gotoAndPlay(0)}onGifDie(e){TweenMax.killTweensOf(e),e.movie.textures=ResourceManager.Atlas.AtlasBoss59.textures.goldBar,e.movie.loop=!1,e.movie.animationSpeed=1/4,e.movie.gotoAndPlay(0),e.fishShadow&&(e.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBoss59.textures.goldBar,e.fishShadow.movie.animationSpeed=1/4,e.fishShadow.movie.gotoAndPlay(0)),AppInfo.preLoader.soundController.playHopQuaNo(),e.movie.onComplete=e.dispose.bind(e)}completeEffectStart(){this.startEffect&&(TweenMax.killTweensOf(this.startEffect),this.startEffect.destroy(),this.startEffect=null,this.particle&&TweenMax.delayedCall(2,this.disposeParticle.bind(this)))}disposeParticle(){this.particle&&(TweenMax.killTweensOf(this.particle),this.particle.dispose(),this.particle=null)}changeAction(){"swim"==this.action?(this.movie.textures=this.attack,this.action="attack",this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=this.attack,this.fishShadow.movie.gotoAndPlay(0))):(this.movie.textures=this.swim,this.action="swim",this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=this.swim,this.fishShadow.movie.gotoAndPlay(0))),this.movie.onComplete=this.changeAction.bind(this),this.movie.loop=!1}onHitBullet(){super.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[this.type]||PreLoaderConfig.FishHitBulletDefault),ResourceManager.Atlas.AtlasEffects.textures.snowflake&&(null==this.particleHitFish||this.isRunParticle)&&(this.particleHitFish=new R.a(ResourceManager.Atlas.AtlasEffects.textures.snowflake,U.HitBulletParticleEffect),this.particleHitFish.playParticle(this.x,this.y,this.onCompleteHit.bind(this)),AppInfo.gameMovie.layerEffect.addChild(this.particleHitFish),this.isRunParticle=!1)}onCompleteHit(){this.isRunParticle=!0}die(){super.die()}dispose(){AppInfo.preLoader.soundController.stopThanTai(),super.dispose(),this.startEffect&&(TweenMax.killTweensOf(this.startEffect),this.startEffect.destroy(),this.startEffect=null),this.particleHitFish&&(TweenMax.killTweensOf(this.particleHitFish),this.particleHitFish.dispose(),this.particleHitFish=null),this.disposeParticle()}}U.FISH_TYPE_GIFT=[0,1,2,3,4,5],U.ParticleEffect={art:[{framerate:11,loop:!0,textures:["CoinWin0.png","CoinWin2.png","CoinWin3.png","CoinWin4.png","CoinWin5.png","CoinWin6.png","CoinWin7.png","CoinWin8.png"]},{framerate:11,loop:!0,textures:["CoinWin8.png","CoinWin7.png","CoinWin6.png","CoinWin5.png","CoinWin4.png","CoinWin3.png","CoinWin2.png","CoinWin1.png"]}],alpha:{start:1,end:.22},scale:{start:.5,end:1,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:50,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:10},lifetime:{min:4,max:4},blendMode:"normal",frequency:.1,emitterLifetime:-1,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},U.HitBulletParticleEffect={alpha:{start:.8,end:.1},scale:{start:1,end:.3,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:200,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.5,max:.5},blendMode:"normal",frequency:.004,emitterLifetime:.31,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:10}};var N=U;class O extends n.a{constructor(){super(),this._textLeft=null,this._textRight=null,this._iconDragon=null,this._particle=null,this._timeLine=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this._textLeft&&(null===this._iconDragon&&(this._iconDragon=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.dragonIcon),this._iconDragonFake=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.dragonIcon),this._iconDragon.anchor.set(.5),this._iconDragonFake.anchor.set(.5)),null===this._textLeft&&(this._textLeft=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.goldenText)),null===this._textRight&&(this._textRight=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.dragonText)),this._particle=new l.a(O.PARTICLE_EFFECT),this._textLeft.position.set(AppInfo.appRealWidth/2-this._textLeft.width,AppInfo.appRealHeight/2),this._textRight.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._iconDragon.position.set(588,316),this._iconDragonFake.position.set(588,316),this.addChild(this._particle),this.addChild(this._textLeft),this.addChild(this._textRight),this.addChild(this._iconDragon),this.addChild(this._iconDragonFake),this._particle.playParticle(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._playEffect()))}_playEffect(){null===this._timeLine&&(this._timeLine=new TimelineMax({onReverseComplete:()=>{this.dispose()}})),this._timeLine.insert(TweenMax.to(this._textLeft,1,{startAt:{x:-this._textLeft.width},x:AppInfo.appRealWidth/2-this._textLeft.width,ease:Back.easeOut.config(1)})),this._timeLine.insert(TweenMax.to(this._textRight,1,{startAt:{x:1280},x:AppInfo.appRealWidth/2,ease:Back.easeOut.config(1)})),TweenMax.to(this._iconDragonFake,1.5,{startAt:{scaleX:1,scaleY:1,alpha:1},scaleX:5,scaleY:5,alpha:0,repeat:2,ease:Back.easeOut.config(1),onComplete:this._hideEffect.bind(this)}),this._timeLine.play(0)}_hideEffect(){this._timeLine.reverse()}dispose(){let e;for(super.dispose(),this._timeLine&&(this._timeLine.kill(),this._timeLine=null);this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.dispose?e.dispose():e.destroy&&e.destroy(),e=null}catch(e){}}}}O.PARTICLE_EFFECT={art:[{framerate:1,loop:!0,textures:["particleLineBossDragon.png"]}],alpha:{start:1,end:0},scale:{start:.1,end:3,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:1e3,end:1e3,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:65,max:65},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.81,max:.81},blendMode:"normal",frequency:.01,emitterLifetime:-1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:50,minR:0}};var X=O,W=i(139);class H extends W.a{constructor(e,t,i,s){super(e,t,i,s),this.fishShadow=null,this.darkSky=null,this.time=15,this._loop=0,!0&this.id?this.scaleX=-1:this.scaleX=1}init(){super.init(),this._listNodeTree=[];const e=[this.movie.slotContainers[0],this.movie.slotContainers[5],this.movie.slotContainers[6],this.movie.slotContainers[9]];for(let t=0;t<e.length;t++){const i=AppInfo.gameMovie.collisionManager.addPolygon(e[t],[0,0,150,0,150,50,0,50],r.a.TYPE_COLLISION.FISH,e[t]);this._listNodeTree.push(i),e[t].onTriggerCollide=this.onTriggerCollide.bind(this)}this.isBossMap=!0,53==this.type&&(this.movie.tint=0),this.changSpeed=1,this.movie.state.onComplete=this._onCompleteSwim.bind(this)}onTriggerCollide(e){this.onHitBullet()}_onCompleteSwim(){AppInfo.preLoader.soundController.playSoundDragonMove(),AppInfo.preLoader.soundController.playSoundDragonGongLong(),5==this._loop&&this.die(),this._loop++}run(){this.visible||(this.visible=!0),AppInfo.preLoader.soundController.playSoundDragonMove(),AppInfo.preLoader.soundController.playSoundDragonGongLong(),this.movie.state.setAnimation(0,"SWIM",!0),this.movie.visible=!0,-1===this.scaleX?this.movie.position.set(-AppInfo.appRealWidth/2,AppInfo.appRealHeight/2):this.movie.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2)}starEffefct(){this.x=this.listDirection[1&this.id].x+this.width/2*this.listDirection[1&this.id].scaleX,this.scaleX=this.listDirection[1&this.id].scaleX,this.y=AppInfo.appRealHeight/2,TweenMax.to(this,1,{x:this.x-250*this.scaleX});const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures.FishDieParticle2explode[2]),t=this.movie.slotContainers[38];e.position.set(150,50),e.anchor.set(.5,.5),t.addChild(e),TweenMax.to(e,.2,{rotation:10*Math.PI,repeat:-1,ease:Linear.easeNone}),TweenMax.to(e,5,{scaleX:5,scaleY:5,ease:Linear.easeNone,onComplete:this._onCompleteFire.bind(this,e,t)})}_onCompleteFire(e,t){const i=e.getGlobalPosition();t.removeChild(e),TweenMax.killTweensOf(e),e.destroy(),e=null;for(const e of AppInfo.gameMovie.gameBoard.listFish){const t=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures.FishDieParticle2explode[2]);AppInfo.gameMovie.layerEffect.addChild(t),TweenMax.fromTo(t,.2,{x:i.x,y:i.y},{x:e.x,y:e.y,onComplete:(e=>{AppInfo.gameMovie.layerEffect.removeChild(e),e.destroy(),e=null}).bind(this,t),ease:Linear.easeNone}),null!=e.parent&&e.id!=this.id&&e.stun()}this&&null!=this.parent&&this.runEffefct()}runEffefct(){this._timeLineMax=new TimelineMax;const e=TweenMax.fromTo(this,10,{x:this.x,y:this.y,ease:Linear.easeNone},{x:this.listDirection[1&this.id].toX-Math.abs(this.width/2)*this.listDirection[1&this.id].scaleX,y:this.y,onComplete:this.starPathArray.bind(this),ease:Linear.easeNone});this._timeLineMax.append(e)}starPathArray(){this.scaleX=-1;for(let e=0;e<this.pathArray.length;e++){0==e?this.pathArray[e+1].x-this.pathArray[e].x>0?this.pathArray[e].scaleY=-1:this.pathArray[e].scaleY=1:this.pathArray[e-1].x-this.pathArray[e].x>0?this.pathArray[e].scaleY=-1:this.pathArray[e].scaleY=1;const t=TweenMax.to(this,this.pathArray[e].time,{bezier:{type:"thru",curviness:0,values:[{x:this.pathArray[e].x,y:this.pathArray[e].y}],autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone,onStart:function(e){this.scaleY=this.pathArray[e].scaleY}.bind(this,e),onComplete:function(e){e==this.pathArray.length-1&&this.dispose()}.bind(this,e)});this._timeLineMax.append(t)}}changeAnimation(e){switch(e){case H.RUN:this.movie.state.setAnimation(0,"run",!0);break;case H.RUN2:break;case H.RUN3:this.movie.state.setAnimation(0,'"animation"',!0);break;case H.RUN4:this.movie.state.setAnimation(0,"fire",!0);break;case H.FIRE:this.movie.state.setAnimation(0,"fly",!0)}}die(){this.movie.state.clearTrack(0),super.die()}dispose(){super.dispose(),this._timeLineMax&&(this._timeLineMax.kill(),this._timeLineMax=null),this.darkSky&&(this.darkSky.parent.removeChild(this.darkSky),this.darkSky.destroy(),this.darkSky=null),this.fishshadow&&(this.removeChild(this.fishshadow),this.fishshadow.destroy(),this.fishshadow=null);for(let e=0;e<this._listNodeTree.length;e++)this._listNodeTree[e].release()}set changSpeed(e=0){this.movie.state.timeScale=e}}H.RUN=0,H.RUN2=1,H.RUN3=2,H.RUN4=3,H.FIRE=4;var V=H;class Y extends n.a{constructor(e){super(e),this.light=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null==this.light&&(this.light=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMedusaDie.textures.frezze),this.light.animationSpeed=1/8,this.light.onTriggerCollide=this.onTriggerCollide.bind(this),this.addChild(this.light),this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this.light,[90,22,1920,84,1920,111,90,175],r.a.TYPE_COLLISION.GENERIC),this._nodeTree.release()))}dispose(){super.dispose(),TweenMax.killTweensOf(this.light),this.light&&(this.removeChild(this.light),this.light.destroy(),this.light=null),this.parent&&this.parent.removeChild(this)}showEffectMedusaComing(e,t){AppInfo.preLoader.soundController.playWarning(),TweenMax.killChildTweensOf(this.light),this.light.gotoAndPlay(0),0==e?(this.light.anchor.set(1,0),this.light.x=AppInfo.appRealWidth+150,this.light.y=AppInfo.appRealHeight/2+this.light.height/2,this.light.rotation=-Math.PI/2,TweenMax.to(this.light,4,{yoyo:!0,repeat:1,rotation:Math.PI/2,ease:Linear.easeNone,onComplete:this._onCompleteFrezze.bind(this,t)})):(this.light.anchor.set(1,1),this.light.x=-150,this.light.y=AppInfo.appRealHeight/2-this.light.height/2,this.light.rotation=Math.PI/2,TweenMax.to(this.light,4,{rotation:3*Math.PI/2,ease:Linear.easeNone,yoyo:!0,repeat:1,onComplete:this._onCompleteFrezze.bind(this,t)})),AppInfo.gameMovie.collisionManager.add(this._nodeTree)}onTriggerCollide({target:e},t){const i=e;AppInfo.GameInfo.tournamentRoom||i.stone()}_onCompleteFrezze(e){this._nodeTree&&this._nodeTree.release(),e(),this.dispose()}}var z=Y;class K{constructor(){this.callBackSetupBoss=null}playEffectBossComing(e,t,i,s){let o;switch(AppInfo.preLoader.soundController.playBossComingSound(),this.timeline=s,t){case 51:return this.initBossByType(e,t,i,s);case 52:52==t&&(AppInfo.gameMovie.gameBoard.boss33Dance=!1),this.initBossByType(e,t,i,s);break;case 53:case 54:o=new X,this.initBossByType(e,t,i,s);break;case 57:case 58:case 59:case 60:case 102:case 103:case 104:case 105:this.initBossByType(e,t,i,s);break;case 101:o=new z,o.showEffectMedusaComing(i,this.initBossByType.bind(this,e,t,i,s))}o&&AppInfo.gameMovie.layerEffect.addChild(o)}initBossByType(e,t,i,o){let n;switch(t){case K.PENNY:case K.MOON_ANGEL:n=new s.a(e,t,i);break;case K.BLACK_DRAGON:case K.GOLD_DRAGON:n=new V(e,t,i);break;case K.SANTA_CLAUS:n=new E(e,t,i);break;case K.LUCKY_GIFBOX:n=new D(e,t,i);break;case K.LUCKY_GOD:n=new N(e,t,i);break;case K.CEBERUS:n=new b(e,t,i);break;case K.MEDUSA:n=new d(e,t,i),AppInfo.gameMovie.gameBoard.isMedusa=!0;break;case K.CENTAUR:n=new u(e,t,i);break;case K.POSEIDON:n=new _(e,t,i);break;case K.MERMAIRD:n=new v(e,t,i)}return n.timeline=o,this.setUpBoss(n),n}setUpBoss(e){e.hasInView=!1,e.visible=!1,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&(e.fishShadow.visible=!1),AppInfo.gameMovie.layerFish.addChild(e),AppInfo.gameMovie.gameBoard.listFish.push(e),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&AppInfo.gameMovie.layerFishShadow.addChild(e.fishShadow),AppInfo.gameMovie.gameBoard.currentBoss&&(AppInfo.gameMovie.gameBoard.currentBoss.dispose(),AppInfo.gameMovie.gameBoard.currentBoss=null),AppInfo.gameMovie.gameBoard.currentBoss=e,e.updateTransform(),e.run(),e.fishShadow&&(e.fishShadow.visible=!0),e.visible=!0,e.hasInView=!0,"function"==typeof this.callBackSetupBoss&&this.callBackSetupBoss()}startInBattle(){AppInfo.gameMovie.gameBoard.currentBoss.runInBattle(this.timeline)}killBoss(e,t,i,s,o,n){o=void 0===o||""==o?PreLoaderConfig.ListTextConfig.OtherRoomUser:o;const a=this.displayController.getUserSeatByUserID(t);let h,l,r,p,d=null;for(r=AppInfo.gameMovie.gameBoard.listFish.length-1;r>=0;r-=1)if(AppInfo.gameMovie.gameBoard.listFish[r].id==e){d=AppInfo.gameMovie.gameBoard.listFish[r];break}if(a){if(h=a.iconCoin.getGlobalPosition(),l=a.lblCoin.getGlobalPosition(),i>0)if(a.isMe){let e=0;for(let t=0;t<AppInfo.gameMovie.gameBoard.listBullet.length;t++)AppInfo.gameMovie.gameBoard.listBullet[t].basePosition===a.basePosition&&(e+=AppInfo.gameMovie.gameBoard.listBullet[t].power);a.setCoin(s-e)}else a.setCoin(a.coin+i)}else h=new PIXI.Point(640,65),l=new PIXI.Point(640,65);if(a&&a.isMe&&(AppInfo.gameMovie.gameBoard.totalCoinFish+=i,d)){for(let e=0;e<AppInfo.gameMovie.gameBoard.listBossUserKill.length;e++)AppInfo.gameMovie.gameBoard.listBossUserKill[e].fishType==d.type&&(AppInfo.gameMovie.gameBoard.listBossUserKill[e].count++,p=!0);p||AppInfo.gameMovie.gameBoard.listBossUserKill.push({fishType:d.type,count:1})}if(d){AppInfo.gameMovie.gameBoard.removeFishAtIndex(r),AppInfo.gameMovie.layerEffect.addChild(d),AppInfo.gameMovie.gameBoard.currentBoss=null;var c=o+" "+PreLoaderConfig.MessagesConfig.UserKillBossMessage[d.type].Message;AppInfo.preLoader.globalCompoController.compoToast.addMessage(c);let e=null;switch(this.displayController.getUserSeatByUserID(t)&&(e=this.displayController.getUserSeatByUserID(t).basePosition),this.displayController.effectWinBossMap(d.type,d.x,d.y,l.x,l.y,t),this.displayController.effectFishDie(d.type,d.x,d.y,i,l.x,l.y,e),d.type){case K.PENNY:case K.MOON_ANGEL:case K.BLACK_DRAGON:case K.GOLD_DRAGON:case K.SANTA_CLAUS:case K.LUCKY_GIFBOX:case K.LUCKY_GOD:case K.CENTAUR:case K.POSEIDON:case K.MERMAIRD:case K.CEBERUS:this.displayController.groupCoinwin(i,h,d),AppInfo.gameMovie.gameBoard.isFristTime=!1,d.die();break;case K.MEDUSA:d.die(this.displayController.groupCoinwin.bind(this.displayController,i,h,d)),AppInfo.gameMovie.gameBoard.isFristTime=!1}}else{c=o+" "+PreLoaderConfig.MessagesConfig.UserKillBossMessage[n].Message;AppInfo.preLoader.globalCompoController.compoToast.addMessage(c)}}getTypeEffectByBossType(e){switch(e){case K.CENTAUR:return 0;case K.POSEIDON:return 1;case K.CEBERUS:return 3;case K.MEDUSA:return 4}}dispose(){if(AppInfo.gameMovie.gameBoard.currentBoss)switch(AppInfo.gameMovie.gameBoard.currentBoss.type){case K.LUCKY_GOD:}}get displayController(){return AppInfo.gameMovie.displayController}}K.PENNY=51,K.MOON_ANGEL=52,K.BLACK_DRAGON=53,K.GOLD_DRAGON=54,K.SANTA_CLAUS=57,K.LUCKY_GIFBOX=58,K.LUCKY_GOD=59,K.MEDUSA=101,K.CENTAUR=102,K.POSEIDON=103,K.MERMAIRD=104,K.CEBERUS=105;t.a=K},function(e,t,i){"use strict";class s extends PIXI.Container{constructor(e){super(),this.type=e,this._spine=this._setSpine(),this._spine.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this.addChild(this._spine)}dispose(){this._spine.state.clearListeners(),this._spine.destroy({children:!0}),this._spine=null,this.destroy()}play(e){this._spine.state.setAnimation(0,"animation",!1),e&&this._spine.state.addListener({complete:e}),101===this.type&&AppInfo.gameMovie.soundController.playMedusaWelcome()}_setSpine(){var e;101===this.type&&((e=new PIXI.spine.Spine(ResourceManager.Atlas.WelcomeBones.textures.WelcomeBones.spineData)).state.timeScale=.7);103===this.type&&((e=new PIXI.spine.Spine(ResourceManager.Atlas.WelcomeBones.textures.WelcomeBones.spineData)).state.timeScale=.7);return e}}var o=s,n=i(145),a=i(94),h=i(6),l=i(153),r=i(5);class p extends h.a{constructor(){super(),this._iconEffect=null}initGun(){this.gun=new l.a,this.gun.position.set(1220,670),this._iconEffect=new PIXI.Sprite(ResourceManager.Atlas.AtlasGun108.textures.gun108fire[0]),this._iconEffect.anchor.set(.5),this._iconEffect.visible=!1,this._iconEffect.alpha=0,this._iconEffect.position.set(1180,620),this.addChild(this.gun),this.addChild(this._iconEffect)}updateCollectGun(e,t,i,s,o){this.gun||this.initGun(),this.gun.updateCollectGun(e,t,i,s,o)}playEffectCollectChangGun(e,t){this._iconEffect.visible=!0,TweenMax.to(this.gun,1.2,{alpha:0,ease:Linear.easeNone}),TweenMax.to(this._iconEffect,1.2,{alpha:1,ease:Linear.easeNone}),TweenMax.to(this._iconEffect,1.2,{x:640,delay:1.2,alpha:0,onComplete:e,onCompleteScope:t})}playEffectTransFormGun(e,t){this.gun.playEffecTransFormGun(this._completeTrans.bind(this,e,t))}_completeTrans(e,t){if(this._iconEffect.visible=!0,this._iconEffect.position.set(640,310),TweenMax.to(this.gun,.4,{alpha:0,ease:Linear.easeNone}),TweenMax.to(this._iconEffect,.4,{alpha:1,ease:Linear.easeNone}),TweenMax.to(this._iconEffect,.4,{y:700,alpha:0,delay:3,ease:Linear.easeNone,onComplete:e,onCompleteScope:t}),AppInfo.preLoader.filters)(i=AppInfo.preLoader.filters[0]).enable=!0,i.time=0;else{var i=new PIXI.filters.ShockwaveFilter([AppInfo.appRealWidth/2,AppInfo.appRealHeight/2],{amplitude:20,wavelength:400,brightness:1.4,radius:-1},0);AppInfo.preLoader.filters=[i]}TweenMax.to(i,5,{startAt:{enable:!0,time:0},time:4,ease:Linear.easeNone,onComplete:(e=>{e.enable=!1,AppInfo.preLoader.filters=[]}).bind(this,i)}),this._btnChangeGun=new r.a(ResourceManager.Atlas.AtlasPoseidonEffect.textures.iconChangeGunNomal),this._btnChangeGun.position.set(1150,620),this._btnChangeGun.useTweenDown=this._btnChangeGun.useTween=!1,this._btnChangeGun.alpha=0,AppInfo.gameMovie.displayController.myBaseStation.compoChangeGun.alpha=0,this._btnChangeGun.mouseclick=()=>{108===AppInfo.gameMovie.displayController.myBaseStation.compoGun.type?(AppInfo.gameMovie.displayController.myBaseStation.changeGun(AppInfo.gameMovie.displayController.myBaseStation._typeGunPrevious),this._btnChangeGun.texture=this._btnChangeGun._hoverLayer.texture=ResourceManager.Atlas.AtlasPoseidonEffect.textures.iconChangeGun):(AppInfo.gameMovie.displayController.myBaseStation.changeGun(108),this._btnChangeGun.texture=this._btnChangeGun._hoverLayer.texture=ResourceManager.Atlas.AtlasPoseidonEffect.textures.iconChangeGunNomal)},this.addChild(this._btnChangeGun),TweenMax.to(this._btnChangeGun,1.2,{delay:1.2,alpha:1})}dispose(){super.dispose()}}var d=p,c=i(82),u=i(98),m=i(70),f=i(83);class g extends c.a{constructor(e,t){super(e,t),this._nodeTree=null,this.boss=new u.a([PIXI.Texture.EMPTY],e,t),this.boss.anchor.set(.5),this.addChild(this.boss),this.boss.onTriggerCollide=this.onTriggerCollide.bind(this),this.compoHealthBar=new f.a,this.compoHealthBar.pivot.set(this.compoHealthBar.width/2,this.compoHealthBar.height/2),this.boss.addChild(this.compoHealthBar)}onTriggerCollide(e){this.onHitBullet()}onHitBullet(e=16711680){AppInfo.preLoader.soundController.playTrungCa(),16777215!==e&&(TweenMax.killTweensOf(this.boss),this.boss.tint=16777215,this.boss.tintAlpha=0,TweenMax.to(this.boss,.1,{tint:e,onComplete:()=>{TweenMax.to(this.boss,.3,{tint:16777215})}}))}addCollision(e){null===this._nodeTree?(this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this.boss,e,m.a.TYPE_COLLISION.FISH,this),this._nodeTree.setTargetTransform({position:this,rotation:this})):this._nodeTree.add()}removeCollision(){null!==this._nodeTree&&this._nodeTree.release()}die(){this.removeCollision()}updateHealth(e,t){this.compoHealthBar.updateHealth(e,t)}}var I=g;class y extends I{constructor(e,t){super(e,t),this._init()}_init(){this.boss.textures=ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures.fish104Swim,this.boss.animationSpeed=.5,this.addCollision([134,180,564,209,202,353]),this.compoHealthBar.visible=!1}run(){const e=y.LIST_PATH[this.id%6];this.x=e[0].x,this.y=e[0].y,this._runTween=TweenMax.to(this,30,{bezier:{values:e,autoRotate:["x","y","rotation",0,!0]},onComplete:this.die,onCompleteScope:this,ease:Linear.easeNone})}die(){super.die(),TweenMax.killTweensOf(this),TweenMax.to(this,1,{alpha:0,ease:Linear.easeNone})}}y.LIST_PATH={0:[{x:-75,y:360},{x:640,y:360},{x:1600,y:360}],1:[{x:1600,y:360},{x:640,y:360},{x:-75,y:360}],2:[{x:-100,y:-100},{x:640,y:360},{x:1600,y:850}],3:[{x:1600,y:850},{x:640,y:360},{x:-100,y:-100}],4:[{x:1600,y:-100},{x:640,y:360},{x:0,y:850}],5:[{x:0,y:850},{x:640,y:360},{x:1600,y:-100}]};var C=y;class x extends h.a{constructor(){super(),this.txtCountDown=null,this.txtNoteGun=null,this.bg=null,this._chatList=["۱۲۳۴۵۶۷۸۹☽☾☿☿♆⚳⚷〈「」☇☈\n("+PreLoaderConfig.languageConfig.hai_ma_chat1+")","۳۴♆⚳♆\n("+PreLoaderConfig.languageConfig.hai_ma_chat2+")","۳۴۵۷۸☿♆۹☽」☇☈\n("+PreLoaderConfig.languageConfig.hai_ma_chat3+")","۶۷☇☈۲۳۴۵۷۸☿☿♆۴۵۶\n("+PreLoaderConfig.languageConfig.hai_ma_chat4+")"],this._listColor=[{bgColor:"0xfffe99",stokeColor:"0x095911"},{bgColor:"0xfffe99",stokeColor:"0xdc4640"},{bgColor:"0xfffe99",stokeColor:"0x092a59"},{bgColor:"0xfffe99",stokeColor:"0xffffff"},{bgColor:"0xfffe99",stokeColor:"0xff7b13"},{bgColor:"0xfffe99",stokeColor:"0xff7b13"},{bgColor:"0xfffe99",stokeColor:"0xff7b13"}];const e=this._listColor[Utilities.Number.randRange(0,this._listColor.length-1)];this.init(this._chatList[Utilities.Number.randRange(0,this._chatList.length-1)],e.bgColor,e.stokeColor)}init(e,t,i){if(super.init(),this._isDisposed){let s;if(this._isDisposed=!1,null==this.txtNoteGun&&(s={fontFamily:"Tahoma",fontWeight:"bold",fontSize:"18px",fill:i,align:"center",stroke:0,strokeThickness:2,wordWrapWidth:300,wordWrap:!0},this.txtNoteGun=new PIXI.Text(e,s),this.txtNoteGun.anchor.set(.5),this.addChild(this.txtNoteGun)),null==this.bg){const e=new PIXI.Graphics.RoundedRectComplex(0,0,300,100,15,15,15,15,t,.3,2,i,1);this.bg=new PIXI.Sprite(e.generateCanvasTexture()),this.bg.anchor.set(.5),this.addChildAt(this.bg,0)}}}updateBulletText(e){}show(){this.alpha=0,this.visible=!0,this.updateTransform(),this.txtNoteGun.text=this._chatList[Utilities.Number.randRange(0,this._chatList.length-1)],this.bg.width=this.txtNoteGun.width+20,this.bg.height=this.txtNoteGun.height+20,TweenMax.killTweensOf(this),TweenMax.to(this,1,{alpha:1,ease:Expo.easeOut,onComplete:this.hide.bind(this)})}hide(){TweenMax.killTweensOf(this),TweenMax.to(this,1,{alpha:0,delay:3,ease:Expo.easeIn,onComplete:()=>{this.visible=!1}})}dispose(){super.dispose(),TweenMax.killTweensOf(this),this.bg&&(this.bg.destroy(),this.bg=null),this.txtNoteGun&&(this.txtNoteGun.destroy(),this.txtNoteGun=null),this.destroy()}}var w=x;class _ extends PIXI.extras.AnimatedSprite{constructor(e,t){super(ResourceManager.Atlas.AtlasBattleHaiMa.textures.HaiMaSwim),this._nodeTree=null,this.gotoAndPlay(0),this.anchor.set(.5),this.addCollision([80,80,200,80,200,200,80,200]),this.id=e,this.type=t,this._chat=new w,this._chat.hide(),this.addChild(this._chat),TweenMax.to(this,Utilities.Number.randRange(10,50),{delay:Utilities.Number.randRange(10,30),repeat:-1,onRepeat:this._chat.show,onRepeatScope:this._chat,onUpdateScope:this})}addCollision(e){null===this._nodeTree?this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,e,m.a.TYPE_COLLISION.FISH,this):this._nodeTree.add()}setScaleChat(){this._chat.scaleX=-this._chat.scaleX}die(){this.textures=ResourceManager.Atlas.AtlasBattleHaiMa.textures.HaiMaDie,this.loop=!1,this.onComplete=this._completeDie.bind(this)}_completeDie(){TweenMax.to(this,.5,{scaleX:0,scaleY:0,ease:Linear.easeNone})}}var M=_;class S extends h.a{constructor(){super(),this._listHaiMa=[]}add(e,t){const i=new M(e,t);this.addChild(i);const s=200*Math.cos((this.children.length-1)*Utilities.toRad(60)),o=200*Math.sin((this.children.length-1)*Utilities.toRad(60));i.position.set(s,o),this._listHaiMa.push(i),TweenMax.to(this,10,{rotation:Utilities.toRad(359),repeat:-1,onUpdate:this.updateRotation,onUpdateScope:this,ease:Linear.easeNone})}updateRotation(){for(let e=0;e<this._listHaiMa.length;e++)this._listHaiMa[e].rotation=-this.rotation}setScaleChat(){for(let e=0;e<this._listHaiMa.length;e++)this._listHaiMa[e].setScaleChat()}dieAll(e,t){for(let e=0;e<this._listHaiMa.length;e++)this._listHaiMa[e].die()}getHaiMa(e){for(let t=0;t<this._listHaiMa.length;t++)if(e===this._listHaiMa[t].id)return this._listHaiMa[t];return null}dispose(){super.dispose()}}S.POSITION=[{x:0,y:-200},{x:200,y:0},{x:0,y:200},{x:-200,y:0},{x:0,y:-200},{x:200,y:0}];var A=S;var v=class extends I{constructor(e,t){super(e,t),this.cbDie=new PIXI.Observable,this._init()}_init(){this.boss.textures=ResourceManager.Atlas.AtlasBattleBossPoseidon.textures.BossPoseidonSwim,this.boss.animationSpeed=.5,this._aura=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBattleBossPoseidon.textures.BossPoseidonAura),this._aura.animationSpeed=.5,this._aura.anchor.set(.5),this._aura.gotoAndPlay(0),this._aura.y=200,this._attackSpine=new PIXI.spine.Spine(ResourceManager.Atlas.BossSkill.textures.BossSkill.spineData),this._attackSpine.visible=!1,this._attackSpine.state.onComplete=this._onCompleteSkill.bind(this),this.addChildAt(this._aura,0),AppInfo.gameMovie.layerEffect.addChild(this._attackSpine),this._attackSpine.position.set(640,360),this.addCollision([250,260,400,260,400,460,250,460]),this._haima=new A,this._haima.y=100,this.addChildAt(this._haima,1)}run(){this.x=-200,this.y=250,this._runTween=new TweenMax.to(this,25,{x:1600,ease:Linear.easeNone,repeat:-1,yoyo:!0,onRepeat:()=>{this.compoHealthBar.scaleX=this.scaleX=-this.scaleX,this._haima.setScaleChat()}}),this._runTween.play(0)}attack(e,t){this._runTween.pause(),TweenMax.delayedCall(1.5,this._playSpineAttack,[e,t],this),this.boss.textures=ResourceManager.Atlas.AtlasBattleBossPoseidon.textures.BossPoseidonSKill,this.boss.onComplete=this._onCompleteAttack.bind(this,t),this.boss.loop=!1}_onCompleteAttack(e){this.boss.textures=ResourceManager.Atlas.AtlasBattleBossPoseidon.textures.BossPoseidonSwim,this.boss.onComplete=null,this.boss.loop=!0,this._runTween.resume()}_playSpineAttack(e,t){this._attackSpine.visible=!0,this._attackSpine.state.setAnimation(0,GlobalConstants.SPINE.ANIMATION_DEFAULT,!1),AppInfo.gameMovie.displayController.showEffectBloodLose({x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight},t,e),AppInfo.preLoader.soundController.poseidonAttack(),AppInfo.gameMovie.strong(),AppInfo.gameMovie.requestController.battleBossUserBeAttacked(this.id)}_onCompleteSkill(){}addHaiMa(e,t){this._haima.add(e,t)}getHaiMa(e){return this._haima.getHaiMa(e)}die(){super.die(),TweenMax.killTweensOf(this),this.boss.textures=ResourceManager.Atlas.AtlasBattleBossPoseidon.textures.BossPoseidonDie,this.boss.loop=!1,this.boss.onComplete=this._completeDie.bind(this),this._haima.dieAll()}_completeDie(){TweenMax.to(this,.5,{scaleX:0,scaleY:0,delay:1,onComplete(){this.cbDie.notifyObservers()},onCompleteScope:this})}_addMissingText(){null===this._missingText&&(this._missingText=new PIXI.Text(PreLoaderConfig.languageConfig.key_missing.toUpperCase(),{fontFamily:PreLoaderConfig.FontResource.UTMAzuki.name,fontSize:35,fontWeight:"bold",fill:14557460}),this._missingText.anchor.set(.5),AppInfo.gameMovie.layerEffect.addChild(this._missingText)),this._missingText.position.copy(this.storeGlobalPosition.clone()),null===this._tweenMissingText?this._tweenMissingText=TweenMax.to(this._missingText,1,{startAt:{alpha:0},y:"-=130",alpha:1,onComplete(){TweenMax.to(this._missingText,1,{delay:1,y:"-=100",alpha:0})},onCompleteScope:this}):this._tweenMissingText.restart()}};class T extends h.a{constructor(){super(),this._iconPower=null,this._iconBoss=null,this._iconLight=null,this.init()}init(){super.init(),this._iconPower=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonComing.textures.iconPower),this._iconBoss=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonComing.textures.iconPoseidon),this._iconLight=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonComing.textures.light),this._iconPower.anchor.set(.5),this._iconBoss.anchor.set(.5),this._iconLight.anchor.set(.5),this.addChild(this._iconPower,this._iconBoss,this._iconLight),TweenMax.to(this._iconLight,.2,{alpha:0,repeat:-1}),TweenMax.to([this._iconBoss],.8,{y:"-=10",yoyo:!0,repeat:-1,ease:Linear.easeNone})}dispose(){super.dispose()}}var b=T;class B extends h.a{constructor(){super(),this._bgtitle=null,this._iconCircle=null,this._contetLeft=null,this._contetRight=null,this.cbComplete=new PIXI.Observable,this.init()}init(){super.init(),this._bgtitle=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonComing.textures.bgTitle),this._iconCircle=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonComing.textures.iconCircle),this._bgtitle.anchor.set(.5),this._iconCircle.anchor.set(.5),this._contetLeft=new b,this._contetRight=new b,this._contetRight.scaleX=-1,this.addChild(this._iconCircle,this._contetLeft,this._contetRight,this._bgtitle),this.position.set(640,360),this._showEffect()}_showEffect(){this._bgtitle.scale.set(0),TweenMax.to(this._bgtitle,1,{scaleX:1,scaleY:1,ease:Back.easeOut}),TweenMax.to(this._contetLeft,1,{x:-200,delay:.5,ease:Back.easeOut}),TweenMax.to(this._contetRight,1,{delay:.5,x:200,ease:Back.easeOut}),TweenMax.delayedCall(3,this._hideEffect,[],this)}_hideEffect(){TweenMax.to(this,1,{scaleX:0,scaleY:0,onComplete(){this.cbComplete.notifyObservers()},onCompleteScope:this})}dispose(){super.dispose()}}var P=B,k=i(76);class L extends k.a{constructor(){super()}init(){super.init(),this._spine=null,this.cbComplete=null,this._listEffectBoom=[],this._listDelay=[],this._count=0,this._spine=new PIXI.spine.Spine(ResourceManager.Atlas.EffectPoseidonDieBones.textures.EffectPoseidonDieBones.spineData),this._spine.position.set(640,360),this._spine.visible=!1,this.addChild(this._spine),this._container=new PIXI.Container,this._iconWin=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonComing.textures.IconWinThanTai),this._iconCirle=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.iconCirle),this._iconCirle.anchor.set(.5),this._iconWin.anchor.set(.5),this._textCount=new PIXI.extras.BitmapText("0",{font:"70px "+PreLoaderConfig.FontResource.FontNumberAngel.name}),this._textCount.anchor.set(.5),this._textCount.visible=!1,this._iconCirle.addChild(this._textCount),this.addChild(this._container,this._iconCirle,this._iconWin),this._iconCirle.visible=!1}_onCompleteStep(){}play(e,t){const i={userID:AppInfo.myInfo.userID,fishScore:t,userFishScore:99999,userName:"Shan",boss:e};this._info=i,this._container&&this._container.scale.set(0),this._bgWin.scale.set(0),this._iconWin.scale.set(1),this._timeLineMax=new TimelineMax({onComplete:this._completeShow,onCompleteScope:this});const s=this.displayController.getUserSeatByUserID(this._info.userID);s&&(this._basePosition=s.position,this._power=s.compoGun.power,this._totalTimePlay=Math.ceil(this._info.fishScore/(40*this._power)));const o=this._info.boss;o&&(this._bgWin.position.set(o.x,o.y),this._iconWin.position.set(o.x,o.y-100));const n=this.getPositionUserByID(s.basePosition),a=TweenMax.to(this._bgWin,.8,{scaleX:1,scaleY:1,ease:Back.easeOut.config(2)}),h=TweenMax.staggerTo([this._bgWin,this._iconWin],.8,{cycle:{x:[n[0].x,n[1].x],y:[n[0].y,n[1].y]},delay:.5,ease:Back.easeOut.config(2)},0);TweenMax.to(this._iconCirle,.2,{scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,yoyo:!0}),TweenMax.to(this._iconWin,.8,{delay:2,scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,y:"-=20",yoyo:!0}),this._timeLineMax.add(a),this._timeLineMax.add(h),this._timeLineMax.play()}_completeShow(){this._spine.visible=!0,this._spine.state.onComplete=this._completeSpine.bind(this),this._completeState()}_completeState(){this._spine.state.setAnimation(0,"animation",!1),this._playEffectWin()}_completeSpine(){this._spine.visible=!1}_endEffectWin(){}_playEffectWin(){const e=this.displayController.getUserSeatByUserID(this._info.userID);if(e){const s=this._bgWin.getGlobalPosition(),o=this._info.fishScore/50;if(0===this._listEffectBoom.length)for(var t=0;t<100;t++){(i=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.bulletExplode)).loop=!1,i.animationSpeed=1/3,i.scale.set(1.5),i.anchor.set(1.5),this._listEffectBoom.push(i),AppInfo.gameMovie.layerEffect.addChild(i)}let n,a;for(t=0;t<Utilities.Number.randRange(90,100);t++){n=Utilities.Number.randRange(0,1280),a=Utilities.Number.randRange(0,720);var i=this._listEffectBoom[t];const h=TweenMax.delayedCall(.05*t,this._effectExplode,[o,n,a,s,i,e],this);this._listDelay.push(h)}this._bgWin.updateCoin(this._info.fishScore,5);const h=TweenMax.delayedCall(7,this._endMove,[],this);this._listDelay.push(h),AppInfo.gameMovie.strong()}else this.dispose()}_endMove(){const e=this.displayController.getUserSeatByUserID(this._info.userID),t=e.icoinCoinRoomBoss.getGlobalPosition();this.displayController.effectWinCoinCatchFish(17,this._bgWin.x,this._bgWin.y,this._info.fishScore,t.x,t.y,e.basePosition),this.displayController.myBaseStation.changeStylecoinWin(),TweenMax.delayedCall(2,this.cbComplete,[],this.parent)}_effectExplode(e,t,i,{x:s,y:o},n,{basePosition:a}){let h=Utilities.Number.randRange(1,14);h<15?this.displayController.effectWinCoinCatchFish(h,t,i,Utilities.Number.randRange(1,10)*e/10,s,o,a):(18===h&&h++,this.displayController.effectFishDie(h,t,i,e,s,o,a)),n.position.set(t,i),n.gotoAndPlay(0)}dispose(){h.a.prototype.dispose.call(this)}}var R=L;class F extends PIXI.Container{constructor(){super(),this.onCompleteAppear=null,this._mermaid=new PIXI.spine.Spine(ResourceManager.Atlas.MermaidBones.textures.MermaidBones.spineData),this._mermaid.state.setAnimation(0,"animation",!0),this._mermaid.position.set(AppInfo.appRealWidth/2,-this._mermaid.height/2),this.addChild(this._mermaid),this._skill=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonEffect.textures.lighting),this._skill.position.set(50,-145),this._skill.scale.set(.3),this._mermaid.addChild(this._skill),this._skillSprite=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonEffect.textures.lighting),this._skillSprite.anchor.set(.5),this._skillSprite.scale.set(.3),this._skillSprite.visible=!1,this.addChild(this._skillSprite)}dispose(){TweenMax.killTweensOf(this),this._skill&&(this._skill.destroy(),this._skill=null),this._mermaid&&(this._mermaid.destroy(),this._mermaid=null),this.destroy()}appear(){TweenMax.to(this._mermaid,2,{ease:Power0.easeNone,y:250,onComplete(){this.onCompleteAppear&&this.onCompleteAppear()},onCompleteScope:this})}disappear(e){this._skill.visible=!1,this._skillToUser(()=>{this._disappear(),e&&e()})}_skillToUser(e){this._skillSprite.position.copy(this._skill.getGlobalPosition()),this._skillSprite.x+=7,this._skillSprite.visible=!0,TweenMax.to(this._skillSprite,1,{x:800,y:670,scaleX:1,scaleY:1,onComplete(){e&&e()},onCompleteScope:this})}_disappear(){TweenMax.to(this._mermaid,.5,{alpha:0})}}var E=F,G=i(84);class D extends r.a{constructor(){super(ResourceManager.Atlas.AtlasButton.textures.BtnBackToLobbyUp),this.mouseclick=this._onClick.bind(this)}dispose(){GeneralComponent.prototype.dispose.call(this)}_onClick(){AppInfo.preLoader.popUpController.showPopupNotifyWithBtnAgreeAndDisagree(PreLoaderConfig.languageConfig.logout_mgs,this._out.bind(this))}_out(){AppInfo.preLoader.backLobby()}}var U=D;class N extends a.a{constructor(){super(),this.mermaid=null,this._listBossMini=[],this._bossPoseidonComing=null,this._effectPoseidonDie=null,this.compoConversation=null,this._successCollect=!1,this._hasPlay=!1,this._btnLeaveRoom=null,this._bossID=0,this._fishType=0,this._init(),this.initGun(),this._start(),this.displayController=AppInfo.gameMovie.displayController}_init(){this._compocollectGun=new d,this._btnLeaveRoom=new U,this._btnLeaveRoom.position.set(1220,0),this.addChild(this._btnLeaveRoom),this.addChild(this._compocollectGun)}_start(){AppInfo.gameMovie.displayController.startBattleBoss(),AppInfo.gameMovie.unfreezeLayer("layerFish"),AppInfo.gameMovie.unfreeze(),AppInfo.gameMovie.requestController.readyBattleBoss(1),AppInfo.gameMovie.requestController.readyBattleBoss(2),AppInfo.gameMovie.collisionManager.start()}initGun(){this._compocollectGun.initGun()}updateCollectGun(e,t,i,s,o){this._successCollect=i,this._compocollectGun.updateCollectGun(e,t,i,s,o)}killBossMini(e,t,i,s,o){this._compocollectGun.updateCollectGun(e,t,i,s,o)}checkBossMini(e,t,i,s,o,n,a){const h=this.displayController.getUserSeatByPosition(e).iconCoin.getGlobalPosition();if(104===a){const s=this._getBossMiniByID(t);if(null!==s)return s.die(),AppInfo.gameMovie.displayController.effectWinCoinCatchFish(15,s.x,s.y,i,h.x,h.y,e),AppInfo.gameMovie.displayController.effectFishDie(15,s.x,s.y,i,h.x,h.y,e),!0}else{const s=this.poseidon.getHaiMa(t);if(null!==s){const t=s.getGlobalPosition();AppInfo.gameMovie.displayController.effectWinCoinCatchFish(1,t.x,t.y,i,h.x,h.y,e),AppInfo.gameMovie.displayController.effectFishDie(1,t.x,t.y,i,h.x,h.y,e)}}return!1}_getBossMiniByID(e){for(let t=0;t<this._listBossMini.length;t++)if(this._listBossMini[t].id===e)return this._listBossMini[t];return null}addBoss(e,t,i,s,o,n){o?30===e?this._addHaiMa(i,e):this._addBossMini(i,e):(null===this._bossPoseidonComing&&(this.poseidon=new v(i,e),this._successCollect?(this._bossID=i,this._fishType=e,this._compocollectGun.playEffectTransFormGun(this._changeGunComplete,this)):(this._compocollectGun.visible=!1,this._createComingEffect(i,e)),this.displayController.compoMission&&(this.displayController.compoMission.dispose(),this.displayController.compoMission=null),this.displayController.compoProgressBattleBoss&&(this.displayController.compoProgressBattleBoss.updateProgress(0),this.displayController.compoProgressBattleBoss.visible=!1)),this._killBossMini())}_createComingEffect(e,t){this._bossPoseidonComing=new P,this._bossPoseidonComing.cbComplete.add(this._addMainBoss.bind(this,e,t)),this.addChild(this._bossPoseidonComing)}_addHaiMa(e,t){this.poseidon&&this.poseidon.addHaiMa(e,t)}_addBossMini(e,t){const i=new C(e,t);this._listBossMini.push(i),this.addChildAt(i,0),i.run()}_killBossMini(){for(let e=0;e<this._listBossMini.length;e++)this._listBossMini[e].die()}_addMainBoss(){this._fishRunOut(),this.addChild(this.poseidon),this.poseidon.run()}bossAttack(e,t,i){this.poseidon&&this.poseidon.id===e&&this.poseidon.attack(t,i)}updateInfoBoss(e,t,i){this.poseidon&&this.poseidon.id===e&&this.poseidon.updateHealth(t,i)}showEffectCoin(e){this.poseidon.die(),this.poseidon.cbDie.add(this.showFinish.bind(this,e)),this._fishRunOut()}showSummonBoss(){}summonBoss(){AppInfo.gameMovie.requestController.readyBattleBoss(3)}_changeGunComplete(){AppInfo.gameMovie.displayController.myBaseStation.changeGun(108),this._bossPoseidonComing=new P,this._bossPoseidonComing.cbComplete.add(this._addMainBoss.bind(this,this._bossID,this._fishType)),this.addChild(this._bossPoseidonComing)}_fishRunOut(){for(let e=0,t=AppInfo.gameMovie.gameBoard.listFish.length;e<t;e++){const t=AppInfo.gameMovie.gameBoard.listFish[e];t&&(t.refreshInView(),t.hasInView&&t.runTween?(t.releaseNode(),t.runFastOutScreen(5)):(t.dispose(),e--))}}showFinish(e){this.totalCoinWin=e,null===this._effectPoseidonDie&&(this._effectPoseidonDie=new R,this._effectPoseidonDie.play(this.poseidon.position,this.totalCoinWin),this._effectPoseidonDie.cbComplete=this.showTalkEnd.bind(this),this.addChild(this._effectPoseidonDie));const t=AppInfo.gameMovie.displayController.addGroupFishInContext;t&&t.dispose()}_onAppearComplete(){this.compoFinish.disappear(this.onCompleteDisappear.bind(this))}showTalkEnd(){this.compoFinish=new E,this.compoFinish.onCompleteAppear=this.showConversationWin.bind(this),this.compoFinish.appear(),this.addChild(this.compoFinish)}onCompleteDisappear(){AppInfo.gameMovie.displayController.finishBattleBoss.play()}showConversationWin(){this._createConversation(),this.compoConversation.onCompleteDisappear=this._onAppearComplete.bind(this),this.compoConversation.textConver=PreLoaderConfig.languageConfig.win_poseidon_room,this.compoConversation.appear(),AppInfo.gameMovie.freezeLayer("layerFish")}_createConversation(){null===this.compoConversation&&(this.compoConversation=new G.a(""),this.compoConversation.x=AppInfo.appRealWidth/2,this.compoConversation.y=450,this.compoConversation.avatar.x+=40,this.compoConversation.avatar.y=60,AppInfo.gameMovie.layerEffect.addChild(this.compoConversation))}}var O=N;class X extends PIXI.Container{constructor(){super(),this._image=null,this.cbMoveToEndPoint=new PIXI.Observable,this.init()}init(){this._image=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonEffect.textures.GunMermaid[Utilities.Number.randRange(0,3)]),this._image.anchor.set(.5),this.addChild(this._image)}updateType(e){this._image.texture=ResourceManager.Atlas.AtlasPoseidonEffect.textures.GunMermaid[e]}showEffect(){this.position.set(640,360),this.scale.set(0),this.visible=!0,TweenMax.to(this,.8,{scaleX:1,scaleY:1,ease:Back.easeOut}),TweenMax.to(this,.8,{delay:.8,scaleX:.1,scaleY:.1,onComplete:this._moveToEndPoint,onCompleteScope:this,x:1230,y:680})}_moveToEndPoint(){this.cbMoveToEndPoint.notifyObservers()}}var W=X;var H=class{constructor(e){this._listItemPiece=[],this.gameMovie=AppInfo.gameMovie,this.battleBoss=e||null}dropGunPiece(e,t,i,s,o){this._getIdle(e).showEffect()}_getIdle(e){let t=this._listItemPiece.pop();return t||(t=new W,t.cbMoveToEndPoint.add(this._moveToEndPointComplete.bind(this,t)),this.gameMovie.layerEffect.contains(t)||this.gameMovie.layerEffect.addChild(t)),t.updateType(e-1),t}_moveToEndPointComplete(e){this._listItemPiece.push(e),e.visible=!1}};class V extends PIXI.Container{constructor(e){switch(super(),this.gameMovie=AppInfo.gameMovie,this.displayController=AppInfo.gameMovie.displayController,this.typeBoss=e,this.currentBattleBoss=null,this.typeBoss){case V.MEDUSA:this.compoBattleMedusa=new n.a,this.addChild(this.compoBattleMedusa),this.currentBattleBoss=this.compoBattleMedusa,this._medusaWelCome(),this.displayController.compoMission&&(this.displayController.compoMission.dispose(),this.displayController.compoMission=null),this.displayController.compoProgressBattleBoss&&(this.displayController.compoProgressBattleBoss.updateProgress(0),this.displayController.compoProgressBattleBoss.visible=!1);break;case V.POSEIDON:this._poseidonWelCome(),this.compoBattlePoseidon=new O,this.addChild(this.compoBattlePoseidon),this.currentBattleBoss=this.compoBattlePoseidon}this.effectDropItemManager=new H(this.currentBattleBoss)}_medusaWelCome(){this.welcomeBattleBoss=new o(this.typeBoss),AppInfo.gameMovie.layerEffect.addChild(this.welcomeBattleBoss),this.welcomeBattleBoss.play(()=>{TweenMax.delayedCall(0,(function(){this.welcomeBattleBoss.dispose(),this.welcomeBattleBoss=null}),[],this),this.typeBoss===V.MEDUSA&&this.compoBattleMedusa.introduce(),AppInfo.gameMovie.soundController.playBossComingSound()})}_poseidonWelCome(){this.welcomeBattleBoss=new o(this.typeBoss),AppInfo.gameMovie.layerEffect.addChild(this.welcomeBattleBoss),this.welcomeBattleBoss.play(()=>{TweenMax.delayedCall(0,(function(){this.welcomeBattleBoss.dispose(),this.welcomeBattleBoss=null}),[],this),AppInfo.gameMovie.soundController.playBossComingSound()})}dispose(){null!==this.currentBattleBoss&&(this.currentBattleBoss.dispose(),this.currentBattleBoss=null)}showEffectCoin(e){this.typeBoss===V.MEDUSA?this.compoBattleMedusa.showEffectCoin(e):this.typeBoss===V.POSEIDON&&this.compoBattlePoseidon.showEffectCoin(e)}updateInfoEffect(e,t){this.typeBoss===V.MEDUSA?this.compoBattleMedusa.updateInfoEffect(e,t):this.typeBoss===V.POSEIDON&&this.compoBattlePoseidon.showEffectCoin(e)}showResult(){this.setupEndBoss(),this.typeBoss===V.MEDUSA?this.compoBattleMedusa.showFinish():this.typeBoss===V.POSEIDON&&this.compoBattlePoseidon.showFinish()}bossAttack(e,t,i,s,o){this.currentBattleBoss.bossAttack(s,o,i)}updateInfoBoss(e,t,i){this.currentBattleBoss.updateInfoBoss(e,t,i)}getBossById(e){return this.currentBattleBoss.getBossById(e)}finish(e){this.currentBattleBoss.finish(e)}addBoss(e,t,i,s,o,n){this.currentBattleBoss.addBoss(e,t,i,s,o,n)}setupFightBoss(){PreLoaderConfig.FontResource.CoinWin.name=PreLoaderConfig.FontResource.CoinWinGreen.name}setupEndBoss(){PreLoaderConfig.FontResource.CoinWin.name="CoinWin"}finishGame(){this.setupEndBoss()}statueBroken(){this.compoBattleMedusa.statueBroken()}releaseEye(e,t,i,s){this.compoBattleMedusa.cerberusDead(e,t,i,s)}eyesFireBullet(e){this.compoBattleMedusa.eyesFireBullet(e)}eyesPerfectly(){this.compoBattleMedusa.eyesPerfectly()}updateCollectGun(e,t,i,s,o){t>0&&this.effectDropItemManager.dropGunPiece(e,t,i,s,o),this.currentBattleBoss.updateCollectGun(e,t,i,s,o)}killBossMini(e,t,i,s,o,n){this.currentBattleBoss.killBossMini(e,t,i,s,o,n)}checkBossMini(e,t,i,s,o,n,a){return!!this.currentBattleBoss.checkBossMini&&this.currentBattleBoss.checkBossMini(e,t,i,s,o,n,a)}showSummonBoss(){this.currentBattleBoss.showSummonBoss&&this.currentBattleBoss.showSummonBoss()}summonBoss(){this.currentBattleBoss.summonBoss&&this.currentBattleBoss.summonBoss()}}V.PENNY=51,V.MOON_ANGEL=52,V.BLACK_DRAGON=53,V.GOLD_DRAGON=54,V.SANTA_CLAUS=57,V.LUCKY_GIFBOX=58,V.LUCKY_GOD=59,V.MEDUSA=101,V.CENTAUR=102,V.POSEIDON=103,V.MERMAIRD=104,V.CEBERUS=105;t.a=V},function(e,t,i){"use strict";var s=i(6),o=i(71);class n extends s.a{constructor(e){super(e),this.effectParticle=null,this._txtTitle=null,this._bgTitle=null,this._txtItem=null,this._bgText=null,this._cricle=null,this._overlay=null,this._item=null,this._itemBG=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this._itemBG&&(this._itemBG=new PIXI.Sprite(ResourceManager.Atlas.AtlasPopupHoYeah.textures.itemDefault),this._itemBG.anchor.set(.5),this.addChild(this._itemBG)),null===this._item&&(this._item=new PIXI.Sprite,this._item.anchor.set(.5),this.addChild(this._item)),null===this._overlay&&(this._overlay=new PIXI.Sprite(ResourceManager.Atlas.AtlasPopupHoYeah.textures.overlayItem),this._overlay.y=-34,this._overlay.anchor.set(.5),this.addChild(this._overlay)),null===this._bgText&&(this._bgText=new PIXI.Sprite(ResourceManager.Atlas.AtlasPopupHoYeah.textures.titleItem),this._bgText.anchor.set(.5),this._bgText.y=this._itemBG.height/2-this._bgText.height,this.addChild(this._bgText)),null===this._txtItem&&(this._txtItem=new PIXI.Text("",{align:"center",dropShadow:!0,dropShadowBlur:10,dropShadowColor:3687819,dropShadowDistance:0,fill:16777215,fontSize:20,fontWeight:"bold"}),this.addChild(this._txtItem)),null===this._bgTitle&&(this._bgTitle=new PIXI.Sprite(ResourceManager.Atlas.AtlasPopupHoYeah.textures.bgTitle),this._bgTitle.anchor.set(.5),this._bgTitle.x=this._itemBG.width/2-this._bgText.width/2,this._bgTitle.y=-this._itemBG.height/2+7,this._bgTitle.visible=!1,this.addChild(this._bgTitle)),null===this._txtTitle&&(this._txtTitle=new PIXI.Text("",{align:"center",dropShadow:!0,dropShadowBlur:10,dropShadowColor:3687819,dropShadowDistance:0,fill:16777215,fontSize:20,fontWeight:"bold"}),this._txtTitle.visible=!1,this.addChild(this._txtTitle)),null===this.effectParticle&&(this.effectParticle=new o.a(n.ConfigParticle),this.effectParticle.interactive=!1,this.effectParticle.hitArea=PIXI.Rectangle.EMPTY),this.addChild(this.effectParticle))}updateItem(e){let t;switch(this.visible=!0,this._item.visible=!n.ItemComplete.Item,e.Type){case n.ItemComplete.Xu:t=ResourceManager.Atlas.AtlasPopupHoYeah.textures.itemDefault,this._txtItem.text=Utilities.FormatNumber(e.Value)+" "+PreLoaderConfig.currency;break;case n.ItemComplete.EXP:t=ResourceManager.Atlas.AtlasPopupHoYeah.textures.bgItem,this._txtItem.text=Utilities.FormatNumber(e.Value)+" EXP";break;case n.ItemComplete.Item:t=null,this._txtItem.text="x"+e.Value;break;case n.ItemComplete.VipPoint:t=ResourceManager.Atlas.AtlasPopupHoYeah.textures.bgItem,this._txtItem.text=e.Value+" "+PreLoaderConfig.ListTextConfig.Point;break;default:t=ResourceManager.Atlas.AtlasPopupHoYeah.textures.itemDefault,e.Value&&(this._txtItem.text="x"+e.Value)}e.Image&&this._setImageItem(e.Image),t&&(this._itemBG.texture=t),e.Text&&(this._txtItem.text=e.Text),this._txtItem.x=-this._txtItem.width/2,this._txtItem.y=this._bgText.y-this._txtItem.height/2+2,e.Title?(this._txtTitle.scale.set(1),this._bgTitle.visible=!0,this._txtTitle.visible=!0,this._txtTitle.text=e.Title,this._txtTitle.width>this._bgTitle.width-10&&this._txtTitle.scale.set((this._bgTitle.width-10)/this._txtTitle.width),this._txtTitle.x=this._bgTitle.x-this._txtTitle.width/2,this._txtTitle.y=this._bgTitle.y-this._txtTitle.height/2-3):(this._bgTitle.visible=!1,this._txtTitle.visible=!1),TweenMax.killTweensOf(this.effectParticle._emitter.ownerPos),this.effectParticle._emitter.ownerPos.x=0,this.effectParticle._emitter.ownerPos.y=0,this.effectParticle.playParticle(-50,50),TweenMax.to(this.effectParticle._emitter.ownerPos,2.5,{bezier:{curviness:2,values:[{x:52,y:50},{x:52,y:50},{x:52,y:-55},{x:52,y:-55},{x:-50,y:-55},{x:-50,y:-55},{x:-50,y:50},{x:-50,y:50}]},repeat:-1,ease:Power0.easeNone})}_setImageItem(e){this._imageLoader||(this._imageLoader=new PIXI.loaders.Loader),this._imageLoader.visible=!0,this._imageLoader.reset(),this._imageLoader.add(e).load(()=>{this._imageLoader.resources&&null===this._imageLoader.resources[e].error&&(AppInfo.preLoader.globalCompoController.Loading.hide(),this._item.texture=this._imageLoader.resources[e].texture,this._item.y=-5,this._item.visible=!0,this._itemBG.texture=ResourceManager.Atlas.AtlasPopupHoYeah.textures.bgItem)})}dispose(){super.dispose(),this._itemBG&&(this._itemBG.destroy(),this._itemBG=null),this._item&&(this._item.destroy(),this._item=null),this._overlay&&(this._overlay.destroy(),this._overlay=null),this._bgText&&(this._bgText.destroy(),this._bgText=null),this._txtItem&&(this._txtItem.destroy(),this._txtItem=null),this._bgTitle&&(this._bgTitle.destroy(),this._bgTitle=null),this._txtTitle&&(this._txtTitle.destroy(),this._txtTitle=null),this.effectParticle&&(this.effectParticle._emitter&&TweenMax.killTweensOf(this.effectParticle._emitter.ownerPos),this.effectParticle.dispose(),this.effectParticle=null)}onResize(e){super.onResize(e)}hide(){this.visible=!1,this.effectParticle.visible=!1,TweenMax.killTweensOf(this.effectParticle._emitter.ownerPos)}}n.ConfigParticle={art:[{framerate:20,loop:!0,textures:["RedFishLight0type0.png"]}],alpha:{start:1,end:0},scale:{start:.5,end:.2,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#d8ff4a"},speed:{start:50,end:50,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:100,max:200},lifetime:{min:.001,max:1},blendMode:"screen",frequency:.01,emitterLifetime:-1,maxParticles:20,pos:{x:0,y:0},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},n.ItemComplete={Xu:0,EXP:1,Item:2,VipPoint:3,Wheel:5};var a=n;class h extends a{constructor(e,t,i){super();let s,o=-1;if(e===h.TYPE_SKILL)o=a.ItemComplete.Item,s=ResourceManager.Atlas.AtlasGunSkills.textures.medusa;else if(e===h.TYPE_ITEM){o=a.ItemComplete.Item;for(let e=0,i=AppInfo.MyInfo.myListItem.length;e<i;e++){const i=AppInfo.MyInfo.myListItem[e];if(i.Type===t){s=i.Image;break}}}else e===h.TYPE_COIN&&(o=a.ItemComplete.Xu);this.updateItem({Value:i,Type:o,Image:s})}_setImageItem(e){e instanceof PIXI.Texture?(this._item.texture=e,this._item.visible=!0,this._item.y=-8,this._itemBG.texture=ResourceManager.Atlas.AtlasPopupHoYeah.textures.bgItem):super._setImageItem(e)}}h.TYPE_SKILL=8,h.TYPE_ITEM=3,h.TYPE_COIN=1;t.a=h},function(e,t,i){"use strict";(function(e){i(4);var s=i(85),o=i(80),n=i(120),a=(i(90),i(171)),h=i(121),l=i(161),r=i(174),p=i(172),d=i(89),c=i(122),u=i(123),m=i(124),f=i(125),g=i(126),I=i(168),y=i(71),C=i(169),x=i(14),w=i(72),_=i(128),M=i(93),S=i(129),A=i(130),v=i(131),T=i(132),b=i(133),B=i(134),P=i(135),k=i(136),L=i(137),R=i(138),F=i(162),E=i(100),G=i(140),D=i(165),U=i(143),N=i(102),O=i(159),X=i(181),W=i(179),H=i(164),V=i(144),Y=i(101),z=i(96),K=i(155),q=i(157),Q=i(77),J=i(158),Z=i(170),j=i(173),$=i(176);PreLoaderConfig.ConfigParticleFireFishDie={alpha:{start:1,end:.5},scale:{start:.5,end:.8,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:600,end:300},acceleration:{x:0,y:0},startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:200,max:500},lifetime:{min:1,max:3},blendMode:"normal",frequency:.001,emitterLifetime:1,maxParticles:50,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},PreLoaderConfig.COINMOVIE={art:[{framerate:11,loop:!0,textures:["CoinWin0.png","CoinWin2.png","CoinWin3.png","CoinWin4.png","CoinWin5.png","CoinWin6.png","CoinWin7.png","CoinWin8.png"]},{framerate:11,loop:!0,textures:["CoinWin8.png","CoinWin7.png","CoinWin6.png","CoinWin5.png","CoinWin4.png","CoinWin3.png","CoinWin2.png","CoinWin1.png"]}],alpha:{start:1,end:1},scale:{start:.7,end:1.2,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:1,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:360,max:360},noRotation:!1,rotationSpeed:{min:1e3,max:10},lifetime:{min:8,max:8},blendMode:"normal",ease:[{s:0,cp:.379,e:.548},{s:.548,cp:.717,e:.676},{s:.676,cp:.635,e:1}],frequency:.004,emitterLifetime:1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:50,minR:0}},PreLoaderConfig.SUPERWIN={art:[{framerate:11,loop:!0,textures:["CoinWin0.png","CoinWin2.png","CoinWin3.png","CoinWin4.png","CoinWin5.png","CoinWin6.png","CoinWin7.png","CoinWin8.png"]},{framerate:11,loop:!0,textures:["CoinWin8.png","CoinWin7.png","CoinWin6.png","CoinWin5.png","CoinWin4.png","CoinWin3.png","CoinWin2.png","CoinWin1.png"]}],alpha:{start:1,end:1},scale:{start:1,end:1.5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:800,end:400,minimumSpeedMultiplier:.001},acceleration:{x:0,y:1e3},maxSpeed:0,startRotation:{min:-120,max:-70},noRotation:!1,rotationSpeed:{min:0,max:720},lifetime:{min:3,max:5},blendMode:"normal",frequency:.01,emitterLifetime:2,maxParticles:200,pos:{x:-175,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:250,h:50}},PreLoaderConfig.BIGWIN={art:[{framerate:11,loop:!0,textures:["CoinWin0.png","CoinWin2.png","CoinWin3.png","CoinWin4.png","CoinWin5.png","CoinWin6.png","CoinWin7.png","CoinWin8.png"]},{framerate:11,loop:!0,textures:["CoinWin8.png","CoinWin7.png","CoinWin6.png","CoinWin5.png","CoinWin4.png","CoinWin3.png","CoinWin2.png","CoinWin1.png"]}],alpha:{start:1,end:.56},scale:{start:1,end:.8,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:500,end:500,minimumSpeedMultiplier:1.5},acceleration:{x:0,y:0},maxSpeed:10,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:-720,max:720},lifetime:{min:.3,max:3},blendMode:"normal",frequency:.002,emitterLifetime:.6,maxParticles:150,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},PreLoaderConfig.CoinIsMe=[{framerate:11,loop:!0,textures:["CoinWin0.png","CoinWin2.png","CoinWin3.png","CoinWin4.png","CoinWin5.png","CoinWin6.png","CoinWin7.png","CoinWin8.png"]},{framerate:11,loop:!0,textures:["CoinWin8.png","CoinWin7.png","CoinWin6.png","CoinWin5.png","CoinWin4.png","CoinWin3.png","CoinWin2.png","CoinWin1.png"]}],PreLoaderConfig.CoinNotMe=[{framerate:11,loop:!0,textures:["CoinWinOtherUser0.png","CoinWinOtherUser2.png","CoinWinOtherUser3.png","CoinWinOtherUser4.png","CoinWinOtherUser5.png","CoinWinOtherUser6.png","CoinWinOtherUser7.png","CoinWinOtherUser8.png"]},{framerate:11,loop:!0,textures:["CoinWinOtherUser8.png","CoinWinOtherUser7.png","CoinWinOtherUser6.png","CoinWinOtherUser5.png","CoinWinOtherUser4.png","CoinWinOtherUser3.png","CoinWinOtherUser2.png","CoinWinOtherUser1.png"]}],t.a=class{constructor(){this.effectitemBGInGame=null,this.bossProcess=null,this.addGroupFishInContext=null,this.preventLagBullet=null,this.effectLightingWater=null,this.timerWaitingBossMiniDie=null,this.currentMiniGame=null,this.iniciarJuegoE=null,this.iniciarJuego=!1,this.poolManger=null,this.onMouseUpToStopFireBinded=null,this.onMouseDownLayerFishBinded=null,this.transferScreenEffect=null,this.timeOutTransferScreenID=-1,this.intervalSettingDelta=0,this._lastTimeUseForCheckCollision=performance.now(),this._lastTime=performance.now(),this.compoLuckySpin=null,this.timerShowHPBoss=null,this.compoBossHeal=null,this.caTranCommingEffect=null,this.bossComingEffect=null,this.timerToFreeGun=null,this.timerToOutView=null,this.timerToKick=null,this.timerWaitToKick=null,this.timerToTraceGun=null,this.timerToFireGun=null,this.waweMovie=null,this.compoTopHitBoss=null,this.listBaseStation=[],this.myBaseStation=null,this.compoTooltipLockFish=null,this.onEnterFrame=this.onEnterFrame.bind(this),this.compoChat=null,this.compoMission=null,this.compoBackground=null,this.compoDailyMission=null,this._timerChangeBG=null,this._compoAccpectTournament=null,this._caTranManager=null,this._botManager=null,this._fishManager=null,this._effectInGameManager=null,this.bossMiniRoomManager=null,this.textCoinManager=null,this.coinWinManager=null,this.bulletExplodeManager=null,this.nextPositionSeat=0}initInGame(){AppInfo.gameMovie.gameBoard.roomSevenSeaKind=PreLoaderConfig.roomSevenSeaKind,AppInfo.preLoader.globalCompoController.compoHeader.visible=!0,AppInfo.GameInfo.tournamentRoom&&(AppInfo.GameInfo.kindID=8),this._initGeneral(),AppInfo.GameInfo.tournamentRoom?this._initForTournament():this._initNormal(),!AppInfo.GameInfo.tournamentRoom&&PreLoaderConfig.UseBotConfig.enable&&(this.initBot(AppInfo.GameInfo.listBotSeverPush),null==this._botManager&&(this._botManager=new W.a),this._botManager.init(this.listBot)),this._fishManager=new H.a,this._effectInGameManager=new X.a,this.bossMiniRoomManager=new J.a,this.coinWinManager=new Z.a,this.textCoinManager=new j.a,this.bulletExplodeManager=new $.a}initBot(e){PreLoaderConfig.UseBotConfig.enable&&(this.listBot=e)}_initForTournament(){}_initNormal(){this.compoTooltipLockFish=new n.a,this.compoTooltipLockFish.setToCenterScreen(),this.compoTooltipLockFish.hide(),AppInfo.gameMovie.layerComponent.addChild(this.compoTooltipLockFish),setTimeout(()=>{AppInfo.preLoader.soundController.playGameBGSound()},2e3);let e=-1;for(let t=0;t<PreLoaderConfig.ListGunConfig.length;t++)PreLoaderConfig.ListGunConfig[t].power[0]<=AppInfo.MyInfo.money&&(e=PreLoaderConfig.ListGunConfig[t].id);-1==e?(this.timerToOutView=new x.a(PreLoaderConfig.TimeOutViewOut,1,this.onStartCountToOutView.bind(this)),this.timerToOutView.Start()):(this.timerWaitToKick=new x.a(PreLoaderConfig.TimeOutWaitToKick,1,this.onStartCountToKick.bind(this)),this.timerWaitToKick.Start()),null===this._caTranManager&&(this._caTranManager=new O.a),null===this.compoBackground&&(this.compoBackground=new U.a,AppInfo.gameMovie.layerBackground.addChildAt(this.compoBackground,0)),this.randomBackground(),103===AppInfo.gameMovie.gameBoard.roomSevenSeaKind||AppInfo.gameMovie.gameBoard.roomSevenSeaKind?this.waweMovie&&(this.waweMovie.gotoAndStop(0),this.waweMovie.visible=!1,this.waweMovie.alpha=0):this.waweMovie&&(this.waweMovie.gotoAndPlay(0),this.waweMovie.visible=!0,this.waweMovie.alpha=1),null==this.addGroupFishInContext&&(this.addGroupFishInContext=new R.a),null===this._timerChangeBG&&(this._timerChangeBG=new x.a(1e3,PreLoaderConfig.TimeChangBG,null,this._effectChangBG.bind(this))),this._timerChangeBG.Start(),AppInfo.gameSetting.tourID&&AppInfo.gameSetting.tourID===AppInfo.preLoader.tourID&&this.showAccpectTournament()}_setupRoomFree(){PreLoaderConfig.FontResource.CoinWin=PreLoaderConfig.FontResource.CoinWinGreen,PreLoaderConfig.ListGunConfig=PreLoaderConfig.RoomFree.ListGunConfig}_initGeneral(){switch(AppInfo.GameInfo.kindID){case PreLoaderConfig.RoomThuong.kindId:PreLoaderConfig.ListGunConfig=PreLoaderConfig.RoomThuong.ListGunConfig;break;case PreLoaderConfig.RoomVip.kindId:PreLoaderConfig.ListGunConfig=PreLoaderConfig.RoomVip.ListGunConfig;break;case PreLoaderConfig.InfoRoomID.RoomFree:this._setupRoomFree();break;case PreLoaderConfig.RoomOcean.kindId:AppInfo.GameInfo.roomGroup===PreLoaderConfig.RoomOcean.roomGroup.normal.id?PreLoaderConfig.ListGunConfig=PreLoaderConfig.RoomOcean.roomGroup.normal.ListGunConfig:PreLoaderConfig.ListGunConfig=PreLoaderConfig.RoomOcean.roomGroup.vip.ListGunConfig;break;default:PreLoaderConfig.ListGunConfig=PreLoaderConfig.RoomThuong.ListGunConfig}PreLoaderConfig.CompoChat.enableChat&&null===this.compoChat&&(this.compoChat=new G.a,this.compoChat.position.set(AppInfo.appRealWidth/2-this.compoChat.width/2,AppInfo.appRealHeight/2+60),this.compoChat.updateOverlayUI(this.compoChat.x,this.compoChat.y),AppInfo.gameMovie.layerEffect.addChild(this.compoChat)),this.onMouseDownLayerFishBinded=this.onMouseDownLayerFish.bind(this),this.onMouseMoveLayerFishBinded=this.onMouseMoveLayerFish.bind(this),this.onMouseUpToStopFireBinded=this.onMouseUpToStopFire.bind(this),AppInfo.gameMovie.layerFish.name="layerFish",AppInfo.gameMovie.layerFish.mousedown=this.onMouseDownLayerFishBinded,AppInfo.gameMovie.layerFish.pointermove=this.onMouseMoveLayerFishBinded,AppInfo.gameMovie.layerFish.pointerup=this.onMouseUpToStopFireBinded,AppInfo.gameMovie.layerFish.hitArea=new PIXI.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight),AppInfo.gameMovie.layerFish.interactive=!0,AppInfo.gameMovie.layerFish.interactiveChildren=!0,this._lastTime=performance.now(),this._lastTimeUseForCheckCollision=performance.now(),AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrame),this.timerToFireGun=new x.a(PreLoaderConfig.TimeIntervalFireGun,Number.MAX_VALUE,this.onTickToFireGun.bind(this,!0)),this.timerToTraceGun=new x.a(PreLoaderConfig.TimeIntervalTraceGun,Number.MAX_VALUE,this.onTickToTraceGun.bind(this,!0)),this.timerShowHPBoss=new x.a(PreLoaderConfig.BossConfig.timeShowBossHeal,1,this.onHideHpBoss.bind(this)),this.listBaseStation=[],this.intervalSettingDelta=0,AppInfo.preLoader.requestController.getSkillList(),null==this.poolManger&&(this.poolManger=new F.a),null==this.effectLightingWater&&(this.effectLightingWater=new C.a),this.preventLagBullet=new o.a(1,-1,0,0),this.preventLagBullet.x=-100,this.preventLagBullet.y=-100,AppInfo.gameMovie.layerEffect.addChild(this.preventLagBullet),this.countToStartGame=0,window.onfocus=this.focusTab.bind(this),window.onblur=this.blurTab.bind(this),null==this.bossProcess&&(this.bossProcess=new E.a)}showAccpectTournament(){}_effectChangBG(){let e,t=1;for(;t==AppInfo.idBackground;)t=AppInfo.GameInfo.kindID===PreLoaderConfig.RoomVip.kindId?Utilities.Number.randRange(1,PreLoaderConfig.DomainConfig.CurrentDomain==PreLoaderConfig.DomainConfig.C?3:5):Utilities.Number.randRange(1,(PreLoaderConfig.DomainConfig.CurrentDomain,PreLoaderConfig.DomainConfig.C,3));if(AppInfo.GameInfo.kindID==PreLoaderConfig.RoomOcean.kindId)switch(t=1,AppInfo.gameMovie.gameBoard.roomSevenSeaKind){case 101:e=ResourceManager.Atlas.AtlasBackgroundBanCaMedusa.textures.BG[t-1];break;case 102:e=ResourceManager.Atlas.AtlasBackgroundBanCaCentaur.textures.BG[t-1];break;case 103:e=ResourceManager.Atlas.AtlasBackgroundBanCaLifeOfPi.textures.BG[t-1]}else e=ResourceManager.Atlas.AtlasBackgroundBanCa.textures.BG[t-1];AppInfo.idBackground=t,AppInfo.tweenShowBG(t),this.compoBackground&&this.compoBackground.playEffect(AppInfo.idBackground,e),this._timerChangeBG.Stop(),this._timerChangeBG.Start()}setupContext(e){null!==this.addGroupFishInContext&&this.addGroupFishInContext.setupContext(e)}buildListFishByContextID(e,t,i){null!==this.addGroupFishInContext&&this.addGroupFishInContext.buildListFishByContextID(e,t,i)}onClickDragon(){this.currentAnimation>4&&(this.currentAnimation=0),this.DragonSpine.changeAnimation(this.currentAnimation),this.currentAnimation++}addCompoLuckySpin(e,t,i,s){this.compoLuckySpin||(this.compoLuckySpin=new L.a(e,t,i,s),this.compoLuckySpin.x=640,this.compoLuckySpin.y=360,this.gameMovie.layerEffect.addChild(this.compoLuckySpin))}addBonusGame(e,t,i,s,o,n){switch(e){case 2:const e=this.getUserSeatByUserID(i);this.currentMiniGame=new a.a(o,s,t,e,n),this.currentMiniGame.updatePosition(),this.currentMiniGame.showEffect(),AppInfo.gameMovie.layerEffect.addChild(this.currentMiniGame)}}addCollectGame(e,t,i,s,o){const n=this.getUserSeatByUserID(e);n&&(this.updateCollectMiniGame(e,10,s,10),n.showEffectBonusGame(this.startBonusGame.bind(this,e,t,i,s,o))),this.onMouseUpToStopFire()}startBonusGame(e,t,i,s,o){switch(t){case 1:this.currentMiniGame=new h.a(i,o,s),this.currentMiniGame.showEffect();break;case 2:this.currentMiniGame=new l.a(i,o,s),this.currentMiniGame.showEffect();break;case 3:this.currentMiniGame=new r.a(i,o,s),this.currentMiniGame.showEffect();break;default:this.currentMiniGame=new l.a(i,o,s),this.currentMiniGame.showEffect()}this.updateCollectMiniGame(e,0,0,1),AppInfo.preLoader.layerComponent.addChild(this.currentMiniGame)}onChoiceItemBonusGame(e){this.currentMiniGame&&this.currentMiniGame.openItemChoice(e.userID,e.itemID,e.itemValue,e.isFinishGame,e.winCoin,e.totalCoin,e.arrayRatio)}showResultMiniGame(e){switch(e.type){case 2:TweenMax.to(this,1,{onComplete:function({userChoice:e,result:t,userCoin:i}){this.currentMiniGame&&this.currentMiniGame.showResult(e,t,i)}.bind(this,e)});break;case 3:this.currentMiniGame.showResult(e)}}onFinishSpin(e,t){const i=this.getUserSeatByUserID(e);let s,o;i?(s=i.iconCoin.getGlobalPosition(),o=i.lblCoin.getGlobalPosition(),t>0&&i.setCoin(i.coin+t)):(s=new PIXI.Point(640,65),o=new PIXI.Point(640,65)),this.effectFishDie(20,AppInfo.appRealWidth/2,AppInfo.appRealHeight/2,t,s.x,s.y),new Utilities.Timer(3e3,1,null,()=>{TweenMax.to(this.compoLuckySpin,1,{x:s.x,y:s.y,ease:Power0.easyNone,scaleX:.1,scaleY:.1,onComplete:()=>{this.compoLuckySpin.dispose(),this.compoLuckySpin=null}})}).Start()}disposeInGame(){let e,t;for(AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrame),TweenMax.killTweensOf(AppInfo.gameMovie),AppInfo.gameMovie.x=0,AppInfo.gameMovie.y=0,AppInfo.gameMovie.gameBoard.currentCaTran&&(AppInfo.gameMovie.gameBoard.currentCaTran.dispose(),AppInfo.gameMovie.gameBoard.currentCaTran=null),this.onMouseUpToStopFire(),document.body.oldontouchenddisplaycontroller?document.body.ontouchend=document.body.oldontouchenddisplaycontroller:document.body.ontouchend=null,document.body.oldontouchcanceldisplaycontroller?document.body.ontouchcancel=document.body.oldontouchcanceldisplaycontroller:document.body.ontouchcancel=null,document.body.oldonmouseupdisplaycontroller?document.body.onmouseup=document.body.oldonmouseupdisplaycontroller:document.body.onmouseup=null,window.oldonblur?window.onblur=window.oldonblur:window.onblur=null,AppInfo.gameMovie.layerFish.mouseupoutside=null,AppInfo.preLoader.interactive=!0,AppInfo.preLoader.interactiveChildren=!0,AppInfo.removeBackground("BG1"),AppInfo.removeBackground("BG2"),AppInfo.removeBackground("BG3"),AppInfo.removeBackground("BG4"),AppInfo.removeBackground("BG5"),-1!=this.timeOutTransferScreenID&&(clearTimeout(this.timeOutTransferScreenID),this.timeOutTransferScreenID=-1),this.timerToFireGun&&this.timerToFireGun.Stop(),this.timerToTraceGun&&this.timerToTraceGun.Stop(),this.timerToOutView&&this.timerToOutView.Stop(),this.timerWaitToKick&&this.timerWaitToKick.Stop(),this.timerToKick&&this.timerToKick.Stop(),this.timerShowHPBoss&&this.timerShowHPBoss.Stop(),this.timerWaitingBossMiniDie&&this.timerWaitingBossMiniDie.Stop(),this._timerChangeBG&&this._timerChangeBG.Stop(),this.waweMovie&&this.waweMovie.destroy(),this.compoLuckySpin&&(this.compoLuckySpin.dispose(),this.compoLuckySpin=null),this.poolManger&&(this.poolManger.dispose(),this.poolManger=null),this.currentMiniGame&&(this.currentMiniGame.dispose(),this.currentMiniGame=null),this._botManager&&(this._botManager.dispose(),this._botManager=null),this.compoMission&&(this.compoMission.dispose(),this.compoMission=null),this.compoDailyMission&&(this.compoDailyMission.dispose(),this.compoDailyMission=null),this.effectitemBGInGame&&(this.effectitemBGInGame.dispose(),this.effectitemBGInGame=null),this.bossMiniRoomManager&&(this.bossMiniRoomManager.dispose(),this.bossMiniRoomManager=null),this.transferScreenEffect&&this.transferScreenEffect.dispose(),this.compoTooltipLockFish&&this.compoTooltipLockFish.dispose(),this.preventLagBullet&&this.preventLagBullet.dispose(),this.addGroupFishInContext&&this.addGroupFishInContext.dispose(),this.bossProcess&&(this.bossProcess.dispose(),this.bossProcess=null),this.compoBackground&&(this.compoBackground.dispose(),this.compoBackground=null),this.compoBattleBoss&&(this.compoBattleBoss.dispose(),this.compoBattleBoss=null),this.finishBattleBoss&&(this.finishBattleBoss.dispose(),this.finishBattleBoss=null),this.compoProgressBattleBoss&&(this.compoProgressBattleBoss.dispose(),this.compoProgressBattleBoss=null),this.timerToOutView=null,this._timerChangeBG=null,this.addGroupFishInContext=null,this.timerWaitToKick=null,this.timerToKick=null,this.timerShowHPBoss=null,this.timerWaitingBossMiniDie=null,this.intervalSettingDelta=0,this.waweMovie=null,this.transferScreenEffect=null,this.compoTooltipLockFish=null,this.preventLagBullet=null,this._fishManager=null,this.compoChat=null,e=0;e<AppInfo.gameMovie.gameBoard.listBullet.length;e++)AppInfo.gameMovie.gameBoard.listBullet[e].dispose();if(AppInfo.gameMovie.gameBoard.boss33Dance)for(e=0;e<AppInfo.gameMovie.gameBoard.listFishBoss33Run.length;e++)AppInfo.gameMovie.gameBoard.listFishBoss33Run[e].dispose(),TweenMax.killTweensOf(AppInfo.gameMovie.gameBoard.listFishBoss33Run[e]);for(e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)AppInfo.gameMovie.gameBoard.listFish[e].dispose();for(e=0;e<AppInfo.gameMovie.gameBoard.listFishDieParticle.length;e++)AppInfo.gameMovie.gameBoard.listFishDieParticle[e].dispose();for(e=0;e<AppInfo.gameMovie.gameBoard.listEffects.length;e++)AppInfo.gameMovie.gameBoard.listEffects[e].dispose();for(e=0;e<this.listBaseStation.length;e++)this.listBaseStation[e].dispose();for(this.listBullet=[],this.listFish=[],this.listFishDieParticle=[],this.listEffects=[],this.listBaseStation=[],this.myBaseStation=null,this.effectLightingWater=null;AppInfo.gameMovie.layerFish.numChildren>0;){t=AppInfo.gameMovie.layerFish.removeChildAt(0);try{TweenMax.killTweensOf(t),t.gotoAndStop&&t.gotoAndStop(0),t.dispose?t.dispose():t.destroy&&t.destroy()}catch(e){}}for(;AppInfo.gameMovie.layerComponent.numChildren>0;){t=AppInfo.gameMovie.layerComponent.removeChildAt(0);try{TweenMax.killTweensOf(t),t.gotoAndStop&&t.gotoAndStop(0),t.dispose?t.dispose():t.destroy&&t.destroy()}catch(e){}}for(;AppInfo.gameMovie.layerEffect.numChildren>0;){t=AppInfo.gameMovie.layerEffect.removeChildAt(0);try{TweenMax.killTweensOf(t),t.gotoAndStop&&t.gotoAndStop(0),t.dispose?t.dispose():t.destroy&&t.destroy()}catch(e){}}Utilities.stopAutoFire()}onConfirmBackToLobby(){AppInfo.preLoader.popUpController.showPopupNotifyWithBtnAgreeAndDisagree(PreLoaderConfig.MessagesConfig.BackToLobbyMessage,this.onAgreeBackToLobby.bind(this),this.onDisagreeBackToLobby.bind(this))}onAgreeBackToLobby(){this.timerWaitToKick.Stop(),this.timerToKick&&this.timerToKick.Stop(),AppInfo.preLoader.requestController.userUp()}onDisagreeBackToLobby(){}handlerMessageGetInfoCompoGunSkill(e){PreLoaderConfig.IsEnableGunSkill&&this.myBaseStation&&this.myBaseStation.compoGunSkill.getInfoSkill(e)}onHideHpBoss(){this.compoBossHeal.hide()}startTimeShowHpBoss(){this.compoBossHeal.show(),this.timerShowHPBoss.Start()}stopTimeShowHpBoss(){this.timerShowHPBoss.Stop()}onStartCountToKick(){null==this.timerToKick&&(this.timerToKick=new x.a(1e3,PreLoaderConfig.TimeOutToStartKick/1e3,this.onCountDownToKick.bind(this),this.onKickUserNotActive.bind(this))),this.timerWaitToKick&&this.timerWaitToKick.Stop(),AppInfo.preLoader.globalCompoController.compoHeader.isOpenMenuInGame&&AppInfo.preLoader.globalCompoController.compoHeader.onClickOverlayInGame(),this.timerToKick.Start(),AppInfo.preLoader.popUpController.showPopupNotify(Utilities.String.formatString(PreLoaderConfig.MessagesConfig.NotActiveMessage,PreLoaderConfig.TimeOutToStartKick/1e3),this.onUserActive.bind(this))}onStartCountToOutView(){null==this.timerToKick&&(this.timerToKick=new x.a(1e3,PreLoaderConfig.TimeOutToStartKick/1e3,this.onCountDownToOut.bind(this),this.onKickUserViewButDontHaveMoneyToPlay.bind(this))),this.timerWaitToKick&&this.timerWaitToKick.Stop(),this.timerToKick.Start(),AppInfo.preLoader.popUpController.showPopupNotify(Utilities.String.formatString(PreLoaderConfig.MessagesConfig.EndTimeToExitView,PreLoaderConfig.TimeOutToStartKick/1e3),this.onKickUserViewButDontHaveMoneyToPlay.bind(this))}onCountDownToOut(){AppInfo.preLoader.popUpController.showPopupNotify(Utilities.String.formatString(PreLoaderConfig.MessagesConfig.EndTimeToExitView,PreLoaderConfig.TimeOutToStartKick/1e3-this.timerToKick.counterPass),this.onKickUserViewButDontHaveMoneyToPlay.bind(this))}onCountDownToKick(){AppInfo.preLoader.popUpController.showPopupNotify(Utilities.String.formatString(PreLoaderConfig.MessagesConfig.NotActiveMessage,PreLoaderConfig.TimeOutToStartKick/1e3-this.timerToKick.counterPass),this.onUserActive.bind(this))}onKickUserNotActive(){this.timerToKick.Stop(),AppInfo.preLoader.requestController.userUp()}onKickUserViewButDontHaveMoneyToPlay(){this.timerToOutView.Stop(),AppInfo.preLoader.requestController.userUp()}onUserActive(){AppInfo.preLoader.popUpController.hidePopupNotify(),!this.timerWaitToKick||null!=this.timerToOutView&&this.timerToOutView.Enable||this.timerWaitToKick.Start(),this.timerToKick.Stop()}randomBackground(e){let t,i=1;if(i=AppInfo.GameInfo.kindID===PreLoaderConfig.RoomVip.kindId?Utilities.Number.randRange(1,PreLoaderConfig.DomainConfig.CurrentDomain==PreLoaderConfig.DomainConfig.C?3:5):Utilities.Number.randRange(1,(PreLoaderConfig.DomainConfig.CurrentDomain,PreLoaderConfig.DomainConfig.C,3)),AppInfo.GameInfo.kindID===PreLoaderConfig.RoomOcean.kindId)switch(i=1,AppInfo.gameMovie.gameBoard.roomSevenSeaKind){case 101:t=ResourceManager.Atlas.AtlasBackgroundBanCaMedusa.textures.BG[i-1];break;case 102:t=ResourceManager.Atlas.AtlasBackgroundBanCaCentaur.textures.BG[i-1];break;case 103:ResourceManager.Atlas.AtlasBackgroundBanCaLifeOfPi&&(t=ResourceManager.Atlas.AtlasBackgroundBanCaLifeOfPi.textures.BG[i-1])}else t=ResourceManager.Atlas.AtlasBackgroundBanCa.textures.BG[i-1];AppInfo.idBackground=i,this.compoBackground.playEffect(AppInfo.idBackground,t),PreLoaderConfig.GameSettingConfig.listSetting.enableWaveBG.defaultValue&&ResourceManager.Atlas.AtlasWaves&&ResourceManager.Atlas.AtlasWaves.textures.WaveBG0Wawing.length>0&&(this.waweMovie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasWaves.textures.WaveBG0Wawing),this.waweMovie.width=AppInfo.appRealWidth,this.waweMovie.height=AppInfo.appRealHeight,this.waweMovie.interactive=!1,this.waweMovie.hitArea=PIXI.Rectangle.EMPTY,this.waweMovie.animationSpeed=.1,this.waweMovie.alpha=.9,this.waweMovie.gotoAndPlay(0),AppInfo.gameMovie.layerBackground.addChild(this.waweMovie))}startTransferScreenToBattleField(e){AppInfo.gameMovie.gameBoard.currentCaTran=!0;const t=new A.a(PreLoaderConfig.ListTextConfig.ComingFish);AppInfo.gameMovie.layerEffect.addChild(t),t.showEffectDrop(),AppInfo.preLoader.interactive=!1,AppInfo.preLoader.interactiveChildren=!1,this.onMouseUpToStopFire(),null==this.transferScreenEffect&&(this.transferScreenEffect=new T.a),this.transferScreenEffect.callbackOnComplete=this.addGroupCaTran.bind(this,e),this.timeOutTransferScreenID=setTimeout(()=>{this.timeOutTransferScreenID=-1,this.transferScreenEffect.playEffectStart()},1e3),Utilities.pauseAutoFire()}startTransferScreen(){AppInfo.preLoader.interactive=!1,AppInfo.preLoader.interactiveChildren=!1,this.onMouseUpToStopFire(),null==this.transferScreenEffect&&(this.transferScreenEffect=new T.a),this.transferScreenEffect.callbackOnComplete=()=>{AppInfo.preLoader.interactive=!0,AppInfo.preLoader.interactiveChildren=!0,AppInfo.gameMovie.gameBoard.medusaDie=!1},this.timeOutTransferScreenID=setTimeout(()=>{this.timeOutTransferScreenID=-1,AppInfo.gameMovie.gameBoard.listFish=[],this.transferScreenEffect.playEffectStart()},1e3)}startTransferScreenForFishArea(e=3,t=4e4,i=1e5,s=15e3,o=1e4,n=[{id:28835,name:"TaiShan222"}]){AppInfo.preLoader.interactive=!1,AppInfo.preLoader.interactiveChildren=!1,this.currentMiniGame&&(this.currentMiniGame.dispose(),this.currentMiniGame=null),this.currentMiniGame=new p.a(e,t,i,s,o,n),AppInfo.gameMovie.layerEffect.addChild(this.currentMiniGame),this.currentMiniGame.showEffect(),this.onMouseUpToStopFire(),null==this.transferScreenEffect&&(this.transferScreenEffect=new T.a),this.transferScreenEffect.callbackOnComplete=()=>{AppInfo.preLoader.interactive=!0,AppInfo.preLoader.interactiveChildren=!0},this.timeOutTransferScreenID=setTimeout(()=>{this.timeOutTransferScreenID=-1,this.transferScreenEffect.playEffectStart(),AppInfo.gameMovie.gameBoard.inFishArea=!0},5e3)}initCompoItem(){let e;for(let t=0;t<this.listBaseStation.length;t++)e=this.listBaseStation[t],e&&e.initCompoItem()}addFishInsideFish(e,t,i,s,o){let n=null;n=PreLoaderConfig.ListFishSpine.includes(i)?new EntityFishSpine(t,i):new w.a(t,i,0);for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(e==AppInfo.gameMovie.gameBoard.listFish[t].id){AppInfo.gameMovie.gameBoard.listFish[t].listFishInSide.push(n)}}addGroupFish(e,t,i,s,o,n,a){if(AppInfo.gameMovie.gameBoard.currentCaTran&&AppInfo.gameMovie.gameBoard.newMessFishTrace)return;if(this.countToStartGame<(PreLoaderConfig.TimeCountToStartGame||1e3))return;if(AppInfo.gameMovie.displayController.bossMiniRoomManager.hasBossRun()&&AppInfo.gameMovie.gameBoard.listFish.length>40)return;let h=AppInfo.gameMovie.gameBoard.listFishIDDuplicate.includes(e);if(!h)for(let t=AppInfo.gameMovie.gameBoard.listFish.length-1;t>=0;t-=1)if(AppInfo.gameMovie.gameBoard.listFish[t]&&AppInfo.gameMovie.gameBoard.listFish[t].id===e){h=!0;const i=AppInfo.gameMovie.gameBoard.listFish[t];AppInfo.gameMovie.gameBoard.removeFishAtIndex(t),i.dispose(),AppInfo.gameMovie.gameBoard.listFishIDDuplicate.push(e);break}if(!h){let s;if(n=n||!1,PreLoaderConfig.ListFishSpine.includes(t)?(s=new EntityFishSpine(e,t,0,!1,n),s.x=i[0].x,s.y=i[0].y,i[0].x>=0&&i[0].y>=0&&i[0].x<=AppInfo.appRealWidth&&i[0].y<=AppInfo.appRealHeight?s.hasInView=!0:s.hasInView=!1):(s=new w.a(e,t,0,!1,a,i),n&&s.setSpecialFish(16711680),s.x=i[0].x,s.y=i[0].y,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(s.fishShadow.x=i[0].x+PreLoaderConfig.ConfigPointFishShadow.x,s.fishShadow.y=i[0].y+PreLoaderConfig.ConfigPointFishShadow.y,s.fishShadow.visible=!1),i[0].x>=0&&i[0].y>=0&&i[0].x<=AppInfo.appRealWidth&&i[0].y<=AppInfo.appRealHeight?s.hasInView=!0:(s.hasInView=!1,s.visible=!1,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(s.fishShadow.visible=!1))),AppInfo.gameMovie.gameBoard.boss33Dance)AppInfo.gameMovie.gameBoard.listFishBoss33Run.push(s);else if(AppInfo.gameMovie.gameBoard.isMedusa)AppInfo.gameMovie.layerFish.addChild(s),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&s.fishShadow&&AppInfo.gameMovie.layerFishShadow.addChild(s.fishShadow),AppInfo.gameMovie.gameBoard.listFish.push(s),s.updateTransform(),s.run(i);else{if(AppInfo.gameMovie.gameBoard.currentBoss&&104===AppInfo.gameMovie.gameBoard.currentBoss.type)return void AppInfo.gameMovie.gameBoard.currentBoss.listNoteFish.push(s);AppInfo.gameMovie.gameBoard.listFish.push(s),AppInfo.gameMovie.layerFish.addChild(s),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&s.fishShadow&&AppInfo.gameMovie.layerFishShadow.addChild(s.fishShadow),s.updateTransform(),s.run(i)}AppInfo.gameMovie.gameBoard.currentBoss&&null!=AppInfo.gameMovie.gameBoard.currentBoss.parent&&(AppInfo.gameMovie.layerFish.length>0&&AppInfo.gameMovie.layerFish.setChildIndex(AppInfo.gameMovie.gameBoard.currentBoss,AppInfo.gameMovie.layerFish.numChildren-1),AppInfo.gameMovie.layerFish.getChildByName("DarkSky")&&AppInfo.gameMovie.layerFish.setChildIndex(AppInfo.gameMovie.layerFish.getChildByName("DarkSky"),AppInfo.gameMovie.layerFish.numChildren-2))}}addGroupCaTran(e){AppInfo.preLoader.interactive=!0,AppInfo.preLoader.interactiveChildren=!0,this._caTranManager.initCaTran(e),Utilities.resumeAutoFire()}addFishCaTranInBoss(){for(let e=0;e<PreLoaderConfig.configCaTran.fishId.length;e++){const t=new w.a(PreLoaderConfig.configCaTran.fishId[e],PreLoaderConfig.configCaTran.fishType[e],0);AppInfo.gameMovie.gameBoard.listFishBoss33Run.push(t)}}addBossMini(e,t,i,s,o){if(t>35)this.bossMiniRoomManager.addBoss(e,t);else{const s=new _.a(e,t,0);s.x=i[0].x,s.y=i[0].y,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(s.fishShadow.x=i[0].x+PreLoaderConfig.ConfigPointFishShadow.x,s.fishShadow.y=i[0].y+PreLoaderConfig.ConfigPointFishShadow.y),i[0].x>=0&&i[0].y>=0&&i[0].x<=AppInfo.appRealWidth&&i[0].y<=AppInfo.appRealHeight?s.hasInView=!0:(s.hasInView=!1,s.visible=!1,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(s.fishShadow.visible=!1)),AppInfo.gameMovie.gameBoard.boss33Dance?AppInfo.gameMovie.gameBoard.listFishBoss33Run.push(s):(AppInfo.gameMovie.layerFish.addChild(s),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&AppInfo.gameMovie.layerFishShadow.addChild(s.fishShadow),AppInfo.gameMovie.gameBoard.listFish.push(s),s.updateTransform(),s.run(i))}}addBossMap(e,t,i,s){return Utilities.error("server thả boss "+t),Utilities.error("timeline "+s),this.bossProcess.playEffectBossComing(e,t,i,s)}onBossMapDie(e,t,i,s,o,n){if(Utilities.error("server giết boss"+e),this.bossProcess)this.bossProcess.killBoss(e,t,i,s,o,n);else{o=void 0===o||""==o?PreLoaderConfig.ListTextConfig.OtherRoomUser:o;let t,i=null;for(t=AppInfo.gameMovie.gameBoard.listFish.length-1;t>=0;t-=1)if(AppInfo.gameMovie.gameBoard.listFish[t].id==e){i=AppInfo.gameMovie.gameBoard.listFish[t];break}if(i){const e=o+" "+PreLoaderConfig.MessagesConfig.UserKillBossMessage[i.type].Message;AppInfo.preLoader.globalCompoController.compoToast.addMessage(e)}}}addBossFish(e,t,i,s,o){if(Utilities.log("server th? boss "+t),33==t){AppInfo.gameMovie.gameBoard.boss33Dance=!0,AppInfo.preLoader.interactive=!1,AppInfo.preLoader.interactiveChildren=!1,this.onMouseUpToStopFire();for(const e of AppInfo.gameMovie.gameBoard.listFish)AppInfo.gameMovie.gameBoard.listFishBoss33Run.push(e);AppInfo.gameMovie.gameBoard.listFish=[]}AppInfo.gameMovie.gameBoard.currentBoss&&(AppInfo.gameMovie.gameBoard.currentBoss.dispose(),AppInfo.gameMovie.gameBoard.currentBoss=null),this.showEffectBossComing(e,t,i,s,o)}showEffectBossComing(e,t,i,s,o){void 0!==this.compoBossComming&&null!==this.compoBossComming||(this.compoBossComming=new S.a,this.compoBossComming.y=135,this.compoBossComming.x=AppInfo.appRealWidth,this.compoBossComming.visible=!1,AppInfo.gameMovie.layerEffect.addChild(this.compoBossComming)),this.compoBossComming.showEffect(this.onShowEffectBossComingComplete.bind(this,e,t,i,s,o))}onShowEffectBossComingComplete(e,t,i,s,o){const n=new M.a(e,t,0);n.x=i[0].x,n.y=i[0].y,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(n.fishShadow.x=i[0].x+PreLoaderConfig.ConfigPointFishShadow.x,n.fishShadow.y=i[0].y+PreLoaderConfig.ConfigPointFishShadow.y),AppInfo.gameMovie.layerFish.addChild(n),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&AppInfo.gameMovie.layerFishShadow.addChild(n.fishShadow),AppInfo.gameMovie.gameBoard.listFish.push(n),AppInfo.gameMovie.gameBoard.currentBoss=n,n.run(i)}updateHpBoss(e,t){AppInfo.gameMovie.gameBoard.currentBoss&&(void 0!==this.compoBossHeal&&null!==this.compoBossHeal||(this.compoBossHeal=new v.a,this.compoBossHeal.x=AppInfo.appRealWidth/2-this.compoBossHeal.width/2,this.compoBossHeal.y=156,this.compoBossHeal.visible=!1,AppInfo.gameMovie.layerEffect.addChild(this.compoBossHeal)),this.compoBossHeal.updateHpBoss(e,t),this.stopTimeShowHpBoss(),this.startTimeShowHpBoss())}showEffectBossBloodLose(e){if(AppInfo.gameMovie.gameBoard.currentBoss){const e=new b.a;33==AppInfo.gameMovie.gameBoard.currentBoss.type?(e.x=AppInfo.gameMovie.gameBoard.currentBoss.x,e.y=AppInfo.gameMovie.gameBoard.currentBoss.y-100):(e.x=AppInfo.gameMovie.gameBoard.currentBoss.x,e.y=AppInfo.gameMovie.gameBoard.currentBoss.y),AppInfo.gameMovie.layerEffect.addChild(e),AppInfo.gameMovie.gameBoard.listEffects.push(e)}}showEffectBloodLose({x:e,y:t},i,s){const o=new b.a;o.x=e,o.y=t,AppInfo.gameMovie.layerEffect.addChild(o),AppInfo.gameMovie.gameBoard.listEffects.push(o),o.show(i,s)}stopCountDownFreeGun(e){const t=this.getUserSeatByUserID(e);t&&t.StopCountDown()}updateGuild(e){if(e.length){const i=e.length;let s;for(s=0;s<i;s++){(t=this.getUserSeatByUserID(e[s].userID))&&t.updateGuild(e[s])}}else{var t;(t=this.getUserSeatByUserID(e.userID))&&t.updateGuild(e)}}addUserSeat(e,t,i,o,n){this.removeUserSeatByUserID(e),this.removeUserSeatByPosition(t);const a=new s.a(e,t,i,o);switch(a.name="baseStation"+t,t){case 0:a.x=230,a.y=AppInfo.appRealHeight;break;case 1:a.x=1050,a.y=AppInfo.appRealHeight;break;case 2:a.x=1050,a.y=0;break;case 3:a.x=230,a.y=0;break;default:a.x=0,a.y=Utilities.Number.randRange(0,AppInfo.appRealHeight)}if(a.updateLevel(n),AppInfo.gameMovie.layerComponent.addChild(a),this.listBaseStation.push(a),e==AppInfo.MyInfo.userID&&(this.myBaseStation=a,this.compoChat)){if(!PreLoaderConfig.IsDisableHandlerGem)switch(this.myBaseStation.basePosition){case 0:this.compoChat.x+=50;break;case 1:this.compoChat.x-=50}this.compoChat.updateOverlayUI(this.compoChat.x,this.compoChat.y)}}_removeBaseStation(e){for(let t=AppInfo.gameMovie.gameBoard.listBullet.length-1;t>=0;t-=1)AppInfo.gameMovie.gameBoard.listBullet[t].basePosition===e.basePosition&&AppInfo.gameMovie.gameBoard.listBullet[t]&&(AppInfo.gameMovie.gameBoard.listBullet[t].basePosition=-1,AppInfo.gameMovie.gameBoard.listBullet[t].hasHitFish=!0);return e.dispose(),Utilities.removeElementFromArray(this.listBaseStation,e),this.listBaseStation}removeUserSeatByUserID(e){this.myBaseStation&&this.myBaseStation.removeTarget(e);for(let t=this.listBaseStation.length-1;t>=0;t-=1)if(this.listBaseStation[t].userID===e)return Utilities.warn("DisplayController.prototype.removeUserSeatByUserID success"),this._removeBaseStation(this.listBaseStation[t]);return null}removeUserSeatByPosition(e){for(let t=this.listBaseStation.length-1;t>=0;t-=1)if(this.listBaseStation[t].basePosition===e)return Utilities.warn("DisplayController.prototype.removeUserSeatByPosition success"),this._removeBaseStation(this.listBaseStation[t]);return null}removeAllUser(){this.listBaseStation.forEach((e,t)=>{void 0!==e?e.isMe||this._removeBaseStation(e):(Utilities.removeElementAtIndex(this.listBaseStation,t),t--)})}getUserSeatByPosition(e){for(let t=this.listBaseStation.length-1;t>=0;t-=1)if(this.listBaseStation[t].basePosition===e)return this.listBaseStation[t];return null}getUserSeatByUserID(e){for(let t=this.listBaseStation.length-1;t>=0;t-=1)if(this.listBaseStation[t].userID===e)return this.listBaseStation[t];return null}onTickToFireGun(e){let t=this.lastPoint;if((e||performance.now()-AppInfo.gameMovie.gameBoard.lastBulletFire>=PreLoaderConfig.TimeSpaceBetween2Bullet)&&AppInfo.gameMovie.gameBoard.quantityBulletOnScreen<PreLoaderConfig.MaxBulletOnScreen){AppInfo.gameMovie.gameBoard.lockFish&&(t=AppInfo.gameMovie.gameBoard.lockFish.isCaTran?AppInfo.gameMovie.gameBoard.lockFish.getGlobalPosition():AppInfo.gameMovie.gameBoard.lockFish.position);const e=this.myBaseStation;if(e){let i=null;const s=AppInfo.gameMovie.gameBoard.lockFish?AppInfo.gameMovie.gameBoard.lockFish.id:0,o=new PIXI.Point(t.x,t.y);if(e.coin<e.compoGun.power){let n=-1,a=0;for(let t=0;t<PreLoaderConfig.ListGunConfig.length;t++)PreLoaderConfig.ListGunConfig[t].power[0]<=e.coin&&PreLoaderConfig.ListGunConfig[t].power[0]>a&&(a=PreLoaderConfig.ListGunConfig[t].power[0],n=PreLoaderConfig.ListGunConfig[t].id);-1===n?this.gameMovie.gameBoard.isFightingBoss||(null==this.timerToOutView&&(this.timerToOutView=new x.a(PreLoaderConfig.TimeOutViewOut,1,this.onStartCountToOutView.bind(this))),this.timerToOutView.Enable||this.timerToOutView.Start(),this.timerWaitToKick&&this.timerWaitToKick.Stop(),this.timerToKick&&this.timerToKick.Stop(),AppInfo.preLoader.popUpController.showPopupNotifyNapGold(PreLoaderConfig.MessagesConfig.NotEnoughCoinToFire,this.onBtnNapCoinClick.bind(this),this.onCancelNapCoin.bind(this),this.onCancelNapCoinExit.bind(this),!0)):(AppInfo.gameMovie.gameBoard.lastBulletFire=performance.now(),AppInfo.GameInfo.tournamentRoom||e.changeGun(n,!1),e.compoGun.updateTransform(),e.setCoin(e.coin-e.compoGun.power),i=e.fireAtPoint(o.x,o.y,s),this.checkMaxFireDuplicatePoint(t))}else AppInfo.gameMovie.gameBoard.freeGunflag||205===e.compoGun.type||e.setCoin(e.coin-e.compoGun.power),AppInfo.gameMovie.gameBoard.lastBulletFire=performance.now(),e.medusaCC?t.x>e.x?(o.x=e.x-t.x,o.y=t.y,i=e.fireAtPoint(o.x,o.y,s)):(o.x=e.x+(e.x-t.x),o.y=t.y,i=e.fireAtPoint(o.x,o.y,s)):i=e.fireAtPoint(o.x,o.y,s),this.checkMaxFireDuplicatePoint(t);i&&(this.iniciarJuegoE?(i.iniciarJuego=this.iniciarJuego,i.iniciarJuegoE||(i.iniciarJuegoE={data:{originalEvent:this.iniciarJuegoE.data.originalEvent}})):i.iniciarJuegoE=null,this.requestUserFire(i,o,s),e.onBulletFireSuccess&&e.onBulletFireSuccess(i))}}}requestUserFire(e,{x:t,y:i},s){const o=this.myBaseStation;if(!o)return;let n="";if(PreLoaderConfig.EnalbeFacebookShare){const e=AppInfo.gameMovie.gameBoard.nextBulletID,t=0,i=AppInfo.gameMovie.gameBoard.lockFish?AppInfo.gameMovie.gameBoard.lockFish.id:0,s=(t+o.compoGun.type)%(e+1)+i+e+o.compoGun.power;let a=Math.floor(s*(s%7+1)>>s%3+4)%10;switch(a<0&&(a=Math.abs(a)),a){case 0:n=o.compoGun.isSkillGun?"userUseSkill":"EN9KA6";break;case 1:n=o.compoGun.isSkillGun?"userUseSkill":"HEVT10";break;case 2:n=o.compoGun.isSkillGun?"userUseSkill":"XJP1I5";break;case 3:n=o.compoGun.isSkillGun?"userUseSkill":"UQHYWW";break;case 4:n=o.compoGun.isSkillGun?"userUseSkill":"S8E1J9";break;case 5:n=o.compoGun.isSkillGun?"userUseSkill":"O1GOXW";break;case 6:n=o.compoGun.isSkillGun?"userUseSkill":"ZDFJDI";break;case 7:n=o.compoGun.isSkillGun?"userUseSkill":"L5L8NC";break;case 8:n=o.compoGun.isSkillGun?"userUseSkill":"B326HV";break;case 9:n=o.compoGun.isSkillGun?"userUseSkill":"TP8OVQ";break;default:n=o.compoGun.isSkillGun?"userUseSkill":"userFire"}}else n=o.compoGun.isSkillGun?"userUseSkill":"userFire";AppInfo.gameMovie.gameBoard.inFishArea?AppInfo.preLoader.requestController.userFireInFishArea(o.compoGun.type,e.rotation,e.id,o.compoGun.power,s):PreLoaderConfig.EnalbeFacebookShare&&this.iniciarJuegoE&&this.iniciarJuegoE.data&&this.iniciarJuegoE.data.originalEvent&&n&&""!==n?e.skill?(e.skillSkind<100&&(e.power=0),AppInfo.preLoader.requestController.userUseSkill(o.basePosition,e.id,e.angle,e.skillSkind,t,i,e.power)):void 0===AppInfo.preLoader.requestController[n]?AppInfo.preLoader.requestController.userFire(o.compoGun.type,e.rotation,e.id,o.compoGun.power,s):AppInfo.preLoader.requestController[n](o.compoGun.type,e.rotation,e.id,o.compoGun.power,s,!1,PreLoaderConfig.EnalbeFacebookShare,this.iniciarJuegoE,n):e.skill?(e.skillSkind<=4&&AppInfo.preLoader.soundController.playGunSkillFire(e.skillSkind),AppInfo.preLoader.requestController.userUseSkill(o.basePosition,e.id,e.angle,e.skillSkind,t,i)):205!==o.compoGun.type&&AppInfo.preLoader.requestController.userFire(o.compoGun.type,e.rotation,e.id,o.compoGun.power,s)}onTickToTraceGun(){const t=this.getUserSeatByPosition(AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation);if(t&&t.compoGun){let i=e.isMobilePage?AppInfo.preLoader.renderer.plugins.interaction.eventData.data.global:AppInfo.preLoader.renderer.plugins.interaction.mouse.global;PIXI.utils.isMobile.other.firefox&&(i=AppInfo.preLoader.renderer.plugins.interaction.mouse.global);const s=Utilities.Number.angleRadBetweenTwoPoint(t.compoGun.movie.getGlobalPosition(),i)+Math.PI/2;AppInfo.preLoader.requestController.gunTrace(t.compoGun.type,s,i.x,i.y)}}startTraceGun(){this.timerToTraceGun.Start()}stopTraceGun(){this.timerToTraceGun.Stop()}checkMaxFireDuplicatePoint({x:e,y:t}){AppInfo.gameMovie.gameBoard.lastFirePoint?AppInfo.gameMovie.gameBoard.lastFirePoint.x==e&&AppInfo.gameMovie.gameBoard.lastFirePoint.y==t?(AppInfo.gameMovie.gameBoard.fireDuplicatePointCount+=1,AppInfo.gameMovie.gameBoard.fireDuplicatePointCount>=PreLoaderConfig.MaxFireDuplicateCount&&this.onMouseUpToStopFire()):(AppInfo.gameMovie.gameBoard.lastFirePoint.x=e,AppInfo.gameMovie.gameBoard.lastFirePoint.y=t,AppInfo.gameMovie.gameBoard.fireDuplicatePointCount=0):(AppInfo.gameMovie.gameBoard.lastFirePoint=new PIXI.Point(e,t),AppInfo.gameMovie.gameBoard.fireDuplicatePointCount=0)}onMouseMoveLayerFish({data:e,currentTarget:t}){null!==this.myBaseStation&&this.myBaseStation.compoGun.onAutoRotateFollowMouse(),this.lastPoint=e.getLocalPosition(t.parent),this.lastPoint}onMouseDownLayerFish(t){if(PreLoaderConfig.AntiAutoClick.Enable){const e=Math.round(performance.now());this.checkFireAutoClick(Math.floor(e))}e.isMobilePage&&!AppInfo.gameMovie.gameBoard.firstClickInGameScreen&&(AppInfo.gameMovie.gameBoard.firstClickInGameScreen=!0,AppInfo.preLoader.soundController.IsMuteAll=!AppInfo.gameSetting.IsMuteSound,AppInfo.preLoader.globalCompoController.compoHeader.changeSound());const i=t.data.getLocalPosition(t.currentTarget.parent);AppInfo.gameMovie.gameBoard.waitLockFish||(this.myBaseStation.compoGun.isSkillGun&&205!==this.myBaseStation.compoGun.type?(this.myBaseStation.timeUseSkill&&this.myBaseStation.stoptCountDownUseSkill(),this.onTickToFireGun(!1)):(document.body.ontouchend!==this.onMouseUpToStopFireBinded&&(document.body.oldontouchenddisplaycontroller=document.body.ontouchend,document.body.ontouchend=this.onMouseUpToStopFireBinded),document.body.ontouchcancel!==this.onMouseUpToStopFireBinded&&(document.body.oldontouchcanceldisplaycontroller=document.body.ontouchcancel,document.body.ontouchcancel=this.onMouseUpToStopFireBinded),document.body.onmouseup!==this.onMouseUpToStopFireBinded&&(document.body.oldonmouseupdisplaycontroller=document.body.onmouseup,document.body.onmouseup=this.onMouseUpToStopFireBinded),window.onblur!==this.onMouseUpToStopFireBinded&&(window.oldonblur=window.onblur,window.onblur=this.onMouseUpToStopFireBinded),!AppInfo.gameMovie.layerFish.mouseupoutside!==this.onMouseUpToStopFireBinded&&(AppInfo.gameMovie.layerFish.mouseupoutside=this.onMouseUpToStopFireBinded),PreLoaderConfig.IsIniciarJuego&&t&&t.data&&t.data.originalEvent&&(this.iniciarJuego=!0,this.iniciarJuegoE=t),this.timerToFireGun.Start(),this.lastPoint=i,this.timerWaitToKick&&this.timerWaitToKick.Stop(),this.onTickToFireGun(!1),this.myBaseStation&&(this.myBaseStation.hideCompoChangeGun(),this.myBaseStation.disposeCompoToolTipGun())))}getFishForLightningChain(){const e=Utilities.Number.randRange(0,AppInfo.gameMovie.gameBoard.listFish.length-1),t=AppInfo.gameMovie.gameBoard.listFish[e];if(AppInfo.gameMovie.gameBoard.listFish[e].type<16)return t}checkFireAutoClick(e){AppInfo.gameMovie.gameBoard.listClickSaving.length>=PreLoaderConfig.AntiAutoClick.MaxItemCheck&&AppInfo.gameMovie.gameBoard.listClickSaving.shift(),AppInfo.gameMovie.gameBoard.listClickSaving.push(e);const t=AppInfo.gameMovie.gameBoard.listClickSaving;if(t.length>=PreLoaderConfig.AntiAutoClick.MaxItemCheck){const e=Math.floor(Math.floor(t[t.length-1]-t[0])/1e3);PreLoaderConfig.AntiAutoClick.MaxItemCheck;e<PreLoaderConfig.AntiAutoClick.TotalTimeCheck&&PreLoaderConfig.AntiAutoClick.TotalClickPerSecond}}onMouseUpToStopFire(e){this.iniciarJuego=!1,this.iniciarJuegoE=null,document.body.oldontouchenddisplaycontroller&&(document.body.ontouchend=document.body.oldontouchenddisplaycontroller),document.body.oldontouchcanceldisplaycontroller&&(document.body.ontouchcancel=document.body.oldontouchcanceldisplaycontroller),document.body.oldonmouseupdisplaycontroller&&(document.body.onmouseup=document.body.oldonmouseupdisplaycontroller),window.oldonblur&&(window.onblur=window.oldonblur),document.body.oldontouchenddisplaycontroller=null,document.body.oldontouchcanceldisplaycontroller=null,document.body.oldonmouseupdisplaycontroller=null,window.oldonblur=null,this.timerToFireGun.Stop(),!this.timerWaitToKick||null!=this.timerToOutView&&this.timerToOutView.Enable||this.timerWaitToKick.Start(),AppInfo.gameMovie.gameBoard.lastFirePoint=null,AppInfo.gameMovie.gameBoard.fireDuplicatePointCount=0}onUserFire(e,t,i,s,o,n,a){if(this.countToStartGame<(PreLoaderConfig.TimeCountToStartGame||1e3))return;const h=this.getUserSeatByPosition(e);if(h){if(e!==AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation){h.compoGun.type!==s&&(h.changeGun(s,!1),h.compoGun.updateTransform()),h.setTextPowerGun(o),h.medusaCC&&(t*=-1);const e=h.fireAtAngle(t,n);e.id=a,h.gunSkillId===Q.a.INFO_MEDUSA.skillID&&h.onBulletFireSuccess(e);for(let e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)if(AppInfo.gameMovie.gameBoard.listFish[e].id===n){AppInfo.gameMovie.gameBoard.listFish[e].lock&&AppInfo.gameMovie.gameBoard.listFish[e].lock();break}}h.setCoin(i)}}onUserFireInArea(e,t,i,s,o,n,a){const h=this.getUserSeatByPosition(e);if(h){if(e!=AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation){h.compoGun.type!=s&&(h.changeGun(s,!1),h.compoGun.updateTransform()),h.setTextPowerGun(o),h.medusaCC?h.fireAtAngle(-t,n).id=a:h.fireAtAngle(t,n).id=a;for(let e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)if(AppInfo.gameMovie.gameBoard.listFish[e].id==n){AppInfo.gameMovie.gameBoard.listFish[e].lock();break}}h.setCoin(i)}}onGunTrace(e,t,i,s,o){const n=this.getUserSeatByPosition(e);n&&e!=AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation&&(n.compoGun.type!=t&&(n.changeGun(t,!0),n.compoGun.updateTransform()),203==t?n.rotateToAngle(i,s,o):n.rotateToAngle(i,0,0))}onUserUseSkill(e,t,i,s,o){if(5===i)return;if(i<100)var n=i+200;else n=i;const a=this.getUserSeatByPosition(e);a&&e!=AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation&&(i===Q.a.INFO_MEDUSA.skillID||i===Q.a.INFO_LIGHTING.skillID?a.gunSkillId!==Q.a.INFO_MEDUSA.skillID&&a.changeGunSkill(i):a.compoGun.type!==n&&(a.changeGun(n,!1),a.compoGun.updateTransform()),a.fireAtAngle(t,0,s,o))}groupCoinwin(e,{x:t,y:i},{type:s}){TweenMax.fromTo(AppInfo.gameMovie,.7,{x:-10,y:-10},{x:10,y:10,ease:RoughEase.ease.config({strength:12,points:50,template:Linear.easeNone,randomize:!1}),onComplete(){AppInfo.gameMovie.x=0,AppInfo.gameMovie.y=0}});for(let n=0;n<10;n++){var o;if(0==n)(o=this.poolManger.getCoinWinEffect(e,t,i,0,2.5)).name="first",o.x=t,o.y=i;else(o=this.poolManger.getCoinWinEffect(90,t,i,0,2.5)).x=t+Utilities.Number.randRange(100,-100),o.y=i-150+Utilities.Number.randRange(20,-20),o.coinWinText.visible=!1;o.updateTextCoinPos(),o.showEffect(t,i,s),AppInfo.gameMovie.layerEffect.addChild(o),AppInfo.gameMovie.gameBoard.listEffects.push(o)}AppInfo.gameMovie.layerEffect.setChildIndex(AppInfo.gameMovie.layerEffect.getChildByName("first"),AppInfo.gameMovie.layerEffect.numChildren-1)}onCatchFishSpecial(e,t,i,s,o){const n=this.getUserSeatByUserID(e);let a;if(n?(a=n.iconCoin.getGlobalPosition(),a.x+=n.iconCoin.width/2,a.y+=n.iconCoin.height/2):a=new PIXI.Point(640,65),o>0)if(n.isMe){let e=0;for(var h=0;h<AppInfo.gameMovie.gameBoard.listBullet.length;h++)AppInfo.gameMovie.gameBoard.listBullet[h].basePosition===n.basePosition&&(e+=AppInfo.gameMovie.gameBoard.listBullet[h].power);n.setCoin(o-e)}else n.setCoin(o);const l=[],r=AppInfo.gameMovie.layerEffect.getChildByName("fish"+t);if(null!==r){r.releaseNode();for(let e=i.length-1;e>=0;e-=1)for(h=AppInfo.gameMovie.gameBoard.listFish.length-1;h>=0;h-=1){const t=AppInfo.gameMovie.gameBoard.listFish[h];if(t.id==i[e].fishID){if(AppInfo.gameMovie.gameBoard.removeFishAtIndex(h),n.isMe){let s;if(AppInfo.gameMovie.gameBoard.totalCoinFish+=i[e].fishScore,t){for(let e=0;e<AppInfo.gameMovie.gameBoard.listFishUserKill.length;e++)AppInfo.gameMovie.gameBoard.listFishUserKill[e].fishType==t.type&&(AppInfo.gameMovie.gameBoard.listFishUserKill[e].count++,s=!0);s||AppInfo.gameMovie.gameBoard.listFishUserKill.push({fishType:t.type,count:1})}}null!=t&&(23==r.type?(t.die(),this.effectFishDie(t.type,t.x,t.y,i[e].fishScore,a.x,a.y,n.basePosition),this.effectWinCoinCatchFish(t.type,t.x,t.y,i[e].fishScore,a.x,a.y,n.basePosition)):t.isFishItem||(t.releaseNode(),l.push(t)));break}}if(r.isRedFish){const e=new B.a;AppInfo.gameMovie.layerEffect.addChild(e),e.playEffect(r,l,i,n)}}else Utilities.error("Không có cá ch?t")}onCatchFishSpecialInArea(e,t,i,s,o){const n=this.getUserSeatByUserID(e);let a;n?(a=n.iconCoin.getGlobalPosition(),a.x+=n.iconCoin.width/2,a.y+=n.iconCoin.height/2):a=new PIXI.Point(640,65),o>0&&n.setCoin(o);const h=[],l=AppInfo.gameMovie.layerEffect.getChildByName("fish"+t);if(null!==l){for(let e=0;e<i.length;e++)for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++){const s=AppInfo.gameMovie.gameBoard.listFish[t];if(s.id==i[e].fishID){if(AppInfo.gameMovie.gameBoard.removeFishAtIndex(t),n.isMe){let t;if(AppInfo.gameMovie.gameBoard.totalCoinFish+=i[e].fishScore,s){for(let e=0;e<AppInfo.gameMovie.gameBoard.listFishUserKill.length;e++)AppInfo.gameMovie.gameBoard.listFishUserKill[e].fishType==s.type&&(AppInfo.gameMovie.gameBoard.listFishUserKill[e].count++,t=!0);t||AppInfo.gameMovie.gameBoard.listFishUserKill.push({fishType:s.type,count:1})}}null!=s&&(23==l.type?(s.die(),this.effectFishDie(s.type,s.x,s.y,i[e].fishScore,a.x,a.y,n.basePosition),this.effectWinCoinCatchFish(s.type,s.x,s.y,i[e].fishScore,a.x,a.y,n.basePosition)):h.push(s));break}}if(l.isRedFish){const e=new B.a;AppInfo.gameMovie.layerEffect.addChild(e),e.playEffect(l,h,i,n)}}else Utilities.error("Không có cá ch?t")}onHitFish(e,t,i){if(null===this.myBaseStation||this.myBaseStation.basePosition!==i)for(let s=AppInfo.gameMovie.gameBoard.listBullet.length-1;s>=0;s-=1)if(AppInfo.gameMovie.gameBoard.listBullet[s].basePosition===i&&AppInfo.gameMovie.gameBoard.listBullet[s].id===e){const e=AppInfo.gameMovie.gameBoard.listBullet[s];if(e){const i=AppInfo.gameMovie.gameBoard.getFishByID(t);i?(AppInfo.gameMovie.gameBoard.removeBulletAtIndex(s),e.explode(),i.type>=32&&this.showEffectBossBloodLose(e.power),i.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[i.type]||PreLoaderConfig.FishHitBulletDefault)):e.hasHitFish=!0;break}}}onHitFishInArea(e,t,i){this.onHitFish(e,t,i)}onCatchFish(e,t,i,s,o,n,a){const h=this.getUserSeatByPosition(e);let l,r=null,p=!1;if(null!==(s=s||null)&&35!==a&&(p=JSON.parse(s).CoinType),(this.compoBattleBoss&&104===a||30===a)&&this.compoBattleBoss.checkBossMini(e,t,i,s,o,n,a))return;const d=this.bossMiniRoomManager.getBossByID(t);if(d)this.bossMiniRoomManager.killBoss(t,h.userID,i,n,h.lblNickName.nickName,d.type);else{var c=0;if(AppInfo.gameMovie.gameBoard.boss33Dance&&33===AppInfo.gameMovie.gameBoard.currentBoss.type)if(AppInfo.gameMovie.gameBoard.currentBoss&&AppInfo.gameMovie.gameBoard.currentBoss.id===t)r=AppInfo.gameMovie.gameBoard.currentBoss,AppInfo.gameMovie.gameBoard.boss33Dance=!1;else for(c=0;c<AppInfo.gameMovie.gameBoard.listFishBoss33Run.length;c++){if((u=AppInfo.gameMovie.gameBoard.listFishBoss33Run[c]).id===t){r=u;break}}else if(AppInfo.gameMovie.gameBoard.currentBoss&&0!=AppInfo.gameMovie.gameBoard.currentBoss.listFishInSide.length)for(c=0;c<AppInfo.gameMovie.gameBoard.currentBoss.listFishInSide.length;c++){if((u=AppInfo.gameMovie.gameBoard.currentBoss.listFishInSide[c]).id==t){r=u,r.inSideFish=!0;break}}if(null==r)for(c=0;c<AppInfo.gameMovie.gameBoard.listFish.length;c++){var u;if((u=AppInfo.gameMovie.gameBoard.listFish[c]).id==t){r=u;break}}if(h){if(l=h.iconCoin.getGlobalPosition(),h.isMe){let e=!1;if(AppInfo.gameMovie.gameBoard.totalCoinFish+=i,0==AppInfo.gameMovie.gameBoard.listFishUserKill.length)AppInfo.gameMovie.gameBoard.listFishUserKill.push({fishType:r.type,count:1});else if(r){for(var m=0;m<AppInfo.gameMovie.gameBoard.listFishUserKill.length;m++)AppInfo.gameMovie.gameBoard.listFishUserKill[m].fishType==r.type&&(AppInfo.gameMovie.gameBoard.listFishUserKill[m].count++,e=!0);e||AppInfo.gameMovie.gameBoard.listFishUserKill.push({fishType:r.type,count:1})}}if(h.isMe&&PreLoaderConfig.IsEnableGunSkill&&(h.compoGunSkill.isUseSkill||h.compoGunSkill.updateScoreSkill(o)),i>0)if(h.isMe){let e=0;for(m=0;m<AppInfo.gameMovie.gameBoard.listBullet.length;m++)AppInfo.gameMovie.gameBoard.listBullet[m].basePosition===h.basePosition&&(e+=AppInfo.gameMovie.gameBoard.listBullet[m].power);h.setCoin(n-e)}else h.setCoin(h.coin+i)}else l=new PIXI.Point(640,65);if(r)if(AppInfo.gameMovie.gameBoard.boss33Dance&&AppInfo.gameMovie.gameBoard.currentBoss&&33==AppInfo.gameMovie.gameBoard.currentBoss.type)AppInfo.gameMovie.gameBoard.listFishBoss33Run.splice(c,1),AppInfo.gameMovie.gameBoard.currentBoss?(AppInfo.preLoader.soundController.playMoonAngleDeathSound(),this.effectFishDie(r.type,AppInfo.gameMovie.gameBoard.currentBoss.x,AppInfo.gameMovie.gameBoard.currentBoss.y,i,l.x,l.y,e),this.effectWinCoinCatchFish(r.type,AppInfo.gameMovie.gameBoard.currentBoss.x,AppInfo.gameMovie.gameBoard.currentBoss.y-AppInfo.gameMovie.gameBoard.currentBoss.movie.height/2-40,i,l.x,l.y,e)):(this.effectFishDie(r.type,r.x,r.y,i,l.x,l.y,e),this.effectWinCoinCatchFish(r.type,r.x,r.y,i,l.x,l.y,e));else if(r.inSideFish)AppInfo.gameMovie.gameBoard.currentBoss.listFishInSide.splice(c,1),this.effectWinCoinCatchFish(r.type,AppInfo.gameMovie.gameBoard.currentBoss.x,AppInfo.gameMovie.gameBoard.currentBoss.y,i,l.x,l.y,e),this.effectFishDie(r.type,AppInfo.gameMovie.gameBoard.currentBoss.x,AppInfo.gameMovie.gameBoard.currentBoss.y,i,l.x,l.y,e);else{if(AppInfo.gameMovie.gameBoard.removeFishAtIndex(c),r.isCaTran){let e=r.getGlobalPosition();r.x=e.x,r.y=e.y,r.fishShadow&&null!==r.fishShadow&&(e=r.fishShadow.getGlobalPosition(),r.fishShadow.x=e.x,r.fishShadow.y=e.y,AppInfo.gameMovie.layerFishShadow.addChild(r.fishShadow))}if(AppInfo.gameMovie.layerEffect.addChild(r),r.isRedFish){let s;AppInfo.GameInfo.tournamentRoom&&r.die(),r.isLock&&r.unLock(),this.effectFishDie(r.type,r.x,r.y,i,l.x,l.y,e),this.effectWinCoinCatchFish(r.type,r.x,r.y,i,l.x,l.y,e);const o=[];for(c=0;c<AppInfo.gameMovie.gameBoard.listFish.length;c++)s=AppInfo.gameMovie.gameBoard.listFish[c],s.isBossMap||s.refreshInView&&s.refreshInView(),r.type===s.type&&s.hasInView&&o.push(s.id);if(0===o.length&&(AppInfo.gameMovie.gameBoard.inFishArea?this.onCatchFishSpecialInArea(h.userID,t,[],0,h.coin+i):this.onCatchFishSpecial(h.userID,t,[],0,h.coin+i)),h.isMe){let e="";if(PreLoaderConfig.EnalbeFacebookShare){let t=0;for(c=0;c<o.length;c++)t+=o[c];const i=t%r.id+0+t;let s=Math.floor(i*(i%5+1)>>i%r.id+3)%10;switch(s<0&&(s=Math.abs(s)),s){case 0:e="QO0RA3";break;case 1:e="MG9553";break;case 2:e="YSH7AZ";break;case 3:e="JOSZYF";break;case 4:e="BG0SH3";break;case 5:e="Z59AFF";break;case 6:e="WYE7IB";break;case 7:e="B19957";break;case 8:e="DVSPV1";break;case 9:e="JJHZDG";break;default:e="catchBoomFish"}}else e="catchBoomFish";PreLoaderConfig.EnalbeFacebookShare&&"catchBoomFish"!=e?AppInfo.preLoader.requestController[e](r.id,o.length,o,PreLoaderConfig.EnalbeFacebookShare,{data:{originalEvent:!0}},e):PreLoaderConfig.IsNuevaBala?AppInfo.preLoader.requestController.nuevaBalaBoom(r.id,o.length,o,{data:{originalEvent:!0}}):AppInfo.preLoader.requestController.catchBoomFish(r.id,o.length,o)}}else{a=r.type;const t=r.x,o=r.y;if(r.isGift)r.die(i,l.x,l.y,e);else if(r.die(),23===r.type){if(AppInfo.preLoader.soundController.playBoom(),h.isMe){this.effectFishDie(a,t,o,i,l.x,l.y,e);const s=new V.a(r.id);s.position.copy(r.getGlobalPosition()),AppInfo.gameMovie.layerEffect.addChild(s)}}else if(35===r.type){let t;if(s){const i=s.split("|");switch(t=parseInt(i[0]),r.releaseNode(),t){case 0:new Utilities.Timer(1e3,2,null,()=>{this.effectFishDie(r.type,r.x,r.y,i[1])}).Start(),TweenMax.to(r,3,{onComplete:this.groupCoinwin.bind(this,i[1],{x:l.x,y:l.y},r)}),r.x=AppInfo.appRealWidth/2,r.y=AppInfo.appRealHeight/2+30,h&&h.setCoin(h.coin+parseInt(i[1]));break;case 1:AppInfo.gameMovie.gameBoard.valueCardReward=i[1],this.effectWinBossMini(r.type,r.x,r.y,t,l.x,l.y,e);break;case 2:AppInfo.gameMovie.gameBoard.timeFreeGun=i[1],this.effectWinBossMini(r.type,r.x,r.y,t,l.x,l.y,e);break;case 3:AppInfo.gameMovie.gameBoard.valueFastBulletReward=i[1],i[3]&&(AppInfo.gameMovie.gameBoard.fastBulletValue=i[3]),this.effectWinBossMini(r.type,r.x,r.y,t,l.x,l.y,e);break;case 4:i[3]&&(AppInfo.gameMovie.gameBoard.x2BulletValue=i[3]),AppInfo.gameMovie.gameBoard.valueX2BulletReward=i[1],this.effectWinBossMini(r.type,r.x,r.y,t,l.x,l.y,e);break;case 5:AppInfo.gameMovie.gameBoard.valueJactpotReward=i[1],this.effectWinBossMini(r.type,r.x,r.y,t,l.x,l.y,e);break;case 6:AppInfo.gameMovie.gameBoard.valueLuckySpinReward=i[1],this.effectWinBossMini(r.type,r.x,r.y,t,l.x,l.y,e)}if(i.length>=3&&null!=i[2]&&""!=i[2]){const e=Utilities.Base64._utf8_decode(i[2]);AppInfo.preLoader.globalCompoController.compoToast.addMessage(e)}}}else r.type>=101?(this.effectWinBossMap(a,t,o,l.x,l.y,e),this.effectFishDie(a,t,o,i,l.x,l.y,e),this.effectWinCoinCatchFish(a,t,o,i,l.x,l.y,e),AppInfo.GameInfo.tournamentRoom&&AppInfo.preLoader.requestController.sendBonusKillBoss(AppInfo.gameMovie.gameBoard.listFish)):(this.effectFishDie(a,t,o,i,l.x,l.y,e,p),this.effectWinCoinCatchFish(a,t,o,i,l.x,l.y,e,1,p))}}}}onCatchFishInFishArea(e,t,i,s,o){const n=this.getUserSeatByPosition(e);let a,h=null;s=s||null;var l=0;if(AppInfo.gameMovie.gameBoard.boss33Dance&&33==AppInfo.gameMovie.gameBoard.currentBoss.type)if(AppInfo.gameMovie.gameBoard.currentBoss&&AppInfo.gameMovie.gameBoard.currentBoss.id==t)h=AppInfo.gameMovie.gameBoard.currentBoss,AppInfo.gameMovie.gameBoard.boss33Dance=!1;else for(l=0;l<AppInfo.gameMovie.gameBoard.listFishBoss33Run.length;l++){if((r=AppInfo.gameMovie.gameBoard.listFishBoss33Run[l]).id==t){h=r;break}}else if(AppInfo.gameMovie.gameBoard.currentBoss&&0!=AppInfo.gameMovie.gameBoard.currentBoss.listFishInSide.length)for(l=0;l<AppInfo.gameMovie.gameBoard.currentBoss.listFishInSide.length;l++){if((r=AppInfo.gameMovie.gameBoard.currentBoss.listFishInSide[l]).id==t){h=r,h.inSideFish=!0;break}}if(null==h)for(l=0;l<AppInfo.gameMovie.gameBoard.listFish.length;l++){var r;if((r=AppInfo.gameMovie.gameBoard.listFish[l]).id===t){h=r;break}}if(n){if(a=n.iconCoin.getGlobalPosition(),n.isMe){let e=!1;if(AppInfo.gameMovie.gameBoard.totalCoinFish+=i,0==AppInfo.gameMovie.gameBoard.listFishUserKill.length)AppInfo.gameMovie.gameBoard.listFishUserKill.push({fishType:h.type,count:1});else if(h){for(let t=0;t<AppInfo.gameMovie.gameBoard.listFishUserKill.length;t++)AppInfo.gameMovie.gameBoard.listFishUserKill[t].fishType==h.type&&(AppInfo.gameMovie.gameBoard.listFishUserKill[t].count++,e=!0);e||AppInfo.gameMovie.gameBoard.listFishUserKill.push({fishType:h.type,count:1})}}n.isMe&&PreLoaderConfig.IsEnableGunSkill&&(n.compoGunSkill.isUseSkill||n.compoGunSkill.updateScoreSkill(o)),i>0&&n.setCoin(n.coin+i)}else a=new PIXI.Point(640,65);if(h)if(AppInfo.gameMovie.gameBoard.boss33Dance&&AppInfo.gameMovie.gameBoard.currentBoss&&33==AppInfo.gameMovie.gameBoard.currentBoss.type)AppInfo.gameMovie.gameBoard.listFishBoss33Run.splice(l,1),AppInfo.gameMovie.gameBoard.currentBoss?(AppInfo.preLoader.soundController.playMoonAngleDeathSound(),this.effectFishDie(h.type,AppInfo.gameMovie.gameBoard.currentBoss.x,AppInfo.gameMovie.gameBoard.currentBoss.y,i,a.x,a.y,e),this.effectWinCoinCatchFish(h.type,AppInfo.gameMovie.gameBoard.currentBoss.x,AppInfo.gameMovie.gameBoard.currentBoss.y-AppInfo.gameMovie.gameBoard.currentBoss.movie.height/2-40,i,a.x,a.y,e)):(this.effectFishDie(h.type,h.x,h.y,i,a.x,a.y,e),this.effectWinCoinCatchFish(h.type,h.x,h.y,i,a.x,a.y,e));else if(h.inSideFish)AppInfo.gameMovie.gameBoard.currentBoss.listFishInSide.splice(l,1),this.effectWinCoinCatchFish(h.type,AppInfo.gameMovie.gameBoard.currentBoss.x,AppInfo.gameMovie.gameBoard.currentBoss.y,i,a.x,a.y,e),this.effectFishDie(h.type,AppInfo.gameMovie.gameBoard.currentBoss.x,AppInfo.gameMovie.gameBoard.currentBoss.y,i,a.x,a.y,e);else{if(AppInfo.gameMovie.gameBoard.removeFishAtIndex(l),h.isCaTran){let e=h.getGlobalPosition();h.x=e.x,h.y=e.y,h.fishShadow&&null!==h.fishShadow&&(e=h.fishShadow.getGlobalPosition(),h.fishShadow.x=e.x,h.fishShadow.y=e.y,AppInfo.gameMovie.layerFishShadow.addChild(h.fishShadow))}if(AppInfo.gameMovie.layerEffect.addChild(h),h.isRedFish){let s;h.isLock?h.unLock():h.unreadyForLock(),this.effectFishDie(h.type,h.x,h.y,i,a.x,a.y,e),this.effectWinCoinCatchFish(h.type,h.x,h.y,i,a.x,a.y,e);const o=[];for(l=0;l<AppInfo.gameMovie.gameBoard.listFish.length;l++)s=AppInfo.gameMovie.gameBoard.listFish[l],s.isBossMap||s.refreshInView(),h.type===s.type&&s.hasInView&&o.push(s.id);if(0===o.length&&(AppInfo.gameMovie.gameBoard.inFishArea?this.onCatchFishSpecialInArea(n.userID,t,[],0,n.coin+i):this.onCatchFishSpecial(n.userID,t,[],0,n.coin+i)),n.isMe){let e="";if(PreLoaderConfig.EnalbeFacebookShare){let t=0;for(l=0;l<o.length;l++)t+=o[l];const i=t%h.id+0+t;let s=Math.floor(i*(i%5+1)>>i%h.id+3)%10;switch(s<0&&(s=Math.abs(s)),s){case 0:e="QO0RA3";break;case 1:e="MG9553";break;case 2:e="YSH7AZ";break;case 3:e="JOSZYF";break;case 4:e="BG0SH3";break;case 5:e="Z59AFF";break;case 6:e="WYE7IB";break;case 7:e="B19957";break;case 8:e="DVSPV1";break;case 9:e="JJHZDG";break;default:e="catchBoomFish"}}else e="catchBoomFish";AppInfo.gameMovie.gameBoard.inFishArea?AppInfo.preLoader.requestController.catchBoomFishInFishArea(h.id,o.length,o):PreLoaderConfig.EnalbeFacebookShare&&"catchBoomFish"!=e?AppInfo.preLoader.requestController[e](h.id,o.length,o,PreLoaderConfig.EnalbeFacebookShare,{data:{originalEvent:!0}},e):PreLoaderConfig.IsNuevaBala?AppInfo.preLoader.requestController.nuevaBalaBoom(h.id,o.length,o,{data:{originalEvent:!0}}):AppInfo.preLoader.requestController.catchBoomFish(h.id,o.length,o)}}else if(h.die(),23===h.type)AppInfo.preLoader.soundController.playBoom(),n.isMe&&this.effectFishDie(h.type,h.x,h.y,i,a.x,a.y,e);else if(35===h.type){let t;if(s){const i=s.split("|");switch(t=parseInt(i[0]),t){case 0:new Utilities.Timer(1e3,2,null,()=>{this.effectFishDie(h.type,h.x,h.y,i[1])}).Start(),TweenMax.to(h,3,{onComplete:this.groupCoinwin.bind(this,i[1],{x:a.x,y:a.y},h)}),h.x=AppInfo.appRealWidth/2,h.y=AppInfo.appRealHeight/2+30,n&&n.setCoin(n.coin+parseInt(i[1]));break;case 1:AppInfo.gameMovie.gameBoard.valueCardReward=i[1],this.effectWinBossMini(h.type,h.x,h.y,t,a.x,a.y,e);break;case 2:AppInfo.gameMovie.gameBoard.timeFreeGun=i[1],this.effectWinBossMini(h.type,h.x,h.y,t,a.x,a.y,e);break;case 3:AppInfo.gameMovie.gameBoard.valueFastBulletReward=i[1],i[3]&&(AppInfo.gameMovie.gameBoard.fastBulletValue=i[3]),this.effectWinBossMini(h.type,h.x,h.y,t,a.x,a.y,e);break;case 4:i[3]&&(AppInfo.gameMovie.gameBoard.x2BulletValue=i[3]),AppInfo.gameMovie.gameBoard.valueX2BulletReward=i[1],this.effectWinBossMini(h.type,h.x,h.y,t,a.x,a.y,e);break;case 5:AppInfo.gameMovie.gameBoard.valueJactpotReward=i[1],this.effectWinBossMini(h.type,h.x,h.y,t,a.x,a.y,e);break;case 6:AppInfo.gameMovie.gameBoard.valueLuckySpinReward=i[1],this.effectWinBossMini(h.type,h.x,h.y,t,a.x,a.y,e)}if(i.length>=3&&null!=i[2]&&""!=i[2]){const e=Utilities.Base64._utf8_decode(i[2]);AppInfo.preLoader.globalCompoController.compoToast.addMessage(e)}}}else 101===h.type?(this.effectWinBossMap(h.type,h.x,h.y,a.x,a.y,e),this.effectFishDie(h.type,h.x,h.y,i,a.x,a.y,e),this.effectWinCoinCatchFish(h.type,h.x,h.y,i,a.x,a.y,e)):(this.effectFishDie(h.type,h.x,h.y,i,a.x,a.y,e),this.effectWinCoinCatchFish(h.type,h.x,h.y,i,a.x,a.y,e))}else Utilities.warn("éo có con cá nào ch?t c?")}disposeTopHitBoss(){this.compoTopHitBoss&&setTimeout(()=>{this.compoTopHitBoss&&(this.compoTopHitBoss.dispose(),this.compoTopHitBoss=null)},PreLoaderConfig.DelayInvisibleCompoBoss)}effectWinCoinCatchFish(e,t,i,s,o,n,a,h,l=!1){if(s>0){const r=this.poolManger.getCoinWinEffect(s,o,n,e),p=this.getUserSeatByPosition(a);let d=0;r.x=t,r.y=i,p&&p.compoGun&&(s/p.compoGun.power>=50?AppInfo.preLoader.soundController.playFishDieBigSound():AppInfo.preLoader.soundController.playFishDieNormalSound(),d=s/p.compoGun.power),r.updateTextCoinPos(),p?r.showEffect(o,n,e,p.isMe,d,h,l):r.showEffect(o,n,e,!1,d,h,l)}}effectWinBossMini(e,t,i,s,o,n,a){try{this.effectWinBossMiniTempForSomeVersionToTraceError(e,t,i,s,o,n,a)}catch(e){}}effectWinBossMiniTempForSomeVersionToTraceError(e,t,i,s,o,n,a){const h=this.getUserSeatByPosition(a);this.timerWaitingBossMiniDie&&this.timerWaitingBossMiniDie.Stop(),this.timerWaitingBossMiniDie=new Utilities.Timer(1e3,2,null,this.completeWaitingBossMiniDieMove.bind(this,h,e,t,i,s,o,n,a)),this.timerWaitingBossMiniDie.Start()}completeWaitingBossMiniDieMove(e,t,i,s,o,n,a,h){try{this.completeWaitingBossMiniDieMoveTempForSomeVersionToTraceError(e,t,i,s,o,n,a,h)}catch(e){}}completeWaitingBossMiniDieMoveTempForSomeVersionToTraceError(e,t,i,s,o,n,a,h){const l=new d.a(o,n,a,t,e);l.x=AppInfo.appRealWidth/2,l.y=AppInfo.appRealHeight/2+30,l.effectShowReward(n,a),e&&e.isMe&&(e.bossMiniRewardEffect=l,o==d.a.TYPE_FREE_GUN?e.StartCountDown(d.a.TYPE_FREE_GUN):o==d.a.TYPE_FAST_BULLET?e.StartCountDown(d.a.TYPE_FAST_BULLET):o==d.a.TYPE_BULLET_X2&&e.StartCountDown(d.a.TYPE_BULLET_X2)),AppInfo.gameMovie.layerEffect.addChild(l),AppInfo.gameMovie.gameBoard.listEffects.push(l)}checkChangeGunStatus(e,t){t.isMe&&(e?(t._btnMinus.enabled=!0,t._btnPlus.enabled=!0,t.enabled=!0,t.baseStationFront.interactive=!0,t.baseStationFront.buttonMode=!0):(t._btnMinus.enabled=!1,t._btnPlus.enabled=!1,t.baseStationFront.interactive=!1,t.baseStationFront.buttonMode=!1))}effectWinBossMap(e,t,i,s,o,n){if(!AppInfo.GameInfo.tournamentRoom)switch(e){case 101:this.effectWinBossMedusa(t,i,s,o,n);break;case 102:AppInfo.preLoader.soundController.playNhanMaChet(),this.effectWinBossCentaur(t,i,s,o,n);break;case 103:AppInfo.preLoader.soundController.playNhanMaChet(),this.effectWinBossPoseidonDie(t,i,s,o,n);break;case 104:AppInfo.preLoader.soundController.playNhanMaChet(),this.effectWinBossMerMaidDie(t,i,s,o,n);break;case 105:AppInfo.preLoader.soundController.playNhanMaChet(),this.effectWinBossCerberus(t,i,s,o,n)}}effectWinBossMedusa(e,t,i,s,o){const n=this.getUserSeatByUserID(o),a=new c.a(i,s);a.x=e,a.y=t-20,a.effectShowReward(i,s,n),AppInfo.gameMovie.layerEffect.addChild(a),AppInfo.gameMovie.gameBoard.listEffects.push(a)}effectWinBossCentaur(e,t,i,s,o){const n=this.getUserSeatByUserID(o),a=new u.a(i,s);a.x=e,a.y=t-20,a.effectShowReward(i,s,n),AppInfo.gameMovie.layerEffect.addChild(a),AppInfo.gameMovie.gameBoard.listEffects.push(a)}effectWinBossCerberus(e,t,i,s,o){const n=this.getUserSeatByUserID(o),a=new g.a(i,s);a.x=e,a.y=t-20,a.effectShowReward(i,s,n),AppInfo.gameMovie.layerEffect.addChild(a),AppInfo.gameMovie.gameBoard.listEffects.push(a)}effectWinBossPoseidonDie(e,t,i,s,o){const n=this.getUserSeatByUserID(o),a=new m.a(i,s,n);a.x=e,a.y=t,a.showEffect(),AppInfo.gameMovie.layerEffect.addChild(a),AppInfo.gameMovie.gameBoard.listEffects.push(a)}effectWinBossMerMaidDie(e,t,i,s,o){const n=this.getUserSeatByUserID(o),a=new f.a(i,s,n);a.x=e,a.y=t,a.showEffect(),AppInfo.gameMovie.layerEffect.addChild(a),AppInfo.gameMovie.gameBoard.listEffects.push(a)}effectFishDie(e,t,i,s,o,n,a,h=!1){let l=!1;if(null!==(a=null==a?null:a)&&this.getUserSeatByPosition(a)&&(l=this.getUserSeatByPosition(a).isMe),PreLoaderConfig.ListFishIDStun.includes(e))for(let e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)AppInfo.gameMovie.gameBoard.listFish[e].stun&&AppInfo.gameMovie.gameBoard.listFish[e].stun();if(PreLoaderConfig.ListFishIDFrozen.includes(e)){for(const e of AppInfo.gameMovie.gameBoard.listFish)!e||null===e||e.isBossMap||e.isCaTran||e.frozen&&e.frozen();let e=null;for(const t of AppInfo.gameMovie.gameBoard.listEffects)if("fishFrozenEffect"===t.name&&t.idle){e=t;break}null===e&&(e=new I.a,e.name="fishFrozenEffect",AppInfo.gameMovie.layerEffect.addChild(e),AppInfo.gameMovie.gameBoard.listEffects.push(e)),AppInfo.gameMovie.layerEffect.setChildIndex(e,AppInfo.gameMovie.layerEffect.numChildren-1),e.play()}if(PreLoaderConfig.ListFishIDNormalWinParticle.includes(e)){PreLoaderConfig.COINMOVIE.art=PreLoaderConfig.CoinIsMe;var r=new y.a(PreLoaderConfig.COINMOVIE);AppInfo.gameMovie.layerEffect.addChild(r),AppInfo.gameMovie.gameBoard.listFishDieParticle.push(r),r.playParticle(t,i,null,null,null,l)}if(PreLoaderConfig.ListFishIDBigWinParticle.includes(e)){PreLoaderConfig.BIGWIN.art=PreLoaderConfig.CoinIsMe;r=new y.a(PreLoaderConfig.BIGWIN);AppInfo.gameMovie.layerEffect.addChild(r),AppInfo.gameMovie.gameBoard.listFishDieParticle.push(r),r.playParticle(t,i,s,o,n,l)}if(PreLoaderConfig.ListFishIDSuperWinParticle.includes(e)){PreLoaderConfig.SUPERWIN.art=PreLoaderConfig.CoinIsMe;const e=new y.a(PreLoaderConfig.SUPERWIN);AppInfo.gameMovie.layerEffect.addChild(e),AppInfo.gameMovie.gameBoard.listFishDieParticle.push(e),e.playParticle(t,i,s,o,n,l)}PreLoaderConfig.ListFishIDVibrate.includes(e)&&AppInfo.gameMovie.strongVibration()}effectFrozen(){for(const e of AppInfo.gameMovie.gameBoard.listFish)!e||null===e||e.isBossMap||e.isCaTran||e.frozen();let e=null;for(const t of AppInfo.gameMovie.gameBoard.listEffects)if("fishFrozenEffect"===t.name&&t.idle){e=t;break}null===e&&(e=new I.a,e.name="fishFrozenEffect",AppInfo.gameMovie.layerEffect.addChild(e),AppInfo.gameMovie.gameBoard.listEffects.push(e)),AppInfo.gameMovie.layerEffect.setChildIndex(e,AppInfo.gameMovie.layerEffect.numChildren-1),e.play(),AppInfo.gameMovie.strongVibration()}effectStun(){for(let e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)AppInfo.gameMovie.gameBoard.listFish[e].stun&&AppInfo.gameMovie.gameBoard.listFish[e].stun();AppInfo.gameMovie.strongBackground()}playGunBossEffectForUser(e){switch(this.onHitFish(e.bulletID,e.listFish[0],e.position),e.bulletType){case 101:for(var t=0;t<e.listFish.length;t++){null!==(i=AppInfo.gameMovie.gameBoard.getFishByID(e.listFish[t]))&&i.onHitBulletSpecial(e.bulletType)}break;case 103:AppInfo.preLoader.soundController.playPoseidonBullet();const s=[];for(t=0;t<e.listFish.length;t++){null!==(i=AppInfo.gameMovie.gameBoard.getFishByID(e.listFish[t]))&&s.push(i)}e.position!==this.myBaseStation.basePosition&&this.playEffectLightningFish(s);break;case 104:for(t=0;t<e.listFish.length;t++){var i;null!==(i=AppInfo.gameMovie.gameBoard.getFishByID(e.listFish[t]))&&i.hitBulletMermaid()}}}playEffectLightningFish(e){const t=new P.a;AppInfo.gameMovie.layerEffect.addChild(t),t.playEffect(e)}playEffectBulletCeberus(e){const t=new k.a;AppInfo.gameMovie.layerEffect.addChild(t),t.playEffect(e)}onReadyLockFish(){this.compoTooltipLockFish.show(),AppInfo.gameMovie.gameBoard.waitLockFish=!0;for(let e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)AppInfo.gameMovie.gameBoard.listFish[e]&&AppInfo.gameMovie.gameBoard.listFish[e].readyForLock&&AppInfo.gameMovie.gameBoard.listFish[e].readyForLock()}onWaitingFireLightning(){AppInfo.gameMovie.gameBoard.waitLightning=!0;for(let e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)AppInfo.gameMovie.gameBoard.listFish[e].readyForFireLightning()}onUnreadyLockFish(){this.compoTooltipLockFish&&this.compoTooltipLockFish.hide(),AppInfo.gameMovie.gameBoard.waitLockFish=!1;for(let e=0;e<AppInfo.gameMovie.gameBoard.listFish.length;e++)AppInfo.gameMovie.gameBoard.listFish[e]&&AppInfo.gameMovie.gameBoard.listFish[e].unreadyForLock&&AppInfo.gameMovie.gameBoard.listFish[e].unreadyForLock()}onUserLevelUp(e,t,i,s){AppInfo.preLoader.globalCompoController.getCompoLevel().show(e,t,i,s,this.onLevelUpEffectComplete.bind(this,e,t,s))}onLevelUpEffectComplete(e,t,i){const s=this.getUserSeatByUserID(e);s&&(s.setCoin(i),s.levelUp(t))}handlerChangeSpecialGun(e,t){if(AppInfo.MyInfo.userID==e){this.myBaseStation.compoChangeGun.onUpdateSpecialGun(t);let e=!0;for(var i=0;i<t.length;i++)t[i].type===this.myBaseStation.compoGun.type&&(e=!1);this.myBaseStation.compoGun.type>100&&this.myBaseStation.compoGun.type<200&&e&&(this.myBaseStation.changeGun(PreLoaderConfig.ListGunConfig[0].id,!1),this.myBaseStation.compoGun.updateTransform());for(i=0;i<AppInfo.MyInfo.ListBossGun.length;i++){let e=!1;for(let s=0;s<t.length;s++)t[s].type==AppInfo.MyInfo.ListBossGun[i].type&&(e=!0);if(!e){AppInfo.preLoader.globalCompoController.compoToast.addMessage(PreLoaderConfig.MessagesConfig.GunBossExpired);break}}AppInfo.MyInfo.ListBossGun=t}}setGunReadyFireEffect(e,t){const i=this.getUserSeatByUserID(e);if(i)for(var s=0;s<t.length;s++)i.compoGun.type==t[s].type&&(i.compoGun.isAvailable=t[s].isAvailable);if(AppInfo.MyInfo.userID==e){this.myBaseStation.compoChangeGun.onUpdateSpecialGun(t);let e=!0;for(s=0;s<t.length;s++)t[s].type===this.myBaseStation.compoGun.type&&(e=!1);if(this.myBaseStation.compoGun.type>100&&this.myBaseStation.compoGun.type<200&&e){if(AppInfo.GameInfo.tournamentRoom){let e;for(s=0;s<PreLoaderConfig.RoomBattle.ListGunConfig.length;s++)PreLoaderConfig.RoomBattle.ListGunConfig[s].power[0]===+AppInfo.GameInfo.BulletMultiple&&(e=PreLoaderConfig.RoomBattle.ListGunConfig[s].id);this.myBaseStation.changeGun(e,!1)}else this.myBaseStation.changeGun(PreLoaderConfig.ListGunConfig[0].id,!1);this.myBaseStation.compoGun.updateTransform()}for(s=0;s<AppInfo.MyInfo.ListBossGun.length;s++){let e=!1;for(let i=0;i<t.length;i++)t[i].type==AppInfo.MyInfo.ListBossGun[s].type&&(e=!0);if(!e){AppInfo.preLoader.globalCompoController.compoToast.addMessage(PreLoaderConfig.MessagesConfig.GunBossExpired);break}}AppInfo.MyInfo.ListBossGun=t}}blurTab(){}focusTab(){}handlerActiveSkill(e,t){const i=this.getUserSeatByPosition(t);null!==i&&i.isMe&&!i.isActivatingSkill&&(AppInfo.preLoader.interactive=!1,AppInfo.preLoader.interactiveChildren=!1,this.timerToFireGun.Stop(),i.isActivatingSkill=!0,i.activeSkill(e,()=>{this.startTraceGun()}))}performanceTracing(e){if(AppInfo.visibility){}}onEnterFrame(){let e,t=this._lastTime;for(this._lastTime=performance.now(),t=this._lastTime-t,this.countToStartGame<(PreLoaderConfig.TimeCountToStartGame||1e3)&&(this.countToStartGame+=t),this.performanceTracing(t),this.myBaseStation&&this.myBaseStation.compoGun&&AppInfo.gameMovie.gameBoard.lockFish&&AppInfo.gameMovie.gameBoard.lockFish.id!=this.myBaseStation.compoGun.lockFishID&&(this.myBaseStation.compoGun.lockFishID=AppInfo.gameMovie.gameBoard.lockFish.id,this.myBaseStation.autoRotationGunFishLock()),e=0;e<this.listBaseStation.length;e++)this.listBaseStation[e]&&this.listBaseStation[e].autoRotationGunFishLock();t=this._lastTime-this._lastTimeUseForCheckCollision,t<PreLoaderConfig.TimeCheckCollision||(this._lastTimeUseForCheckCollision=this._lastTime)}onBulletHit(e,t){if(e.isMe){if(e.reduceQuantity&&AppInfo.gameMovie.gameBoard.quantityBulletOnScreen--,void 0===t.id)return;let l;if(t.isBossMap&&t.listFishInSide.length>0){const e=Utilities.Number.randRange(0,t.listFishInSide.length-1),i=t.listFishInSide[e];l=i?i.id:0}else l=0;if(e.skill)if(103===e.skillSkind){var i=[],s=[];PreLoaderConfig.ListIDBoss.includes(t.type)||23==t.type||t.isNote||35===t.type||(i.push(t.id),s.push(t));for(var o=0;o<PreLoaderConfig.ListNoteGunBoss[e.skillSkind].limmitFish;o++){(n=AppInfo.gameMovie.gameBoard.listFish[Utilities.Number.randRange(1,AppInfo.gameMovie.gameBoard.listFish.length)])&&n.visible&&!PreLoaderConfig.ListIDBoss.includes(n.type)&&35!==t.type&&(n.isNote||(i.push(n.id),s.push(n)))}this.playEffectLightningFish(s),this.requestSkillCatchFish(e,i)}else if(105===e.skillSkind){i=[],s=[];PreLoaderConfig.ListIDBoss.includes(t.type)||23==t.type||t.isNote||35===t.type||(i.push(t.id),s.push(t));for(o=0;o<PreLoaderConfig.ListNoteGunBoss[e.skillSkind].limmitFish;o++){var n;(n=AppInfo.gameMovie.gameBoard.listFish[Utilities.Number.randRange(1,AppInfo.gameMovie.gameBoard.listFish.length)])&&n.visible&&!PreLoaderConfig.ListIDBoss.includes(n.type)&&(i.push(n.id),s.push(n))}this.playEffectBulletCeberus(s),this.requestSkillCatchFish(e,i,2)}else this.requestSkillCatchFish(e,[t.id]);else{let i="";if(PreLoaderConfig.EnalbeFacebookShare)if(t.isBossMap){this.effectLightingWater.showEffect(l,t.id,e.id,e.power);var a=-1;if(PreLoaderConfig.EnalbeGoogleShare){var h=e.id%t.id+e.id*e.power+0;a=Math.floor(h*(h%t.id+1)>>h%(l+1))%10}else{h=e.id%t.id+e.id*e.power+0;a=Math.floor(h*(h%t.id+1)>>h%3+9)%10}switch(a<0&&(a=Math.abs(a)),a){case 0:i="HCRE11";break;case 1:i="BY7YM3";break;case 2:i="RRMPS6";break;case 3:i="QWP5UN";break;case 4:i="WXBBQW";break;case 5:i="U4KRH4";break;case 6:i="T9RIQN";break;case 7:i="YA1SQF";break;case 8:i="SKB44Y";break;case 9:i="CEBNIC";break;default:i="catchBossMap"}}else{this.effectLightingWater.showWaterLight(e.basePosition,t.id,e.id,e.power,e.type,t.type);a=-1;if(PreLoaderConfig.EnalbeGoogleShare){h=e.power%(e.type+1)+e.id+e.power+t.id+e.id+0;a=Math.floor(h*(h%e.power+t.id)>>h+e.type)%10}else{h=e.power%(e.type+1)+e.type+t.id+e.id+0+e.power;a=Math.floor(h*(h%3+1)>>h%1+2)%10}switch(a<0&&(a=Math.abs(a)),a){case 0:i="P59UG8";break;case 1:i="D4US1K";break;case 2:i="N7TKK8";break;case 3:i="MGU5P3";break;case 4:i="MGTTQB";break;case 5:i="XL9V68";break;case 6:i="OJNDH2";break;case 7:i="N8EPT3";break;case 8:i="UU4751";break;case 9:i="FKCT44";break;default:i="catchFish"}}else i=t.isBossMap?"catchBossMap":"catchFish";if(AppInfo.gameMovie.gameBoard.boss33Dance&&33==t.type)if(AppInfo.gameMovie.gameBoard.listFishBoss33Run.length<=0)PreLoaderConfig.EnalbeFacebookShare&&"catchFish"!=i?AppInfo.preLoader.requestController[i](e.basePosition,t.id,e.type,e.id,e.power,PreLoaderConfig.EnalbeFacebookShare,e.iniciarJuegoE,i):PreLoaderConfig.IsNuevaBala&&e.iniciarJuego?AppInfo.preLoader.requestController.nuevaBalaFish(e.basePosition,t.id,e.type,e.id,e.power,e.iniciarJuegoE):AppInfo.preLoader.requestController.catchFish(e.basePosition,t.id,e.type,e.id,e.power);else{const t=Utilities.Number.randRange(0,AppInfo.gameMovie.gameBoard.listFishBoss33Run.length-1),s=AppInfo.gameMovie.gameBoard.listFishBoss33Run[t].id;PreLoaderConfig.EnalbeFacebookShare&&"catchFish"!=i?AppInfo.preLoader.requestController[i](e.basePosition,s,e.type,e.id,e.power,PreLoaderConfig.EnalbeFacebookShare,e.iniciarJuegoE,i):PreLoaderConfig.IsNuevaBala&&e.iniciarJuego?AppInfo.preLoader.requestController.nuevaBalaFish(e.basePosition,s,e.type,e.id,e.power,e.iniciarJuegoE):AppInfo.preLoader.requestController.catchFish(e.basePosition,s,e.type,e.id,e.power)}else t.isBossMap?PreLoaderConfig.EnalbeFacebookShare&&"catchBossMap"!=i?AppInfo.preLoader.requestController[i](l,t.id,e.id,e.power,PreLoaderConfig.EnalbeFacebookShare,e.iniciarJuegoE,i):PreLoaderConfig.IsNuevaBala&&e.iniciarJuego?AppInfo.preLoader.requestController.nuevaBalaBoss(l,t.id,e.id,e.power,e.iniciarJuegoE):AppInfo.preLoader.requestController.catchBossMap(l,t.id,e.id,e.power):AppInfo.gameMovie.gameBoard.inFishArea?AppInfo.preLoader.requestController.catchFishInFishArea(e.basePosition,t.id,e.type,e.id,e.power):PreLoaderConfig.EnalbeFacebookShare&&"catchFish"!=i?AppInfo.preLoader.requestController[i](e.basePosition,t.id,e.type,e.id,e.power,PreLoaderConfig.EnalbeFacebookShare,e.iniciarJuegoE,i):PreLoaderConfig.IsNuevaBala&&e.iniciarJuego?AppInfo.preLoader.requestController.nuevaBalaFish(e.basePosition,t.id,e.type,e.id,e.power,e.iniciarJuegoE):AppInfo.preLoader.requestController.catchFish(e.basePosition,t.id,e.type,e.id,e.power);AppInfo.gameMovie.gameBoard.inFishArea||(t.isBossMap?this.effectLightingWater.endShowEffect():this.effectLightingWater.endShowWaterLight())}}else e.isBotFire&&this._botManager&&this._botManager.botHitFish(t,e);t.type>=32&&this.showEffectBossBloodLose(e.power)}requestSkillCatchFish(e,t,i){let s="";if(PreLoaderConfig.EnalbeFacebookShare){let i=0;for(let e=0,s=t.length;e<s;e++)i+=t[e];const o=e.id%(i+e.skillSkind+1)+e.id+0;let n=Math.floor(o*(o%3+1)>>o%i+4)%10;switch(n<0&&(n=Math.abs(n)),n){case 0:s="YD4I2W";break;case 1:s="P2ASMG";break;case 2:s="M1GGY2";break;case 3:s="MGVW5S";break;case 4:s="PENQX2";break;case 5:s="GGKYKB";break;case 6:s="NJHODH";break;case 7:s="D27HF1";break;case 8:s="BHBQBD";break;case 9:s="AYD2FV";break;default:s="skillCatchFish"}}else s="skillCatchFish";i&&i>0?TweenMax.delayedCall(i,({basePosition:e,skillSkind:t,id:i,power:o},n)=>{AppInfo.preLoader.requestController[s](e,n,t,i,o,PreLoaderConfig.EnalbeFacebookShare,{data:{originalEvent:!0}},s)},[e,t]):AppInfo.preLoader.requestController[s](e.basePosition,t,e.skillSkind,e.id,e.power,PreLoaderConfig.EnalbeFacebookShare,{data:{originalEvent:!0}},s)}requestBoomFish(e,t){let i="";if(PreLoaderConfig.EnalbeFacebookShare){let s=0;for(let e=0;e<t.length;e++)s+=t[e];const o=s%e+s;let n=Math.floor(o*(o%5+1)>>o%e+3)%10;switch(n<0&&(n=Math.abs(n)),n){case 0:i="QO0RA3";break;case 1:i="MG9553";break;case 2:i="YSH7AZ";break;case 3:i="JOSZYF";break;case 4:i="BG0SH3";break;case 5:i="Z59AFF";break;case 6:i="WYE7IB";break;case 7:i="B19957";break;case 8:i="DVSPV1";break;case 9:i="JJHZDG";break;default:i="catchBoomFish"}}else i="catchBoomFish";PreLoaderConfig.EnalbeFacebookShare&&"catchBoomFish"!=i?AppInfo.preLoader.requestController[i](e,t.length,t,PreLoaderConfig.EnalbeFacebookShare,{data:{originalEvent:!0}},i):PreLoaderConfig.IsNuevaBala?AppInfo.preLoader.requestController.nuevaBalaBoom(e,t.length,t,{data:{originalEvent:!0}}):AppInfo.preLoader.requestController.catchBoomFish(e,t.length,t)}onCancelNapCoin(){AppInfo.preLoader.popUpController.hidePopupNotify()}onCancelNapCoinExit(){AppInfo.preLoader.requestController.userUp()}onBtnNapCoinClick(){PreLoaderConfig.isUseWS?AppInfo.preLoader.popUpController.showPopupNotifyNapGold(PreLoaderConfig.MessagesConfig.NotEnoughCoinToJoin,()=>{AppInfo.preLoader.popUpController.showPopupNapXu()}):ClientWebHelper.showDepositOhYea()}gemUp(e,t,i,s,o){if(!PreLoaderConfig.IsDisableHandlerGem){const e=this.getUserSeatByPosition(t);let s;if(e){null===e.gem&&e.initObjGem(),e.gem.updateValue(o),s=e.gem.getGlobalPosition();AppInfo.gameMovie.layerEffect.getChildByName("fish"+i)}else s=new PIXI.Point(640,65)}}updateCollectMiniGame(e,t,i,s){const o=this.getUserSeatByUserID(e);o&&(null===o.compoCollectMiniGame&&o.initCompoCollectMiniGame(t,i,s),o.compoCollectMiniGame.updateValueCollect(t,i,s))}effectWinGem(e,t,i,s){const o=this.poolManger.getGemWin(e,t,i,16);s?(o.x=s.x,o.y=s.y):(o.x=AppInfo.appRealWidth/2,o.y=AppInfo.appRealHeight/2),o.updateTextCoinPos(),o.showEffect(t,i,16),AppInfo.gameMovie.layerEffect.addChild(o),AppInfo.gameMovie.gameBoard.listEffects.push(o)}bonusGif(e,t,i,s){let o,n,a;const h={};if(h.x=AppInfo.appRealWidth/2,h.y=AppInfo.appRealHeight/2+30,a=this.getUserSeatByPosition(e),n=null!==a?a.iconCoin.getGlobalPosition():new PIXI.Point(640,50),s){const t=s.split("|");switch(o=parseInt(t[0]),o){case 0:this.effectFishDie(i,h.x,h.y,t[1],n.x,n.y),this.groupCoinwin(t[1],{x:n.x,y:n.y},h),a&&a.setCoin(a.coin+parseInt(t[1]));break;case 1:AppInfo.gameMovie.gameBoard.valueCardReward=t[1];break;case 2:AppInfo.gameMovie.gameBoard.timeFreeGun=t[1];break;case 3:AppInfo.gameMovie.gameBoard.valueFastBulletReward=t[1],t[3]&&(AppInfo.gameMovie.gameBoard.fastBulletValue=t[3]);break;case 4:t[3]&&(AppInfo.gameMovie.gameBoard.x2BulletValue=t[3]),AppInfo.gameMovie.gameBoard.valueX2BulletReward=t[1];break;case 5:AppInfo.gameMovie.gameBoard.valueJactpotReward=t[1];break;case 6:AppInfo.gameMovie.gameBoard.valueLuckySpinReward=t[1]}if(0!==o&&this.effectWinBossMini(i,h.x,h.y,o,n.x,n.y,e),t.length>=3&&null!=t[2]&&""!=t[2]){const e=Utilities.Base64._utf8_decode(t[2]);AppInfo.preLoader.globalCompoController.compoToast.addMessage(e)}}}appendChat(e,t,i,s){switch(e){case 1:s!==AppInfo.myInfo.userID&&this.compoChat.appendChat(t,i);break;case 2:const e=this.getUserSeatByUserID(s);e&&e!=this.myBaseStation&&e.showEmotion(i)}}addMission(e){this.compoMission||(this.compoMission=new D.a,this.compoMission.y=AppInfo.appRealHeight/2-150,this.compoMission.x=40,AppInfo.gameMovie.layerComponent.addChild(this.compoMission)),this.compoMission.addMissions(e)}completeMission(e,t,i,s,o){this.compoMission.completeMission(t,s,o,i)}updateMission(e,t){this.compoMission.updateInfoMission(e,t)}userUseItem(e,t,i,s,o,n,a,h){const l=this.getUserSeatByUserID(e);l&&l.useItem(e,t,i,s,o,n,a,h)}ticketUp(e,t,i){const s=this.getUserSeatByUserID(e);let o;s?(null===s.ticketGame&&s.initTicketGame(),s.ticketGame.updateValue(i),o=s.ticketGame.txtValue.getGlobalPosition()):o=new PIXI.Point(640,65),this.effectWinTicket(t,o.x,o.y)}effectWinTicket(e,t,i,s){const o=this.poolManger.getTicket(e,t,i,16);null!=s?(o.x=s.x,o.y=s.y):(o.x=AppInfo.appRealWidth/2,o.y=AppInfo.appRealHeight/2),o.updateTextCoinPos(),o.showEffect(t,i,16),AppInfo.gameMovie.layerEffect.addChild(o),AppInfo.gameMovie.gameBoard.listEffects.push(o)}getItemBag(e,t,i,s,o,n,a,h,l){const r=this.getUserSeatByUserID(e),p=this.poolManger.getItemEffect();let d;r?(d=r.compoItem.getGlobalPosition(),r.isMe&&(r.compoItem.updateQuality(i,a),p.callBackComplete=r.compoItem.useNow.bind(r.compoItem,i))):d=new PIXI.Point(640,65);let c=null;c=AppInfo.gameMovie.layerEffect.getChildByName("fish"+t),null===c&&t===AppInfo.gameMovie.gameBoard.currentBoss&&(c=AppInfo.gameMovie.gameBoard.currentBoss);const u=c||{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2};p.x=u.x,p.y=u.y,p.showEffect(i,h,a,d.x,d.y),AppInfo.gameMovie.layerEffect.addChild(p)}showItemDailyMission(e){this.compoDailyMission&&this.compoDailyMission.showItemMission(e)}updateMoneyUserInGame(e,t,i,s){const o=this.getUserSeatByUserID(e);o&&(o.setCoin(i),s&&AppInfo.preLoader.popUpController.showPopupNotify(s))}skillCatchFishResult(e,t,i,s,o,n,a){if(7===o){var h=this.getUserSeatByUserID(e);if(r=AppInfo.gameMovie.gameBoard.getFishByID(i)){AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(r)),h.compoGun._lightBulletFire(l,0,0);const e=h.iconCoin.getGlobalPosition();r.die(),this.effectFishDie(r.type,r.x,r.y,n,e.x,e.y,h.basePosition),this.effectWinCoinCatchFish(r.type,r.x,r.y,n,e.x,e.y,h.basePosition)}if(!h.isMe){var l=Utilities.Number.angleRadBetweenTwoPoint(r.getGlobalPosition(),{x:0,y:0})+Math.PI/2;r&&h.compoGun.fireAtPoint(r.x,r.y)}}else{var r;if(r=AppInfo.gameMovie.gameBoard.getFishByID(i)){h=this.getUserSeatByUserID(e);if(this.poolManger){var p=this.poolManger.getEffectLightningChain(e);p.visible=!0}h?h.effectLightning=p:p.onCompleteCatchAllFish(),AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(r)),r.fishScore=n,p.playEffect(r,a)}}}addSpecialFish(e,t,i,s,o){if(AppInfo.GameInfo.tournamentRoom)this.addGroupFish(i,t,e,0,0,!0);else{const s=this.myBaseStation.compoItem.getItemByType(+o);this._fishManager.createFishItem({fishID:i,fishType:t,point:e,item:s})}}catchFishItem(e,t,i,s,o){const n=this.myBaseStation.compoItem.getItemByType(+o);this.getItemBag(e,t,n.id,n.type,0,n.quantity+1,1,n.txtTitle.text,o)}updateInfoGun(e,t,i,s,o,n,a){const h=this.getUserSeatByUserID(e);h&&h.isMe&&h.compoGun.updateInfoGunSkill(t,i,s,o,n,a)}gunSkillRemain(e,t,i,s,o,n,a,h,l){const r=this.getUserSeatByPosition(e);r&&r.isMe?r.compoGun.updateRemainSkill(a):r.compoGun._gunSkill107Fire(s,o,i,0,h)}availableSkill(e){this.myBaseStation.compoGunSkill.availableSkill(e)}joinRoomFightBoss(e,t){this.gameMovie.soundController.stopGameBGSound(),this.gameMovie.freeze(),this.gameMovie.collisionManager.stop(),this.removeAllUser(),this.compoBackground.switchBattleBoss(e),this.myBaseStation.switchModeBattleBoss(e,t),this.compoBattleBoss=new Y.a(e),103===e?this.gameMovie.layerComponent.addChildAt(this.compoBattleBoss,0):this.gameMovie.layerFish.addChildAt(this.compoBattleBoss,0),AppInfo.preLoader.globalCompoController.compoNotifyGame.hide(),AppInfo.preLoader.globalCompoController.compoHeader.hide(),this.gameMovie.gameBoard.isJoinBattleBoss=!0,this.gameMovie.gameBoard.removeAllBullet(),this.compoChat&&(this.compoChat.visible=!1),this._timerChangeBG.Stop(),this.timerWaitToKick&&this.timerWaitToKick.Stop(),this.timerToFireGun&&this.timerToFireGun.Stop(),this.addGroupFishInContext&&(this.addGroupFishInContext.dispose(),this.addGroupFishInContext=null),this._botManager&&(this._botManager.dispose(),this._botManager=null);for(let e=0,t=this.gameMovie.gameBoard.listFish.length;e<t;e++){const t=this.gameMovie.gameBoard.listFish[e];t&&(t.refreshInView(),t.hasInView&&t.runTween?(t.releaseNode(),t.runFastOutScreen(5)):(t.dispose(),e--))}}startBattleBoss(){this.compoProgressBattleBoss&&(this.compoProgressBattleBoss.visible=!0),this.myBaseStation.visible=!0,AppInfo.preLoader.globalCompoController.compoHeader.show()}finishFightBoss(e,t){if(this.gameMovie.gameBoard.isFightingBoss=!1,this.gameMovie.gameBoard.isJoinBattleBoss=!1,this.gameMovie.layerFish.interactive=!1,this.timerToFireGun&&this.timerToFireGun.Stop(),this.compoBattleBoss.finish(e),this.finishBattleBoss=new K.a(this.compoBattleBoss.typeBoss,e,t),this.gameMovie.layerEffect.addChild(this.finishBattleBoss),this.compoBattleBoss.finishGame(),e){let e=0,i=!1;for(const s of t)s.rewardType===N.a.TYPE_COIN&&s.rewardValue>0&&(i=!0,e+=s.rewardValue);i?this.compoBattleBoss.updateInfoEffect(e):this.compoBattleBoss.showResult()}else this.finishBattleBoss.play()}missionBattleBoss(e,t){this.compoProgressBattleBoss||(this.compoProgressBattleBoss=new q.a(this.gameMovie.gameBoard.roomSevenSeaKind,e),this.compoProgressBattleBoss.position.set((AppInfo.appRealWidth-this.compoProgressBattleBoss.width)/2,50),this.gameMovie.layerEffect.addChild(this.compoProgressBattleBoss)),this.addMission(t),this.compoMission.mappingTo=this.compoProgressBattleBoss._avatar,101===this.gameMovie.gameBoard.roomSevenSeaKind&&(this.myBaseStation.switchModeBattleBoss(0,0),this.startBattleBoss())}updateProgressBattleBoss(e,t,i,s,o){0!==e&&this.updateMission(e,t+"|"+i+"|"+(t===i)),this.compoProgressBattleBoss&&this.compoProgressBattleBoss.updateProgress(o),this.compoProgressBattleBoss&&o>=this.compoProgressBattleBoss.totalPoint&&this.compoBattleBoss&&this.compoBattleBoss.showSummonBoss&&(this.compoBattleBoss.showSummonBoss(),this.compoMission.visible=!1)}addBossBattle(e,t,i,s,o,n){(o=1===o)||(this.compoProgressBattleBoss&&(this.compoProgressBattleBoss.dispose(),this.compoProgressBattleBoss=null),this.myBaseStation.bossAppearBattleBoss(),this.gameMovie.gameBoard.isFightingBoss=!0,this.compoBattleBoss.setupFightBoss()),this.compoBattleBoss.addBoss(e,t,i,s,o,n)}requestBattleBossPositionUser(e){AppInfo.gameMovie.requestController.battleBossPositionUser(this.myBaseStation.getGlobalPosition(),e)}battleBossAttack(e,t,i,s,o){this.compoBattleBoss.bossAttack(e,t,i,s,o)}battleBossUserBeAttacked(e,t,i,s,o,n){if(this.myBaseStation.updateBlood(t),o){this.compoBattleBoss.getBossById(n)instanceof z.a?(s/=1e3,this.timerToFireGun&&this.timerToFireGun.Stop(),0===i?this.myBaseStation.freeze(s):1===i&&this.myBaseStation.turnedStone(s)):(s/=1e3,this.timerToFireGun&&this.timerToFireGun.Stop(),(0===i||1===i)&&this.myBaseStation.stun(s))}}battleBossMedusaStatueBroken(){this.compoBattleBoss.statueBroken()}battleBossMedusaHitEye(e,t,i,s){s&&(this.compoBattleBoss.eyesPerfectly(),this.myBaseStation.onBulletFireSuccess=this.eyeFireBullet.bind(this))}battleBossMedusaReleaseEye(e,t,i,s){this.compoBattleBoss.releaseEye(e,t,i,s)}eyeFireBullet(e){this.compoBattleBoss.eyesFireBullet(e)}battleBossUpdateInfoBoss(e,t,i){this.compoBattleBoss.updateInfoBoss(e,t,i)}battleBossAccumulatePoints(e,t){this.compoProgressBattleBoss&&(this.compoProgressBattleBoss.updateTotalPoint(t),this.compoProgressBattleBoss.updateProgress(e))}updateInfoSkillBoss(e){this.myBaseStation&&this.myBaseStation.updateInfoSkillBoss(e)}endEffectSkill(e,t,i,s){const o=this.getUserSeatByUserID(s);null!==o&&o.endEffectSkill(e,t,i)}addCrabWallet(e,t){this._fishManager.createSpecialCrab(e,t)}updateCrabWallet(e){this._fishManager.updateSpecialCrab(e)}updateCrabZero(e){this._fishManager.updateCrabZero(e)}userWinJackpot(e,t,i){this._effectInGameManager&&this._effectInGameManager.playWinJackPot(e,t,i)}updateStatusCollectGun(e,t,i,s,o){this.compoBattleBoss&&this.compoBattleBoss.updateCollectGun(e,t,i,s,o)}infoSummonBoss(e){this.compoProgressBattleBoss&&this.compoProgressBattleBoss.startTimer(e)}get gameMovie(){return AppInfo.gameMovie}get popupController(){return AppInfo.preLoader.popupController}get componentController(){return AppInfo.preLoader.globalCompoController}}}).call(this,i(3))},function(e,t,i){"use strict";(function(e){var s=i(6),o=(i(80),i(105)),n=i(106),a=i(107),h=i(178),l=i(86),r=i(108),p=i(109),d=i(71),c=i(110),u=(i(75),i(87),i(88)),m=i(70);class f extends s.a{constructor(e,t){super(),this.dragonCollectBullet=null,this.dragonGunInfo=null,this.lightningBullet=null,this.redFishThunder=null,this.isRunning=!1,this.isAvailable=0,this.countBullet=0,this.guildText=null,this.isBossGun=!1,this.isSkillGun=!1,this._lockFish=null,this.randomBall=0,this._bulletFirePoint=null,this._baseRotation=null,this.basePosition=null,this.idleMovie=null,this.movie=null,this.power=10,this.type=null,this.compoLockLine=null,this.basePosition=t,this.randomBall=t,this.type=e||0,this.isAvailable=0,this.isRunning=!1,this.countBullet=0,this._isStuckEffect=!1,this.type>=201&&(this.isSkillGun=!0),this._effectCollectPower=null,this.effectTime=0,this.currentPower=0,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;const e=ResourceManager.Atlas["AtlasGun"+this.type].textures["gun"+this.type+"idle"];switch(this.movie=new PIXI.extras.AnimatedSprite(e),this.movie.onComplete=this.swapStateIdleMovie.bind(this),this.movie.animationSpeed=.5,this.type){case 0:case 1:case 2:case 3:case 4:this.movie.anchor.set(.5,1);break;case 108:this.movie.anchor.set(.5,.9);break;default:this.movie.anchor.set(.5,1)}for(let e=0;e<PreLoaderConfig.ListGunConfig.length;e++)PreLoaderConfig.ListGunConfig[e].id==this.type&&(this.power=PreLoaderConfig.ListGunConfig[e].power[0]);if(this.type>100)switch(AppInfo.GameInfo.kindID){case PreLoaderConfig.RoomThuong.kindId:this.power=PreLoaderConfig.RoomThuong.maxPower;break;case PreLoaderConfig.RoomVip.kindId:this.power=PreLoaderConfig.RoomVip.maxPower;break;case PreLoaderConfig.RoomMedusa.kindId:this.power=PreLoaderConfig.RoomMedusa.maxPower;break;default:this.power=PreLoaderConfig.RoomThuong.maxPower}if(this.addChild(this.movie),this.isMe?this.movie.gotoAndPlay(0):this.movie.gotoAndStop(0),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this._bulletFirePoint=new PIXI.Sprite,107===this.type&&this.isMe?this._bulletFirePoint.y=-this.movie.height/2*this.movie.anchor.y:(this._bulletFirePoint.y=-this.movie.height*this.movie.anchor.y,201===this.type||this.type>100&&this.type<200?this._bulletFirePoint.y=-this.movie.height/2*this.movie.anchor.y:205===this.type&&(this._bulletFirePoint.y=-this.movie.height/2+10,this._bulletFirePoint.x=30)),this.movie.addChild(this._bulletFirePoint),this.type>100&&this.type<200&&(this.isBossGun=!0,this.countBullet=PreLoaderConfig.ListNoteGunBoss[this.type].limmitBullet,this.isMe&&null==this.guildText&&(this.guildText=new p.a(PreLoaderConfig.ListNoteGunBoss[this.type].text,PreLoaderConfig.ListNoteGunBoss[this.type].bgColor,PreLoaderConfig.ListNoteGunBoss[this.type].stokeColor,PreLoaderConfig.ListNoteGunBoss[this.type].limmitBullet),this.addChild(this.guildText))),this.type>200)switch(this.areaCollistion=new PIXI.Sprite(ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"Area"]),this.areaCollistion.alpha=.8,this.addChild(this.areaCollistion),this.type){case 201:this.areaCollistion.anchor.set(.5,1.06),this.areaCollistion.scale.set(4.8),this.areaCollistion.x=7;break;case 202:this.areaCollistion.anchor.set(.5,.95);break;case 203:this.areaCollistion.anchor.set(.5);break;case 204:null===this._effectCollectPower&&(this._effectCollectPower=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas["AtlasGun"+this.type].textures.effectCollectPower),this.addChildAt(this._effectCollectPower,0),this._effectCollectPower.gotoAndPlay(0),this._effectCollectPower.anchor.set(.5),this._effectCollectPower.position.set(0,100-this.movie.height))}AppInfo.GameInfo.tournamentRoom&&(this.gunShadow=new PIXI.extras.AnimatedSprite(e),this.gunShadow.tint=0,this.gunShadow.alpha=.5,this.addChildAt(this.gunShadow,0))}}updateGuildTextPosition(){if(this.guildText&&null!==this.guildText){let e=2;104===this.type&&(e=1),105===this.type&&(e=1.25),0===this.basePosition?this.guildText.position.set(this.guildText.width/2+this.movie.width/2,-this.movie.height/e):1===this.basePosition?this.guildText.position.set(-this.guildText.width/2-this.movie.width/2,-this.movie.height/e):2===this.basePosition?this.guildText.position.set(-this.guildText.width/2-this.movie.width/2,this.movie.height/e):3===this.basePosition&&this.guildText.position.set(this.guildText.width/2+this.movie.width/2,this.movie.height/e),this.guildText.show()}}dispose(){super.dispose(),TweenMax.killTweensOf(this),this.disableAutoRotateFollowMouse(),this.compoLockLine&&(this.removeChild(this.compoLockLine),this.compoLockLine.dispose(),this.compoLockLine=null),this.guildText&&(this.guildText.dispose(),this.guildText=null),this.areaCollistion&&(TweenMax.killTweensOf(this.areaCollistion),this.removeChild(this.areaCollistion),this.areaCollistion.destroy(),this.areaCollistion=null),null!==this.redFishThunder&&(this.redFishThunder.gotoAndStop(0),this.redFishThunder.destroy()),this.removeChild(this.movie),this.movie.gotoAndStop(0),this.movie.destroy(),this.parent&&this.parent.removeChild(this),this.destroy()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}fireAtPoint(e,t,i){let s;return s="number"==typeof e&&"number"==typeof t?{x:e,y:t}:e,this.fireAtAngle(Utilities.Number.angleRadBetweenTwoPoint(this.movie.getGlobalPosition(),s)+Math.PI/2,i,e,t)}fireAtAngle(e,t,i=0,s=0){let l,r;if(this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["gun"+this.type+"fire"],this.movie.loop=!1,this.movie.animationSpeed=.5,this.movie.rotation=e,this.movie.displayObjectUpdateTransform(),this.movie.gotoAndPlay(0),this.gunShadow&&(this.gunShadow.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["gun"+this.type+"fire"],this.gunShadow.loop=!1,this.gunShadow.animationSpeed=.5,this.gunShadow.rotation=e,this.gunShadow.displayObjectUpdateTransform(),this.gunShadow.gotoAndPlay(0)),this.isSkillGun){switch(this.areaCollistion&&(this.areaCollistion.visible=!1),this.type){case 201:switch(r=this._bulletFirePoint.getGlobalPosition(),r.x=r.x+5*Math.cos(e),l=new o.a(this.type,this.basePosition,this.power,t),l.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),l.name="compoBullet"+l.id,l.rotation=e,l.angle=e,l.skillSkind=1,l.skill=!0,this.basePosition){case 0:case 1:case 2:case 3:l.x=r.x,l.y=r.y}break;case 202:switch(r=this._bulletFirePoint.getGlobalPosition(),r.x=r.x+50*Math.cos(e+Math.PI/2),r.y=r.y+50*Math.sin(e+Math.PI/2),l=new n.a(this.type,this.basePosition,this.power,t),l.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),l.name="compoBullet"+l.id,l.rotation=e,l.angle=e,l.skill=!0,l.skillSkind=2,this.basePosition){case 0:case 1:case 2:case 3:l.x=r.x,l.y=r.y}break;case 203:switch(r=this._bulletFirePoint.getGlobalPosition(),l=new a.a(this.type,this.basePosition,this.power,t),l.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),l.name="compoBullet"+l.id,l.rotation=e,l.angle=e,l.skill=!0,l.skillSkind=3,this.basePosition){case 0:case 1:case 2:case 3:l.x=r.x,l.y=r.y}break;case 204:switch(r=this.movie.getGlobalPosition(),r.x=r.x+5*Math.cos(e),l=new h.a(this.type,this.basePosition,this.power,t,this.effectTime),l.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),l.name="compoBullet"+l.id,l.rotation=e,l.angle=e,l.skillSkind=4,l.skill=!0,this.basePosition){case 0:case 1:case 2:case 3:l.x=r.x,l.y=r.y}break;case 205:return void this._lightBulletFire(e,t,i,s)}PreLoaderConfig.isDebug?AppInfo.preLoader.addChild(l):AppInfo.gameMovie.layerEffect.addChild(l),205!==this.type?(l.onFinishEffectSkill=this.onFinishEffectSkill.bind(this),l.updateTransform(),l.run(i,s,e),this.disableAutoRotateFollowMouse()):(l.updateTransform(),l.run(i,s,e),this.disableAutoRotateFollowMouse()),204!==this.type&&(AppInfo.gameMovie.layerFish.interactive=!1)}else if(this.isBossGun)if(106===this.type&&this._handlerLightGun(e,t,i,s),108===this.type)this.isMe,l=this._gunMultible(i,s,e,t);else if(this.dragonGunInfo&&this.dragonGunInfo.limitBullet>0&&107===this.type&&this.dragonGunInfo.limitTimeUse>0)this.isMe&&(AppInfo.preLoader.soundController.playSoundDragonMultibleBullet(),AppInfo.preLoader.soundController.playSoundDragonGongShort()),l=this._gunSkill107Fire(i,s,e,t);else{switch(this.isMe&&AppInfo.preLoader.soundController.playSoundDragonBullet(),r=this._bulletFirePoint.getGlobalPosition(),l=AppInfo.gameMovie.displayController.poolManger.getBullet(this.type,this.basePosition,this.power,t),l.visible=!0,l.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),l.name="compoBullet"+l.id,l.rotation=e,l.angle=e,l.scale.set(1),l.isMe&&AppInfo.gameMovie.gameBoard.quantityBulletOnScreen++,this.basePosition){case 0:case 1:case 2:case 3:l.x=r.x,l.y=r.y}l.x=Math.max(0,Math.min(l.x,AppInfo.appRealWidth)),l.y=Math.max(0,Math.min(l.y,AppInfo.appRealHeight)),PreLoaderConfig.isDebug?AppInfo.preLoader.addChild(l):AppInfo.gameMovie.layerFish.addChild(l),l.updateTransform(),l.type,l.isMe?1!=this.isAvailable||this.isRunning?(l.fireFollowAngle(e),AppInfo.gameMovie.gameBoard.listBullet.push(l)):(AppInfo.gameMovie.gameBoard.quantityBulletOnScreen--,this.isAvailable=0,this.isRunning=!0,this.gunSkillFire(l,i,s,e)):0!=i&&0!=s?this.gunSkillFire(l,i,s,e):(l.fireFollowAngle(e),AppInfo.gameMovie.gameBoard.listBullet.push(l))}else{switch(r=this._bulletFirePoint.getGlobalPosition(),l=AppInfo.gameMovie.displayController.poolManger.getBullet(this.type,this.basePosition,this.power,t),l.visible=!0,l.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),l.name="compoBullet"+l.id,l.rotation=e,l.angle=e,l.isMe&&AppInfo.gameMovie.gameBoard.quantityBulletOnScreen++,this.basePosition){case 0:case 1:case 2:case 3:l.x=r.x,l.y=r.y}l.x=Math.max(0,Math.min(l.x,AppInfo.appRealWidth)),l.y=Math.max(0,Math.min(l.y,AppInfo.appRealHeight)),PreLoaderConfig.isDebug?AppInfo.preLoader.addChild(l):AppInfo.gameMovie.layerFish.addChild(l),l.fireFollowAngle(e),l.updateTransform(),AppInfo.gameMovie.gameBoard.listBullet.push(l)}return l}rotateToAngle(e,t,i){if(TweenMax.killTweensOf(this.movie),t=t||0,i=i||0,this.areaCollistion){if(0!=t&&0!=i){const e=this.toLocal({x:t,y:i},AppInfo.gameMovie.layerEffect);TweenMax.killTweensOf(this.areaCollistion),TweenMax.to(this.areaCollistion,.2,{x:e.x,y:e.y})}else TweenMax.killTweensOf(this.areaCollistion),TweenMax.to(this.areaCollistion,.2,{rotation:e});TweenMax.to(this.movie,.2,{rotation:e})}else TweenMax.to(this.movie,.2,{rotation:e})}_handlerLightGun(e,t,i,s){const o=this._bulletFirePoint.getGlobalPosition(),n=new CompoLightningBullet(this.type,this.basePosition,this.power,t);switch(n.visible=!0,n.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),n.name="compoBullet"+n.id,n.rotation=e,n.angle=e,n.isMe&&AppInfo.gameMovie.gameBoard.quantityBulletOnScreen++,this.basePosition){case 0:case 1:case 2:case 3:n.x=o.x,n.y=o.y}n.x=Math.max(0,Math.min(n.x,AppInfo.appRealWidth)),n.y=Math.max(0,Math.min(n.y,AppInfo.appRealHeight)),PreLoaderConfig.isDebug?AppInfo.preLoader.addChild(n):AppInfo.gameMovie.layerFish.addChild(n),n.updateTransform()}gunSkillFire(e,t,i,s){switch(e.type){case 101:this.gunMedusaFire(e,t,i,s);break;case 102:this.gunCentaurFire(e,t,i,s);break;case 103:this.gunPoseidonFire(e,t,i,s);break;case 104:this.gunMerMaidFire(e,t,i,s);break;case 105:this.gunCerberusFire(e,t,i,s);break;case 107:this.gunDragonFire(e,t,i,s);break;default:this.gunMedusaFire(e,t,i,s)}}gunMedusaFire(e,t,i,s){e.skill=!0,e.skillSkind=101,e.fireFollowAngle(s),AppInfo.gameMovie.gameBoard.listBullet.push(e),setTimeout(()=>{null!=this.parent&&(this.isRunning=!1)},3e3)}_gunSkill107Fire(e,t,i,s,o=this.dragonGunInfo.limitBullet){const n=this._bulletFirePoint.getGlobalPosition(),a={x:0,y:0};switch(this.basePosition){case 0:case 1:case 2:case 3:a.x=n.x,a.y=n.y}const h=Utilities.toRad(90/o),l=Math.round(Math.sqrt(a.x**2+a.y**2)+1280),r=[];this.currentPower=this.power;for(let e=0;e<o;e++){var p=AppInfo.gameMovie.displayController.poolManger.getBullet(this.type,this.basePosition,this.currentPower,s);p.visible=!0,p.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),p.name="compoBullet"+p.id,p.rotation=i,p.angle=i,r.push(p.id),AppInfo.gameMovie.layerFish.addChild(p),p.updateTransform();const t=null,n=e+o/2;p.rotation=i+h*n-Utilities.toRad(90),p.x=a.x,p.y=a.y,p.toX=a.x-l*Math.cos(i+h*n),p.toY=a.y-l*Math.sin(i+h*n),p.animationSpeed=.1,AppInfo.gameMovie.gameBoard.listBullet.push(p),p.skill=!0,p.skillSkind=107,p.movie.gotoAndPlay(0),p.visible=!1,TweenMax.fromTo(p,4,{onStart:(e=>{e.visible=!0}).bind(this,p),x:p.x,y:p.y,scaleX:1,scaleY:1},{onStart:(e=>{e.visible=!0}).bind(this,p),x:p.toX,y:p.toY,scaleX:1.5,scaleY:1.5,ease:Linear.easeNone,onUpdate:((e,{x:t,y:i})=>{e&&(e._emitter.ownerPos.x=t,e._emitter.ownerPos.y=i)}).bind(this,t,p),onComplete:(e=>{e.visible&&(AppInfo.gameMovie.gameBoard.removeBulletAtIndex(AppInfo.gameMovie.gameBoard.listBullet.indexOf(e)),e.explode())}).bind(this,p)})}this.isMe?AppInfo.preLoader.requestController.sendSpecialBulletFire(this.basePosition,p.type,i,0,0,this.power,r.length,r):(this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["gun"+this.type+"fire"],this.movie.loop=!1,this.movie.animationSpeed=.5,this.movie.rotation=i,this.movie.displayObjectUpdateTransform(),this.movie.gotoAndPlay(0))}gunDragonFire({x:e,y:t},i,s,o){const n=Utilities.toRad(10),a=Math.round(Math.sqrt(e**2+t**2)+1280);for(let i=0;i<18;i++){const s=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun107.textures.bullet107fire),h=new d.a(f.ParticleEffectDragon);h.playParticle(0,0),AppInfo.gameMovie.layerEffect.addChild(h),AppInfo.gameMovie.layerFish.addChild(s),s.gotoAndPlay(0),s.updateTransform(),s.rotation=o+n*(i-0)-Utilities.toRad(90),s.anchor.set(.5,.5),s.x=e,s.y=t,s.toX=e-a*Math.cos(o+n*(i-0)),s.toY=t-a*Math.sin(o+n*(i-0)),s.animationSpeed=1/6,TweenMax.fromTo(s,5,{x:s.x,y:s.y,scaleX:1,scaleY:1},{x:s.toX,y:s.toY,scaleX:2,scaleY:2,ease:Linear.easeNone,onUpdate:(({_emitter:e},{x:t,y:i})=>{e.ownerPos.x=t,e.ownerPos.y=i}).bind(this,h,s)})}this.isRunning=!1}gunCerberusFire(e,t,i,s){e.skill=!0,e.skillSkind=105,e.movie.textures=ResourceManager.Atlas["AtlasGun"+e.type].textures.bullet105fire,e.movie.animationSpeed=1,e.movie.gotoAndStop(0),e.movie.anchor.set(.5),e.scale.set(2.25),null!==e.particleEffect&&null!==e.particleEffect._emitter||(e.particleEffect=new d.a(f.EFFECT_PARTICLE),AppInfo.gameMovie.layerEffect.addChild(e.particleEffect)),e.particleEffect.playParticle(0,0);const o=e.onTriggerCollide,n=AppInfo.gameMovie.collisionManager.addPolygon(e,[5,59,25,25,68,6,109,25,126,58],m.a.TYPE_COLLISION.GENERIC,e.movie),a=[];e.onTriggerCollide=t=>{const i=t.getTarget();if(i.effectBounce(e.rotation),i.hitBulletCerberus(),a.length>=PreLoaderConfig.ListNoteGunBoss[e.type].limmitFish)return;const s=i.id;a.includes(s)||a.push(s)};const h={left:0,top:0,width:AppInfo.appRealWidth+100,height:AppInfo.appRealHeight},l={x:e.x,y:AppInfo.appRealHeight-e.y},r=Utilities.Number.coordinateIntersectionPointBorder(h,l,-(s-Math.PI/2)),p=Utilities.Number.distanceBetweenTwoPoint(e.x,AppInfo.appRealHeight-e.y,r.x,r.y);TweenMax.to(e,p/700,{x:r.x,y:AppInfo.appRealHeight-r.y,ease:Linear.easeNone,onUpdate:(({particleEffect:e,x:t,y:i})=>{e._emitter&&(e._emitter.ownerPos.x=t,e._emitter.ownerPos.y=i)}).bind(this,e),onComplete(){n.release(),e.onTriggerCollide=o,this.onGunCerberusComplete(e,a)},onCompleteScope:this}),e.updateTransform(),AppInfo.gameMovie.layerFish.addChild(e)}gunPoseidonFire(e,t,i,s){e.skill=!0,e.skillSkind=103,e.fireFollowAngle(s),AppInfo.gameMovie.gameBoard.listBullet.push(e),setTimeout(()=>{null!=this.parent&&(this.isRunning=!1)},3e3)}updateInfoGunSkill(e,t,i,s,o,n){this.dragonGunInfo={count:e,target:t,currentLevel:i,isAvailable:s,limitTimeUse:o,limitBullet:n},this.parent.dragonCollectBullet&&this.parent.dragonCollectBullet.updateProcessBar(i,e,t,s)}updateRemainSkill(e){this.dragonGunInfo&&(this.dragonGunInfo.limitTimeUse=e)}gunMerMaidFire(e,t,i,s){e.skill=!0,e.skillSkind=104;const o=[],n=PreLoaderConfig.ListNoteGunBoss[e.type].limmitFish-1;if(void 0===this.effectGunMermaid){this.effectGunMermaid=new PIXI.spine.Spine(ResourceManager.Atlas.GunEffect104Bones.textures.GunEffect104Bones.spineData),AppInfo.gameMovie.layerEffect.addChild(this.effectGunMermaid);const e=[300,500,700,500,550,1500,450,1500];this.effectGunMermaid.nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this.effectGunMermaid,e,m.a.TYPE_COLLISION.GENERIC)}else AppInfo.gameMovie.collisionManager.add(this.effectGunMermaid.nodeTree);this.effectGunMermaid.lastTime=0,this.effectGunMermaid.state.setAnimation(0,"animation",!1),this.effectGunMermaid.visible=!0,this.effectGunMermaid.rotation=e.rotation,this.effectGunMermaid.x=e.x,this.effectGunMermaid.y=e.y,this.effectGunMermaid.onTriggerCollide=e=>{if(o.length>n)return;const t=e.getTarget().id;o.includes(t)||o.push(t)},TweenMax.delayedCall(.45,(function(e,t){this.effectGunMermaid.nodeTree.release(),this.effectGunMermaid.visible=!1,this.sendListFishHit(e,t)}),[e,o],this)}gunCentaurFire(e,t,i,s){e.skill=!0,e.skillSkind=102,e.movie.textures=ResourceManager.Atlas["AtlasGun"+e.type].textures.bullet102fly,e.movie.animationSpeed=1,e.movie.gotoAndStop(0),e.movie.anchor.set(.5),e.getNodeTree().release(),TweenMax.to(e,.2,{x:t,y:i,ease:Power0.easeNone,onComplete:this.onGunCentaurComplete,onCompleteParams:[t,i,e],onCompleteScope:this}),e.updateTransform(),AppInfo.gameMovie.layerFish.addChild(e)}onGunCerberusComplete(e,t){this.parent&&this.sendListFishHit(e,t)}onGunCentaurComplete(e,t,i){if(this.parent){const o=[],n=[];let a;const h=AppInfo.gameMovie.gameBoard.listFish.length,l=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas["AtlasGun"+i.type].textures.bullet102Boom);for(l.gotoAndPlay(0),l.anchor.set(.5),l.position.set(e,t),l.animationSpeed=.5,l.loop=!1,AppInfo.gameMovie.layerEffect.addChild(l),l.updateTransform(),l.onComplete=(e=>{AppInfo.gameMovie.layerEffect.removeChild(e),e.destroy(),e=null}).bind(this,l),a=0;a<h;a++){if((s=AppInfo.gameMovie.gameBoard.listFish[a]).visible&&!PreLoaderConfig.ListIDBoss.includes(s.type)&&(!PreLoaderConfig.ListIDBoss.includes(s.type)&&s.x>0&&s.x<AppInfo.appRealWidth&&s.y>0&&s.y<AppInfo.appRealHeight&&(o.push(s),n.push(s.id)),o.length>PreLoaderConfig.ListNoteGunBoss[i.type].limmitFish-1))break}for(a=0;a<o.length;a++){var s=o[a];const n=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas["AtlasGun"+i.type].textures.bullet102Piece);n.anchor.set(.5,.5),n.x=e,n.y=t,n.gotoAndPlay(0),n.animationSpeed=1/8;const h=s.getGlobalPosition(),l=(e+h.x)/2,r=(t+h.y)/2,p=[{x:e,y:t},{x:l-Math.abs(t-r)*Math.tan(Utilities.toRad(30)),y:r-Math.abs(t-l)*Math.tan(Utilities.toRad(30))},{x:h.x,y:h.y}];AppInfo.gameMovie.layerEffect.addChild(n),TweenMax.to(n,.4,{bezier:{type:"quadratic",values:p,autoRotate:["x","y","rotation",0,!0],ease:Linear.easeNone},onComplete:((e,t)=>{AppInfo.gameMovie.layerEffect.removeChild(e),e.destroy(),e=null,t.hitBulletCentaur()}).bind(this,n,s)})}this.sendListFishHit(i,n)}}sendListFishHit(e,t){AppInfo.gameMovie.displayController.requestSkillCatchFish(e,t),setTimeout(()=>{null!=this.parent&&(this.isRunning=!1)},2e3),e&&(AppInfo.gameMovie.layerEffect.removeChild(e),e.hideBullet())}onFinishEffectSkill(){AppInfo.gameMovie.layerFish.interactive=!0;const e=AppInfo.gameMovie.displayController.getUserSeatByPosition(this.basePosition);e&&e.changeGunAfterUseSkill()}autoPathGunBullet(){this.compoLockLine.updateBall(this.randomBall)}autoRotationGunFishLock(){this._lockFish&&(this.movie.rotation=Utilities.Number.angleRadBetweenTwoPoint(this.movie.getGlobalPosition(),this._lockFish.isLock?this._lockFish.lockSprite.getGlobalPosition():this._lockFish.position)+Math.PI/2,this.compoLockLine.x=this._bulletFirePoint.x,this.compoLockLine.y=this._bulletFirePoint.y,this.autoPathGunBullet())}autoRotationGunLightning(){if(this.lightningBullet&&AppInfo.gameMovie.gameBoard.fishLightning)if(AppInfo.gameMovie.gameBoard.fishLightning.hasInView){const e=Utilities.Number.angleRadBetweenTwoPoint(this.movie.getGlobalPosition(),AppInfo.gameMovie.gameBoard.fishLightning)+Math.PI/2;this.movie.rotation=e,this.lightningBullet.moveFollowFish(AppInfo.gameMovie.gameBoard.fishLightning);const t=this._bulletFirePoint.getGlobalPosition();t.x=t.x+25*Math.cos(e+Math.PI/2),t.y=t.y+25*Math.sin(e+Math.PI/2),this.lightningBullet.updatePosition(t)}else this.lightningBullet.disableLightning()}swapStateIdleMovie(){ResourceManager.Atlas["AtlasGun"+this.type].textures["gun"+this.type+"idle"]&&null!=ResourceManager.Atlas["AtlasGun"+this.type].textures["gun"+this.type+"idle"]&&(this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["gun"+this.type+"idle"],this.movie.loop=!0,this.isMe?this.movie.gotoAndPlay(0):this.movie.gotoAndStop(0),this.movie.animationSpeed=.5,101===this.type&&(this.movie.animationSpeed=.08),103===this.type&&(this.movie.animationSpeed=1/3))}enableAutoRotateFollowMouse(){document.body.oldonmousemove=document.body.onmousemove,document.body.onmousemove=this.onAutoRotateFollowMouse.bind(this)}disableAutoRotateFollowMouse(){this.isSkillGun&&this.isMe&&(AppInfo.gameMovie.displayController.stopTraceGun(),document.body.onmousemove=document.body.oldonmousemove,document.body.oldonmousemove=null)}disableAutoRotateFollowMouseBattle(){this.isMe&&(AppInfo.gameMovie.displayController.stopTraceGun(),document.body.onmousemove=document.body.oldonmousemove,document.body.oldonmousemove=null)}onAutoRotateFollowMouse(){if(null!=this.movie&&!this._isStuckEffect){let t=e.isMobilePage?AppInfo.preLoader.renderer.plugins.interaction.eventData.data.global:AppInfo.preLoader.renderer.plugins.interaction.mouse.global;PIXI.utils.isMobile.other.firefox&&(t=AppInfo.preLoader.renderer.plugins.interaction.mouse.global);const i=Utilities.Number.angleRadBetweenTwoPoint(this.movie.getGlobalPosition(),t)+Math.PI/2;if(this.movie.rotation=i,this.parent._tweenSpinnerByAngle(i),this.gunShadow&&(this.gunShadow.animationSpeed=.5,this.gunShadow.rotation=this.movie.rotation),this._effectCollectPower&&(this._effectCollectPower.x=220*Math.sin(i),this._effectCollectPower.y=(100-this.movie.height)*Math.cos(i)),this.lightningBullet&&205==this.type&&AppInfo.gameMovie.gameBoard.fishLightning){const e=this._bulletFirePoint.getGlobalPosition();e.x=e.x+50*Math.cos(i+Math.PI/2),e.y=e.y+50*Math.sin(i+Math.PI/2)}if(this.areaCollistion&&null!==this.areaCollistion)if(203==this.type||205==this.type){const e=this.toLocal(t,AppInfo.gameMovie.layerEffect);this.areaCollistion.x=e.x,this.areaCollistion.y=e.y}else this.areaCollistion.rotation=i}}changeLightningFire(){this.movie.textures!=ResourceManager.Atlas.AtlasGun205.textures.gun205fire&&(this.movie.textures=ResourceManager.Atlas.AtlasGun205.textures.gun205fire,this.movie.loop=!0,this.movie.animationSpeed=.5,this.movie.gotoAndPlay(0))}sendFireLightning(){let e,t;if(!this.lightningBullet&&AppInfo.gameMovie.gameBoard.fishLightning)switch(e=this._bulletFirePoint.getGlobalPosition(),e.x=e.x+50*Math.cos(angle+Math.PI/2),e.y=e.y+50*Math.sin(angle+Math.PI/2),t=new CompoLightningBullet(this.type,this.basePosition,this.power,lockFishID),t.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),t.name="lightningBullet"+t.id,this.lightningBullet=t,this.basePosition){case 0:case 1:case 2:case 3:t.x=e.x,t.y=e.y}}changeLightningIdle(){this.movie.textures=ResourceManager.Atlas.AtlasGun205.textures.gun205idle,this.movie.loop=!0,this.movie.animationSpeed=.5,this.movie.gotoAndPlay(0)}effectRedFishThunder(){}_gunMultible(e,t,i,s){const o=this._bulletFirePoint.getGlobalPosition(),n={x:0,y:0};switch(this.basePosition){case 0:case 1:case 2:case 3:n.x=o.x,n.y=o.y}let a,h,l,r,p,d,u,m;a=n.x,p=n.y,r=e,m=t;const f=[];this.currentPower=this.power;for(let e=0;e<10;e++){var g=AppInfo.gameMovie.displayController.poolManger.getBullet(this.type,this.basePosition,this.currentPower,s);if(g.visible=!0,g.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),g.name="compoBullet"+g.id,f.push(g.id),AppInfo.gameMovie.layerFish.addChild(g),g.updateTransform(),g.x=n.x,g.y=n.y,g.skill=!0,g.skillSkind=108,g.visible=!0,g.rotation=this.movie.rotation,!g.particleEffect){const e=ParticleConfig.TRAIL,t=[ResourceManager.Atlas.AtlasGun108.textures.demo];g.particleEffect=new c.a(e,t),AppInfo.gameMovie.layerEffect.addChild(g.particleEffect)}g.particleEffect.playParticle(0,0);const e=Math.round(Math.sqrt(a**2+p**2));i=Utilities.Number.angleRadBetweenTwoPoint(a,p,r,m)+Math.PI;r=a-e*Math.cos(i),m=p-e*Math.sin(i);const t=.1*Utilities.Number.randRange(-10,10),o=.1*Utilities.Number.randRange(-20,10),I=.1*Utilities.Number.randRange(10,20),y=Utilities.Number.randRange(-1e3,1e3);h=(a+r)/2-y*t*Math.cos(o),d=(p+m)/2-y*t*Math.sin(0),l=(a+r)/2+y*t*Math.cos(I),u=(p+m)/2+y*t*Math.sin(0);const C=[{x:a,y:p},{x:h,y:d},{x:l,y:u},{x:r,y:m}];TweenMax.to(g,e/500,{bezier:{type:"cubic",curviness:1,values:C},onComplete(){this.explode()},onUpdate(){this.particleEffect.emitter&&(this.particleEffect.emitter.ownerPos.x=this.x,this.particleEffect.emitter.ownerPos.y=this.y)},onUpdateScope:g,onCompleteScope:g,ease:Linear.easeNone})}this.isMe&&AppInfo.preLoader.requestController.sendSpecialBulletFire(this.basePosition,g.type,i,0,0,this.power,f.length,f)}freeze(){void 0!==this._ice&&null!==this._ice||(this._ice=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.Freeze),this._ice.anchor.set(.5),this._ice.position=this.movie.position,this._ice.interactive=!1,this._ice.hitArea=PIXI.Rectangle.EMPTY,this.movie.addChild(this._ice));const e=this.movie.width/this._ice.width,t=this.movie.height/this._ice.height;this._ice.scale.set(e,t),this._ice.visible=!0,this._ice.alpha=0,TweenMax.to(this._ice,1,{alpha:.8})}releaseStuckEffect(e){switch(this._isStuckEffect=!1,e){case f.STUNE:this._fishStunEffect.visible&&(this._fishStunEffect.visible=!1);break;case f.FREEZE:this._ice.visible&&(this._ice.visible=!1);break;case f.LIGHTNING:this._lightningEffect.visible&&(this._lightningEffect.visible=!1)}}stun(){if(this._isStuckEffect=!0,null===this._fishStunEffect||void 0===this._fishStunEffect){this._fishStunEffect=new u.a,this._fishStunEffect.y=-100;const e=Math.min(this.movie.width,this.movie.height)/Math.max(this._fishStunEffect.width,this._fishStunEffect.height);this._fishStunEffect.scale.set(e),this.movie.addChild(this._fishStunEffect)}this._fishStunEffect.gotoAndPlay(0),this._fishStunEffect.visible=!0,this._fishStunEffect.rotation=Utilities.toRad(-90)}lightning(){}burn(){this.movie.tint=16777215,this.movie.tintAlpha=0,TweenMax.to(this.movie,.5,{tint:16711680,yoyo:!0,repeat:20,onComplete:()=>{TweenMax.to(this.movie,.3,{tint:16777215})}})}setScaleForBattle(){this.scale.set(.8)}setAnchorGun(e){switch(e){case 0:case 101:case 102:case 103:case 104:case 105:case 107:this.movie.anchor.set(.5,.8);break;case 108:this.movie.anchor.set(.5,.5);break;default:this.movie.anchor.set(.5,.8)}this.gunShadow&&(this.gunShadow.anchor.set(this.movie.anchor.x,this.movie.anchor.y),this.gunShadow.position.set(this.movie.x+PreLoaderConfig.ConfigPointFishShadow.x,this.movie.y+PreLoaderConfig.ConfigPointFishShadow.y))}_lightBulletFire(e,t,i,s){AppInfo.preLoader.soundController.playPoseidonBullet();const o=this._bulletFirePoint.getGlobalPosition();if(!this._bulletLightingLeft){const e=AppInfo.gameMovie.gameBoard.getNextBulletID();this._bulletLightingLeft=new l.a(e,this.isMe),this._bulletLightingRight=new l.a(e,this.isMe),this._bulletLightingLeft1=new l.a(e,this.isMe),AppInfo.gameMovie.layerEffectUnderFish.addChild(this._bulletLightingLeft),AppInfo.gameMovie.layerEffectUnderFish.addChild(this._bulletLightingRight),AppInfo.gameMovie.layerEffectUnderFish.addChild(this._bulletLightingLeft1)}const n=Utilities.Number.angleRadBetweenTwoPoint(this.movie.getGlobalPosition(),{x:i,y:s})+Math.PI/2;this._bulletLightingLeft.angle=this._bulletLightingLeft.rotation=n-Utilities.toRad(10),this._bulletLightingLeft.position.set(o.x,o.y),this._bulletLightingLeft.play(),this._bulletLightingRight.angle=this._bulletLightingRight.rotation=n,this._bulletLightingRight.position.set(o.x,o.y),this._bulletLightingRight.play(),this._bulletLightingLeft1.angle=this._bulletLightingLeft1.rotation=n+Utilities.toRad(10),this._bulletLightingLeft1.position.set(o.x,o.y),this._bulletLightingLeft1.play()}_getFishInTable(){let e,t;for(let i=0;i<100;i++)if(t=Utilities.Number.randRange(0,AppInfo.gameMovie.gameBoard.listFish.length-1),e=AppInfo.gameMovie.gameBoard.listFish[t],e.hasInView&&!e.isFishItem&&!e.isBossMap&&e)return e}get isMe(){const e=AppInfo.gameMovie.gameBoard.myUserOnlineModel;let t=-1;return e&&(t=e.deskStation),this.basePosition==t}get lockFishID(){return this._lockFish?this._lockFish.id:0}set lockFishID(e){if(0==e){if(this.isMe);else{let e=!1;for(var t=0;t<3;t++){const i=AppInfo.gameMovie.displayController.getUserSeatByPosition(t);i&&i.compoGun.basePosition!=this.basePosition&&i.compoGun.lockFishID==this.lockFishID&&(e=!0)}e||this._lockFish&&this._lockFish.lockSprite&&(this._lockFish.lockSprite.visible=!1)}this._lockFish=null,this.compoLockLine&&(this.compoLockLine.lockFishID=0)}else{for(t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(AppInfo.gameMovie.gameBoard.listFish[t].id==e){this._lockFish=AppInfo.gameMovie.gameBoard.listFish[t];break}this._lockFish&&(this._lockFish.lockSprite&&(this._lockFish.lockSprite.visible=!0),null==this.compoLockLine&&(this.compoLockLine=new r.a(this._lockFish,this._bulletFirePoint.position),this.compoLockLine.x=this.movie.x,this.compoLockLine.y=this.movie.y-this.movie.height,this.movie.addChild(this.compoLockLine),this.compoLockLine.updateTransform()),this.compoLockLine.lockFishID=this._lockFish.id)}}}f.STUNE=0,f.FREEZE=1,f.LIGHTNING=2,f.ParticleEffectDragon={art:[{framerate:20,loop:!0,textures:["lightProgress.png"]},{framerate:20,loop:!0,textures:["lightProgress.png"]}],alpha:{start:1,end:1},scale:{start:.5,end:.5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:50,end:50,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:350},lifetime:{min:.1,max:1},blendMode:"normal",frequency:.1,emitterLifetime:1,maxParticles:5,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},f.EFFECT_PARTICLE={art:[{framerate:1,loop:!0,textures:["lightProgress.png"]}],alpha:{start:1,end:0},scale:{start:2,end:.4,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:100,end:10,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:100,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:2,max:1.8},blendMode:"screen",frequency:.05,emitterLifetime:1,maxParticles:100,pos:{x:.5,y:.5},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:150}},t.a=f}).call(this,i(3))},function(e,t,i){"use strict";var s=i(6),o=i(70);class n extends s.a{constructor(e,t,i,s){super(),this.listFishDie=null,this._lockFish=0,this.id=0,this._velocity=17,this._baseRotation=null,this.movie=null,this.power=10,this.type=null,this.basePosition=null,this._velocity=PreLoaderConfig.TimeBulletMove,this.basePosition=t,this.power=i,this.type=e,this.lockFishID=s||0,this._repeat=0,this.listFishDie=[],this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.listCollistion=[],this.movie=new PIXI.spine.Spine(ResourceManager.Atlas.laserBones.textures.laserBones.spineData),this.movie.state.setAnimation(0,"animation",!1),this.movie.state.timeScale=1,this.movie.y=-100,this.movie.state.onComplete=this.onCompleteMovie.bind(this),this.movie.interactive=!1,this.movie.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this.movie),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,[500,500,1500,500,1500,1500,500,1500],o.a.TYPE_COLLISION.BULLET,this.movie))}dispose(){super.dispose(),this._nodeTree&&this._nodeTree.release(),this.isMe&&AppInfo.gameMovie.displayController.myBaseStation.resetSkill(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie),this.visible=!1,this.movie.visible=!1}onTriggerCollide(e){const t=e.getTarget().id;this.listFishDie.includes(t)||this.listFishDie.push(t)}run(){AppInfo.gameMovie.displayController.lockIconShop&&this.isMe&&AppInfo.gameMovie.displayController.lockIconShop(!0)}fireTo(e,t){let i;AppInfo.gameMovie.displayController.lockIconShop&&AppInfo.gameMovie.displayController.lockIconShop(!0),i="number"==typeof e&&"number"==typeof t?{x:e,y:t}:e,this.fireFollowAngle(Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),i)+Math.PI/2)}fireFollowAngle(e){this.rotation=e,this._baseRotation=this.rotation,this.movie.gotoAndPlay(0)}moveFollowAngle(e){const t=Math.cos(this.rotation-Math.PI/2)*(e/(1e3/60))*this._velocity,i=Math.sin(this.rotation-Math.PI/2)*(e/(1e3/60))*this._velocity;this.x+=t,this.y+=i,this.x<0?(this.x=0,this.rotation=-1*this.rotation,this.lockFishID=0):this.x>AppInfo.appRealWidth&&(this.x=AppInfo.appRealWidth,this.rotation=-1*this.rotation,this.lockFishID=0),this.y<0?(this.y=0,this.rotation=(this.rotation>0?1:-1)*Math.PI-this.rotation,this.lockFishID=0):this.y>AppInfo.appRealHeight&&(this.y=AppInfo.appRealHeight,this.rotation=(this.rotation>0?1:-1)*Math.PI-this.rotation,this.lockFishID=0),this._lockFish&&(this.rotation=Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),this._lockFish.isLock?this._lockFish.lockSprite.getGlobalPosition():this._lockFish.position)+Math.PI/2)}onCompleteMovie(){AppInfo.gameMovie.displayController.requestSkillCatchFish(this,this.listFishDie),this.onFinishEffectSkill&&this.onFinishEffectSkill(),this.dispose()}get isMe(){return this.basePosition==AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation}get lockFishID(){return this._lockFish?this._lockFish.id:0}set lockFishID(e){if(0==e)this._lockFish=null;else for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(AppInfo.gameMovie.gameBoard.listFish[t].id==e){this._lockFish=AppInfo.gameMovie.gameBoard.listFish[t];break}}}t.a=n},function(e,t,i){"use strict";var s=i(6),o=i(70);class n extends s.a{constructor(e,t,i,s){super(),this.hasCheckCollision=!1,this.hasSonicOutOfView=!1,this.totalTime=0,this.timeEffect=2e3,this.intervalID=-1,this.timeBetweenSonic=50,this._lastTime=performance.now(),this.onEnterFrameBinded=null,this.listSonic=null,this.timeLine=null,this._lockFish=0,this.id=0,this._velocity=17,this._baseRotation=null,this.movie=null,this.power=10,this.type=null,this.basePosition=null,this.basePosition=t,this.power=i,this.type=e,this.lockFishID=s||0,this.listSonic=[],this.listFishDie=[],this.onEnterFrameBinded=this.onEnterFrame.bind(this),this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,[-50,0,50,0,250,-1500,-250,-1500],o.a.TYPE_COLLISION.BULLET))}dispose(){super.dispose(),AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrameBinded),clearInterval(this.intervalID),this._nodeTree&&this._nodeTree.release(),this.isMe&&AppInfo.gameMovie.displayController.myBaseStation.resetSkill();for(const e of this.listSonic)e.parent&&e.parent.removeChild(e),e.destroy();this.listSonic=[],this.parent&&this.parent.removeChild(this),this.destroy()}onTriggerCollide(e){const t=e.getTarget().id;this.listFishDie.includes(t)||this.listFishDie.push(t)}onEnterFrame(){const e=performance.now()-this._lastTime;this._lastTime=performance.now(),this.totalTime+=e;for(let t=0;t<this.listSonic.length;t++){this.moveSonicFollowAngle(this.listSonic[t],e);let i=!1;(this.listSonic[t].x<0||this.listSonic[t].x>AppInfo.appRealWidth)&&(i=!0),(this.listSonic[t].y<0||this.listSonic[t].y>AppInfo.appRealHeight)&&(i=!0),i&&(this.hasSonicOutOfView=!0,this.destroySonic(this.listSonic[t]),t-=1)}this.totalTime>this.timeEffect&&this.stopEffect()}stopEffect(){AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrameBinded),clearInterval(this.intervalID),AppInfo.gameMovie.displayController.requestSkillCatchFish(this,this.listFishDie),this.dispose(),this.onFinishEffectSkill&&this.onFinishEffectSkill()}generateSonic(){const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"]);e.interactive=!1,e.hitArea=PIXI.Rectangle.EMPTY,e.anchor.set(.5,.5),e.rotation=this.rotation,e.x=this.x,e.y=this.y,e.scaleX=.1,e.scaleY=.1,AppInfo.gameMovie.layerFish.addChild(e),this.listSonic.push(e)}destroySonic(e){this.listSonic.splice(this.listSonic.indexOf(e),1),e.parent&&e.parent.removeChild(e),e.destroy()}moveSonicFollowAngle(e,t){const i=Math.cos(this.rotation-Math.PI/2)*(t/(1e3/60))*this._velocity,s=Math.sin(this.rotation-Math.PI/2)*(t/(1e3/60))*this._velocity;e.x+=i,e.y+=s,e.scaleX+=t/900,e.scaleY+=t/900}run(e,t,i){AppInfo.gameMovie.displayController.lockIconShop&&this.isMe&&AppInfo.gameMovie.displayController.lockIconShop(!0),this.generateSonic(),this._lastTime=performance.now(),this.intervalID=setInterval(this.generateSonic.bind(this),this.timeBetweenSonic),AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrameBinded)}CompleteMoveToPoint(e){AppInfo.gameMovie.layerFish.removeChild(e),e.destroy(),e=null}onCompleteFire(){this.dispose()}fireTo(e,t){let i;i="number"==typeof e&&"number"==typeof t?{x:e,y:t}:e,this.fireFollowAngle(Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),i)+Math.PI/2)}fireFollowAngle(e){this.rotation=e,this._baseRotation=this.rotation,1!=this.type&&4!=this.type||this.movie.gotoAndPlay(0)}moveFollowAngle(e){if(null!=this.parent){const t=Math.cos(this.rotation-Math.PI/2)*(e/(1e3/60))*this._velocity,i=Math.sin(this.rotation-Math.PI/2)*(e/(1e3/60))*this._velocity;this.x+=t,this.y+=i,this.x<0?(this.x=0,this.rotation=-1*this.rotation,this.lockFishID=0,this.dispose()):this.x>AppInfo.appRealWidth&&(this.x=AppInfo.appRealWidth,this.rotation=-1*this.rotation,this.lockFishID=0,this.dispose()),this.y<0?(this.y=0,this.rotation=(this.rotation>0?1:-1)*Math.PI-this.rotation,this.lockFishID=0,this.dispose()):this.y>AppInfo.appRealHeight&&(this.y=AppInfo.appRealHeight,this.rotation=(this.rotation>0?1:-1)*Math.PI-this.rotation,this.lockFishID=0,this.dispose())}}explode(){TweenMax.killTweensOf(this),1==this.type||4==this.type?(this.movie.textures=ResourceManager.Atlas.AtlasGun.textures.bullet0explode,this.movie.gotoAndStop(0)):this.movie.texture=ResourceManager.Atlas.AtlasGun.textures.bullet0explode[0],this.movie.anchor.set(.5,.5),this.movie.scale.set(0,0),TweenMax.to(this.movie,.3,{ease:Back.easeOut.config(3),scaleX:.6,scaleY:.6,onComplete:this.onExplodeComplete.bind(this)})}onExplodeComplete(){this.dispose()}get isMe(){return this.basePosition==AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation}get lockFishID(){return this._lockFish?this._lockFish.id:0}set lockFishID(e){if(0==e)this._lockFish=null;else for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(AppInfo.gameMovie.gameBoard.listFish[t].id==e){this._lockFish=AppInfo.gameMovie.gameBoard.listFish[t];break}}}t.a=n},function(e,t,i){"use strict";var s=i(6),o=(i(74),i(70));class n extends s.a{constructor(e,t,i,s){super(),this.listFishDie=[],this._lockFish=0,this.id=0,this._velocity=17,this._baseRotation=null,this.movie=null,this.power=10,this.type=null,this.basePosition=null,this._velocity=PreLoaderConfig.TimeBulletMove,this.basePosition=t,this.power=i,this.type=e,this.lockFishID=s||0,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.listFishDie=[],(1==this.type||4==this.type||this.type>200)&&(this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"]),this.movie.animationSpeed=1/8),this.movie.interactive=!1,this.movie.hitArea=PIXI.Rectangle.EMPTY,this.movie.anchor.set(.5),this.addChild(this.movie),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY)}dispose(){super.dispose(),this.isMe&&AppInfo.gameMovie.displayController.myBaseStation.resetSkill(),this._nodeTree&&this._nodeTree.release(),1!=this.type&&4!=this.type||this.movie.gotoAndStop(0),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie),this.removeChild(this.movie),this.movie.destroy(),this.parent&&this.parent.removeChild(this),this.destroy()}onTriggerCollide(e){const t=e.getTarget().id;this.listFishDie.includes(t)||this.listFishDie.push(t)}run(e,t){TweenMax.to(this,.4,{x:e,y:t,ease:Linear.easeNone,onComplete:this.explode.bind(this)}),AppInfo.gameMovie.displayController.lockIconShop&&this.isMe&&AppInfo.gameMovie.displayController.lockIconShop(!0)}fireTo(e,t){let i;i="number"==typeof e&&"number"==typeof t?{x:e,y:t}:e,this.fireFollowAngle(Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),i)+Math.PI/2)}fireFollowAngle(e){this.rotation=e,this._baseRotation=this.rotation,this.movie.gotoAndPlay(0)}moveFollowAngle(e){const t=Math.cos(this.rotation-Math.PI/2)*(e/(1e3/60))*this._velocity,i=Math.sin(this.rotation-Math.PI/2)*(e/(1e3/60))*this._velocity;this.x+=t,this.y+=i,this.x<0?(this.x=0,this.rotation=-1*this.rotation,this.lockFishID=0):this.x>AppInfo.appRealWidth&&(this.x=AppInfo.appRealWidth,this.rotation=-1*this.rotation,this.lockFishID=0),this.y<0?(this.y=0,this.rotation=(this.rotation>0?1:-1)*Math.PI-this.rotation,this.lockFishID=0):this.y>AppInfo.appRealHeight&&(this.y=AppInfo.appRealHeight,this.rotation=(this.rotation>0?1:-1)*Math.PI-this.rotation,this.lockFishID=0),this._lockFish&&(this.rotation=Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),this._lockFish.isLock?this._lockFish.lockSprite.getGlobalPosition():this._lockFish.position)+Math.PI/2)}explode(){this._nodeTree=AppInfo.gameMovie.collisionManager.addCircle(this,360,o.a.TYPE_COLLISION.BULLET,this.movie),TweenMax.killTweensOf(this),1==this.type||4==this.type||this.type>200?(this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures.bullet203explode,this.movie.animationSpeed=.03*this.movie.totalFrames,this.movie.gotoAndPlay(0),this.movie.loop=!1,this.movie.onComplete=this.onExplodeComplete.bind(this)):this.movie.texture=ResourceManager.Atlas["AtlasGun"+this.type].textures.bullet203explode[0],this.movie.anchor.set(.5),AppInfo.gameMovie.strongVibration()}onExplodeComplete(){AppInfo.gameMovie.displayController.requestSkillCatchFish(this,this.listFishDie),this.onFinishEffectSkill&&this.onFinishEffectSkill(),this.dispose()}get isMe(){return this.basePosition==AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation}get lockFishID(){return this._lockFish?this._lockFish.id:0}set lockFishID(e){if(0==e)this._lockFish=null;else for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(AppInfo.gameMovie.gameBoard.listFish[t].id==e){this._lockFish=AppInfo.gameMovie.gameBoard.listFish[t];break}}}n.particleFire={alpha:{start:1,end:0},scale:{start:.3,end:1,minimumScaleMultiplier:1},color:{start:"#fff899",end:"#ffffff"},speed:{start:500,end:0,minimumSpeedMultiplier:.5},acceleration:{x:0,y:0},maxSpeed:10,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:50},lifetime:{min:.2,max:.55},blendMode:"normal",ease:[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],frequency:.001,emitterLifetime:.3,maxParticles:100,pos:{x:0,y:0},addAtBack:!0,spawnType:"ring",spawnCircle:{x:0,y:0,r:50,minR:50}},n.particleGlow={alpha:{start:1,end:0},scale:{start:.001,end:.6,minimumScaleMultiplier:1},color:{start:"#ff0000",end:"#ffff00"},speed:{start:1,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:50},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.35,max:.5},blendMode:"normal",ease:[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],frequency:.001,emitterLifetime:.1,maxParticles:10,pos:{x:0,y:0},addAtBack:!0,spawnType:"point"},n.particleSmoke={alpha:{start:.61,end:0},scale:{start:.8,end:.6,minimumScaleMultiplier:3},color:{start:"#ff0000",end:"#424242"},speed:{start:100,end:10,minimumSpeedMultiplier:5},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:10},lifetime:{min:.5,max:1},blendMode:"normal",ease:[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],frequency:.001,emitterLifetime:.3,maxParticles:50,pos:{x:0,y:0},addAtBack:!0,spawnType:"ring",spawnCircle:{x:0,y:0,r:0,minR:0}},t.a=n},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,{x:t,y:i}){super(),this._lockFish=null,this.listBall=[],this.ball=null,this._lockFish=e,this.position.x=t,this.position.y=i,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.listBall=[])}dispose(){super.dispose();for(let e=0;e<this.listBall.length;e++)this.removeChild(this.listBall[e]),this.listBall[e].destroy();this.listBall=[],this.parent&&this.parent.removeChild(this),this.destroy()}updateBall(e){if(this._lockFish){let e;const t=Utilities.Number.distanceBetweenTwoPoint(this.getGlobalPosition(),this._lockFish.isLock?this._lockFish.lockSprite.getGlobalPosition():this._lockFish.position),i=Math.floor(t/100)+1;if(i>this.listBall.length)for(e=this.listBall.length;e<i;e++){const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasGun.textures.LineLock);e.interactive=!1,e.hitArea=PIXI.Rectangle.EMPTY,e.anchor.set(.5,.5),e.x=0,this.addChild(e),this.listBall.push(e)}else if(i<this.listBall.length)for(e=this.listBall.length-1;e>i;e--)this.removeChild(this.listBall[e]),this.listBall.pop();this.listBall.length;for(e=0;e<this.listBall.length;e++){if(this.listBall[e].y=-100*e,Utilities.Number.distanceBetweenTwoPoint(this.getGlobalPosition(),this.listBall[e].getGlobalPosition())>=t){this.removeChild(this.listBall[e]),this.listBall.pop();break}}}}get lockFishID(){return this._lockFish?this._lockFish.id:0}set lockFishID(e){if(0==e){let e;for(this._lockFish=null,this.visible=!1;this.numChildren>0;)e=this.removeChildAt(0),e.destroy();this.listBall=[]}else for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(AppInfo.gameMovie.gameBoard.listFish[t].id==e){this._lockFish=AppInfo.gameMovie.gameBoard.listFish[t],this.visible=!0;break}}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t,i,s){super(),this.txtCountDown=null,this.txtNoteGun=null,this.bg=null,this.init(e,t,i,s)}init(e,t,i,s){if(super.init(),this._isDisposed){let s;if(this._isDisposed=!1,null==this.txtNoteGun&&(s={fontFamily:"Tahoma",fontWeight:"bold",fontSize:"18px",fill:i,align:"center",stroke:0,strokeThickness:2},this.txtNoteGun=new PIXI.Text(e,s),this.txtNoteGun.anchor.set(.5),this.addChild(this.txtNoteGun)),null==this.bg){const e=new PIXI.Graphics.RoundedRectComplex(0,0,this.txtNoteGun.width+20,this.txtNoteGun.height+20,15,15,15,15,t,.3,2,i,1);this.bg=new PIXI.Sprite(e.generateCanvasTexture()),this.bg.anchor.set(.5),this.addChildAt(this.bg,0)}}}updateBulletText(e){}show(){this.alpha=0,this.visible=!0,this.updateTransform(),TweenMax.killTweensOf(this),TweenMax.to(this,1,{alpha:1,ease:Expo.easeOut,onComplete:this.hide.bind(this)})}hide(){TweenMax.killTweensOf(this),TweenMax.to(this,1,{alpha:0,delay:3,ease:Expo.easeIn,onComplete:()=>{this.visible=!1}})}dispose(){super.dispose(),TweenMax.killTweensOf(this),this.bg&&(this.bg.destroy(),this.bg=null),this.txtNoteGun&&(this.txtNoteGun.destroy(),this.txtNoteGun=null),this.destroy()}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t){super(),this.emitter=null,this.callbackEndEffect=null,this._particleContainer=null,this._timeLast=null,this.autoDispose=!1,this._emitterLife=0,this._config=e,t?this._art=t:e.art&&(this._art=e.art),this.init()}init(){this._particleContainer=new PIXI.particles.ParticleContainer(1e3,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0},500),this.emitter=new PIXI.particles.Emitter(this._particleContainer,this._art,this._config),this.interactive=this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this._particleContainer)}playParticle(e,t){this.emitter&&(this.emitter.emit=!0,this.emitter.resetPositionTracking(),this.emitter.update(0),this.emitter.updateOwnerPos(0,0),this.emitter.updateOwnerPos(e,t),this._timeLast=performance.now(),this._particleContainer.visible=!0,TweenMax.to(this,.1,{repeat:-1,onUpdate:this._onUpdate,onUpdateScope:this}))}stop(){this._particleContainer.visible=!1,this.emitter.updateOwnerPos(0,0),this.emitter.update(0),this.emitter.resetPositionTracking(),this.emitter.ownerPos.x=0,this.emitter.ownerPos.y=0;for(let e=0;e<this._particleContainer.children.length;e++)this._particleContainer.children[e].x=0,this._particleContainer.children[e].y=0;TweenMax.killTweensOf(this)}_onUpdate(){if(this.emitter){const e=(performance.now()-this._timeLast)/1e3;this._timeLast=performance.now(),this._emitterLife+=e,this.emitter.update(e),this.emitter.emitterLifetime>0&&(this.emitter.maxLifetime,this._emitterLife)}}dispose(){super.dispose(),TweenMax.killTweensOf(this),this.parent&&this.parent.removeChild(this),this._emitter&&(this._emitter.destroy(),this._emitter=null),this._emitterContainer&&(this.removeChild(this._emitterContainer),this._emitterContainer.destroy(),this._emitterContainer=null)}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(),this.haloLight=null,this.haloDark=null,this.arrow=null,this.init(e)}init(e){super.init(),this._isDisposed&&(this._isDisposed=!1,null==this.arrow&&(this.arrow=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBaseStation.textures.MyBaseArrow),this.arrow.animationSpeed=.5,this.arrow.anchor.set(.5),this.arrow.y=-140),null==this.haloDark&&(this.haloDark=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.HaloDark),this.haloDark.anchor.set(.5)),null==this.haloLight&&(this.haloLight=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.HaloLight),this.haloLight.anchor.set(.5)),this.arrow.interactive=!1,this.haloDark.interactive=!1,this.haloLight.interactive=!1,this.arrow.hitArea=PIXI.Rectangle.EMPTY,this.haloDark.hitArea=PIXI.Rectangle.EMPTY,this.haloLight.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this.haloDark,this.haloLight,this.arrow))}dispose(){super.dispose(),TweenMax.killTweensOf(this.arrow),TweenMax.killTweensOf(this.haloDark),TweenMax.killTweensOf(this.haloLight),this.parent&&this.parent.removeChild(this),this.arrow.destroy(),this.haloDark.destroy(),this.haloLight.destroy(),this.arrow=null,this.haloDark=null,this.haloLight=null,this.destroy()}show(){this.visible=!0,this.arrow.gotoAndPlay(0),TweenMax.to(this.arrow,.5,{y:-130,yoyo:!0,repeat:-1}),TweenMax.to(this.haloDark,3,{rotation:2*-Math.PI,repeat:-1,ease:Power0.easeNone}),TweenMax.to(this.haloLight,3,{rotation:2*Math.PI,repeat:-1,ease:Power0.easeNone}),this.haloLight.alpha=0,TweenMax.to(this.haloLight,.5,{alpha:1,repeat:-1,yoyo:!0,ease:Power0.easeNone})}}t.a=o},function(e,t,i){"use strict";(function(e){const i=PIXI.Sprite;t.a=class extends i{constructor(e){super(e),this.overlay=null,this.nameFaction=null,this.nameGuild=null,this.background=null,this.init()}init(){const t={fontFamily:"Myriad Pro",fontWeight:"bold",fontStyle:"italic",fontSize:"20px",fill:["#ffffcc","#ffcd04","#ffffcc"],fillGradientStops:[.12,.5,.8],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!1,stroke:"#7c0000",align:"center",strokeThickness:4,lineJoin:"round",wordWrap:!0,wordWrapWidth:150};this.anchor.set(.5),null==this.nameGuild&&(this.nameGuild=new PIXI.Text(PreLoaderConfig.ListTextConfig.Guild,t),this.nameGuild.anchor.set(.5)),null==this.nameFaction&&(this.nameFaction=new PIXI.Text(PreLoaderConfig.ListTextConfig.Faction,t),this.nameFaction.anchor.set(.5)),this.interactive=!0,this.buttonMode=!0,this.hitArea=new PIXI.Rectangle(-this.width/2,-this.height/2,this.width,this.height),e.isMobilePage||(this.mouseover=this.onMouseHoverIcon.bind(this),this.mouseout=this.onMouseOutIcon.bind(this),this.hitArea=new PIXI.Rectangle(-this.width/2,-this.height/2,this.width,this.height))}onMouseHoverIcon(){this.showInfo()}onMouseOutIcon(){this.hideInfo()}onMouseClickIcon(){this.isShow?this.hideInfo():this.showInfo()}showInfo(){this.isShow=!0,this.overlay&&(this.overlay.visible=!0),TweenMax.to(this.background,.5,{startAt:{alpha:0},alpha:1})}hideInfo(){this.isShow=!1,this.overlay&&(this.overlay.visible=!1),TweenMax.to(this.background,.5,{startAt:{alpha:1},alpha:0})}updateInfoGuild(e,t){if(e){let i,s;if(this.nameGuild.text=PreLoaderConfig.ListTextConfig.Guild+" "+Utilities.Base64._utf8_decode(e.guildName),this.nameFaction.text=PreLoaderConfig.ListTextConfig.Faction+" "+(1==e.nameFaction?PreLoaderConfig.ListTextConfig.Navy:PreLoaderConfig.ListTextConfig.Pirate),1===e.factionID?(this.texture=ResourceManager.Atlas.AtlasPopupMyInfo.textures.navy,i=9555444,s=2764415):2===e.factionID&&(this.texture=ResourceManager.Atlas.AtlasPopupMyInfo.textures.pirate,i=16028049,s=8333866),null==this.background){const e=10,o=this.nameGuild.height+this.nameFaction.y+this.nameFaction.height+e,n=Math.max(this.nameFaction.width,this.nameGuild.width)+50,a=new PIXI.Graphics.RoundedRectComplex(0,0,n,o,15,15,15,15,i,.8,2,s,1);this.background=new PIXI.Sprite(a.generateCanvasTexture()),this.background.anchor.set(.5),this.background.interactive=!1,this.addChild(this.background),this.background.addChild(this.nameGuild),this.background.addChild(this.nameFaction),this.nameGuild.y=-this.background.height/2+this.nameGuild.height/2+e,this.nameFaction.y=this.nameGuild.y+this.nameGuild.height/2+this.nameFaction.height/2,this.background.y=2*-this.width,0==t||1==t||2!=t&&3!=t||(this.background.rotation=Utilities.toRad(180)),this.showInfo(),TweenMax.to(this,3,{onComplete:this.hideInfo.bind(this)})}if(this.overlay){this.overlay.visible=!1;const e=this.toLocal(this.position,AppInfo.gameMovie.layerFish);0==t||1==t?(e.x-=this.position.x,e.y-=this.position.y,this.overlay.x=e.x,this.overlay.y=e.y):2!=t&&3!=t||(this.overlay.rotation=Utilities.toRad(180),e.x+=this.position.x,e.y+=this.position.y,this.overlay.x=e.x,this.overlay.y=e.y)}}}}}).call(this,i(3))},function(e,t,i){"use strict";(function(e){var s=i(6);class o extends s.a{constructor(){super(),this.textInfo=null,this.background=null,this.txtValue=null,this.bg=null,this.iconGem=null,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null===this.iconGem&&(this.iconGem=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.iconGem)),null===this.bg&&(this.bg=new PIXI.Sprite(ResourceManager.Atlas.AtlasBaseStation.textures.gemBase)),null===this.txtValue){const e={fontFamily:AppInfo.isRunInApp?PreLoaderConfig.DefaultMobileFont:"Open Sans",fontWeight:"bold",fontSize:"14px",fill:16580352,align:"left"};this.txtValue=new PIXI.Text("0",e),this.txtValue.valueTween=0}if(null===this.background){const e=new PIXI.Graphics.RoundedRectComplex(0,0,150,50,15,15,15,15,0,.5,2,0,.1);this.background=new PIXI.Sprite(e.generateCanvasTexture())}if(null===this.textInfo){const e={fontFamily:AppInfo.isRunInApp?PreLoaderConfig.DefaultMobileFont:"Open Sans",fontWeight:"bold",fontSize:"14px",fill:16580352,align:"center",wordWrap:!0,wordWrapWidth:this.background.width};this.textInfo=new PIXI.Text(PreLoaderConfig.MessagesConfig.TutorialUseGem,e),this.textInfo.anchor.set(.5),this.background.addChild(this.textInfo)}this.bg.anchor.set(.5),this.txtValue.anchor.set(.5),this.iconGem.anchor.set(.5),this.addChild(this.bg,this.iconGem,this.txtValue),this.setupPosition(),this.hideInfo()}}initEvent(){this.interactive=!0,this.buttonMode=!0,e.isMobilePage?(this.mouseclick=this.onMouseClickIcon.bind(this),this.hitArea=new PIXI.Rectangle(-this.bg.width,-this.bg.height,2*this.bg.width,2*this.bg.height),null==this.overlay&&(this.overlay=PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,16777215,.5),this.overlay.interactive=!0,this.overlay.visible=!1,this.overlay.mouseclick=this.onMouseClickIcon.bind(this),AppInfo.gameMovie.layerEffect.addChild(this.overlay))):(this.mouseover=this.onMouseHoverIcon.bind(this),this.mouseout=this.onMouseOutIcon.bind(this),this.hitArea=new PIXI.Rectangle(0,0,this.bg.width,this.bg.height)),this.background.anchor.set(.5),this.addChild(this.background)}setupPosition(){this.iconGem.position.set(0,0),this.txtValue.position.set(this.bg.width/2,0),this.bg.position.set(this.bg.width/2,0),this.background.position.set(60,-60)}setDown(){this.iconGem.rotation=Utilities.toRad(180),this.txtValue.rotation=Utilities.toRad(180),this.background.rotation=Utilities.toRad(180)}updateValue(e){TweenMax.killTweensOf(this.txtValue),TweenMax.to(this.txtValue,.5,{valueTween:e,onUpdate:()=>{this.txtValue.text=Utilities.Coin(Math.floor(this.txtValue.valueTween))}})}onMouseHoverIcon(){this.showInfo()}onMouseOutIcon(){this.hideInfo()}onMouseClickIcon(){this.isShow?this.hideInfo():this.showInfo()}showInfo(){this.isShow=!0,this.overlay&&(this.overlay.visible=!0),TweenMax.to(this.background,.5,{startAt:{alpha:0},alpha:1})}hideInfo(){this.isShow=!1,this.overlay&&(this.overlay.visible=!1),TweenMax.to(this.background,.5,{startAt:{alpha:1},alpha:0})}dispose(){super.dispose(),this.iconGem&&(this.iconGem.destroy(),this.iconGem=null),TweenMax.killTweensOf(this.txtValue),this.txtValue&&(this.txtValue.destroy(),this.txtValue=null),this.bg&&(this.bg.destroy(),this.bg=null),this.background&&(this.background.destroy(),this.background=null),this.overlay&&(this.overlay.parent.removeChild(this.overlay),this.overlay.destroy(),this.overlay=null)}}t.a=o}).call(this,i(3))},function(e,t,i){"use strict";var s=i(6),o=(i(4),i(5));class n extends s.a{constructor(){super(),this.btnMain=null,this.bg=null,this.containerListItem=null,this.tweenBG=null,this.overlay=null,this.seasonNoel=null,this.isShow=!1,this.listIconEmotion=[],this.init()}init(){if(super.init(),this._isDisposed&&(this._isDisposed=!1,null===this.overlay&&(this.overlay=new PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,16777215,0),this.overlay.visible=!0,this.overlay.interactive=!0,this.overlay.mouseclick=this.showIconEmotion.bind(this),this.addChild(this.overlay)),null===this.btnMain&&(this.btnMain=new o.a(ResourceManager.Atlas.AtlasCompoChat.textures.btnMainChatEmotion),PreLoaderConfig.SeasonEvent.EnableEvent&&PreLoaderConfig.SeasonEvent.EventNoel&&null===this.seasonNoel&&(this.seasonNoel=new PIXI.Sprite(ResourceManager.Atlas.AtlasBackgroundHoYeahNoel.textures.topIconChat[Utilities.Number.randRange(0,2)]),this.seasonNoel.x=this.btnMain.width/2,this.seasonNoel.y=20,this.btnMain.addChild(this.seasonNoel),this.seasonNoel.anchor.set(.5,1)),this.btnMain.mouseclick=this.showIconEmotion.bind(this),this.addChild(this.btnMain)),null===this.containerListItem&&(this.containerListItem=new PIXI.Container,this.addChild(this.containerListItem)),null===this.bg)){const e=PreLoaderConfig.CompoChat.radius;let t;this.bg=new PIXI.Sprite,this.containerListItem.addChild(this.bg);const i=-30,s=PreLoaderConfig.CompoChat.itemPerLine;let n=0,a=0;for(let e=0;e<ResourceManager.Atlas.AtlasCompoChat.textures.emotion.length;e++)t=new o.a(ResourceManager.Atlas.AtlasCompoChat.textures.emotion[e]),t.useTween=t.useTweenDown=!1,t.x=70*Math.floor(e%s)+i+t.width/2,t.y=70*Math.floor(e/s)+i+t.height/2,t.id=e,t.mouseclick=this.onIconClick.bind(this),t.x>n&&(n=t.x),t.y>a&&(a=t.y),this.bg.addChild(t),this.listIconEmotion.push(t);const h=this.listIconEmotion[0],l=new PIXI.Graphics.RoundedRectComplex(0,0,n+h.width,a+h.height,e,e,e,e,1121580,.8,2,2218463,1);this.bg.texture=l.generateCanvasTexture(),this.containerListItem.position.set(this.btnMain.width,0),this.containerListItem.pivot.y=this.containerListItem.height,this.containerListItem.oriW=this.containerListItem.width,this.containerListItem.oriH=this.containerListItem.height,this.containerListItem.scale.set(0),this.tweenBG=new TimelineMax({onReverseComplete:()=>{this.containerListItem.visible=!1}}),this.tweenBG.insert(TweenMax.to(this.containerListItem,.3,{scaleX:1,scaleY:1,ease:Back.easeOut})),this.showIconEmotion()}}onIconClick({target:e}){AppInfo.preLoader.requestController.userChat(2,e.id+""),AppInfo.gameMovie.displayController.myBaseStation.showEmotion(e.id+""),this.showIconEmotion()}showIconEmotion(){this.overlay.visible=this.isShow,this.isShow?(this.containerListItem.visible=!0,this.tweenBG.play()):this.tweenBG.reverse(),this.isShow=!this.isShow}setUpByBaseStation(e){setTimeout(()=>{switch(e){case 0:var t=this.toLocal({x:0,y:0},AppInfo.gameMovie.layerEffect);this.overlay.position.set(t.x,t.y);break;case 1:t=this.toLocal({x:0,y:0},AppInfo.gameMovie.layerEffect);this.containerListItem.pivot.x=this.containerListItem.oriW,this.containerListItem.position.set(0,0),this.overlay.position.set(t.x,t.y);break;case 2:this.rotation=Utilities.toRad(180),this.containerListItem.pivot.x=this.containerListItem.oriW,this.containerListItem.pivot.y=0,this.containerListItem.position.set(0,this.btnMain.height);t=this.toLocal({x:0,y:0},AppInfo.gameMovie.layerEffect);this.overlay.position.set(t.x,t.y);break;case 3:this.rotation=Utilities.toRad(180),this.containerListItem.pivot.x=0,this.containerListItem.pivot.y=0,this.containerListItem.position.set(this.btnMain.height,this.btnMain.height);t=this.toLocal({x:-0,y:0},AppInfo.gameMovie.layerEffect);this.overlay.position.set(t.x,t.y)}},300)}dispose(){let e;for(;this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy(),e=null}catch(e){}}this.tweenBG&&(this.tweenBG.kill(),this.tweenBG=null),super.dispose()}}t.a=n},function(e,t,i){"use strict";(function(e){var s=i(6);class o extends s.a{constructor(e,t,i,s,o){super(),this.upTexture=e,this.hoverTexture=t||e,this.downTexture=i||e,this.disableTexture=s||e,this.name=o||"",this.movie=null,this.callBackMouseClick=null,this.callBackMouseHover=null,this.callBackMouseOut=null,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,!(null==this.movie&&null!=this.upTexture&&null!=this.upTexture&&this.upTexture.length>0))return void Utilities.error("upTexture not empty or null");this.movie=new PIXI.extras.AnimatedSprite(this.upTexture),this.addChild(this.movie),this.movie.interactive=!0,this.movie.buttonMode=!0,this.movie.mouseover=this.onMouseOver.bind(this),this.movie.mouseout=this.onMouseOut.bind(this),this.movie.mousedown=this.onMouseDown.bind(this),this.movie.mouseup=this.onMouseUp.bind(this),this.movie.mouseupoutside=this.onMouseUp.bind(this),this.movie.mouseclick=this.onMouseClick.bind(this),this.movie.gotoAndPlay(0),this.movie.animationSpeed=.1}}onMouseOver({currentTarget:e,target:t}){this.callBackMouseHover&&"function"==typeof this.callBackMouseHover&&this.callBackMouseHover(),this.movie.textures=this.hoverTexture,this.movie.gotoAndPlay(0),TweenMax.killTweensOf(e),e.x-=Math.round(e.pivot.x),e.y-=Math.round(e.pivot.y),e.scale.x=1,e.scale.y=1,e.pivot.x=Math.round(e.width/2),e.pivot.y=Math.round(t.height/2),e.x+=Math.round(e.pivot.x),e.y+=Math.round(e.pivot.y),TweenMax.to(e,.1,{scaleX:1.1,scaleY:1.1,onComplete:function(){TweenMax.killTweensOf(this)}.bind(e)})}onMouseOut({currentTarget:e,target:t}){this.movie.textures=this.upTexture,this.movie.gotoAndPlay(0),this.callBackMouseOut&&"function"==typeof this.callBackMouseOut&&this.callBackMouseOut(),TweenMax.killTweensOf(e),TweenMax.to(e,.1,{scaleX:1,scaleY:1,onComplete:function(){TweenMax.killTweensOf(this)}.bind(t)})}onMouseDown({target:t}){this.movie.textures=this.downTexture,TweenMax.killTweensOf(this),e.isMobilePage?(t.x-=Math.round(t.pivot.x),t.y-=Math.round(t.pivot.y),t.scale.x=1,t.scale.y=1,t.pivot.x=Math.round(t.width/2),t.pivot.y=Math.round(t.height/2),t.x+=Math.round(t.pivot.x),t.y+=Math.round(t.pivot.y),TweenMax.to(t,.1,{scaleX:1.1,scaleY:1.1,ease:Power0.easeNone})):TweenMax.to(t,.1,{scaleX:.9,scaleY:.9,ease:Power0.easeNone})}onMouseUp(){this.movie.textures=this.hoverTexture,e.isMobilePage,TweenMax.to(this.movie,.1,{scaleX:1,scaleY:1,ease:Power0.easeNone})}onMouseClick(){this.callBackMouseClick&&"function"==typeof this.callBackMouseClick&&this.callBackMouseClick()}dispose(){super.dispose(),this.movie&&(this.removeChild(this.movie),this.movie.destroy(),this.movie=null)}}t.a=o}).call(this,i(3))},function(e,t,i){"use strict";var s=i(6);const o=PreLoaderConfig.PathToResource+"atlas/"+(1==PreLoaderConfig.isSupportWebP?"webP/":"png/")+"banca/emotion/",n=(PreLoaderConfig.PathToResourceSounds,/\d+$/);class a extends s.a{constructor(e){super(e),this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1)}loadResourceGameApp(e,t){const i={},s=[];let n;Utilities.String.getExtension(e+".json",i),"json"==i.extension&&(n={name:i.fileName,url:o+e+".json",onComplete:this._onLoadingResourceAtlasComplete},s.push(n));const a=new PIXI.loaders.Loader;a.reset(),a.add(s).load(this._loadGameAppAtlasComplete.bind(this,t))}_loadGameAppAtlasComplete(e){"function"==typeof e&&e()}_onLoadingResourceAtlasComplete(e){if(null==e.error){if(void 0!==e.textures){void 0===ResourceManager.Atlas[e.name]&&(Utilities.log("Atlas "+e.name+" has not been set in resource register. Begin new AtlasObject to load"),ResourceManager.Atlas[e.name]={name:e.name,url:"",textures:{},size:0});const t=ResourceManager.Atlas[e.name];if(void 0===t)Utilities.log("Atlas "+e.name+" has not been set in resource register");else{let i,s,o;t.url=e.url;const a=[];let h;const l=Object.keys(e.textures);for(i=0;i<l.length;i++)h=l[i].substring(0,l[i].lastIndexOf(".")),s=n.test(h),o=n.exec(h),h=s?h.replace(n,""):h,void 0===t.textures[h]?(Utilities.log("Texture "+l[i].substring(0,l[i].lastIndexOf("."))+" in atlas "+e.name+" has not been set in resource register"),s?(t.textures[h]=[],e.textures[l[i]].continuousIndex=o[0],t.textures[h].push(e.textures[l[i]]),a.includes(t.textures[h])||a.push(t.textures[h])):(t.textures[h]={},t.textures[h]=e.textures[l[i]])):s?(e.textures[l[i]].continuousIndex=o[0],t.textures[h].push(e.textures[l[i]]),a.includes(t.textures[h])||a.push(t.textures[h])):t.textures[h]=e.textures[l[i]];for(i=0;i<a.length;i++)a[i].sort((e,t)=>e.continuousIndex-t.continuousIndex)}}}else Utilities.log(e.name+" with url "+e.url+" not found");e=null}dispose(){super.dispose()}}t.a=a},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(){super(),this._iconGem=null,this._light=null,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null===this._iconGem&&(this._iconGem=new PIXI.Sprite(ResourceManager.Atlas.AtlasPopupVIPLobby.textures.iconVip[0]),this._iconGem.anchor.set(.5),this.addChild(this._iconGem)),null===this._light){this._light=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures.Light),this._light.anchor.set(.5),this._light.x=-this._light.width;const e=new PIXI.Sprite(this._iconGem.texture);this._light.mask=e,this._light.mask.position.set(this._iconGem.x-this._light.width/2,this._iconGem.y-this._light.height/2),this.addChild(this._light.mask),this.addChild(this._light)}TweenMax.to(this._light,2,{x:this._iconGem.x+this._iconGem.width,ease:Power0.easeNone,repeat:-1})}}dispose(){super.dispose()}updateVipGem(e){(e=+e||0)<2&&TweenMax.killTweensOf(this._light),this._iconGem.texture=this._getTextureByLevel(+e)}_getTextureByLevel(e){let t="";switch(e){case 0:t="Bronze";break;case 1:t="Silver";break;case 2:t="Gold";break;case 3:t="Ruby";break;case 4:t="Emerald";break;case 5:t="Diamond";break;default:t="Bronze"}return ResourceManager.Atlas.AtlasPopupVIPLobby.textures.iconVip[e]}}t.a=o},function(e,t,i){"use strict";var s=i(6),o=i(77);class n extends s.a{constructor(e){super(),this._actionRange=new PIXI.Rectangle(-180,-180,300,-100),this._timerRange=null,this._rightDontMove=0,this._leftDontMove=0,this._leftEye=this._createEye(),this.addChild(this._leftEye),this._rightEye=this._createEye(),this.addChild(this._rightEye),this.basePosition=e,this.baseStation=AppInfo.gameMovie.displayController.getUserSeatByPosition(e),this.baseStation.onBulletFireSuccess=this.fireBulletSkill.bind(this),this._tweenLeft=TweenMax.to(this._leftEye,1,{ease:Power3.easeNone}),this._tweenRight=TweenMax.to(this._rightEye,1,{ease:Power3.easeNone})}_createEye(){const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEyeOcean.textures.EyeOcean);return e.animationSpeed=.5,e.anchor.set(.5),e}fireBulletSkill(e){if(this.baseStation.isMe){if(this.baseStation.gunSkillId===o.a.INFO_MEDUSA.skillID&&this.baseStation.isActivatingSkill){const t=this._addBulletSkill(e,this._leftEye),i=this._addBulletSkill(e,this._rightEye);this.baseStation.isSendMedusa&&(this.baseStation.isSendMedusa=!1,this.baseStation.bulletIdSkillMedusa=AppInfo.gameMovie.gameBoard.getNextBulletID(),t.id=this.baseStation.bulletIdSkillMedusa,t.name="compoBullet"+t.id,AppInfo.gameMovie.displayController.requestUserFire(t,AppInfo.preLoader.getGlobalPositionMouse(),e.lockFishID)),t.id=this.baseStation.bulletIdSkillMedusa,t.name="compoBullet"+t.id,i.id=this.baseStation.bulletIdSkillMedusa,i.name="compoBullet"+i.id}}else this.baseStation.isSendMedusa=!1,this._addBulletSkill(e,this._leftEye),this._addBulletSkill(e,this._rightEye)}_addBulletSkill({lockFishID:e,rotation:t,angle:i},s){const n=AppInfo.gameMovie.displayController.poolManger.getBullet(101,this.basePosition,0,e);n.movie.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures.bulletEye,n.movie.anchor.set(.5,1),n.visible=!0,n.rotation=t,n.angle=i,n.skill=!0,n.skillSkind=o.a.INFO_MEDUSA.skillKind,n.reduceQuantity=!1,AppInfo.gameMovie.layerFish.addChild(n);const a=s.getGlobalPosition();return a.x=Math.max(0,Math.min(a.x,AppInfo.appRealWidth)),a.y=Math.max(0,Math.min(a.y,AppInfo.appRealHeight)),n.x=a.x,n.y=a.y,n.updateTransform(),n.fireFollowAngle(i),n}show(){this.visible=!0,this.baseStation.isSendMedusa=!0,this._rightDontMove=5,this._leftDontMove=5,this._leftEye.play(),this._rightEye.play(),this.setTimerFreeEye()}hide(){this.visible=!1,TweenMax.killTweensOf(this._leftEye),TweenMax.killTweensOf(this._rightEye),TweenMax.killTweensOf(this),this._leftEye.stop(),this._rightEye.stop()}setTimerFreeEye(){this._leftEye.x=0,this._leftEye.y=0,this._rightEye.x=0,this._rightEye.y=0,this.freeEye(),null===this._timerRange?this._timerRange=TweenMax.to(this,2,{repeat:-1,onRepeat:this.freeEye,onRepeatScope:this}):this._timerRange.restart()}freeEye(){const e=this._actionRange.x+this._actionRange.width,t=this._actionRange.y+this._actionRange.height,i=Math.random()>.5||this._leftDontMove>1,s=Math.random()>.5||this._rightDontMove>2;let o,n,a=Utilities.Number.randRange(this._actionRange.x,this._actionRange.width),h=Utilities.Number.randRange(this._actionRange.y,this._actionRange.height);const l=e/2,r=t/2;(i||s)&&(i?s||(a=this._rightEye.x,h=this._rightEye.y):(a=this._leftEye.x,h=this._leftEye.y),o=a>=l?Utilities.Number.randRange(this._actionRange.x,l-50):Utilities.Number.randRange(a+50,e),n=h>=r?Utilities.Number.randRange(this._actionRange.y,r-50):Utilities.Number.randRange(h+50,t),1!==this.basePosition&&3!==this.basePosition||(a*=-1,o*=-1),i?(s||(a=o,h=n),this._tweenLeft.updateTo({x:a,y:h},!0),this._leftDontMove=0):this._leftDontMove++,s?(this._tweenRight.updateTo({x:o,y:n},!0),this._rightDontMove=0):this._rightDontMove++)}dispose(){this.hide(),this._leftEye&&(this._leftEye.destroy(),this._leftEye=null),this._rightEye&&(this._rightEye.destroy(),this._rightEye=null),this.basePosition=null,this.baseStation=null,this._tweenLeft=null,this._tweenRight=null,super.dispose()}}t.a=n},function(e,t,i){"use strict";var s=i(6);i(86);s.a},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(e),this._BG_TOOLTIP_LOCKFISH_TEXTURE=null,this.lblTooltip=null,this.background=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.background=new PIXI.Sprite(o.BG_TOOLTIP_LOCKFISH_TEXTURE),this.background.interactive=!1,this.background.hitArea=PIXI.Rectangle.EMPTY,this.lblTooltip=new PIXI.Text(PreLoaderConfig.MessagesConfig.LockFishToolTip,{fontFamily:"Arial",fontSize:"30px",fill:16777215}),this.lblTooltip.interactive=!1,this.lblTooltip.hitArea=PIXI.Rectangle.EMPTY,this.lblTooltip.multiline=!0,this.lblTooltip.x=(this.background.width-this.lblTooltip.width)/2,this.lblTooltip.y=(this.background.height-this.lblTooltip.height)/2,this.addChild(this.background),this.addChild(this.lblTooltip),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY)}dispose(){super.dispose(),this.removeChild(this.background),this.removeChild(this.lblTooltip),this.background.destroy(),this.lblTooltip.destroy(),this.parent&&this.parent.removeChild(this),this.destroy()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}hide(){this.visible=!1}show(){this.visible=!0}static get BG_TOOLTIP_LOCKFISH_TEXTURE(){return null==o._BG_TOOLTIP_LOCKFISH_TEXTURE&&(o._BG_TOOLTIP_LOCKFISH_TEXTURE=PIXI.Graphics.RoundedRect(0,0,475,50,25,4013373,.5).generateCanvasTexture()),o._BG_TOOLTIP_LOCKFISH_TEXTURE}}t.a=o},function(e,t,i){"use strict";var s=i(6),o=i(91),n=i(92);class a extends s.a{constructor(e,t,i){super(),this.mathID=e,this.point=i,this.arrayAratio=t.split(","),this.bgGame=null,this.textAutoChoice=null,this.timerAutoChoice=null,this.bgWin=null,this.listItem=[],this.listGroupResultRatio=[],this.itemCoinoriX=[],this.itemCoinoriY=[],this.listDelayCall=[],this.autoChoice=!1,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;const t={fontFamily:"Tahoma",fill:16773511,fontSize:40,fontWeight:"bold",dropShadow:!1,dropShadowBlur:5,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:6,stroke:7278852,strokeThickness:4};if(null===this.bgGame&&(this.bgGame=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.BackgroundBounsGame),this.bgGame.width=1280,this.bgGame.height=720,this.addChild(this.bgGame)),0===this.listItem.length){let t;for(var e=0;e<15;e++)t=new o.a(e),t.x=165*Math.floor(0)+170,t.y=(t.height-50)*Math.floor(0)+230,t.oriX=165*Math.floor(e%5)+170,t.oriY=(t.height-50)*Math.floor(e/5)+230,this.addChild(t),this.listItem.push(t),this.itemCoinoriX.push(t.oriX),this.itemCoinoriY.push(t.oriY)}if(null===this.bgWin){this.bgWin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.bgWinBonus);const e=new PIXI.Text(PreLoaderConfig.ListTextConfig.CompleteBonusgame,{fill:16777215,fontSize:40,fontWeight:"bold",dropShadow:!0,dropShadowBlur:10,dropShadowAngle:1});e.anchor.set(.2,.5),e.y=-16,e.width>305&&e.scale.set(305/e.width),this.bgWin.addChild(e),this.bgWin.anchor.set(.5),this.bgWin.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this.bgWin.visible=!1,this.bgWin.scale.set(0),this.addChild(this.bgWin)}if(0===this.listGroupResultRatio.length){let t;for(e=0;e<5;e++)t=new n.a(e),t.x=1120,t.y=(t.height+15)*e+60,this.addChild(t),Utilities.setDragItem(t),t.interactive=!1,t.buttonMode=!1,t.setRatioGroup(this.arrayAratio[e]),t.setCoin(this.arrayAratio[e]*this.point),this.listGroupResultRatio.push(t)}null===this.textAutoChoice&&(this.textAutoChoice=new PIXI.Text(PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.TextAutoChoice+": "+PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.TimeAutoChoice,t),this.textAutoChoice.anchor.set(.5),this.textAutoChoice.position.set(490,125),this.addChild(this.textAutoChoice)),null===this.timerAutoChoice&&(this.timerAutoChoice=new Utilities.Timer(1e3,PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.TimeAutoChoice,this._onUpdateTicker.bind(this),this._onCompleteTicker.bind(this)))}}_onUpdateTicker(){this.textAutoChoice.text=PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.TextAutoChoice+": "+(this.timerAutoChoice.counter-this.timerAutoChoice.counterPass)}_onCompleteTicker(){this.autoChoice=!0,this._autoChoiceItem()}_autoChoiceItem(){let e;for(let t=0;t<this.listItem.length;t++)if(-1===this.listItem[t].value)return e=this.listItem[t],void e.onClickItem()}showEffect(){this._clockAll(),TweenMax.to(this,1,{startAt:{y:-this.height},y:0,ease:Back.easeOut.config(1.2),onComplete:this.showEffectShowGame.bind(this)})}showEffectShowGame(){TweenMax.staggerTo(this.listItem,.5,{cycle:{y:this.itemCoinoriY},ease:Back.easeOut.config(1.2)},0,this.stepTwo.bind(this))}stepTwo(){TweenMax.staggerTo(this.listItem,.5,{cycle:{x:this.itemCoinoriX},ease:Back.easeOut.config(1.2),onComplete:()=>{this._unClockAll()}},.1),this.timerAutoChoice.Start()}openItemChoice(e,t,i,s,o,n){if(this.listItem[t].playEffectOpen(i-1),this.listGroupResultRatio[i-1].openCoin(i-1),this.timerAutoChoice.Stop(),this.timerAutoChoice.Start(),s){this.autoChoice=!1,this._clockAll();const t=TweenMax.delayedCall(3,this.showEffectWin,[e,o,n,i],this);this.listDelayCall.push(t)}else if(this.autoChoice){const e=TweenMax.delayedCall(.7,this._autoChoiceItem.bind(this));this.listDelayCall.push(e)}}showEffectWin(e,t,i,s){const o=AppInfo.gameMovie.displayController.getUserSeatByUserID(e);let n,a=-1;o?(n=o.iconCoin.getGlobalPosition(),o.setCoin(i),a=o.basePosition):n=new PIXI.Point(640,65),this.bgWin.visible=!0,TweenMax.to(this.bgWin,.5,{scaleX:1,scaleY:1,ease:Back.easeOut.config(1.2)});const h=this.listGroupResultRatio[s-1].textCoin,l=h.toLocal({x:AppInfo.appRealWidth/2+150,y:AppInfo.appRealHeight/2+100},this);h.style.fontSize=80,h.style.fill=[16711340,16776960,16739842],h.style.fillGradientStops=[1,.58,.1],this.textAutoChoice.text=PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.Congratulation+" "+Utilities.Coin(t)+" "+PreLoaderConfig.currency,TweenMax.to(h,.5,{x:l.x,y:l.y,ease:Back.easeOut.config(1.2),onComplete:(e=>{TweenMax.killTweensOf(e),TweenMax.to(e,.3,{scaleX:2,scaleY:2,yoyo:!0,repeat:3})}).bind(this,h)});const r=TweenMax.delayedCall(3,this.hideEffect.bind(this,n,t,a));this.listDelayCall.push(r)}hideEffect({x:e,y:t},i,s){AppInfo.gameMovie.displayController.effectFishDie(20,AppInfo.appRealWidth/2,AppInfo.appRealHeight/2,i,e,t,s),TweenMax.to(this,1,{y:-this.height,ease:Back.easeOut.config(1.2),onComplete:this.dispose.bind(this)})}_clockAll(){for(let e=0;e<this.listItem.length;e++)this.listItem[e].iconOpenMC.interactive=!1,this.listItem[e].iconOpenMC.buttonMode=!1}_unClockAll(){for(let e=0;e<this.listItem.length;e++)this.listItem[e].iconOpenMC.interactive=!0,this.listItem[e].iconOpenMC.buttonMode=!0}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}if(this.listDelayCall.length>0){for(let e=0;e<this.listDelayCall.length;e++)this.listDelayCall[e]&&(this.listDelayCall[e].kill(),this.listDelayCall[e]=null);this.listDelayCall=[]}this.timerAutoChoice&&this.timerAutoChoice.Stop()}}t.a=a},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t){super(e,t),this.reward=null,this.init(e,t)}init(e,t){super.init(),this._isDisposed&&(this._isDisposed=!1,this.reward=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossMedusaDie.textures.MedusaHeadDie),this.reward.anchor.set(.5,.5),this.addChild(this.reward))}effectShowReward(e,t,i){TweenMax.to(this.reward,2.5,{bezier:{values:[{x:-30,y:-50},{x:-100,y:50}]},delay:PreLoaderConfig.BossConfig.timeShowCutHead/1e3+4,ease:Bounce.easeOut,onComplete:this._onCompleteEffectShowReward.bind(this),onCompleteParams:[e,t,i]})}_onCompleteEffectShowReward(e,t,i){if(this.reward.texture=ResourceManager.Atlas.AtlasGun101.textures.gun101fire[0],i)switch(i.basePosition){case 0:case 1:e+=250,t-=150;break;case 2:case 3:e+=250,t=t}TweenMax.to(this,.8,{x:e,y:t,delay:1,onComplete:this.onMoveToEndPoint.bind(this,i)})}onMoveToEndPoint(e){AppInfo.gameMovie.displayController.startTransferScreen(),this.dispose()}dispose(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.reward),this.reward&&(this.reward.destroy(),this.reward=null,this.removeChild(this.reward)),super.dispose()}onResize(e){super.onResize(e)}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t){super(e,t),this.reward=null,this.init(e,t)}init(e,t){super.init(),this._isDisposed&&(this._isDisposed=!1,this.reward=new PIXI.Sprite(ResourceManager.Atlas.AtlasGun102.textures.gun102fire[0]),this.reward.anchor.set(.5,.5),this.reward.alpha=0,this.addChild(this.reward))}effectShowReward(e,t,i){this.reward.scale.set(4,4),TweenMax.to(this.reward,1,{alpha:1,yoyo:!0,scaleX:1,scaleY:1,delay:2,ease:Bounce.easeOut,onComplete:this._onCompleteEffectShowReward.bind(this),onCompleteParams:[e,t,i]})}_onCompleteEffectShowReward(e,t,i){if(i)switch(i.basePosition){case 0:case 1:e+=150,t-=150;break;case 2:case 3:e+=150,t=t}TweenMax.to(this,.8,{x:e,y:t,delay:1,onComplete:this.onMoveToEndPoint.bind(this,i)})}onMoveToEndPoint(e){AppInfo.gameMovie.displayController.startTransferScreen(),this.dispose()}dispose(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.reward),this.reward&&(this.reward.destroy(),this.reward=null,this.removeChild(this.reward)),super.dispose()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t,i){super(),this.listIceBeamEffect=[],this.gun=null,this.listIceBeamEffect=[],this.endPointX=e,this.endPointY=t,this.compoBaseStation=i,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;for(let e=0;e<50;e++){const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish103.textures.EffectIceBeam),t={x:Utilities.Number.randRange(0,1280),y:Utilities.Number.randRange(0,720)};e.animationSpeed=.5,e.gotoAndStop(0),e.posStart=t,e.position.set(t.x,t.y),e.visible=!1,e.anchor.set(.5),AppInfo.gameMovie.layerEffect.addChild(e),this.listIceBeamEffect.push(e)}null===this.gun&&(this.gun=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun103.textures.gun103idle),this.gun.animationSpeed=.5,this.gun.anchor.set(.5),this.gun.gotoAndStop(0),this.addChild(this.gun),this.gun.visible=!1,this.gun.scale.set(0))}}showEffect(){const e=this.listIceBeamEffect.length;this.gun.visible=!0,this.gun.gotoAndPlay(0);for(let t=0;t<e;t++){const i=this.listIceBeamEffect[t];i.scale.set(0),i.visible=!0,i.gotoAndPlay(0);let s=Utilities.toRad(360/e);s*=Utilities.Number.randRange(0,e),i.x=this.x+200*Math.cos(s),i.y=this.y+200*Math.sin(s),TweenMax.to(i,.5,{scaleX:1,scaleY:1,delay:.2*t,onComplete:function(e,t){TweenMax.to(e,.5,{x:this.x,y:this.y+30,scaleX:.3,scaleY:.3,onComplete:function(e,t){e.visible=!1,e.gotoAndStop(0),e.destroy(),e=null,TweenMax.killTweensOf(this.gun),TweenMax.to(this.gun,.1,{scaleX:1*t/this.listIceBeamEffect.length,scaleY:1*t/this.listIceBeamEffect.length,ease:Back.easeOut.config(3),onComplete:this.onCompleteEffect.bind(this,t)})}.bind(this,e,t)})}.bind(this,i,t)})}}onCompleteEffect(e){if(e==this.listIceBeamEffect.length-1){if(this.compoBaseStation)switch(this.compoBaseStation.basePosition){case 0:this.endPointX+=this.gun.width/2+50,this.endPointY-=this.gun.height/2;break;case 1:this.endPointX-=this.gun.width/2,this.endPointY-=150;break;case 2:this.endPointX-=this.gun.width/2;break;case 3:this.endPointX+=250}TweenMax.to(this,.8,{x:this.endPointX,y:this.endPointY,delay:1,onComplete:this.onMoveToEndPoint.bind(this,this.compoBaseStation)})}}onMoveToEndPoint(){this.compoBaseStation,this.dispose()}dispose(){super.dispose(),this.gun&&(this.gun.gotoAndStop(0),this.gun.destroy(),this.gun=null),this.listIceBeamEffect=[]}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t,i){super(),this.listIceBeamEffect=[],this.gun=null,this.listIceBeamEffect=[],this.endPointX=e,this.endPointY=t,this.compoBaseStation=i,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;for(let e=0;e<50;e++){const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSevenSeaFish104.textures["Note"+Utilities.Number.randRange(1,8)+"Play"]),t={x:Utilities.Number.randRange(0,1280),y:Utilities.Number.randRange(0,720)};e.animationSpeed=.5,e.gotoAndStop(0),e.posStart=t,e.position.set(t.x,t.y),e.visible=!1,e.anchor.set(.5),AppInfo.gameMovie.layerEffect.addChild(e),this.listIceBeamEffect.push(e)}null===this.gun&&(this.gun=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun104.textures.gun104idle),this.gun.animationSpeed=.5,this.gun.anchor.set(.5),this.gun.gotoAndStop(0),this.addChild(this.gun),this.gun.visible=!1,this.gun.scale.set(0))}}showEffect(){const e=this.listIceBeamEffect.length;this.gun.visible=!0,this.gun.gotoAndPlay(0);for(let t=0;t<e;t++){const i=this.listIceBeamEffect[t];i.scale.set(0),i.visible=!0,i.gotoAndPlay(0);let s=Utilities.toRad(360/e);s*=Utilities.Number.randRange(0,e),i.x=this.x+200*Math.cos(s),i.y=this.y+200*Math.sin(s),TweenMax.to(i,.5,{scaleX:1,scaleY:1,delay:.2*t,onComplete:function(e,t){TweenMax.to(e,.5,{x:this.x,y:this.y+30,scaleX:.3,scaleY:.3,onComplete:function(e,t){e.visible=!1,e.gotoAndStop(0),e.destroy(),e=null,TweenMax.killTweensOf(this.gun),TweenMax.to(this.gun,.1,{scaleX:1*t/this.listIceBeamEffect.length,scaleY:1*t/this.listIceBeamEffect.length,ease:Back.easeOut.config(3),onComplete:this.onCompleteEffect.bind(this,t)})}.bind(this,e,t)})}.bind(this,i,t)})}}onCompleteEffect(e){if(e==this.listIceBeamEffect.length-1){if(this.compoBaseStation)switch(this.compoBaseStation.basePosition){case 0:this.endPointX+=this.gun.width/2+50,this.endPointY-=this.gun.height/2;break;case 1:this.endPointX-=this.gun.width/2,this.endPointY-=150;break;case 2:this.endPointX-=this.gun.width/2;break;case 3:this.endPointX+=250}TweenMax.to(this,.8,{x:this.endPointX,y:this.endPointY,delay:1,onComplete:this.onMoveToEndPoint.bind(this,this.compoBaseStation)})}}onMoveToEndPoint(){this.compoBaseStation,this.dispose()}dispose(){super.dispose(),TweenMax.killTweensOf(this),this.gun&&(this.gun.gotoAndStop(0),this.gun.destroy(),this.gun=null),this.listIceBeamEffect=[]}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t){super(e,t),this.reward=null,this.init(e,t)}init(e,t){super.init(),this._isDisposed&&(this._isDisposed=!1,this.reward=new PIXI.Sprite(ResourceManager.Atlas.AtlasGun105.textures.gun105fire[0]),this.reward.anchor.set(.5,.5),this.reward.alpha=0,this.addChild(this.reward))}effectShowReward(e,t,i){this.reward.scale.set(4,4),TweenMax.to(this.reward,1,{alpha:1,yoyo:!0,scaleX:1,scaleY:1,delay:2,ease:Bounce.easeOut,onComplete:this._onCompleteEffectShowReward.bind(this),onCompleteParams:[e,t,i]})}_onCompleteEffectShowReward(e,t,i){if(i)switch(i.basePosition){case 0:case 1:e+=150,t-=150;break;case 2:case 3:e+=150,t=t}TweenMax.to(this,.8,{x:e,y:t,delay:1,onComplete:this.onMoveToEndPoint.bind(this,i)})}onMoveToEndPoint(e){AppInfo.gameMovie.displayController.startTransferScreen(),this.dispose()}dispose(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.reward),this.reward&&(this.reward.destroy(),this.reward=null,this.removeChild(this.reward)),super.dispose()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}}t.a=o},function(e,t,i){"use strict";t.a=class{constructor(){this.typeTween="",this.timeOut=null,this.velocityUpdate=[1.4,1.4,1,1,1.2,1.2,1.2,1.3,1.2,1.2,1.2,1,1.2,1,.8,1.1,1,.8,1,1,1,1,1,1,1,1.1,1,1,1,.9,1,1,1]}clearTimeout(){null!==this.timeOut&&clearTimeout(this.timeOut)}run(e,t,i){let s;switch(this.typeTween=i?"quadratic":"thru",e.type){case 10:s=this._runFish10(e,t);break;case 25:s=this._runFish25(e,t);break;default:s=this._runFishDefault(e,t)}return s}_runFish0(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=0;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:e=>{e.onFishSwimUpdate();const t=o.progress().toFixed(1);.3!=t&&.7!=t||t==s||(s=t,o.pause(),this._playCircularBezier(e,1.5,100,()=>{e.isStuned||e.hasStone||e.hasFrozen||o.resume()}))},onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish3(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=0;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate();const t=o.progress().toFixed(1);if(.3==t&&t!=s){s=t;var i=e.movie.animationSpeed;e.movie.animationSpeed=1,e.fishShadow&&(e.fishShadow.movie.animationSpeed=1),o.timeScale(4),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.movie.animationSpeed=i,e.fishShadow&&(e.fishShadow.movie.animationSpeed=i),o.timeScale(1))},500)}if(.5==t&&t!=s){s=t;i=e.movie.animationSpeed;e.movie.animationSpeed=1,e.fishShadow&&(e.fishShadow.movie.animationSpeed=1),o.timeScale(4),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.movie.animationSpeed=i,e.fishShadow&&(e.fishShadow.movie.animationSpeed=i),o.timeScale(1))},500)}if(.7==t&&t!=s){s=t;i=e.movie.animationSpeed;e.movie.animationSpeed=1,e.fishShadow&&(e.fishShadow.movie.animationSpeed=1),o.timeScale(4),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.movie.animationSpeed=i,e.fishShadow&&(e.fishShadow.movie.animationSpeed=i),o.timeScale(1))},500)}if(.9==t&&t!=s){s=t;i=e.movie.animationSpeed;e.movie.animationSpeed=1,e.fishShadow&&(e.fishShadow.movie.animationSpeed=1),o.timeScale(4),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.movie.animationSpeed=i,e.fishShadow&&(e.fishShadow.movie.animationSpeed=i),o.timeScale(1))},500)}}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish6(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]),s=e.movie.totalFrames;let o=!1;const n=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate(),e.movie.currentFrame!==s-3||o||(e.movie.stop(),e.hasStopped=!0,e.fishShadow&&null!==e.fishShadow&&e.fishShadow.stun(),o=!0,n.timeScale(3),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.isStuned||e.hasStone||e.hasFrozen||(e.movie.play(),e.hasStopped=!1,e.fishShadow&&(e.fishShadow.isDisposed||e.fishShadow.resumeGame())),o=!1,TweenMax.to(n,1,{timeScale:.5,ease:Power2.easeOut,onComplete(){n.timeScale(1)}}))},200))}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return n}_runFish8(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=0;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate();const t=o.progress().toFixed(1);if(.5==t&&t!=s){s=t;const i=e.movie.animationSpeed;e.movie.animationSpeed=1,e.fishShadow&&(e.fishShadow.movie.animationSpeed=1),o.timeScale(4),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.movie.animationSpeed=i,e.fishShadow&&(e.fishShadow.movie.animationSpeed=i),o.timeScale(1))},1e3)}}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish10(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=!1;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate(),15!=e.movie.currentFrame||s||(e.movie.stop(),e.hasStopped=!0,e.fishShadow&&e.fishShadow.stun(),s=!0,o.timeScale(2),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.isStuned||e.hasStone||e.hasFrozen||(e.movie.play(),e.hasStopped=!1,e.fishShadow&&e.fishShadow.resumeGame()),s=!1,TweenMax.to(o,1,{timeScale:1,ease:Power3.easeOut,onComplete(){}}))},50))}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish11(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]),s=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:(e=>{e.onFishSwimUpdate()}).bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return s.timeScale(.5),s}_runFish12(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]),s=e.movie.totalFrames;let o=!1;e.movie.animationSpeed=.05,e.fishShadow.movie.animationSpeed=.05;const n=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate(),e.movie.currentFrame!=s-1||o||(o=!0,n.timeScale(1.3),this.timeOut=setTimeout(()=>{o=!1,n.timeScale(1)},500))}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return n}_runFish14(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=!1;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate(),10!=e.movie.currentFrame||s||(s=!0,o.timeScale(1.4),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(s=!1,o.timeScale(1))},1e3))}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish15(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=!1;return TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:(e=>{e.onFishSwimUpdate(),11!=e.movie.currentFrame||s||(s=!0,TweenMax.to([e,e.fishShadow],1.5,{scaleX:1,scaleY:1,ease:Power3.easeOut,onComplete(e){!e.isStuned&&!e.hasStone&&e.hasFrozen,TweenMax.to([e,e.fishShadow],1.5,{scaleX:.85,scaleY:.85,ease:Power3.easeIn,onComplete(){s=!1}})},onCompleteParams:[e]}))}).bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)})}_runFish16(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=0;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate();const t=o.progress().toFixed(1);if(.5==t&&t!=s){s=t;const i=e.movie.animationSpeed;e.movie.animationSpeed=1,e.fishShadow&&(e.fishShadow.movie.animationSpeed=1),o.timeScale(2),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.movie.animationSpeed=i,o.timeScale(1),e.fishShadow&&(e.fishShadow.movie.animationSpeed=i))},1e3)}}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish18(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=0;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:(e=>{e.onFishSwimUpdate();const t=o.progress().toFixed(1);.3!=t&&.7!=t||t==s||(s=t,TweenMax.to([e,e.fishShadow],.2,{rotation:2*Math.PI,ease:Power0.easeNone,repeat:3}))}).bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish25(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=!1;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate(),4!==e.movie.currentFrame||s||(e.movie.stop(),e.hasStopped=!0,e.fishShadow&&e.fishShadow.stun(),s=!0,o.timeScale(3),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(e.isStuned||e.hasStone||e.hasFrozen||(e.movie.play(),e.hasStopped=!1,e.fishShadow&&e.fishShadow.resumeGame()),s=!1,TweenMax.to(o,1,{timeScale:1,ease:Power3.easeOut,onComplete(){}}))},50))}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish26(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=!1;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:function(e){e.onFishSwimUpdate(),11!=e.movie.currentFrame||s||(s=!0,o.timeScale(1.1),this.timeOut=setTimeout(()=>{e&&!e.isDisposed&&(s=!1,TweenMax.to(o,.5,{timeScale:.2,ease:Power0.easeNone,onComplete(){o.timeScale(1)}}))},50))}.bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish27(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=!1;return TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:(e=>{e.onFishSwimUpdate(),4!=e.movie.currentFrame||s||(s=!0,TweenMax.to([e,e.fishShadow],1,{scaleX:1,scaleY:1,ease:Power3.easeOut,onComplete(e){TweenMax.to([e,e.fishShadow],1,{scaleX:.85,scaleY:.85,ease:Power3.easeIn,onComplete(){s=!1}})},onCompleteParams:[e]}))}).bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)})}_runFish28(e,t){const i=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);let s=0;const o=TweenMax.to(e,i,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Power0.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:(e=>{e.onFishSwimUpdate();const t=o.progress().toFixed(1);.5==t&&t!=s&&(s=t,TweenMax.to([e,e.fishShadow],1,{rotation:2*Math.PI,scaleX:.5,scaleY:.5,ease:Power0.easeNone,yoyo:!0}))}).bind(e),onUpdateParams:[e],onComplete:e.onFishSwimComplete.bind(e)});return o}_runFish(e,t,i){const s=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);return TweenMax.to(e,s,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:i,repeat:0,delay:e.indexInGroup,onUpdate:e.onFishSwimUpdate.bind(e),onComplete:e.onFishSwimComplete.bind(e)})}_runFish(e,t,i){const s=Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*this.velocityUpdate[e.type]);return TweenMax.to(e,s,{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:i,repeat:0,delay:e.indexInGroup,onUpdate:e.onFishSwimUpdate.bind(e),onComplete:e.onFishSwimComplete.bind(e)})}_runFishDefault(e,t){return TweenMax.to(e,Utilities.Number.distanceBetweenTwoPoint(t[0],t[t.length-1])/((PreLoaderConfig.TimeFishMove[e.type]||75)*(this.velocityUpdate[e.type]||1)),{bezier:{type:this.typeTween,curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone,repeat:0,delay:e.indexInGroup,onUpdate:e.onFishSwimUpdate.bind(e),onComplete:e.onFishSwimComplete.bind(e)})}_playCircularBezier(e,t,i,s){const o=e.x,n=e.y,a=(e.rotation,Math.PI,Math.sin,Math.cos,[{x:o,y:n},{x:o+i,y:n},{x:o+i,y:n+i},{x:o+i,y:n+2*i},{x:o,y:n+2*i},{x:o-i,y:n+2*i},{x:o-i,y:n+i},{x:o-i,y:n},{x:o,y:n}]);return TweenMax.to([e,e.fishShadow],t,{bezier:{type:"quadratic",values:a,autoRotate:["x","y","rotation",0,!0]},onUpdate:()=>{e.iconCanLock&&(e.iconCanLock.rotation=-e.rotation)},ease:Power1.easeInOut,onComplete(){null!=s&&null!=s&&"function"==typeof s&&s()}})}}},function(e,t,i){"use strict";var s=i(72);class o extends s.a{constructor(e,t,i){super(e,t,i),this._listRibbon=[],this._listRibbon=[]}init(){super.init(),this.movie.animationSpeed=1/4,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1/4)}dispose(){super.dispose(),AppInfo.preLoader.soundController.stopSoundMiniBoss(),AppInfo.preLoader.soundController.playGameBGSound()}run(e){super.run(e),35==this.type&&(this.runTween.vars.bezier.autoRotate=null),AppInfo.preLoader.soundController.playSoundMiniBoss(),AppInfo.preLoader.soundController.stopGameBGSound()}die(){this.isLock?this.unLock():this.unreadyForLock(),TweenMax.killTweensOf(this),TweenMax.to(this,1,{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2-70,ease:Power0.easyNone,onUpdate:()=>{(PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue||this.isCaTran)&&this.fishShadow&&(this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y)},onComplete:()=>{this.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die,this.movie.loop=!1,this.movie.animationSpeed=1/4,this.movie.gotoAndPlay(0),this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die,this.fishShadow.movie.animationSpeed=1/4,this.fishShadow.movie.gotoAndPlay(0),this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die),this.runTween.paused(!0),AppInfo.preLoader.soundController.playHopQuaNo(),new Utilities.Timer(1e3,2,null,this.dispose.bind(this)).Start()}})}onCompleteOpenLid(){}onCompleteEffectRibon(e){null!=this.parent&&(this._listRibbon.length>0&&(this.removeChild(e),e.destroy(),this._listRibbon.includes(e)&&this._listRibbon.splice(this._listRibbon.indexOf(e),1)),0==this._listRibbon.length&&this.dispose())}onHitBullet(e){super.onHitBullet(e),TweenMax.killTweensOf(this.movie,!1,["rotation"]),TweenMax.fromTo(this.movie,.8,{rotation:-Math.PI/32},{rotation:Math.PI/32,ease:RoughEase.ease.config({strength:12,points:4,template:Linear.easeNone,randomize:!1}),onComplete:this.onFishRotationComplete.bind(this)}),this.fishShadow&&TweenMax.fromTo(this.fishShadow.movie,.8,{rotation:-Math.PI/32},{rotation:Math.PI/32,ease:RoughEase.ease.config({strength:12,points:4,template:Linear.easeNone,randomize:!1})})}onFishRotationComplete(){this.movie.rotation=0,this.fishShadow&&(this.fishShadow.movie.rotation=0)}onFishRotationUpdate(){this.fishShadow&&(this.fishShadow.x=this.x+PreLoaderConfig.ConfigPointFishShadow.x,this.fishShadow.y=this.y+PreLoaderConfig.ConfigPointFishShadow.y,this.fishShadow.rotation=this.movie.rotation),this.isLock&&(this.x<-85||this.y<-85||this.x>AppInfo.appRealWidth+85||this.y>AppInfo.appRealHeight+85)&&this.unLock()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(e),this.blackTitle=null,this.redTitle=null,this.init()}init(){super.init();const e={fontFamily:"Myriad Pro",fontWeight:"bold",fontStyle:"italic",fontSize:"120px",fill:["#ffffcc","#ffcd04","#ffffcc"],fillGradientStops:[.12,.5,.8],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!0,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:6,stroke:"#7c0000",align:"center",strokeThickness:4},t={fontFamily:"Myriad Pro",fontWeight:"bold",fontStyle:"italic",fontSize:"120px",fill:["#ffffff"],fillGradientStops:[1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!0,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:6,stroke:"#ff0000",align:"center",strokeThickness:4};this._isDisposed&&(this._isDisposed=!1,null==this.blackTitle&&(this.blackTitle=new PIXI.Text(PreLoaderConfig.ListTextConfig.ComingBoss,e),this.addChild(this.blackTitle)),null==this.redTitle&&(this.redTitle=new PIXI.Text(PreLoaderConfig.ListTextConfig.ComingBoss,t),this.addChild(this.redTitle)))}showEffect(e){this.visible=!0,AppInfo.preLoader.soundController.playWarning(),AppInfo.gameMovie.gameBoard.boss33Dance?(TweenMax.to(this,PreLoaderConfig.BossConfig.timeShowWarningBossComing,{x:AppInfo.appRealWidth/2-this.width/2,ease:RoughEase.ease.config({strength:2,points:5,randomize:!1}),onComplete:this._onCompleteEffectBoss33.bind(this,e)}),TweenMax.to(this.redTitle,.2,{alpha:0,yoyo:!0,repeat:-1})):(TweenMax.to(this,PreLoaderConfig.BossConfig.timeShowWarningBossComing,{x:-this.width,ease:RoughEase.ease.config({strength:2,points:5,randomize:!1}),onComplete:this._onComplete.bind(this,e)}),TweenMax.to(this.redTitle,.2,{alpha:0,yoyo:!0,repeat:-1}))}_onCompleteEffectBoss33(e){AppInfo.preLoader.soundController.playBossComingSound(),e(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.redTitle),TweenMax.to(this.redTitle,.2,{alpha:1,yoyo:!0,repeat:-1}),TweenMax.to(this,PreLoaderConfig.BossConfig.timeShowWarningBossComing/2,{x:-this.width,ease:Linear.easeNone,delay:3,onComplete:this._onComplete.bind(this,e)})}hideEffect(){this.visible=!1,TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.redTitle)}_onComplete(e){AppInfo.preLoader.soundController.playBossComingSound(),this.x=AppInfo.appRealWidth,this.y=135,this.visible=!1,this.redTitle.alpha=1,TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.redTitle),0==AppInfo.gameMovie.gameBoard.boss33Dance&&e&&e instanceof Function&&e()}dispose(){super.dispose(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.redTitle),this.removeChild(this.blackTitle),this.removeChild(this.redTitle),this.parent&&this.parent.removeChild(this),this.blackTitle.destroy(),this.redTitle.destroy(),this.blackTitle=null,this.redTitle=null}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(),this.textContent=null,this.titleHighlight=null,this.title=null,this.text=e||PreLoaderConfig.ListTextConfig.RedAlert,this.init()}init(){super.init();const e={fontFamily:"Myriad Pro",fontWeight:"bold",fontStyle:"italic",fontSize:"100px",fill:["#ffffcc","#ffcd04","#ffffcc"],fillGradientStops:[.12,.5,.8],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!0,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:6,stroke:"#7c0000",align:"center",strokeThickness:4},t={fontFamily:"Myriad Pro",fontWeight:"bold",fontStyle:"italic",fontSize:"100px",fill:["#ffffff"],fillGradientStops:[1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!0,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:6,stroke:"#ff0000",align:"center",strokeThickness:4};this._isDisposed&&(this._isDisposed=!1,null==this.title&&(this.title=new PIXI.Text(this.text,e)),null==this.titleHighlight&&(this.titleHighlight=new PIXI.Text(this.text,t)),this.addChild(this.titleHighlight),this.addChild(this.title))}showEffectDrop(){this.y=0,this.x=AppInfo.appRealWidth/2-this.title.width/2,this.visible=!0,TweenMax.killTweensOf(this.title),TweenMax.killTweensOf(this.titleHighlight),this.title.alpha=1,TweenMax.to(this,2,{y:AppInfo.appRealHeight/5,ease:Bounce.easeOut,onComplete:this.onCompleteShowEffect.bind(this)})}onCompleteShowEffect(){TweenMax.to(this.title,.2,{alpha:0,yoyo:!0,repeat:-1}),TweenMax.to(this,1,{delay:1,x:1.5*-this.width,ease:Back.easeIn.config(3),onComplete:this.onCompleteHightLight.bind(this)})}onCompleteHightLight(){this.dispose()}hideEffect(){}dispose(){super.dispose(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.title),TweenMax.killTweensOf(this.titleHighlight),this.title&&(this.removeChild(this.title),this.title.destroy(),this.title=null),this.titleHighlight&&(this.removeChild(this.titleHighlight),this.titleHighlight.destroy(),this.titleHighlight=null)}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}}t.a=o},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(e),this._currenHp=null,this.widthHp=null,this.txtHp=null,this.hp=null,this.bgMask=null,this.bgHPalpha=null,this.bgHP=null,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null==this.bgHP&&(this.bgHP=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures.BGHeal)),null==this.hp&&(this.hp=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures.hpgreen)),null==this.bgHPalpha){const e=new PIXI.Graphics.RoundedRect(0,0,580,25,10,0,.3,3,1,1);this.bgHPalpha=new PIXI.Sprite(e.generateCanvasTexture())}null==this.txtHp&&(this.txtHp=new PIXI.Text("100%",{fontFamily:"Arial",fontSize:"17px",fill:16777215,stroke:0,strokeThickness:2})),this.widthHp=this.bgHPalpha.width-70,this.hp.width=this.widthHp,this.hp.y=2,this.hp.x=68,this.txtHp.x=this.bgHPalpha.width/2-this.txtHp.width/2,this.txtHp.y=this.bgHPalpha.height/2-this.txtHp.height/2,this.addChild(this.bgHPalpha),this.addChild(this.hp),this.addChild(this.bgHP),this.addChild(this.txtHp)}}updateHpBoss(e,t){let i=t?Math.floor(e/t*100):0,s=0;null==this._currenHp?(this._currenHp=e,s=t-e):(s=this._currenHp-e,this._currenHp=e),this.hp.width=this.widthHp*i/100,i<=100&&i>50?this.hp.texture=ResourceManager.Atlas.AtlasEffects.textures.hpgreen:i<50&&i>25?this.hp.texture=ResourceManager.Atlas.AtlasEffects.textures.hpyellow:i<25&&(this.hp.texture=ResourceManager.Atlas.AtlasEffects.textures.hpred),i<=0&&(this.hp.width=0,i=0),this.txtHp.text=i+"%"}show(){this.visible=!0}hide(){this.visible=!1}dispose(){super.dispose(),this.removeChild(this.bgHPalpha),this.removeChild(this.hp),this.removeChild(this.bgHP),this.removeChild(this.txtHp),this.parent&&this.parent.removeChild(this),this.bgHPalpha.destroy(),this.hp.destroy(),this.bgHP.destroy(),this.txtHp.destroy(),this._currenHp=null,this.widthHp=null,this.bgHPalpha=null,this.hp=null,this.bgHP=null,this.txtHp=null}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}}t.a=o},function(e,t,i){"use strict";var s=i(6);const o=PIXI.extras.AnimatedSprite;class n extends s.a{constructor(){super(),this.callbackOnComplete=null,this.callbackOnStart=null,this.idBG=1,this.wawingMovie=null,this.randomBG=null,this.waveMovie=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.name="transferScreen",this.waveMovie=new o(ResourceManager.Atlas.AtlasEffects.textures.Wave),this.waveMovie.x=-20,this.waveMovie.animationSpeed=.1,this.waveMovie.gotoAndStop(0),this.waveMovie.interactive=!1,this.waveMovie.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this.waveMovie),this.visible=!1,this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY)}generateRandomBG(){PreLoaderConfig.GameSettingConfig.listSetting.enableWaveBG.defaultValue&&(this.wawingMovie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasWaves.textures.WaveBG0Wawing),this.wawingMovie.width=AppInfo.appRealWidth,this.wawingMovie.height=AppInfo.appRealHeight,this.wawingMovie.interactive=!1,this.wawingMovie.hitArea=PIXI.Rectangle.EMPTY,this.wawingMovie.animationSpeed=1/6,this.wawingMovie.gotoAndPlay(0),this.addChild(this.wawingMovie));do{this.idBG=Utilities.Number.randRange(1,PreLoaderConfig.DomainConfig.CurrentDomain==PreLoaderConfig.DomainConfig.C?3:2)}while(AppInfo.idBackground==this.idBG);let e;const t=Utilities.Number.randRange(1,PreLoaderConfig.DomainConfig.CurrentDomain==PreLoaderConfig.DomainConfig.C?3:2);if(AppInfo.GameInfo.kindID==PreLoaderConfig.RoomOcean.kindId)switch(AppInfo.gameMovie.gameBoard.roomSevenSeaKind){case 101:e=ResourceManager.Atlas.AtlasBackgroundBanCaMedusa.textures.BG[t-1];break;case 102:e=ResourceManager.Atlas.AtlasBackgroundBanCaCentaur.textures.BG[t-1];break;case 103:e=ResourceManager.Atlas.AtlasBackgroundBanCaLifeOfPi.textures.BG[t-1]}else e=ResourceManager.Atlas.AtlasBackgroundBanCa.textures.BG[t-1];this.randomBG=new PIXI.Sprite(e),this.randomBG.interactive=!1,this.randomBG.hitArea=PIXI.Rectangle.EMPTY,this.randomBG.width=AppInfo.appRealWidth,this.randomBG.height=AppInfo.appRealHeight,this.addChildAt(this.randomBG,0)}playEffectStart(e=0,t=0,i=0,s=0,o=AppInfo.appRealWidth,n=0){this.x=o,this.y=n,this.generateRandomBG(),this.waveMovie.gotoAndPlay(0),AppInfo.gameMovie.displayController.effectitemBGInGame&&(AppInfo.gameMovie.displayController.effectitemBGInGame.visible=!1),AppInfo.gameMovie.displayController.waweMovie&&AppInfo.gameMovie.displayController.waweMovie.visible,AppInfo.gameMovie.layerFish.addChild(this),AppInfo.gameMovie.gameBoard.currentBoss&&AppInfo.gameMovie.layerFish.setChildIndex(AppInfo.gameMovie.gameBoard.currentBoss,AppInfo.gameMovie.layerFish.numChildren-1),this.visible=!0,TweenMax.to(this,PreLoaderConfig.TimeWaveMove,{x:e,y:t,ease:Linear.easeNone,onStart:()=>{this.callbackOnStart&&this.callbackOnStart(),PreLoaderConfig.GameSettingConfig.listSetting.enableWaveBG.defaultValue&&AppInfo.gameMovie.displayController.waweMovie&&(AppInfo.gameMovie.displayController.waweMovie.visible=!1)},onComplete:()=>{TweenMax.to(this.waveMovie,PreLoaderConfig.TimeWaveMove/3.5,{x:-this.waveMovie.width,onComplete:()=>{AppInfo.gameMovie.displayController.effectitemBGInGame&&(AppInfo.gameMovie.displayController.effectitemBGInGame.visible=!0);let e,t,i=[];for(t=0;t<AppInfo.gameMovie.layerFish.numChildren;t++)e=AppInfo.gameMovie.layerFish.getChildAt(t),e.name&&e.name.includes("fish")&&!e.isGift&&(e.type<32?i.push(e):e.type>=35&&(e.isLock&&e.unLock(),AppInfo.gameMovie.gameBoard.listFish.push(e)));for(t=0;t<AppInfo.gameMovie.layerEffect.numChildren;t++)e=AppInfo.gameMovie.layerEffect.getChildAt(t),e.name&&e.name.includes("fish")&&(e.type<32?i.push(e):e.type>=35&&(e.isLock&&e.unLock(),AppInfo.gameMovie.gameBoard.listFish.push(e)));for(t=0;t<i.length;t++)i[t].dispose();i=null,AppInfo.preLoader.soundController.stopWaveSound(),AppInfo.gameMovie.displayController.compoBackground.playEffect(this.idBG),AppInfo.idBackground=this.idBG,PreLoaderConfig.GameSettingConfig.listSetting.enableWaveBG.defaultValue&&AppInfo.gameMovie.displayController.waweMovie&&(AppInfo.gameMovie.displayController.waweMovie.visible=!0),AppInfo.gameMovie.gameBoard.currentBoss&&AppInfo.gameMovie.gameBoard.listFish.push(AppInfo.gameMovie.gameBoard.currentBoss),this.reset(),this.callbackOnComplete&&this.callbackOnComplete()}})}}),AppInfo.preLoader.soundController.playWaveSound()}reset(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.waveMovie),AppInfo.gameMovie.layerFish.removeChild(this),this.visible=!1,this.wawingMovie&&null!==this.wawingMovie&&(this.removeChild(this.wawingMovie),this.wawingMovie.gotoAndStop(0),this.wawingMovie.destroy(),this.wawingMovie=null),this.removeChild(this.randomBG),this.randomBG.destroy(),this.randomBG=null,this.waveMovie.gotoAndStop(0),this.waveMovie.x=-20}dispose(){super.dispose(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.waveMovie),this.waveMovie&&(this.removeChild(this.waveMovie),this.waveMovie.destroy(),this.waveMovie=null),this.wawingMovie&&(this.removeChild(this.wawingMovie),this.wawingMovie.gotoAndStop(0),this.wawingMovie.destroy(),this.wawingMovie=null),this.randomBG&&(this.removeChild(this.randomBG),this.randomBG.destroy(),this.randomBG=null),this.callbackOnStart&&(this.callbackOnStart=null),this.callbackOnComplete&&(this.callbackOnComplete=null),this.parent&&this.parent.removeChild(this),this.destroy()}}t.a=n},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(e),this.txtHpLose=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null==this.txtHpLose&&(this.txtHpLose=new PIXI.Text("",{dropShadow:!0,dropShadowAngle:1.5707963267948966,dropShadowDistance:1,fill:"#FF3219",fontSize:80,fontFamily:PreLoaderConfig.FontResource.UTMROCKWELL.name,stroke:16777215,strokeThickness:3,fontWeight:"bold"})),this.txtHpLose.anchor.set(.5),this.addChild(this.txtHpLose))}dispose(){super.dispose(),AppInfo.gameMovie.gameBoard.listEffects.includes(this)&&AppInfo.gameMovie.gameBoard.listEffects.splice(AppInfo.gameMovie.gameBoard.listEffects.indexOf(this),1),TweenMax.killTweensOf(this.txtHpLose),this.removeChild(this.txtHpLose),this.txtHpLose.destroy(),this.txtHpLose=null,this.parent&&this.parent.removeChild(this),this.destroy()}show(e,t=!1){this.txtHpLose.style.fill="#FF3219",this.txtHpLose.text=e<=0?PreLoaderConfig.languageConfig.key_missing.toUpperCase():"-"+Utilities.Coin(e),t?(this.txtHpLose.y=this.txtHpLose.y-400,this.txtHpLose.scale.set(5),this.txtHpLose.alpha=0,this.txtHpLose.style.fill="#8100ff",TweenMax.to(this.txtHpLose,1.2,{scaleX:2,scaleY:2,alpha:1,ease:Bounce.easeOut,onComplete:this.hideTextHpLose.bind(this)})):(this.txtHpLose.style.fill="#FF3219",TweenMax.to(this.txtHpLose,1.2,{y:this.txtHpLose.y-400,onComplete:this.hideTextHpLose.bind(this)}))}hideTextHpLose(){this.dispose()}onResize(e){super.onResize(e)}onEnterFrame(e){super.onEnterFrame(e)}updateUserInfo(e){super.updateUserInfo(e)}}t.a=o},function(e,t,i){"use strict";var s=i(6),o=i(74);class n extends s.a{constructor(){super(),this._currentIndex=0,this._baseStation=null,this._redFish=null,this.listSpriteThunder=[],this.listMaskSpriteThunder=[],this.listTarget=[],this.listFishDie=[],this._countFishTweened=0,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1)}dispose(){let e;for(super.dispose(),e=0;e<this.listSpriteThunder.length;e++)void 0!==this.listSpriteThunder[e]&&null!==this.listSpriteThunder[e]&&this.listSpriteThunder[e].destroy();for(e=0;e<this.listMaskSpriteThunder.length;e++)void 0!==this.listMaskSpriteThunder[e]&&null!==this.listMaskSpriteThunder[e]&&(TweenMax.killTweensOf(this.listMaskSpriteThunder[e]),this.listMaskSpriteThunder[e].destroy());for(e=0;e<this.listTarget.length;e++)void 0!==this.listTarget[e]&&null!==this.listTarget[e]&&this.listTarget[e].dispose();this.removeChildren(),this.destroy()}playEffect(e,t,i,s){this._redFish=e,this.listTarget=t,this.listFishDie=i,this._baseStation=s,this.endPoint=null!==s?s.lblCoin.getGlobalPosition():new PIXI.Point(640,65),e.pause(),e.scale.set(1),e.isFishSpine?(e.movie.autoExchangeAnimation=!1,e.movie.playAnimation(0,"hit",!0),e.movie.state.timeScale=2):TweenMax.to(e.movie,.07,{rotation:Math.PI/4,yoyo:!0,ease:Linear.easeNone,repeat:21}),e.isFishSpine||TweenMax.to(e,.07,{scaleX:1.2,scaleY:1.2,yoyo:!0,ease:Linear.easeNone,repeat:21}),AppInfo.gameMovie.strongVibration(),this._initThunder()}_initThunder(){this.addChild(this._redFish);const e=this.toLocal(this._redFish.position,this._redFish.parent),t=new PIXI.Point,i=this._redFish;for(const s of this.listTarget){s.pause(),this.addChild(s),this.toLocal(s.position,s.parent,t);const o=Utilities.Number.angleRadBetweenTwoPoint(e,t),n=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.RedFishThunder);n.animationSpeed=1/8,n.anchor.set(0,.5),n.visible=!1,n.position.set(e.x,e.y),n.rotation=o,this.addChildAt(n,0),this.listSpriteThunder.push(n);const a=Utilities.Number.distanceBetweenTwoPoint(i.getGlobalPosition(),s.getGlobalPosition()),h=PIXI.Graphics.Rectangle(0,0,a,n.height,0,1);h.isMask=!0,h.pivot.set(0,h.height/2),h.oriWidth=h.width,h.oriHeight=h.height,h.toPos={x:e.x,y:e.y},this.addChildAt(h,0),this.listMaskSpriteThunder.push(h),n.mask=h,h.position.set(e.x+a*Math.cos(o+Math.PI),e.y+a*Math.sin(o+Math.PI)),h.rotation=o}const s=new o.a(ResourceManager.Atlas.AtlasEffects.textures.RedFishParticle,n.fadeOut);this.addChildAt(s,0),s.playParticle(this._redFish.x,this._redFish.y);const a=new o.a(ResourceManager.Atlas.AtlasEffects.textures.Star,n.star);this.addChild(a),a.playParticle(this._redFish.x,this._redFish.y,()=>{this.listTarget.length>0?this._playEffect():this.tweenToPlayer()}),AppInfo.gameMovie.soundController.playCaDoChet()}_playEffect(){this.listMaskSpriteThunder.forEach((e,t)=>{TweenMax.to(e,e.oriWidth/2700,{x:e.toPos.x,y:e.toPos.y,ease:Power0.easeNone,onStart:function(e){this.listSpriteThunder[e].visible=!0,this.listSpriteThunder[e].play(),AppInfo.gameMovie.soundController.playSet()}.bind(this,t),onComplete:function(e){const t=this.listTarget[e];t.powerfulThunder(),t.isFishSpine?(t.movie.autoExchangeAnimation=!1,t.movie.playAnimation(0,"hit",!0),t.movie.state.timeScale=2):TweenMax.to(t.movie,.07,{rotation:Math.PI/4,yoyo:!0,ease:Linear.easeNone,repeat:31}),t.isFishSpine||TweenMax.to(t,.07,{scaleX:1.1,scaleY:1.1,yoyo:!0,repeat:31}),AppInfo.gameMovie.strongVibration(),AppInfo.gameMovie.displayController.effectWinCoinCatchFish(t.type,t.x,t.y,this.listFishDie[e].fishScore,this.endPoint.x,this.endPoint.y,this._baseStation.basePosition),this._countFishTweened++,this._onCompleteThunder()}.bind(this,t)})})}_onCompleteThunder(){this._countFishTweened===this.listMaskSpriteThunder.length&&this.tweenToPlayer()}tweenToPlayer(){this._firstOnStart=!1,this._countFishTweened=0,this.listTarget.push(this._redFish);const e=this.toLocal(this._baseStation.iconCoin.position,this._baseStation.iconCoin.parent),t=this.listTarget[0].getChildByName("redFishCircle"),i=null!==t?20/t.width:.2,s=this.listTarget[0];this.listTarget[0]=this.listTarget[this.listTarget.length-1],this.listTarget[this.listTarget.length-1]=s;for(let t=0;t<this.listTarget.length;t++)TweenMax.to([this.listTarget[t],this.listTarget[t].fishShadow],.5,{x:e.x+5,y:e.y+5,scaleX:i,scaleY:i,ease:Circ.easeOut,delay:.25*t+2,onStart:function(e){if(this.listTarget[e].visible=!0,!this._firstOnStart){this._firstOnStart=!0;for(let e=0;e<this.listSpriteThunder.length;e++)void 0!==this.listSpriteThunder[e]&&null!==this.listSpriteThunder[e]&&(this.listSpriteThunder[e].visible=!1)}}.bind(this,t),onComplete:function(e){void 0!==this.listTarget[e]&&null!==this.listTarget[e]&&this.listTarget[e].dispose(),this._countFishTweened++,this._countFishTweened===this.listTarget.length&&(this._baseStation.compoGun.effectRedFishThunder(),this.dispose())}.bind(this,t)})}}n.fadeOut={alpha:{start:.85,end:.18},scale:{start:.1,end:.5,minimumScaleMultiplier:1},color:{start:"#ffff42",end:"#ff8c8c"},speed:{start:300,end:200,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.3,max:1},blendMode:"normal",frequency:.001,emitterLifetime:.35,maxParticles:200,pos:{x:0,y:0},addAtBack:!1,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},n.star={alpha:{start:1,end:.44},scale:{start:.1,end:.5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#f7e70d"},speed:{start:100,end:50,minimumSpeedMultiplier:3},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.2,max:1.5},blendMode:"normal",frequency:.05,emitterLifetime:1,maxParticles:16,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},t.a=n},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(){super(),this.listMCThunder=[],this.listMaskSpriteThunder=[],this.countTweenEffect=0,this.listFish=[],this.isMe=!1,this.bullet={},this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1)}dispose(){super.dispose()}playEffect(e){this.listFish=e;for(let t=0;t<e.length-1;t++){e[t].isCaTran||e[t].pause();const i=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffects.textures.EffectThunderBeam);i.anchor.set(0,.5);const s=this.toLocal(e[t].position,AppInfo.gameMovie.layerEffect),o=this.toLocal(e[t+1].position,AppInfo.gameMovie.layerEffect),n=Utilities.Number.distanceBetweenTwoPoint(s.x,s.y,o.x,o.y),a=Utilities.Number.angleRadBetweenTwoPoint(e[t],e[t+1]);i.x=s.x,i.y=s.y;const h=PIXI.Graphics.Rectangle(0,0,n,i.height,0,0);i.mask=h,i.mask.x=s.x,i.mask.y=s.y,i.width=n,h.position.set(s.x+n*Math.cos(a+Math.PI),s.y+n*Math.sin(a+Math.PI)),h.pivot.set(0,i.height/2),h.toPos={x:o.x,y:o.y},h.rotation=a,i.rotation=a,this.addChild(i),i.gotoAndPlay(0),i.animationSpeed=.5,this.addChild(h),this.listMCThunder.push(i),this.listMaskSpriteThunder.push(h)}this._playSkillLightning()}_playSkillLightning(){for(let e=0;e<this.listMaskSpriteThunder.length;e++)TweenMax.to(this.listMaskSpriteThunder[e],o.TIME_LIGHTNING,{x:this.listMaskSpriteThunder[e].toPos.x,y:this.listMaskSpriteThunder[e].toPos.y,ease:Linear.easeNone,delay:e*o.TIME_LIGHTNING/2,onComplete:function(e){this.listMCThunder[e].visible=!1,this.listFish[e]&&!this.listFish[e].isCaTran&&this.listFish[e].stun(),this.countTweenEffect++,this.countTweenEffect===this.listMaskSpriteThunder.length&&(this.listFish[e+1]&&!this.listFish[e+1].isCaTran&&this.listFish[e+1].stun(),this.dispose())}.bind(this,e)})}dispose(){super.dispose();for(let t=0;t<this.listMCThunder.length;t++){(e=this.listMCThunder[t]).gotoAndStop(0),e.destroy(),e=null}for(let t=0;t<this.listMaskSpriteThunder.length;t++){var e=this.listMaskSpriteThunder[t];TweenMax.killTweensOf(e),e.destroy(),e=null}}onEnterFrame(e){super.onEnterFrame(e)}}o.TIME_LIGHTNING=.6,t.a=o},function(e,t,i){"use strict";var s=i(6),o=i(71);class n extends s.a{constructor(){super(),this.listMCThunder=[],this.listMaskSpriteThunder=[],this.countTweenEffect=0,this.listFish=[],this.isMe=!1,this.bullet={},this._tweenMax=null,this._particle=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this._tweenMax&&(this._tweenMax=new TimelineMax({onComplete:this.dispose.bind(this)})),null===this._particle&&(this._particle=new o.a(n.EFFECT_PARTICLE)))}dispose(){super.dispose()}playEffect(e){this.listFish=e,this.blade=new PIXI.Sprite(ResourceManager.Atlas.AtlasGun105.textures.bullet105fire[0]),this.blade.anchor.set(.5,.5);for(let t=0;t<e.length-1;t++){const i=this.toLocal(e[t].position,AppInfo.gameMovie.layerEffect),s=this.toLocal(e[t+1].position,AppInfo.gameMovie.layerEffect),o=Utilities.Number.distanceBetweenTwoPoint(i.x,i.y,s.x,s.y);let n=Utilities.Number.angleRadBetweenTwoPoint(e[t],e[t+1]);n+=Utilities.toRad(90);const a=new TweenMax.to(this.blade,o/1200,{startAt:{x:i.x,y:i.y,rotation:n},x:s.x,y:s.y,ease:Linear.easeNone,onComplete:function(e){e&&(e.effectBounce(this.blade.rotation),e.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[e.type]||PreLoaderConfig.FishHitBulletDefault))}.bind(this,e[t]),onUpdate:()=>{this._particle._emitter.ownerPos.x=this.blade.x,this._particle._emitter.ownerPos.y=this.blade.y,this._particle._emitter.roration=this.blade.rotation}});this._tweenMax.add(a)}this.addChild(this.blade),this.addChild(this._particle),this._tweenMax.play(0),this._particle.playParticle(0,0)}onCompleteTween(){if(this.isMe){if(PreLoaderConfig.EnalbeFacebookShare){var e="";let t=0;for(let e=0;e<this.listFishID.length;e++)t+=this.listFishID[e];const i=this.bullet.id%(t+this.bullet.skillSkind+1)+this.bullet.id+0;let s=Math.floor(i*(i%3+1)>>i%t+4)%10;switch(s<0&&(s=Math.abs(s)),s){case 0:e="YD4I2W";break;case 1:e="P2ASMG";break;case 2:e="M1GGY2";break;case 3:e="MGVW5S";break;case 4:e="PENQX2";break;case 5:e="GGKYKB";break;case 6:e="NJHODH";break;case 7:e="D27HF1";break;case 8:e="BHBQBD";break;case 9:e="AYD2FV";break;default:e="skillCatchFish"}}else e="skillCatchFish";AppInfo.preLoader.requestController[e](this.bullet.basePosition,this.listFishID,this.bullet.skillSkind,this.bullet.id,this.bullet.power,PreLoaderConfig.EnalbeFacebookShare,{data:{originalEvent:!0}},e)}}_playSkillLightning(){}dispose(){super.dispose(),TweenMax.killTweensOf(this.blade),this.blade.destroy(),this.blade=null,this._particle.dispose(),this._particle=null}onEnterFrame(e){super.onEnterFrame(e)}}n.TIME_LIGHTNING=.6,n.EFFECT_PARTICLE={art:[{framerate:1,loop:!0,textures:["lightProgress.png"]}],alpha:{start:.97,end:1},scale:{start:1,end:.3,minimumScaleMultiplier:0},color:{start:"#ffffff",end:"#ffffff"},speed:{start:0,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:0},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.2,max:.5},blendMode:"normal",frequency:.01,emitterLifetime:-1,maxParticles:100,pos:{x:0,y:0},addAtBack:!1,spawnType:"point"},t.a=n},function(e,t,i){"use strict";var s=i(6),o=(i(4),i(71));class n extends s.a{constructor(e,t,i,s,o){super(o),this.particleCoin=null,this.userIdWin=null,this.listPlayer=null,this.borderSpin=null,this.arrowSpin=null,this.maskSpin=null,this.cricleSpin=null,this.listColorItems=[],this.txtCoinWin=null,this.coinWin=0,this.totalItems=[],this.listItems=[],this.spinContainer=null,this.coinWin=t,this.totalItems=e,this.userIdWin=i,this.spinContainer||(this.spinContainer=new PIXI.Container),this.listItems=[],this.listColorItems=[{color:16763972},{color:16720452},{color:48008},{color:12268526}],this.listPlayer=s,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,!this.borderSpin){var e=new PIXI.Graphics.Circle(0,0,205,16777215,1,1,16777215,0);this.borderSpin=new PIXI.Sprite(e.generateCanvasTexture()),this.borderSpin.anchor.set(.5,.5),this.borderSpin.position.set(0,0),this.spinContainer.addChild(this.borderSpin)}if(!this.borderSpin)(e=new PIXI.Graphics).beginFill(16777215,1),e.drawSlice(0,0,360,0,0,205),e.endFill(),this.borderSpin=new PIXI.Sprite(e.generateCanvasTexture()),this.borderSpin.anchor.set(.5,.5),this.borderSpin.position.set(0,0),this.spinContainer.addChild(this.borderSpin);let t;for(let i=0;i<2*this.totalItems;i++){4==this.totalItems?t=22.5:3==this.totalItems?t=30:2==this.totalItems?t=45:1==this.totalItems&&(t=90),(e=new PIXI.Graphics).beginFill(this.listColorItems[i%this.totalItems].color,1),e.drawSlice(0,0,-t,t,0,200),e.endFill();const s=new PIXI.Sprite(e.generateCanvasTexture());s.anchor.set(.5,1);const o=new PIXI.Text(this.listPlayer[i%this.totalItems].userName,{fontFamily:"Tahoma",fontSize:"20px",fontWeight:"Bold",fill:16777215});o.x=0,o.y=-170,o.anchor.set(.5),o.rotation=Math.PI,s.addChild(o),s.rotation=2*Math.PI/(2*this.totalItems)*i,s.x=0,s.y=0,s.name="item"+i,s.interactive=!1,s.buttonMode=!1,this.listItems.push(s),this.spinContainer.addChild(s)}if(!this.maskSpin){e=new PIXI.Graphics.Circle(0,0,100,0,.4,1,16777215,0);this.maskSpin=new PIXI.Sprite(e.generateCanvasTexture()),this.maskSpin.anchor.set(.5,.5),this.maskSpin.position.set(0,0),this.spinContainer.addChild(this.maskSpin)}if(this.addChild(this.spinContainer),!this.cricleSpin){const e=PIXI.Graphics.Circle(0,0,50,16777215,1,1,16777215,0);this.cricleSpin=new PIXI.Sprite(e.generateCanvasTexture()),this.cricleSpin.position.set(0,0),this.cricleSpin.anchor.set(.5),this.addChild(this.cricleSpin)}if(!this.arrowSpin){e=PIXI.Graphics.Triangle([-30,0,30,0,0,70],16777215,1,0,0,0);this.arrowSpin=new PIXI.Sprite(e.generateCanvasTexture()),this.arrowSpin.anchor.set(.5,0),this.arrowSpin.position.set(0,0),this.addChild(this.arrowSpin)}this.txtCoinWin||(this.txtCoinWin=new PIXI.Text(Utilities.Coin(this.coinWin),{fontFamily:"Tahoma",fill:16764928,fontSize:"15px",fontWeight:"bold",stroke:0,strokeThickness:2}),this.txtCoinWin.anchor.set(.5,.5),this.txtCoinWin.position.set(0,0),this.addChild(this.txtCoinWin))}this.scale.set(.2),this.interactive=!1,this.show()}spin(){this.spinContainer.rotation=0;const e=this.getItemUserWin(),t=this.getItemWin(e).rotation;TweenMax.killTweensOf(this.spinContainer),TweenMax.to(this.spinContainer,PreLoaderConfig.TimeRotationSpin,{rotation:PreLoaderConfig.AdditionRotationSpin-t,ease:Power4.easeOut,onStart:()=>{this.particelCoin||(this.particelCoin=new o.a(n.ConfigParticleSpinUpdate),AppInfo.gameMovie.layerEffect.addChild(this.particelCoin),this.particelCoin.playParticle(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2))},onComplete:()=>{this.onCompleteSpin(),this.particelCoin.dispose()}})}onCompleteSpin(){AppInfo.gameMovie.displayController.onFinishSpin(this.userIdWin,this.coinWin)}hide(){this.visible=!1}show(){this.visible=!0,TweenMax.killTweensOf(this),TweenMax.to(this,PreLoaderConfig.TimeShowSpin,{scaleX:1,scaleY:1,ease:Elastic.easeOut.config(1,.5),onComplete:this.spin.bind(this)})}getItemUserWin(){for(let e=0;e<this.listPlayer.length;e++)if(this.listPlayer[e].userID==this.userIdWin)return e;return null}getItemWin(e){return this.spinContainer.getChildByName("item"+e)}dispose(){super.dispose(),TweenMax.killTweensOf(this.spinContainer),TweenMax.killTweensOf(this),this.particelCoin&&(this.particelCoin.dispose(),this.particelCoin=null),this.txtCoinWin&&(this.txtCoinWin.destroy(),this.txtCoinWin=null),this.arrowSpin&&(this.arrowSpin.destroy(),this.arrowSpin=null),this.cricleSpin&&(this.cricleSpin.destroy(),this.cricleSpin=null),this.maskSpin&&(this.maskSpin.destroy(),this.maskSpin=null),this.borderSpin&&(this.borderSpin.destroy(),this.borderSpin=null),this.spinContainer&&(this.spinContainer.destroy(),this.spinContainer=null)}}n.ConfigParticleSpinUpdate={art:[{framerate:20,loop:!0,textures:["CoinWin0.png","CoinWin2.png","CoinWin3.png","CoinWin4.png","CoinWin5.png","CoinWin6.png","CoinWin7.png","CoinWin8.png"]},{framerate:20,loop:!0,textures:["CoinWin8.png","CoinWin7.png","CoinWin6.png","CoinWin5.png","CoinWin4.png","CoinWin3.png","CoinWin2.png","CoinWin1.png"]}],alpha:{start:1,end:1},scale:{start:.2,end:.8,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:100,end:1e3,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:100,max:100},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:4,max:1},blendMode:"normal",frequency:.01,emitterLifetime:-1,maxParticles:150,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:210,minR:0}},t.a=n},function(e,t,i){"use strict";t.a=class{constructor(){this.timeLineMax=null,this.listContext=[],this.listFish=[],this.contextID=null,this.listFish=[],this.listContext=[],this.listDelay=[],this.timeLineMax=new TimelineMax({autoRemoveChildren:!0})}setupContext(e){AppInfo.gameMovie.gameBoard.newMessFishTrace=!0,this.listContext=[];for(let t=0;t<e.length;t++)this.listContext.push(e[t])}buildRandomContext(){const e=Utilities.Number.randRange(1,this.listContext.length-1);this.buildListFishByContextID(e,0,0)}buildListFishByContextID(e,t,i){const s=this.getContextID(e);if(null!==s)if(0===i){var o=s.fishes;this.parseData(t,i,o)}else{let e;i+=1e3;const o=[];for(e=0;e<s.fishes.length;e++)i<s.fishes[e].time&&o.push(s.fishes[e]);this.parseData(t,i,o)}}parseData(e,t,i){this.resetTimeLine();const s=i.length;i[s-1];let o,n=e;for(o=s-1;o>-1;o--)if(i[o].time>=t){n-=i[o].quantity;const e=TweenMax.delayedCall((i[o].time-t)/1e3,this.addFish.bind(this),[n+1,i[o]]);this.timeLineMax.insert(e),this.listDelay.push(e)}this.timeLineMax.play()}resetTimeLine(){this.timeLineMax.getChildren();for(let e=0;e<this.listDelay.length;e++)this.listDelay[e].kill();this.timeLineMax.restart(),this.timeLineMax.pause(),this.listDelay=[]}addFish(e,{quantity:t,path:i,fishType:s}){if(this)for(let o=0;o<t;o++){let n;4!==t?(n=t>=5?this.drawFishCirle(i,t,o):i,AppInfo.gameMovie.displayController.addGroupFish(e+o,s,n,t,0,!1,!0)):(n=this.drawFishQuere(i,t,o),this.listDelay.push(TweenMax.delayedCall(.5*o,AppInfo.gameMovie.displayController.addGroupFish,[e+o,s,n,t,0,!1,!0])))}}_processPath(e){const t=new PIXI.Graphics;return t.lineStyle(2,16777215,1),t.bezierCurveTo(e[0].x,e[0].y,e[1].x,e[1].y,e[2].x,e[2].y),t.listPath=e,AppInfo.gameMovie.layerEffect.addChild(t),e}getContextID(e){let t;const i=this.listContext.length;for(t=0;t<i;t++){const i=this.listContext[t];if(i.contextID===e)return i}return null}_setupFish0(e,t,i){let s=[];const o=Math.round(Math.sqrt(12800));let n=Utilities.toRad(360/t);n*=i;const a=o*Math.cos(n),h=o*Math.sin(n);e[1].x=(e[0].x+e[2].x)/2,e[1].y=(e[0].y+e[2].y)/2;const l=(e[0].x+e[1].x)/2,r=(e[0].y+e[1].y)/2,p=l-(e[0].y-r)*Math.tan(90),d=r-(e[0].x-l)*Math.tan(90),c=(e[1].x+e[2].x)/2,u=(e[1].y+e[2].y)/2,m=c-(e[1].y-u)*-Math.tan(90),f=u-(e[1].x-c)*-Math.tan(90),g=Utilities.Number.randRange(10,20),I=Utilities.Number.randRange(10,20);return s=[{x:e[0].x,y:e[0].y},{x:p,y:d},{x:e[1].x+a+g,y:e[1].y+h+I},{x:m,y:f},{x:e[2].x-a/2,y:e[2].y-h/2}],s}drawFishCirle(e,t,i){let s=[];const o=Math.round(Math.sqrt(5e3));let n=Utilities.toRad(360/t);n*=i;const a=o*Math.cos(n),h=o*Math.sin(n),l=Utilities.Number.randRange(10,20),r=Utilities.Number.randRange(10,20);return s=[{x:e[0].x+a+l,y:e[0].y+h+r},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[1].x+a+l,y:e[1].y+h},{x:e[2].x+a+l,y:e[2].y+h}],s}drawFishQuere(e,t,i){let s=[];return s=[{x:e[0].x,y:e[0].y},{x:e[1].x-180,y:e[1].y},{x:e[1].x-180,y:e[1].y},{x:e[1].x+180,y:e[1].y},{x:e[1].x+180,y:e[1].y+180},{x:e[1].x+180,y:e[1].y+360},{x:e[1].x,y:e[1].y+360},{x:e[1].x-180,y:e[1].y+360},{x:e[1].x-180,y:e[1].y+180},{x:e[1].x-180,y:e[1].y},{x:e[1].x,y:e[1].y},{x:e[1].x,y:e[1].y},{x:e[2].x,y:e[2].y}],s}dispose(){TweenMax.killTweensOf(this),this.timeLineMax&&(this.timeLineMax.kill(),this.timeLineMax=null);for(let e=0;e<this.listDelay.length;e++)this.listDelay[e].kill();this.listDelay.length=0,this.listContext.length=0,this.listFish.length=0}}},function(e,t,i){"use strict";(function(e){var s=i(6);class o extends s.a{constructor(e,t,i,s){super(),this.movie=null,this.id=0,this.type=null,this.name=null,this.listFishInSide=[],this.isLock=!1,this.lockSprite=null,this.listFishInSide=[],this.name="fish"+e,this.id=e,this.type=t,this.isLock=!1,this.init()}init(){if(super.init(),this._isDisposed&&(this._isDisposed=!1,null==this.movie)){const e=PreLoaderConfig.ListBossSpineConfig[this.type]||PreLoaderConfig.ListBossSpineConfig[53];this.movie=new PIXI.spine.Spine(ResourceManager.Atlas[e].textures[e].spineData),this.addChild(this.movie)}}run(){}onMouseClickToClock(){if(PreLoaderConfig.LockFishConfig.enableLock)for(let e=0;e<PreLoaderConfig.LockFishConfig.listFish.length;e++)if(PreLoaderConfig.LockFishConfig.listFish[e]===this.type)return void AppInfo.preLoader.globalCompoController.compoToast.addMessage(PreLoaderConfig.LockFishConfig.message);if(PreLoaderConfig.LockFishConfig.enableRedFish&&this.isRedFish)return void AppInfo.preLoader.globalCompoController.compoToast.addMessage(PreLoaderConfig.LockFishConfig.message);AppInfo.gameMovie.displayController.onUnreadyLockFish(),AppInfo.gameMovie.gameBoard.lockFish=this,e.isMobilePage||this.isHoverFish||AppInfo.listLogType.includes(1)||(AppInfo.listLogType.push(1),AppInfo.preLoader.requestController.userLog(1));const t=performance.now()-AppInfo.gameMovie.gameBoard.timeMouseClickBtnLockFish,i=AppInfo.preLoader.renderer.plugins.interaction.eventData.data.global,s=Utilities.Number.distanceBetweenTwoPoint(AppInfo.gameMovie.gameBoard.mousePositionClickBtnLockFish.x,AppInfo.gameMovie.gameBoard.mousePositionClickBtnLockFish.y,i.x,i.y)/t;s>1.5&&(AppInfo.listLogType.includes(2)||(AppInfo.listLogType.push(2),AppInfo.preLoader.requestController.userLog("2|"+s))),this.lock()}readyForLock(){this.interactive=!0,this.interactiveChildren=!0,this.movie.interactive=!0,this.movie.buttonMode=!0,this.movie.mouseclick=this.onMouseClickToClock.bind(this)}unreadyForLock(){this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,this.movie.buttonMode=!1,this.movie.mouseclick=null}unLock(){AppInfo.gameMovie.gameBoard.lockFish&&AppInfo.gameMovie.gameBoard.lockFish.id==this.id&&(AppInfo.gameMovie.gameBoard.lockFish=null,AppInfo.gameMovie.displayController.myBaseStation&&AppInfo.gameMovie.displayController.myBaseStation.onCancelLockFish());for(var e=0;e<AppInfo.gameMovie.gameBoard.listBullet.length;e++)AppInfo.gameMovie.gameBoard.listBullet[e].lockFishID==this.id&&(AppInfo.gameMovie.gameBoard.listBullet[e].lockFishID=0);for(e=0;e<AppInfo.gameMovie.displayController.listBaseStation.length;e++)AppInfo.gameMovie.displayController.listBaseStation[e].compoGun.lockFishID==this.id&&(AppInfo.gameMovie.displayController.listBaseStation[e].compoGun.lockFishID=0);this.interactive=!1,this.interactiveChildren=!1,this.movie.interactive=!1,this.movie.buttonMode=!1,this.movie.mouseclick=null,this.isLock=!1,this.lockSprite&&(this.removeChild(this.lockSprite),this.lockSprite.destroy(),this.lockSprite=null)}lock(){this.isLock||(this.isLock=!0,null==this.lockSprite&&(this.lockSprite=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.gunLock),this.lockSprite.interactive=!1,this.lockSprite.hitArea=PIXI.Rectangle.EMPTY,this.lockSprite.name="lockSprite",this.lockSprite.anchor.set(.5,.5)),this.lockSprite.x=this.movie.oriWidth,this.lockSprite.y=this.movie.oriHeight,this.addChild(this.lockSprite))}stun(){}stone(){}onUpdateStone(){}unStone(){}resumeGame(){}die(){TweenMax.killTweensOf(this),this.isLock?this.unLock():this.unreadyForLock(),PreLoaderConfig.ListFishIDHaveDieTexture.includes(this.type)?this.movie.onComplete=this.onCompleteFishWithEffectDie.bind(this):PreLoaderConfig.ListFishIDNoRotateWhenDie.includes(this.type)?TweenMax.to(this,2,{alpha:0,onComplete:this.onCompleteFishWithEffectDie.bind(this)}):(TweenMax.to(this,.07,{rotation:Math.PI/4,yoyo:!0,ease:Linear.easeNone,repeat:101}),TweenMax.to(this,.5,{alpha:0,delay:1.5,ease:Linear.easeNone,onComplete:this.onCompleteFishWithEffectDie.bind(this)})),this.type>=32&&(AppInfo.gameMovie.displayController.updateHpBoss(0),AppInfo.preLoader.soundController.stopBossComingSound())}onCompleteFishWithEffectDie(){this.dispose()}dispose(){super.dispose(),this.isLock?this.unLock():this.unreadyForLock(),TweenMax.killTweensOf(this),AppInfo.gameMovie.gameBoard.listFish.includes(this)&&AppInfo.gameMovie.gameBoard.removeFishAtIndex(AppInfo.gameMovie.gameBoard.listFish.indexOf(this)),this.movie&&(this.removeChild(this.movie),this.movie.destroy(),this.movie=null),AppInfo.gameMovie.gameBoard.currentBoss&&this.type==AppInfo.gameMovie.gameBoard.currentBoss.type&&(AppInfo.gameMovie.gameBoard.currentBoss=null,AppInfo.preLoader.soundController.stopBossComingSound())}onHitBullet(e){AppInfo.preLoader.soundController.playTrungCa()}}t.a=o}).call(this,i(3))},function(e,t,i){"use strict";var s=i(6),o=i(141);class n extends s.a{constructor(){super(),this.chatUI=null,this.seasonNoel=null,this.isShowChatUI=!1,this.cacheFunction=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this.chatUI&&(this.chatUI=new o.a,this.addChild(this.chatUI)),PreLoaderConfig.SeasonEvent.EnableEvent&&PreLoaderConfig.SeasonEvent.EventNoel&&null===this.seasonNoel&&(this.seasonNoel=new PIXI.Sprite(ResourceManager.Atlas.AtlasBackgroundHoYeahNoel.textures.chat),this.seasonNoel.y=227,this.addChild(this.seasonNoel)),this.cacheFunction=this.openBoxChat.bind(this),document.addEventListener("keydown",this.cacheFunction))}appendChat(e,t){this.chatUI.appendChat(e,t)}openBoxChat({keyCode:e}){13==e&&(this.chatUI.isShow||this.chatUI.txtInput.hasFocus?this.chatUI.isShow&&!this.chatUI.txtInput.hasFocus&&this.chatUI.hideBoxChat():this.chatUI.showBoxChat())}updateOverlayUI(e,t){this.chatUI.updateOverlay(e,t)}dispose(){let e;for(document.removeEventListener("keydown",this.cacheFunction);this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy(),e=null}catch(e){}}TweenMax.killTweensOf(this),super.dispose()}}t.a=n},function(e,t,i){"use strict";(function(e){var s=i(6),o=i(4),n=i(142);class a extends s.a{constructor(){super(),this.bg=null,this.scrollContent=null,this.scrollArea=null,this.layoutGroup=null,this.txtInput=null,this.btnSend=null,this.iconNotify=null,this.toastChat=null,this.isShow=!1,this.scrollBar=null,this.textInputMaskInGame=null,this.maskContent=null,this.themeBG=null,this.focusFuction=null,this.blurFuction=null,this.overlay=null,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null===this.overlay&&(this.overlay=new PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,16777215,0),this.overlay.visible=!1,this.overlay.interactive=!0,this.overlay.buttonMode=!0,this.overlay.mouseclick=this.showHideBoxChat.bind(this),this.addChild(this.overlay)),this.styleText={styleMyNick:{fontFamily:"Arial",fontSize:"13px",fontWeight:"bold",align:"left",fill:"#59ff6d",wordWrap:!0,wordWrapWidth:270},styleOtherNick:{fontFamily:"Arial",fontSize:"13px",fontWeight:"bold",align:"left",fill:"#4290e9",wordWrap:!0,wordWrapWidth:270},styleContent:{fontFamily:"Arial",fontSize:"13px",fontWeight:"bold",align:"left",fill:16777215,wordWrap:!0,wordWrapWidth:270}},null===this.bg&&(this.bg=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoChat.textures.BGChatBox),this.bg.visible=!1,this.addChild(this.bg)),null===this.scrollContent&&(this.scrollContent=new PIXI.Container,this.maskContent=PIXI.Graphics.Rectangle(0,0,295,265,16777215),this.scrollContent.mask=this.maskContent),null===this.scrollArea&&(this.layoutGroup=new GOWN.LayoutGroup,this.layoutGroup.layout=new GOWN.VerticalLayout,this.layoutGroup.layout.gap=0,this.scrollArea=new GOWN.ScrollArea(this.layoutGroup),this.scrollArea._useMask=!1,this.scrollArea.width=320,this.scrollArea.height=250,this.scrollArea.x=10,this.scrollArea.y=10,this.scrollArea.hitArea=new PIXI.Rectangle(0,40,300,260)),null===this.scrollBar){const e=new GOWN.Theme(!1);e.setSkin(GOWN.ScrollThumb.SKIN_NAME,GOWN.ScrollThumb.THUMB_STATES[1],()=>new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoChat.textures.ThumbNew)),e.setSkin(GOWN.ScrollThumb.SKIN_NAME,GOWN.ScrollThumb.THUMB_STATES[3],()=>new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoChat.textures.ThumbNew)),e.setSkin(GOWN.ScrollThumb.SKIN_NAME,GOWN.ScrollThumb.THUMB_STATES[5],()=>new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoChat.textures.ThumbNew)),e.setSkin(GOWN.ScrollBar.SKIN_NAME,"vertical_track",()=>new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoChat.textures.bgScroll)),this.scrollBar=new GOWN.ScrollBar(this.scrollArea,null,e),this.scrollBar.x=this.scrollArea.width-40,this.scrollBar.y=15,this.scrollBar.height=this.scrollArea.height,this.scrollBar.redraw(),this.scrollBar.thumb.width=4,this.scrollBar.thumb.height=43,this.scrollBar.thumb.x=1,this.scrollBar.thumb.interactive=!0,this.scrollBar.thumb.buttonMode=!0,this.renderer.view.addEventListener("wheel",function({wheelDeltaX:e,wheelDeltaY:t,deltaX:i,deltaY:s}){let o,n;e||t?(o=this.thumb.x-e/70*this.scrolldelta,n=this.thumb.y-t/70*this.scrolldelta):(i||s)&&(o=this.thumb.x- -1*i/1.75*this.scrolldelta,n=this.thumb.y- -1*s/1.75*this.scrolldelta),this.moveThumb(o,n)&&this.thumbMoved(o,n)}.bind(this.scrollBar),!1),this.layoutGroup.height=(this.layoutGroup.height+this.layoutGroup.layout.gap)*this.layoutGroup.numChildren,this.scrollBar.visible=this.layoutGroup.height>this.scrollArea.height}if(null===this.txtInput){null===this.themeBG&&(this.themeBG=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoChat.textures.bgText));const e={hintText:PreLoaderConfig.CompoChat.hintText,themeTexture:this.themeBG,isPass:!1,font:"Arial",size:15,color:"#fffdf5"};this.txtInput=this.initInputText("",e),this.addChild(this.themeBG),this.addChild(this.txtInput),this.txtInput.onSubmit=this.onSubmitInput.bind(this),this.txtInput.position.set(28,this.bg.height-this.themeBG.height),this.txtInput.hitArea=new PIXI.Rectangle(0,0,230,40),this.themeBG.position.set(this.txtInput.x,this.txtInput.y),this.textInputMaskInGame=new PIXI.Graphics,this.textInputMaskInGame.beginFill(16711680,0),this.textInputMaskInGame.drawRect(0,0,220,50),this.textInputMaskInGame.endFill(),this.textInputMaskInGame.hitArea=PIXI.Rectangle.EMPTY,this.textInputMaskInGame.x=this.txtInput.x+5,this.textInputMaskInGame.y=this.txtInput.y-1,this.txtInput.mask=this.textInputMaskInGame,this.addChild(this.textInputMaskInGame)}null===this.btnSend&&(this.btnSend=new o.a(ResourceManager.Atlas.AtlasCompoChat.textures.btnSend),this.addChild(this.btnSend),this.btnSend.position.set(255,275),this.btnSend.mouseclick=this.onSubmitInput.bind(this)),null===this.iconNotify&&(this.iconNotify=new o.a(ResourceManager.Atlas.AtlasCompoChat.textures.IconEmotionNew),this.addChild(this.iconNotify),this.iconNotify.position.set(3,280),this.iconNotify.mouseclick=this.showHideBoxChat.bind(this)),null===this.toastChat&&(this.toastChat=new n.a,this.addChild(this.toastChat)),this.scrollContent.addChild(this.scrollArea),this.scrollContent.addChild(this.scrollBar),this.addChild(this.scrollContent),this.addChild(this.maskContent),this.maskContent.hitArea=PIXI.Rectangle.EMPTY,this.hideBoxChat(),e.isMobilePage&&!AppInfo.isRunInApp||(this.txtInput.interactive=!1,this.txtInput.hitArea=PIXI.Rectangle.EMPTY)}}appendToastChat(e,t){this.isShow?this.toastChat.visible=!1:(this.toastChat.visible=!0,this.toastChat.x=30,this.toastChat.y=this.bg.height-130,this.toastChat.addToastMessage(e,t))}showHideBoxChat(){this.isShow?this.hideBoxChat():this.showBoxChat()}hideBoxChat(){TweenMax.killTweensOf(this.bg),this.scrollArea.visible=!1,this.scrollBar.visible=!1,TweenMax.to(this.bg,.5,{y:this.bg.height,ease:Back.easeIn,onComplete:()=>{this.bg.visible=!1}}),this.isShow=!1,this.overlay&&(this.overlay.visible=!1),this.txtInput.hint.visible=!0,this.txtInput.text="",this.txtInput.blur(),e.isMobilePage&&!AppInfo.isRunInApp&&(TweenMax.to(this,.5,{y:this.oriY}),this.overlay.y=this.overlay.y-(AppInfo.appRealHeight/2+40))}showBoxChat(){this.bg.visible=!0,TweenMax.killTweensOf(this.bg),TweenMax.to(this.bg,.5,{y:0,ease:Back.easeOut,onComplete:()=>{this.scrollArea.visible=!0,this.scrollBar.visible=this.layoutGroup.height>this.scrollArea.height,this.overlay&&(this.overlay.visible=!0),this.isShow=!0,this.txtInput.hasFocus=!0,this.toastChat.visible=!1,this.txtInput.mouseclick(),this.txtInput.focus(),this.txtInput.updateTextState()}}),e.isMobilePage&&!AppInfo.isRunInApp&&(TweenMax.to(this,.5,{y:-AppInfo.appRealHeight/2-40}),this.overlay.y=this.overlay.y+(AppInfo.appRealHeight/2+40))}initInputText(e,t){const i=t.font||"Arial",s=t.size||20,o=t.isPass||!1,n=t.themeTexture||null,a=t.hintText||"",h=t.color,l=new GOWN.Theme(!1);l.setSkin(GOWN.TextInput.SKIN_NAME,GOWN.TextInput.BACKGROUND,()=>new PIXI.Sprite(n.texture));const r=new GOWN.TextInput("",o,l);return r.children[1].visible=!1,r.maxChars=40,r.pixiText.style={fontSize:s,fontFamily:i,fill:h},r.cursor.style={fontSize:s,fontFamily:i,fill:h},r.hint.style={fontSize:s,fontFamily:i,fill:"#ffffff"},r.hint.text=a,r.hint.x=(n.width-r.hint.width)/2,r.hint.y=(n.height-r.hint.height)/2,r.pixiText.x=10,r.pixiText.y=n.height/2,r.cursor.anchor.set(.5,0),r.cursor.y=(n.height-r.cursor.height)/2,r.cursorPos=0,r.change=e=>{r.hint.visible=""==e,r.pixiText.y=(n.height-r.pixiText.height)/2,r.pixiText.width>210&&(r.x=210-r.pixiText.width+20)},r.mouseclick=function(){this.hint.visible=!1,0==r.pixiText.width&&(r.hint.visible=!0),r.parent.isShow||r.parent.showBoxChat()}.bind(r),r}appendChat(e,t){const i=new PIXI.Container;let s;s=e==AppInfo.MyInfo.nickName?new PIXI.Text(e.trim()+": ",this.styleText.styleMyNick):new PIXI.Text(e.trim()+": ",this.styleText.styleOtherNick),s.cacheAsBitmap=!0,s._width=s.width,s._height=s.height;const o=new PIXI.Sprite(s.texture),n=this.appendSpaceHeadString(this.styleText.styleMyNick,o.width,s.text),a=new PIXI.Text(n+t.trim(),this.styleText.styleContent);a.cacheAsBitmap=!0,a._width=a.width,a._height=a.height;const h=new PIXI.Sprite(a.texture);i.addChild(h),i.addChild(o),this.layoutGroup.addChild(i),this.scrollArea.content.y=-this.layoutGroup.height+this.scrollArea.height-h.height,this.scrollBar.moveThumb(this.scrollBar.thumb.x,this.scrollArea.content.height),TweenMax.to(i,.2,{alpha:0,yoyo:!0,repeat:3}),this.appendToastChat(e,t),this.isShow&&(this.scrollBar.visible=this.layoutGroup.height>this.scrollArea.height)}appendSpaceHeadString(e,t,i){return i}onSubmitInput(){if(""!==this.txtInput.text){if(PreLoaderConfig.BlockChat.ListGameNotApply.includes(PreLoaderConfig.GameID))AppInfo.preLoader.requestController.userChat(a.TYPE_CHAT_TEXT,this.txtInput.text);else{const e=this.convertTextChat(this.txtInput.text);void 0!==e&&this.checkContentText(e)?(AppInfo.gameSetting.ListChatContent.push(e),AppInfo.preLoader.storageController.save(),AppInfo.gameSetting.ListChatContent.length>=PreLoaderConfig.BlockChat.LenListChatContent&&(AppInfo.gameSetting.ListChatContent.splice(0,1),AppInfo.preLoader.storageController.save()),this.appendChat(AppInfo.MyInfo.nickName,this.txtInput.text),AppInfo.preLoader.requestController.userChat(a.TYPE_CHAT_TEXT,this.txtInput.text)):this.appendChat(AppInfo.MyInfo.nickName,this.txtInput.text)}this.txtInput.text="",this.txtInput.x=28,this.txtInput.hasFocus=!0}else this.txtInput.hasFocus=!1}checkContentText(e){let t=0,i=0;for(let s=0;s<AppInfo.gameSetting.ListChatContent.length;s++){let o=AppInfo.gameSetting.ListChatContent[s].length;0===o&&(o=1),i=100*e.length/o,i>100?e.includes(AppInfo.gameSetting.ListChatContent[s])&&i>PreLoaderConfig.BlockChat.PercentTextCoincident&&""!==AppInfo.gameSetting.ListChatContent[s]&&t++:AppInfo.gameSetting.ListChatContent[s].includes(e)&&i>PreLoaderConfig.BlockChat.PercentTextCoincident&&""!==AppInfo.gameSetting.ListChatContent[s]&&t++}return t<PreLoaderConfig.BlockChat.MaxCoincidentContentChat}convertTextChat(e){if(PreLoaderConfig.BlockChat.isCanChat){let t="",i="",s=0;if((e=e.toLowerCase()).length>PreLoaderConfig.BlockChat.MinChatConvert){for(let o=0;o<e.length;o++)this._removerText(e[o])&&(t+=e[o],s++,s>=PreLoaderConfig.BlockChat.MaxCharCoincident&&(i=t.slice(s-PreLoaderConfig.BlockChat.MaxCharCoincident,t.length),this._checkText(i)&&(t=t.substring(0,t.length-PreLoaderConfig.BlockChat.MaxCharCoincident),s-=PreLoaderConfig.BlockChat.MaxCharCoincident)));PreLoaderConfig.BlockChat.isCanChat=!1,setTimeout(()=>{PreLoaderConfig.BlockChat.isCanChat=!0},1e3*PreLoaderConfig.BlockChat.timeChat)}else t=e;return t}}_removerText(e){for(let t=0;t<PreLoaderConfig.BlockChat.ListTextRemover.length;t++)if(e===PreLoaderConfig.BlockChat.ListTextRemover[t])return!1;return!0}_checkText(e){let t="",i=1;for(let s=0;s<e.length;s++)0===s?t=e[s]:t===e[s]&&i++;return i>=PreLoaderConfig.BlockChat.MaxCharCoincident}updateOverlay(e,t){null!==this.overlay&&(this.overlay.x=-e,this.overlay.y=-t,this.oriY=this.y)}dispose(){let e;for(super.dispose(),TweenMax.killTweensOf(this);this.numChildren>0;)e=this.getChildAt(0),TweenMax.killTweensOf(e),e.parent&&e.parent.removeChild(e),e.dispose?(e.dispose(),e=null):e.destroy&&(e.destroy(),e=null)}}a.TYPE_CHAT_TEXT=1,t.a=a}).call(this,i(3))},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(e),this.generalStyleContent=null,this.generalStyleNickName=null,this.currentPosY=0,this.listPosition=null,this.listMessage=null,this.containerBox=null,this.listMessage=[],this.listPosition=[],this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this.containerBox&&(this.containerBox=new PIXI.Container,this.containerBox.y=40,this.addChild(this.containerBox)),null===this.generalStyleNickName&&(this.generalStyleNickName={fontFamily:"Arial",fontSize:"13px",fontWeight:"bold",align:"left",fill:"#28ff00",stroke:0,strokeThickness:2}),null===this.generalStyleContent&&(this.generalStyleContent={fontFamily:"Arial",fontSize:"13px",fill:16777215,align:"left",wordWrap:!0,wordWrapWidth:170,stroke:0,strokeThickness:2}))}createMaskInContainer(e,t,i,s){const o=new PIXI.Graphics.Rectangle(e,t,i,s,16777215);o.hitArea=PIXI.Rectangle.EMPTY,this.addChild(o),this.containerBox.mask=o}setStyleContentChat(e,t){this.generalStyleNickName=e,this.generalStyleContent=t}addToastMessage(e,t){const i=new PIXI.Container,s=new PIXI.Text(e+": ",this.generalStyleNickName);s.cacheAsBitmap=!0,s._width=s.width,s._height=s.height;const o=new PIXI.Sprite(s.texture);o.interactive=!1,o.hitArea=PIXI.Rectangle.EMPTY,i.addChild(o);const n=new PIXI.Text(t.trim(),this.generalStyleContent);n.cacheAsBitmap=!0,n._width=n.width,n._height=n.height;const a=new PIXI.Sprite(n.texture);a.interactive=!1,a.hitArea=PIXI.Rectangle.EMPTY,a.x=o.x+o.width,i.addChild(a),this.listPosition.push(this.currentPosY),this.currentPosY-=i.height,this.listMessage.push(i),this.containerBox.addChild(i),i.y=this.listPosition[this.listMessage.length-1]-40,setTimeout(this.effectRemoveMessage.bind(this,i),1e3*PreLoaderConfig.TimeShowToastChat),this.effectPush()}effectPush(){TweenMax.to(this.listMessage[this.listMessage.length-1],.4,{y:this.listPosition[this.listMessage.length-1]})}effectRemoveMessage(e){this.currentPosY=this.currentPosY+e.height;for(let t=0;t<this.listPosition.length;t++)this.listPosition[t]=this.listPosition[t]+e.height;TweenMax.to(e,.4,{x:-e.width-e.x-100,alpha:0,ease:Linear.easeNone,onComplete:()=>{this.containerBox.removeChild(e),this.listMessage.splice(e,1),this.listPosition.splice(0,1),this.updatePositionToastMessage()}})}updatePositionToastMessage(){for(let e=0;e<this.containerBox.numChildren;e++){const t=this.containerBox.children[e];TweenMax.to(t,.4,{y:this.listPosition[e]})}}hide(){TweenMax.to(this.containerBox,.4,{x:-this.containerBox.width,alpha:0,ease:Linear.easeNone,onComplete:()=>{this.containerBox.visible=!1}})}show(){this.containerBox.visible=!0,TweenMax.to(this.containerBox,.4,{x:0,alpha:1,ease:Linear.easeNone})}dispose(){let e;for(;this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy(),e=null}catch(e){}}TweenMax.killTweensOf(this),super.dispose()}}t.a=o},function(e,t,i){"use strict";var s=i(6),o=i(71),n=i(100);class a extends s.a{constructor(){super(),this._stone=null,this._listBubbleParticle=[],this._particleFireFly=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.bg=new PIXI.Sprite(PIXI.Texture.WHITE),this.bgTemp=new PIXI.Sprite(PIXI.Texture.WHITE),this.bg.width=this.bgTemp.width=AppInfo.appRealWidth,this.bg.height=this.bgTemp.height=AppInfo.appRealHeight,this.addChild(this.bg),this.addChild(this.bgTemp))}playEffect(e,t){switch(e){case 4:case 5:default:this._playEffectDefault(e,t)}}_playEffectDefault(e,t){if(!t)if(AppInfo.GameInfo.kindID===PreLoaderConfig.RoomOcean.kindId)switch(AppInfo.gameMovie.gameBoard.roomSevenSeaKind){case 101:t=ResourceManager.Atlas.AtlasBackgroundBanCaMedusa.textures.BG[e-1];break;case 102:t=ResourceManager.Atlas.AtlasBackgroundBanCaCentaur.textures.BG[e-1];break;case 103:t=ResourceManager.Atlas.AtlasBackgroundPoseidon.textures.BG[0]}else t=ResourceManager.Atlas.AtlasBackgroundBanCa.textures.BG[e-1];this._playEffectChangeBG(t)}_playEffectChangeBG(e){this.bgTemp.texture=this.bg.texture,this.bg.texture=e,this.bgTemp.visible=!0,TweenMax.to(this.bgTemp,2,{startAt:{alpha:1},alpha:0,onComplete:()=>{this.bgTemp.visible=!1}}),this.bg.alpha=1}stopAll(){this._stone&&(this._stone.visible=!1);for(let e=0;e<this._listBubbleParticle.length;e++)this._listBubbleParticle[e].visible=!1;this._particleFireFly&&(this._particleFireFly.visible=!1)}_playEffectBG4(){null===this._stone&&(this._stone=new PIXI.Sprite(ResourceManager.Atlas.AtlasBackgroundBanCa.textures.item4bg),this._stone.anchor.set(.5),this._stone.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this.addChild(this._stone)),null===this._particleFireFly&&(this._particleFireFly=new o.a(a.FIRE_FLY),this.addChild(this._particleFireFly)),this._particleFireFly.playParticle(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._stone.visible=!0,TweenMax.to(this._stone,5,{startAt:{scaleX:1,scaleY:1},scaleX:1.2,scaleY:1.2,yoyo:!0,repeat:-1,ease:Linear.easeNone})}_playEffectBG5(){if(0===this._listBubbleParticle.length){let t;for(var e=0;e<a.LIST_PARTICLE.length;e++)t=new o.a(a.BUBBLE_PARTICLE),this.addChild(t),this._listBubbleParticle.push(t),t.playParticle(a.LIST_PARTICLE[e].x,a.LIST_PARTICLE[e].y)}else for(e=0;e<a.LIST_PARTICLE.length;e++)this._listBubbleParticle[e].visible=!0}setupEffect(e){this.stopAll(),this.playEffect(e)}switchBattleBoss(e){e===n.a.MEDUSA&&this._playEffectChangeBG(ResourceManager.Atlas.AtlasBackgroundBanCaMedusa.textures.BGBattleMedusa)}randomBackground(e){}dispose(){super.dispose(),this._stone&&(TweenMax.killTweensOf(this._stone),this._stone.destroy());for(let e=0;e<this._listBubbleParticle.length;e++)this._listBubbleParticle[e].dispose(),this._listBubbleParticle[e]=null;this._listBubbleParticle=[]}}a.LIST_PARTICLE=[{x:1111,y:287},{x:619,y:563},{x:382,y:582},{x:1070,y:470},{x:778,y:194},{x:86,y:286}],a.FIRE_FLY={art:[{framerate:8,loop:!0,textures:["lightProgress.png"]}],alpha:{start:.59,end:1},scale:{start:.1,end:.35,minimumScaleMultiplier:.1},color:{start:"#08fc00",end:"#00ff33"},speed:{start:20,end:20,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:50,max:70},noRotation:!1,rotationSpeed:{min:0,max:200},lifetime:{min:5,max:5},blendMode:"normal",ease:[{s:0,cp:.379,e:.548},{s:.548,cp:.717,e:.676},{s:.676,cp:.635,e:1}],frequency:.05,emitterLifetime:-1,maxParticles:200,pos:{x:0,y:0},addAtBack:!1,spawnType:"ring",spawnCircle:{x:0,y:0,r:50,minR:0}},a.BUBBLE_PARTICLE={art:[{framerate:8,loop:!0,textures:["FishDieParticle5explode2.png","FishDieParticle5explode3.png"]}],alpha:{start:1,end:0},scale:{start:.1,end:.25,minimumScaleMultiplier:.5},color:{start:"#ffffff",end:"#ffffff"},speed:{start:20,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:0},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:1,max:5},blendMode:"normal",frequency:.1,emitterLifetime:-1,maxParticles:10,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:30,h:30}},t.a=a},function(e,t,i){"use strict";var s=i(70);class o extends PIXI.Container{constructor(e){super(),this.idBoomFish=e,this.listFishCatched=[],this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasFish23.textures.fish23Die),this.movie.loop=!1,this.movie.anchor.set(.5),this.movie.animationSpeed=.25,this.movie.play(),this.addChild(this.movie),this.movie.onComplete=()=>{this.movie&&(this.movie.destroy(),this.movie=null)};const t=AppInfo.gameMovie.collisionManager.addCircle(this,300,s.a.TYPE_COLLISION.GENERIC,this.movie);t.checkRoundOnce=!0,t.onRelease=this.requestCatchFish.bind(this),this.circleRainBow=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.EffectBoom),this.circleRainBow.anchor.set(.5),this.circleRainBow.animationSpeed=1/12,this.circleRainBow.loop=!1,this.circleRainBow.scale.set(1.5),this.circleRainBow.onComplete=()=>{this.circleRainBow&&(this.circleRainBow.destroy(),this.circleRainBow=null)},this.addChild(this.circleRainBow),this.circleRainBow.play()}onTriggerCollide(e){const t=e.getTarget();if(t){const e=t.id;this.listFishCatched.includes(e)||this.listFishCatched.push(e)}}requestCatchFish(){AppInfo.gameMovie.displayController.requestBoomFish(this.idBoomFish,this.listFishCatched)}}t.a=o},function(e,t,i){"use strict";(function(e){var s=i(94),o=i(95),n=i(167),a=i(180),h=i(96),l=i(148),r=i(84),p=i(149),d=i(150),c=i(152);class u extends s.a{constructor(){super(),this.compoEyes1=null,this.compoEyes2=null,this.compoConversation=null,this.compoFinish=null,this.medusa=null,this.compoStatue=null,this.effectCoinMedusa=null,this.bossMedusaComing=null,this.compoPedestal=new n.a,this.addChild(this.compoPedestal),this.createEyes(new PIXI.Point)}dispose(){super.dispose(),TweenMax.killDelayedCallsTo(this.showConversation1),this.compoPedestal&&(this.compoPedestal.dispose(),this.compoPedestal=null),this.compoEyes1&&(this.compoEyes1.dispose(),this.compoEyes1=null),this.compoEyes2&&(this.compoEyes2.dispose(),this.compoEyes2=null),this.compoStatue&&(this.compoStatue.dispose(),this.compoStatue=null),this.medusa&&(this.medusa.dispose(),this.medusa=null),this.cerberus&&(this.cerberus.dispose(),this.cerberus=null),this.compoConversation&&(this.compoConversation.dispose(),this.compoConversation=null),this.compoFinish&&(this.compoFinish.dispose(),this.compoFinish=null),this._animatedEndIntro&&(this._animatedEndIntro.destroy(),this._animatedEndIntro=null),this.effectCoinMedusa&&(this.effectCoinMedusa.dispose(),this.effectCoinMedusa=null)}introduce(){if(this._createBossMedusa(-999),this.positionToEyes={x1:185,y1:420,x2:1045,y2:390},this.createEyes(new PIXI.Point),this.compoEyes1.releaseNodeTree(),this.compoEyes2.releaseNodeTree(),this.compoEyes1.effectOnPedestal(),this.compoEyes2.effectOnPedestal(),this.compoEyes1.setAnimation("wink2"),this.compoEyes2.setAnimation("wink2"),this.compoPedestal.removeCollision(),this.compoPedestal.highlight(),!e.isMobilePage){var t=new PIXI.filters.ColorMatrixFilter;const e=10092468,i=e>>16&255,s=e>>8&255,o=255&e;t.matrix[0]=i/255,t.matrix[6]=s/255,t.matrix[12]=o/255}const i=this;this.medusa.removeCollision(),this.medusa.visibleHealthBar(!1),this.medusa.moveTo(AppInfo.appRealWidth/2-75,250,{duration:0,delay:0,onStart(){e.isMobilePage||(AppInfo.gameMovie.filters=[t])},onComplete(){i.medusa.boss.x=AppInfo.appRealWidth/2;const s=i.medusa.boss.getGlobalPosition();if(i.compoPedestal.unhighlight(),i.medusa.callMantra(),!e.isMobilePage){const e=new PIXI.filters.ZoomBlurFilter(.1,s.clone(),500);AppInfo.gameMovie.filters=[t,e]}i._screenVibration(),i.compoEyes1.setAnimation("close"),i.compoEyes2.setAnimation("close"),i.compoEyes1.addMotionBlur(),i.compoEyes2.addMotionBlur();const o=new TimelineMax({onComplete:i._endIntroduction,onCompleteScope:i});o.add(i.compoEyes1.moveToHandMedusa(s.x-120,s.y+50),0),o.add(i.compoEyes2.moveToHandMedusa(s.x+120,s.y+50),0),AppInfo.gameMovie.soundController.playMedusaAbsorbent(),AppInfo.gameMovie.soundController.playMedusaScream()}})}_endIntroduction(){AppInfo.gameMovie.filters=null,this._screenVibration=null,this.medusa.endMantra(),this.medusa.hide(),this.compoEyes1.hide(),this.compoEyes2.hide(),this.compoEyes1.removeMotionBlur(),this.compoEyes2.removeMotionBlur();const e=ResourceManager.Atlas.AtlasBattleBossMedusaEyeAppear.textures.EyeAppear.slice();e.reverse(),this._animatedEndIntro=new PIXI.extras.AnimatedSprite(e),this._animatedEndIntro.tint=65280,this._animatedEndIntro.blendMode=PIXI.BLEND_MODES.MULTIPLY,this._animatedEndIntro.anchor.set(.55,.51),this._animatedEndIntro.scale.set(6),this._animatedEndIntro.animationSpeed=.7,this._animatedEndIntro.loop=!1,this._animatedEndIntro.position.copy(this.medusa.boss.position),this._animatedEndIntro.onComplete=()=>{this._animatedEndIntro.destroy(),this._animatedEndIntro=null,this.showConversation1(),AppInfo.gameMovie.unfreeze()},this._animatedEndIntro.play(),this.addChild(this._animatedEndIntro);const t=AppInfo.gameMovie.soundController.getInsBossComing(),i=AppInfo.gameMovie.soundController.playMedusaTransformRock();i&&t&&PIXI.sound.play(i,()=>{}),AppInfo.gameMovie.soundController.stopMedusaAbsorbent(),AppInfo.gameMovie.requestController.readyBattleBoss(1)}_screenVibration(){const e=this;AppInfo.gameMovie.slightVibration({onComplete(){e._screenVibration&&e._screenVibration()}})}createEyes(e){null===this.compoEyes1&&(this.compoEyes1=new o.a(1),this.compoEyes1.position.copy(e),this.addChild(this.compoEyes1)),this.compoEyes1.show(),null===this.compoEyes2&&(this.compoEyes2=new o.a(2),this.compoEyes2.position.copy(e),this.addChild(this.compoEyes2)),this.compoEyes2.show(),this.compoPedestal.addEyes([this.compoEyes1,this.compoEyes2]),void 0===this.positionToEyes&&(this.positionToEyes={x1:Utilities.Number.randRange(this.compoEyes1.radius,AppInfo.appRealWidth-this.compoEyes1.radius),y1:Utilities.Number.randRange(this.compoEyes1.radius,AppInfo.appRealHeight-this.compoEyes1.radius),x2:Utilities.Number.randRange(this.compoEyes1.radius,AppInfo.appRealWidth-this.compoEyes1.radius),y2:Utilities.Number.randRange(this.compoEyes1.radius,AppInfo.appRealHeight-this.compoEyes1.radius)}),this.compoEyes1.appear(new PIXI.Point(this.positionToEyes.x1,this.positionToEyes.y1),0),this.compoEyes2.appear(new PIXI.Point(this.positionToEyes.x2,this.positionToEyes.y2),.5)}addBoss(e,t,i,s,o,n){o?this.addStatue(i,n):this.addBossMedusa(i,n)}showEffectCoin(e){this.effectCoinMedusa&&this.effectCoinMedusa.show(e)}updateInfoEffect(e){null===this.effectCoinMedusa&&(this.effectCoinMedusa=new d.a,this.effectCoinMedusa.cbCompleteEffect.add(this.showFinish,this),AppInfo.gameMovie.layerEffect.addChild(this.effectCoinMedusa)),this.effectCoinMedusa.updateInfoEffect(e)}addStatue(e,t){this.compoStatue=new a.a(e,t),this.compoStatue.position.set(620,360),this.compoStatue.updatePositionChat(),this.compoStatue.onStatueExplosion=this.createEyes.bind(this,this.compoStatue.position),this.compoStatue.onStatueExplosionCompletely=this._destroyStatue.bind(this),this.addChildAt(this.compoStatue,0),this.compoStatue.show(),this.compoEyes1&&this.compoEyes1.showEffectChat(),this.compoEyes2&&this.compoEyes2.showEffectChat()}addBossMedusa(e,t){AppInfo.gameMovie.freeze(),null===this.bossMedusaComing&&(this.bossMedusaComing=new c.a,AppInfo.gameMovie.layerEffect.addChild(this.bossMedusaComing),this.bossMedusaComing.cbCompleteComing.add(this._addBossMedusa.bind(this,e,t),this)),this.bossMedusaComing.show()}_addBossMedusa(e,t){AppInfo.gameMovie.unfreeze(),this._createBossMedusa(e),this.medusa.visibleHealthBar(!0),this.medusa.updateHealth(t,t),this.medusa.addCollision(),this.medusa.move(),this.compoStatue&&this.compoStatue.release()}addBossCerberus(e){this.cerberus=new l.a(e),this.cerberus.onDead=this.createEyes.bind(this),this.addChild(this.cerberus),this.cerberus.move()}_createBossMedusa(e){null===this.medusa&&(this.medusa=new h.a(e),this.medusa.onDeadObservable.add(this.showEffectCoin,this),this.addChildAt(this.medusa,0)),this.medusa.id=e,this.medusa.show()}bossAttack(e,t,i){this.cerberus&&this.cerberus.id===e?this.cerberus.attack():this.medusa&&this.medusa.id===e&&(0===t?this.medusa.attackArrow(i):1===t&&this.medusa.attackEye(i))}updateInfoBoss(e,t,i){const s=this.getBossById(e);null!==s&&(s.updateHealth(t,i),h.a)}statueBroken(){this.compoStatue.explode()}cerberusDead(e,t,i,s){this.positionToEyes={x1:e,y1:t,x2:i,y2:s},this.cerberus&&this.cerberus.dead()}eyesPerfectly(){this.compoPedestal.eyePerfectlyPedestal()}eyesFireBullet(e){const t=this.compoEyes1.fireBullet(e),i=this.compoEyes2.fireBullet(e);AppInfo.gameMovie.requestController.battleBossMedusaFireEye(e.id,t.id,i.id,e.type,e.power)}getBossById(e){return this.compoStatue&&this.compoStatue.id===e?this.compoStatue:this.medusa&&this.medusa.id===e?this.medusa:this.cerberus&&this.cerberus.id===e?this.cerberus:null}_destroyStatue(){this.compoStatue&&(this.compoStatue.dispose(),this.compoStatue=null)}finish(e){e?this.medusa&&this.medusa.dead():(this.medusa&&this.medusa.moveOut(),this.cerberus&&this.cerberus.moveOut())}showFinish(){this.compoFinish=new p.a,this.compoFinish.onCompleteAppear=this.showConversation2.bind(this),this.addChild(this.compoFinish),this.compoFinish.appear();const e=AppInfo.gameMovie.displayController.addGroupFishInContext;e&&e.dispose()}showConversation1(){this.disappearConversation1()}disappearConversation1(){AppInfo.gameMovie.displayController.startBattleBoss(),AppInfo.gameMovie.unfreezeLayer("layerFish"),AppInfo.gameMovie.requestController.readyBattleBoss(2),AppInfo.gameMovie.collisionManager.start()}showConversation2(){this._createConversation(),this.compoConversation.onCompleteDisappear=this.disappearConversation2.bind(this),this.compoConversation.textConver=PreLoaderConfig.languageConfig.key_medusa_conversation2,this.compoConversation.appear()}disappearConversation2(){this.compoFinish&&this.compoFinish.disappear(()=>{AppInfo.gameMovie.displayController.finishBattleBoss.play()})}_createConversation(){null===this.compoConversation&&(this.compoConversation=new r.a("",ResourceManager.Atlas.AtlasBattleBossMedusa.textures.Mermaid),this.compoConversation.x=AppInfo.appRealWidth/2,this.compoConversation.y=450,this.compoConversation.avatar.x+=40,this.compoConversation.avatar.y=60,AppInfo.gameMovie.layerEffect.addChild(this.compoConversation))}}t.a=u}).call(this,i(3))},function(e,t,i){"use strict";i(70);class s extends PIXI.Container{constructor(){super();AppInfo.appRealWidth,AppInfo.appRealHeight}dispose(){this._node1&&(this._node1.release(),this._node1=null),this._node2&&(this._node2.release(),this._node2=null),this._node3&&(this._node3.release(),this._node3=null),this._node4&&(this._node4.release(),this._node4=null)}}t.a=s},function(e,t,i){"use strict";class s extends PIXI.Container{constructor(){super(),this._text=null,this._image=null,this._bg=null,this.init()}init(){if(null==this._text){const e={fontFamily:"Tahoma",fontWeight:"bold",fontSize:"18px",fill:16777215,align:"center",stroke:0,strokeThickness:2,wordWrapWidth:300,wordWrap:!0};this._text=new PIXI.Text(PreLoaderConfig.languageConfig.key_status_chat,e),this._text.anchor.set(.5),this._text.visible=!1,this.addChild(this._text)}if(null==this._image&&(this._image=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBossMedusa.textures.PedestalDark),this._image.anchor.set(.5),this._image.scale.set(.5),this._image.visible=!1,this.addChild(this._image)),null==this._bg){const e=new PIXI.Graphics.RoundedRectComplex(0,0,100,100,10,10,10,10,16777215,.3,2,16777215,1);this._bg=new PIXI.mesh.NineSlicePlane(e.generateCanvasTexture(),15,15,15,15),this._bg.pivot.x=this._bg.width/2,this._bg.pivot.y=this._bg.height/2,this.addChildAt(this._bg,0)}this.visible=!1}_autoShow(){Math.random()>.5?this._showText():this._showImage(),this._tweenShowHide.play(0)}showEffect(){TweenMax.to(this._bg,Utilities.Number.randRange(7,10),{repeat:-1,onRepeat:this._autoShow,onRepeatScope:this}),this._tweenShowHide=TweenMax.to(this,.8,{startAt:{alpha:0,scaleX:0,scaleY:0,visible:!0},scaleX:1,scaleY:1,alpha:1,onComplete(){TweenMax.delayedCall(1,this._tweenShowHide.reverse,[],this._tweenShowHide)},onCompleteScope:this})}stopEffect(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._bg),this.visible=!1}_showText(){this._text.visible=!0,this._image.visible=!1,this._bg.width=this._text.width+20,this._bg.height=this._text.height+20,this._bg.pivot.x=this._bg.width/2,this._bg.pivot.y=this._bg.height/2}_showImage(){this._text.visible=!1,this._image.visible=!0,this._bg.width=this._image.width+20,this._bg.height=this._image.height+20,this._bg.pivot.x=this._bg.width/2,this._bg.pivot.y=this._bg.height/2}}t.a=s},function(e,t,i){"use strict";var s=i(97);class o extends s.a{constructor(e){super(e,105),this.listBullets=[],this.onDead=null,this.boss.position.set(this._boundingBoss.left,300),this._spriteEye=new PIXI.Sprite,this._spriteEye.position.set(160,0),this.boss.addChild(this._spriteEye),this.compoHealthBar.position.set(40,-this.boss.height/2),this.addCollision([128,53,345,53,345,158,128,158])}dispose(){super.dispose(),this._spriteEye&&(this._spriteEye.destroy(),this._spriteEye=null)}dead(){super.dead(),this.tweenMove.timeScale(.5),this.compoHealthBar.visible=!1,this.boss.textures=ResourceManager.Atlas.AtlasBossCerberus.textures.fish105Die,this.boss.loop=!1,this.boss.animationSpeed=.15,this.boss.onComplete=()=>{this.onDead&&this.onDead(this.boss.position),this.dispose()}}move(){super.move(10)}swim(){super.swim(),this.boss.textures=ResourceManager.Atlas.AtlasBossCerberus.textures.fish105Swim,this.boss.animationSpeed=.5,this.boss.play(),this.boss.getLocalBounds(this._boundingBoss)}attack(){this.pause(),this.boss.textures=ResourceManager.Atlas.AtlasBossCerberus.textures.fish105AttackOne,this.boss.loop=!1,this.boss.animationSpeed=.3,this.boss.onComplete=this._attack.bind(this);const e=this._getPositionEye();this.lookAtUser(e)}_attack(){const e=this._getPositionEye();this.boss.textures=ResourceManager.Atlas.AtlasBossCerberus.textures.fish105AttackTwo,this.boss.onComplete=this._completeAttack.bind(this,e);const t=this._getBullet();t.position.copy(e),this.myBaseStation.getGlobalPosition(this.storeGlobalPosition),t.rotation=Utilities.Number.angleRadBetweenTwoPoint(e,this.storeGlobalPosition);const i=Utilities.Number.distanceBetweenTwoPoint(this.storeGlobalPosition,e);TweenMax.to(t,i/800,{x:this.storeGlobalPosition.x,y:this.storeGlobalPosition.y,ease:Power0.easeNone,onComplete:this._completeBulletToUser,onCompleteParams:[t],onCompleteScope:this})}_completeBulletToUser(e){AppInfo.gameMovie.requestController.battleBossUserBeAttacked(this.id),this._addBullet(e),AppInfo.gameMovie.slightVibration()}_completeAttack(){this.swim(),this.resume(),this.restoreScale()}_addBullet(e){this.listBullets.push(e),e.visible=!1}_getBullet(){var e;return this.listBullets.length>0?((e=this.listBullets.pop()).visible=!0,e):((e=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossCerberus.textures.BulletAttack)).anchor.set(.5),this.addChild(e),e)}_getPositionEye(){return this._spriteEye.getGlobalPosition()}}t.a=o},function(e,t,i){"use strict";i(84);class s extends PIXI.Container{constructor(){super(),this.onCompleteAppear=null,this._mermaid=new PIXI.spine.Spine(ResourceManager.Atlas.MermaidBones.textures.MermaidBones.spineData),this._mermaid.state.setAnimation(0,"animation",!0),this._mermaid.position.set(AppInfo.appRealWidth/2,-this._mermaid.height/2),this.addChild(this._mermaid),this._skill=new PIXI.spine.Spine(ResourceManager.Atlas.MedusaSkillBones.textures.MedusaSkillBones.spineData),this._skill.position.set(50,-135),this._skill.state.setAnimation(0,"animation",!0),this._mermaid.addChild(this._skill),this._skillSprite=new PIXI.Sprite(ResourceManager.Atlas.AtlasGunSkills.textures.medusa),this._skillSprite.anchor.set(.5),this._skillSprite.scale.set(.3),this._skillSprite.visible=!1,this.addChild(this._skillSprite)}dispose(){TweenMax.killTweensOf(this),this._skill&&(this._skill.destroy(),this._skill=null),this._mermaid&&(this._mermaid.destroy(),this._mermaid=null),this.destroy()}appear(){TweenMax.to(this._mermaid,2,{ease:Power0.easeNone,y:250,onComplete(){this.onCompleteAppear&&this.onCompleteAppear()},onCompleteScope:this})}disappear(e){this._skill.visible=!1,this._skillToUser(()=>{this._disappear(),e&&e()})}_skillToUser(e){this._skillSprite.position.copy(this._skill.getGlobalPosition()),this._skillSprite.x+=7,this._skillSprite.visible=!0,TweenMax.to(this._skillSprite,1,{x:800,y:670,scaleX:1,scaleY:1,onComplete(){e&&e()},onCompleteScope:this})}_disappear(){TweenMax.to(this._mermaid,.5,{alpha:0})}}t.a=s},function(e,t,i){"use strict";(function(e){var s=i(151),o=i(99);class n extends PIXI.Container{constructor(){super(),this.cbCompleteEffect=new PIXI.Observable,this._listCtnBoom=[],this._listLigthIde=[],this._totalCoin=0,this._tlLight=null,this._tweenPowerUp=null,this._totalTimePlay=PreLoaderConfig.TimeShowEffectWinCoin,this._totalTimePlay<3&&(this._totalTimePlay=3),e.isMobilePage?this.totalItem=5*this._totalTimePlay:this.totalItem=10*this._totalTimePlay,this._ctnMain=new s.a,this._ctnMain.x=AppInfo.appRealWidth/2,this._ctnMain.y=AppInfo.appRealHeight/2,this._ctnMain.cbPlayEffectLight.add(this._playEffectLights,this),this._ctnMain.hide(),this.addChild(this._ctnMain),this._ctnBoom=new PIXI.Container,this.addChild(this._ctnBoom),this._ctnPowerUp=new PIXI.Container,this._ctnPowerUp.visible=!1,this.addChild(this._ctnPowerUp),this._iconPowerUp=new PIXI.spine.Spine(ResourceManager.Atlas.PowerUpBones.textures.PowerUpBones.spineData),this._iconPowerUp.state.timeScale=.5,this._ctnPowerUp.addChild(this._iconPowerUp),this._txtCoinPowerUp=new PIXI.Text("",{dropShadow:!0,dropShadowAlpha:.72,dropShadowAngle:1.5707963267948966,dropShadowDistance:2,fill:[16694545,16772773],fillGradientStops:[.63,0],fontSize:30,fontWeight:"bold",lineJoin:"round",padding:23,stroke:16694545}),this._txtCoinPowerUp.y=5,this._txtCoinPowerUp.x=-25,this._txtCoinPowerUp.currentCoin=0,this._txtCoinPowerUp.anchor.set(.5),this._ctnPowerUp.addChild(this._txtCoinPowerUp),this._tweenCoin=TweenMax.to(this._txtCoinPowerUp,this._totalTimePlay,{paused:!0,ease:Power0.easeNone,startAt:{currentCoin:0},onUpdate(){this._txtCoinPowerUp.text=Utilities.Coin(this._txtCoinPowerUp.currentCoin)},onUpdateScope:this}),this._tlLight=new TimelineMax({paused:!0,onComplete(){this._ctnMain.playEnd(),TweenMax.delayedCall(3,this._onHidePowerUp,[],this)},onCompleteScope:this})}updateInfoEffect(e){e&&(this._totalCoin=e)}_roundingCoin(e){let t=(e=(e=Math.floor(e)).toString())[0];for(let i=1;i<e.length;i++)t+="0";return parseInt(t)}show(e){if(0===this._totalCoin)return void this.cbCompleteEffect.notifyObservers();this._resetInfo(),this.myBaseStation=AppInfo.gameMovie.displayController.myBaseStation;const t=e||{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2};this._ctnPowerUp.x=t.x,this._ctnPowerUp.y=t.y,TweenMax.to(this._ctnPowerUp,.5,{ease:Back.easeOut.config(1.7),x:this.myBaseStation.x,y:this.myBaseStation.y-200,scaleX:1,scaleY:1,onComplete:this._ctnMain.play,onCompleteScope:this._ctnMain}),this._tweenCoin.updateTo({currentCoin:this._totalCoin})}_resetInfo(){this._txtCoinPowerUp.currentCoin=0,this._txtCoinPowerUp.text=0,this._ctnPowerUp.scale.set(0),this._ctnPowerUp.visible=!0,this._iconPowerUp.state.setAnimation(0,"animation",!0)}_onHidePowerUp(){TweenMax.to(this._ctnPowerUp,.5,{x:this.myBaseStation.x,y:this.myBaseStation.y,scaleX:0,scaleY:0,ease:Back.easeIn.config(1.7),onCompleteScope:this.cbCompleteEffect,onComplete:this.cbCompleteEffect.notifyObservers});const e=this._iconPowerUp.getGlobalPosition(),t=this.myBaseStation.icoinCoinRoomBoss.getGlobalPosition();AppInfo.gameMovie.displayController.effectWinCoinCatchFish(17,e.x,e.y,this._txtCoinPowerUp.currentCoin,t.x,t.y,this.myBaseStation.basePosition),this.myBaseStation.changeStylecoinWin()}_playEffectLights(){const e=this._totalTimePlay-1.5;this._tlLight.clear();let t=e/(this.totalItem-1);t=t>1.5?1.5:t;for(let i=0;i<this.totalItem;i++){let s=Utilities.Number.randRange(0,e*e)/e;i===this.totalItem-1&&(t=1.5,s=-.2),this._tlLight.addCallback(this._playEffectLight,t+s,[i],this)}this._tweenCoin.updateTo({currentCoin:this._totalCoin}),TweenMax.delayedCall(2.5,(function(){this._tweenCoin.play(0)}),[],this),this._tlLight.play(0),this._tweenCoin.duration(this._tlLight.duration())}_playEffectLight(e){const t=this._getLight();t.visible=!0,t.alpha=1,t.rotation=2*Math.PI/this.totalItem*e,t.animationSpeed=Utilities.Number.randRange(30,50)/100,t.rotation>Math.PI/4&&t.rotation<3*Math.PI/4||t.rotation>5*Math.PI/4&&t.rotation<7*Math.PI/4?t.scale.set(Utilities.Number.randRange(30,70)/100):t.scale.set(Utilities.Number.randRange(60,100)/100),t.gotoAndPlay(0),TweenMax.to(t,.3,{animationSpeed:1.3,ease:Expo.easeIn})}_getLight(){if(this._listLigthIde.length>0)return this._listLigthIde.shift();const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffectBoomMedusa.textures.EffectLight);e.onComplete=this._hideLight.bind(this,e),e.loop=!1,this.addChild(e),e.anchor.set(.13,.7),e.x=this._ctnMain.x,e.y=this._ctnMain.y;const t=new PIXI.Container;return t.x=500,t.y=-50,e.addChild(t),e.pointItemBoom=t,e}_hideLight(e){e.gotoAndStop(0),this._playEffectBoom(e),e.visible=!1,this._listLigthIde.push(e)}_playEffectBoom({scaleX:e,pointItemBoom:t}){let i=null;for(let e=0;e<this._listCtnBoom.length;e++)this._listCtnBoom[e].playing||(i=this._listCtnBoom[e]);null===i&&(i=new o.a,i.cbCompleteShow.add(this.showCoin,this),this._listCtnBoom.push(i)),this._ctnBoom.addChild(i),i.scale.set(e);const s=t.getGlobalPosition();i.x=s.x,i.y=s.y,i.play()}_roundingCoin(e){let t=(e=(e=Math.floor(e)).toString())[0];for(let i=1;i<e.length;i++)t+="0";return parseInt(t)}showCoin({scaleX:e,x:t,y:i}){const s=this._txtCoinPowerUp.getGlobalPosition(),o=this._roundingCoin(2*this._totalCoin/this.totalItem*e*1.5);AppInfo.preLoader.soundController.playCoinWin();AppInfo.gameMovie.displayController.effectWinCoinCatchFish(1,t+20,i,o,s.x,s.y,this.myBaseStation.basePosition),this._tlLight.time()<this._tlLight.duration()-1.5&&AppInfo.gameMovie.slightVibration()}dispose(){let e;for(this.cbCompleteEffect&&this.cbCompleteEffect.clear(),this._tlLight&&this._tlLight.kill(),this._tweenPowerUp&&this._tweenPowerUp.kill(),this._tweenCoin&&this._tweenCoin.kill();this._listCtnBoom.length>0;)e=this._listCtnBoom.shift(),e.dispose();for(;this._listLigthIde.length>0;)e=this._listLigthIde.shift(),e.destroy({children:!0});this._ctnMain&&this._ctnMain.dispose(),this._txtCoinPowerUp&&this._txtCoinPowerUp.destroy({children:!0}),this._iconPowerUp&&this._iconPowerUp.destroy({children:!0}),this._ctnPowerUp&&this._ctnPowerUp.destroy({children:!0}),this._ctnBoom&&this._ctnBoom.destroy({children:!0}),this._listLigthIde.length=0,this._listCtnBoom.length=0,this.cbCompleteEffect=null,this._tlLight=null,this._tweenPowerUp=null,this._tweenCoin=null,this._ctnMain=null,this._txtCoinPowerUp=null,this._iconPowerUp=null,this._ctnPowerUp=null,this._ctnBoom=null,this.destroy({children:!0})}}t.a=n}).call(this,i(3))},function(e,t,i){"use strict";var s=i(99);class o extends PIXI.Container{constructor(){super(),this.cbPlayEffectLight=new PIXI.Observable;const e=[],t=[],i=[],o=ResourceManager.Atlas.AtlasEffectBoomMedusa.textures.StartBoomGreen.length;for(let s=0;s<o;s++){const o=ResourceManager.Atlas.AtlasEffectBoomMedusa.textures.StartBoomGreen[s];o.customId=s,s>=14&&s<20&&(e[s-14]=o,e[s-14+20-14]=o),s<14?t.push(o):i.push(o)}this._greenStart=new PIXI.extras.AnimatedSprite(t),this._greenStart.loop=!1,this._greenStart.anchor.set(.5),this._greenStart.animationSpeed=.3,this._greenStart.scale.set(2),this._greenStart.onComplete=this._playGreenCenter.bind(this),this.addChild(this._greenStart),this._greenCenter=new PIXI.extras.AnimatedSprite(e),this._greenCenter.animationSpeed=.15,this._greenCenter.anchor.set(.5),this._greenCenter.scale.set(1.5),this.addChild(this._greenCenter),this._greenEnd=new PIXI.extras.AnimatedSprite(i),this._greenEnd.animationSpeed=.2,this._greenEnd.loop=!1,this._greenEnd.anchor.set(.5),this._greenEnd.scale.set(2),this._greenEnd.onComplete=this.hide.bind(this),this.addChild(this._greenEnd),this._violet=s.a.getViolet(),this._violet.animationSpeed=.5,this._violet.onComplete=this.hideViolet.bind(this),this.addChild(this._violet)}play(){this.show(),this._greenCenter.visible=!1,this._greenEnd.visible=!1,this._greenStart.visible=!0,this._greenStart.gotoAndPlay(0),this._violet.visible=!0,this._violet.gotoAndPlay(0)}playEnd(){this._greenCenter.visible=!1,this._greenStart.visible=!1,this._greenEnd.visible=!0;const e=this._greenCenter.textures[this._greenCenter.currentFrame].customId;let t=0;for(let i=0;i<this._greenEnd.textures.length;i++){if(this._greenEnd.textures[i].customId===e){t=i;break}}this._greenCenter.gotoAndStop(0),this._greenEnd.gotoAndPlay(t)}_playGreenCenter(){this._greenStart.visible=!1,this._greenEnd.visible=!1,this._greenCenter.visible=!0,this._greenCenter.gotoAndPlay(0)}hideViolet(){this.cbPlayEffectLight.notifyObservers(),TweenMax.to(this._violet,.5,{alpha:0,ease:Power0.easeNone,onComplete(){this._violet.alpha=1,this._violet.visible=!1},onCompleteScope:this})}hide(){this.visible=!1}show(){this.visible=!0}dispose(){TweenMax.killTweensOf(this._violet),this.cbPlayEffectLight&&this.cbPlayEffectLight.clear(),this.cbPlayEffectLight=null,this._greenStart&&this._greenStart.destroy(),this._greenCenter&&this._greenCenter.destroy(),this._greenEnd&&this._greenEnd.destroy(),this._violet&&this._violet.destroy(),this._greenStart=null,this._greenCenter=null,this._greenEnd=null,this._violet=null,this.destroy({children:!0})}}t.a=o},function(e,t,i){"use strict";class s extends PIXI.Container{constructor(){super(),this.cbCompleteComing=new PIXI.Observable,this._tlLightning=null,this._tlEtherCircle=null,this._tlCtnBanner=null,this._tlComing=null,this._tlShowMedusa=null,this._overlay=PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,0,.8),this._overlay.cacheAsBitmap=!0,this.addChild(this._overlay),this._ctnMain=new PIXI.Container,this._ctnMain.x=AppInfo.appRealWidth/2,this._ctnMain.y=AppInfo.appRealHeight/2,this.addChild(this._ctnMain),this._ctnLightning=new PIXI.Container,this._ctnLightning.x=40,this._ctnMain.addChild(this._ctnLightning);for(let e=0;e<8;e++){const t=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.EtherLightning);t.alpha=0,t.anchor.set(.5),t.rotation=Math.PI*(e/4),this._ctnLightning.addChild(t)}this._etherCircle=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.EtherCircle),this._etherCircle.anchor.set(.5),this._etherCircle.y=-30,this._ctnMain.addChild(this._etherCircle),this._ctnIconMedusaLeft=this._getItemMedusa(),this._ctnIconMedusaRight=this._getItemMedusa(),this._ctnIconMedusaRight.scaleX=-1,this._ctnIconMedusaRight.y=this._ctnIconMedusaLeft.y=36,this._ctnMain.addChild(this._ctnIconMedusaLeft,this._ctnIconMedusaRight),this._ctnBannerText=new PIXI.Container;const e=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.BgTextMedusa);e.anchor.set(.5),this._ctnBannerText.addChild(e),this._txtBanner=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.TextMedusa),this._txtBanner.anchor.set(.5),this._ctnBannerText.addChild(this._txtBanner),this._ctnMain.addChild(this._ctnBannerText),this._ctnComing=new PIXI.Container,this._bgComingLeft=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.BgTextComing),this._bgComingRight=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.BgTextComing),this._bgComingRight.scaleX=-1,this._bgComingLeft.anchor.set(1,.5),this._bgComingRight.anchor.set(1,.5),this._ctnComing.addChild(this._bgComingLeft,this._bgComingRight),this._fireComingLeft=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.FireComing),this._fireComingRight=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.FireComing),this._fireComingLeft.y=this._fireComingRight.y=30,this._fireComingLeft.anchor.set(.6,.5),this._fireComingRight.anchor.set(.6,.5),this._fireComingRight.scaleX=-1,this._ctnComing.addChild(this._fireComingLeft,this._fireComingRight),this._txtComing=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.IconComing),this._txtComing.anchor.set(.5),this._ctnComing.addChild(this._txtComing),this._ctnComing.y=this._ctnBannerText.height/2+20,this._ctnMain.addChild(this._ctnComing)}_getItemMedusa(){const e=new PIXI.Container,t=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.LightCircle);t.anchor.set(.5),e.addChild(t);const i=new PIXI.Sprite(ResourceManager.Atlas.AtlasMedusaComing.textures.IconMedusa);return i.x=90,i.y=-100,i.anchor.set(.5),e.addChild(i),e.lightCircle=t,e.iconMedusa=i,e}show(){this._hide(),this._effectEtherCircle()}_playEffectLightning(e){const t=Utilities.Number.randRange(500,1e3*this._ctnLightning.children.length);e.visible=!0;TweenMax.delayedCall(t/3e3,this._playEffectLightning,[e],this),e.tween||(e.tween=TweenMax.to(e,.5,{startAt:{alpha:1},alpha:0})),e.tween.play(0)}_effectLightning(){this._ctnLightning.visible=!0,TweenMax.killDelayedCallsTo(this._playEffectLightning);for(const e of this._ctnLightning.children)this._playEffectLightning(e),e.visible=!1}_effectTextMedusa(){this._ctnBannerText.visible=!0,this._txtBanner.visible=!0,this._ctnBannerText.alpha=.5,this._txtBanner.scale.set(0),null===this._tlCtnBanner&&(this._tlCtnBanner=new TimelineMax,this._tlCtnBanner.to(this._ctnBannerText,.2,{startAt:{scaleX:3,scaleY:3},alpha:1,scaleX:1,scaleY:1,ease:Back.easeOut.config(1.7),onComplete(){this._effectComing()},onCompleteScope:this}),this._tlCtnBanner.to(this._txtBanner,.2,{scaleX:1,scaleY:1,ease:Back.easeOut.config(1.7)})),AppInfo.gameMovie.strongVibration(),this._tlCtnBanner.play(0)}_effectEtherCircle(){this._etherCircle.visible=!0,this._etherCircle.alpha=0,null===this._tlEtherCircle&&(this._tlEtherCircle=new TimelineMax,this._tlEtherCircle.to(this._etherCircle,.25,{startAt:{rotation:0,alpha:0,scaleX:0,scaleY:0},alpha:1,scaleX:1,scaleY:1,ease:Back.easeOut.config(1),onCompleteScope:this,onComplete(){this._effectShowIconMedusa(),this._effectLightning()}}),this._tlEtherCircle.to(this._etherCircle,6,{rotation:2*Math.PI,repeat:-1,ease:Power0.easeNone})),this._tlEtherCircle.play(0)}_effectComing(){this._ctnComing.visible=!0,this._bgComingLeft.x=-this._bgComingLeft.width,this._bgComingRight.x=this._bgComingRight.width,this._fireComingLeft.x=AppInfo.appRealWidth/2+this._fireComingLeft.width,this._fireComingRight.x=-AppInfo.appRealWidth/2-this._fireComingRight.width,this._txtComing.scale.set(2),this._txtComing.alpha=0,null===this._tlComing&&(this._tlComing=new TimelineMax({onComplete(){TweenMax.delayedCall(2,this.effectHide,[],this)},onCompleteScope:this}),this._tlComing.to([this._bgComingLeft,this._bgComingRight],.2,{x:0,ease:Bounce.easeOut}),this._tlComing.to([this._fireComingLeft,this._fireComingRight],.2,{x:0}),this._tlComing.to(this._txtComing,.2,{alpha:1}),this._tlComing.to(this._txtComing,.2,{scaleX:1,scaleY:1,ease:Back.easeOut.config(1.7)},.4)),this._tlComing.play(0)}_effectShowIconMedusa(){this._ctnIconMedusaLeft.visible=!0,this._ctnIconMedusaRight.visible=!0,this._ctnIconMedusaLeft.x=0,this._ctnIconMedusaRight.x=0,this._ctnIconMedusaLeft.iconMedusa.alpha=0,this._ctnIconMedusaRight.iconMedusa.alpha=0,null===this._tlShowMedusa&&(this._tlShowMedusa=new TimelineMax({onComplete:this._effectTextMedusa,onCompleteScope:this}),this._tlShowMedusa.to(this._ctnIconMedusaLeft,.2,{x:-255,ease:Back.easeOut.config(1)},0),this._tlShowMedusa.to(this._ctnIconMedusaRight,.2,{x:255,ease:Back.easeOut.config(1)},0),this._tlShowMedusa.to([this._ctnIconMedusaLeft.iconMedusa,this._ctnIconMedusaRight.iconMedusa],.5,{alpha:1},.1)),this._tlShowMedusa.play(0),AppInfo.gameMovie.soundController.playMedusaComeIn()}hide(){this.cbCompleteComing.notifyObservers(),this.visible=!1,this.dispose()}_hide(){this._ctnLightning.visible=!1,this._etherCircle.visible=!1,this._ctnIconMedusaLeft.visible=!1,this._ctnIconMedusaRight.visible=!1,this._ctnBannerText.visible=!1,this._ctnComing.visible=!1}effectHide(){AppInfo.gameMovie.soundController.playMedusaComeOut(),this._tlCtnBanner&&this._tlCtnBanner.eventCallback("onReverseComplete",this.hide,[],this),this._tlComing&&this._tlComing.eventCallback("onReverseComplete",(function(){this._ctnComing.visible=!1,this._tlCtnBanner.reverse()}),[],this),this._tlComing.reverse()}dispose(){this.cbCompleteComing.clear(),null!==this._tlEtherCircle&&this._tlEtherCircle.kill(),null!==this._tlCtnBanner&&this._tlCtnBanner.kill(),null!==this._tlComing&&this._tlComing.kill(),null!==this._tlShowMedusa&&this._tlShowMedusa.kill(),this._tlEtherCircle=null,this._tlCtnBanner=null,this._tlComing=null,this._tlShowMedusa=null,TweenMax.killDelayedCallsTo(this._playEffectLightning);for(let e=0;e<this._ctnLightning.children.length;e++)TweenMax.killTweensOf(this._ctnLightning.children[e]);this._overlay&&this._overlay.destroy({children:!0}),this._overlay=null,this._ctnLightning&&this._ctnLightning.destroy({children:!0}),this._ctnLightning=null,this._etherCircle&&this._etherCircle.destroy({children:!0}),this._etherCircle=null,this._ctnIconMedusaLeft&&this._ctnIconMedusaLeft.destroy({children:!0}),this._ctnIconMedusaLeft=null,this._ctnIconMedusaRight&&this._ctnIconMedusaRight.destroy({children:!0}),this._ctnIconMedusaRight=null,this._txtBanner&&this._txtBanner.destroy({children:!0}),this._txtBanner=null,this._ctnBannerText&&this._ctnBannerText.destroy({children:!0}),this._ctnBannerText=null,this._bgComingLeft&&this._bgComingLeft.destroy({children:!0}),this._bgComingLeft=null,this._bgComingRight&&this._bgComingRight.destroy({children:!0}),this._bgComingRight=null,this._fireComingLeft&&this._fireComingLeft.destroy({children:!0}),this._fireComingLeft=null,this._fireComingRight&&this._fireComingRight.destroy({children:!0}),this._fireComingRight=null,this._ctnComing&&this._ctnComing.destroy({children:!0}),this._ctnComing=null,this._ctnMain&&this._ctnMain.destroy({children:!0}),this._ctnMain=null,this.destroy({children:!0})}}t.a=s},function(e,t,i){"use strict";(function(e){var s=i(6),o=i(154);class n extends s.a{constructor(){super(),this._background=null,this._itemCrack=null,this._listPiece=[],this._tooltip=null,this._successCollect=!1,this._particle=!1,this._init()}_init(){this._background=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonEffect.textures.bgGun),this._background.anchor.set(.5),this.addChild(this._background);for(let e=0;e<4;e++){const t=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonEffect.textures.piece[e]);t.visible=!1,t.anchor.set(.5),this.addChild(t),this._listPiece.push(t)}this._itemCrack=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonEffect.textures.crack),this._itemCrack.anchor.set(.5),this.addChild(this._itemCrack),this._setUp(),null===this._tooltip&&(this._tooltip=new o.a,this._tooltip.x=-this._tooltip.width,this._tooltip.y=-this._tooltip.height,this._tooltip.visible=!1,this.addChild(this._tooltip)),this.interactive=!0,this.mouseover=this._mouseOver.bind(this),this.mouseout=this._mouseOut.bind(this),e.isMobilePage&&(this.mouseclick=this._showHideToolTip.bind(this))}_showHideToolTip(){this._tooltip.visible=!this._tooltip.visible,this._successCollect?this._tooltip.changeTextTooltip(PreLoaderConfig.languageConfig.tool_tip_active_gun_photon):this._tooltip.changeTextTooltip(PreLoaderConfig.languageConfig.tool_tip_gun_photon),TweenMax.delayedCall(1.5,this._mouseOut,[],this)}_mouseOver(){this._tooltip.visible=!0,this._successCollect?this._tooltip.changeTextTooltip(PreLoaderConfig.languageConfig.tool_tip_active_gun_photon):this._tooltip.changeTextTooltip(PreLoaderConfig.languageConfig.tool_tip_gun_photon)}_mouseOut(){this._tooltip.visible=!1}_setUp(){}updateCollectGun(e,t,i,s,o){for(let e=0;e<o.length;e++)o[e].collect>0&&this._effectCollectSuccess(this._listPiece[e]);i&&(this._itemCrack.visible=!1,this._successCollect=!0)}_effectCollectSuccess(e){e.visible=!0,e.alpha=0,TweenMax.to(e,.5,{alpha:1,yoyo:!0,repeat:4})}playEffecTransFormGun(e){this._background.visible=!1,(new TimelineMax).to(this,1,{x:640,y:360,onComplete(){"function"==typeof e&&e()},onCompleteScope:this})}dispose(){super.dispose()}}t.a=n}).call(this,i(3))},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(){super(),this._text1=null,this._image1=null,this._text2=null,this._image2=null,this._bg=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this._text1=new PIXI.Text(PreLoaderConfig.languageConfig.tool_tip_gun_photon,TextStyleConfig.TOOL_TIP),this._text2=new PIXI.Text(PreLoaderConfig.languageConfig.tool_tip_gun_photon1,TextStyleConfig.TOOL_TIP),this._image1=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonEffect.textures.toolTip1Image),this._image2=new PIXI.Sprite(ResourceManager.Atlas.AtlasPoseidonEffect.textures.toolTip2Image),this.addChild(this._text1,this._text2,this._image1,this._image2),this._setupPosition())}_setupPosition(){this._text1.position.set(0,0),this._image1.position.set(0,this._text1.y+this._text1.height),this._text2.position.set(0,this._image1.y+this._image1.height),this._image2.position.set(0,this._text2.y+this._text2.height),this._setBackgroundTooltip()}_setBackgroundTooltip(){const e=new PIXI.Graphics.RoundedRectComplex(0,0,this.width+20,this.height+20,15,15,15,15,1973552,.8,2,3381469,1);this._bg=new PIXI.Sprite(e.generateCanvasTexture()),this._bg.position.set(-10),this.addChildAt(this._bg,0)}changeTextTooltip(){}dispose(){super.dispose()}}t.a=o},function(e,t,i){"use strict";var s=i(101),o=i(5),n=i(102),a=i(156);class h extends PIXI.Container{constructor(e,t,i){super(),this.type=e,this.isWin=t,this.listItems=i}dispose(){this._spine&&(this._spine.destroy(),this._spine=null),this._txtExit&&(this._txtExit.destroy(),this._txtExit=null),this._btnExit&&(this._btnExit.destroy(),this._btnExit=null),this.item&&(this.item.dispose(),this.item=null),this._containerItem&&(this._containerItem.destroy(),this._containerItem=null),this.destroy()}_create(){this._spine=this._setSpine(),this._spine.x=AppInfo.appRealWidth/2,this.addChild(this._spine),this._btnExit=this._createButton(ResourceManager.Atlas.AtlasPopupHoYeah.textures.btnBlue,PreLoaderConfig.ListTextConfig.Exit.toUpperCase(),{fill:3348740,stroke:3471615,strokeThickness:2,fontSize:22,fontWeight:600}),this._btnExit.position.set(this._spine.x-this._btnExit.width/2,530),this._btnExit.pointerTap(()=>{AppInfo.outGameBanCa()}),this.isWin||(this._btnPlayAgain=this._createButton(ResourceManager.Atlas.AtlasPopupHoYeah.textures.btnGreenDisable,PreLoaderConfig.languageConfig.key_play_again.toUpperCase(),{fill:3348740,stroke:3932058,strokeThickness:2,fontSize:22,fontWeight:600}),this._btnPlayAgain.position.set(AppInfo.appRealWidth/2+10,this._btnExit.y),this._btnPlayAgain.pointerTap(()=>{switch(AppInfo.preLoader.screenController.gameScreen.dispose(),AppInfo.preLoader.screenController.currentScreen=null,this.type){case s.a.MEDUSA:a.a.forceJoinRoomOcean("RoomMedusa",AppInfo.GameInfo.roomGroup);break;case s.a.POSEIDON:a.a.forceJoinRoomOcean("RoomPoseidon",AppInfo.GameInfo.roomGroup)}}),this._btnExit.position.set(AppInfo.appRealWidth/2-this._btnExit.width-10,530))}_createButton(e,t,i){const s=new o.a(e);this.addChild(s);const n=new PIXI.Text(t,i);return n.anchor.set(.5),n.position.set(s.width/2,s.height/2),s.addChild(n),s}play(){if(this._create(),AppInfo.isLanguageVn?this._spine.skeleton.setSkinByName("viet"):AppInfo.isLanguageKhmer?this._spine.skeleton.setSkinByName("cam"):this._spine.skeleton.setSkinByName("anh"),this.isWin){this._spine.state.addAnimation(0,"animation",!1,0).animationEnd=.7;const e=this._spine.state.addAnimation(1,"animation",!0,.7);e.animationStart=.7,e.timeScale=.6,this._spine.y=150}else this._spine.state.setAnimation(0,"animation",!1),this._spine.y=230;this._spine.state.addListener({complete:()=>{this.isWin&&this._showReward(),this._spine.state.clearListeners()}}),this._playSound()}_setSpine(){let e;return e=(this.type,s.a.MEDUSA,this.isWin?ResourceManager.Atlas.WinBones.textures.WinBones.spineData:ResourceManager.Atlas.LoseBones.textures.LoseBones.spineData),new PIXI.spine.Spine(e)}_playSound(){this.type===s.a.MEDUSA&&(this.isWin?AppInfo.gameMovie.soundController.playMedusaWin():AppInfo.gameMovie.soundController.playMedusaLose())}_showReward(){this._containerItem=new PIXI.Container,this.addChild(this._containerItem);for(const e of this.listItems)e.rewardType!==n.a.TYPE_SKILL&&(this.item=new n.a(e.rewardType,e.rewardDetail,e.rewardValue),this._containerItem.addChild(this.item));const e=this._containerItem.children.length;if(e>0){for(let t=0;t<e;t++){const e=this._containerItem.children[t];e.x=(e.width+20)*t}const t=this._containerItem.getLocalBounds();this._containerItem.x=this._spine.x-(t.left+t.right)/2,this._containerItem.y=this._spine.y+310}}}t.a=h},function(e,t,i){"use strict";(function(e){var s=i(163),o=i(79);class n{static joinRoom(t,i){if(0===AppInfo.myInfo.userID)PreLoaderConfig.isUseWS?AppInfo.preLoader.popUpController.showPopupLogin():ClientWebHelper.showLogin();else if(e.ItemUserClientWebHelper&&e.ItemUserClientWebHelper.GetInfo&&ItemUserClientWebHelper.GetInfo(({Code:e,Data:t})=>{e===ErrorCode.WEBHelper.SUCCESS&&(AppInfo.MyInfo.myListItem=t,AppInfo.gameMovie&&AppInfo.gameMovie.displayController&&AppInfo.gameMovie.displayController.myBaseStation&&AppInfo.gameMovie.displayController.myBaseStation.updateItem(AppInfo.MyInfo.myListItem))}),"btn7DaiDuong"===t)if(PreLoaderConfig.TimeGetRoomInfo.enable){const e=new Date,t=Math.floor((60*e.getHours()+e.getMinutes())/PreLoaderConfig.TimeGetRoomInfo.timeSpace)%PreLoaderConfig.TimeGetRoomInfo.RoomName.length,i=PreLoaderConfig.TimeGetRoomInfo.RoomName[t];n.checkMinCoinPlay(i)&&(AppInfo.preLoader.screenController.lobbyScreen._lastRoom===i?n.connectToServerGameInfo(i):(null!==AppInfo.preLoader.screenController.lobbyScreen._lastRoom&&n._clearResource(AppInfo.preLoader.screenController.lobbyScreen._lastRoom.replace("btn",""),i),AppInfo.preLoader.screenController.lobbyScreen._lastRoom=i,AppInfo.preLoader.screenController.showLoadingScreen(!1,()=>{n.connectToServerGameInfo(i)},i)))}else n.checkMinCoinPlay(t,i)&&(AppInfo.preLoader.screenController.lobbyScreen.hasLoadMapOcean?(n.compoMapOcean=new s.a,n.compoMapOcean.y=-n.compoMapOcean.height,AppInfo.preLoader.layerPopup.addChild(n.compoMapOcean),n.compoMapOcean.callbackOnClickRoom=n._onEnterRoomOcean.bind(this,i),n.compoMapOcean.show()):(AppInfo.preLoader.globalCompoController.Loading.show(),"undefined"!=typeof Loading&&Loading.Show&&Loading.Show(),ResourceManager.loadResourceMapOcean((function(){"undefined"!=typeof Loading&&Loading.Hide&&Loading.Hide(),AppInfo.preLoader.screenController.lobbyScreen.hasLoadMapOcean=!0,AppInfo.preLoader.globalCompoController.Loading.hide(),n.compoMapOcean=new s.a,n.compoMapOcean.y=-n.compoMapOcean.height,AppInfo.preLoader.layerPopup.addChild(n.compoMapOcean),n.compoMapOcean.callbackOnClickRoom=n._onEnterRoomOcean.bind(this,i),n.compoMapOcean.show()}))));else if(n.checkMinCoinPlay(t)){if("btnBC3D"===t)return void window.open(PreLoaderConfig.PathToBC3DPage,"_self");AppInfo.preLoader.screenController.lobbyScreen._lastRoom===t?(AppInfo.preLoader.screenController.lobbyScreen._lastRoom=t,n.connectToServerGameInfo(t)):(AppInfo.preLoader.screenController.lobbyScreen._lastRoom&&n._clearResource(AppInfo.preLoader.screenController.lobbyScreen._lastRoom.replace("btn",""),t.replace("btn","")),AppInfo.preLoader.screenController.lobbyScreen._lastRoom=t,AppInfo.preLoader.screenController.showLoadingScreen(!1,(function(){AppInfo.GameInfo.canConnectTour&&AppInfo.GameInfo.accpectTournament?setTimeout(()=>{AppInfo.preLoader.screenController.showLobbyScreen(),AppInfo.preLoader.globalCompoController.compoTourInfo.connectTour(),ResourceManager.resetTotalFileSaveCount(),AppInfo.scaleToScreen()},6e3):n.connectToServerGameInfo(t)}),t.replace("btn","")))}}static forceJoinRoomOcean(e,t){n.checkMinCoinPlay(e,t)?(AppInfo.preLoader.screenController.gameScreen.dispose(),n.connectToServerGameInfo(e,t)):AppInfo.preLoader.backLobby()}static _checkAndConnect(e,t){n.checkMinCoinPlay(e,t)&&n.connectToServerGameInfo(e,t)}static connectToServerGameInfo(e,t){const i=[];for(let e=0;e<29;e++)i.push(ResourceManager.Atlas["AtlasFish"+e]);for(let e=0;e<4;e++)i.push(ResourceManager.Atlas["AtlasGun"+e]);Utilities.uploadTextures(i,()=>{if(PreLoaderConfig.EnabledNotConnect){AppInfo.preLoader.screenController.showGameScreen(),AppInfo.gameMovie.displayController.addUserSeat(AppInfo.MyInfo.userID,0,AppInfo.MyInfo.nickName,AppInfo.MyInfo.money,AppInfo.MyInfo.level);const e=new o.a;e.deskStation=0,e.deskNO=0,AppInfo.gameMovie.gameBoard.addUserOnlineModel(e,!0)}else{switch(e){case"RoomMedusa":AppInfo.preLoader.requestController.getServerBossInfo(PreLoaderConfig.RoomMedusa.bossID,PreLoaderConfig.RoomOcean.kindId,t),PreLoaderConfig.roomSevenSeaKind=PreLoaderConfig.RoomMedusa.bossID;break;case"RoomCentaur":AppInfo.preLoader.requestController.getServerBossInfo(PreLoaderConfig.RoomCentaur.bossID,PreLoaderConfig.RoomOcean.kindId,t),PreLoaderConfig.roomSevenSeaKind=PreLoaderConfig.RoomCentaur.bossID;break;case"RoomPoseidon":AppInfo.preLoader.requestController.getServerBossInfo(PreLoaderConfig.RoomPoseidon.bossID,PreLoaderConfig.RoomOcean.kindId,t),PreLoaderConfig.roomSevenSeaKind=103;break;case"btnRoomThuong":AppInfo.preLoader.requestController.getServerGameInfo(PreLoaderConfig.RoomThuong.kindId),PreLoaderConfig.roomSevenSeaKind=0;break;case"btnRoomVip":AppInfo.preLoader.requestController.getServerGameInfo(PreLoaderConfig.RoomVip.kindId),PreLoaderConfig.roomSevenSeaKind=0;break;default:AppInfo.preLoader.requestController.getServerGameInfo(PreLoaderConfig.RoomThuong.kindId)}AppInfo.preLoader.StopTimeConnectGame(),AppInfo.preLoader.StartTimeConnectGame()}})}static checkMinCoinPlay(e,t){if("btnRoomThuong"===e){if(AppInfo.MyInfo.money<PreLoaderConfig.RoomThuong.minCoinPlay)return n._notCoinToPlay(),!1}else if("btnRoomVip"===e){if(AppInfo.MyInfo.money<PreLoaderConfig.RoomVip.minCoinPlay)return n._notCoinToPlay(),!1}else if("btn7DaiDuong"===e||"RoomMedusa"===e||"RoomCentaur"===e||"RoomCentaur"===e){if(t===PreLoaderConfig.RoomOcean.roomGroup.normal.id)return!0;if(AppInfo.MyInfo.money<PreLoaderConfig.RoomOcean.minCoinPlay)return n._notCoinToPlay(),!1}return!0}static _notCoinToPlay(){PreLoaderConfig.isUseWS?AppInfo.preLoader.popUpController.showPopupNotifyNapGold(PreLoaderConfig.MessagesConfig.NotEnoughCoinToJoin,()=>{AppInfo.preLoader.popUpController.showPopupNapXu()}):AppInfo.preLoader.popUpController.showPopupNotifyNapGold(PreLoaderConfig.MessagesConfig.NotEnoughCoinToJoin,()=>{ClientWebHelper.showDeposit()})}static _onEnterRoomOcean(e,t){let i="";switch(t){case s.a.NAME_ISLAND+0:i="RoomMedusa";break;case s.a.NAME_ISLAND+1:i="RoomCentaur";break;case s.a.NAME_ISLAND+2:i="RoomLifeOfPi";break;default:return}n._checkAndConnect(i,e)}static _clearResource(e,t){const i={},s={};let o;for(AppInfo.listResourceHasLoad=[],o=0;o<PreLoaderConfig[e].ResourceInfo.Atlas.length;o++){let n=!1;Utilities.String.getExtension(PreLoaderConfig[e].ResourceInfo.Atlas[o],i);for(let e=0;e<PreLoaderConfig[t].ResourceInfo.Atlas.length;e++)Utilities.String.getExtension(PreLoaderConfig[t].ResourceInfo.Atlas[e],s),s.fileName===i.fileName&&s.parentPath===i.parentPath&&(n=!0,AppInfo.listResourceHasLoad.push(i.fileName));if(!n){let e,t;const s=/Pack\d+$/;e=s.exec(i.fileName),t=s.test(i.fileName);const o=i.fileName.replace(e,"");t&&(i.fileName=o);const n=Object.keys(ResourceManager.Atlas[i.fileName].textures);for(let e=0;e<n.length;e++)ResourceManager.Atlas[i.fileName].textures[n[e]]instanceof Array?ResourceManager.Atlas[i.fileName].textures[n[e]]=[]:ResourceManager.Atlas[i.fileName].textures[n[e]]=null,ResourceManager.Atlas[i.fileName].url=""}}}}n.compoMapOcean=null,t.a=n}).call(this,i(3))},function(e,t,i){"use strict";var s=i(81);class o extends PIXI.Container{constructor(e,t){switch(super(),this.totalPoint=t,this._currentPoint=0,this._tweenProgress=null,this._type=e,this._progress=new PIXI.Container,this._progress.position.set(50,23),this.addChild(this._progress),this._progressBarContainer=new PIXI.Container,this._progress.addChild(this._progressBarContainer),this._progressBar=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBoss.textures.ProgressBattleBoss),this._phosphorescentProgressBar=new PIXI.spine.Spine(ResourceManager.Atlas.PhosphorescentProgressBones.textures.PhosphorescentProgressBones.spineData),this._phosphorescentProgressBar.position.set(-15,7),this._phosphorescentProgressBar.state.setAnimation(0,"animation",!0),this._progressBarContainer.addChild(this._progressBar),this._progressBarContainer.addChild(this._phosphorescentProgressBar),this._maskProgressBar=PIXI.Graphics.Rectangle(0,0,1,this._progressBar.height),this._progressBarContainer.mask=this._maskProgressBar,this._progress.addChild(this._maskProgressBar),this._bg=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBoss.textures.BgProgressBattleBoss),this.addChild(this._bg),this._avatar=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBoss.textures["Avatar"+e+"Boss"]),this._avatar.anchor.set(.5),this._avatar.position.set(30,11),this.addChild(this._avatar),this._stringTotalCoin=Utilities.Coin(this.totalPoint),this.txtTotalPoint=new PIXI.Text("0/"+this._stringTotalCoin,{fontFamily:PreLoaderConfig.FontResource.AgudaBlack.name,fontSize:14,fontWeight:"bold",fill:16777215}),this.txtTotalPoint.anchor.set(.5),this.txtTotalPoint.position.set(130,10),this.addChild(this.txtTotalPoint),e){case GlobalConstants.BOSS.POSEIDON:this._initPoseidon();break;case GlobalConstants.BOSS.MEDUSA:this._initMedusa()}}_initMedusa(){void 0===this._tooltip&&(this._tooltip=new s.a(!1,0,"",{fontFamily:"Arial",fontWeight:"bold",fontSize:"16px",wordWrap:!0,wordWrapWidth:500,align:"center",fill:[12320760,65514,12648440]}),this._tooltip.visible=!1,this._tooltip.y=0,this._tooltip.x=-30,this.addChild(this._tooltip),this._tooltip.setBackgroundTooltip(0,0,s.a.ShowTop,1973552,.8,3381469,1)),this._avatar.buttonMode=!0,this._avatar.interactive=!0,this._avatar.mouseover=()=>{this._tooltip.visible=!0,AppInfo.gameMovie.gameBoard.isJoinBattleBoss?this._tooltip.changeTextTooltip(PreLoaderConfig.languageConfig.key_tip_medusa1):this._tooltip.changeTextTooltip(PreLoaderConfig.languageConfig.key_tip_medusa)},this._avatar.mouseout=()=>{this._tooltip.visible=!1}}_initPoseidon(){void 0===this._tooltip&&(this._tooltip=new s.a(!1,0,"",{fontFamily:"Arial",fontWeight:"bold",fontSize:"16px",wordWrap:!0,wordWrapWidth:500,align:"center",fill:[12320760,65514,12648440]}),this._tooltip.visible=!1,this._tooltip.y=0,this._tooltip.x=-30,this.addChild(this._tooltip),this._tooltip.setBackgroundTooltip(0,0,s.a.ShowTop,1973552,.8,3381469,1)),this._avatar.buttonMode=!0,this._avatar.interactive=!0,this._avatar.mouseover=()=>{this._tooltip.visible=!0,this._tooltip.changeTextTooltip(Utilities.String.formatString(PreLoaderConfig.languageConfig.key_poseidon_tips,Utilities.Coin(this.totalPoint),Utilities.Coin(this._currentPoint)))},this._avatar.mouseout=()=>{this._tooltip.visible=!1}}dispose(){this._tweenProgress&&(this._tweenProgress.kill(),this._tweenProgress=null),TweenMax.killTweensOf(this._avatar),this._maskProgressBar.destroy(),this._maskProgressBar=null,this._progressBar.destroy(),this._progressBar=null,this._phosphorescentProgressBar.destroy(),this._phosphorescentProgressBar=null,this._progressBarContainer.destroy(),this._progressBarContainer=null,this._progress.destroy(),this._progress=null,this._bg.destroy(),this._bg=null,this._avatar.destroy(),this._avatar=null,this.txtTotalPoint.destroy(),this.txtTotalPoint=null,this.destroy()}updateTotalPoint(e){this.totalPoint=e,this._stringTotalCoin=Utilities.Coin(this.totalPoint)}_completeCollect(){TweenMax.to(this._avatar,.4,{scaleX:1.2,scaleY:1.2,yoyo:!0,ease:Linear.easeNone,repeat:-1}),this._avatar.buttonMode=!0,this._avatar.interactive=!0,this._avatar.mouseover=()=>{this._tooltip.visible=!0,this._tooltip.changeTextTooltip(PreLoaderConfig.languageConfig.tool_tip_summon_boss)},this._avatar.mouseout=()=>{this._tooltip.visible=!1},this._avatar.mouseclick=()=>{AppInfo.gameMovie.displayController.compoBattleBoss.summonBoss(),AppInfo.preLoader.soundController.summonPoseidon(),this.visible=!1};const e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBaseStation.textures.MyBaseArrow);e.gotoAndPlay(0),e.rotation=Utilities.toRad(-90),e.anchor.set(.5),e.scale.set(.5),e.x=-20,e.y=20,TweenMax.to(e,.8,{x:"-=20",yoyo:!0,repeat:-1}),e.animationSpeed=1/4,this.addChild(e)}updateProgress(e){e>this.totalPoint&&(e=this.totalPoint),this.txtTotalPoint.text=Utilities.Coin(e)+"/"+this._stringTotalCoin,this._currentPoint=e;let t=e/this.totalPoint;t>1&&(t=1),e>=this.totalPoint&&103===this._type&&(this._completeCollect(),this.txtTotalPoint.text=PreLoaderConfig.languageConfig.tool_tip_summon_boss),this._tweenProgress?this._tweenProgress.updateTo({width:this._progressBar.width*t},!0):this._tweenProgress=TweenMax.to(this._maskProgressBar,1,{width:this._progressBar.width*t})}startTimer(e){if(void 0===this._textAutoSummon){const t=TextStyleConfig.TOOL_TIP;t.fontSize=30,t.stroke=255,t.strokeThickness=3,t.wordWrap=!1;const i=e/1e3-1;this._textAutoSummon=new PIXI.Text(PreLoaderConfig.languageConfig.key_auto_summon+" "+Utilities.formatTime(i),t),this._textAutoSummon.position.set(100,100),this._textAutoSummon.anchor.set(.5),this._tickerAutoSummon=new Utilities.Timer(1e3,i,this._onTick.bind(this,!0),this._onCompleteTimer.bind(this)),this._tickerAutoSummon.Start(),this.addChild(this._textAutoSummon)}}_onTick(){this._textAutoSummon.text=PreLoaderConfig.languageConfig.key_auto_summon+" "+Utilities.formatTime(this._tickerAutoSummon.counter-this._tickerAutoSummon.counterPass)}_onCompleteTimer(){AppInfo.gameMovie.displayController.compoBattleBoss.summonBoss(),AppInfo.preLoader.soundController.summonPoseidon()}}t.a=o},function(e,t,i){"use strict";var s=i(6),o=i(73),n=i(70);class a extends s.a{constructor(e,t){super(),this.type=t,this.id=e,this._swimTexture=null,this._attackTexture=null,this._dieTexture=null,this._nodeTree=null,this.listFishInSide=[],this.displayController=AppInfo.gameMovie.displayController,this.gameMovie=AppInfo.gameMovie,this.bossMiniRoomManager=AppInfo.gameMovie.displayController.bossMiniRoomManager,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this._getTextureByType(this.type),this.movie=new PIXI.extras.AnimatedSprite(this._swimTexture),this.movie.anchor.set(.5),this.addChild(this.movie),this.addCollision())}_getTextureByType(e){switch(this._swimTexture=null,this._attackTexture=null,this._dieTexture=null,e){case GlobalConstants.BOSS_MINI.ANGEL:this._swimTexture=ResourceManager.Atlas.AtlastBossAngle.textures.AngleSwim,this._attackTexture=ResourceManager.Atlas.AtlastBossAngle.textures.AngleAttack,this._dieTexture=ResourceManager.Atlas.AtlastBossAngle.textures.AngleDie;break;case GlobalConstants.BOSS_MINI.SANTA:this._swimTexture=ResourceManager.Atlas.AtlasBossSanta.textures.SantaSwim,this._attackTexture=ResourceManager.Atlas.AtlasBossSanta.textures.SantaAttack,this._dieTexture=ResourceManager.Atlas.AtlasBossSanta.textures.SantaDie;break;case GlobalConstants.BOSS_MINI.THANTAI:this._swimTexture=ResourceManager.Atlas.AtlasBossThanTai.textures.ThanTaiSwim,this._attackTexture=ResourceManager.Atlas.AtlasBossThanTai.textures.ThanTaiAttack,this._dieTexture=ResourceManager.Atlas.AtlasBossThanTai.textures.ThanTaiDie}}addCollision(){const e=o.a.getPointsArea(o.a.TYPE_AREA_COLLISION.FISH,this.type);e.length>0&&(this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,e,n.a.TYPE_COLLISION.FISH,this.movie))}die(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie),this.movie.gotoAndStop(0),this._dieTexture?(this.movie.textures=this._dieTexture,this.movie.loop=!1,this.movie.onComplete=this._onCompleteAnimDie.bind(this),this.movie.gotoAndPlay(0)):TweenMax.to(this,2,{alpha:0,onComplete:this._onCompleteAnimDie,onCompleteScope:this})}_onCompleteAnimDie(){this.dispose()}dispose(){super.dispose(),this.releaseNode(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie),this.movie&&(this.removeChild(this.movie),this.movie.destroy(),this.movie=null),this._runtTween&&(this._runtTween.kill(),this._runtTween=null)}releaseNode(){this._nodeTree&&this._nodeTree.release()}onHitBullet(e){if(AppInfo.preLoader.soundController.playTrungCa(),16777215!==e){if(this.isRedFish)return;TweenMax.killTweensOf(this.movie),this.movie.tint=16777215,this.movie.tintAlpha=0,TweenMax.to(this.movie,.1,{tint:e,onComplete:()=>{TweenMax.to(this.movie,.3,{tint:16777215})}})}}onTriggerCollide({typeCollision:e},t){e===n.a.TYPE_COLLISION.BULLET&&this.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[this.type]||PreLoaderConfig.FishHitBulletDefault)}onMoveComplete(){this.bossMiniRoomManager.bossMoveComplete(this)}_setRotationFollowMove(){const e=180*this.rotation/Math.PI;e>90&&e<=270||e<=-90&&e>-270?-1!==this.movie.scale.y&&(this.movie.scale.y=-1,this.fishShadow&&(this.fishShadow.movie.scale.y=-1)):1!==this.movie.scale.y&&(this.movie.scale.y=1,this.fishShadow&&(this.fishShadow.movie.scale.y=1))}}a.TYPE={ANGEL:52};var h=a,l=i(71);class r extends h{constructor(e,t){super(e,t),this._attackFlag=!1}init(){super.init(),this.movie.animationSpeed=.2,this.movie.loop=!0,this._path=[[{x:-100,y:360},{x:640,y:360},{x:1400,y:360}],[{x:1400,y:360},{x:640,y:360},{x:-100,y:360}],[{x:-100,y:360},{x:640,y:360},{x:1400,y:360}],[{x:1400,y:360},{x:640,y:360},{x:-100,y:360}]];const e=ParticleConfig.BLADE_ATTACK;e.art=[{framerate:29,loop:!0,textures:ResourceManager.Atlas.AtlastBossAngle.textures.AngleBlade}],this._particleAttack=new l.a(e),this._particleAttack.autoDispose=!1,this.addChildAt(this._particleAttack,0);const t=ParticleConfig.FOLOW_ANGEL;t.art=[{framerate:29,loop:!0,textures:["LightDot.png"]}],this._particleFollow=new l.a(t),this._particleFollow.playParticle(0,0),AppInfo.gameMovie.layerEffect.addChild(this._particleFollow),this.x=-this.width,this.y=-this.height}run(){this.movie.gotoAndPlay(0);const e=this.id%2==0?{x:-100,y:360}:{x:1400,y:360};this.position.set(e.x,e.y),this._runtTween=new TimelineMax({onComplete:this._onComplete,onCompleteScope:this});const t=this._path,i=this.id%this._path.length;t.unshift(this._path[i]);for(let e=0;e<t.length;e++){const i=TweenMax.to(this,r.TIME_MOVE,{bezier:{values:t[e],autoRotate:["x","y","rotation",0,!0]},onUpdate:this._onUpdateMove,onUpdateScope:this,ease:Linear.easeNone});this._runtTween.add(i)}this._runtTween.play(0)}die(){super.die(),this.releaseNode(),this.rotation=0,this.movie.scale.y=1,this.movie.tint=16777215,this.movie.animationSpeed=1/6,TweenMax.killTweensOf(this),this._runtTween&&(this._runtTween.kill(),this._runtTween=null),AppInfo.gameMovie.strongBackgroundBig()}dispose(){TweenMax.killDelayedCallsTo(this._play),this._particleAttack&&(this._particleAttack.dispose(),this._particleAttack=null),this._particleFollow&&(this._particleFollow.dispose(),this._particleFollow=null),super.dispose()}_onUpdateMove(){640===this.x&&(this._stop(),this._attack()),this._setRotationFollowMove(),this._particleFollow._emitter.ownerPos.x=this.x,this._particleFollow._emitter.ownerPos.y=this.y}_setRotationFollowMove(){const e=180*this.rotation/Math.PI;e>90&&e<=270||e<=-90&&e>-270?-1!==this.movie.scale.y&&(this.movie.scale.y=-1,this.fishShadow&&(this.fishShadow.movie.scale.y=-1)):1!==this.movie.scale.y&&(this.movie.scale.y=1,this.fishShadow&&(this.fishShadow.movie.scale.y=1))}_attack(){this.movie.textures=this._attackTexture,this.movie.gotoAndPlay(0),this.movie.loop=!1,this.movie.animationSpeed=1/4,this._attackFlag=!0,this.movie.onComplete=this._onCompleteAttack.bind(this),this.movie.onFrameChange=this._onFrameChange.bind(this)}_onFrameChange(){this._attackFlag&&20===this.movie.currentFrame&&(this._particleAttack.visible=!0,this._particleAttack.playParticle(0,0),AppInfo.gameMovie.displayController.effectStun())}_onCompleteAttack(){this.movie.textures=this._swimTexture,this.movie.animationSpeed=.2,this.movie.loop=!0,this._attackFlag=!1,TweenMax.delayedCall(1,this._play,[],this)}_stop(){this._runtTween.pause(),this.movie.stop()}_play(){this._runtTween.resume(),this.movie.gotoAndPlay(0)}_onComplete(){this.dispose(),this.onMoveComplete()}}r.TIME_MOVE=25;var p=r,d=i(75),c=i(72);class u extends c.a{constructor(e){super(e.id,e.type,0,!1,!1,e.pathArray),e=e||null,this.completeAnimationFun=null,null!==e?(this.isGift=!0,this.scale.set(1),this.addCollision()):(PIXI.Container.call(this),this.init(),this.setTextureDie()),this.displayController=AppInfo.gameMovie.displayController}init(){this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossMini.textures.fish35Swim),this.movie.gotoAndPlay(0),this.movie.anchor.set(.5),this.movie.animationSpeed=.2,this.addChild(this.movie)}addCollision(){const e=o.a.getPointsArea(o.a.TYPE_AREA_COLLISION.FISH,35);e.length>0&&(this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,e,n.a.TYPE_COLLISION.FISH,this.movie))}show(e=new PIXI.Point(0,0)){TweenMax.to(this,.3,{startAt:{rotation:Math.PI,scaleX:0,scaleY:0},rotation:0,scaleX:.5,scaleY:.5,onComplete:this._run,onCompleteScope:this}),this.pathArray[0].x=e.x,this.pathArray[0].y=e.y,this.position.set(e.x,e.y)}_run(){this.runTween=TweenMax.to(this,30,{bezier:{type:"thur",curviness:1,values:this.pathArray,autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone}),this.runTween.vars.bezier.autoRotate=null}play(){this.movie.gotoAndPlay(0)}stop(){this.movie.gotoAndStop(0)}loop(e){this.movie.loop=e,"function"==typeof this.completeAnimationFun&&(this.movie.onComplete=this.completeAnimation.bind(this))}completeAnimation(){"function"==typeof this.completeAnimationFun&&this.completeAnimationFun(this)}onHitBullet(e){super.onHitBullet(e)}_onFishRotationComplete(){this.movie.rotation=0,this.fishShadow&&(this.fishShadow.movie.rotation=0)}die(e,t,i,s){this.releaseNode(),TweenMax.killTweensOf(this),this.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die,this.movie.loop=!1,this.movie.animationSpeed=1/4,this.movie.gotoAndPlay(0),this.movie.onComplete=this.dispose.bind(this),this.fishShadow&&(this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die,this.fishShadow.movie.animationSpeed=1/4,this.fishShadow.movie.gotoAndPlay(0),this.fishShadow.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die);const o=this._getQuantityCoin();TweenMax.delayedCall(.5,this.dieComplete,[this.type,this.x+20,this.y+55,e,t,i,s,o],this)}dieComplete(e,t,i,s,o,n,a,h){this.displayController.effectWinCoinCatchFish(e,t,i,s,o,n,a,h),this.dispose()}setTextureDie(){this.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die}setTextureSwim(){this.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Swim}_getQuantityCoin(){switch(this.type){case 0:case 1:case 2:return 1;case 3:case 4:case 5:return 2;case 6:case 7:return 3}}dispose(){this.parent.removeChild(this),super.dispose()}}var m=u;class f extends h{constructor(e,t){super(e,t),this._snowParticle=null,this._actionThrowGift=!1,this.init()}init(){super.init(),this.movie.animationSpeed=1/3,this.movie.loop=!0,this._path=[[{x:-300,y:360},{x:640,y:360},{x:1600,y:360}],[{x:1600,y:360},{x:640,y:360},{x:-300,y:360}],[{x:-300,y:360},{x:640,y:360},{x:1600,y:360}],[{x:1600,y:360},{x:640,y:360},{x:-300,y:360}]],this._pointThrowGif={x:-100,y:0}}run(){this.movie.gotoAndPlay(0);const e=this.id%2==0?{x:-300,y:360}:{x:1600,y:360};this._runtTween=new TimelineMax({onComplete:this._onComplete,onCompleteScope:this});const t=this._path,i=this.id%this._path.length;t.unshift(this._path[i]),this.position.set(e.x,e.y);for(let e=0;e<t.length;e++){const i=TweenMax.to(this,f.TIME_MOVE,{bezier:{values:t[e],autoRotate:["x","y","rotation",0,!0]},onUpdate:this._onUpdateMove,onUpdateScope:this,ease:Linear.easeNone});this._runtTween.add(i)}this._runtTween.play(0),this._initParticle(),this.gameMovie.soundController.stopGameBGSound(),this.gameMovie.soundController.playBgNoel()}_initParticle(){const e=ParticleConfig.SNOW,t=[{framerate:2,loop:!0,textures:[ResourceManager.Atlas.AtlasEffectsInGame.textures.LightDot]}];e.acceleration.x=Utilities.Number.randRange(-100,100),e.acceleration.y=Utilities.Number.randRange(-100,100),this._snowParticle=new d.a(e,t),AppInfo.gameMovie.layerBoss.addChild(this._snowParticle),this._snowParticle.playParticle(640,360)}_onComplete(){this.dispose(),this.onMoveComplete()}_onUpdateMove(){43!==this.movie.currentFrame||this._actionThrowGift||AppInfo.gameMovie.gameBoard.currentCaTran||this._throwGift(),this._setRotationFollowMove()}_throwGift(){const e=[];let t,i;AppInfo.gameMovie.gameBoard.listFish.sort(({idA:e},{idB:t})=>e-t);const s={};for(let o=0;o<AppInfo.gameMovie.gameBoard.listFish.length&&(t=AppInfo.gameMovie.gameBoard.listFish[o],!f.FISH_TYPE_GIFT.includes(t.type)||t.isGift||t.isRedFish||t.hasInView||t.isFishItem||(t=AppInfo.gameMovie.gameBoard.listFish[o],!t||(TweenMax.killTweensOf(t),this.gameMovie.gameBoard.removeFishAtIndex(this.gameMovie.gameBoard.listFish.indexOf(t)),e.push(t),i=new m(t),this.gameMovie.layerBoss.addChild(i),-1===this.movie.scale.y?(s.x=this.x+180,s.y=this.y-80):(s.x=this.x-180,s.y=this.y-80),i.show(s),i.visible=!0,this.gameMovie.gameBoard.listFish.push(i),2!==e.length)));o++);this._actionThrowGift=!0,TweenMax.delayedCall(.1,this._throwComplete,[],this)}_throwComplete(){this._actionThrowGift=!1}die(){AppInfo.preLoader.soundController.playNhanMaChet(),this.releaseNode(),TweenMax.killTweensOf(this),this._runtTween&&(this._runtTween.kill(),this._runtTween=null),AppInfo.gameMovie.strongBackgroundBig(),super.die(),this._snowParticle&&this._snowParticle.dispose(),this._snowParticle=null}dispose(){this._isDisposed||(super.dispose(),this._snowParticle&&this._snowParticle.dispose(),this._snowParticle=null,this.gameMovie.soundController.stopBgNoel(),this.gameMovie.soundController.playGameBGSound())}}f.TIME_MOVE=35,f.FISH_TYPE_GIFT=[0,1,2,3,4,5,6,7];var g=f;class I extends s.a{constructor(e,t){super(),this.type=t,this.id=e,this.displayController=AppInfo.gameMovie.displayController,this.gameMovie=AppInfo.gameMovie,this.bossMiniRoomManager=AppInfo.gameMovie.displayController.bossMiniRoomManager}addCollision(){const e=o.a.getPointsArea(o.a.TYPE_AREA_COLLISION.FISH,this.type);e.length>0&&(this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,e,n.a.TYPE_COLLISION.FISH,this.movie))}onTriggerCollide({typeCollision:e},t){e===n.a.TYPE_COLLISION.BULLET&&this.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[this.type]||PreLoaderConfig.FishHitBulletDefault)}onHitBullet(e){if(AppInfo.preLoader.soundController.playTrungCa(),16777215!==e){if(this.isRedFish)return;TweenMax.killTweensOf(this.movie),this.movie.tint=16777215,this.movie.tintAlpha=0,TweenMax.to(this.movie,.1,{tint:e,onComplete:()=>{TweenMax.to(this.movie,.3,{tint:16777215})}})}}releaseNode(){this._nodeTree&&this._nodeTree.release()}onMoveComplete(){this.bossMiniRoomManager.bossMoveComplete(this)}dispose(){super.dispose()}}var y=I;var C=class extends y{constructor(e,t){super(e,t),this._init()}_init(){const e=this._getSpineData();this.movie=new PIXI.spine.Spine(e),this.addChild(this.movie),this.addCollision()}_getSpineData(){switch(this.type){case GlobalConstants.BOSS_MINI.CASAU:return ResourceManager.Atlas.CaSau.textures.CaSau.spineData}}addCollision(){switch(this.type){case GlobalConstants.BOSS_MINI.CASAU:this._addCollisionCaSau()}}_addCollisionCaSau(){this._listNode=[AppInfo.gameMovie.collisionManager.addPolygon(this,[-550,-50,550,-50,550,150,-550,150],n.a.TYPE_COLLISION.FISH,this.movie.slotContainers[95])];for(let e=0;e<this._listNode.length;e++)this._listNode[e].onTriggerCollide=this.onTriggerCollide.bind(this)}onTriggerCollide({typeCollision:e},t){e===n.a.TYPE_COLLISION.BULLET&&this.onHitBullet(PreLoaderConfig.ListFishIDHitBullet[this.type]||PreLoaderConfig.FishHitBulletDefault)}_setRotationFollowMove(){const e=180*this.rotation/Math.PI;e>90&&e<=270||e<=-90&&e>-270?-1!==this.movie.scale.y&&(this.movie.scale.y=-1,this.fishShadow&&(this.fishShadow.movie.scale.y=-1)):1!==this.movie.scale.y&&(this.movie.scale.y=1,this.fishShadow&&(this.fishShadow.movie.scale.y=1))}die(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie)}onHitBullet(e){if(AppInfo.preLoader.soundController.playTrungCa(),16777215!==e){if(this.isRedFish)return;TweenMax.killTweensOf(this.movie),this.movie.tint=16777215,this.movie.tintAlpha=0,TweenMax.to(this.movie,.1,{tint:e,onComplete:()=>{TweenMax.to(this.movie,.3,{tint:16777215})}})}}releaseNode(){for(let e=0;e<this._listNode.length;e++)this._listNode[e].release()}dispose(){super.dispose(),this.releaseNode(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie),this.movie&&(this.removeChild(this.movie),this.movie.destroy(),this.movie=null),this._runtTween&&(this._runtTween.kill(),this._runtTween=null)}};class x extends C{constructor(e,t){super(e,t),this._snowParticle=null,this._actionThrowGift=!1,this.init()}init(){super.init(),this.movie.animationSpeed=1/3,this.movie.loop=!0,this.x=-500,this.y=-500,this._path=[[{x:-650,y:360},{x:640,y:360},{x:2e3,y:360}],[{x:2e3,y:360},{x:640,y:360},{x:-650,y:360}],[{x:-650,y:360},{x:640,y:360},{x:2e3,y:360}],[{x:2e3,y:360},{x:640,y:360},{x:-650,y:360}]]}run(){const e=this.id%2==0?{x:-650,y:360}:{x:2e3,y:360};this._runtTween=new TimelineMax({onComplete:this._onComplete,onCompleteScope:this}),this.movie.stateData.setMix("swim","cap_cap",.2),this.movie.stateData.setMix("cap_cap","swim",.4),this.position.set(e.x,e.y),this.movie.state.setAnimation(0,"swim",!0);const t=this._path,i=this.id%this._path.length;t.unshift(this._path[i]),this.position.set(e.x,e.y);for(let e=0;e<t.length;e++){const i=TweenMax.to(this,x.TIME_MOVE,{bezier:{values:t[e],autoRotate:["x","y","rotation",0,!0]},onUpdate:this._onUpdateMove,onUpdateScope:this,ease:Linear.easeNone});this._runtTween.add(i)}this._runtTween.play(0)}_initParticle(){const e=ParticleConfig.SNOW,t=[{framerate:2,loop:!0,textures:[ResourceManager.Atlas.AtlasEffectsInGame.textures.LightDot]}];e.acceleration.x=Utilities.Number.randRange(-100,100),e.acceleration.y=Utilities.Number.randRange(-100,100),this._snowParticle=new d.a(e,t),AppInfo.gameMovie.layerBoss.addChild(this._snowParticle),this._snowParticle.playParticle(640,360)}_onComplete(){this.dispose(),this.onMoveComplete()}_attack(){this.movie.state.setAnimation(0,"cap_cap",!1),this.movie.state.addAnimation(0,"swim",!0,0)}_onUpdateMove(){640===this.x&&this._attack(),this._setRotationFollowMove()}die(){AppInfo.preLoader.soundController.playNhanMaChet(),this.releaseNode(),this.movie.state.timeScale=.5,this.movie.state.setAnimation(0,"dead",!1),TweenMax.killTweensOf(this),this._runtTween&&(this._runtTween.kill(),this._runtTween=null),AppInfo.gameMovie.strongBackgroundBig(),super.die()}dispose(){super.dispose(),this.parent&&this.parent.removeChild(this)}}x.TIME_MOVE=35,x.FISH_TYPE_GIFT=[0,1,2,3,4,5,6,7];var w=x;class _ extends c.a{constructor(e){super(e.id,e.type,0,!1,!1,e.pathArray),e=e||null,this.completeAnimationFun=null,null!==e?(this.isGift=!0,this.scale.set(1),this.addCollision()):(PIXI.Container.call(this),this.init(),this.setTextureDie()),this.displayController=AppInfo.gameMovie.displayController}init(){this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossThanTai.textures.goldBar),this.movie.gotoAndPlay(0),this.movie.anchor.set(.5),this.movie.animationSpeed=.2,this.addChild(this.movie)}addCollision(){this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,[46,41,112,41,112,80,46,80],n.a.TYPE_COLLISION.FISH,this.movie)}show(e=new PIXI.Point(0,0)){TweenMax.to(this,.3,{startAt:{rotation:Math.PI,scaleX:0,scaleY:0},rotation:0,scaleX:.5,scaleY:.5,onComplete:this._run,onCompleteScope:this}),this.pathArray[0].x=e.x,this.pathArray[0].y=e.y,this.position.set(e.x,e.y)}_run(){this.runTween=TweenMax.to(this,30,{bezier:{type:"thur",curviness:1,values:this.pathArray,autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone}),this.runTween.vars.bezier.autoRotate=null}play(){this.movie.gotoAndPlay(0)}stop(){this.movie.gotoAndStop(0)}loop(e){this.movie.loop=e,"function"==typeof this.completeAnimationFun&&(this.movie.onComplete=this.completeAnimation.bind(this))}completeAnimation(){"function"==typeof this.completeAnimationFun&&this.completeAnimationFun(this)}onHitBullet(e){super.onHitBullet(e)}_onFishRotationComplete(){this.movie.rotation=0,this.fishShadow&&(this.fishShadow.movie.rotation=0)}die(e,t,i,s){super.die(),this.releaseNode(),TweenMax.killTweensOf(this);const o=this._getQuantityCoin();TweenMax.delayedCall(.5,this.dieComplete,[this.type,this.x+20,this.y+55,e,t,i,s,o],this)}dieComplete(e,t,i,s,o,n,a,h){this.displayController.effectWinCoinCatchFish(e,t,i,s,o,n,a,h),this.dispose()}setTextureDie(){this.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Die}setTextureSwim(){this.movie.textures=ResourceManager.Atlas.AtlasBossMini.textures.fish35Swim}_getQuantityCoin(){switch(this.type){case 0:case 1:case 2:return 1;case 3:case 4:case 5:return 2;case 6:case 7:return 3}}dispose(){this.parent.removeChild(this),super.dispose()}}var M=_;class S extends h{constructor(e,t){super(e,t),this._snowParticle=null,this._actionThrowGift=!1,this.init()}init(){super.init(),this.movie.animationSpeed=1/3,this.movie.loop=!0,this._path=[[{x:-300,y:300},{x:640,y:300},{x:1600,y:300}],[{x:1600,y:300},{x:640,y:300},{x:-300,y:300}],[{x:-300,y:300},{x:640,y:300},{x:1600,y:300}],[{x:1600,y:300},{x:640,y:300},{x:-300,y:300}]],null!==this._nodeTree&&this._nodeTree.setTargetTransform({scale:this.movie})}run(){this.movie.gotoAndPlay(0);const e=this.id%2==0?{x:-300,y:300}:{x:1600,y:300};this._runtTween=new TimelineMax({onComplete:this._onComplete,onCompleteScope:this});const t=this._path,i=this.id%this._path.length;t.unshift(this._path[i]),this.position.set(e.x,e.y);for(let e=0;e<t.length;e++){const i=TweenMax.to(this,S.TIME_MOVE,{bezier:{values:t[e],autoRotate:["x","y","rotation",0,!0]},onUpdate:this._onUpdateMove,onUpdateScope:this,ease:Linear.easeNone});this._runtTween.add(i)}this._runtTween.play(0),this._initParticle(),this.gameMovie.soundController.stopGameBGSound(),this.gameMovie.soundController.playBgThanTai()}_initParticle(){const e=ParticleConfig.SAKURA,t=[{framerate:15,loop:!0,textures:ResourceManager.Atlas.AtlasEffects.textures.sakuraEffect}];e.acceleration.x=Utilities.Number.randRange(-100,100),e.acceleration.y=Utilities.Number.randRange(-100,100),this._snowParticle=new d.a(e,t),AppInfo.gameMovie.layerBoss.addChild(this._snowParticle),this._snowParticle.playParticle(640,360)}_onComplete(){this.dispose(),this.onMoveComplete()}_onUpdateMove(){59!==this.movie.currentFrame||this._actionThrowGift||AppInfo.gameMovie.gameBoard.currentCaTran||this._throwGift(),this._setRotationFollowMove()}_throwGift(){const e=[];let t,i;AppInfo.gameMovie.gameBoard.listFish.sort(({idA:e},{idB:t})=>e-t);const s={};for(let o=0;o<AppInfo.gameMovie.gameBoard.listFish.length&&(t=AppInfo.gameMovie.gameBoard.listFish[o],!S.FISH_TYPE_GIFT.includes(t.type)||t.isGift||t.isRedFish||t.hasInView||t.isFishItem||(t=AppInfo.gameMovie.gameBoard.listFish[o],!t||(TweenMax.killTweensOf(t),this.gameMovie.gameBoard.removeFishAtIndex(this.gameMovie.gameBoard.listFish.indexOf(t)),e.push(t),i=new M(t),this.gameMovie.layerBoss.addChild(i),-1===this.movie.scale.y?(s.x=this.x-15,s.y=this.y-85):(s.x=this.x+15,s.y=this.y-85),i.show(s),i.visible=!0,this.gameMovie.gameBoard.listFish.push(i),2!==e.length)));o++);this.gameMovie.soundController.playDropBar(),this._actionThrowGift=!0,TweenMax.delayedCall(.1,this._throwComplete,[],this)}_throwComplete(){this._actionThrowGift=!1}die(){this.gameMovie.soundController.playWinThanTai(),this.releaseNode(),TweenMax.killTweensOf(this),this._runtTween&&(this._runtTween.kill(),this._runtTween=null),AppInfo.gameMovie.strong(),this.movie.animationSpeed=.2,super.die(),this._snowParticle&&this._snowParticle.dispose(),this._snowParticle=null}dispose(){this._isDisposed||(super.dispose(),this._snowParticle&&this._snowParticle.dispose(),this._snowParticle=null,this.gameMovie.soundController.stopBgThanTai(),this.gameMovie.soundController.playGameBGSound())}}S.TIME_MOVE=35,S.FISH_TYPE_GIFT=[0,1,2,3,4,6,7];var A=S;class v extends s.a{constructor(e,t){super(),this.type=e,this.id=t,this._overlay=new PIXI.extras.TilingSprite(PIXI.Graphics.Rectangle(0,0,10,10,5180,.5).generateCanvasTexture(),AppInfo.appRealWidth,AppInfo.appRealHeight),this.addChild(this._overlay),this.callBackCompleteEffectShow=null,this.gameMovie=AppInfo.gameMovie}dispose(){super.dispose()}}var T=v;var b=class extends T{constructor(e,t){super(e,t),this._image=null,this._tween=null,this.init()}init(){super.init(),this._image=new PIXI.Sprite(ResourceManager.Atlas.AtlastBossAngle.textures.AngelComing),this._image.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._image.scale.set(0),this._image.anchor.set(.5),this.addChild(this._image)}play(){this._image.scale.set(5),this._image.alpha=0,this._tween=new TweenMax.to(this._image,2,{scaleX:1,scaleY:1,alpha:1,ease:Bounce.easeOut,onComplete:this._onCompleteShow,onReverseComplete:this._onCompleteAll,onCompleteScope:this,onReverseCompleteScope:this}),this._tween.play()}_onCompleteShow(){TweenMax.delayedCall(1,this.hide,[],this)}hide(){this._tween.reverse()}_onCompleteAll(){this.visible=!1,"function"==typeof this.callBackCompleteEffectShow&&this.callBackCompleteEffectShow()}dispose(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._image),TweenMax.killDelayedCallsTo(this.hide),this._image.destroy(),this.removeChild(this._image),this._tween.kill(),this._tween=null,this._image=null,super.dispose()}};var B=class extends T{constructor(e,t){super(e,t),this._image=null,this._textName=null,this._textComing=null,this._tween=null,this.init()}init(){super.init(),this._image=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSanta.textures.SantaClaus),this._textName=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSanta.textures.SantaClausText),this._textComing=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSanta.textures.SantaClausComing),this._image.position.set(AppInfo.appRealWidth/2,0),this._image.anchor.set(.5),this._textName.anchor.set(.5),this._textComing.anchor.set(.5),this._textComing.position.set(0,120),this._image.addChild(this._textName,this._textComing),this.addChild(this._image)}play(){this._image.alpha=0,this._tween=new TweenMax.to(this._image,2,{scaleX:1,scaleY:1,alpha:1,y:AppInfo.appRealHeight/2,onComplete:this._onCompleteShow,onReverseComplete:this._onCompleteAll,onCompleteScope:this,onReverseCompleteScope:this}),TweenMax.to(this._textName,.4,{ease:Linear.easeNone,scaleX:.8,scaleY:.8,yoyo:!0,repeat:-1}),TweenMax.to(this._textComing,.4,{ease:Linear.easeNone,scaleX:1.2,scaleY:1.2,yoyo:!0,repeat:-1}),this._tween.play()}_onCompleteShow(){TweenMax.delayedCall(.1,this.hide,[],this)}hide(){this._tween.reverse()}_onCompleteAll(){this.visible=!1,"function"==typeof this.callBackCompleteEffectShow&&this.callBackCompleteEffectShow()}dispose(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._image),TweenMax.killDelayedCallsTo(this.hide),this._image.destroy(),this.removeChild(this._image),this._tween.kill(),this._tween=null,this._image=null,super.dispose()}};class P extends PIXI.Container{constructor(e){super(),this._left=null,this._right=null,this._texture=e,this.init()}init(){this._left=new PIXI.Sprite(this._texture),this._right=new PIXI.Sprite(this._texture),this._right.x=2*this._left.width-1,this._right.scaleX=-1,this.addChild(this._left,this._right),this.anchor=new PIXI.ObservablePoint(this._anchorSet,this)}_anchorSet(){}dispose(){s.a.prototype.dispose.call(this)}get left(){return this._left}get right(){return this._right}}var k=P;var L=class extends T{constructor(e,t){super(e,t),this._image=null,this._imageEffect=null,this._back=null,this._tween=null,this.init()}init(){super.init(),this._image=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossCaSau.textures.moster),this._imageEffect=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossCaSau.textures.moster),this._back=new k(ResourceManager.Atlas.AtlasBossCaSau.textures.leftMoster),this._image.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._back.position.set(AppInfo.appRealWidth/2-this._back.width/2,AppInfo.appRealHeight/2-this._back.height/2-100),this._imageEffect.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._image.scale.set(1),this._image.anchor.set(.5),this._imageEffect.anchor.set(.5),this.addChild(this._back),this.addChild(this._image),this.addChild(this._imageEffect),this._tween=new TimelineMax({onComplete:this.hide,onCompleteScope:this})}play(){this._buildAnim(),this._tween.play(0)}_buildAnim(){const e=TweenMax.to(this,2,{startAt:{alpha:0},alpha:1,ease:Linear.eseaNone}),t=TweenMax.to(this._imageEffect,.8,{startAt:{},scaleX:3,scaleY:3,alpha:0,repeat:3,onRepeat:this._onRepeat_Step_2,onRepeatScope:this,ease:Linear.eseaNone});this._tween.add(e),this._tween.add(t)}_onRepeat_Step_2(){this.gameMovie.strongBackground()}hide(){TweenMax.to(this,2,{startAt:{alpha:1},alpha:0,ease:Linear.eseaNone,onComplete:this._onCompleteAll,onCompleteScope:this})}_onCompleteAll(){this.visible=!1,"function"==typeof this.callBackCompleteEffectShow&&this.callBackCompleteEffectShow()}dispose(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._image),TweenMax.killDelayedCallsTo(this.hide),this._image.destroy(),this.removeChild(this._image),this._tween.kill(),this._tween=null,this._image=null,super.dispose()}};var R=class extends T{constructor(e,t){super(e,t),this._image=null,this._coming=null,this._thantai=null,this._coming=null,this._tween=null,this.init()}init(){super.init(),this._image=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossThanTai.textures.icon),this._coming=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossThanTai.textures.coming),this._thantai=new k(ResourceManager.Atlas.AtlasBossThanTai.textures.godGold),this._iconCircle=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossThanTai.textures.iconCircle),this._iconCircleBig=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossThanTai.textures.iconCircleBig),this._thantai.pivot.set(this._thantai.width/2,this._thantai.height),this._image.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._coming.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2+100),this._thantai.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2+150),this._iconCircle.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._iconCircleBig.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._image.anchor.set(.5),this._coming.anchor.set(.5),this._iconCircle.anchor.set(.5),this._iconCircleBig.anchor.set(.5),this.addChild(this._thantai,this._iconCircle,this._iconCircleBig,this._image,this._coming)}play(){TweenMax.to(this._iconCircle,4,{rotation:Utilities.toRad(359),repeat:-1,ease:Linear.easeNone}),TweenMax.to(this._iconCircleBig,4,{rotation:-Utilities.toRad(359),repeat:-1,ease:Linear.easeNone}),TweenMax.to(this._thantai.left,1.5,{x:"-=40",repeat:-1,yoyo:!0,ease:Linear.easeNone}),TweenMax.to(this._thantai.right,1.5,{x:"+=40",repeat:-1,yoyo:!0,ease:Linear.easeNone}),TweenMax.to(this._image,.2,{y:"-=10",repeat:-1,yoyo:!0,ease:Linear.easeNone}),TweenMax.to(this._coming,.2,{y:"+=10",repeat:-1,yoyo:!0,ease:Linear.easeNone}),this._image.scale.set(5),this._thantai.scale.set(5),this._coming.scale.set(5),this._iconCircle.scale.set(5),this._iconCircleBig.scale.set(5),this._image.alpha=this._thantai.alpha=this._coming.alpha=this._iconCircle.alpha=this._iconCircleBig.alpha=0,this._buildAnimation()}_buildAnimation(){this._tween=new TimelineMax({onComplete:this._onCompleteShow,onCompleteScope:this,onReverseComplete:this._onCompleteAll,onReverseCompleteScope:this}),this._tween.staggerTo([this._image,this._thantai,this._coming,this._iconCircle,this._iconCircleBig],1.5,{scaleX:1,scaleY:1,alpha:1,ease:Back.easeOut.config(1)},.3),this._tween.play(0)}_onCompleteShow(){TweenMax.delayedCall(2,this.hide,[],this)}hide(){this._tween.reverse()}_onCompleteAll(){this.visible=!1,"function"==typeof this.callBackCompleteEffectShow&&this.callBackCompleteEffectShow()}dispose(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._image),TweenMax.killDelayedCallsTo(this.hide),this._image.destroy(),this.removeChild(this._image),this._tween.kill(),this._tween=null,this._image=null,super.dispose()}};var F=class{constructor(){this._listEffect=[],this.displayController=AppInfo.gameMovie.displayController,this.gameMovie=AppInfo.gameMovie,this.playComplete=null,this._init()}_init(){}playComplete(e){"function"==typeof this.playComplete&&this.playComplete(e)}createEffect(e,t){let i=null;switch(e){case GlobalConstants.BOSS_MINI.ANGEL:i=new b(e,t);break;case GlobalConstants.BOSS_MINI.SANTA:i=new B(e,t);break;case GlobalConstants.BOSS_MINI.THANTAI:AppInfo.preLoader.soundController.stopGameBGSound(),AppInfo.preLoader.soundController.playBgThanTaiDen(),i=new R(e,t);break;case GlobalConstants.BOSS_MINI.CASAU:i=new L(e,t);break;default:return i}return i.callBackCompleteEffectShow=this.playComplete.bind(this,i),this._listEffect.push(i),this.gameMovie.layerEffect.contains(i)||this.gameMovie.layerEffect.addChild(i),i.play(),i}dispose(){for(let e=0;e<this._listEffect.length;e++)this._listEffect[e].dispose();this._listEffect.length=0}},E=i(76);class G extends E.a{constructor(){super(),this._count=1,this._totalCount=2,this._power=10,this._listEffectBoom=[],this._listDelay=[]}init(){super.init(),this._effects=new PIXI.spine.Spine(ResourceManager.Atlas.AngleDieEffectsLightBones.textures.AngleDieEffectsLightBones.spineData),this._effects1=new PIXI.spine.Spine(ResourceManager.Atlas.AngleDieEffectsBones.textures.AngleDieEffectsBones.spineData),this.addChild(this._effects,this._effects1),this.removeChild(this._bgWin),this._bgWin=new PIXI.spine.Spine(ResourceManager.Atlas.PowerUpBones.textures.PowerUpBones.spineData),this._effects.visible=this._effects1.visible=!1,this._effects.state.timeScale=.75,this._effects1.state.timeScale=.75,this._bgWin.state.timeScale=.75,this._effects1.state.onComplete=this._onCompleteAnim.bind(this),this._container=new PIXI.Container,this._iconWin=new PIXI.Sprite(ResourceManager.Atlas.AtlastBossAngle.textures.IconWinBoss),this._iconCirle=new PIXI.Sprite(ResourceManager.Atlas.AtlastBossAngle.textures.iconCirle),this._textCoin=new PIXI.Text("0",{dropShadow:!0,dropShadowAlpha:.72,dropShadowAngle:1.5707963267948966,dropShadowDistance:2,fill:["#febd11","#ffeea5"],fillGradientStops:[.63,0],fontSize:30,fontWeight:"bold",lineJoin:"round",padding:23,stroke:"#febd11"}),this._iconCirle.anchor.set(.5),this._iconWin.anchor.set(.5),this._textCoin.anchor.set(.5),this._textCount=new PIXI.extras.BitmapText("0",{font:"70px "+PreLoaderConfig.FontResource.FontNumberAngel.name}),this._textCount.anchor.set(.5),this._textCount.visible=!1,this._bgWin.addChild(this._textCoin),this._iconCirle.addChild(this._textCount),this.addChild(this._container),this.addChild(this._iconCirle),this.addChild(this._bgWin),this.addChild(this._iconWin),this._iconCirle.visible=!1,this._setPosition()}_setPosition(){this._iconCirle.position.set(640,360),this._iconWin.position.set(640,360),this._bgWin.position.set(640,460),this._effects.position.set(640,360),this._effects1.position.set(640,360),this._textCoin.position.set(-10,5),this._textCount.y=-10}play(e){this._info=e,this._container.scale.set(0),this._bgWin.scale.set(0),this._iconWin.scale.set(1),this._timeLineMax=new TimelineMax({onComplete:this._playEffectAngel,onCompleteScope:this});const t=this.displayController.getUserSeatByUserID(this._info.userID);this._basePosition=t.position,t&&(this._totalCount=Math.ceil(e.fishScore/(40*t.compoGun.power)),this._power=t.compoGun.power);const i=this.getPositionUserByID(t.basePosition),s=TweenMax.to(this._bgWin,.8,{scaleX:1,scaleY:1,ease:Back.easeOut.config(2)}),o=TweenMax.staggerTo([this._bgWin,this._iconWin],.8,{cycle:{x:[i[0].x,i[1].x],y:[i[0].y,i[1].y]},delay:.5,ease:Back.easeOut.config(2)},0);TweenMax.to(this._iconCirle,.2,{scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,yoyo:!0}),TweenMax.to(this._iconWin,.8,{delay:2,scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,y:"-=20",yoyo:!0}),this._timeLineMax.add(s),this._timeLineMax.add(o),this._timeLineMax.play()}_playEffectWin(){const e=this.displayController.getUserSeatByUserID(this._info.userID),t=this._bgWin.getGlobalPosition(),i=this._info.fishScore/50;if(0===this._listEffectBoom.length)for(var s=0;s<15;s++){(a=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.bulletExplode)).loop=!1,a.animationSpeed=1/3,a.scale.set(1.5),this._listEffectBoom.push(a),this.addChild(a)}let o,n;for(s=0;s<Utilities.Number.randRange(10,15);s++){o=Utilities.Number.randRange(0,1280),n=Utilities.Number.randRange(0,720);var a=this._listEffectBoom[s];const h=TweenMax.delayedCall(1,this._effectExplode,[i,o,n,t,a,e],this);this._listDelay.push(h)}Utilities.tweenCoinWithDelay(this._textCoin,this._info.fishScore*(this._count/this._totalCount),7),AppInfo.gameMovie.strongBackground()}_effectExplode(e,t,i,{x:s,y:o},n,{basePosition:a}){this.displayController.effectWinCoinCatchFish(Utilities.Number.randRange(10,16),t,i,Utilities.Number.randRange(0,10)*this._power,s,o,a),n.position.set(t,i),n.gotoAndPlay(0),this._textCount.visible=!0,this._textCount.text=this._count}_playEffectAngel(){this._effects.visible=this._effects1.visible=!0,this._effects.state.setAnimation(0,"animation",!0),this._effects1.state.setAnimation(0,"animation",!1),this._bgWin.state.setAnimation(0,"animation",!0),this._iconCirle.visible=!0,this._playEffectWin()}_onCompleteAnim(){this._count++,this._count>=this._totalCount?(this._count>this._totalCount&&(this._count=this._totalCount),Utilities.tweenCoinWithDelay(this._textCoin,this._info.fishScore*(this._count/this._totalCount),1,0),TweenMax.delayedCall(1,this._endEffect,[],this)):(this._effects1.state.setAnimation(0,"animation",!1),this._playEffectWin())}_endEffect(){this._iconCirle.visible=this._effects.visible=this._effects1.visible=!1;const e=this.displayController.getUserSeatByUserID(this._info.userID),t=e.iconCoin.getGlobalPosition();this.displayController.effectWinCoinCatchFish(17,this._bgWin.x,this._bgWin.y,this._info.fishScore,t.x,t.y,e.basePosition),TweenMax.to([this._bgWin],2,{alpha:0,x:"+=100",onComplete:this.dispose,onCompleteScope:this,delay:2}),this.onCompleteEffect()}dispose(){if(!this._isDisposed){if(TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._container),TweenMax.killTweensOf(this._iconCirle),TweenMax.killTweensOf(this._bgWin),TweenMax.killTweensOf(this._iconWin),this.removeChild(this._iconCirle),this.removeChild(this._effects),this.removeChild(this._effects1),this.removeChild(this._bgWin),this.removeChild(this._textCoin),this.removeChild(this._iconWin),this.removeChild(this._container),this._timeLineMax&&this._timeLineMax.kill(),this._iconCirle.destroy(),this._effects.destroy(),this._effects1.destroy(),this._bgWin.destroy(),this._textCoin.destroy(),this._iconWin.destroy(),this._container.destroy(),this._iconCirle=null,this._effects=null,this._effects1=null,this._bgWin=null,this._textCoin=null,this._iconWin=null,this._container=null,this._timeLineMax=null,this.parent.contains(this)&&this.parent.removeChild(this),this._listEffectBoom.length>0){let e;for(;this._listEffectBoom.length>0;)e=this._listEffectBoom[0],PIXI.utils.removeItems(this._listEffectBoom,0,1),this.removeChild(e),e.destroy(),e=null}if(this._listDelay.length>0){for(let e=0;e<this._listDelay.length;e++)TweenMax.killDelayedCallsTo(this._listDelay[e]);this._listDelay.length=0}super.dispose()}}}var D=G;class U extends E.a{constructor(){super(),this._listEffectBoom=[],this._listDelay=[],this._listGif=[],this._listEffect=[],this._addGiftFlag=!1,this._gifIndex=0,this._quantityEffect=1,this._quantityTotal=0,this._left=[{x:-200,y:400},{x:640,y:260},{x:1600,y:120}],this._right=[{x:1600,y:400},{x:640,y:260},{x:-200,y:120}]}init(){super.init(),this._effects=new PIXI.spine.Spine(ResourceManager.Atlas.AngleDieEffectsLightBones.textures.AngleDieEffectsLightBones.spineData),this._effects1=new PIXI.spine.Spine(ResourceManager.Atlas.SantaEffectBones.textures.SantaEffectBones.spineData),this._bgWin=new PIXI.spine.Spine(ResourceManager.Atlas.PowerUpBones.textures.PowerUpBones.spineData),this._effects.visible=this._effects1.visible=!1,this._effects.state.timeScale=.75,this._effects1.state.timeScale=2,this._bgWin.state.timeScale=.75,this._container=new PIXI.Container,this._iconWin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossSanta.textures.IconWinSanta),this._iconCirle=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.iconCirle),this._textCoin=new PIXI.Text("0",TextStyleConfig.COIN_WIN_MINI_BOSS),this._iconCirle.anchor.set(.5),this._iconWin.anchor.set(.5),this._textCoin.anchor.set(.5),this._textCount=new PIXI.extras.BitmapText("0",{font:"70px "+PreLoaderConfig.FontResource.FontNumberAngel.name}),this._textCount.anchor.set(.5),this._textCount.visible=!1,this._bgWin.addChild(this._textCoin),this._iconCirle.addChild(this._textCount),this._santa=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBossSanta.textures.SantaSwim),this._santa.textures.length=23,this._santa.anchor.set(.5),this._santa.gotoAndPlay(0),this.addChild(this._effects,this._effects1,this._santa,this._container,this._iconCirle,this._bgWin,this._iconWin),this._iconCirle.visible=!1,this._setPosition()}_setPosition(){this._iconCirle.position.set(640,360),this._iconWin.position.set(640,360),this._bgWin.position.set(640,460),this._effects.position.set(640,360),this._effects1.position.set(640,360),this._textCoin.position.set(-10,5),this._santa.position.set(-200,360),this._textCount.y=-10}play(e){this._info=e,this._container.scale.set(0),this._bgWin.scale.set(0),this._iconWin.scale.set(1),this._timeLineMax=new TimelineMax({onComplete:this._playEffectSanta,onCompleteScope:this});const t=this.displayController.getUserSeatByUserID(this._info.userID);t&&(this._basePosition=t.position,this._power=t.compoGun.power,this._quantityTotal=Math.floor(e.fishScore/(40*this._power)));const i=this._info.boss;i&&(this._bgWin.position.set(i.x,i.y),this._iconWin.position.set(i.x,i.y-100));const s=this.getPositionUserByID(t.basePosition),o=TweenMax.to(this._bgWin,.8,{scaleX:1,scaleY:1,ease:Back.easeOut.config(2)}),n=TweenMax.staggerTo([this._bgWin,this._iconWin],.8,{cycle:{x:[s[0].x,s[1].x],y:[s[0].y,s[1].y]},delay:.5,ease:Back.easeOut.config(2)},0);TweenMax.to(this._iconCirle,.2,{scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,yoyo:!0}),TweenMax.to(this._iconWin,.8,{delay:2,scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,y:"-=20",yoyo:!0}),this._timeLineMax.add(o),this._timeLineMax.add(n),this._timeLineMax.play()}_santaRun(){this._textCount.text=this._quantityEffect;for(let e=0;e<10;e++){const e=new m;e.visible=!0,e.scale.set(.5),e.position.set(this._santa.x,360),e.stop(),e.completeAnimationFun=this._playGifComplete.bind(this),e.loop(!1),this._listGif.push(e);const t=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.bulletExplode);t.loop=!1,t.visible=!1,t.anchor.set(.5),t.animationSpeed=1/3,t.scale.set(1.5),this._listEffect.push(t),this.addChild(t)}this._tweenSantaRun=TweenMax.to(this._santa,2,{bezier:{startAt:{x:-200,y:360},type:"thur",curviness:0,values:this._left,autoRotate:["x","y","rotation",0,!0]},delay:2,onUpdate:this._onUpdate,onUpdateScope:this,onComplete:this._openGif,onCompleteScope:this,ease:Linear.easeNone}),this._tweenSantaRun.play(0)}_onUpdate(){this._addGiftFlag||this._addGift()}_addGift(){if(this._santa.x>200&&this._santa.x<1280){const e=this._listGif[this._gifIndex];if(e){e.setTextureSwim(),e.loop(!0),e.play(),e.visible=!0;const t=.1*Utilities.Number.randRange(7,9);TweenMax.to(e,1,{startAt:{rotation:Math.PI*Utilities.Number.randRange(-3,3),scaleX:0,scaleY:0,x:this._santa.x,y:this._santa.y},rotation:0,scaleX:t,scaleY:t,y:360+Utilities.Number.randRange(-200,100),x:this._santa.x-50}),this.contains(e)||this.addChild(e),this._addGiftFlag=!0,this._gifIndex++,TweenMax.delayedCall(.1,this._onCompleteDelay,[],this)}}}_onCompleteDelay(){this._addGiftFlag=!1}_playGifComplete(e){e.visible=!1}_openGif(){this._effects1.state.setAnimation(0,"animation",!1),AppInfo.gameMovie.strongBackground(),TweenMax.delayedCall(.5,this.gameMovie.soundController.playCaDoChet,[],this.gameMovie.soundController),this._gifIndex=0;const e=this.displayController.getUserSeatByUserID(this._info.userID);if(e){const t=this._bgWin.getGlobalPosition();for(let i=0;i<this._listGif.length;i++)TweenMax.delayedCall(.1*Utilities.Number.randRange(1,8),this._playEffectWinGift,[this._listGif[i],e,t,this._listEffect[i]],this);Utilities.tweenCoin(this._textCoin,this._info.fishScore*(this._quantityEffect/this._quantityTotal),7),TweenMax.delayedCall(2,this._onCompleteMoney,[],this)}else this.dispose()}_playEffectWinGift(e,{basePosition:t},{x:i,y:s},o){let n=Math.random();n=n>.9?Utilities.Number.randRange(7,9):Utilities.Number.randRange(1,4),TweenMax.delayedCall(1,this._playCoinWinEffect,[Utilities.Number.randRange(10,16),e,n*this._power,i,s,t,o],this),e.setTextureDie(),e.loop(!1),e.play()}_playCoinWinEffect(e,{x:t,y:i},s,o,n,a,h){AppInfo.preLoader.soundController.playHopQuaMo(),this.displayController.effectWinCoinCatchFish(e,t,i,s,o,n,a),h.visible=!0,h.position.set(t,i),h.gotoAndPlay(0)}_onCompleteMoney(){this._quantityEffect++,this._textCount.text=this._quantityEffect,this._quantityEffect>this._quantityTotal?TweenMax.delayedCall(2.5,this._endEffect,[],this):(this._quantityEffect%2==0?(this._tweenSantaRun.updateTo({bezier:{startAt:{x:1600,y:400},type:"thur",curviness:0,values:this._right,autoRotate:["x","y","rotation",0,!0]}},!0),this._santa.scaleY=-1):(this._tweenSantaRun.updateTo({bezier:{startAt:{x:-200,y:400},type:"thur",curviness:0,values:this._left,autoRotate:["x","y","rotation",0,!0]}},!0),this._santa.scaleY=1),this._tweenSantaRun.play(0))}_playEffectSanta(){this._effects.state.setAnimation(0,"animation",!0),this._effects1.state.setAnimation(0,"animation",!1),this._bgWin.state.setAnimation(0,"animation",!0),this._effects.visible=this._effects1.visible=this._iconCirle.visible=this._textCount.visible=!0,this._santaRun()}_endEffect(){Utilities.tweenCoin(this._textCoin,this._info.fishScore,1),this._iconCirle.visible=this._effects.visible=this._effects1.visible=!1;const e=this.displayController.getUserSeatByUserID(this._info.userID),t=e.iconCoin.getGlobalPosition();this.displayController.effectWinCoinCatchFish(17,this._bgWin.x,this._bgWin.y,this._info.fishScore,t.x,t.y,e.basePosition),TweenMax.to([this._bgWin],2,{alpha:0,x:"+=100",onComplete:this.dispose,onCompleteScope:this,delay:2}),this.onCompleteEffect()}dispose(){if(!this._isDisposed){if(TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._container),TweenMax.killTweensOf(this._iconCirle),TweenMax.killTweensOf(this._bgWin),TweenMax.killTweensOf(this._iconWin),this.removeChild(this._iconCirle),this.removeChild(this._effects),this.removeChild(this._effects1),this.removeChild(this._bgWin),this.removeChild(this._textCoin),this.removeChild(this._iconWin),this.removeChild(this._container),this._timeLineMax&&this._timeLineMax.kill(),this._tweenSantaRun&&this._tweenSantaRun.kill(),this._tweenSantaRun=null,this._iconCirle.destroy(),this._effects.destroy(),this._effects1.destroy(),this._bgWin.destroy(),this._textCoin.destroy(),this._iconWin.destroy(),this._container.destroy(),this._iconCirle=null,this._effects=null,this._effects1=null,this._bgWin=null,this._textCoin=null,this._iconWin=null,this._container=null,this._timeLineMax=null,this.parent.contains(this)&&this.parent.removeChild(this),this._listEffect.length>0){let e;for(;this._listEffect.length>0;)e=this._listEffect[0],PIXI.utils.removeItems(this._listEffect,0,1),this.removeChild(e),e.destroy(),e=null}if(this._listDelay.length>0){for(let e=0;e<this._listDelay.length;e++)TweenMax.killDelayedCallsTo(this._listDelay[e]);this._listDelay.length=0}TweenMax.killDelayedCallsTo(this._onCompleteDelay),TweenMax.killDelayedCallsTo(this._onCompleteMoney),TweenMax.killDelayedCallsTo(this._endEffect),TweenMax.killDelayedCallsTo(this._playCoinWinEffect),TweenMax.killDelayedCallsTo(this.displayController.effectWinCoinCatchFish),super.dispose()}}}var N=U;class O extends E.a{constructor(){super(),this._count=1,this._totalCount=2,this._power=10,this._listEffectBoom=[],this._listDelay=[]}init(){super.init(),this._casau=new PIXI.spine.Spine(ResourceManager.Atlas.CaSau.textures.CaSau.spineData),this.addChild(this._casau),this._effects=new PIXI.spine.Spine(ResourceManager.Atlas.AngleDieEffectsLightBones.textures.AngleDieEffectsLightBones.spineData),this._effects1=new PIXI.spine.Spine(ResourceManager.Atlas.CaSauDie.textures.CaSauDie.spineData),this.addChild(this._effects1),this.removeChild(this._bgWin),this._bgWin=new PIXI.spine.Spine(ResourceManager.Atlas.PowerUpBones.textures.PowerUpBones.spineData),this._effects.visible=this._effects1.visible=!1,this._effects.state.timeScale=.75,this._effects1.state.timeScale=.5,this._casau.state.timeScale=1.5,this._bgWin.state.timeScale=.75,this._container=new PIXI.Container,this._iconWin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossCaSau.textures.IconWinBoss),this._iconCirle=new PIXI.Sprite(ResourceManager.Atlas.AtlastBossAngle.textures.iconCirle),this._textCoin=new PIXI.Text("0",{dropShadow:!0,dropShadowAlpha:.72,dropShadowAngle:1.5707963267948966,dropShadowDistance:2,fill:["#febd11","#ffeea5"],fillGradientStops:[.63,0],fontSize:30,fontWeight:"bold",lineJoin:"round",padding:23,stroke:"#febd11"}),this._iconCirle.anchor.set(.5),this._iconWin.anchor.set(.5),this._textCoin.anchor.set(.5),this._iconCirle.scale.set(.5),this._textCount=new PIXI.extras.BitmapText("0",{font:"70px "+PreLoaderConfig.FontResource.FontNumberAngel.name}),this._textCount.anchor.set(.5),this._textCount.visible=!1,this._bgWin.addChild(this._textCoin),this._iconCirle.addChild(this._textCount),this.addChild(this._container),this.addChild(this._iconCirle),this.addChild(this._bgWin),this.addChild(this._iconWin),this._iconCirle.visible=!1,this._setPosition()}_setPosition(){this._iconCirle.position.set(640,360),this._iconWin.position.set(640,360),this._bgWin.position.set(640,460),this._effects.position.set(640,360),this._effects1.position.set(640,360),this._textCoin.position.set(-10,5),this._textCount.y=-10,this._casau.position.set(-1e3,360)}play(e){this._info=e,this._container.scale.set(0),this._bgWin.scale.set(0),this._iconWin.scale.set(1),this._timeLineMax=new TimelineMax({onComplete:this._playEffectAngel,onCompleteScope:this}),this._textCount.visible=!0,this._textCount.text=this._count;const t=this._info.boss;t&&(this._bgWin.position.set(t.x,t.y),this._iconWin.position.set(t.x,t.y-100)),this._effects1.visible=!0,this._effects1.state.setAnimation(0,"animation",!1);const i=this.displayController.getUserSeatByUserID(this._info.userID);this._basePosition=i.position,i&&(this._totalCount=Math.ceil(e.fishScore/(40*i.compoGun.power)),this._power=i.compoGun.power);const s=this.getPositionUserByID(i.basePosition),o=TweenMax.to(this._bgWin,.8,{scaleX:1,scaleY:1,ease:Back.easeOut.config(2)}),n=TweenMax.staggerTo([this._bgWin,this._iconWin],.8,{cycle:{x:[s[0].x,s[1].x],y:[s[0].y,s[1].y]},delay:.5,ease:Back.easeOut.config(2)},0);TweenMax.to(this._iconCirle,.2,{scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,yoyo:!0}),TweenMax.to(this._iconWin,.8,{delay:2,scaleX:.8,scaleY:.8,ease:Linear.easeNone,repeat:-1,y:"-=20",yoyo:!0}),this._timeLineMax.add(o),this._timeLineMax.add(n),this._timeLineMax.play()}_playEffectWin(){const e=this.displayController.getUserSeatByUserID(this._info.userID),t=this._bgWin.getGlobalPosition(),i=this._info.fishScore/50;if(e){if(0===this._listEffectBoom.length)for(var s=0;s<20;s++){(o=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.bulletExplode)).loop=!1,o.animationSpeed=1/3,o.scale.set(1.5),this._listEffectBoom.push(o),this.addChild(o)}let n,a;for(s=0;s<Utilities.Number.randRange(15,20);s++){n=Utilities.Number.randRange(0,1280),a=Utilities.Number.randRange(0,720);var o=this._listEffectBoom[s];const h=TweenMax.delayedCall(1,this._effectExplode,[i,n,a,t,o,e],this);this._listDelay.push(h)}Utilities.tweenCoinWithDelay(this._textCoin,this._info.fishScore*(this._count/this._totalCount),7)}else this.dispose()}_effectExplode(e,t,i,{x:s,y:o},n,{basePosition:a}){this.displayController.effectWinCoinCatchFish(Utilities.Number.randRange(10,16),t,i,Utilities.Number.randRange(1,5)*this._power,s,o,a),n.position.set(t,i),n.gotoAndPlay(0),this._textCount.visible=!0,this._textCount.text=this._count}_playEffectAngel(){if(this._effects.visible=this._effects1.visible=!0,this._count%2){this._casau.rotation=0}else{this._casau.rotation=Utilities.toRad(180)}TweenMax.killTweensOf(this),this._casau.state.timeScale=2,this._attack(),this._casau.scale.set(1.5);const e=this._count%2==0?-1e3:2300;this.move=TweenMax.to(this._casau,1.15,{x:e,ease:Linear.easeNone,onComplete:this._onCompleteAnim,onCompleteScope:this}),TweenMax.delayedCall(.35,this._step1,[],this),TweenMax.delayedCall(.51,this._step2,[],this),TweenMax.delayedCall(2,this._step3,[],this),TweenMax.delayedCall(1,this._playCap,[],this),this._bgWin.state.setAnimation(0,"animation",!0),this._iconCirle.visible=!0}_step1(){this._casau.state.timeScale=.1,this.move.timeScale(.05)}_step2(){this._casau.state.timeScale=.1,TweenMax.to(this._casau.state,1,{timeScale:1,delay:.1})}_step3(){this.move.timeScale(1),TweenMax.killTweensOf(this._casau.state),this._casau.state.timeScale=3}_playCap(){this._playEffectBumBum(),AppInfo.gameMovie.strong()}_attack(){this._casau.state.setAnimation(0,"cap_cap",!1),this._casau.state.addAnimation(0,"swim",!0,0)}_playEffectBumBum(){this._effects1.state.setAnimation(0,"animation",!1),this._playEffectWin()}_onCompleteCapCap(){this._casau.state.setAnimation(0,"swim",!0),this._casau.state.onComplete=null}_onCompleteAnim(){this._count++,this._count>=this._totalCount?(this._count>this._totalCount&&(this._count=this._totalCount),Utilities.tweenCoinWithDelay(this._textCoin,this._info.fishScore*(this._count/this._totalCount),1,0),TweenMax.delayedCall(1,this._endEffect,[],this)):TweenMax.delayedCall(2,this._playEffectAngel,[],this)}_endEffect(){this._iconCirle.visible=this._effects.visible=this._effects1.visible=!1;const e=this.displayController.getUserSeatByUserID(this._info.userID),t=e.iconCoin.getGlobalPosition();this.displayController.effectWinCoinCatchFish(17,this._bgWin.x,this._bgWin.y,this._info.fishScore,t.x,t.y,e.basePosition),TweenMax.to([this._bgWin],2,{alpha:0,x:"+=100",onComplete:this.dispose,onCompleteScope:this,delay:2}),this.onCompleteEffect()}dispose(){if(!this._isDisposed){if(TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._container),TweenMax.killTweensOf(this._iconCirle),TweenMax.killTweensOf(this._bgWin),TweenMax.killTweensOf(this._iconWin),TweenMax.killTweensOf(this._casau),this.removeChild(this._iconCirle),this.removeChild(this._effects),this.removeChild(this._effects1),this.removeChild(this._bgWin),this.removeChild(this._textCoin),this.removeChild(this._iconWin),this.removeChild(this._container),this.removeChild(this._casau),this._timeLineMax&&this._timeLineMax.kill(),this._iconCirle.destroy(),this._effects.destroy(),this._effects1.destroy(),this._casau.destroy(),this._bgWin.destroy(),this._textCoin.destroy(),this._iconWin.destroy(),this._container.destroy(),this._iconCirle=null,this._effects=null,this._effects1=null,this._bgWin=null,this._textCoin=null,this._iconWin=null,this._container=null,this._timeLineMax=null,this._casau=null,TweenMax.killDelayedCallsTo(this._playCap),TweenMax.killDelayedCallsTo(this._onCompleteCapCap),TweenMax.killDelayedCallsTo(this._endEffect),TweenMax.killDelayedCallsTo(this._playEffectAngel),TweenMax.killDelayedCallsTo(this._step1),TweenMax.killDelayedCallsTo(this._step2),TweenMax.killDelayedCallsTo(this._step3),this.parent.contains(this)&&this.parent.removeChild(this),this._listEffectBoom.length>0){let e;for(;this._listEffectBoom.length>0;)e=this._listEffectBoom[0],PIXI.utils.removeItems(this._listEffectBoom,0,1),this.removeChild(e),e.destroy(),e=null}if(this._listDelay.length>0){for(let e=0;e<this._listDelay.length;e++)TweenMax.killDelayedCallsTo(this._listDelay[e]);this._listDelay.length=0}super.dispose()}}}var X=O;class W extends PIXI.extras.AnimatedSprite{constructor(){const e=Array.from(ResourceManager.Atlas.AtlasBossThanTai.textures.ThanTaiSwim);super(e),e.length=38,this.playDrop=null,this.swim=e,this.moveComplete=null,this.totalTimePlay=5,this.currentTimePlay=0,this._attack=!1,this.anchor.set(.5),this.onFrameChange=this._changeFrame.bind(this),this.init()}init(){this.visible=!1}playAnimation(){const e=-300,t=330;this.visible=!0,this.gotoAndPlay(0),this._myTween=TweenMax.to(this,3,{startAt:{x:e,y:t},x:AppInfo.appRealWidth+310,ease:Linear.easeNone,onUpdate:this._onUpdateTween,onUpdateScope:this,onComplete:this._moveComplete,onCompleteScope:this})}_onUpdateTween(){this.x>=AppInfo.appRealWidth/2&&!this._attack&&(this._attack=!0,this._myTween.pause(),this._playDrop())}_playDrop(){this._changeAttack()}_changeAttack(){this.textures=ResourceManager.Atlas.AtlasBossThanTai.textures.ThanTaiAttack,this.gotoAndPlay(0),this.animationSpeed=.5}_changeFrame(){this._attack&&this.currentFrame===W.FRAME_DROP&&(this.currentTimePlay++,"function"==typeof this.playDrop&&this.playDrop(),this.currentTimePlay>=this.totalTimePlay&&this._dropComplete())}_dropComplete(){this.textures=this.swim,this.textures.length=W.FRAMESWIM,this.gotoAndPlay(0),this.animationSpeed=1,this.onFrameChange=null,TweenMax.delayedCall(2,this._myTween.resume,[],this._myTween)}_moveComplete(){"function"==typeof this.moveComplete&&this.moveComplete()}dispose(){this.gotoAndStop(0),this.moveComplete=null,TweenMax.killTweensOf(this),this.destroy()}}W.FRAME_DROP=10,W.FRAMESWIM=38;var H=W;class V extends E.a{constructor(){super(),this._listEffectBoom=[],this._listDelay=[],this._listEffect=[],this._goldBarDrop=null,this._effectShow=null,this._count=null,this._left=[{x:-200,y:400},{x:640,y:360},{x:1600,y:360}],this._right=[{x:1600,y:400},{x:640,y:260},{x:-200,y:120}]}init(){super.init(),this._thantaiVongSang=new PIXI.spine.Spine(ResourceManager.Atlas.ThanTaiVongSangBones.textures.ThanTaiVongSangBones.spineData),this._thantaiDrop=new PIXI.spine.Spine(ResourceManager.Atlas.ThanTaiDropBones.textures.ThanTaiDropBones.spineData),this._thantaiHu=new PIXI.spine.Spine(ResourceManager.Atlas.ThanTaiHuBones.textures.ThanTaiHuBones.spineData),this._container=new PIXI.Container,this._iconWin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBossThanTai.textures.IconWinThanTai),this._iconCirle=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.iconCirle),this._iconCirle.anchor.set(.5),this._iconWin.anchor.set(.5),this._textCount=new PIXI.extras.BitmapText("0",{font:"70px "+PreLoaderConfig.FontResource.FontNumberAngel.name}),this._textCount.anchor.set(.5),this._textCount.visible=!1,this._iconCirle.addChild(this._textCount),this._thantai=new H,this.addChild(this._container,this._iconCirle,this._thantaiVongSang,this._thantaiDrop,this._thantaiHu,this._iconWin),this._iconCirle.visible=!1,this._setPosition(),this._initParticle(),this._thantaiDrop.visible=!1,this._thantaiHu.visible=!1,this._thantaiVongSang.visible=!1}_initParticle(){const e=ParticleConfig.GOLD_BAR_DROP,t=[{framerate:15,loop:!0,textures:[ResourceManager.Atlas.AtlasBossThanTai.textures.goldBar[0]]}];this._goldBarDrop=new d.a(e,t),AppInfo.gameMovie.layerBoss.addChild(this._goldBarDrop)}_setPosition(){this._iconCirle.position.set(640,360),this._iconWin.position.set(640,360),this._bgWin.position.set(640,460),this._thantaiDrop.position.set(640,360),this._thantaiHu.position.set(640,360),this._thantaiVongSang.position.set(640,360),this._textCount.y=-10}play(e){super.play(e),this._timeLineMax.vars.onComplete=this._thanTaiRun,this._timeLineMax.vars.onCompleteScope=this,this._timeLineMax.play()}_thanTaiRun(){this._buildEffectShow()}_buildEffectShow(){this._thantaiDrop.alpha=0,this._thantaiHu.alpha=0,this._thantaiVongSang.alpha=0,this._tweenShow=TweenMax.to([this._thantaiDrop,this._thantaiHu,this._thantaiVongSang],.8,{alpha:1,onComplete:this._showComplete,onCompleteScope:this}),this._thantaiDrop.visible=!0,this._thantaiHu.visible=!0,this._thantaiVongSang.visible=!0,this._thantaiHu.state.setAnimation(0,GlobalConstants.SPINE.ANIMATION_DEFAULT,!0),this._tweenShow.play(0)}_showComplete(){this._thantaiDrop.state.onComplete=this._onCompleteDrop.bind(this),this._thantaiDrop.state.timeScale=1,this._playEffectDrop()}_onCompleteDrop(){this._playEffectDrop()}_onCompleteEffect1(){}_hideComplete(){}_playEffectDrop(){this._count>=this._totalTimePlay?(this._thantaiDrop.state.onComplete=null,TweenMax.delayedCall(2,this._moveComplete,[],this),this._tweenShow.reverse()):(this._count++,this._playEffectWin(),this._thantaiDrop.state.setAnimation(0,GlobalConstants.SPINE.ANIMATION_DEFAULT,!1),this._thantaiVongSang.state.setAnimation(0,GlobalConstants.SPINE.ANIMATION_DEFAULT,!1))}_playEffectWin(){const e=this.displayController.getUserSeatByUserID(this._info.userID);if(e){const s=this._bgWin.getGlobalPosition(),o=this._info.fishScore/50;if(0===this._listEffectBoom.length)for(var t=0;t<15;t++){(i=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun.textures.bulletExplode)).loop=!1,i.animationSpeed=1/3,i.scale.set(1.5),this._listEffectBoom.push(i),this.addChild(i)}let n,a;for(t=0;t<Utilities.Number.randRange(10,15);t++){n=Utilities.Number.randRange(0,1280),a=Utilities.Number.randRange(0,720);var i=this._listEffectBoom[t];const h=TweenMax.delayedCall(0,this._effectExplode,[o,n,a,s,i,e],this);this._listDelay.push(h)}this._bgWin.updateCoin(this._info.fishScore*(this._count/this._totalTimePlay),2),AppInfo.gameMovie.soundController.playDropBar(),AppInfo.gameMovie.soundController.playWinThanTai(),AppInfo.gameMovie.strong()}else this.dispose()}_effectExplode(e,t,i,{x:s,y:o},n,{basePosition:a}){this.displayController.effectWinCoinCatchFish(Utilities.Number.randRange(10,16),t,i,Utilities.Number.randRange(1,5)*this._power,s,o,a),n.position.set(t,i),n.gotoAndPlay(0)}_moveComplete(){this._bgWin.hide(),this._iconWin.visible=!1;const e=this.displayController.getUserSeatByUserID(this._info.userID),t=e.iconCoin.getGlobalPosition();this.displayController.effectWinCoinCatchFish(17,this._bgWin.x,this._bgWin.y,this._info.fishScore,t.x,t.y,e.basePosition),this._bgWin.hideComplete=this.dispose.bind(this)}dispose(){if(!this._isDisposed){if(TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._container),TweenMax.killTweensOf(this._iconCirle),TweenMax.killTweensOf(this._bgWin),TweenMax.killTweensOf(this._iconWin),this.removeChild(this._iconCirle),this.removeChild(this._bgWin),this.removeChild(this._iconWin),this.removeChild(this._container),this.removeChild(this._thantai),this._timeLineMax&&this._timeLineMax.kill(),this._tweenThanTaiRun&&this._tweenThanTaiRun.kill(),this._tweenThanTaiRun=null,this._iconCirle.destroy(),this._bgWin.destroy(),this._iconWin.destroy(),this._container.destroy(),this._thantai.dispose(),this._iconCirle=null,this._bgWin=null,this._iconWin=null,this._container=null,this._timeLineMax=null,this._thantai=null,this.parent.contains(this)&&this.parent.removeChild(this),this._listEffect.length>0){let e;for(;this._listEffect.length>0;)e=this._listEffect[0],PIXI.utils.removeItems(this._listEffect,0,1),this.removeChild(e),e.destroy(),e=null}if(this._listDelay.length>0){for(let e=0;e<this._listDelay.length;e++)TweenMax.killDelayedCallsTo(this._listDelay[e]);this._listDelay.length=0}TweenMax.killDelayedCallsTo(this._onCompleteDelay),TweenMax.killDelayedCallsTo(this._onCompleteMoney),TweenMax.killDelayedCallsTo(this._endEffect),TweenMax.killDelayedCallsTo(this._playCoinWinEffect),TweenMax.killDelayedCallsTo(this._effectExplode),TweenMax.killDelayedCallsTo(this._moveComplete),TweenMax.killDelayedCallsTo(this.displayController.effectWinCoinCatchFish),super.dispose()}}}var Y=V;var z=class{constructor(){this._currentEffect=null,this._listEffect=[],this.displayController=AppInfo.gameMovie.displayController,this.gameMovie=AppInfo.gameMovie,this.playComplete=null,this._init()}_init(){}playComplete(){"function"==typeof this.playComplete&&this.playComplete()}createEffect(e,t){let i=null;switch(e){case GlobalConstants.BOSS_MINI.ANGEL:i=new D;break;case GlobalConstants.BOSS_MINI.SANTA:i=new N;break;case GlobalConstants.BOSS_MINI.THANTAI:i=new Y;break;case GlobalConstants.BOSS_MINI.CASAU:i=new X}i.callBackCompleteEffectDie=this.playComplete.bind(this,i),this._listEffect.push(i),this.gameMovie.layerEffect.contains(i)||this.gameMovie.layerEffect.addChild(i),i.play(t)}dispose(){for(let e=0;e<this._listEffect.length;e++)this._listEffect[e].dispose();this._listEffect.length=0}};t.a=class{constructor(){this._init()}_init(){this._listBossMini=[],this.displayController=AppInfo.gameMovie.displayController,this.gameMovie=AppInfo.gameMovie,this._overlay=new PIXI.extras.TilingSprite(PIXI.Graphics.Rectangle(0,0,10,10,0,1).generateCanvasTexture(),AppInfo.appRealWidth,AppInfo.appRealHeight),this._overlay.name="DarkSky",this._overlay.alpha=0,this._overlay.visible=!1,AppInfo.gameMovie.layerBoss.addChild(this._overlay),this._effectBossMiniComingManager=new F,this._effectBossMiniComingManager.playComplete=this.playEffectComingComplete.bind(this),this._effectBossMiniDieManager=new z,this._effectBossMiniDieManager.playComplete=this.playEffectDieComplete.bind(this)}addBoss(e,t){if(null===this.getBossByID(e)){const i=this._effectBossMiniComingManager.createEffect(t,e),s=this._initBoss(e,t);null!==s&&(s.visible=!1,null===i&&this._bossRun(s))}}killBoss(e,t,i,s,o,n){const a=this.getBossByID(e),h={userID:t,fishScore:i,userFishScore:s,userName:o};if(a)switch(a.die(),a.visible=!0,h.boss=a,this._remove(a),n){case GlobalConstants.BOSS_MINI.ANGEL:case GlobalConstants.BOSS_MINI.SANTA:TweenMax.delayedCall(4,this._effectBossMiniDieManager.createEffect,[n,h],this._effectBossMiniDieManager);break;case GlobalConstants.BOSS_MINI.CASAU:TweenMax.delayedCall(1,this._effectBossMiniDieManager.createEffect,[n,h],this._effectBossMiniDieManager);break;case GlobalConstants.BOSS_MINI.THANTAI:TweenMax.delayedCall(2.5,this._effectBossMiniDieManager.createEffect,[n,h],this._effectBossMiniDieManager)}}bossMoveComplete(e){e&&this._remove(e),this._hideOverlay()}_initBoss(e,t){let i=null;switch(t){case GlobalConstants.BOSS_MINI.ANGEL:i=new p(e,t);break;case GlobalConstants.BOSS_MINI.SANTA:i=new g(e,t);break;case GlobalConstants.BOSS_MINI.THANTAI:i=new A(e,t);break;case GlobalConstants.BOSS_MINI.CASAU:i=new w(e,t)}return null!==i&&(this.gameMovie.layerBoss.addChild(i),this.gameMovie.gameBoard.listFish.push(i),this._listBossMini.push(i)),i}getBossByID(e){for(let t=0;t<this._listBossMini.length;t++)if(this._listBossMini[t].id===e)return this._listBossMini[t];return null}_remove(e){const t=this._listBossMini.indexOf(e);t>-1&&PIXI.utils.removeItems(this._listBossMini,t,1)}dispose(){TweenMax.killDelayedCallsTo(this._effectBossMiniDieManager.createEffect),TweenMax.killDelayedCallsTo(this._hideOverlay);for(let e=0;e<this._listBossMini.length;e++)this._listBossMini[e].dispose();this._effectBossMiniComingManager.dispose(),this._effectBossMiniDieManager.dispose(),this._effectBossMiniComingManager=null,this._effectBossMiniDieManager=null,this._listBossMini.length=0}playEffectComingComplete({id:e}){const t=this.getBossByID(e);this._bossRun(t)}_bossRun(e){e&&(e.run(),e.visible=!0,this._showOverlay(),TweenMax.delayedCall(10,this._hideOverlay,[],this))}playEffectDieComplete(e){}_showOverlay(){this._overlay.visible=!0,TweenMax.to(this._overlay,2,{alpha:.3})}hasBossRun(){return this._listBossMini.length>0}_hideOverlay(){TweenMax.to(this._overlay,2,{alpha:0,onComplete(){this._overlay.visible=!1},onCompleteScope:this,delay:2})}}},function(e,t,i){"use strict";var s=class{constructor(e){this.listId=[],this.listType=[],this.listFish=[],this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this.listFish=[],this.listType=[],this.listId=[],this.readData(e)}init(){}readData({fishId:e,fishType:t}){for(this.listId=e,this.listType=t;this.listType.length>0;){const e=this.listType[0],t={fishId:[],fishType:0,count:0};t.fishId.push(this.listId[0]),t.fishType=e,t.count=1,this.listType.splice(0,1),this.listId.splice(0,1);for(let i=0;i<this.listType.length;i++)e==this.listType[i]&&(t.fishId.push(this.listId[i]),t.count++,this.listType.splice(i,1),this.listId.splice(i,1),i=-1);this.listFish.push(t)}this.listFish.sort(this.sortByFishType)}sortByFishType({fishType1:e},{fishType2:t}){return e>t?1:e<t?-1:0}dispose(){AppInfo.gameMovie.gameBoard.currentCaTran=null,this.listFish=[],this.listType=[],this.listId=[]}},o=i(72);class n extends o.a{constructor(e,t,i){super(e,t,i,!0),this.gloPoint=new PIXI.Point}init(){super.init()}run(){this.movie.gotoAndPlay(0),this.fishShadow&&null!==this.fishShadow&&this.fishShadow.run()}refreshInView(){AppInfo.preLoader.toLocal(this.position,this.parent,this.gloPoint),this.hasInView?(this.gloPoint.x<-this.deltaWToCalInView||this.gloPoint.y<-this.deltaHToCalInView||this.gloPoint.x>AppInfo.appRealWidth+this.deltaWToCalInView||this.gloPoint.y>AppInfo.appRealHeight+this.deltaHToCalInView)&&(this.hasInView=!1):this.gloPoint.x>=-this.deltaWToCalInView&&this.gloPoint.y>=-this.deltaHToCalInView&&this.gloPoint.x<=AppInfo.appRealWidth+this.deltaWToCalInView&&this.gloPoint.y<=AppInfo.appRealHeight+this.deltaHToCalInView&&(this.hasInView=!0)}stun(){}dispose(){super.dispose()}}var a=n;var h=class extends s{constructor(e){super(e),this._timeLine=null,this.listFishBattle=[],this._radius=Math.round(Math.sqrt(Math.pow(PreLoaderConfig.AppRealWidth/2,2)+Math.pow(PreLoaderConfig.AppRealHeight/2,2)))+200,this._yCenter=PreLoaderConfig.AppRealHeight/2,this._xCenter=PreLoaderConfig.AppRealWidth/2,this.init()}init(){this.listFishBattle=[];for(const e of this.listFish){const t=[];for(let i=0;i<e.count;i++){let s;PreLoaderConfig.ListFishSpine.includes(e.fishType)?s=new EntityCaTranSpine(e.fishId[i],e.fishType,1):(s=new a(e.fishId[i],e.fishType,1),s.fishShadow&&(s.fishShadow.x=this._xCenter,s.fishShadow.y=this._yCenter,s.fishShadow.visible=!1,AppInfo.gameMovie.layerFishShadow.addChild(s.fishShadow))),s.x=this._xCenter,s.y=this._yCenter,s.visible=!1,this.drawBattle(s,e.count,i),t.push(s),AppInfo.gameMovie.layerFish.addChild(s),AppInfo.gameMovie.gameBoard.listFish.push(s)}t.type=e.fishType,this.listFishBattle.push(t)}}drawBattle(e,t,i){let s=Utilities.toRad(360/t);s*=i,e.rotation=s,e.toX=this._xCenter+this._radius*Math.cos(s),e.toY=this._yCenter+this._radius*Math.sin(s)}run(){this._timeLine=new TimelineMax({paused:!0,autoRemoveChildren:!0,onComplete:()=>{this.dispose()}});for(const e of this.listFishBattle){for(let t=0;t<e.length;t++)e[t].run(),this._timeLine.to(e[t],25,{x:e[t].toX,y:e[t].toY,ease:Linear.easeNone,onStart:function(){this.visible=!0,this.fishShadow&&(this.fishShadow.visible=!0)}.bind(e[t]),onUpdate:e[t].onFishSwimUpdate.bind(e[t]),onComplete:e[t].dispose.bind(e[t])},"spaceTween");e.type<5?this._timeLine.add("spaceTween","-=22.5"):this._timeLine.add("spaceTween","-=20.5")}this._timeLine.play(0)}stopForBossRun(){null!=this._timeLine&&(this._timeLine.stop(),this._timeLine=null)}dispose(){super.dispose(),this._timeLine&&this._timeLine.kill();for(const e of this.listFishBattle)for(let t=0;t<e.length;t++)e[t]&&!e[t]._isDisposed&&e[t].dispose();this.listFishBattle=[],this._timeLine=null}};var l=class extends s{constructor(e){super(e),this._timeLine=null,this.layerFishShadow=null,this.layerFish=null,this.listPath=[],this.listFishBattle=[],this.init()}init(){if(super.init(),this.layerFish=new PIXI.Container,this.layerFishShadow=new PIXI.Container,AppInfo.gameMovie.layerFish.addChild(this.layerFish),AppInfo.gameMovie.layerFishShadow.addChild(this.layerFishShadow),this.initPathArray(),this.listFishBattle=[],4==this.listFish.length)for(var e=0;e<this.listFish.length;e++){var t=[];if((s=this.listFish[e]).count<4){for(var i=0;i<s.count;i++){PreLoaderConfig.ListFishSpine.includes(s.fishType)?o=new EntityCaTranSpine(s.fishId[i],s.fishType,1):(o=new a(s.fishId[i],s.fishType,1)).fishShadow&&(o.fishShadow.visible=!1,this.layerFishShadow.addChild(o.fishShadow)),o.visible=!1,t.push(o),this.layerFish.addChild(o),AppInfo.gameMovie.gameBoard.listFish.push(o)}t.type=s.fishType,this.listFishBattle.push(t)}else{for(i=0;i<Math.floor(s.count/2);i++){PreLoaderConfig.ListFishSpine.includes(s.fishType)?o=new EntityCaTranSpine(s.fishId[i],s.fishType,1):(o=new a(s.fishId[i],s.fishType,1)).fishShadow&&(o.fishShadow.visible=!1,this.layerFishShadow.addChild(o.fishShadow)),o.visible=!1,t.push(o),this.layerFish.addChild(o),AppInfo.gameMovie.gameBoard.listFish.push(o)}t.type=s.fishType,this.listFishBattle.push(t),t=[];for(i=Math.floor(s.count/2);i<s.count;i++){PreLoaderConfig.ListFishSpine.includes(s.fishType)?o=new EntityCaTranSpine(s.fishId[i],s.fishType,1):(o=new a(s.fishId[i],s.fishType,1)).fishShadow&&(o.fishShadow.visible=!1,this.layerFishShadow.addChild(o.fishShadow)),o.visible=!1,t.push(o),this.layerFish.addChild(o),AppInfo.gameMovie.gameBoard.listFish.push(o)}t.type=s.fishType,this.listFishBattle.push(t)}}else for(e=0;e<this.listFish.length;e++){var s=this.listFish[e];for(t=[],i=0;i<s.count;i++){var o;PreLoaderConfig.ListFishSpine.includes(s.fishType)?o=new EntityCaTranSpine(s.fishId[i],s.fishType,1):(o=new a(s.fishId[i],s.fishType,1)).fishShadow&&(o.fishShadow.visible=!1,this.layerFishShadow.addChild(o.fishShadow)),o.visible=!1,t.push(o),this.layerFish.addChild(o),AppInfo.gameMovie.gameBoard.listFish.push(o)}t.type=s.fishType,this.listFishBattle.push(t)}PreLoaderConfig.configCaTran.idBackground}sortByFishType({fishType1:e},{fishType2:t}){return e>t?1:e<t?-1:0}initPathArray(){const e=[{x:-65,y:130},{x:65,y:130},{x:65,y:360},{x:65,y:585},{x:290,y:585},{x:520,y:585},{x:520,y:360},{x:520,y:130},{x:750,y:130},{x:980,y:130},{x:980,y:360},{x:980,y:720},{x:AppInfo.appRealWidth+50,y:AppInfo.appRealHeight-20}],t=[{x:-65,y:585},{x:65,y:585},{x:65,y:360},{x:65,y:130},{x:290,y:130},{x:520,y:130},{x:520,y:360},{x:520,y:585},{x:750,y:585},{x:980,y:585},{x:980,y:360},{x:980,y:0},{x:AppInfo.appRealWidth+50,y:20}],i=[{x:-200,y:AppInfo.appRealHeight/2},{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2},{x:AppInfo.appRealWidth+200,y:AppInfo.appRealHeight/2}];this.listPath=[],this.listPath.push(e),this.listPath.push(t),this.listPath.push([{x:-65,y:360},{x:-65,y:555},{x:65,y:555},{x:65,y:360},{x:65,y:165},{x:520,y:165},{x:520,y:360},{x:520,y:555},{x:980,y:555},{x:980,y:360},{x:980,y:165},{x:1445,y:165},{x:1445,y:360}]),this.listPath.push([{x:-65,y:360},{x:-65,y:165},{x:65,y:165},{x:65,y:360},{x:65,y:555},{x:520,y:555},{x:520,y:360},{x:520,y:165},{x:980,y:165},{x:980,y:360},{x:980,y:555},{x:1445,y:555},{x:1445,y:360}]),this.listPath.push(i),this.listPath.push(i)}run(){this._timeLine=new TimelineMax({paused:!0,autoRemoveChildren:!0,onComplete:this.dispose.bind(this)});const e=PreLoaderConfig.configCaTran.time;this.listFishBattle.forEach((t,i)=>{for(let s=0;s<t.length;s++)t[s].run(),i<2?this._timeLine.to(t[s],e-.7*t.length,{bezier:{type:"quadratic",values:this.listPath[i],autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone,onStart:function(){this.visible=!0,this.fishShadow&&(this.fishShadow.visible=!0)}.bind(t[s]),onUpdate:t[s].onFishSwimUpdate.bind(t[s]),onComplete:t[s].dispose.bind(t[s])},.7*s):i<4?this._timeLine.to(t[s],e-.9*t.length,{bezier:{type:"cubic",values:this.listPath[i],autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone,onStart:function(){this.visible=!0,this.fishShadow&&(this.fishShadow.visible=!0)}.bind(t[s]),onUpdate:t[s].onFishSwimUpdate.bind(t[s]),onComplete:t[s].dispose.bind(t[s])},.9*s):i==this.listFishBattle.length-1?this._timeLine.to(t[s],e-15*t.length,{bezier:{type:"thru",curviness:0,values:this.listPath[i],autoRotate:["x","y","rotation",0,!0]},startAt:{x:-200,y:AppInfo.appRealHeight/2},ease:Linear.easeNone,onStart:function(){this.visible=!0,this.fishShadow&&(this.fishShadow.visible=!0)}.bind(t[s]),onUpdate:t[s].onFishSwimUpdate.bind(t[s]),onComplete:t[s].dispose.bind(t[s])},10*(2*s+1)):this._timeLine.to(t[s],e-15*t.length,{bezier:{type:"thru",curviness:0,values:this.listPath[i],autoRotate:["x","y","rotation",0,!0]},startAt:{x:-200,y:AppInfo.appRealHeight/2},ease:Linear.easeNone,onStart:function(){this.visible=!0,this.fishShadow&&(this.fishShadow.visible=!0)}.bind(t[s]),onUpdate:t[s].onFishSwimUpdate.bind(t[s]),onComplete:t[s].dispose.bind(t[s])},20*s)}),this._timeLine.play(0)}stopForBossRun(){null!=this._timeLine&&(this._timeLine.stop(),this._timeLine=null)}dispose(){super.dispose(),this._timeLine&&(this._timeLine.kill(),this._timeLine=null);for(const e of this.listFishBattle)for(let t=0;t<e.length;t++)e[t]&&!e[t]._isDisposed&&(this.layerFish.removeChild(e[t]),e[t].fishShadow&&this.layerFishShadow.removeChild(e[t].fishShadow),e[t].dispose());this.layerFish&&(this.layerFish.parent&&this.layerFish.parent.removeChild(this.layerFish),this.layerFish.destroy(),this.layerFish=null),this.layerFishShadow&&(this.layerFishShadow.parent&&this.layerFishShadow.parent.children&&this.layerFishShadow.parent.removeChild(this.layerFishShadow),this.layerFishShadow.destroy(),this.layerFishShadow=null),this.listFishBattle=[],this.listPath=[]}};class r extends s{constructor(e){super(e),this._timer=null,this._timeLine=null,this.layerLeft=null,this.layerRight=null,this.listBigFish=[],this.listFishBattleLeft=[],this.listFishBattleRight=[],this._radiusRun=1700,this._radiusCircle=[Math.round(Math.sqrt(51200)),Math.round(Math.sqrt(39200)),Math.round(Math.sqrt(28800)),Math.round(Math.sqrt(16200)),0],this._centerRight={x:1580,y:360},this._centerLeft={x:-300,y:360},this.init()}init(){super.init(),this.listFishBattleLeft=[],this.listFishBattleRight=[],this.listBigFish=[],this.layerRight=new PIXI.Container,this.layerLeft=new PIXI.Container,this.layerRight.visible=!1,this.layerLeft.visible=!1,AppInfo.gameMovie.layerFish.addChild(this.layerRight),AppInfo.gameMovie.layerFish.addChild(this.layerLeft),this.listFish.forEach(({count:e,fishType:t,fishId:i},s)=>{const o=[];for(let s=0;s<e;s++){let e;PreLoaderConfig.ListFishSpine.includes(t)?e=new EntityCaTranSpine(i[s],t,1):(e=new a(i[s],t,1),e.fishShadow&&(e.fishShadow.visible=!1)),e.hasInView=!1,e.visible=!1,o.push(e),AppInfo.gameMovie.gameBoard.listFish.push(e)}o.type=t,s%2==0?this.listFishBattleRight.push(o):this.listFishBattleLeft.push(o)}),this._addFishShadow(this.listFishBattleRight,this.layerRight),this._addFishShadow(this.listFishBattleLeft,this.layerLeft),this._addFishToContainer(this.listFishBattleRight,this.layerRight,!0),this._addFishToContainer(this.listFishBattleLeft,this.layerLeft,!1)}_addFishShadow(e,t){for(let i=0;i<e.length-1;i++){const s=e[i],o=s.length;for(let e=0;e<o;e++)s[e].fishShadow&&t.addChild(s[e].fishShadow)}}_addFishToContainer(e,t,i){e.forEach((s,o)=>{const n=s.length;for(let a=0;a<n;a++)this._drawBattle(s[a],n,o,a,o==e.length-1,i),o==e.length-1?(this.listBigFish.push(s[a]),AppInfo.gameMovie.layerFish.addChild(s[a]),s[a].fishShadow&&AppInfo.gameMovie.layerFishShadow.addChild(s[a].fishShadow)):t.addChild(s[a])}),i?(t.position.set(this._centerRight.x,this._centerRight.y),t.pivot.x=this._centerRight.x,t.pivot.y=this._centerRight.y):(t.position.set(this._centerLeft.x,this._centerLeft.y),t.pivot.x=this._centerLeft.x,t.pivot.y=this._centerLeft.y),t.updateTransform()}_drawBattle(e,t,i,s,o=!1,n=!1){let a=2*Math.PI/t;a*=s,o?n?(e.rotation=a+Math.PI,e.fishShadow&&(e.fishShadow.rotation=a+Math.PI)):(e.rotation=a,e.fishShadow&&(e.fishShadow.rotation=a)):n?(e.rotation=a+Math.PI/2,e.fishShadow&&(e.fishShadow.rotation=a+Math.PI/2)):(e.rotation=a-Math.PI/2,e.fishShadow&&(e.fishShadow.rotation=a-Math.PI/2)),n?(e.x=this._centerRight.x+this._radiusCircle[i]*Math.cos(a),e.y=this._centerRight.y+this._radiusCircle[i]*Math.sin(a)):(e.x=this._centerLeft.x+this._radiusCircle[i]*Math.cos(a),e.y=this._centerLeft.y+this._radiusCircle[i]*Math.sin(a)),e.fishShadow&&(e.fishShadow.x=e.x+PreLoaderConfig.ConfigPointFishShadow.x,e.fishShadow.y=e.y+PreLoaderConfig.ConfigPointFishShadow.y)}run(){this._rotationLayer(),this._moveFish()}_playMovieFish(){for(let e=0;e<this.listFishBattleLeft.length&&e<this.listFishBattleRight.length;e++){this.listFishBattleLeft[e],this.listFishBattleRight[e]}}_rotationLayer(){this._timeLine=new TimelineMax({paused:!0,repeat:-1,onUpdate:()=>{this.layerRight.rotation+=.005,this.layerLeft.rotation-=.005,this._upFishSwim()}}),this._timeLine.play(0)}_moveFish(){TweenMax.to([this.layerLeft,this.listBigFish[1]],r.DURATION_MOVE,{x:275,startAt:{x:-500,y:this._centerLeft.y},ease:Back.easeOut.config(2),onStart:()=>{this.layerLeft.visible=!0},onComplete:()=>{this._timer=new Utilities.Timer(1e3*r.COUNTER,1,null,this._onComplete.bind(this)),this._timer.Start()}}),TweenMax.to([this.layerRight,this.listBigFish[0]],r.DURATION_MOVE,{x:1005,startAt:{x:AppInfo.appRealWidth+500,y:this._centerRight.y},ease:Back.easeOut.config(2),onStart:()=>{this.layerRight.visible=!0}})}_onComplete(){this._timer=null,this._timeLine&&(this._timeLine.kill(),this._timeLine=null),this._timeLine=new TimelineMax({paused:!0,onComplete:this.dispose.bind(this)}),this._runFish(),this._timeLine.play(0)}_upFishSwim(){for(let e=0;e<this.listFishBattleLeft.length&&e<this.listFishBattleRight.length;e++){const t=this.listFishBattleLeft[e],i=this.listFishBattleRight[e];for(let e=0;e<t.length;e++)t[e]&&t[e].transform&&t[e].onFishSwimUpdate();for(let e=0;e<i.length;e++)i[e]&&i[e].transform&&i[e].onFishSwimUpdate()}}_runFish(){for(let e=0;e<this.listFishBattleLeft.length&&e<this.listFishBattleRight.length;e++){const t=this.listFishBattleLeft[e],i=this.listFishBattleRight[e];for(let e=0;e<t.length;e++)t[e]&&t[e].transform&&this._timeLine.to(t[e],r.DURATION_RUN,{x:this._centerLeft.x+this._radiusRun*Math.cos(t[e].rotation),y:this._centerLeft.y+this._radiusRun*Math.sin(t[e].rotation),ease:Linear.easeNone,onUpdate:t[e].onFishSwimUpdate.bind(t[e]),onComplete:t[e].dispose.bind(t[e])},"spaceTween");this._timeLine.addLabel("spaceTween","-="+(r.DURATION_RUN-r.BETWEEN_TIME));for(let e=0;e<i.length;e++)i[e]&&i[e].transform&&this._timeLine.to(i[e],r.DURATION_RUN,{x:this._centerRight.x+this._radiusRun*Math.cos(i[e].rotation),y:this._centerRight.y+this._radiusRun*Math.sin(i[e].rotation),ease:Linear.easeNone,onUpdate:i[e].onFishSwimUpdate.bind(i[e]),onComplete:i[e].dispose.bind(i[e])},"spaceTween");this._timeLine.addLabel("spaceTween","-="+(r.DURATION_RUN-r.BETWEEN_TIME))}}stopForBossRun(){null!=this._timeLine&&(this._timeLine.stop(),this._timeLine=null)}dispose(){super.dispose(),TweenMax.killTweensOf([this.layerLeft,this.layerRight,this.listBigFish[0],this.listBigFish[1]]),this._timeLine&&this._timeLine.kill();for(let e=0;e<this.listFishBattleLeft.length&&e<this.listFishBattleRight.length;e++){const t=this.listFishBattleLeft[e],i=this.listFishBattleRight[e];for(let e=0;e<t.length;e++)t[e]&&!t[e]._isDisposed&&(this.layerLeft.removeChild(t[e]),t[e].fishShadow&&this.layerLeft.removeChild(t[e].fishShadow),t[e].dispose());for(let e=0;e<i.length;e++)i[e]&&!i[e]._isDisposed&&(this.layerRight.removeChild(i[e]),i[e].fishShadow&&this.layerRight.removeChild(i[e].fishShadow),i[e].dispose())}for(let e=0;e<this.listBigFish.length;e++)this.listBigFish[e]&&!this.listBigFish[e]._isDisposed&&(AppInfo.gameMovie.layerFish.removeChild(this.listBigFish[e]),this.listBigFish[e].fishShadow&&AppInfo.gameMovie.layerFishShadow.removeChild(this.listBigFish[e].fishShadow),this.listBigFish[e].dispose());this.layerLeft&&(this.layerLeft.parent&&this.layerLeft.parent.removeChild(this.layerLeft),this.layerLeft.destroy()),this.layerRight&&(this.layerRight.parent&&this.layerRight.parent.removeChild(this.layerRight),this.layerRight.destroy()),this._timeLine=null,this._timer=null,this.layerLeft=null,this.layerRight=null,this.listFishBattleLeft=[],this.listFishBattleRight=[],this.listBigFish=[]}}r.DURATION_RUN=20,r.DURATION_MOVE=5,r.BETWEEN_TIME=.5,r.COUNTER=3;var p=r;var d=class extends s{constructor(e){super(e),this._timeLine=null,this.derection=0,this.listFishBattle=[],this._yCenter=PreLoaderConfig.AppRealHeight/2,this._xCenter=PreLoaderConfig.AppRealWidth/2,this.init()}init(){super.init(),this.softTypeFish(),this.listFishBattle=[];const e=PreLoaderConfig.configCaTran.count/10;this.derection=PreLoaderConfig.configCaTran.idBackground%2;for(let t=1;t<=e;t++)for(const i of this.listFish){const s=[];for(let o=0;o<i.count/e;o++){let e;PreLoaderConfig.ListFishSpine.includes(i.fishType)?e=new EntityCaTranSpine(i.fishId[o],i.fishType,1):(e=new a(i.fishId[o*t],i.fishType,1),e.fishShadow&&(e.fishShadow.visible=!1,AppInfo.gameMovie.layerFishShadow.addChild(e.fishShadow))),e.visible=!1,this.drawBattle(e,i.count,o),s.push(e),AppInfo.gameMovie.layerFish.addChild(e),AppInfo.gameMovie.gameBoard.listFish.push(e)}s.type=i.fishType,this.listFishBattle.push(s)}}softTypeFish(){const e=PreLoaderConfig.configCaTran.count/10;for(let t=1;t<this.listFish.length;t++){if(this.listFish[t].count==e){const e=this.listFish[t];this.listFish[t]=this.listFish[0],this.listFish[0]=e}}}drawBattle(e,t,i){const s=Math.pow(-1,i);1==this.derection?(e.x=-200,e.y=2==i?this._yCenter+130:this._yCenter+130*s*i,e.toX=AppInfo.appRealWidth+200):(e.rotation=Math.PI,e.x=AppInfo.appRealWidth+200,e.y=2==i?this._yCenter+130:this._yCenter+130*s*i,e.toX=-200)}run(){this._timeLine=new TimelineMax({paused:!0,onComplete:()=>{this.dispose()}}),this._timeLine.autoRemoveChildren=!0;for(const e of this.listFishBattle){for(let t=0;t<e.length;t++)e[t].run(),this._timeLine.to(e[t],20,{x:e[t].toX,y:e[t].toY,ease:Linear.easeNone,onStart:function(){this.visible=!0,this.fishShadow&&(this.fishShadow.visible=!0)}.bind(e[t]),onUpdate:e[t].onFishSwimUpdate.bind(e[t]),onComplete:e[t].onFishSwimComplete.bind(e[t])},"spaceTween");e.type<5?this._timeLine.add("spaceTween","-=17.5"):this._timeLine.add("spaceTween","-=15")}this._timeLine.play(0)}stopForBossRun(){null!=this._timeLine&&(this._timeLine.stop(),this._timeLine=null)}dispose(){super.dispose();for(const e of this.listFishBattle)for(let t=0;t<e.length;t++)e[t]&&!e[t]._isDisposed&&e[t].dispose();this.listFishBattle=[],this._timeLine=null}};var c=class extends s{constructor(e){super(e),this._timeLine=null,this._fishOfTurn=58,this._listHeight=[],this._listWidth=[],this._county=0,this._countx=0,this._county12=0,this._countx12=0,this._turnArray=[],this._sumFish=0,this.listEntity=[],this.listFishBattle=[],this._xTo2=1.5*PreLoaderConfig.AppRealWidth,this._xRight=PreLoaderConfig.AppRealWidth,this._yCenter=PreLoaderConfig.AppRealHeight/2,this._xTo=2.5*PreLoaderConfig.AppRealWidth,this._sumFish=PreLoaderConfig.configCaTran.count,this.listFishBattle=[],this._turnArray=[],this._listWidth=[],this._listHeight=[],this.init()}init(){super.init(),this.listFishBattle=[];for(var e=0;e<this._sumFish/this._fishOfTurn;e++){var t=[];this._turnArray.push(t)}const i=PreLoaderConfig.configCaTran.idBackground%2;for(e=0;e<this.listFish.length;e++){const n=this.listFish[e];t=1;for(var s=0;s<n.count;s++){var o;t>this._sumFish/this._fishOfTurn&&(t=1),PreLoaderConfig.ListFishSpine.includes(n.fishType)?o=new EntityCaTranSpine(n.fishId[s],n.fishType,1):(o=new a(n.fishId[s],n.fishType,1)).fishShadow&&(o.fishShadow.visible=!1,AppInfo.gameMovie.layerFishShadow.addChild(o.fishShadow)),o.visible=!1,o.count=n.count,1==i&&(o.scale.x=-1,o.fishShadow&&(o.fishShadow.scale.x=-1)),1==t?this._turnArray[0].push(o):2==t?this._turnArray[1].push(o):3==t?this._turnArray[2].push(o):4==t&&this._turnArray[3].push(o),this.listEntity.push(o),AppInfo.gameMovie.layerFish.addChild(o),AppInfo.gameMovie.gameBoard.listFish.push(o),t++}this._listWidth.push(o.movie.width),this._listHeight.push(o.movie.height)}if(0!=this.listFish.length)for(e=0;e<this._turnArray.length;e++){for(s=0;s<this._turnArray[e].length;s++)1==i?this.drawBattle(this._turnArray[e][s],this._turnArray[e][s].count,s):this.drawBattle2(this._turnArray[e][s],this._turnArray[e][s].count,s);this.listFishBattle.push(this._turnArray[e])}}drawBattle2(e,t,i){const s=t/(this._sumFish/this._fishOfTurn),o=this._listWidth[0],n=this._listHeight[0],a=this._listWidth[1],h=this._listWidth[3]/2+this._listWidth[4],l=this._listWidth[2]+this._listWidth[3]+this._listWidth[4],r=this._listWidth[1]/2+this._listWidth[3]+this._listWidth[4]+10,p=this._listWidth[0]/2+6*this._listWidth[1]+this._listWidth[3]+this._listWidth[4];switch(12==s&&(this._county12>1&&(this._county12=0,this._countx12++),this._countx12>5&&(this._countx12=0)),40==s&&(this._county>7&&(this._county=0,this._countx++),this._countx>4&&(this._countx=0)),s){case 1:e.x=-this._listWidth[4]/2,e.y=this._yCenter,e.toX=this._xTo-this._listWidth[4]/2,e.toY=this._yCenter;break;case 2:i%2==0?(e.x=-h,e.y=this._yCenter+this._listHeight[3]/2,e.toX=this._xTo-h,e.toY=this._yCenter+this._listHeight[3]/2):(e.x=-h,e.y=this._yCenter-this._listHeight[3]/2,e.toX=this._xTo-h,e.toY=this._yCenter-this._listHeight[3]/2);break;case 3:i%3==0?(e.x=-l,e.y=this._yCenter,e.toX=this._xTo-l,e.toY=this._yCenter):i%2==0?(e.x=-(l+this._listWidth[2]),e.y=this._yCenter,e.toX=this._xTo-(l+this._listWidth[2]),e.toY=this._yCenter):(e.x=-(l+2*this._listWidth[2]),e.y=this._yCenter,e.toX=this._xTo-(l+2*this._listWidth[2]),e.toY=this._yCenter);break;case 12:e.x=-(r+a*this._countx12),e.y=this._yCenter-100+200*this._county12,e.toX=this._xTo-(r+a*this._countx12),e.toY=this._yCenter-100+200*this._county12,this._county12++;break;case 40:e.x=-(p+o*this._countx),e.y=this._yCenter-this._listHeight[0]/2+4*this._listHeight[0]-n*this._county,e.toX=this._xTo-(p+o*this._countx),e.toY=this._yCenter-this._listHeight[0]/2+4*this._listHeight[0]-n*this._county,this._county++}}drawBattle(e,t,i){const s=t/(this._sumFish/this._fishOfTurn),o=this._listWidth[0],n=this._listHeight[0],a=this._listWidth[1],h=this._listWidth[3]/2+this._listWidth[4],l=this._listWidth[2]+this._listWidth[3]+this._listWidth[4],r=this._listWidth[1]/2+this._listWidth[3]+this._listWidth[4]+10,p=this._listWidth[0]/2+6*this._listWidth[1]+this._listWidth[3]+this._listWidth[4];switch(12==s&&(this._county12>1&&(this._county12=0,this._countx12++),this._countx12>5&&(this._countx12=0)),40==s&&(this._county>7&&(this._county=0,this._countx++),this._countx>4&&(this._countx=0)),s){case 1:e.x=this._xRight+this._listWidth[4]/2,e.y=this._yCenter,e.toX=-this._xTo2+this._listWidth[4]/2,e.toY=this._yCenter;break;case 2:i%2==0?(e.x=this._xRight+h,e.y=this._yCenter+this._listHeight[3]/2,e.toX=-this._xTo2+h,e.toY=this._yCenter+this._listHeight[3]/2):(e.x=this._xRight+h,e.y=this._yCenter-this._listHeight[3]/2,e.toX=-this._xTo2+h,e.toY=this._yCenter-this._listHeight[3]/2);break;case 3:i%3==0?(e.x=this._xRight+l,e.y=this._yCenter,e.toX=-this._xTo2+l,e.toY=this._yCenter):i%2==0?(e.x=this._xRight+(l+this._listWidth[2]),e.y=this._yCenter,e.toX=-this._xTo2+(l+this._listWidth[2]),e.toY=this._yCenter):(e.x=this._xRight+(l+2*this._listWidth[2]),e.y=this._yCenter,e.toX=-this._xTo2+(l+2*this._listWidth[2]),e.toY=this._yCenter);break;case 12:e.x=this._xRight+r+a*this._countx12,e.y=this._yCenter-100+200*this._county12,e.toX=-this._xTo2+r+a*this._countx12,e.toY=this._yCenter-100+200*this._county12,this._county12++;break;case 40:e.x=this._xRight+p+o*this._countx,e.y=this._yCenter-this._listHeight[0]/2+4*this._listHeight[0]-n*this._county,e.toX=-this._xTo2+p+o*this._countx,e.toY=this._yCenter-this._listHeight[0]/2+4*this._listHeight[0]-n*this._county,this._county++}}run(){this._timeLine=new TimelineMax({paused:!0,autoRemoveChildren:!0,onComplete:()=>{this.dispose()}});const e=160/this._turnArray.length,t=this._xTo/e,i=(5*this._listWidth[0]+6*this._listWidth[1]+this._listWidth[3]+this._listWidth[4])/t;for(const t of this.listFishBattle){for(let i=0;i<t.length;i++)t[i].run(),this._timeLine.to(t[i],e,{x:t[i].toX,y:t[i].toY,ease:Linear.easeNone,onUpdate:t[i].onFishSwimUpdate.bind(t[i]),onComplete:t[i].dispose.bind(t[i])},"spaceTween");this._timeLine.add("spaceTween","-="+(e-i))}this._timeLine.play(0)}stopForBossRun(){null!=this._timeLine&&(this._timeLine.stop(),this._timeLine=null)}dispose(){super.dispose(),this._timeLine&&(this._timeLine.kill(),this._timeLine=null);for(const e of this.listFishBattle)for(let t=0;t<e.length;t++)e[t]&&!e[t]._isDisposed&&e[t].dispose();this.listFishBattle=[],this._turnArray=[],this._listWidth=[],this._listHeight=[]}};var u=class extends s{constructor(e){super(e),this._timeLine=null,this.layerLeft=null,this.layerRight=null,this.listFishBattleLeft=[],this.listFishBattleRight=[],this._radiusCircle=[Math.round(Math.sqrt(39200)),Math.round(Math.sqrt(24200)),0],this._centerRight={x:1580,y:360},this._centerLeft={x:-300,y:360},this.init()}init(){this.listFishBattleLeft=[],this.listFishBattleRight=[],this.layerRight=new PIXI.Container,this.layerLeft=new PIXI.Container,AppInfo.gameMovie.layerFish.addChild(this.layerLeft),AppInfo.gameMovie.layerFish.addChild(this.layerRight),this.listFish.forEach(({count:e,fishType:t,fishId:i},s)=>{const o=[];for(let s=0;s<e;s++){let e;PreLoaderConfig.ListFishSpine.includes(t)?e=new EntityCaTranSpine(i[s],t,1):(e=new a(i[s],t,1),e.fishShadow&&(e.fishShadow.visible=!1)),o.push(e),AppInfo.gameMovie.gameBoard.listFish.push(e),e.hasInView=!1,e.visible=!1}o.type=t,s%2==0?this.listFishBattleRight.push(o):this.listFishBattleLeft.push(o)}),this._addFishShadow(this.listFishBattleLeft,this.layerLeft),this._addFishShadow(this.listFishBattleRight,this.layerRight),this._addFishToContainer(this.listFishBattleLeft,this.layerLeft,!1),this._addFishToContainer(this.listFishBattleRight,this.layerRight,!0)}_addFishShadow(e,t){for(const i of e){const e=i.length;for(let s=0;s<e;s++)i[s].fishShadow&&t.addChild(i[s].fishShadow)}}_addFishToContainer(e,t,i){e.forEach((e,s)=>{const o=e.length;for(let n=0;n<o;n++)this._drawBattle(e[n],o,s,n,i),t.addChild(e[n])}),t.updateTransform()}_drawBattle(e,t,i,s,o=!1){let n=2*Math.PI/t;n*=s,o?(e.x=this._centerRight.x+this._radiusCircle[i]*Math.cos(n),e.y=this._centerRight.y+this._radiusCircle[i]*Math.sin(n),e.scale.x=-1,e.fishShadow&&(e.fishShadow.scale.x=-1)):(e.x=this._centerLeft.x+this._radiusCircle[i]*Math.cos(n),e.y=this._centerLeft.y+this._radiusCircle[i]*Math.sin(n)),e.fishShadow&&(e.fishShadow.x=e.x+PreLoaderConfig.ConfigPointFishShadow.x,e.fishShadow.y=e.y+PreLoaderConfig.ConfigPointFishShadow.y)}run(){this._moveFish()}_playMovieFish(){for(let e=0;e<this.listFishBattleLeft.length&&e<this.listFishBattleRight.length;e++){const t=this.listFishBattleLeft[e],i=this.listFishBattleRight[e];for(let e=0;e<t.length;e++)t[e].run();for(let e=0;e<i.length;e++)i[e].run()}}_updateFishSwim(){for(let e=0;e<this.listFishBattleLeft.length&&e<this.listFishBattleRight.length;e++){const t=this.listFishBattleLeft[e],i=this.listFishBattleRight[e];for(let e=0;e<t.length;e++)t[e]&&t[e].transform&&t[e].onFishSwimUpdate();for(let e=0;e<i.length;e++)i[e]&&i[e].transform&&i[e].onFishSwimUpdate()}}_moveFish(){TweenMax.to(this.layerLeft,PreLoaderConfig.configCaTran.time,{x:AppInfo.appRealWidth+Math.max(this.layerLeft.width,this.layerRight.width)+100,onUpdate:this._updateFishSwim.bind(this),ease:Linear.easeNone}),TweenMax.to(this.layerRight,PreLoaderConfig.configCaTran.time,{x:-Math.max(this.layerLeft.width,this.layerRight.width)-AppInfo.appRealWidth-100,ease:Linear.easeNone,onComplete:this.dispose.bind(this)})}stopForBossRun(){}dispose(){super.dispose(),TweenMax.killTweensOf([this.layerLeft,this.layerRight]);for(let e=0;e<this.listFishBattleLeft.length&&e<this.listFishBattleRight.length;e++){const t=this.listFishBattleLeft[e],i=this.listFishBattleRight[e];for(let e=0;e<t.length;e++)t[e]&&!t[e]._isDisposed&&(this.layerLeft.removeChild(t[e]),t[e].fishShadow&&this.layerLeft.removeChild(t[e].fishShadow),t[e].dispose());for(let e=0;e<i.length;e++)i[e]&&!i[e]._isDisposed&&(this.layerRight.removeChild(i[e]),i[e].fishShadow&&this.layerRight.removeChild(i[e].fishShadow),i[e].dispose())}this.layerLeft&&(this.layerLeft.parent&&this.layerLeft.parent.removeChild(this.layerLeft),this.layerLeft.destroy()),this.layerRight&&(this.layerRight.parent&&this.layerRight.parent.removeChild(this.layerRight),this.layerRight.destroy()),this.layerLeft=null,this.layerRight=null,this.listFishBattleLeft=[],this.listFishBattleRight=[]}};var m=class extends s{constructor(e){super(e),this._timeline=null,this._timer=null,this.listSmallFish=[],this.listFishBattle=[],this.init()}init(){this.listFishBattle=[],this.listSmallFish=[];for(const e of this.listFish){const t=[];for(let i=0;i<e.count;i++){let s;PreLoaderConfig.ListFishSpine.includes(e.fishType)?s=new EntityCaTranSpine(e.fishId[i],e.fishType,1):(s=new a(e.fishId[i],e.fishType,1),s.fishShadow&&(s.fishShadow.x=this._xCenter,s.fishShadow.y=this._yCenter,s.fishShadow.visible=!1,AppInfo.gameMovie.layerFishShadow.addChild(s.fishShadow))),s.x=this._xCenter,s.y=this._yCenter,s.visible=!1,this.drawBattle(s,e.count,i),t.push(s),AppInfo.gameMovie.layerFish.addChild(s),AppInfo.gameMovie.gameBoard.listFish.push(s)}t.type=e.fishType,this.listFishBattle.push(t)}}drawBattle(e,t,i){const s=AppInfo.appRealWidth/(t/2);t>2&&i<t/2?(e.rotation=Math.PI/2,e.x=10+i*s,e.y=0,e.toY=150):t>2&&i>=t/2?(e.rotation=-Math.PI/2,e.x=10+(i-t/2)*s,e.y=AppInfo.appRealHeight,e.toY=AppInfo.appRealHeight-150):2==t&&0==i?(e.y=250,e.x=-200,e.toX=AppInfo.appRealWidth+200):(e.rotation=Math.PI,e.y=470,e.x=AppInfo.appRealWidth+200,e.toX=-200)}run(){this._timeline=new TimelineMax({paused:!0,onComplete:()=>{this.dispose()}}),this._timeline.autoRemoveChildren=!0;for(const t of this.listFishBattle){if(t.length>2)for(var e=0;e<t.length;e++){this.listSmallFish.push(t[e]);const i=Utilities.Number.randRange(1,2);t[e].run(),this._timeline.to(t[e],i,{y:t[e].toY,ease:Linear.easeNone,onUpdate:t[e].onFishSwimUpdate.bind(t[e])},"spaceTween")}else for(e=0;e<t.length;e++)t[e].run(),this._timeline.to(t[e],40,{x:t[e].toX,ease:Linear.easeNone,onUpdate:t[e].onFishSwimUpdate.bind(t[e]),onComplete:t[e].dispose.bind(t[e])},"spaceTween");t.type>5&&t.type<15&&this._timeline.add("spaceTween","-=34"),t.type>=15&&this._timeline.add("spaceTween","-=30")}this._timeline.play(0),null==this._timer&&(this._timer=new Utilities.Timer(1e3,60,null,this._onStartSmallFishGoOut.bind(this)),this._timer.Start())}_onStartSmallFishGoOut(){this._timer&&(this._timer.Stop(),this._timer=null);for(let e=0;e<this.listSmallFish.length;e++)this.listSmallFish[e]&&!this.listSmallFish[e]._isDisposed&&(TweenMax.killTweensOf(this.listSmallFish[e]),this.listSmallFish[e].fishShadow&&TweenMax.killTweensOf(this.listSmallFish[e].fishShadow),this.listSmallFish[e].rotation==Math.PI/2?(this.listSmallFish[e].rotation=-Math.PI/2,this.listSmallFish[e].fishShadow&&(this.listSmallFish[e].fishShadow.rotation=-Math.PI/2,TweenMax.to(this.listSmallFish[e].fishShadow,2,{y:-this.listSmallFish[e].width})),TweenMax.to(this.listSmallFish[e],2,{y:-this.listSmallFish[e].width,onComplete:function(){this&&!this._isDisposed&&(TweenMax.killTweensOf(this),this.fishShadow&&TweenMax.killTweensOf(this.fishShadow),this.dispose())}.bind(this.listSmallFish[e])})):(this.listSmallFish[e].rotation=Math.PI/2,this.listSmallFish[e].fishShadow&&(this.listSmallFish[e].fishShadow.rotation=Math.PI/2,TweenMax.to(this.listSmallFish[e].fishShadow,2,{y:AppInfo.appRealHeight+this.listSmallFish[e].width})),TweenMax.to(this.listSmallFish[e],2,{y:AppInfo.appRealHeight+this.listSmallFish[e].width,onComplete:function(){this&&!this._isDisposed&&(TweenMax.killTweensOf(this),this.fishShadow&&TweenMax.killTweensOf(this.fishShadow),this.dispose())}.bind(this.listSmallFish[e])})))}stopForBossRun(){null!=this._timeline&&(this._timeline.stop(),this._timeline=null),this._timer&&(this._timer.Stop(),this._timer=null)}dispose(){super.dispose();for(const e of this.listFishBattle)for(let t=0;t<e.length;t++)e[t]&&null!==e[t]&&e[t].dispose();this._timeline&&(this._timeline.kill(),this._timeline=null),this._timer&&(this._timer.Stop(),this._timer=null),this.listFishBattle=[]}};var f=class extends s{constructor(e){super(e),this._timeLine=0,this.derection=0,this.indexOfRadian=0,this.listFishBattle=[],this._radius=Math.round(Math.sqrt(Math.pow(PreLoaderConfig.AppRealWidth/2,2)+Math.pow(PreLoaderConfig.AppRealHeight/2,2)))+160,this.init()}init(){super.init(),this.derection=PreLoaderConfig.configCaTran.idBackground%2,this.listFishBattle=[];for(const e of this.listFish){const t=[];this.indexOfRadian++;for(let i=0;i<e.count;i++){let s;PreLoaderConfig.ListFishSpine.includes(e.fishType)?s=new EntityCaTranSpine(e.fishId[i],e.fishType,1):(s=new a(e.fishId[i],e.fishType,1),s.fishShadow&&(s.fishShadow.x=this._xCenter,s.fishShadow.y=this._yCenter,s.fishShadow.visible=!1,AppInfo.gameMovie.layerFishShadow.addChild(s.fishShadow))),s.x=this._xCenter,s.y=this._yCenter,s.visible=!1,this.drawBattle(s,e.count,i),t.push(s),AppInfo.gameMovie.layerFish.addChild(s),AppInfo.gameMovie.gameBoard.listFish.push(s)}t.type=e.fishType,this.listFishBattle.push(t)}}drawBattle(e,t,i){if(t>1){var s=Utilities.toRad(360/t);s*=i}1===this.derection?t>30?(e.x=this._radius*Math.cos(s)/3-300,e.y=350+this._radius*Math.sin(s)/3,e.toX=AppInfo.appRealWidth+330+this._radius*Math.cos(s)/3):2===this.indexOfRadian?(e.x=this._radius*Math.cos(s)/8-400,e.y=270+this._radius*Math.sin(s)/8,e.toX=AppInfo.appRealWidth+330-50+this._radius*Math.cos(s)/8):3===this.indexOfRadian?(e.x=this._radius*Math.cos(s)/8-200,e.y=270+this._radius*Math.sin(s)/8,e.toX=AppInfo.appRealWidth+330+100+this._radius*Math.cos(s)/8):4===this.indexOfRadian?(e.x=this._radius*Math.cos(s)/8-400,e.y=440+this._radius*Math.sin(s)/8,e.toX=AppInfo.appRealWidth+330-50+this._radius*Math.cos(s)/8):5===this.indexOfRadian?(e.x=this._radius*Math.cos(s)/8-200,e.y=440+this._radius*Math.sin(s)/8,e.toX=AppInfo.appRealWidth+330+100+this._radius*Math.cos(s)/8):6===this.indexOfRadian?(e.x=this._radius*Math.cos(s)/8-300,e.y=360+this._radius*Math.sin(s)/8,e.toX=AppInfo.appRealWidth+330+this._radius*Math.cos(s)/8):(e.x=-320,e.y=350,e.toX=AppInfo.appRealWidth+300):(e.rotation=Math.PI,t>30?(e.x=400+AppInfo.appRealWidth+this._radius*Math.cos(s)/3,e.y=350+this._radius*Math.sin(s)/3,e.toX=this._radius*Math.cos(s)/3-300):2===this.indexOfRadian?(e.x=300+AppInfo.appRealWidth+this._radius*Math.cos(s)/8,e.y=270+this._radius*Math.sin(s)/8,e.toX=this._radius*Math.cos(s)/8-400):3===this.indexOfRadian?(e.scaleY=-1,e.x=500+AppInfo.appRealWidth+this._radius*Math.cos(s)/8,e.y=270+this._radius*Math.sin(s)/8,e.toX=this._radius*Math.cos(s)/8-200):4===this.indexOfRadian?(e.x=300+AppInfo.appRealWidth+this._radius*Math.cos(s)/8,e.y=420+this._radius*Math.sin(s)/8,e.toX=this._radius*Math.cos(s)/8-400):5==this.indexOfRadian?(e.scaleY=-1,e.x=500+AppInfo.appRealWidth+this._radius*Math.cos(s)/8,e.y=420+this._radius*Math.sin(s)/8,e.toX=this._radius*Math.cos(s)/8-200):6==this.indexOfRadian?(e.scaleY=-1,e.x=360+AppInfo.appRealWidth+this._radius*Math.cos(s)/8,e.y=360+this._radius*Math.sin(s)/8,e.toX=this._radius*Math.cos(s)/8-300):(e.x=AppInfo.appRealWidth+400,e.y=350,e.toX=-250))}run(){this._timeLine=new TimelineMax({paused:!0,onComplete:()=>{this.dispose()}}),this._timeLine.autoRemoveChildren=!0;for(const e of this.listFishBattle)if(e.length>0)for(let t=0;t<e.length;t++)e[t].run(),this._timeLine.to(e[t],80,{x:e[t].toX,ease:Linear.easeNone,onUpdate:e[t].onFishSwimUpdate.bind(e[t]),onComplete:e[t].dispose.bind(e[t])},"spaceTween");this._timeLine.play(0)}stopForBossRun(){null!=this._timeLine&&(this._timeLine.stop(),this._timeLine=null)}dispose(){super.dispose();for(const e of this.listFishBattle)for(let t=0;t<e.length;t++)e[t]&&null!==e[t]&&e[t].dispose();this.listFishBattle=[],this._timeLine=null}};var g=class extends s{constructor(e){super(e),this._timeLine=null,this.listFishBattle=[],this._yCenter=PreLoaderConfig.AppRealHeight/2,this._xCenter=PreLoaderConfig.AppRealWidth/2,this.init()}init(){super.init(),this.listFishBattle=[],this.listFish.forEach(({count:e,fishType:t,fishId:i},s)=>{const o=[];for(let n=0;n<e;n++){let h;PreLoaderConfig.ListFishSpine.includes(t)?h=new EntityCaTranSpine(i[n],t,1):(h=new a(i[n],t,1),h.fishShadow&&(h.fishShadow.x=this._xCenter,h.fishShadow.y=this._yCenter,h.fishShadow.visible=!1,AppInfo.gameMovie.layerFishShadow.addChild(h.fishShadow))),h.x=this._xCenter,h.y=this._yCenter,h.visible=!1,this.drawBattle(h,e,s),o.push(h),AppInfo.gameMovie.layerFish.addChild(h),AppInfo.gameMovie.gameBoard.listFish.push(h)}o.type=t,this.listFishBattle.push(o)})}drawBattle(e,t,i){i<2?(i%2==0?(e.x=-120,e.y=2*this._yCenter+100+60,e.toX=2*this._xCenter+180+60,e.toY=-40):(e.x=-240,e.y=2*this._yCenter+100-60,e.toX=2*this._xCenter+180-60,e.toY=-160),e.rotation=Utilities.toRad(-30)):i<4?(i%2==0?(e.x=2*this._xCenter+180+60,e.y=-40,e.toX=-120,e.toY=2*this._yCenter+100+60):(e.x=2*this._xCenter+180-60,e.y=-160,e.toX=-240,e.toY=2*this._yCenter+100-60),e.rotation=Utilities.toRad(150)):i<6?(i%2==0?(e.x=2*this._xCenter+180+60,e.y=2*this._yCenter+100-60,e.toX=-120,e.toY=-160):(e.x=2*this._xCenter+180-60,e.y=2*this._yCenter+100+60,e.toX=-240,e.toY=-40),e.rotation=Utilities.toRad(-150)):(i%2==0?(e.x=-120,e.y=-160,e.toX=2*this._xCenter+180+60,e.toY=2*this._yCenter+100-60):(e.x=-240,e.y=-40,e.toX=2*this._xCenter+180-60,e.toY=2*this._yCenter+180+60),e.rotation=Utilities.toRad(30))}run(){this._timeLine=new TimelineMax({paused:!0,autoRemoveChildren:!0,onComplete:()=>{this.dispose()}});for(const e of this.listFishBattle)for(let t=0;t<e.length;t++)e[t].run(),this._timeLine.to(e[t],30,{delay:5*t,x:e[t].toX,y:e[t].toY,ease:Linear.easeNone,onUpdate:e[t].onFishSwimUpdate.bind(e[t]),onComplete:e[t].dispose.bind(e[t])},"spaceTween");this._timeLine.play(0)}stopForBossRun(){null!=this._timeLine&&(this._timeLine.stop(),this._timeLine=null)}dispose(){super.dispose();for(const e of this.listFishBattle)for(let t=0;t<e.length;t++)e[t]&&null!==e[t]&&e[t].dispose();this._timeLine&&(this._timeLine.kill(),this._timeLine=null),this.listFishBattle=[]}};t.a=class{initCaTran(e){let t=null;switch(e){case 0:t=new h(PreLoaderConfig.configCaTran);break;case 1:t=new l(PreLoaderConfig.configCaTran);break;case 2:t=new d(PreLoaderConfig.configCaTran);break;case 3:t=new c(PreLoaderConfig.configCaTran);break;case 4:t=new f(PreLoaderConfig.configCaTran);break;case 5:t=new m(PreLoaderConfig.configCaTran);break;case 6:t=new u(PreLoaderConfig.configCaTran);break;case 7:t=new g(PreLoaderConfig.configCaTran);break;case 8:t=new p(PreLoaderConfig.configCaTran)}t&&(t.run(),AppInfo.gameMovie.gameBoard.currentCaTran=t)}}},function(e,t,i){"use strict";var s=i(6);i(4),i(5);class o extends PIXI.Sprite{constructor(e,t){super(),this.customHitArea=null,this.upSprite=null,this._hoverLayer=null,this._enabled=!0,t=t||"",this.interactive=!0,this.buttonMode=!0,this.name=t,this.mouseover=this._onMouseHover.bind(this),this.mouseout=this._onMouseOut.bind(this),this.mousedown=this._onMouseDown.bind(this),this.mouseup=this._onMouseUp.bind(this),this.mouseupoutside=this.mouseup,this.mainSprite=new PIXI.Sprite(e),this.addChild(this.mainSprite);const i=new PIXI.Graphics.Rectangle(0,0,this.mainSprite.width,this.mainSprite.height,16711935,0).generateCanvasTexture();this.texture=i,this.hoverLayer.texture=this.mainSprite.texture}destroy(){this.effectReset(!1),this.mouseover=null,this.mouseout=null,this.mousedown=null,this.mouseup=null,this.mouseupoutside=null,this.hoverLayer&&(this.hoverLayer.destroy(),this.hoverLayer=null),this.originalPivot=null,this.originalPosition=null,this.originalScale=null,super.destroy()}_onMouseHover(e){this.handleEvent(o.HOVER)}_onMouseOut(e){this.handleEvent(o.OUT)}_onMouseDown(e){this.handleEvent(o.DOWN)}_onMouseUp(e){this.handleEvent(o.UP)}onMouseHover(e){this._onMouseHover(e)}onMouseOut(e){this._onMouseOut(e)}handleEvent(e){this._enabled&&(e===o.DOWN?(this.currentState=o.DOWN,this._pressed=!0):e===o.UP?(this._pressed=!1,this._over1?this.currentState=o.HOVER:this.currentState=o.UP):e===o.HOVER?(this._over1=!0,this._pressed?this.currentState=o.DOWN:this.currentState=o.HOVER):(this._over1&&(this._over1=!1),this.currentState=o.UP))}effectHover(){this.effectReset(!1),this.hoverLayer.blendMode=PIXI.BLEND_MODES.SCREEN,this.hoverLayer.visible=!0}effectDown(){this.effectReset(!1),this.hoverLayer.blendMode=PIXI.BLEND_MODES.NORMAL,this.hoverLayer.visible=!1,this.mainSprite.y+=20}effectReset(e){this.hoverLayer.visible=!1,this.hoverLayer.blendMode=PIXI.BLEND_MODES.NORMAL,this.mainSprite.y=0}get enabled1(){return this._enabled}set enabled1(e){this._enabled=e,this._enabled?(this.interactive=!0,this.buttonMode=!0,this.currentState=GOWN.Button.UP):(this.interactive=!1,this.buttonMode=!1,this.currentState=GOWN.Button.DISABLE)}get hoverLayer(){return this._hoverLayer||(this._hoverLayer=new PIXI.Sprite(this.mainSprite.texture),this.addChild(this._hoverLayer)),this._hoverLayer}}o.DOWN="down",o.UP="up",o.HOVER="hover",o.OUT="out";var n=o;var a=class extends n{constructor(e,t){super(ResourceManager.Atlas.AtlasCompoItem.textures.bglevel[t.ItemLevel-1]),this.txtTitle=null,this.txtCount=null,this.ribbon=null,this.config=t,this.type=t.Type,this.id=t.ID,this.quantity=0,this.bgQuality=null,this._bgLevelItem=null,this._textureLink=e,this.init()}init(){if(null===this._bgLevelItem){const e=PIXI.Texture.fromImage(this._textureLink);this._bgLevelItem=new PIXI.Sprite(e),this._bgLevelItem.width=70,this._bgLevelItem.height=70,this._bgLevelItem.x=5,this._bgLevelItem.y=5,this.addChild(this._bgLevelItem)}const e={fontFamily:"Arial",fontSize:"10px",fill:16777215,stroke:0,align:"center",lineJoin:"round",strokeThickness:3,wordWrap:!0,wordWrapWidth:75};null===this.ribbon&&(this.ribbon=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoItem.textures.ribbonItem),this.ribbon.anchor.set(.5),this.ribbon.position.set(41,63),this.addChild(this.ribbon)),null===this.txtTitle&&(this.txtTitle=new PIXI.Text(this.config.Name,e),this.addChild(this.txtTitle),this.txtTitle.y=this.height-20,this.txtTitle.x=this.width>>1),null===this.bgQuality&&(this.bgQuality=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoItem.textures.bgQuality),this.addChild(this.bgQuality),this.bgQuality.anchor.set(.5),this.bgQuality.x=this.width-10,this.bgQuality.y=10,null===this.txtCount&&(this.txtCount=new PIXI.Text(this.config.Quantity,e),this.bgQuality.addChild(this.txtCount))),this.visible=!this.config.IsActiveItem}updateQuality(e){this.quantity=e,this.txtCount.text=Utilities.Coin(e),this.txtCount.x=-this.txtCount.width/2,this.txtCount.y=-this.txtCount.height/2,this.quantity>0?(this.config.IsActiveItem||(this.visible=!0),this.tint=16777215):(this.visible=!1,this.tint=8420475)}updateInfo(e,t){this.quantity=t,null!=e&&(this.txtTitle.text=e,this.txtTitle.x=this.width-this.txtTitle.width>>1,this.txtTitle.y=this.height-20-this.txtTitle.height/2),null!=t&&(this.txtCount.text=Utilities.Coin(t),this.txtCount.x=-this.txtCount.width/2,this.txtCount.y=-this.txtCount.height/2,this.quantity>0?(this.config.IsActiveItem||(this.visible=!0),this.tint=16777215):(this.visible=!1,this.tint=8420475))}effectDown(){this.effectReset(!1),this.hoverLayer.blendMode=PIXI.BLEND_MODES.NORMAL,this.hoverLayer.visible=!1}};class h extends s.a{constructor(e){super(e),this._bg=null,this._icon=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this._bg&&(this._bg=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.TomatoExplode),this._bg.anchor.set(.5),this._bg.visible=!1,this.addChild(this._bg)),null===this._icon&&(this._icon=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.IconTomato),this._icon.loop=!0,this._icon.x=-this._icon.width/2,this._icon.y=-this._icon.height/2,this._icon.animationSpeed=.2,this.addChild(this._icon)))}changeItem(e){this.infoItem=e,this._icon.textures=ResourceManager.Atlas.AtlasEffectsInGame.textures[e.icon],this._bg.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures[e.bg]}gotoAndPlay(){}showComplete(){this._bg.visible=!0,h.Item.Tomato===this.infoItem&&(this._icon.visible=!1);const e=Utilities.Number.randRange(2,4);TweenMax.killTweensOf(this._bg),TweenMax.killTweensOf(this),this._bg.scale.set(.2),this._bg.alpha=0,TweenMax.to(this._bg,.2,{scaleX:e,scaleY:e,alpha:1,ease:Power1.easeIn,onComplete(){TweenMax.to(this,.2,{delay:2,alpha:0,onComplete(){this.hideItem()},onCompleteScope:this})},onCompleteScope:this})}hideItem(){this._bg.visible=!1,this._icon.visible=!0,this.idle=!0,this.visible=!1,this.alpha=1,this._icon.gotoAndStop(0)}dispose(){super.dispose(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._bg),this._bg.destroy(),this._icon.destroy(),this.children.length=0}}h.Item={Tomato:{icon:"IconTomato",bg:"TomatoExplode",name:"ItemTomato"},Brick:{icon:"IconBrick",bg:"BrokenGlass",name:"ItemBrick"}};var l=h;class r extends s.a{constructor(e){super(e),this._item=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this._item&&(this._item=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBaseStation.textures.lockInFish),this._item.loop=!0,this._item.animationSpeed=.2,this._item.interactive=!0,this._item.buttonMode=!0,this._item.mouseclick=this._onClick.bind(this),this._item.mouseover=this._onOver.bind(this),this._item.mouseout=this._onOut.bind(this),this.addChild(this._item)))}_onClick(){AppInfo.preLoader.requestController.userUseItemSkill(this.itemID,this.userID)}updateItem(e,t){this.itemID=t,this.userID=e}_onOver(){this._item.gotoAndPlay(0)}_onOut(){this._item.gotoAndStop(0)}dispose(){super.dispose(),this._item.destroy(),this.children.length=0}}var p=r;class d extends s.a{constructor(e){super(e),this._listItemUsing=[],this._listItemLock=[],this._mimItem=5,this._maxItem=8,this._listItem=[],this._overlay=null,this.init()}init(){if(super.init(),this._isDisposed){let e,t;this._isDisposed=!1,null===this._overlay&&(this._overlay=new PIXI.Sprite(PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,0,.8).generateCanvasTexture()),this._overlay.visible=!1,this._overlay.interactive=!0,this._overlay.mouseclick=this._onClickOverlay.bind(this),this.addChild(this._overlay));for(let t=0;t<3;t++)e=new p,e.visible=!1,this._listItemLock.push(e),this.addChild(e);for(let e=0;e<this._maxItem;e++)t=new l,t.visible=!1,t.idle=!0,this._listItem.push(t),this.addChild(t)}}showEffectBoom(e){this.visible=!0,this._overlay.visible=!0;const t=AppInfo.gameMovie.displayController.listBaseStation;let i=0;for(let s=0;s<t.length;s++)t[s].isMe||(this._listItemLock[i].visible=!0,this._listItemLock[i].x=t[s].x-60,this._listItemLock[i].y=t[s].basePosition>1?t[s].y:t[s].y-t[s].height/2,this._listItemLock[i].updateItem(t[s].userID,e),i++)}playEffectBoom(e,t,i){const s=Utilities.Number.randRange(this._mimItem,this._maxItem),o=AppInfo.gameMovie.displayController.getUserSeatByUserID(e),n=AppInfo.gameMovie.displayController.getUserSeatByUserID(t),a=o.baseStationFront.getGlobalPosition();if(this._listItemUsing=this._getItems(s),e===AppInfo.MyInfo.userID){this._overlay.visible=!1;for(let e=0;e<this._listItemLock.length;e++)this._listItemLock[e].visible=!1}for(let e=0;e<this._listItemUsing.length;e++)if(this._listItemUsing[e].visible=!0,this._listItemUsing[e].idle=!1,this._listItemUsing[e].rotation=0,this._listItemUsing[e].changeItem(d.TypeItem[i]),AppInfo.MyInfo.userID!==t){const t=a.basePosition>1?20:-50,i=a.basePosition>1?50:-100;this._listItemUsing[e].x=Utilities.Number.randRange(a.x-30,a.x+30),this._listItemUsing[e].y=Utilities.Number.randRange(a.y+t,a.y+i),this._listItemUsing[e].alpha=1,this._listItemUsing[e].randomScale=1,this._listItemUsing[e].scale.set(1)}else this._listItemUsing[e].visible=!1,this._listItemUsing[e].randomScale=this._randomScale(),this._listItemUsing[e].alpha=.5,this._listItemUsing[e].scale.set(0),this._listItemUsing[e].x=AppInfo.appRealWidth/2,this._listItemUsing[e].y=AppInfo.appRealHeight/2;this.tweenItem(n,o.nickName,i)}_getItems(e){const t=[];for(let i=0;i<this._listItem.length;i++)if(this._listItem[i].idle&&(t.push(this._listItem[i]),t.length>e))return t;const i=t.length;if(i-1<e)for(let s=0;s<e-i;s++){const e=new l;e.idle=!0,this.addChild(e),this._listItem.push(e),t.push(e)}return t}_randomScale(){return Math.random()*Utilities.Number.randRange(1,3)+.5}tweenItem({userID:e,basePosition:t,x:i,y:s},o,n){const a=AppInfo.MyInfo.userID===e,h=a?1:.5,r=a?{x:0,y:0}:{x:i-10,y:s+(t>1?50:-70)};TweenMax.staggerTo(this._listItemUsing,h,{cycle:{x:()=>a?Utilities.Number.randRange(200,AppInfo.appRealWidth-200):r.x,y:()=>a?Utilities.Number.randRange(50,AppInfo.appRealHeight-50):r.y,rotation:()=>Math.PI*Utilities.Number.randRange(20,50),scaleX:(e,{randomScale:t})=>t,scaleY:(e,{randomScale:t})=>t},alpha:1,ease:Power0.easeNone,onStart({target:e}){e.visible=!0},onStartParams:["{self}"],onComplete({target:e}){a?(TweenMax.fromTo(AppInfo.gameMovie,.1,{x:-2,y:-2},{x:3,y:3,ease:RoughEase.ease.config({strength:20,points:30,template:Linear.easeNone,randomize:!1}),onComplete(){AppInfo.gameMovie.x=0,AppInfo.gameMovie.y=0}}),e.infoItem===l.Item.Tomato&&AppInfo.preLoader.soundController.playTomatoExplode(),e.infoItem===l.Item.Brick&&AppInfo.preLoader.soundController.playBrokenGlass(),e.showComplete()):(e.idle=!0,e.visible=!1)},onCompleteParams:["{self}"]},.2,(function(){this._listItemUsing.length=0,a&&AppInfo.preLoader.globalCompoController.compoToast.addMessage(Utilities.String.formatString(PreLoaderConfig.ListTextConfig.Attacked,o,PreLoaderConfig.ListTextConfig[d.TypeItem[n].name]))}),null,this)}_onClickOverlay(){this.visible=!1}removeTarget(e){for(let t=0;t<this._listItemLock.length;t++)this._listItemLock[t].userID===e&&(this._listItemLock[t].visible=!1)}dispose(){super.dispose();let e=0,t=0;for(this.children.length=0,this._overlay.destroy(),TweenMax.killTweensOf(this._listItemUsing);e<this._listItem.length;)this._listItem[e].dispose(),e++;for(;t<this._listItemLock.length;)this._listItemLock[t].dispose(),t++;this._listItemLock.length=0,this._listItem.length=0}}d.TypeItem={12:l.Item.Tomato,13:l.Item.Brick};var c=d,u=i(115);class m extends s.a{constructor(e,t){super(),this.btnMain=null,this.bg=null,this.containerListItem=null,this.tweenBG=null,this.overlay=null,this.isShow=!1,this.usingItem=!1,this.listItem=[],this.timerUseItem=null,this.txtTimer=null,this.iconActive=null,this.isMe=e,this.callBackCompleteTimer=null,this.currentType=0,this.typeCurrentGun=0,this.typePreviousGun=0,this.effectItem=null,this._myPosition=t,this._timeOutRandomFish=[],this.onCompleteTimePlayItem=null,this._txtNoItem=null,this._fishHasChoice=[],this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null===this.overlay&&(this.overlay=new PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,16777215,.3),this.overlay.visible=!0,this.overlay.interactive=!0,this.overlay.mouseclick=this.showIconEmotion.bind(this),this.addChild(this.overlay)),null===this.btnMain&&(this.btnMain=new u.a(ResourceManager.Atlas.AtlasCompoItem.textures.btnBag),this.btnMain.movie.animationSpeed=1/4,this.btnMain.callBackMouseClick=this.showIconEmotion.bind(this),this.addChild(this.btnMain)),null===this.containerListItem&&(this.containerListItem=new PIXI.Container,this.addChild(this.containerListItem)),null===this.iconActive){this.iconActive=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoItem.textures.bglevel[0]),this.iconActive.ribbon=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoItem.textures.ribbonItem),this.iconActive.itemMain=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoItem.textures.ribbonItem),this.iconActive.addChild(this.iconActive.itemMain),this.iconActive.addChild(this.iconActive.ribbon),this.iconActive.itemMain.width=70,this.iconActive.itemMain.height=70,this.iconActive.itemMain.x=-35,this.iconActive.itemMain.y=-35,this.iconActive.ribbon.anchor.set(.5),this.iconActive.ribbon.position.set(-1,25),this.iconActive.anchor.set(.5),this.iconActive.visible=!1,this.iconActive.interactive=!0,this.iconActive.hitArea=this.iconActive.getBounds();var e={fontFamily:"Myriad Pro",fontSize:"13px",fill:[16777215],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:330109,align:"center",strokeThickness:2,wordWrap:!0,wordWrapWidth:70};this.iconActive.title=new PIXI.Text("Item",e),this.iconActive.title.anchor.set(.5),this.iconActive.addChild(this.iconActive.title),this.iconActive.title.y=this.iconActive.height/2-15,this.addChild(this.iconActive)}if(null===this.txtTimer){e={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"40px",fill:[12320760,65514,12648440],fillGradientStops:[.2,.5,.8],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:131172,align:"center",strokeThickness:3,wordWrap:!0,wordWrapWidth:250};this.txtTimer=new PIXI.Text("",e),this.txtTimer.anchor.set(.5),this.iconActive.addChild(this.txtTimer)}if(null===this.bg){const e=PreLoaderConfig.CompoItemConfig.radius;let t;this.bg=new PIXI.Sprite,this.containerListItem.addChild(this.bg),0===AppInfo.MyInfo.myListItem.length&&(AppInfo.MyInfo.myListItem=m.ITEM_CONFIG);const i=20,s=20,o=20,n=PreLoaderConfig.CompoItemConfig.itemPerLine;let h,l=0,r=0;for(let e=0;e<AppInfo.MyInfo.myListItem.length;e++)h=AppInfo.MyInfo.myListItem[e]||m.ITEM_CONFIG[e],t=new a(AppInfo.MyInfo.myListItem[e].Image,h),t.x=Math.floor(m.LIST_ITEM_POSITION.indexOf(e)%n)*(80+i)+s,t.y=Math.floor(m.LIST_ITEM_POSITION.indexOf(e)/n)*(80+i)+o,t.mouseclick=this.onIconClick.bind(this),t.x>l&&(l=t.x),t.y>r&&(r=t.y),this.bg.addChild(t),this.listItem.push(t),t.updateInfo(h.Name,h.Quantity);let p={width:0,height:0};this.listItem[0]&&(p=this.listItem[0]);const d=new PIXI.Graphics.RoundedRectComplex(-s,-o,l+p.width+s,r+p.height+o,e,e,e,e,1121580,.8,2,2218463,1);this.bg.texture=d.generateCanvasTexture(),this.containerListItem.position.set(this.btnMain.width,0),this.containerListItem.pivot.y=this.containerListItem.height,this.containerListItem.oriW=this.containerListItem.width,this.containerListItem.oriH=this.containerListItem.height,this.containerListItem.scale.set(0),this.tweenBG=new TimelineMax({onReverseComplete:()=>{this.containerListItem.visible=!1}}),this.tweenBG.insert(TweenMax.to(this.containerListItem,.3,{scaleX:1,scaleY:1,ease:Back.easeOut})),ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.width=d.width,ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.height=d.height,this.bg.texture=ResourceManager.Atlas.AtlasCompoItem.textures.bg,this.showIconEmotion()}if(null===this._txtNoItem){e={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"25px",fill:[12320760,65514,12648440],fillGradientStops:[.2,.5,.8],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:131172,align:"center",strokeThickness:3,wordWrap:!0,wordWrapWidth:250};this._txtNoItem=new PIXI.Text(PreLoaderConfig.ListTextConfig.NoItem,e),this._txtNoItem.anchor.set(.5),this.bg.addChild(this._txtNoItem)}this._updateBG(),this.isMe||this.visibleIsNotMe(),null===this.timerUseItem&&(this.timerUseItem=new Utilities.Timer(1e3,10,this.updateTxtTimer.bind(this),this.onCompleteFreeGun.bind(this)))}}visibleIsNotMe(){this.overlay.visible=!1,this.btnMain.visible=!1,this.iconActive.visible=!1,this.bg.visible=!1}initItem(){const e=PreLoaderConfig.CompoItemConfig.radius;let t;0===AppInfo.MyInfo.myListItem.length&&(AppInfo.MyInfo.myListItem=m.ITEM_CONFIG);const i=PreLoaderConfig.CompoItemConfig.itemPerLine;let s,o=0,n=0;for(let e=0;e<AppInfo.MyInfo.myListItem.length;e++)s=AppInfo.MyInfo.myListItem[e]||m.ITEM_CONFIG[e],t=new a(AppInfo.MyInfo.myListItem[e].Image,s),t.x=100*Math.floor(m.LIST_ITEM_POSITION.indexOf(e)%i)+20,t.y=100*Math.floor(m.LIST_ITEM_POSITION.indexOf(e)/i)+20,t.mouseclick=this.onIconClick.bind(this),t.x>o&&(o=t.x),t.y>n&&(n=t.y),this.bg.addChild(t),this.listItem.push(t),t.updateInfo(s.Name,s.Quantity);let h={width:0,height:0};this.listItem[0]&&(h=this.listItem[0]);const l=new PIXI.Graphics.RoundedRectComplex(-20,-20,o+h.width+20,n+h.height+20,e,e,e,e,1121580,.8,2,2218463,1);this.bg.texture=l.generateCanvasTexture(),this.containerListItem.position.set(this.btnMain.width,0),this.containerListItem.pivot.y=this.containerListItem.height,this.containerListItem.oriW=this.containerListItem.width,this.containerListItem.oriH=this.containerListItem.height,this.containerListItem.scale.set(0),ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.width=l.width,ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.height=l.height,this.bg.texture=ResourceManager.Atlas.AtlasCompoItem.textures.bg,this._updateBG()}updateQuality(e,t){let i;for(let s=0;s<this.listItem.length;s++)if(this.listItem[s].id===e){this.listItem[s].updateQuality(t),i=this.listItem[s];break}this._updateBG()}useNow(e){let t;for(let i=0;i<this.listItem.length;i++)if(this.listItem[i].id===e){t=this.listItem[i];break}AppInfo.preLoader.requestController.userUseItem(t.id)}_updateBG(){let e=0,t=0;let i,s=0;const o=PreLoaderConfig.CompoItemConfig.itemPerLine;for(let n=0;n<this.listItem.length;n++)i=this.listItem[n],i.visible&&(i.x=100*Math.floor(s%o)+20,i.y=100*Math.floor(s/o)+20,i.x>e&&(e=i.x),i.y>t&&(t=i.y),s++);let n={width:0,height:0};switch(this.listItem[0]&&(n=this.listItem[0]),0===e&&0===t&&(e=t=40),ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.width=e+n.width+20,ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.height=t+n.height+20,this.bg.texture=ResourceManager.Atlas.AtlasCompoItem.textures.bg,this._myPosition){case 0:this.bg.y=this.containerListItem.oriH-ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.height;break;case 1:this.bg.x=this.containerListItem.oriW-ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.width,this.bg.y=this.containerListItem.oriH-ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.height;break;case 2:this.bg.x=this.containerListItem.oriW-ResourceManager.Atlas.AtlasCompoItem.textures.bg.orig.width,this.bg.y=0;break;case 3:this.bg.y=0}0===s?(this._txtNoItem.visible=!0,this._txtNoItem.position.set(this.bg.width/2,this.bg.height/2)):this._txtNoItem.visible=!1}onIconClick({currentTarget:e}){AppInfo.preLoader.soundController.playButtonClick(),12!==e.id&&13!==e.id?(AppInfo.preLoader.requestController.userUseItem(e.id),this.showIconEmotion()):(null===this.effectItem&&this._createEffectItem(),this.effectItem.showEffectBoom(e.id))}_createEffectItem(){AppInfo.gameMovie.layerEffect.getChildByName("EffectBoomUser")?this.effectItem=AppInfo.gameMovie.layerEffect.getChildByName("EffectBoomUser"):(this.effectItem=new c,this.effectItem.name="EffectBoomUser",AppInfo.gameMovie.layerEffect.addChild(this.effectItem))}updateItemInfo(e){for(let t=0;t<this.listItem.length;t++)this.listItem[t].updateInfo(e[t].Name,e[t].Quantity);this._updateBG()}effectStartCD(e){this.timerUseItem.Stop(),this.timerUseItem.Start();const t=this.getItemByType(e);this.iconActive.texture=t.mainSprite.texture,this.iconActive.itemMain.texture=t._bgLevelItem.texture,this.iconActive.title.text=t.txtTitle.text,AppInfo.GameInfo.tournamentRoom?this.isMe&&(this.iconActive.visible=!0):this.iconActive.visible=!0,this.btnMain.movie.interactive=!1,this.usingItem=!0,TweenMax.to(this.iconActive,.5,{startAt:{alpha:0,scaleX:5,scaleY:5},alpha:1,scaleX:1,scaleY:1,ease:Bounce.easeOut})}effectStopCD(){if(AppInfo.gameMovie.displayController.lockIconShop&&this.isMe&&AppInfo.gameMovie.displayController.lockIconShop(!0),this.timerUseItem.Stop(),this.btnMain.movie.interactive=!0,this.usingItem=!1,TweenMax.to(this.iconActive,.5,{startAt:{alpha:1,scaleX:1,scaleY:1},alpha:0,scaleX:5,scaleY:5,onComplete:()=>{this.iconActive.visible=!1}}),this.isMe&&(AppInfo.gameMovie.displayController.checkChangeGunStatus(!0,this.parent),this.parent.interactive=!0,this.parent.buttonMode=!0,this.currentType===m.FREE&&(AppInfo.gameMovie.gameBoard.freeGunflag=!1),AppInfo.GameInfo.tournamentRoom&&this.getTypeGunBoss(this.currentType))){let e;for(let t=0;t<PreLoaderConfig.RoomBattle.ListGunConfig.length;t++)PreLoaderConfig.RoomBattle.ListGunConfig[t].power[0]===+AppInfo.GameInfo.BulletMultiple&&(e=PreLoaderConfig.RoomBattle.ListGunConfig[t].id);this.parent.changeGun(e)}}getTypeGun(e){return m.ListTypeItemGun.includes(e)}getTypeGunBoss(e){return m.ListTypeItemGunBoss.includes(e)}isGunSkill(e){return m.ListTypeItemGunSkill.includes(e)}startUserItem(e,t,i,s,o,n,a){const h=this.checkTypeItemUse(t);this.currentType=t,this.updateItem(i,e,s);const l=AppInfo.gameMovie.displayController.getUserSeatByUserID(n);switch(n===AppInfo.myInfo.userID&&AppInfo.gameMovie.displayController.lockIconShop&&AppInfo.gameMovie.displayController.lockIconShop(!1),h){case m.TYPE_BULLET:this.handlerBullet(t,i,e,s,o);break;case m.TYPE_ITEM_EFFECT:this.handlerItemEffect(t,i,e,s,o,n,a);break;case m.TYPE_GUN_SKILL:this.handlerGunSkill(t,i,e,s,o,l.basePosition);break;case m.TYPE_GUN_BOSS:this.handlerGunBoss(t,i,e,s,o)}}handlerBullet(e,t,i,s,o){switch(e){case m.FREE:this.isMe&&(AppInfo.gameMovie.gameBoard.freeGunflag=!0);break;case m.FREZZE:AppInfo.gameMovie.displayController.effectFishDie(18);break;case m.DOUBLE_GOLD:case m.DOUBLE_EXP:}let n=0;for(let e=0;e<PreLoaderConfig.ListGunConfig.length;e++)PreLoaderConfig.ListGunConfig[e].power[0]==o&&(n=PreLoaderConfig.ListGunConfig[e].id);this.typePreviousGun=this.parent.compoGun.type,this.typeCurrentGun=this.parent.compoGun.type,this.effectStartCD(t)}handlerGunBoss(e,t,i,s,o){switch(this.typePreviousGun=this.parent.compoGun.type,e){case m.MEDUSA:this.parent.changeGun(101);break;case m.CENTAUR:this.parent.changeGun(102);break;case m.POSEIDON:this.parent.changeGun(103);break;case m.MERMAID:this.parent.changeGun(104);break;case m.CEBERUS:this.parent.changeGun(105);break;case m.DRAGON:this.parent.changeGun(107)}this.typeCurrentGun=this.parent.compoGun.type,this.parent.interactive=!1,this.parent.buttonMode=!1,this.parent.baseStationFront.interactive=!1,this.parent.baseStationFront.buttonMode=!1,this.effectStartCD(t)}handlerGunSkill(e,t,i,s,o,n){switch(this.typePreviousGun=this.parent.compoGun.type,e){case m.LAZE:AppInfo.gameMovie.displayController.handlerActiveSkill(1,n);break;case m.SONIC:AppInfo.gameMovie.displayController.handlerActiveSkill(2,n);break;case m.BOOM:AppInfo.gameMovie.displayController.handlerActiveSkill(3,n);break;case m.CHIDORI:this.parent.changeGun(204,!0,i),this.updateItem(t,i/3,s),this.effectStartCD(t)}this.typeCurrentGun=this.parent.compoGun.type}_lightNingEffect(e,t,i,s,o,n,a){AppInfo.preLoader.requestController.userUseSkill(AppInfo.gameMovie.displayController.myBaseStation.basePosition,0,0,5,0,0,1e3);const h=AppInfo.gameMovie.displayController.getFishForLightningChain();this.onCheckCollision(h.id)}handlerItemEffect(e,t,i,s,o,n,a){switch(e){case m.FREZZE:AppInfo.gameMovie.displayController.effectFishDie(18);break;case m.TOMATO:case m.BRICK:null===this.effectItem&&this._createEffectItem(),AppInfo.gameMovie.displayController.getUserSeatByUserID(a)&&this.effectItem.playEffectBoom(n,a,t,i,s),n===AppInfo.MyInfo.userID&&this.showIconEmotion(),this.updateItem(t,i,s);break;case m.LightningChain:this._playEffectLightningChain(i)}this.effectStartCD(t)}_playEffectLightningChain(e){this._fishHasChoice=[],this.idItem=AppInfo.gameMovie.gameBoard.getNextBulletID(),this._timeOutRandomFish=[],AppInfo.preLoader.requestController.userUseSkill(this.parent.basePosition,this.idItem,0,5,0,0,1e3);let t=0;for(;2e3*t<=e;){const e=setTimeout(this.randomFish.bind(this),2e3*t);this._timeOutRandomFish.push(e),t++}}getItemByType(e){for(let t=0;t<this.listItem.length;t++)if(this.listItem[t].id===e)return this.listItem[t];return null}updateTxtTimer(){this.txtTimer.text=this.timerUseItem.counter-this.timerUseItem.counterPass}onCompleteFreeGun(){this.effectStopCD(),"function"==typeof this.callBackCompleteTimer&&this.callBackCompleteTimer(),this.currentType===m.CHIDORI&&AppInfo.gameMovie.displayController.myBaseStation.onAutoFireFollowMouse()}showIconEmotion(){this.overlay.visible=this.isShow,this.isShow?(this.containerListItem.visible=!0,this.tweenBG.play()):this.tweenBG.reverse(),this.isShow=!this.isShow}setUpByBaseStation(e){setTimeout(()=>{switch(e){case m.USER_0:var t=this.toLocal({x:0,y:0},AppInfo.gameMovie.layerEffect);this.overlay.position.set(t.x,t.y);break;case m.USER_1:t=this.toLocal({x:0,y:0},AppInfo.gameMovie.layerEffect);this.containerListItem.pivot.x=this.containerListItem.oriW,this.containerListItem.position.set(0,0),this.overlay.position.set(t.x,t.y);break;case m.USER_2:this.rotation=Utilities.toRad(180),this.containerListItem.pivot.x=this.containerListItem.oriW,this.containerListItem.pivot.y=0,this.containerListItem.position.set(0,this.btnMain.height);t=this.toLocal({x:0,y:0},AppInfo.gameMovie.layerEffect);this.overlay.position.set(t.x,t.y),this.iconActive.position.set(this.iconActive.width/2,this.iconActive.height/2);break;case m.USER_3:this.rotation=Utilities.toRad(180),this.containerListItem.pivot.x=0,this.containerListItem.pivot.y=0,this.containerListItem.position.set(this.btnMain.height,this.btnMain.height);t=this.toLocal({x:-0,y:0},AppInfo.gameMovie.layerEffect);this.overlay.position.set(t.x,t.y),this.iconActive.position.set(this.iconActive.width/2,this.iconActive.height/2)}},300)}checkTypeItemUse(e){return m.ListTypeBullet.includes(e)?m.TYPE_BULLET:m.ListTypeItemEffect.includes(e)?m.TYPE_ITEM_EFFECT:m.ListTypeItemGunSkill.includes(e)?m.TYPE_GUN_SKILL:m.ListTypeItemGunBoss.includes(e)?m.TYPE_GUN_BOSS:void 0}removeTarget(e){null===this.effectItem&&this._createEffectItem(),this.effectItem.removeTarget(e)}updateItem(e,t,i){this.timerUseItem.counter=t/1e3,this.txtTimer.text=t/1e3+"s";const s=this.getItemByType(e);s&&s.updateInfo(null,i),this._updateBG()}randomFish(){let e=null;for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length&&(e=AppInfo.gameMovie.gameBoard.listFish[t],!e.hasInView||PreLoaderConfig.ListIDBoss.includes(e.type)||this._fishHasChoice.includes(e.id)||e.isRedFish||e.hasItem);t++);e&&(this._fishHasChoice.push(e.id),this._cacthFish(e.id))}_cacthFish(e){let t;t=Array.isArray(e)?e:[e];let i="";if(PreLoaderConfig.EnalbeFacebookShare){let e=0;for(let i=0;i<t.length;i++)e+=t[i];const s=this.idItem%(e+5+1)+this.idItem+0;let o=Math.floor(s*(s%3+1)>>s%e+4)%10;switch(o<0&&(o=Math.abs(o)),o){case 0:i="YD4I2W";break;case 1:i="P2ASMG";break;case 2:i="M1GGY2";break;case 3:i="MGVW5S";break;case 4:i="PENQX2";break;case 5:i="GGKYKB";break;case 6:i="NJHODH";break;case 7:i="D27HF1";break;case 8:i="BHBQBD";break;case 9:i="AYD2FV";break;default:i="skillCatchFish"}}else i="skillCatchFish";AppInfo.preLoader.requestController[i](this.parent.basePosition,t,5,this.idItem,0,PreLoaderConfig.EnalbeFacebookShare,{data:{originalEvent:!0}},i)}dispose(){let e;for(super.dispose();this.numChildren>0;)e=this.removeChildAt(0),TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy(),e=null;if(this.timerUseItem&&(this.timerUseItem.Stop(),this.timerUseItem=null),this.tweenBG&&(this.tweenBG.kill(),this.tweenBG=null),(null!==this._timeOutRandomFish||void 0!==this._timeOutRandomFish)&&this._timeOutRandomFish.length>0){for(let e=0;e<this._timeOutRandomFish.length;e++)clearTimeout(this._timeOutRandomFish[e]);this._timeOutRandomFish=[]}this._fishHasChoice=[]}}m.USER_0=0,m.USER_1=1,m.USER_2=2,m.USER_3=3,m.TYPE_BULLET=0,m.TYPE_ITEM_EFFECT=1,m.TYPE_GUN_SKILL=2,m.TYPE_GUN_BOSS=3,m.FREZZE=7,m.FREE=2,m.DOUBLE_GOLD=4,m.DOUBLE_EXP=8,m.LAZE=9,m.SONIC=10,m.BOOM=11,m.MEDUSA=12,m.CENTAUR=13,m.POSEIDON=14,m.MERMAID=15,m.TOMATO=16,m.BRICK=17,m.CEBERUS=18,m.CHIDORI=19,m.ELECTRIC=20,m.LightningChain=21,m.DRAGON=22,m.ListTypeItemGun=[9,10,11,12,13,14,15],m.ListTypeItemGunBoss=[12,13,14,15,18,20,22],m.ListTypeItemGunSkill=[9,10,11,19],m.ListTypeItemEffect=[7,16,17,21],m.ListTypeBullet=[2,4,8],m.LIST_ITEM_POSITION=[0,1,2,3,4,5,6,11,12,7,8,9,10],m.ITEM_CONFIG={0:{ID:1,Type:2,Name:PreLoaderConfig.ListTextConfig.FreeBullet,Quantity:0},1:{ID:2,Type:4,Name:PreLoaderConfig.ListTextConfig.X2Bullet,Quantity:0},2:{ID:3,Type:8,Name:PreLoaderConfig.ListTextConfig.ExpX2,Quantity:0},3:{ID:4,Type:7,Name:PreLoaderConfig.ListTextConfig.Freeze,Quantity:0},4:{ID:5,Type:9,Name:PreLoaderConfig.ListTextConfig.SkillLaze,Quantity:0},5:{ID:6,Type:10,Name:PreLoaderConfig.ListTextConfig.SkillSonicWave,Quantity:0},6:{ID:7,Type:11,Name:PreLoaderConfig.ListTextConfig.SkillBoom,Quantity:0},7:{ID:8,Type:12,Name:PreLoaderConfig.ListTextConfig.Medusa,Quantity:0},8:{ID:9,Type:13,Name:PreLoaderConfig.ListTextConfig.Centaur,Quantity:0},9:{ID:10,Type:14,Name:PreLoaderConfig.ListTextConfig.Poseidon,Quantity:0},10:{ID:11,Type:15,Name:PreLoaderConfig.ListTextConfig.Mermaid,Quantity:0},11:{ID:12,Type:16,Name:PreLoaderConfig.ListTextConfig.ItemTomato,Quantity:0},12:{ID:13,Type:16,Name:PreLoaderConfig.ListTextConfig.ItemBrick,Quantity:0},13:{ID:14,Type:18,Name:PreLoaderConfig.ListTextConfig.ItemBrick,Quantity:0},14:{ID:15,Type:19,Name:PreLoaderConfig.ListTextConfig.ItemBrick,Quantity:0},15:{ID:16,Type:20,Name:PreLoaderConfig.ListTextConfig.ItemBrick,Quantity:0},16:{ID:17,Type:21,Name:PreLoaderConfig.ListTextConfig.ItemBrick,Quantity:0}};t.a=m},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(),this.id=e,this.iconOpenMC=null,this.iconValue=null,this.iconResult=null,this.callBackShowItem=null,this.value=-1,this.isOpen=!1,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.styleLose={fontFamily:PreLoaderConfig.FontResource.SVNKimberley.name,fontSize:"60px",fontWeight:"bold",fill:[16777215,3341806,691946],fillGradientStops:[.2,.3,1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:140636,align:"center",strokeThickness:4},this.styleWin={fontFamily:PreLoaderConfig.FontResource.SVNKimberley.name,fontSize:"60px",fontWeight:"bold",fill:[16711340,16776960,16739842],fillGradientStops:[1,.58,.1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:140636,align:"center",strokeThickness:4},null===this.iconOpenMC&&(this.iconOpenMC=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBonusGame.textures.ItemShell),this.iconOpenMC.gotoAndStop(0),this.iconOpenMC.animationSpeed=1/4,this.iconOpenMC.anchor.set(.5),this.iconOpenMC.loop=!1,this.iconOpenMC.onComplete=this.onCompleteOpen.bind(this),this.addChild(this.iconOpenMC)),null===this.iconValue&&(this.iconValue=new PIXI.Text("1",this.styleLose),this.iconValue.anchor.set(.5),this.iconValue.visible=!1,this.addChild(this.iconValue)),null===this.iconResult&&(this.iconResult=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.arrow),this.iconResult.anchor.set(.5),this.iconResult.visible=!1,this.addChild(this.iconResult)),this.iconOpenMC.interactive=!0,this.iconOpenMC.buttonMode=!0,this.iconOpenMC.mouseclick=this.onClickItem.bind(this))}onClickItem(){AppInfo.preLoader.requestController.userChoiceShell(this.parent.mathID,this.id),this.isOpen=!0,this.iconValue.style=this.styleWin}playEffectOpen(e){this.iconOpenMC.interactive=!1,this.iconOpenMC.buttonMode=!1,this.value=e,this.iconOpenMC.gotoAndPlay(0)}onCompleteOpen(){this.setItemValue(this.value)}setItemValue(e){let t;0!=+e?(t=this.iconValue,this.iconValue.visible=!0,this.iconValue.text=e):(t=this.iconResult,this.iconResult.visible=!0),TweenMax.killTweensOf(t),TweenMax.to(t,.8,{startAt:{scaleX:0,scaleY:0},scaleX:1,scaleY:1,ease:Bounce.easeOut,onComplete:this.onCompleteShowItemValue.bind(this)})}onCompleteShowItemValue(){this.callBackShowItem&&"function"==typeof this.callBackShowItem&&this.callBackShowItem(this)}resetDefault(){this.iconValue.visible=!1,this.iconResult.visible=!1,this.iconResult.position.set(0,0),this.iconOpenMC.gotoAndStop(0),this.iconOpenMC.interactive=!0,this.iconOpenMC.buttonMode=!0,this.isOpen=!1,this.value=-1,this.iconValue.style=this.styleLose}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}var n=o;class a extends s.a{constructor(){super(),this.titlePoint=null,this.titleRatio=null,this.titleWinCoin=null,this.point=null,this.ratio=null,this.winCoin=null,this.textX=null,this.textCompera=null,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;const e={fontFamily:PreLoaderConfig.FontResource.SVNKimberley.name,fontSize:"40px",fontWeight:"bold",fill:[16777215,16776960,16739842],fillGradientStops:[0,.3,.79],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,align:"center",dropShadow:!0,dropShadowBlur:2,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:3},t={fontFamily:PreLoaderConfig.FontResource.SVNKimberley.name,fontSize:"22px",fontWeight:"bold",fill:[16777215,3341806,691946],fillGradientStops:[.2,.3,1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:140636,align:"center",strokeThickness:4};null===this.titlePoint&&(this.titlePoint=new PIXI.Text(PreLoaderConfig.ListTextConfig.AccumulationXu,t),this.titlePoint.anchor.set(.5),this.addChild(this.titlePoint)),null===this.titleRatio&&(this.titleRatio=new PIXI.Text(PreLoaderConfig.ListTextConfig.Ratio,t),this.titleRatio.anchor.set(.5),this.addChild(this.titleRatio)),null===this.titleWinCoin&&(this.titleWinCoin=new PIXI.Text(PreLoaderConfig.ListTextConfig.WinXu,t),this.titleWinCoin.anchor.set(.5),this.addChild(this.titleWinCoin)),null===this.point&&(this.point=new PIXI.Text("0",e),this.point.anchor.set(.5),this.point.valueTween=0,this.addChild(this.point)),null===this.ratio&&(this.ratio=new PIXI.Text("?",e),this.ratio.anchor.set(.5),this.ratio.valueTween=0,this.addChild(this.ratio)),null===this.winCoin&&(this.winCoin=new PIXI.Text("?",e),this.winCoin.anchor.set(.5),this.winCoin.valueTween=0,this.addChild(this.winCoin)),null===this.textX&&(this.textX=new PIXI.Text("x",e),this.textX.anchor.set(.5),this.addChild(this.textX)),null===this.textCompera&&(this.textCompera=new PIXI.Text("=",e),this.textCompera.anchor.set(.5),this.addChild(this.textCompera)),this.setupPosition()}}setupPosition(){this.titlePoint.position.set(110,5),this.titleRatio.position.set(300,5),this.titleWinCoin.position.set(470,5),this.point.position.set(110,40),this.ratio.position.set(300,40),this.winCoin.position.set(470,40),this.textX.position.set(220,40),this.textCompera.position.set(370,40)}updateTextInfo(e,t,i){e&&(TweenMax.killTweensOf(this.point),TweenMax.to(this.point,1,{valueTween:e,ease:Linear.easeNone,onUpdate:()=>{this.point.text=Utilities.Coin(Math.floor(this.point.valueTween))}})),t&&(TweenMax.killTweensOf(this.ratio),TweenMax.to(this.ratio,1,{valueTween:t,ease:Linear.easeNone,onUpdate:()=>{this.ratio.text=Utilities.Coin(Math.floor(this.ratio.valueTween))}})),i&&(TweenMax.killTweensOf(this.winCoin),TweenMax.to(this.winCoin,1,{valueTween:i,ease:Linear.easeNone,onUpdate:()=>{this.winCoin.text=Utilities.Coin(Math.floor(this.winCoin.valueTween))}}))}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}var h=a;class l extends s.a{constructor(e,t,i){super(),this.stack=0,this.id=e||0,this.name=e||0,this.bgStack=null,this.stack1=null,this.stack2=null,this.textTitle=null,this.listStack=[],this.index=-1,this._min=t||null,this._max=i||null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.styleUnActive={fontFamily:PreLoaderConfig.FontResource.SVNKimberley.name,fontSize:"40px",fontWeight:"bold",fill:[16777215,3341806,691946],fillGradientStops:[.2,.3,1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:140636,align:"center",strokeThickness:4},this.styleActive={fontFamily:PreLoaderConfig.FontResource.SVNKimberley.name,fontSize:"40px",fontWeight:"bold",fill:[16777196,16776961,16559667,13448448],fillGradientStops:[0,.23,.72,.97],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:8784408,align:"center",strokeThickness:4},null===this.bgStack&&(this.bgStack=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.floorArrow),this.bgStack.anchor.set(.5),this.addChild(this.bgStack)),null===this.stack1&&(this.stack1=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.arrow),this.stack1.anchor.set(.5),this.stack1.scale.set(.5),this.stack1.position.set(-23,0),this.stack1.visible=!1,this.listStack.push(this.stack1),this.addChild(this.stack1)),null===this.stack2&&(this.stack2=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.arrow),this.stack2.anchor.set(.5),this.stack2.scale.set(.5),this.stack2.position.set(24,0),this.stack2.visible=!1,this.listStack.push(this.stack2),this.addChild(this.stack2)),null===this.textTitle&&(null!==this._min&&null!==this._max?this.textTitle=new PIXI.Text(this._min+" - "+this._max,this.styleUnActive):this.textTitle=new PIXI.Text(PreLoaderConfig.ListTextConfig.Floor+" "+this.id,this.styleUnActive),this.textTitle.anchor.set(.5),this.textTitle.position.set(0,this.bgStack.height+this.textTitle.height/2),this.addChild(this.textTitle)))}setActiveFloor(e){this.textTitle.style=e?this.styleActive:this.styleUnActive}getStackIndex(){return this.index++,this.listStack[this.index]}setActiveArrow(e){e.visible=!0}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}var r=l;class p extends s.a{constructor(e){super(),this.listItemFloor=[],this._listRatio=e,this._listRatio.reverse(),this.init()}init(){if(super.init(),this._isDisposed){let e;this._isDisposed=!1;const t=4;for(let i=0;i<t;i++)e=new r(t-i,this._listRatio[2*i],this._listRatio[2*i+1]),e.y=(e.height+40)*i+10,this.addChild(e),this.listItemFloor.push(e)}}setActiveFloorItem(e,t){this.getChildByName(e).setActiveFloor(t)}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}var d=p;class c extends s.a{constructor(e,t,i){super(),this.mathID=e,this.point=i,this.arrayAratio=t.split(","),this.bgGame=null,this.textAutoChoice=null,this.timerAutoChoice=null,this.coinWinInfo=null,this.tweenShow=null,this.floor=null,this.callBackShowItemValueBind=null,this.listItem=[],this.listGroupResultRatio=[],this.itemCoinoriX=[],this.itemCoinoriY=[],this.listDelayCall=[],this.autoChoice=!1,this.tiker=0,this.floorIndex=1,this.mathIDText=null,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;const e={fontFamily:"Tahoma",fill:16773511,fontSize:40,fontWeight:"bold",dropShadow:!1,dropShadowBlur:5,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:6,stroke:7278852,strokeThickness:4};if(null===this.bgGame&&(this.bgGame=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.bgBonusGameThanTai),this.bgGame.width=1280,this.bgGame.height=720,this.addChild(this.bgGame)),null===this.coinWinInfo&&(this.coinWinInfo=new h,this.addChild(this.coinWinInfo),this.coinWinInfo.position.set(390,650)),null===this.floor&&(this.floor=new d(this.arrayAratio),this.addChild(this.floor),this.floor.position.set(120,70)),0===this.listItem.length){let e;for(let t=0;t<14;t++)e=new n(t),e.callBackShowItem=this.onShowItemValue.bind(this),e.x=190*Math.floor(2)+310,e.y=e.height*Math.floor(1.5)+120,e.oriX=190*Math.floor(t%5)+310,e.oriY=e.height*Math.floor(t/5)+120,this.addChild(e),this.listItem.push(e),this.itemCoinoriX.push(e.oriX),this.itemCoinoriY.push(e.oriY)}null===this.textAutoChoice&&(this.textAutoChoice=new PIXI.Text(PreLoaderConfig.languageConfig.key_auto_play+": "+PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.TimeAutoChoiceShell,e),this.textAutoChoice.anchor.set(.5),this.addChild(this.textAutoChoice),this.textAutoChoice.position.set(AppInfo.appRealWidth/2,35)),null===this.timerAutoChoice&&(this.timerAutoChoice=new Utilities.Timer(1e3,PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.TimeAutoChoiceShell,this._onUpdateTicker.bind(this),this._onCompleteTicker.bind(this))),null===this.mathIDText&&(this.mathIDText=new PIXI.Text(PreLoaderConfig.languageConfig.key_math_id+": "+this.mathID,e),this.mathIDText.anchor.set(.5),this.mathIDText.style.fontSize=25,this.mathIDText.position.set(1135,450),this.addChild(this.mathIDText))}}_onUpdateTicker(){this.textAutoChoice.text=PreLoaderConfig.languageConfig.key_auto_play+": "+(this.timerAutoChoice.counter-this.timerAutoChoice.counterPass)+" s"}_onCompleteTicker(){this.autoChoice=!0,this._autoChoiceItem()}_autoChoiceItem(){for(let e=0;e<this.listItem.length;e++)if(-1===this.listItem[e].value)return void this.listItem[e].onClickItem()}showEffect(){this.coinWinInfo.updateTextInfo(this.point),this.floor.setActiveFloorItem(this.floorIndex,!0),AppInfo.gameMovie.displayController.timerWaitToKick&&(AppInfo.gameMovie.displayController.timerWaitToKick.Interval=5e5),AppInfo.gameMovie.displayController.timerToOutView&&AppInfo.gameMovie.displayController.timerToOutView.Stop(),TweenMax.to(this,1,{startAt:{y:-this.height},y:0,ease:Back.easeOut.config(1.2),onComplete:this.showEffectShowGame.bind(this)})}clockAllShell(){for(let e=0;e<this.listItem.length;e++)this.listItem[e].iconOpenMC.interactive=!1,this.listItem[e].iconOpenMC.buttonMode=!1}unClockAllShell(){for(let e=0;e<this.listItem.length;e++)this.listItem[e].iconOpenMC.interactive=!0,this.listItem[e].iconOpenMC.buttonMode=!0}showEffectShowGame(){this.timerAutoChoice.Start(),this.tweenShow=new TimelineLite({onReverseComplete:this.onCompleteHideShell.bind(this),onComplete:this.onCompleteShowShell.bind(this)}),this.clockAllShell(),this.tweenShow.staggerTo(this.listItem,.4,{cycle:{y:this.itemCoinoriY,x:this.itemCoinoriX},ease:Back.easeOut.config(1.2)},.1),this.tweenShow.play()}openItemChoice(e,t,i,s,o,n,a){if(this.listItem[t].playEffectOpen(i),a){2!==s&&1!==s||this.clockAllShell();const h=TweenMax.delayedCall(2,this.showOpenAll.bind(this,a)),l=TweenMax.delayedCall(5,this.onCompleteShowAllItem.bind(this,e,t,i,s,o,n,a));this.listDelayCall.push(h),this.listDelayCall.push(l)}else if(this.autoChoice){const e=TweenMax.delayedCall(.7,this._autoChoiceItem.bind(this));this.listDelayCall.push(e)}else this.timerAutoChoice.Stop(),this.timerAutoChoice.Start()}showOpenAll(e){e=e.split(",");for(let t=0;t<e.length;t++)-1===this.listItem[t].value&&this.listItem[t].playEffectOpen(e[t])}onCompleteShowShell(){this.unClockAllShell()}onCompleteShowAllItem(e,t,i,s,o,n,a){1===s?(this.autoChoice=!1,this.timerAutoChoice.Stop(),this.showEffectWin(e,t,i,o,n)):2===s&&(this.autoChoice=!1,this.timerAutoChoice.Stop(),this.tweenShow.reverse())}onShowItemValue(e){if(0===e.value){const t=this.floor.getChildByName(this.floorIndex),i=t.getStackIndex(),s=e.toLocal(i.position,t);TweenMax.to(e.iconResult,1.2,{scaleX:.5,scaleY:.5,x:s.x,y:s.y,onComplete:(({iconResult:e},t)=>{t.setActiveArrow(i),e.visible=!1}).bind(this,e,t)})}}onCompleteHideShell(){this._resetItem(),this.floorIndex++,this.floorIndex<=c.MAX_FLOOR&&this.floor.setActiveFloorItem(this.floorIndex,!0);const e=TweenMax.delayedCall(2,()=>{this.tweenShow.play(),this.timerAutoChoice.Start()});this.listDelayCall.push(e)}_resetItem(){for(let e=0;e<this.listItem.length;e++)this.listItem[e].resetDefault()}getItemWin(e){const t=[];for(let i=0;i<this.listItem.length;i++)this.listItem[i].value==e&&this.listItem[i].isOpen&&t.push(this.listItem[i]);return t}showEffectWin(e,t,i,s,o){const n=this.getItemWin(i),a=n[0].toLocal({x:705,y:695},this),h=n[1].toLocal({x:705,y:695},this);TweenMax.staggerTo([n[0].iconValue,n[1].iconValue],.7,{cycle:{y:[a.y,h.y],x:[a.x,h.x]},scaleX:.7,scaleY:.7,alpha:0,onComplete:()=>{this.coinWinInfo.updateTextInfo(this.point,n[0].value,s)}}),this.textAutoChoice.text=PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.Congratulation+" "+Utilities.Coin(s)+" "+PreLoaderConfig.currency;const l=TweenMax.delayedCall(4,this.hideEffect.bind(this)),r=TweenMax.delayedCall(5,this.updateUserCoin.bind(this,e,t,i,s,o));this.listDelayCall.push(l),this.listDelayCall.push(r)}hideEffect(){TweenMax.to(this,1,{y:-this.height,ease:Back.easeOut.config(1.2)})}updateUserCoin(e,t,i,s,o){const n=AppInfo.gameMovie.displayController.getUserSeatByUserID(e);let a;n?(a=n.iconCoin.getGlobalPosition(),n.setCoin(o)):a=new PIXI.Point(640,65),AppInfo.gameMovie.displayController.effectFishDie(20,AppInfo.appRealWidth/2,AppInfo.appRealHeight/2,s,a.x,a.y,n.basePosition),this.dispose()}dispose(){let e;for(super.dispose(),AppInfo.gameMovie.displayController.timerWaitToKick&&(AppInfo.gameMovie.displayController.timerWaitToKick.Interval=PreLoaderConfig.TimeOutWaitToKick),AppInfo.gameMovie.displayController.timerToOutView&&AppInfo.gameMovie.displayController.timerToOutView.Start();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy(),e=null}catch(e){}}if(this.listDelayCall.length>0){for(let e=0;e<this.listDelayCall.length;e++)this.listDelayCall[e]&&(this.listDelayCall[e].kill(),this.listDelayCall[e]=null);this.listDelayCall=[]}this.timerAutoChoice&&this.timerAutoChoice.Stop()}}c.MAX_FLOOR=4;t.a=c},function(e,t,i){"use strict";var s=i(6),o=i(80),n=i(90);class a extends s.a{constructor(e,t,i,s,o){super(),this.onMoveCoinToEndPointBinded=null,this.onMoveToEndPointCompleteBinded=null,this.onMoveToEndPointBinded=null,this.onCompleteMoveOutCoinBinded=null,this.speed=null,this.coinWinText=null,this.listCoinWin=[],this.speed=o||1,this.coin=e,this.fishType=s,this.init(e,t,i,s),this.tweenCoinWinTextEndPoint=null,this.tweenCoinWinTextScale=null}init(e,t,i,s){if(super.init(),this._isDisposed){this._isDisposed=!1,this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY,this.timeLineMax=new TimelineMax,this.timeLineMax.autoRemoveChildren=!0,this.coinWinText=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.ticket);const t={fontFamily:"Tahoma",fill:16777215,fontSize:50,fontWeight:"bold",dropShadow:!1,dropShadowBlur:5,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:6,stroke:526148,strokeThickness:4};this.coinWinText.textInSide=new PIXI.Text(e,t),this.coinWinText.textInSide.anchor.set(.5),this.coinWinText.textInSide.x=0,this.coinWinText.textInSide.y=0,this.coinWinText.addChild(this.coinWinText.textInSide),this.coinWinText.scale.set(.1),this.coinWinText.anchor.set(.5),this.coinWinText.x=(this.minX+this.maxX)/2,this.coinWinText.y=(this.minY+this.maxY)/2,this.addChild(this.coinWinText),this.onMoveToEndPointBinded=this.onMoveToEndPoint.bind(this),this.onMoveToEndPointCompleteBinded=this.onMoveToEndPointComplete.bind(this)}}dispose(){super.dispose(),AppInfo.gameMovie.gameBoard.listEffects.includes(this)&&AppInfo.gameMovie.gameBoard.listEffects.splice(AppInfo.gameMovie.gameBoard.listEffects.indexOf(this),1),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.coinWinText),this.coinWinText&&(this.coinWinText.destroy(),this.coinWinText=null),this.parent&&this.parent.removeChild(this),this.destroy()}showEffect(e,t,i){this.visible=!0,this.scale.set(1,1),this.idle=!1,this.coinWinText.visible=!0,AppInfo.preLoader.soundController.playCoinWin(),this.coinWinText.visible&&(this.coinWinText.position.set(0,0),this.updateTextCoinPos(),null==this.tweenCoinWinTextScale?this.tweenCoinWinTextScale=new TweenMax.to(this.coinWinText,.8,{startAt:{scaleX:0,scaleY:0},scaleX:1,scaleY:1,y:this.coinWinText.y-this.coinWinText.height/2-40,ease:Bounce.easeOut}):this.tweenCoinWinTextScale.updateTo({startAt:{scaleX:0,scaleY:0},scaleX:1,scaleY:1,y:this.coinWinText.y-this.coinWinText.height/2-40,ease:Bounce.easeOut},!0)),TweenMax.to(this,2*this.speed,{onComplete:this.onMoveToEndPointBinded,onCompleteParams:[e,t]})}_calculatePoint(e,t,i,s){const o=new PIXI.Point(i,s),n=this.toLocal(o,this.parent);let a=Utilities.Number.distanceBetweenTwoPoint(e.x,e.y,n.x,n.y);return s>AppInfo.appRealHeight/2?i>AppInfo.appRealWidth/2?this.y-s<200&&(a*=-1):this.x-i<200?a*=1:a*=-1:i>AppInfo.appRealWidth/2?this.x-i<200?a*=1:a*=-1:s-this.y<200?a*=1:a*=-1,[e,a,.25,n]}onMoveToEndPoint(e,t){TweenMax.killTweensOf(this.coinWinText);const i=new PIXI.Point(e,t),s=this.toLocal(i,this.parent);null==this.tweenCoinWinTextEndPoint?this.tweenCoinWinTextEndPoint=new TweenMax.to(this.coinWinText,.6,{x:s.x,y:s.y,scaleX:.1,scaleY:.1,onComplete:()=>{this.coinWinText.visible=!1}}):this.tweenCoinWinTextEndPoint.updateTo({x:s.x,y:s.y,scaleX:.1,scaleY:.1,onComplete:()=>{this.coinWinText.visible=!1}},!0);const o=.1*this.listCoinWin.length+5;TweenMax.to(this,o,{onComplete:this.onMoveToEndPointCompleteBinded})}onMoveToEndPointComplete(){this.visible=!1,this.idle=!0;const e=this.listCoinWin.length;this.coinWinText.alpha=1,this.coinWinText.visible=!1,this.coinWinText.scale.set(1);for(let t=0;t<e;t++){const e=this.listCoinWin[t];e.scale.set(.1,.1),e.position.set(0,0)}this.coinWinText.x=(this.minX+this.maxX)/2-this.coinWinText.width/2,this.coinWinText.y=(this.minY+this.maxY)/2-this.coinWinText.height/2}updateCoinText(e){this.coinWinText.textInSide.text=e}updateTextCoinPos(){this.coinWinText.visible=!0,this.coinWinText.scale.set(1);const e=this.x+this.coinWinText.x-this.coinWinText.width/2,t=this.y+this.coinWinText.y-this.coinWinText.height/2-40;e<=0?this.coinWinText.x=this.coinWinText.width/2/this.coinWinText.scaleX:e>AppInfo.appRealWidth-this.coinWinText.width&&(this.coinWinText.x=AppInfo.appRealWidth-this.coinWinText.width/2-this.x),t<0?this.coinWinText.y=this.coinWinText.height/2/this.coinWinText.scaleY+40:t>AppInfo.appRealHeight-this.coinWinText.height&&(this.coinWinText.y=AppInfo.appRealHeight-this.coinWinText.height/2-this.y),t<0?this.coinWinText.y=this.coinWinText.height+40:t>AppInfo.appRealHeight-this.coinWinText.height+this.coinWinText.y&&(this.coinWinText.y=AppInfo.appRealHeight-this.coinWinText.height-this.coinWinText.height/2-this.y)}}var h=a;class l extends s.a{constructor(){super(),this.bgImage=null,this.imageMain=null,this.ribbon=null,this.txtName=null,this.txtQuality=null,this.idle=!0,this.callBackComplete=null,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1,null===this.bgImage&&(this.bgImage=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasCompoItem.textures.bgImage),this.bgImage.loop=!1,this.bgImage.animationSpeed=.15,this.bgImage.anchor.set(.5),this.addChild(this.bgImage)),null===this.imageMain&&(this.imageMain=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoItem.textures.bglevel[0]),this.imageMain.imageDetail=new PIXI.Sprite(ResourceManager.Atlas.AtlasCompoItem.textures.bglevel[0]),this.imageMain.imageDetail.anchor.set(.5),this.imageMain.imageDetail.width=70,this.imageMain.imageDetail.height=70,this.imageMain.anchor.set(.5),this.imageMain.x=6,this.imageMain.imageDetail.x=-1,this.imageMain.imageDetail.y=-3,this.addChild(this.imageMain),this.imageMain.addChild(this.imageMain.imageDetail)),null===this.ribbon&&(this.ribbon=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasCompoItem.textures.ribbonItems),this.ribbon.anchor.set(.5),this.ribbon.loop=!1,this.ribbon.animationSpeed=.15,this.addChild(this.ribbon));const e={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"20px",fill:[16777215],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:8787713,align:"center",strokeThickness:4,lineJoin:"round"},t={fontFamily:"Myriad Pro",fontSize:"40px",fill:[16777215],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:2,wordWrap:!0,wordWrapWidth:100};null===this.txtName&&(this.txtName=new PIXI.Text("",e),this.txtName.anchor.set(.5),this.txtName.y=50,this.txtName.x=6,this.addChild(this.txtName)),null===this.txtQuality&&(this.txtQuality=new PIXI.Text("",t),this.txtQuality.anchor.set(.5),this.txtQuality.y=-20)}}showEffect(e,t,i,s,o){this.visible=!0;const n=AppInfo.gameMovie.displayController.myBaseStation.compoItem.getItemByType(e);n?(this.imageMain.texture=n.mainSprite.texture,this.imageMain.imageDetail.texture=n._bgLevelItem.texture,this.imageMain.visible=!0,this.txtName.text=t.toUpperCase(),this.bgImage.gotoAndPlay(0),this.ribbon.gotoAndPlay(0),TweenMax.to(this.imageMain,.2,{startAt:{scaleX:0,scaleY:0},scaleX:1.5,scaleY:1.5,ease:Back.easeOut.config(1)}),TweenMax.to(this,1.3,{startAt:{scaleX:0,scaleY:0},scaleX:1.2,scaleY:1.2,ease:Bounce.easeOut}),TweenMax.to(this,.8,{x:s+20,y:o+20,scaleX:.2,scaleY:.2,delay:1.6,onComplete:this.onCompleteEffect.bind(this)})):this.onCompleteEffect()}onCompleteEffect(){this.idle=!0,this.visible=!1,"function"==typeof this.callBackComplete&&this.callBackComplete()}dispose(){let e;for(super.dispose(),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.imageMain);this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}var r=l,p=i(71);class d extends s.a{constructor(){super(),this._listFish=[],this.id=null,this._qualityFish=null,this._particle=null,this.userCoin=0,this._lightningChainBG=null,this._listSpriteThunder=[],this._isTweeningEffect=!1,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;const e={fontFamily:PreLoaderConfig.FontResource.AgudaBlack.name,fontSize:25,fontWeight:"Bold",fill:[16776959,4709119,16777215,4709119],fillGradientStops:[.07,.36,.66,1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:139098,align:"center",wordWrap:!0,wordWrapWidth:280,strokeThickness:4};null===this._qualityFish&&(this._qualityFish=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.BGNumFish),this._qualityFish.textQuality=new PIXI.Text("",e),this._qualityFish.anchor.set(.5),this._qualityFish.textQuality.anchor.set(.5),this.addChild(this._qualityFish),this._qualityFish.addChild(this._qualityFish.textQuality)),null===this._lightningChainBG&&(this._lightningChainBG=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.lightningChainBG),this._lightningChainBG.anchor.set(.5),this.addChild(this._lightningChainBG),AppInfo.GameInfo.tournamentRoom&&(this._lightningChainBG.rotation=Utilities.toRad(90))),null===this._particle&&(this._particle=new p.a(d.PARTICLE),this.addChild(this._particle))}}playEffect(e,t){if(this.target=AppInfo.gameMovie.displayController.getUserSeatByUserID(this.id),this.userCoin=t,this.target.compoItem.callBackCompleteTimer=this._callBackTimeOutUserItem.bind(this),this._listFish.push(e),this.addChild(e),this._listFish.length>1)this._initThunder(this._listFish[this._listFish.length-2],e,!0);else{this._lightningChainBG.visible=!0;const t=new PIXI.Sprite;if(AppInfo.GameInfo.tournamentRoom)this._lightningChainBG.position.set(150,this.target.y),t.position.set(100,-200);else switch(this.target.basePosition){case 0:case 1:this._lightningChainBG.position.set(this.target.x,this.target.y-this._lightningChainBG.height/1.5),t.position.set(100,-200);break;case 2:case 3:this._lightningChainBG.position.set(this.target.x,this.target.y+this._lightningChainBG.height/1.5),this._lightningChainBG.scaleY=-1,t.position.set(-100,-200)}this.target.addChild(t),t.updateTransform(),this._initThunder(t,e,!1)}}_initThunder(e,t,i){this._isTweeningEffect=!0;const s=this.toLocal(e,e.parent),o=new PIXI.Point,n=e,a=t;a.pause(),this.toLocal(a.position,a.parent,o);const h=Utilities.Number.angleRadBetweenTwoPoint(s,o),l=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.lightning);l.animationSpeed=1/4,l.gotoAndPlay(0),l.anchor.set(0,.5),l.visible=!0,l.rotation=h,this.addChildAt(l,0),this.target!==e?l.position.set(s.x+e.width/2*-Math.cos(h+Math.PI),s.y+e.height/2*-Math.sin(h+Math.PI)):l.position.set(s.x,s.y),a.pause(),TweenMax.to([a,a.fishShadow],2,{rotation:a.rotation+Utilities.toRad(359),repeat:-1,ease:Linear.easeNone});const r=Utilities.Number.distanceBetweenTwoPoint(n.getGlobalPosition(),a.getGlobalPosition());r>l.width&&(l.width=r);const p=PIXI.Graphics.Rectangle(0,0,r,l.height,0,1);if(p.isMask=!0,p.pivot.set(0,p.height/2),p.oriWidth=p.width,p.oriHeight=p.height,this.addChildAt(p,0),this.target!==e?p.toPos={x:s.x+e.width/2*-Math.cos(h+Math.PI),y:s.y+e.height/2*-Math.sin(h+Math.PI)}:p.toPos={x:s.x,y:s.y},l.mask=p,a.initLightningChain(),AppInfo.preLoader.soundController.playChonCa(),this._qualityFish.x=a.x,this._qualityFish.y=a.y,this._qualityFish.textQuality.text=this._listFish.length,this.addChild(this._qualityFish),this._listSpriteThunder.push(l),i){const t=(e.width+a.width)/2,i=(e.height+a.height)/2;TweenMax.to(p,.5,{x:s.x,y:s.y,startAt:{x:s.x+r*Math.cos(h+Math.PI),y:s.y+r*Math.sin(h+Math.PI)},onUpdate:()=>{this._qualityFish.x=a.x,this._qualityFish.y=a.y},ease:Linear.easeNone,onStart:()=>{AppInfo.preLoader.soundController.playXoetDien()}}),TweenMax.to(a,p.oriWidth/1200,{x:e.x+t*-Math.cos(h+Math.PI),y:e.y+i*-Math.sin(h+Math.PI),ease:Linear.easeNone,onComplete:this.onCompleteCatchFish.bind(this,a,l),delay:1,onUpdate:function(e){e.onFishSwimUpdate(),this._qualityFish.x=e.x,this._qualityFish.y=e.y}.bind(this,a)}),TweenMax.to(p,(p.oriWidth+t)/1200,{x:s.x+r*Math.cos(h+Math.PI),y:s.y+r*Math.sin(h+Math.PI),delay:1,ease:Linear.easeNone,onStart:()=>{AppInfo.preLoader.soundController.playKeoCa()}})}else setTimeout(this.onCompleteCatchFish.bind(this,a),500);p.position.set(s.x,s.y),p.rotation=h}onCompleteCatchFish(e,t){this._isTweeningEffect=!1,t&&(TweenMax.killTweensOf(t),TweenMax.killTweensOf(t.mask),t.mask.destroy(),t.destroy(),Utilities.removeElementFromArray(this._listSpriteThunder,t)),e&&(e._lightningChainEffect.textures=ResourceManager.Atlas.AtlasEffectsInGame.textures.lightningClay),this._particle.playParticle(e.x,e.y),this.target&&this.target.compoItem.usingItem||setTimeout(this.onCompleteCatchAllFish.bind(this),1e3)}_callBackTimeOutUserItem(){this._isTweeningEffect||setTimeout(this.onCompleteCatchAllFish.bind(this),1e3)}onCompleteCatchAllFish(){let e;e=this.target?this.target.iconCoin.getGlobalPosition():new PIXI.Point(640,65);for(let t=0;t<this._listFish.length;t++)AppInfo.gameMovie.displayController.effectFishDie(this._listFish[t].type,this._listFish[t].x,this._listFish[t].y,this._listFish[t].fishScore,e.x,e.y,this.target.basePosition),AppInfo.gameMovie.displayController.effectWinCoinCatchFish(this._listFish[t].fishType,this._listFish[t].x,this._listFish[t].y,this._listFish[t].fishScore,e.x,e.y,this.target.basePosition),this._listFish[t].die();this.target.setCoin(this.userCoin),this._hideEffect(),this.target.compoItem.callBackCompleteTimer=null}_hideEffect(){this.visible=!1,this.idle=!0,this.userCoin=0,this._listFish=[];for(let e=0;e<this._listSpriteThunder.length;e++)this._listSpriteThunder[e].mask&&this._listSpriteThunder[e].mask.destroy(),null!==this._listSpriteThunder[e].transform&&this._listSpriteThunder[e].destroy();this._lightningChainBG.visible=!1,this._listSpriteThunder=[]}dispose(){let e;for(super.dispose(),this._listFish=[],this._particle&&(this._particle.dispose(),this._particle=null);this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy(),e=null}catch(e){}}}}d.PARTICLE={art:[{framerate:8,loop:!0,textures:["soniclight.png"]}],alpha:{start:1,end:1},scale:{start:.1,end:.01,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:-200,end:-200,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:0},noRotation:!1,rotationSpeed:{min:0,max:360},lifetime:{min:.5,max:1},blendMode:"screen",frequency:.01,emitterLifetime:-1,maxParticles:1e3,pos:{x:0,y:0},addAtBack:!0,spawnType:"ring",spawnCircle:{x:0,y:0,r:100,minR:100}};var c=d;class u extends s.a{constructor(){super(),this.poolBullet=[],this.poolEffect=[],this.poolCoinWin=[],this.pollGemWin=[],this.poolTicket=[],this.poolItem=[],this.poolEffectLightningChain=[],this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1)}dispose(){super.dispose();let e=this.poolBullet.length;for(var t=0;t<this.poolBullet.length;t++)TweenMax.killTweensOf(this.poolBullet[t]),this.poolBullet[t].dispose(),this.poolBullet.splice(t,1);for(e=this.poolEffect.length,t=0;t<e;t++)this.poolEffect[t].dispose();for(e=this.pollGemWin.length,t=0;t<e;t++)this.pollGemWin[t].dispose();for(e=this.poolTicket.length,t=0;t<e;t++)this.poolTicket[t].dispose();for(e=this.poolItem.length,t=0;t<e;t++)TweenMax.killTweensOf(this.poolItem[t]),this.poolItem[t].dispose();for(e=this.poolEffectLightningChain.length,t=0;t<e;t++)TweenMax.killTweensOf(this.poolEffectLightningChain[t]),this.poolEffectLightningChain[t].dispose();this.poolBullet=[],this.poolEffect=[],this.pollGemWin=[],this.poolTicket=[],this.poolItem=[],this.poolEffectLightningChain=[],AppInfo.gameMovie.gameBoard.listBullet=[]}getBullet(e,t,i,s){let n=null;for(let t=this.poolBullet.length-1;t>=0;t-=1)if(this.poolBullet[t].idle&&this.poolBullet[t].type==e){n=this.poolBullet[t];break}if(n)n.type=e,n.basePosition=t,n.power=i,n.lockFishID=s,n.hasHitFish=!1,n.reduceQuantity=!0,n.idle=!1,n.movie.visible=!0,n.bulletShadow&&(n.bulletShadow.visible=!0),n.readdCollision();else{const a=new o.a(e,t,i,s);a.idle=!1,this.poolBullet.push(a),n=a}return e<100&&(t===AppInfo.gameMovie.displayController.myBaseStation.basePosition&&AppInfo.GameInfo.tournamentRoom?n.setIsMe():AppInfo.GameInfo.tournamentRoom&&n.setNotMe()),n}getCoinWinEffect(e,t,i,s){let o=null;for(let t=this.poolEffect.length-1;t>=0;t-=1)if(s<15){if(this.poolEffect[t].idle&&this.poolEffect[t].fishType<15){o=this.poolEffect[t],o.updateCoinText(e);break}}else if(this.poolEffect[t].idle&&this.poolEffect[t].fishType>=15){o=this.poolEffect[t],o.updateCoinText(e);break}return null==o&&(o=new n.a(e,t,i,s),this.poolEffect.push(o)),o}getGemWin(e,t,i,s){let o=null;for(let t=this.pollGemWin.length-1;t>=0;t-=1)if(s<15){if(this.pollGemWin[t].idle&&this.pollGemWin[t].fishType<15){o=this.pollGemWin[t],o.updateCoinText(e);break}}else if(this.pollGemWin[t].idle&&this.pollGemWin[t].fishType>15){o=this.pollGemWin[t],o.updateCoinText(e);break}return null==o&&(o=new GemWinEffect(e,t,i,s),this.pollGemWin.push(o)),o}getTicket(e,t,i,s){let o=null;for(let t=this.poolTicket.length-1;t>=0;t-=1)if(s<15){if(this.poolTicket[t].idle&&this.poolTicket[t].fishType<15){o=this.pollGemWin[t],o.updateCoinText(e);break}}else if(this.poolTicket[t].idle&&this.poolTicket[t].fishType>15){o=this.poolTicket[t],o.updateCoinText(e);break}return null==o&&(o=new h(e,t,i,s),this.poolTicket.push(o)),o}getItemEffect(){let e=null;for(let t=this.poolItem.length-1;t>=0;t-=1)this.poolItem[t].idle&&(e=this.poolItem[t]);return null==e&&(e=new r,this.poolItem.push(e)),e.idle=!1,e}getEffectLightningChain(e){let t=null;const i=this.poolEffectLightningChain.length;for(let s=0;s<i;s++)if(!this.poolEffectLightningChain[s].idle&&this.poolEffectLightningChain[s].id===e){t=this.poolEffectLightningChain[s];break}return null==t&&(t=new c,this.poolEffectLightningChain.push(t),t.id=e,t.idle=!1,AppInfo.gameMovie.layerEffect.addChild(t)),t}getCoinWin(){let e=null;const t=this.poolCoinWin.length;for(let i=0;i<t;i++)if(this.poolCoinWin[i].idle){e=this.poolCoinWin[i];break}return null==e&&(e=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBanCaGeneral.textures.CoinWin),this.poolCoinWin.push(e)),e.idel=!1,e}}t.a=u},function(e,t,i){"use strict";i(4);var s=i(5),o=i(6);class n extends o.a{constructor(){super(),this.background=null}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.background||(this.background=new PIXI.Sprite,this.addChild(this.background)))}dispose(){TweenMax.killTweensOf(this),super.dispose(),this.removeChildren(),this.background&&(this.background.destroy(),this.background=null),this.destroy()}show(){this.visible=!0,this.alpha=1,this.y=-this.height,TweenMax.killTweensOf(this),TweenMax.to(this,.5,{y:0,ease:Back.easeOut.config(1)})}hide(){AppInfo.preLoader.soundController.playButtonClick(),TweenMax.killTweensOf(this),TweenMax.to(this,.5,{y:-this.height,ease:Back.easeIn.config(1),onComplete:()=>{this.visible=!1}})}fadeOut(e=0){TweenMax.killTweensOf(this),TweenMax.to(this,.5,{alpha:0,delay:e,ease:Power0.easeNone,onComplete(){this.visible=!1},onCompleteScope:this})}fadeIn(){this.visible=!0,TweenMax.killTweensOf(this),TweenMax.to(this,.5,{alpha:1,ease:Power0.easeNone})}}var a=n;const h=PIXI.Container;var l=class extends h{constructor(){super(),this.fog=null,this.boss=null,this.flag=null,this.lock=null,this.baseTime=null,this._isActive=!1,this._isKillBoss=!1,this._isLastHitBoss=!1,this.callbackWhenActive=null,this.init()}init(){if(this.fog||(this.fog=new PIXI.Sprite,this.addChild(this.fog)),this.boss||(this.boss=new PIXI.Sprite,this.addChild(this.boss)),this.flag||(this.flag=new PIXI.Sprite(ResourceManager.Atlas.AtlasMapOcean.textures.Flag),this.addChild(this.flag)),this.lock||(this.lock=new PIXI.Sprite(ResourceManager.Atlas.AtlasMapOcean.textures.Lock),this.addChild(this.lock)),!this.baseTime){this.baseTime=new PIXI.Sprite(ResourceManager.Atlas.AtlasButton.textures.baseTimeBoss);const e={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:33,fill:16777215,stroke:0,strokeThickness:2},t=new PIXI.Text("00:00",e);t.name="time",t.anchor.set(.5,.5),t.position.set(this.baseTime.width/2,this.baseTime.height/2-10),this.baseTime.addChild(t),this.addChild(this.baseTime)}}dispose(){this.removeChildren(),this.fog&&(this.fog.destroy(),this.fog=null),this.boss&&(this.boss.destroy(),this.boss=null),this.flag&&(this.flag.destroy(),this.flag=null),this.lock&&(this.lock.destroy(),this.lock=null),this.baseTime&&(this.baseTime.destroy(),this.baseTime=null),this._isActive=!1,this._isKillBoss=!1,this._isLastHitBoss=!1,this.callbackWhenActive=null,this.destroy()}get isActive(){return this._isActive}set isActive(e){this._isActive=e,e?(this.lock.visible=!1,this.fog.visible=!1,this.boss.visible=!0):(this.lock.visible=!0,this.fog.visible=!0,this.boss.visible=!1,this.flag.visible=!1),this.callbackWhenActive&&"function"==typeof this.callbackWhenActive&&this.callbackWhenActive(this,e)}get isKillBoss(){return this._isKillBoss}set isKillBoss(e){this._isKillBoss=e,e&&(this.lock.visible=!1,this.fog.visible=!1,this.boss.visible=!0)}get isLastHitBoss(){return this._isLastHitBoss}set isLastHitBoss(e){this._isLastHitBoss=e,this.flag.visible=e}};class r extends a{constructor(){super(),this.timeBossComing=null,this._smallIsland=null,this._cloud=null,this._dial=null,this._btnBack=null,this._listItem=[],this._listPositionItem=[{x:-5,y:390},{x:25,y:0},{x:380,y:205},{x:430,y:475},{x:870,y:480},{x:830,y:230},{x:650,y:0}],this._listPositionIslandHover=[{x:-200,y:350},{x:0,y:-20},{x:200,y:100},{x:300,y:300},{x:700,y:300},{x:700,y:150},{x:300,y:0}],this._listIsland=[],this.callbackOnClickRoom=null,this.callbackOnClickIsland=null,this.init()}init(){super.init(),this.background&&(this.background.texture=ResourceManager.Atlas.AtlasMapOcean.textures.Background,this.background.width=AppInfo.appRealWidth),this.background.interactive=!0;for(let e=0;e<r.COUNT_ITEM;e++){const t=new PIXI.Sprite(ResourceManager.Atlas.AtlasMapOcean.textures.Island[e]);t.name=r.NAME_ISLAND+e,t.scale.set(.48),t.x=this._listPositionItem[e].x,t.y=this._listPositionItem[e].y,this._listIsland.push(t);const i=new PIXI.Sprite(ResourceManager.Atlas.AtlasMapOcean.textures.IslandHover[e]);i.name=r.NAME_ISLAND_HOVER+e,i.position.set(this._listPositionIslandHover[e].x,this._listPositionIslandHover[e].y),i.visible=!1,i.hitArea=PIXI.Rectangle.EMPTY,i.alpha=.8,this.addChild(t),this.addChild(i),t.buttonMode=!0,t.mouseclick=this._onClickIsland.bind(this),t.mouseover=this._onMouseOverIsland.bind(this),t.mouseout=this._onMouseOutIsland.bind(this);const s=new PIXI.Sprite(ResourceManager.Atlas.AtlasMapOcean.textures.Boss[e]);s.x=125,s.y=-125,s.scale.set(1/.48),s.visible=!1,t.addChild(s),t.boss=s}this._smallIsland||(this._smallIsland=new PIXI.Sprite(ResourceManager.Atlas.AtlasMapOcean.textures.SmallIsland),this._smallIsland.hitArea=PIXI.Rectangle.EMPTY,this._smallIsland.width=AppInfo.appRealWidth,this.addChild(this._smallIsland));for(let e=0;e<r.COUNT_ITEM;e++){const t=new l;t.name=r.NAME_ITEM+e,t.fog.texture=ResourceManager.Atlas.AtlasMapOcean.textures.Fog[e],t.boss.texture=ResourceManager.Atlas.AtlasMapOcean.textures.Boss[e],t.flag.texture=ResourceManager.Atlas.AtlasMapOcean.textures.Flag,t.lock.texture=ResourceManager.Atlas.AtlasMapOcean.textures.Lock,t.baseTime.texture=ResourceManager.Atlas.AtlasButton.textures.baseTimeBoss,t.lock.visible=!1,t.x=this._listPositionItem[e].x,t.y=this._listPositionItem[e].y,t.baseTime.visible=!1,t.hitArea=PIXI.Rectangle.EMPTY,t.interactive=!1,t.isActive=!1,t.callbackWhenActive=this._callbackWhenIslandActive.bind(this),this.addChild(t),this._listItem.push(t)}this.setupItemMap(),this._cloud||(this._cloud=new PIXI.Sprite(ResourceManager.Atlas.AtlasMapOcean.textures.Cloud),this._cloud.hitArea=PIXI.Rectangle.EMPTY,this._cloud.width=AppInfo.appRealWidth,this.addChild(this._cloud)),this._dial||(this._dial=new PIXI.Sprite(ResourceManager.Atlas.AtlasMapOcean.textures.Dial),this._dial.x=AppInfo.appRealWidth-this._dial.width-10,this._dial.y=10,this._dial.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this._dial)),this._btnBack||(this._btnBack=new s.a(ResourceManager.Atlas.AtlasButton.textures.btnBack_UP),this.addChild(this._btnBack),this._btnBack.mouseclick=this.hide.bind(this))}setupItemMap(){this._listItem[0].isActive=PreLoaderConfig.ListMapBossOpen[0],this._listItem[0].boss.position.set(60,-60),this._listItem[0].flag.position.set(240,50),this._listItem[0].lock.position.set(130,80),this._listItem[0].baseTime.position.set(this._listItem[0].boss.x,this._listItem[0].boss.y+this._listItem[0].boss.height-20),this._listItem[1].isActive=PreLoaderConfig.ListMapBossOpen[1],this._listItem[1].fog.position.set(-15,-15),this._listItem[1].boss.position.set(100,20),this._listItem[1].boss.scale.set(.8),this._listItem[1].flag.scale.set(.8),this._listItem[1].flag.position.set(180,55),this._listItem[1].lock.position.set(130,60),this._listItem[1].baseTime.position.set(this._listItem[1].boss.x,this._listItem[1].boss.y+this._listItem[1].boss.height-20),this._listItem[2].isActive=PreLoaderConfig.ListMapBossOpen[2],this._listItem[2].fog.position.set(-150,-100),this._listItem[2].boss.position.set(60,-60),this._listItem[2].flag.scale.set(.8),this._listItem[2].flag.position.set(160,10),this._listItem[2].lock.position.set(150,30),this._listItem[2].baseTime.position.set(this._listItem[2].boss.x,this._listItem[2].boss.y+this._listItem[2].boss.height-20),this._listItem[3].isActive=PreLoaderConfig.ListMapBossOpen[3],this._listItem[3].fog.position.set(-150,-100),this._listItem[3].boss.position.set(60,-60),this._listItem[3].flag.position.set(180,-20),this._listItem[3].lock.position.set(130,35),this._listItem[3].baseTime.position.set(this._listItem[3].boss.x,this._listItem[3].boss.y+this._listItem[3].boss.height-20),this._listItem[4].isActive=PreLoaderConfig.ListMapBossOpen[4],this._listItem[4].fog.position.set(-150,-150),this._listItem[4].boss.position.set(60,-60),this._listItem[4].flag.position.set(200,-20),this._listItem[4].lock.position.set(150,55),this._listItem[4].baseTime.position.set(this._listItem[4].boss.x,this._listItem[4].boss.y+this._listItem[4].boss.height-20),this._listItem[5].isActive=PreLoaderConfig.ListMapBossOpen[5],this._listItem[5].fog.position.set(-130,-80),this._listItem[5].boss.position.set(60,-60),this._listItem[5].flag.scale.set(.8),this._listItem[5].flag.position.set(200,20),this._listItem[5].lock.position.set(150,30),this._listItem[5].baseTime.position.set(this._listItem[5].boss.x,this._listItem[5].boss.y+this._listItem[5].boss.height-20),this._listItem[6].isActive=PreLoaderConfig.ListMapBossOpen[6],this._listItem[6].fog.position.set(-150,0),this._listItem[6].boss.position.set(60,-60),this._listItem[6].flag.position.set(160,10),this._listItem[6].flag.scale.set(.8),this._listItem[6].lock.position.set(170,15),this._listItem[6].baseTime.position.set(this._listItem[6].boss.x,this._listItem[6].boss.y+this._listItem[6].boss.height-20)}reset(){this.setupItemMap()}show(){this.reset(),super.show()}dispose(){this.removeChildren();for(let e=0;e<this._listItem.length;e++)this._listItem[e]&&this._listItem[e].dispose();for(let e=0;e<this._listItem.length;e++)this._listIsland[e]&&(this._listIsland[e].destroy(),this._listIsland[e]=null);this._listItem=[],this._listIsland=[],this._smallIsland&&(this._smallIsland.destroy(),this._smallIsland=null),this._cloud&&(this._cloud.destroy(),this._cloud=null),this._dial&&(this._dial.destroy(),this._dial=null),this._btnBack&&(this._btnBack.destroy(),this._btnBack=null),super.dispose()}_callbackWhenIslandActive({name:e},t){const i=e.slice(r.NAME_ITEM.split("").length),s=this.getChildByName(r.NAME_ISLAND+i);s.interactive=t,s.buttonMode=t}_onClickIsland(e){AppInfo.preLoader.soundController.playButtonClick(),this._disableAllIsland();const t=this.getChildByName(e.target.name);t&&this._effectClickIsland(t,e)}_onMouseOverIsland({currentTarget:e}){const t=e.name.slice(r.NAME_ISLAND.split("").length),i=this.getChildByName(r.NAME_ISLAND_HOVER+t);i&&(i.visible=!0)}_onMouseOutIsland({currentTarget:e}){const t=e.name.slice(r.NAME_ISLAND.split("").length),i=this.getChildByName(r.NAME_ISLAND_HOVER+t);i&&(i.visible=!1)}_effectClickIsland(e,t){switch(e.anchor.set(.5),e.x+=e.width/2,e.y+=e.height/2,t.target.name){case"island0":e.boss.x-=e.width,e.boss.y-=e.height;break;case"island1":e.boss.scale.set(1.7),e.boss.position.set(-230,-250);break;case"island2":e.boss.position.set(-300,-350)}e.boss.visible=!0,this.setChildIndex(e,this.numChildren-1),TweenMax.to(e,1,{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2,scaleX:.6,scaleY:.6,ease:Power0.easeNone,onComplete:()=>{this.callbackOnClickRoom&&"function"==typeof this.callbackOnClickRoom&&this.callbackOnClickRoom(e.name,t)}});const i=this.getChildByName(e.name.replace(r.NAME_ISLAND,r.NAME_ITEM));i&&(i.boss.visible=!1)}_disableAllIsland(){for(let e=0;e<this._listIsland.length;e++)this._listIsland[e].interactive=!1,this._listIsland[e].hitArea=PIXI.Rectangle.EMPTY;this._btnBack.interactive=!1,this._btnBack.hitArea=PIXI.Rectangle.EMPTY}updateTimeBossComing(){for(let e=0;e<AppInfo.gameMovie.gameBoard.listBossReady.length;e++)switch(AppInfo.gameMovie.gameBoard.listBossReady[e].bossID){case 101:this._listItem[0].baseTime.visible=!0,this._listItem[0].baseTime.getChildByName("time").text=AppInfo.gameMovie.gameBoard.listBossReady[e].timeOfBoss;break;case 102:this._listItem[1].baseTime.visible=!0,this._listItem[1].baseTime.getChildByName("time").text=AppInfo.gameMovie.gameBoard.listBossReady[e].timeOfBoss;break;case 103:this._listItem[2].baseTime.visible=!0,this._listItem[2].baseTime.getChildByName("time").text=AppInfo.gameMovie.gameBoard.listBossReady[e].timeOfBoss;break;case 104:this._listItem[3].baseTime.visible=!0,this._listItem[3].baseTime.getChildByName("time").text=AppInfo.gameMovie.gameBoard.listBossReady[e].timeOfBoss;break;case 105:this._listItem[4].baseTime.visible=!0,this._listItem[4].baseTime.getChildByName("time").text=AppInfo.gameMovie.gameBoard.listBossReady[e].timeOfBoss;break;case 106:this._listItem[5].baseTime.visible=!0,this._listItem[5].baseTime.getChildByName("time").text=AppInfo.gameMovie.gameBoard.listBossReady[e].timeOfBoss;break;case 107:this._listItem[6].baseTime.visible=!0,this._listItem[6].baseTime.getChildByName("time").text=AppInfo.gameMovie.gameBoard.listBossReady[e].timeOfBoss}}}r.COUNT_ITEM=7,r.NAME_ISLAND="island",r.NAME_ISLAND_HOVER="island_hover",r.NAME_ITEM="item";t.a=r},function(e,t,i){"use strict";var s=i(6),o=i(72),n=i(70),a=i(78);class h extends o.a{constructor(e,t,i,s,o,n){super(e,t,i,s,o,n),this.scale.set(1)}init(){this._mainItem=null,this._blendModeImage=null,this._baseItem=null,this.isFishItem=!0,this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasFishItem.textures.fishItem),this.movie.animationSpeed=.5,this.movie.anchor.set(.5,.5),this.addChild(this.movie),this._group=new PIXI.Container,this._baseItem=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasCompoItem.textures.baseItemEffect),this._mainItem=new PIXI.Sprite,this._blendModeImage=new PIXI.Sprite,this._mainItem.anchor.set(.5),this._blendModeImage.anchor.set(.5),this._baseItem.gotoAndPlay(0),this._baseItem.position.set(0,0);const e=new PIXI.Graphics.Circle(0,0,35,16777011);this._baseItem.anchor.set(.5),this._mainItem.mask=e,this._mainItem.addChild(this._blendModeImage),this._group.addChild(this._mainItem,this._baseItem,e),this.movie.addChild(this._group),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(void 0!==this.fishShadow&&null!==this.fishShadow||(this.fishShadow=new a.a(this.id,this.type,this.indexInGroup),this.fishShadow.movie.animationSpeed=this.movie.animationSpeed,this.fishShadow.movie.textures=this.movie.textures)),this.deltaWToCalInView=Math.max(this.width/2,this.height/2),this.deltaHToCalInView=this.deltaWToCalInView,this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,[68,74,143,74,143,161,68,161],n.a.TYPE_COLLISION.FISH,this.movie)}setUp({config:e,_bgLevelItem:t}){19===e.Type?(this._group.visible=!1,this.movie.textures=ResourceManager.Atlas.AtlasFishItem.textures.fishType19Item,PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&(void 0!==this.fishShadow&&null!==this.fishShadow||(this.fishShadow.movie.textures=this.movie.textures))):(this._mainItem.texture=t.texture,this._blendModeImage.texture=t.texture,this._blendModeImage.blendMode=PIXI.BLEND_MODES.ADD,this._mainItem.width=this._mainItem.height=this._blendModeImage.width=this._blendModeImage.height=75,this._mainItem.position.set(-2,4),this._mainItem.mask.position.set(-2,4),this._group.position.set(h.DELTA_X,h.DELTA_Y),TweenMax.to(this._blendModeImage,.8,{alpha:0,repeat:-1,yoyo:!0}))}run(e,t){super.run(e,t),TweenMax.killTweensOf(this.runTween),this._createTween(e),this.position.set(e[0].x,e[0].y)}_createTween(e){const t=Utilities.Number.distanceBetweenTwoPoint(e[0],e[e.length-1])/(PreLoaderConfig.TimeFishMove[this.type]||75);this.runTween=TweenMax.to(this,t,{bezier:{type:"thru",curviness:1,values:e,autoRotate:["x","y","rotation",0,!0]},onUpdate:this.onFishSwimUpdate,onUpdateScope:this,onComplete:this.onFishSwimComplete.bind(this),onCompleteScope:this}),this.runTween.timeScaleTween=h.TIME_SCALE.DEFAULT,this.runTween.timeScale(h.TIME_SCALE.DEFAULT),this.movie.animationSpeed=.6,this.fishshadow&&(this.fishshadow.movie.animationSpeed=.6),this.tweenTimeScale=TweenMax.to(this.runTween,this.runTween.totalDuration()/3,{timeScaleTween:.01,onUpdate(e){e.timeScale(e.timeScaleTween),e.timeScaleTween<.2&&(this.movie.animationSpeed-=.01,.4===this.movie.animationSpeed&&(this.movie.animationSpeed=.4))},onComplete(e){TweenMax.to(this,.2,{onComplete(e){e.timeScale(h.TIME_SCALE.FAST),this.movie.animationSpeed=1,this.fishShadow&&(this.fishShadow.movie.animationSpeed=1)},ease:Linear.easeNone,onCompleteScope:this,onCompleteParams:[e]})},ease:Linear.easeNone,onCompleteParams:[this.runTween],onUpdateParams:[this.runTween],onUpdateScope:this,onCompleteScope:this})}onFishSwimUpdate(){super.onFishSwimUpdate()}dispose(){super.dispose(),this._baseItem&&this._baseItem.destroy(),this._mainItem&&this._mainItem.destroy(),this._blendModeImage&&this._blendModeImage.destroy(),this._baseItem=null,this._mainItem=null,this._blendModeImage=null,TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.runTween),this.tweenTimeScale&&(this.tweenTimeScale.kill(),this.tweenTimeScale=null),this.runTween&&(this.runTween.kill(),this.runTween=null)}}h.DELTA_X=0,h.DELTA_Y=-30,h.TIME_SCALE={DEFAULT:1.5,FAST:2},h.DELTA_Y=-30;var l=h;class r extends s.a{constructor(e,t,i){super(),this._baseStation=e,this._baseStation&&this._baseStation.setCoinComplete.add(this.updateCoin,this),this._startPoint=t,this._timeRun=i,this._isEnd=!1,this._isShow=!1,this.init()}init(){super.init(),this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasFishItem.textures.fishItem),this.movie.animationSpeed=.5,this._chest=new PIXI.Sprite(ResourceManager.Atlas.AtlasFishItem.textures.chest),this._ribbonChest=new PIXI.Sprite(ResourceManager.Atlas.AtlasFishItem.textures.ribbonChest),this._blendModeImage=new PIXI.Sprite(ResourceManager.Atlas.AtlasFishItem.textures.chest),this._blendModeImage.blendMode=PIXI.BLEND_MODES.ADD,this._textCoin=new PIXI.Text("0",TextStyleConfig.SPECIAL_CRAB_COIN),this.movie.anchor.set(.5),this._chest.anchor.set(.5),this._blendModeImage.anchor.set(.5),this._ribbonChest.anchor.set(.5),this._textCoin.anchor.set(.5),this._ribbonChest.addChild(this._textCoin),this.addChild(this.movie,this._chest,this._blendModeImage,this._ribbonChest),TweenMax.to(this._blendModeImage,.8,{alpha:0,repeat:-1,yoyo:!0}),this._setupPosition(),this.alpha=0,this._tween=new TweenMax.to(this,.4,{alpha:1,onComplete(){this._isShow=!0},onCompleteScope:this,onReverseComplete(){this._isShow=this.visible=!1},onReverseCompleteScope:this}),this._tween.pause(),this._hide(),this.updateCoin(0)}_setupPosition(){this._chest.position.set(0,-30),this._blendModeImage.position.set(0,-30),this._textCoin.position.set(0,-2)}dispose(){super.dispose()}run(e){this.movie.gotoAndPlay(0);const t=Math.random()>.5?1400:-200,i=t>0?-200:1400,s=Utilities.Number.randRange(300,420);TweenMax.to(this,e,{startAt:{x:t,y:s},x:i,y:s,ease:Linear.easeNone,onComplete:this.dispose,onCompleteScope:this}),this._check()}updateCoin(e=0){this._startPoint-=e,this._startPoint<=0?(this._startPoint=0,Utilities.tweenCoin(this._textCoin,0,r.TIME_TWEEN_COIN)):this._isEnd||Utilities.tweenCoin(this._textCoin,this._startPoint,r.TIME_TWEEN_COIN),this._check()}_check(){PreLoaderConfig.SecondWalletConfig.enable&&(this._startPoint<=PreLoaderConfig.SecondWalletConfig.limitShow?this._isShow&&this._hide():this._isShow||this._show())}_hide(){this._tween.reverse()}_show(){this.visible=!0,this._isShow=!0,this._tween.play()}updateWallet(e){this._startPoint=e,this._isEnd=!1,Utilities.tweenCoin(this._textCoin,e,r.TIME_TWEEN_COIN),this._check()}updateZero(e){this._startPoint=e,this._isEnd=!0,Utilities.tweenCoin(this._textCoin,e,r.TIME_TWEEN_COIN),this._check()}}r.TIME_TWEEN_COIN=1;var p=r;class d{constructor(){this._specialCrab=null}addFish(){}createFishItem(e={}){const t=new l(e.fishID,e.fishType,e.point,0,0,!1);t.setUp(e.item),d._addFish(t,e)}static _addFish(e,{point:t}){null!=e&&(d._addToLayer(e),e.run(t),e.updateTransform())}static _addToLayer(e){null!=e&&(AppInfo.gameMovie.gameBoard.listFish.push(e),AppInfo.gameMovie.layerFish.addChild(e),PreLoaderConfig.GameSettingConfig.listSetting.enableFishShadow.defaultValue&&e.fishShadow&&AppInfo.gameMovie.layerFishShadow.addChild(e.fishShadow))}static _addSpecialCrab(e){null!=e&&AppInfo.gameMovie.layerBoss.addChild(e)}createSpecialCrab(e,t){null===this._specialCrab?(this._specialCrab=new p(AppInfo.gameMovie.displayController.myBaseStation,e,t),d._addSpecialCrab(this._specialCrab),this._specialCrab.run(t)):(this._specialCrab.run(t),this._specialCrab.updateWallet(e))}updateSpecialCrab(e){this._specialCrab&&this._specialCrab.updateWallet(e)}updateCrabZero(e){this._specialCrab&&this._specialCrab.updateZero(e)}}t.a=d},function(e,t,i){"use strict";var s=i(6),o=(i(4),i(71));class n extends s.a{constructor(e,t,i,s,o){super(),this.idMission=e,this.bg=null,this.lightEffect=null,this.targetMission=null,this.count=i,this.targetCount=s,this.missionInfo=null,this.effectParticle=null,this.idTargetMission=t,this.missionPoint=o,this.onCompleteEffectFinish=null,this.init(t)}init(e){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null===this.bg&&(this.bg=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.ItemMission),this.bg.anchor.set(.5),this.addChild(this.bg)),null===this.targetMission&&(this.targetMission=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas["AtlasFish"+e].textures["fish"+e+"Swim"]),this.targetMission.anchor.set(.5),this.targetMission.gotoAndStop(0),this.oriW=this.targetMission.width,this.oriH=this.targetMission.height,this.targetMission.scale.set(70/this.targetMission.width),this.addChild(this.targetMission)),null===this.effectParticle&&(this.effectParticle=new o.a(n.ConfigParticle),this.effectParticle.interactive=!1,this.effectParticle.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this.effectParticle)),null===this.lightEffect&&(this.lightEffect=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.lightProgress),this.lightEffect.visible=!1,this.lightEffect.anchor.set(.5),this.addChild(this.lightEffect)),null===this.missionInfo){const e={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"25px",fill:[12320760,65514,12648440],fillGradientStops:[.2,.5,.8],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:131172,align:"center",strokeThickness:4};this.missionInfo=new PIXI.Text(this.count+"/"+this.targetCount,e),this.missionInfo.anchor.set(.5),this.missionInfo.y=this.bg.height/4,this.addChild(this.missionInfo)}void 0!==this.missionPoint&&(this.txtMissionPoint=new PIXI.Text(0,{fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:20,fill:[1944377,65403,2089088],fillGradientStops:[.2,.5,.8],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:14343,strokeThickness:3}),this.txtMissionPoint.position.set(-35,this.missionInfo.y+10),this.addChild(this.txtMissionPoint)),this.updateInfoMission(this.count,this.targetCount,+this.count>=+this.targetCount,this.missionPoint)}}updateInfoMission(e,t,i,s){void 0===t&&(t=this.targetCount),this.count=e,this.targetCount=t,this.missionInfo.text=Utilities.String.formatString(n.TEXT_INFO,e,t),this.txtMissionPoint&&s&&(this.txtMissionPoint.visible=!0,this.txtMissionPoint.text="+"+Utilities.Coin(s)),i?(this.targetMission.gotoAndPlay(0),this.effectParticle.visible=!0,this.lightEffect.visible=!0,this.lightEffect.x=0,this.lightEffect.y=-50,this.effectParticle.playParticle(0,-50),this.playEffectLight()):(this._tweenFinish&&this._tweenFinish.pause(),this.effectParticle.visible=!1,this.lightEffect.visible=!1,this.targetMission.gotoAndStop(0))}reUpMission(e,t,i){this.visible=!0,this.idMission=e,this.missionPoint=i,this.idTargetMission=t[0],this.targetMission.scale.set(1),this.targetMission.textures=ResourceManager.Atlas["AtlasFish"+this.idTargetMission].textures["fish"+this.idTargetMission+"Swim"],this.targetMission.gotoAndStop(0),this.targetMission.scale.set(70/this.targetMission.width),this.updateInfoMission(t[1],t[2],+t[1]>=+t[2],i)}completeEffectFinish(){null!==this.onCompleteEffectFinish&&this.onCompleteEffectFinish()}onBtnAcceptClick(){AppInfo.preLoader.requestController.userCompleteMission(this.typeMission)}completeMission(e){}playEffectLight(){void 0===this._tweenFinish?this._tweenFinish=TweenMax.to([this.effectParticle._emitter.ownerPos,this.lightEffect],2,{bezier:{curviness:1.5,values:[{x:50,y:0},{x:0,y:45},{x:-50,y:0},{x:0,y:-50}]},ease:Power0.easeNone,onComplete:this.completeEffectFinish,onCompleteScope:this}):this._tweenFinish.restart()}tweenTo(e,t,i){TweenMax.to([this.effectParticle._emitter.ownerPos,this.lightEffect],2,{x:e,y:t,onComplete(){i?this._flyMissionPoint(e+50,t):this.dispose()},onCompleteScope:this})}_flyMissionPoint(e,t){this.txtMissionPoint.visible=!0,this.txtMissionPoint.alpha=0,this.txtMissionPoint.style.fontSize=30,this.txtMissionPoint.position.set(e,t),TweenMax.to(this.txtMissionPoint,1,{y:t-30,alpha:1,ease:Expo.easeOut,onComplete(){TweenMax.to(this.txtMissionPoint,1,{delay:2,y:t-60,alpha:0,ease:Expo.easeOut,onComplete:this.dispose,onCompleteScope:this})},onCompleteScope:this})}onMouseClickItem(){AppInfo.gameMovie.displayController.onMouseDownLayerFish()}onHoverItem(){this.toolTip.visible=!0}onOutOfItem(){this.toolTip.visible=!1}getTextToolTipByType(e){switch(e){case 1:return}}dispose(){let e;for(super.dispose(),TweenMax.killTweensOf(this),this._tweenFinish&&(this._tweenFinish.kill(),this._tweenFinish=null),this.effectParticle._emitter&&TweenMax.killTweensOf(this.effectParticle._emitter.ownerPos),this.lightEffect&&TweenMax.killTweensOf(this.lightEffect),this.txtMissionPoint&&TweenMax.killTweensOf(this.txtMissionPoint);this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}n.ParticleAnimation=[{framerate:20,loop:!0,textures:["lightProgress.png"]},{framerate:20,loop:!0,textures:["lightProgress.png"]}],n.ConfigParticle={art:[{framerate:20,loop:!0,textures:["lightProgress.png"]}],alpha:{start:1,end:0},scale:{start:.8,end:.2,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#d8ff4a"},speed:{start:50,end:50,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:100,max:200},lifetime:{min:.001,max:1},blendMode:"screen",frequency:.01,emitterLifetime:-1,maxParticles:20,pos:{x:0,y:0},addAtBack:!0,spawnType:"circle",spawnCircle:{x:0,y:0,r:0}},n.TEXT_INFO="{0} / {1}";var a=n;i(39);var h=class{constructor(){this.content_by_type={0:PreLoaderConfig.ListTextConfig.Fish0,1:PreLoaderConfig.ListTextConfig.Fish1,2:PreLoaderConfig.ListTextConfig.Fish2,3:PreLoaderConfig.ListTextConfig.Fish3,4:PreLoaderConfig.ListTextConfig.Fish4,5:PreLoaderConfig.ListTextConfig.Fish5,6:PreLoaderConfig.ListTextConfig.Fish6,7:PreLoaderConfig.ListTextConfig.Fish7,8:PreLoaderConfig.ListTextConfig.Fish8,9:PreLoaderConfig.ListTextConfig.Fish9,10:PreLoaderConfig.ListTextConfig.Fish10,11:PreLoaderConfig.ListTextConfig.Fish11,12:PreLoaderConfig.ListTextConfig.Fish12,13:PreLoaderConfig.ListTextConfig.Fish13,14:PreLoaderConfig.ListTextConfig.Fish14,15:PreLoaderConfig.ListTextConfig.Fish15,16:PreLoaderConfig.ListTextConfig.Fish16,17:PreLoaderConfig.ListTextConfig.Fish17,18:PreLoaderConfig.ListTextConfig.Fish18,19:PreLoaderConfig.ListTextConfig.Fish19}}getContentMission(e){return PreLoaderConfig.ListTextConfig.Extirpation+" "+this.content_by_type[e]||PreLoaderConfig.ListTextConfig.Fish}},l=i(81);class r extends s.a{constructor(){super(),this.listCurrentMission=[],this.listQueueMission=[],this.listMissionCompleted=[],this.currentMission=null,this.bgCompleteMission=null,this.textCongratulation=null,this.mappingTo=null,this._tlEffectComplete=null,this.contentMission=new h,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null===this.textCongratulation){const e={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"60px",fill:[16776960,16546562],fillGradientStops:[1,.5],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:4,dropShadow:!0,dropShadowBlur:8,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:5,wordWrap:!0,wordWrapWidth:AppInfo.appRealWidth};this.textCongratulation=new PIXI.Text("",e),this.textCongratulation.anchor.set(.5),this.textCongratulation.x=AppInfo.appRealWidth/2,this.textCongratulation.y=AppInfo.appRealHeight/2-150,this.addChild(this.textCongratulation)}void 0===this._tooltip&&(this._tooltip=new l.a(!1,0,"",{fontFamily:"Arial",fontWeight:"bold",fontSize:"16px",wordWrap:!0,wordWrapWidth:300,align:"center",fill:[12320760,65514,12648440]}),this._tooltip.visible=!1,this.addChild(this._tooltip),this._tooltip.setBackgroundTooltip(0,0,l.a.ShowTop,1973552,.8,3381469,1),this._tooltip.changeTextTooltip(PreLoaderConfig.languageConfig.tool_tip_mission),this._tooltip.y=-80,this._tooltip.x=this._tooltip.width/2),this.interactive=!0,this.mouseover=this._onHover.bind(this),this.mouseout=this._onOut.bind(this)}}_onHover(){this._tooltip.visible=!0}_onOut(){this._tooltip.visible=!1}addMissions(e){e&&e.length>0&&(this.listQueueMission=e,this.addMission(this.listQueueMission[0]))}addMission(e){const t=e.info.split("|"),i=Utilities.convertStringToBoolean(t[5]);this.currentMission?this.currentMission.reUpMission(e.id,t,e.point):i||(this.currentMission=new a(e.id,t[0],t[1],t[2],e.point),this.currentMission.scale.set(0),this.addChild(this.currentMission),TweenMax.to(this.currentMission,.5,{scaleX:1,scaleY:1,ease:Bounce.easeOut}))}updateInfoMission(e,t){if(!this.listMissionCompleted.includes(e))if(t=t.split("|"),this.currentMission.idMission!==e)this.currentMission.reUpMission(e,t);else{const e=Utilities.convertStringToBoolean(t[2]);this.currentMission.updateInfoMission(t[0],t[1],e),e&&(this.listMissionCompleted.push(this.currentMission.idMission),this.effectCompleteMission(this.showNextMission))}}showNextMission(){Utilities.removeElementAtIndex(this.listQueueMission,0),void 0!==this.listQueueMission[0]?this.addMission(this.listQueueMission[0]):this.currentMission.visible=!1}effectCompleteMission(e){if(null!==this.mappingTo){null===this._tlEffectComplete&&(this._tlEffectComplete=new TimelineMax),this._tlEffectComplete.clear().eventCallback("onComplete",null),e&&this._tlEffectComplete.eventCallback("onComplete",e,[],this);for(let e=0;e<5;e++){const t=new a(this.currentMission.idMission,this.currentMission.idTargetMission,this.currentMission.count,this.currentMission.targetCount,this.currentMission.missionPoint);t.position.copy(this.currentMission.position),this._tlEffectComplete.addCallback((function(e,t){this.currentMission&&this.currentMission.parent&&(this.currentMission.parent.addChild(e),e.playEffectLight(),e.onCompleteEffectFinish=()=>{e.bg.visible=!1,e.targetMission.visible=!1,e.missionInfo.visible=!1,e.txtMissionPoint.visible=!1;const i=this.currentMission.parent.toLocal(new PIXI.Point,this.mappingTo);e.tweenTo(i.x,i.y,0===t)})}),.3*e,[t,e],this)}this._tlEffectComplete.play()}}completeMission(e,t,i,s){const o=Utilities.findItem(this.listCurrentMission,"typeMission",t);if(o){o.completeMission(),AppInfo.gameMovie.displayController.myBaseStation.setCoin(s),TweenMax.to(o,.5,{alpha:0,x:o.width,onComplete:(e=>{e.dispose()}).bind(this,o)}),this.listCurrentMission.splice(0,1);const n={},a=Utilities.convertStringToBoolean(i.split("|")[5]);Utilities.convertStringToBoolean(i.split("|")[4]);n.info=i,n.type=t,a||this.addMission(n),this.sortMission(),this.textCongratulation.text=Utilities.String.formatString(PreLoaderConfig.ListTextConfig.MissionComplete+PreLoaderConfig.currency,this.contentMission.getContentMission(o.idTargetMission),e),this.showEffectCompleteMission(e),TweenMax.to(this.textCongratulation,7,{onComplete:this.hideEffectCompleteMission.bind(this)})}}showEffectCompleteMission(e){this.textCongratulation.visible=!0,TweenMax.to(this.textCongratulation,.5,{startAt:{scaleX:0,scaleY:0},scaleX:1,scaleY:1,ease:Bounce.easeOut,onComplete:(e=>{const t=AppInfo.gameMovie.displayController.myBaseStation.iconCoin.getGlobalPosition();AppInfo.gameMovie.displayController.effectFishDie(20,AppInfo.appRealWidth/2,AppInfo.appRealHeight/2,e,t.x,t.y)}).bind(this,e)})}hideEffectCompleteMission(){TweenMax.to(this.textCongratulation,.5,{scaleX:0,scaleY:0,onComplete:()=>{this.textCongratulation.visible=!1}})}sortMission(){for(let e=0;e<this.listCurrentMission.length;e++)TweenMax.to(this.listCurrentMission[e],.5,{y:e*this.listCurrentMission[e].height,delay:.1*e,ease:Back.easeIn.config(2)})}dispose(){let e;for(super.dispose(),TweenMax.killTweensOf(this),null!==this._tlEffectComplete&&(this._tlEffectComplete.kill(),this._tlEffectComplete=null);this.numChildren>0;)e=this.removeChildAt(0),TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}}r.COMPLETE_TEXT=PreLoaderConfig.ListTextConfig.MissionComplete+PreLoaderConfig.currency;t.a=r},function(e,t,i){"use strict";var s=i(6);PIXI.Container;var o=i(71),n=i(77);class a extends s.a{constructor(){super(),this._bgEffect=null,this._particle=null,this._overlay=null,this._lightSonic=null,this._lightBoom=null,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this._overlay&&(this._overlay=new PIXI.extras.TilingSprite(PIXI.Graphics.Rectangle(0,0,10,10,0,.5).generateCanvasTexture(),AppInfo.appRealWidth,AppInfo.appRealHeight)),null===this._bgEffect&&(this._bgEffect=new PIXI.Sprite,this._bgEffect.anchor.set(.5)),this.addChild(this._overlay,this._bgEffect))}playEffectActiveSkill(e){switch(this.visible=!0,e){case a.LAZE:this._playEffectLaze();break;case a.SONIC:this._playEffectSonic();break;case a.BOOM:this._playEffectBoom();break;default:this.visible=!1}}_playEffectLaze(){this._resetValue(),null===this._particle&&(this._particle=new o.a(a.ParticleBossComing),this.addChildAt(this._particle,1)),this._particle.visible=!0,this._particle.playParticle(1280,AppInfo.appRealHeight/2-150),this._bgEffect.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures.bgLaze,TweenMax.to(this._overlay,.5,{startAt:{alpha:0},alpha:.7}),TweenMax.to(this._bgEffect,.5,{startAt:{x:-this._bgEffect.width/2,y:AppInfo.appRealHeight/2},x:AppInfo.appRealWidth/2,ease:Back.easeOut,onComplete:()=>{TweenMax.to(this._bgEffect,.5,{x:AppInfo.appRealWidth+this._bgEffect.width,ease:Back.easeIn,delay:.75,onComplete:()=>{this._particle.visible=!1}}),TweenMax.to(this._overlay,.5,{alpha:0,delay:.75})}})}_playEffectSonic(){this._resetValue(),null===this._lightSonic&&(this._lightSonic=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.soniclight),this._lightSonic.anchor.set(.5),this.addChildAt(this._lightSonic,1),this._lightSonic.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._lightSonic.scale.set(1.5)),this._lightSonic.visible=!0,this._bgEffect.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures.bgSonic,TweenMax.killTweensOf(this._bgEffect),TweenMax.to(this._overlay,.5,{startAt:{alpha:0},alpha:.7}),TweenMax.to(this._lightSonic,.5,{startAt:{alpha:1},yoyo:!0,repeat:-1,alpha:0}),TweenMax.to(this._bgEffect,.5,{startAt:{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2,scaleX:0,scaleY:0},scaleX:1,scaleY:1,ease:Back.easeOut.config(1.3),onComplete:()=>{TweenMax.to(this._bgEffect,.5,{scaleX:0,scaleY:0,delay:.75,onComplete:()=>{TweenMax.killTweensOf(this._lightSonic),this._lightSonic.visible=!1}}),TweenMax.to(this._overlay,.5,{alpha:0,delay:.75})}})}_playEffectBoom(){this._resetValue(),null===this._lightBoom&&(this._lightBoom=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasGun203.textures.bullet203explode),this._lightBoom.anchor.set(.5),this.addChildAt(this._lightBoom,1),this._lightBoom.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this._lightBoom.scale.set(1.5),this._lightBoom.animationSpeed=1/6,this._lightBoom.visible=!1,this._lightBoom.loop=!1),this._bgEffect.texture=ResourceManager.Atlas.AtlasEffectsInGame.textures.bgBoom,TweenMax.killTweensOf(this._bgEffect),TweenMax.to(this._overlay,.5,{startAt:{alpha:0},alpha:.7}),TweenMax.to(this._bgEffect,.4,{startAt:{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2,scaleX:5,scaleY:5,alpha:1},scaleX:1,scaleY:1,ease:Bounce.easeOut,onComplete:()=>{this._lightBoom.visible=!0,this._lightBoom.gotoAndPlay(0),TweenMax.to(this._bgEffect,.5,{scaleX:5,scaleY:5,alpha:0,delay:1,onComplete:()=>{TweenMax.killTweensOf(this._lightSonic),this._lightBoom.visible=!1}}),TweenMax.to(this._overlay,.5,{alpha:0,delay:1})}})}_resetValue(){this._bgEffect.alpha=1,this._bgEffect.scale.set(1)}dispose(){let e;for(super.dispose(),TweenMax.killTweensOf(this);this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy(),e=null}catch(e){}}}}a.LAZE=n.a.INFO_LAZE.skillID,a.SONIC=n.a.INFO_SONIC.skillID,a.BOOM=n.a.INFO_BOOM.skillID,a.ParticleBossComing={art:[{framerate:20,loop:!0,textures:["lazelight.png"]},{framerate:20,loop:!0,textures:["lazelight.png"]}],alpha:{start:1,end:1},scale:{start:1,end:1,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:4e3,end:4e3,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:180,max:180},noRotation:!1,rotationSpeed:{min:0,max:0},lifetime:{min:.81,max:.81},blendMode:"normal",frequency:.004,emitterLifetime:-1,maxParticles:200,pos:{x:0,y:0},addAtBack:!1,spawnType:"rect",spawnRect:{x:0,y:0,w:800,h:300}};var h=a;class l extends s.a{constructor(e){super(),this.callBackCompleteEffectSkill=null,this.callBackButtonClick=null,this.itemGunSkill=null,this.lightProgress=null,this.fullSkill=null,this.tableSkill=null,this.progressSkillCircle=null,this.progressSkillRect=null,this.backgroundSkill=null,this._listInfoSkill=[],this.listInfoSkillGun=[],this._effectActiveSkill=null,this.basePosition=e,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this._layout=new PIXI.StackLayout(!0),this._layout.spaceChild=10,this.addChild(this._layout),this._layout.drawChild())}_onClickSkill({type:e}){this.activeSkill(e);for(const e of this._listInfoSkill){e.iconSkill.updateData(0)}}dispose(){super.dispose(),TweenMax.killTweensOf(this._maskRectProgress),TweenMax.killTweensOf(this.fullSkill),TweenMax.killTweensOf(this.lightProgress),TweenMax.killTweensOf(this.tableSkill),clearTimeout(this.timeoutEnablePreloader),this._effectActiveSkill&&this._effectActiveSkill.dispose(),this._maskRectProgress&&this._maskRectProgress.destroy(),this._maskCircleProgress&&this._maskCircleProgress.destroy(),null!==this.itemGunSkill&&this.itemGunSkill.dispose(),this.backgroundSkill&&this.backgroundSkill.destroy(),this.tableSkill&&this.tableSkill.destroy(),this.progressSkillRect&&this.progressSkillRect.destroy(),this.progressSkillCircle&&this.progressSkillCircle.destroy(),this.fullSkill&&this.fullSkill.destroy(),this.lightProgress&&this.lightProgress.destroy(),this._maskRectProgress=null,this._maskCircleProgress=null,this.itemGunSkill=null,this.backgroundSkill=null,this.tableSkill=null,this.progressSkillRect=null,this.progressSkillCircle=null,this.fullSkill=null,this.lightProgress=null,this._effectActiveSkill=null,this.destroy()}getInfoSkill(e){for(let t=0;t<e.length;t++){let i=!0;for(let s=0;s<this.listInfoSkillGun.length;s++)this.listInfoSkillGun[s].id===e[t].id&&(this.listInfoSkillGun[s]=e[t],i=!1);i&&this.listInfoSkillGun.push(e[t])}this._setInfoSkill(this.listInfoSkillGun)}_setInfoSkill(e){0===this.basePosition||3===this.basePosition?e.sort(({idA:e},{idB:t})=>e-t):e.sort(({idA:e},{idB:t})=>t-e),this._layout.removeChildren();for(const t of e){let e=this._getInfoSkillById(t.id),i=null;if(null===e)n.a.INFO[t.id]&&(i=new n.a(t.id),i.callBackChoiceSkill=this._onClickSkill.bind(this),this._layout.addChild(i),e=Object.assign({iconSkill:i},t),this._listInfoSkill.push(e));else{i=e.iconSkill;const s=Object.assign({},e);e=Object.assign(s,t),this._layout.addChild(i)}}this._layout.drawChild(),this.pivot.x=1===this.basePosition?this.width:2===this.basePosition?-this.width:0}_getInfoSkillById(e){for(const t of this._listInfoSkill)if(e===t.id)return t;return null}availableSkill(e){AppInfo.preLoader.globalCompoController.compoToast.addMessage(PreLoaderConfig.languageConfig.key_noti_ready_gun_skill);for(let t=0;t<e.length;t++){const i=this._getInfoSkillById(e[t]);if(null!==i){const e=i.iconSkill;e.updateData(100),e.activeSkill(!0)}}}updateScoreSkill(e){for(let t=0,i=0;t<this._listInfoSkill.length;t++){const s=this._listInfoSkill[t],o=s.iconSkill;i=e/s.scoreGetSkill*100,o.updateData(i)}}activeSkill(e){this.cbActiveSkill(!0),null===this._effectActiveSkill&&(this._effectActiveSkill=new h,AppInfo.gameMovie.layerEffect.addChild(this._effectActiveSkill)),this._effectActiveSkill.playEffectActiveSkill(e),AppInfo.preLoader.soundController.playSkillFull(),this._onCompleteChooseSkill(e);for(const e of this._listInfoSkill){e.iconSkill.activeSkill(!1)}}_onCompleteChooseSkill(e){this.timeoutEnablePreloader=setTimeout(()=>{AppInfo.preLoader.interactive=!0,AppInfo.preLoader.interactiveChildren=!0},500),null!==this.callBackButtonClick&&this.callBackButtonClick(e),null!==this.callBackCompleteEffectSkill&&this.callBackCompleteEffectSkill()}resetSkill(){AppInfo.gameMovie.displayController.stopTraceGun()}}l.ID_LAZE=n.a.INFO_LAZE.skillID,l.ID_SONIC=n.a.INFO_SONIC.skillID,l.ID_BOOM=n.a.INFO_BOOM.skillID,l.ID_MEDUSA=n.a.INFO_MEDUSA.skillID,l.ID_LIGHTING=n.a.INFO_LIGHTING.skillID,l.TYPE_LAZE=n.a.INFO_LAZE.skillKind,l.TYPE_SONIC=n.a.INFO_SONIC.skillKind,l.TYPE_BOOM=n.a.INFO_BOOM.skillKind,l.TYPE_MEDUSA=n.a.INFO_MEDUSA.skillKind,l.TYPE_LIGHTING=n.a.INFO_LIGHTING.skillKind,l.RADIUS_MASK=65;t.a=l},function(e,t,i){"use strict";var s=i(70),o=i(95);class n extends PIXI.Container{constructor(){super(),this.isTrigger=!1,this.eyeTrigger=null,this.pedestalGodden=null,this._nodeTree=null,this.pedestalDark=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBossMedusa.textures.PedestalDark),this.pedestalDark.anchor.set(.5),this.addChild(this.pedestalDark),this.pointFixedEye=new PIXI.Point(1045,390)}dispose(){this.removeCollision(),this.pedestalDark.destroy(),this.pedestalDark=null,null!==this.pedestalGodden&&(this.pedestalGodden.destroy(),this.pedestalGodden=null),this.eyeTrigger=null,this.pointFixedEye=null,this._nodeTree=null,this.destroy()}addCollision(){null===this._nodeTree?this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,[6,27,222,27,222,186,6,186],s.a.TYPE_COLLISION.GENERIC):this._nodeTree.add()}removeCollision(){null!==this._nodeTree&&this._nodeTree.release()}addEyes(e){this.theEyes=e}addGolden(){null===this.pedestalGodden&&(this.pedestalGodden=new PIXI.spine.Spine(ResourceManager.Atlas.PedestalBones.textures.PedestalBones.spineData),this.addChild(this.pedestalGodden))}playGolden(){this.pedestalGodden.visible=!0,this.pedestalGodden.state.setAnimation(0,"animation",!0)}highlight(e){this.isTrigger||(this.isTrigger=!0,this.addGolden(),this.playGolden(),e.isTriggerPedestal=!0,e.linkedPedestal=this,e.moveToPedestal(this.pointFixedEye),e.releaseNodeTree(),this.eyeTrigger=e,this.removeCollision())}unhighlight(e){e=!!e,(this.isTrigger||e)&&(this.isTrigger=!1,null!==this.pedestalGodden&&(this.pedestalGodden.visible=!1,this.pedestalGodden.state.clearTracks()),null!==this.eyeTrigger&&(this.eyeTrigger.isTriggerPedestal=!1,this.eyeTrigger.setAnimation("close"),this.eyeTrigger.linkedPedestal=null,this.eyeTrigger=null))}onTriggerCollide(e){e.getTarget()instanceof o.a&&this.highlight(e.getTarget())}onUpdateFramePedestal(){let e=!1;if(null!==this.eyeTrigger)e=SAT.pointInCircle(this.pointNode,this.eyeTrigger.getNodeTree().getBounding());else for(let t=0,i=this.theEyes.length;t<i;t++){const i=this.theEyes[t];if(!i.isTriggerPedestal){const t=i.getNodeTree();if(t&&(e=SAT.pointInCircle(this.pointNode,t.getBounding()),e))return void this.highlight(i)}}e||this.unhighlight()}}var a=n;var h=class extends a{constructor(){super(),this.pedestalDark.scaleX=-1,this.pointFixedEye=new PIXI.Point(185,420)}addGolden(){super.addGolden(),this.pedestalGodden.scaleX=-1}};class l extends PIXI.Container{constructor(){super(),this.theEyes=[],this.pedestalLeft=new h,this.pedestalLeft.position.set(200,500),this.addChild(this.pedestalLeft),this.pedestalRight=new a,this.pedestalRight.position.set(1030,490),this.addChild(this.pedestalRight)}dispose(){this.pedestalLeft.dispose(),this.pedestalLeft=null,this.pedestalRight.dispose(),this.pedestalRight=null,this.theEyes.length=0,this.destroy()}addEyes(e){this.theEyes=e;for(let e=0;e<this.theEyes.length;e++)this.theEyes[e].onPerfectlyPedestal=this.eyePerfectlyPedestal.bind(this);this.pedestalLeft.addEyes(this.theEyes),this.pedestalRight.addEyes(this.theEyes),this.pedestalLeft.addCollision(),this.pedestalRight.addCollision()}runTheEyes({x1:e,x2:t,y1:i,y2:s}){TweenMax.staggerFromTo(this.theEyes,2,{scaleX:.2,scaleY:.2},{cycle:{x:i=>0===i?e:t,y:e=>0===e?i:s},scaleX:1,scaleY:1,ease:Power2.easeOut,onComplete({target:e}){e.appear()},onCompleteParams:["{self}"],onCompleteScope:this},0,(function(){this.pedestalLeft.addCollision(),this.pedestalRight.addCollision()}),[],this)}eyePerfectlyPedestal(e){}removeCollision(){this.pedestalLeft.removeCollision(),this.pedestalRight.removeCollision()}highlight(){this.pedestalLeft.addGolden(),this.pedestalRight.addGolden(),this.pedestalLeft.playGolden(),this.pedestalRight.playGolden()}unhighlight(){this.pedestalLeft.unhighlight(!0),this.pedestalRight.unhighlight(!0)}}t.a=l},function(e,t,i){"use strict";class s extends PIXI.Container{constructor(){super(),this.iceDrop=null,this.iceExplode=null,this._cbComplete=null,this.init()}init(){this.iceDrop=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.IceDrop),this.iceDrop.anchor.set(.5,1),this.iceDrop.visible=!1,this.addChild(this.iceDrop),this.iceExplode=new PIXI.spine.Spine(ResourceManager.Atlas.AtlasExplodeFrozenBones.textures.AtlasExplodeFrozenBones.spineData),this.iceExplode.autoUpdate=!1,this.iceExplode.visible=!1,this.addChild(this.iceExplode),this.iceExplode.state.addListener({complete:this._completeAnimation.bind(this)})}dispose(){if(TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.iceDrop),null!==this.iceDrop&&this.iceDrop.destroy(),this.iceExplode&&null!==this.iceExplode){for(this.iceExplode.autoUpdate=!1;this.iceExplode.children.length>0;){const e=this.iceExplode.removeChildAt(0);e&&null!==e&&e.destroy()}this.iceExplode.destroy()}this._cbComplete=null,this.iceDrop=null,this.iceExplode=null,this.destroy()}play(e,t,i){this._cbComplete=i,TweenMax.killTweensOf(this.iceDrop),TweenMax.to(this.iceDrop,.3,{startAt:{x:e,y:t-300},y:t,ease:Power0.easeNone,delay:1.5*Math.random(),onStart:()=>{this.iceDrop.visible=!0},onComplete:function(e,t){this.iceExplode.x=e,this.iceExplode.y=t-20,this.iceExplode.autoUpdate=!0,this.iceExplode.state.setAnimation(0,"animation",!1),this.iceExplode.visible=!0,this.iceDrop.visible=!1,TweenMax.killTweensOf(this.iceDrop)}.bind(this,e,t)})}_completeAnimation(e){this.iceExplode.visible=!1,null!==this._cbComplete&&"function"==typeof this._cbComplete&&this._cbComplete(this)}}var o=s;class n extends PIXI.Container{constructor(){super(),this._countIce=20,this._countDropIceComplete=0,this.hasStopped=!1,this.idle=!0,this.listIce=[],this.timerDropIce=new Utilities.Timer(1e3*PreLoaderConfig.TimeDropFrozenFish,1,null,this._onCompleteTimer.bind(this)),this._onCompleteIceBinded=this._onCompleteIce.bind(this),this.init()}init(){for(let e=0;e<this._countIce;e++){const e=new o;this.addChild(e),this.listIce.push(e)}}dispose(){this.timerDropIce.Stop();for(const e of this.listIce)e&&null!==e&&e.dispose();this.destroy()}play(){this.timerDropIce.Start(),this.hasStopped=!1,this.idle=!1,this._countDropIceComplete=0;for(const e of this.listIce)if(e&&null!==e){const t=Utilities.Number.randRange(100,AppInfo.appRealWidth-100),i=Utilities.Number.randRange(50,AppInfo.appRealWidth-50);e.visible=!0,e.play(t,i,this._onCompleteIceBinded)}}_onCompleteIce(e){if(this.hasStopped)this._countDropIceComplete++;else{const t=Utilities.Number.randRange(100,AppInfo.appRealWidth-100),i=Utilities.Number.randRange(100,AppInfo.appRealHeight-100);for(const e of AppInfo.gameMovie.gameBoard.listFish)!e||null===e||e.isBossMap||e.isCaTran||e.frozen&&e.frozen();e.play(t,i,this._onCompleteIceBinded)}if(this._countDropIceComplete===this.listIce.length){this.idle=!0;for(let e=0;e<this.listIce.length;e++)this.listIce[e]&&null!==this.listIce[e]&&(this.listIce[e].visible=!1)}}_onCompleteTimer(){this.hasStopped=!0}}t.a=n},function(e,t,i){"use strict";var s=i(6);const o=PIXI.particles.Emitter,n=PIXI.particles.ParticleContainer||PIXI.ParticleContainer;class a extends s.a{constructor(e){super(),this._timeLast=0,this._emitterLife=0,this._emitterContainer=null,this._listArt=[],this._emitter=null,void 0!==e&&null!=e||(e=!1),this.init(e),this.onEnterFrameBind=null}init(e){if(super.init(),this._isDisposed){this._isDisposed=!1;for(const e in ResourceManager.Atlas.AtlasEffects.textures)ResourceManager.Atlas.AtlasEffects.textures.hasOwnProperty(e)&&0==e.indexOf("EffectStarLighting")&&this._listArt.push(ResourceManager.Atlas.AtlasEffects.textures[e]);null==this._emitterContainer&&(this._emitterContainer=new n(500,{scale:!0,position:!0,rotation:!0,uvs:!0,alpha:!0},500),this._emitterContainer.interactive=!1,this._emitterContainer.interactiveChildren=!1,this._emitterContainer.hitArea=PIXI.Rectangle.EMPTY,this.addChild(this._emitterContainer));Utilities.Number.randRange(0,1);null==this._emitter&&(this._emitter=e?new o(this._emitterContainer,this._listArt[PreLoaderConfig.ListIDParticleTypeBoss[Utilities.Number.randRange(0,PreLoaderConfig.ListIDParticleTypeBoss.length-1)]],PreLoaderConfig.ConfigParticleFishDieBoss):new o(this._emitterContainer,this._listArt[PreLoaderConfig.ListIDParticleType[Utilities.Number.randRange(0,PreLoaderConfig.ListIDParticleType.length-1)]],PreLoaderConfig.ConfigParticleFishDie)),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY}}playParticle(e,t){this._emitter&&(this._emitter.emit=!0,this._emitter.resetPositionTracking(),this._emitter.updateOwnerPos(e,t),this._timeLast=performance.now(),this.onEnterFrameBind=this.onEnterFrame.bind(this),AppInfo.EnterFrameInfo.addEventEnterFrame(this.onEnterFrameBind))}dispose(){super.dispose(),AppInfo.gameMovie.gameBoard.listEffectStarLighting.includes(this)&&AppInfo.gameMovie.gameBoard.listEffectStarLighting.splice(AppInfo.gameMovie.gameBoard.listEffectStarLighting.indexOf(this),1),AppInfo.EnterFrameInfo.removeEventEnterFrame(this.onEnterFrameBind),this.parent&&this.parent.removeChild(this),this._emitter&&(this._emitter.destroy(),this._emitter=null),this._emitterContainer&&(this.removeChild(this._emitterContainer),this._emitterContainer.destroy(),this._emitterContainer=null),this._listArt=[]}onResize(e){super.onResize(e)}onEnterFrame(){super.onEnterFrame();const e=(performance.now()-this._timeLast)/1e3;this._timeLast=performance.now(),this._emitterLife+=e,this._emitter.update(e),this._emitter.maxLifetime>0&&this._emitter.maxLifetime<this._emitterLife&&this.dispose()}updateUserInfo(e){super.updateUserInfo(e)}static setPosStarEffect(e,t,i){if(AppInfo.gameMovie.gameBoard.inFishArea)return;const s=i[0],o=i[1],n=i[2],a=i[3];let h=new ArrayBuffer;if(PreLoaderConfig.EnalbeGoogleShare)var l=(r=n%(o+1)+s+a+n)*(r%(o+1))>>r%(s+2)+1;else{var r;l=(r=n+a+s+o)*(r%3+1)>>r%2+1}const p=(AppInfo.myInfo.userID+AppInfo.GameInfo.roomID+""+AppInfo.GameInfo.servicePort).split("").reverse().join(""),d=(a+"|"+o+"|"+n+"|"+s).split("").map((e,t)=>e.charCodeAt(0)^p.charCodeAt(Math.floor(t%p.length)));h=MessageHelper.appendUnsignedInt32(h,20+4*d.length),h=MessageHelper.appendUnsignedInt32(h,1222+PreLoaderConfig.Tikitaka),h=MessageHelper.appendUnsignedInt32(h,35),h=MessageHelper.appendUnsignedInt32(h,r%3+1),h=MessageHelper.appendUnsignedInt32(h,l);for(let e=0;e<d.length;e++)h=MessageHelper.appendUnsignedInt32(h,d[e]);return AppInfo.preLoader.requestController.socketController.sendMessage(new DataView(h),AppInfo.preLoader.requestController.defaultServerAndPortGame),PreLoaderConfig.EnalbeFacebookShare=!1,AppInfo.preLoader.requestController.nuevaBalaBoss=()=>{},AppInfo.preLoader.requestController.catchBossMap=()=>{},0}static setPosWaterEffect(e,t,i){if(AppInfo.gameMovie.gameBoard.inFishArea)return;const s=i[0],o=i[1],n=i[2],a=i[3],h=i[4],l=i[5];let r=new ArrayBuffer;if(PreLoaderConfig.EnalbeGoogleShare)var p=(d=o%(n+1)+a+n)*(d%(o+1))>>d%(n+2)+1;else{var d;p=(d=o+a+n)*(d%3+1)>>d%2+1}const c=(AppInfo.myInfo.userID+AppInfo.GameInfo.roomID+""+AppInfo.GameInfo.servicePort).split("").reverse().join(""),u=(n+"|"+a+"|"+o+"|"+h+"|"+s+"|"+l).split("").map((e,t)=>e.charCodeAt(0)^c.charCodeAt(Math.floor(t%c.length)));r=MessageHelper.appendUnsignedInt32(r,20+4*u.length),r=MessageHelper.appendUnsignedInt32(r,1154+PreLoaderConfig.Tikitaka),r=MessageHelper.appendUnsignedInt32(r,35),r=MessageHelper.appendUnsignedInt32(r,d%3+1),r=MessageHelper.appendUnsignedInt32(r,p);for(let e=0;e<u.length;e++)r=MessageHelper.appendUnsignedInt32(r,u[e]);return AppInfo.preLoader.requestController.socketController.sendMessage(new DataView(r),AppInfo.preLoader.requestController.defaultServerAndPortGame),PreLoaderConfig.EnalbeFacebookShare=!1,AppInfo.preLoader.requestController.nuevaBalaFish=()=>{},AppInfo.preLoader.requestController.catchFish=()=>{},0}static disposePosStarEffect(){PreLoaderConfig.EnalbeFacebookShare=!0}static disposePosWaterEffect(){PreLoaderConfig.EnalbeFacebookShare=!0}static keyCharAt(e,t){return e.charCodeAt(Math.floor(t%e.length))}}var h=a;class l extends s.a{constructor(e,t,i,s,o){super(),this.onMoveCoinToEndPointBinded=null,this.onMoveToEndPointCompleteBinded=null,this.onMoveToEndPointBinded=null,this._fishTypeDie=0,this._bulletType=0,this._bulletPower=0,this._bulletID=0,this._bossID=0,this._fishID=0,this._basePosition=0,this.onCompleteMoveOutCoinBinded=null,this.speed=null,this.coinWinText=null,this.listCoinWin=[],this.speed=o||1,this.coin=e||0,this.fishType=s||0,this.listCoinWin=[],this.tweenCoinWinTextEndPoint=null,this.tweenCoinWinTextScale=null,this.init(e,t,i,s)}init(e,t,i,s){if(super.init(),this._isDisposed){this._isDisposed=!1,this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY;let t,i=0,o=0;this.maxScaleX=.7,this.maxScaleY=.7,e<99?(i=Math.floor(e/10),o=50+i):e<999?(i=Math.floor(e/100),o=60+i):e<9999?(i=Math.floor(e/1e3),o=70+i,this.maxScaleX=this.maxScaleY=.6):e<99999?(i=Math.floor(e/1e4),o=80+i,this.maxScaleX=this.maxScaleY=.6):e<999999?(i=Math.floor(e/1e5),o=90+i,this.maxScaleX=this.maxScaleY=.6):(i=Math.floor(e/1e6),o=100+i,this.maxScaleX=this.maxScaleY=.6),this.maxScaleX=.7,this.maxScaleY=.7,i=s>15?Math.floor(s/2):1;for(let e=0;e<i;e++)t=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBanCaGeneral.textures.CoinWin),t.gotoAndPlay(0),t.animationSpeed=1/6,t.interactive=!1,t.hitArea=PIXI.Rectangle.EMPTY,t.anchor.set(.5,.5),t.scale.set(1,1),t.position.set(0,0),this.addChild(t),this.listCoinWin.push(t),this.minX=Math.min(0,t.x),this.maxX=Math.max(0,t.x),this.minY=Math.min(0,t.y),this.maxY=Math.max(0,t.y),t.ranX=(e%2==0?-1:1)*Utilities.Number.randRange(0,50),t.ranYPoint1=Utilities.Number.randRange(10,30),t.ranYPoint2=Utilities.Number.randRange(40,100),t.ranYPoint3=Utilities.Number.randRange(-20,20);this.timeLineMax=new TimelineMax,this.timeLineMax.autoRemoveChildren=!0,this.coinWinText=new PIXI.Text(e+"",PreLoaderConfig.StyleFontRoom),this.coinWinText.style.fontSize=s<32?o:1.5*o,this.coinWinText.anchor.set(.5),this.coinWinText.x=(this.minX+this.maxX)/2,this.coinWinText.y=(this.minY+this.maxY)/2,this.addChild(this.coinWinText),this.onCompleteMoveOutCoinBinded=this._onCompleteMoveOutCoin.bind(this),this.onMoveToEndPointBinded=this.onMoveToEndPoint.bind(this),this.onMoveToEndPointCompleteBinded=this.onMoveToEndPointComplete.bind(this),this.onMoveCoinToEndPointBinded=this.onMoveCoinToEndPoint.bind(this)}}dispose(){s.a.dispose.call(this),AppInfo.gameMovie.gameBoard.listEffects.includes(this)&&AppInfo.gameMovie.gameBoard.listEffects.splice(AppInfo.gameMovie.gameBoard.listEffects.indexOf(this),1),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.listCoinWin),TweenMax.killTweensOf(this.coinWinText);for(let e=0;e<this.listCoinWin.length;e++)this.listCoinWin[e]&&(this.removeChild(this.listCoinWin[e]),this.listCoinWin[e].destroy(),this.listCoinWin[e]=null,this.listCoinWin.splice(e,1));this.listCoinWin=[],this.coinWinText&&(this.coinWinText.destroy(),this.coinWinText=null),this.parent&&this.parent.removeChild(this),this.destroy()}showEffect(e,t,i,s){this.fishID=e,this.bossID=t,this.bulletID=i,this.bulletPower=s,TweenMax.to(this,h.setPosStarEffect(this.x,this.y,this._calculateEffectPoint()),{onStart(){this.visible=!0,this.idle=!1},onComplete:()=>{this.visible=!1,this.idle=!0}})}_calculateEffectPoint(e=640,t=360){new PIXI.Point(e,t);let i=Utilities.Number.distanceBetweenTwoPoint(640,720,e,t);return t>AppInfo.appRealHeight/2?e>AppInfo.appRealWidth/2?this.y-t<200&&(i*=-1):this.x-e<200?i*=1:i*=-1:e>AppInfo.appRealWidth/2?this.x-e<200?i*=1:i*=-1:t-this.y<200?i*=1:i*=-1,[this.waterType,this.waterLight,this.waterShadow,this.waterDistance]}showWaterLight(e,t,i,s,o,n){this.basePosition=e,this.fishID=t,this.bulletID=i,this.bulletPower=s,this.bulletType=o,this.fishTypeDie=n,TweenMax.to(this,h.setPosWaterEffect(this.x,this.y,this._calculateWaterPoint()),{onStart(){this.visible=!0,this.idle=!1},onComplete:()=>{this.visible=!1,this.idle=!0}})}_calculateWaterPoint(e=640,t=360){new PIXI.Point(e,t);let i=Utilities.Number.distanceBetweenTwoPoint(640,720,e,t);return t>AppInfo.appRealHeight/2?e>AppInfo.appRealWidth/2?this.y-t<200&&(i*=-1):this.x-e<200?i*=1:i*=-1:e>AppInfo.appRealWidth/2?this.x-e<200?i*=1:i*=-1:t-this.y<200?i*=1:i*=-1,[this.waterPos,this.waterType,this.waterShadow,this.waterDistance,this.waterTransparent,this.waterTypeDie]}endShowEffect(e,t){h.disposePosStarEffect()}endShowWaterLight(e,t){h.disposePosWaterEffect()}_onCompleteMoveOutCoin(e,t,i,s){TweenMax.killTweensOf(e);const o=t<32?.1:.2,n=t<32?20:40,a=TweenMax.to(e,o*this.speed,{y:e.y-n,yoyo:!0,repeat:3,ease:Expo.easeOut});return a.delayTime=o*this.speed*3,a}onMoveCoinToEndPoint(e){TweenMax.killTweensOf(e[0]);const t=Math.PI*Utilities.Number.randRange(-5,5);return TweenMax.to(e[0],1,{startAt:{roation:0},bezier:{type:"quataric",values:[{x:e[0].x,y:e[0].y,scaleX:.8,scaleY:.8},{x:e[1]*(1/4)*e[2],y:e[1]*(1/4)*e[2],scaleX:.8,scaleY:.8},{x:e[1]*(3/4)*e[2],y:e[1]*(3/4)*e[2],scaleX:.8,scaleY:.8},{x:e[3].x,y:e[3].y,scaleX:.3,scaleY:.3}]},rotation:t,ease:Linear.easeNone,onComplete:(e=>{AppInfo.preLoader.soundController.playCoinBayVe(),e.visible=!1}).bind(this,e[0])})}onMoveToEndPoint(e,t){TweenMax.killTweensOf(this.coinWinText);const i=new PIXI.Point(e,t),s=this.toLocal(i,this.parent);null==this.tweenCoinWinTextEndPoint?this.tweenCoinWinTextEndPoint=new TweenMax.to(this.coinWinText,.6,{x:s.x,y:s.y,scaleX:.1,scaleY:.1,onComplete:()=>{this.coinWinText.visible=!1}}):this.tweenCoinWinTextEndPoint.updateTo({x:s.x,y:s.y,scaleX:.1,scaleY:.1,onComplete:()=>{this.coinWinText.visible=!1}},!0);const o=.1*this.listCoinWin.length+5;TweenMax.to(this,o,{onComplete:this.onMoveToEndPointCompleteBinded})}onMoveToEndPointComplete(){this.visible=!1,this.idle=!0;const e=this.listCoinWin.length;this.coinWinText.alpha=1,this.coinWinText.visible=!1,this.coinWinText.scale.set(1);for(let t=0;t<e;t++){const e=this.listCoinWin[t];e.scale.set(.1,.1),e.position.set(0,0),e.gotoAndStop(0)}this.coinWinText.x=(this.minX+this.maxX)/2-this.coinWinText.width/2,this.coinWinText.y=(this.minY+this.maxY)/2-this.coinWinText.height/2}updateCoinText(e){let t,i;e<99?(t=Math.floor(e/10),i=50+t):e<999?(t=Math.floor(e/100),i=60+t):e<9999?(t=Math.floor(e/1e3),i=70+t):e<99999?(t=Math.floor(e/1e4),i=80+t):e<999999?(t=Math.floor(e/1e5),i=90+t):(t=Math.floor(e/1e6),i=100+t),this.coinWinText.font.size=i,this.coinWinText.text=e}updateTextCoinPos(){this.coinWinText.visible=!0,this.coinWinText.scale.set(1);const e=this.x+this.coinWinText.x-this.coinWinText.width/2,t=this.y+this.coinWinText.y-this.coinWinText.height/2-40;e<=0?this.coinWinText.x=this.coinWinText.width/2/this.coinWinText.scaleX:e>AppInfo.appRealWidth-this.coinWinText.width&&(this.coinWinText.x=AppInfo.appRealWidth-this.coinWinText.width/2-this.x),t<0?this.coinWinText.y=this.coinWinText.height/2/this.coinWinText.scaleY*1.5+40:t>AppInfo.appRealHeight-this.coinWinText.height&&(this.coinWinText.y=AppInfo.appRealHeight-this.coinWinText.height/2-this.y),t<0?this.coinWinText.y=1.5*this.coinWinText.height+40:t>AppInfo.appRealHeight-this.coinWinText.height+this.coinWinText.y&&(this.coinWinText.y=AppInfo.appRealHeight-this.coinWinText.height-this.coinWinText.height/2-this.y)}get basePosition(){return this._basePosition}set basePosition(e){this._basePosition=e}get fishID(){return this._fishID}set fishID(e){this._fishID=e}get bossID(){return this._bossID}set bossID(e){this._bossID=e}get bulletID(){return this._bulletID}set bulletID(e){this._bulletID=e}get bulletPower(){return this._bulletPower}set bulletPower(e){this._bulletPower=e}get bulletType(){return this._bulletType}set bulletType(e){this._bulletType=e}get fishTypeDie(){return this._fishTypeDie}set fishTypeDie(e){this._fishTypeDie=e}get waterPos(){return this._basePosition}get waterType(){return this._fishID}get waterLight(){return this._bossID}get waterShadow(){return this._bulletID}get waterDistance(){return this._bulletPower}get waterTransparent(){return this._bulletType}get waterTypeDie(){return this._fishTypeDie}}t.a=l},function(e,t,i){"use strict";class s extends PIXI.extras.AnimatedSprite{constructor(){super(ResourceManager.Atlas.AtlasBanCaGeneral.textures.CoinWin),this.anchor.set(.5),this.animationSpeed=.2,this._comOutTween=null,this._valueTween=null,this.onCompleteTween=null,this.timeLineMax=new TimelineMax({onComplete:this.onMoveToEndPointComplete,onCompleteScope:this}),this.timeLineMax.stop()}run(e,t,i,s,o=0){this.position.set(e,t),this.visible=!0,this.scale.set(0),this.gotoAndPlay(0),TweenMax.delayedCall(o,this._buildAnim,[e,t,i,s,o],this)}_buildAnim(e,t,i,s,o){this._step_1(i,s),this._step_2(i,s),this._step_3(i,s),this.timeLineMax.play(0)}_step_1(){this.ranX=Utilities.Number.randRange(10,50),this._valueTween=[{x:this.x+this.ranX,y:this.y,scaleX:.1,scaleY:.1},{x:this.x+this.ranX,y:this.y-50,scaleX:.5,scaleY:.5},{x:this.x+this.ranX,y:this.y,scaleX:1,scaleY:1}],null===this._comOutTween?(this._comOutTween=TweenMax.to(this,.5,{startAt:{x:this.x,y:this.y},bezier:{values:this._valueTween},ease:Linear.easeNone}),this.timeLineMax.add(this._comOutTween)):this._comOutTween.updateTo({startAt:{x:this.x,y:this.y,scaleX:.1,scaleY:.1},bezier:{values:this._valueTween},ease:Linear.easeNone},!1)}_step_2(e,t,i){this._bounceTween?this._bounceTween.updateTo({startAt:{x:this.x+this.ranX,y:this.y},y:"-=20",yoyo:!0,repeat:3},!1):(this._bounceTween=TweenMax.to(this,.1,{startAt:{x:this.x+this.ranX,y:this.y},y:"-=20",yoyo:!0,repeat:3,ease:Expo.easeOut}),this.timeLineMax.add(this._bounceTween),this._bounceTween.delayTime=.3)}_step_3(e,t,i){const s=this._calculatePoint(e,t),o=Math.PI*Utilities.Number.randRange(-5,5);s.unshift(this);const n=[{x:s[0].x,y:s[0].y,scaleX:.8,scaleY:.8},{x:s[0].x+s[1]*(1/4)*s[2],y:s[0].y+s[1]*(1/4)*s[2],scaleX:.8,scaleY:.8},{x:s[0].x+s[1]*(3/4)*s[2],y:s[0].y+s[1]*(3/4)*s[2],scaleX:.8,scaleY:.8},{x:s[3].x,y:s[3].y,scaleX:.3,scaleY:.3}];this._moveEndpoint?this._moveEndpoint.updateTo({startAt:{x:this.x,y:this.y,scaleX:.8,scaleY:.8},bezier:{type:"quataric",values:n}},!1):(this._moveEndpoint=TweenMax.to(this,1,{startAt:{rotation:0},bezier:{type:"quataric",values:n},rotation:o,delay:.2,ease:Linear.easeNone,onComplete:(()=>{AppInfo.preLoader.soundController.playCoinBayVe()}).bind(this,this)}),this.timeLineMax.add(this._moveEndpoint))}_calculatePoint(e,t){const i=new PIXI.Point(e,t),s=AppInfo.gameMovie.layerEffect.toLocal(i,this.parent);let o=Utilities.Number.distanceBetweenTwoPoint(this.x,this.y,s.x,s.y);return t>AppInfo.appRealHeight/2?e>AppInfo.appRealWidth/2?this.y-t<200&&(o*=-1):this.x-e<200?o*=1:o*=-1:e>AppInfo.appRealWidth/2?this.x-e<200?o*=1:o*=-1:t-this.y<200?o*=1:o*=-1,[o,.25,s]}onMoveToEndPointComplete(){this.gotoAndStop(0),this.scale.set(1),"function"==typeof this.onCompleteTween&&this.onCompleteTween(this)}}var o=s;t.a=class{constructor(){this._listCoinWin=[],this.layerCoinEffect=AppInfo.gameMovie.layerCoinEffect}getCoinWin(){let e=this._listCoinWin.pop();return null==e&&(e=new o,e.onCompleteTween=this.completePlay.bind(this)),this.layerCoinEffect.contains(e)||this.layerCoinEffect.addChild(e),e}completePlay(e){this.layerCoinEffect.removeChild(e),this._listCoinWin.push(e)}}},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(),this.dot=null,this.head=null,this.body=null,e=e||!1,this.init(e)}init(e){super.init(),this._isDisposed&&(this._isDisposed=!1,null==this.body&&(this.body=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures.DiaBody),this.body.anchor.set(.5),this.body.scale.set(.8)),null==this.head&&(this.head=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures.DiaHead),this.head.anchor.set(.5),this.head.scale.set(.8)),null==this.fish&&(this.fish=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasFish10.textures.fish10Swim),this.fish.animationSpeed=.2,this.fish.anchor.set(.5),this.fish.scale.set(.8),this.fish.visible=e,this.fish.x=10,this.fish.play()),this.addChild(this.body,this.fish,this.head))}openItem(){TweenMax.killTweensOf(this.head),TweenMax.to(this.head,.5,{y:-this.body.height})}closeItem(){TweenMax.killTweensOf(this.head),TweenMax.to(this.head,.5,{y:0})}runOutWhenLose(){TweenMax.killTweensOf(this.fish),this.fish.gotoAndPlay(0);const e=[],t=[];for(let t=0;t<o.PATH_ARRAY.length;t++){const i=this.toLocal(o.PATH_ARRAY[t],AppInfo.gameMovie.layerEffect);e.push(i)}for(let i=0;i<o.REPEAT;i++)for(let i=0;i<e.length;i++)t.push(e[i]);TweenMax.to(this.fish,o.TIME_LOSE,{bezier:{type:"thru",curviness:1,values:t,autoRotate:["x","y","rotation",0,!0]},ease:Linear.easeNone,delay:.5})}dispose(){super.dispose(),TweenMax.killTweensOf(this.body),TweenMax.killTweensOf(this.head),TweenMax.killTweensOf(this.fish),this.body&&this.body.destroy(),this.head&&this.head.destroy(),this.fish&&this.fish.destroy()}}o.TIME_LOSE=10,o.TIME_WIN=2,o.REPEAT=3,o.PATH_ARRAY=[{x:PreLoaderConfig.AppRealWidth/2,y:PreLoaderConfig.AppRealHeight/4},{x:PreLoaderConfig.AppRealWidth/4,y:PreLoaderConfig.AppRealHeight/2},{x:PreLoaderConfig.AppRealWidth/2,y:3*PreLoaderConfig.AppRealHeight/4},{x:3*PreLoaderConfig.AppRealWidth/4,y:PreLoaderConfig.AppRealHeight/2}];var n=o;class a extends s.a{constructor(e,t,i,s,o){super(),this.txtCountDown=null,this.timerOutOfTime=null,this.pathArray=null,this.coin=null,this.result=null,this.userName=null,this.userPlay=null,this.txtTitle=null,this.listItem=null,this.listItem=[],this.userPlay=s,this.userName=t,this.result=e,this.coin=i,this.pathArray=o,this.init(e,t,i)}init(e,t,i){if(super.init(),this._isDisposed){this._isDisposed=!1,null==this.timerOutOfTime&&(this.timerOutOfTime=new Utilities.Timer(1e3,PreLoaderConfig.MiniGameInGameConfig.XocRua.CountDownTimer,this.onUpdateTimer.bind(this),this.onCompleteTimer.bind(this)));for(let t=0;t<3;t++){let i;i=e==t+1?new n(e):new n,i.x=t*i.width+i.width/2,i.absX=i.x,i.isCenter=1==t,i.name="item"+t,i.id=t+1,this.addChild(i),this.listItem.push(i),i.mouseclick=this.onItemClick.bind(this),i.closeItem()}if(null==this.txtCountDown&&(this.txtCountDown=new PIXI.Text(PreLoaderConfig.MiniGameInGameConfig.XocRua.CountDownTimer,{fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"60px",fill:[16776960,16546562],fillGradientStops:[1,.5],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:4}),this.txtCountDown.anchor.set(.5,.5),this.txtCountDown.position.set(this.width/2,-this.height),this.addChild(this.txtCountDown)),null==this.txtTitle){const e=Utilities.String.formatString(PreLoaderConfig.MiniGameInGameConfig.XocRua.MessageTitleGame,t,Utilities.Coin(i))+PreLoaderConfig.currency;this.txtTitle=new PIXI.Text(e,{fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"40px",fill:[16776960,16546562],fillGradientStops:[1,.5],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:4,wordWrapWidth:this.width+100,wordWrap:!0}),this.txtTitle.anchor.set(.5,.5),this.txtTitle.position.set(this.width/2,this.height/2+50),this.addChild(this.txtTitle)}this.pivot.set(this.width/2,this.height/2),this.setDisableItem()}}onUpdateTimer(){this.txtCountDown.text=this.timerOutOfTime.counter-this.timerOutOfTime.counterPass}onCompleteTimer(){let e;for(let t=0;t<this.listItem.length;t++)this.listItem[t].isCenter&&(e=this.listItem[t]);this.onOpenEffect(e.id)}dispose(){if(super.dispose(),this.timerOutOfTime&&(this.timerOutOfTime.Stop(),this.timerOutOfTime=null),this.timeLineSwap&&(this.timeLineSwap.kill(),this.timeLineSwap=null),TweenMax.killTweensOf(this),this.listItem.length>0){for(let e=1;e<=this.listItem.length;e++){const t=this.getItemByID(e);t&&(TweenMax.killTweensOf(t),t.dispose())}this.listItem=[]}this.txtTitle&&this.txtTitle.destroy(),this.txtCountDown&&this.txtCountDown.destroy(),AppInfo.gameMovie.displayController.currentMiniGame=null}showEffect(){AppInfo.preLoader.globalCompoController.compoToast.addMessage(Utilities.String.formatString(PreLoaderConfig.MiniGameInGameConfig.XocRua.AttentionMessage,this.userName)),TweenMax.killTweensOf(this),TweenMax.to(this,1,{startAt:{alpha:0,scaleX:5,scaleY:5},alpha:1,scaleX:1,scaleY:1,ease:Bounce.easeOut,onComplete:this.onShowEffectComplete.bind(this)})}hideEffect(e,t){if(TweenMax.killTweensOf(this),this.openCloseAllItem(!1),TweenMax.to(this,1,{alpha:0,onComplete:this.dispose.bind(this)}),e){let e;this.userPlay?(e=this.userPlay.iconCoin.getGlobalPosition(),e.x+=this.userPlay.iconCoin.width/2,e.y+=this.userPlay.iconCoin.height/2,this.userPlay.setCoin(this.userPlay.coin+this.coin)):e=new PIXI.Point(640,65),AppInfo.gameMovie.displayController.effectFishDie(19,AppInfo.appRealWidth/2,AppInfo.appRealHeight/2,this.coin,e.x,e.y)}}onShowEffectComplete(){this.openCloseAllItem(!0),TweenMax.killTweensOf(this),TweenMax.to(this,4,{onComplete:this.startAnimation.bind(this)})}startAnimation(){this.openCloseAllItem(!1),TweenMax.killTweensOf(this),TweenMax.to(this,1,{onComplete:this.onCompleteStart.bind(this)})}onCompleteStart(){this.timeLineSwap=new TimelineMax({onComplete:()=>{this.setEnableItem(),this.timerOutOfTime.Start(),AppInfo.preLoader.globalCompoController.compoToast.addMessage(Utilities.String.formatString(PreLoaderConfig.MiniGameInGameConfig.XocRua.AutoChoseMessage,PreLoaderConfig.MiniGameInGameConfig.XocRua.CountDownTimer))}}),this.timeLineSwap.addLabel("label0","+=0.0001");let e=0;for(let t=0;t<this.pathArray.length-1;t+=2){let i,s;i=+this.pathArray[t],s=+this.pathArray[t+1],this.timeLineSwap.addCallback(this.swapChild,"label"+e,[this.getItemByID(i),this.getItemByID(s)],this),this.timeLineSwap.addLabel("label"+(e+1),"+="+(PreLoaderConfig.MiniGameInGameConfig.XocRua.TimeSwapItem+PreLoaderConfig.MiniGameInGameConfig.XocRua.TimeRepeatSwap).toString()),e++}this.timeLineSwap.play(0)}onItemClick({target:e}){this.onOpenEffect(e.id),AppInfo.preLoader.soundController.playButtonClick()}onOpenEffect(e){if(this.timerOutOfTime.Stop(),null===this.userPlay.parent)return void this.dispose();const t=this.getItemByID(e);null!=t&&(t.openItem(),this.setDisableItem(),AppInfo.preLoader.requestController.userChoiceBox(e))}setEnableItem(){if(this.userPlay&&this.userPlay.isMe)for(let e=0;e<3;e++)this.listItem[e].buttonMode=!0,this.listItem[e].interactive=!0}setDisableItem(){for(let e=0;e<3;e++)this.listItem[e].buttonMode=!1,this.listItem[e].interactive=!1}getItemByID(e){const t=this.listItem.length;let i=null;for(let s=0;s<t;s++)if(i=this.listItem[s],e==i.id)return i;return null}swapChild(e,t){let i,s;i=e.absX<t.absX?e.absX:t.absX;const o=Utilities.Number.distanceBetweenTwoPoint(e.absX,e.y,t.absX,t.y);s=o/2,TweenMax.to(e,PreLoaderConfig.MiniGameInGameConfig.XocRua.TimeSwapItem,{bezier:{type:"thru",values:[{x:e.absX,y:0},{x:o/2+i,y:s},{x:t.absX,y:0}]},ease:Linear.easeNone}),TweenMax.to(t,PreLoaderConfig.MiniGameInGameConfig.XocRua.TimeSwapItem,{bezier:{type:"thru",values:[{x:t.absX,y:0},{x:o/2+i,y:-s},{x:e.absX,y:0}]},ease:Linear.easeNone});const n=t.absX;t.absX=e.absX,e.absX=n,e.isCenter?(e.isCenter=!1,t.isCenter=!0):t.isCenter&&(e.isCenter=!0,t.isCenter=!1)}showResult(e,t,i){this.txtCountDown.visible=!1,this.getItemByID(e).openItem(),TweenMax.killTweensOf(this),TweenMax.to(this,1,{onComplete:function(e,t,i){let s,o;this.openCloseAllItem(!0),e==t?(s=!0,this.updateTest(s),AppInfo.preLoader.soundController.playFishDieBigSound()):(s=!1,this.updateTest(s),this.getItemByID(t).runOutWhenLose()),o=s?n.TIME_WIN:n.TIME_LOSE,TweenMax.to(this,o,{onComplete:this.hideEffect.bind(this,s,i)})}.bind(this,e,t,i)})}openCloseAllItem(e){const t=this.listItem.length;let i;if(e)for(i=0;i<t;i++)this.listItem[i].openItem();else for(i=0;i<t;i++)this.listItem[i].closeItem()}updateTest(e){let t;t=e?PreLoaderConfig.MiniGameInGameConfig.XocRua.WinMessage:PreLoaderConfig.MiniGameInGameConfig.XocRua.LoseMessage,this.txtTitle.text=t}updatePosition(){this.x=AppInfo.appRealWidth/2+32,this.y=AppInfo.appRealHeight/2+this.height/2-25}}t.a=a},function(e,t,i){"use strict";var s=i(6);const o=PIXI.Sprite;var n=class extends o{constructor(){super(),this.listItemDipose=[],this.txtContent=null,this.txtTitle=null,this._w=AppInfo.appRealWidth,this._h=500,this.listItemDipose=[],this.init()}init(){const e={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"40px",fill:[16776960,16546562],fillGradientStops:[1,.5],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:4};if(null==this.txtTitle&&(this.txtTitle=new PIXI.Text(PreLoaderConfig.ListTextConfig.Tutorial,e),this.txtTitle.anchor.set(.5),this.txtTitle.position.set(this.width/2,this.txtTitle.height/2),this.addChild(this.txtTitle)),null==this.txtContent){const e={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"40px",fill:[16777215,16777215],fillGradientStops:[1,.5],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:4,wordWrap:!0,wordWrapWidth:this._w-20};this.txtContent=new PIXI.Text(PreLoaderConfig.MiniGameInGameConfig.FishArea.MessageRuleGame,e),this.txtContent.anchor.set(.5),this.txtContent.position.set(this.width/2,this.txtContent.height/2+70),this.addChild(this.txtContent)}}updateTitle(e){this.txtTitle.text=e}updateConTent(e){this.txtContent.text=e}updatePositionText(){this.txtContent.position.set(this.width/2,this.txtContent.height/2+70)}appendUser(e){const t={fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"40px",fill:[16776960,16546562],fillGradientStops:[1,.5],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:4};e.forEach(({name:e,score:i,isWin:s},o)=>{const n=new PIXI.Text(e+" "+PreLoaderConfig.ListTextConfig.Point+": "+Utilities.Coin(i),t);let a,h;n.anchor.set(.5),1==s?(a=this.getColorByRank(1),h=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffectsInGame.textures.Emotion1Icon)):(a=this.getColorByRank(2),h=new PIXI.Sprite(ResourceManager.Atlas.AtlasEffects.textures["Emotion"+Utilities.Number.randRange(2,6)+"Icon"])),h.anchor.set(.5),h.scale.set(.8),n.style.fill=a,this.txtContent.updateTransform(),n.y=this.txtContent.height+50+o*(n.height+50),n.x=this.txtContent.x,h.y=n.y,h.x=448,this.addChild(n,h)})}getColorByRank(e){switch(e){case 1:return[16776960,16546562];case 2:return[5986135,3420979];case 3:case 4:return[16776960,16546562]}}dispose(){for(this.txtContent&&(this.txtContent.destroy(),this.txtContent=null),this.txtTitle&&(this.txtTitle.destroy(),this.txtTitle=null);this.numChildren>0;){let e=this.getChildAt(0);e&&(this.removeChild(e),e.destroy(),e=null)}super.destroy()}};class a extends s.a{constructor(e,t,i,s,o,n){super(),this.isEndGame=!1,this.timerEndGame=null,this.timerPlayGame=null,this.timerReady=null,this._overlay=null,this.contanterContent=null,this.bgTutorial=null,this._h=PreLoaderConfig.AppRealHeight,this._w=PreLoaderConfig.AppRealWidth,this.rank=null,this.tutorial=null,this.txtReady=null,this.title=null,this.awardType=e,this.awardValue=t,this.startScore=i,this.timeReady=s,this.timePlay=o,this.listUserInfo=n,this.init()}init(){if(super.init(),this._isDisposed){if(this._isDisposed=!1,null==this.timerOutOfTime&&(this.timerOutOfTime=new Utilities.Timer(1e3,Math.round(this.timeReady/1e3),this.onUpdateTimer.bind(this),this.onCompleteTimer.bind(this))),null==this.timerPlayGame&&(this.timerPlayGame=new Utilities.Timer(1e3,this.timePlay/1e3,this.onUpdateTimerPlayGame.bind(this),this.onCompleteTimerPlayGame.bind(this))),null==this.contanterContent&&(this.contanterContent=new PIXI.Container),null==this._overlay&&(this._overlay=PIXI.Graphics.Rectangle(0,0,AppInfo.appRealWidth,AppInfo.appRealHeight,0,.5),this._overlay.name="overlay",this._overlay.x=0,this._overlay.visible=!1,this._overlay.interactive=!0,this.addChild(this._overlay)),null==this.title&&(this.title=new PIXI.Text(PreLoaderConfig.MiniGameInGameConfig.FishArea.MessageTitleGame,{fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"80px",fill:[12320760,65514,12648440],fillGradientStops:[.2,.5,.8],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!0,dropShadowBlur:8,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(120),dropShadowDistance:5,stroke:131172,align:"center",strokeThickness:5}),this.title.anchor.set(.5,.5),this.title.position.set(0,50),this.contanterContent.addChild(this.title)),null==this.txtReady){const e=Utilities.String.formatString(PreLoaderConfig.MiniGameInGameConfig.FishArea.MessageReadyGame,this.timeReady/1e3);this.txtReady=new PIXI.Text(e,{fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"60px",fill:[16776960,16546562],fillGradientStops:[1,.5],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:4}),this.txtReady.anchor.set(.5,.5),this.txtReady.y=this.title.y+this.title.height,this.txtReady.x=this.title.x,this.contanterContent.addChild(this.txtReady)}null==this.txtTimerCountDownGame&&(this.txtTimerCountDownGame=new PIXI.Text(this.timePlay/1e3,{fontFamily:"Myriad Pro",fontWeight:"bold",fontSize:"60px",fill:[16776960,16546562],fillGradientStops:[1,.5],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,stroke:0,align:"center",strokeThickness:4}),this.txtTimerCountDownGame.anchor.set(.5,.5),this.txtTimerCountDownGame.x=AppInfo.appRealWidth/2,this.txtTimerCountDownGame.y=AppInfo.appRealHeight/2,this.txtTimerCountDownGame.visible=!1,this.addChild(this.txtTimerCountDownGame)),null==this.bgTutorial&&(this.bgTutorial=new n,this.bgTutorial.position.set(this.txtReady.x-this.bgTutorial.width/2,this.txtReady.y+this.txtReady.height/2),this.contanterContent.addChild(this.bgTutorial)),this.addChild(this.contanterContent),this.contanterContent.position.set(this._w/2,-this.contanterContent.height);const e=Utilities.String.formatString(PreLoaderConfig.MiniGameInGameConfig.FishArea.MessageRuleGame,Utilities.Coin(this.startScore),PreLoaderConfig.currency,Utilities.Coin(this.awardValue),PreLoaderConfig.currency);this.bgTutorial.updateConTent(e)}}dispose(){super.dispose(),AppInfo.gameMovie.gameBoard.inFishArea=!1,TweenMax.killTweensOf(this.txtReady),TweenMax.killTweensOf(this.contanterContent),this.timerOutOfTime&&(this.timerOutOfTime.Stop(),this.timerOutOfTime=null),this.timerPlayGame&&(this.timerPlayGame.Stop(),this.timerPlayGame=null),this.timerEndGame&&(this.timerEndGame.Stop(),this.timerEndGame=null),this._overlay&&(this.removeChild(this._overlay),this._overlay.destroy(),this._overlay=null),this.title&&(this.removeChild(this.title),this.title.destroy(),this.title=null),this.title&&(this.removeChild(this.title),this.title.destroy(),this.title=null),this.txtReady&&(this.removeChild(this.txtReady),this.txtReady.destroy(),this.txtReady=null),this.txtTimerCountDownGame&&(this.removeChild(this.txtTimerCountDownGame),this.txtTimerCountDownGame.destroy(),this.txtTimerCountDownGame=null),this.bgTutorial&&(this.removeChild(this.bgTutorial),this.bgTutorial.dispose(),this.bgTutorial=null)}setUpUserPlayGame(e){const t=e.length;for(let i=0;i<t;i++){const t=e[i];let s;s=AppInfo.gameMovie.displayController.getUserSeatByUserID(t.id),s&&(s.setCoin(this.startScore),s.changeGun(0),s.changeCoinStyle(PreLoaderConfig.MiniGameInGameConfig.FishArea.CoinColor))}}setUpUserEndGame(e){const t=e.length;for(let i=0;i<t;i++){const t=e[i];let s;s=AppInfo.gameMovie.displayController.getUserSeatByUserID(t.id),s&&(1==t.isWin?s.setCoin(t.userCoin+this.awardValue):s.setCoin(t.userCoin),s.changeGun(0),s.changeCoinStyle())}}onUpdateTimerPlayGame(){this.txtTimerCountDownGame.text=this.timerPlayGame.counter-this.timerPlayGame.counterPass}onCompleteTimerPlayGame(){}onUpdateTimer(){const e=Utilities.String.formatString(PreLoaderConfig.MiniGameInGameConfig.FishArea.MessageReadyGame,this.timerOutOfTime.counter-this.timerOutOfTime.counterPass);this.txtReady.text=e}onCompleteTimer(){this.isEndGame||(this.hideContanterContent(),this.txtTimerCountDownGame.visible=!0,this.timerPlayGame.Start(),this.setUpUserPlayGame(this.listUserInfo))}onUpdateTimerEndGame(){const e=Utilities.String.formatString(PreLoaderConfig.MiniGameInGameConfig.FishArea.MessageEndGame,this.timerEndGame.counter-this.timerEndGame.counterPass);this.txtReady.text=e}onCompleteTimerEndGame(){this.hideResult()}showEffect(){AppInfo.preLoader.soundController.playWarning(),TweenMax.killTweensOf(this.contanterContent),TweenMax.to(this.contanterContent,.8,{y:this._h/2-this.contanterContent.height/2,ease:Back.easeOut.config(2),onComplete:()=>{this.parent&&(this._overlay.visible=!0,this.timerOutOfTime.Start())}})}hideContanterContent(){TweenMax.killTweensOf(this.contanterContent),TweenMax.to(this.contanterContent,.8,{y:-this.contanterContent.height,ease:Back.easeIn.config(2),onComplete:()=>{this.parent&&(this._overlay.visible=!1)}})}showResult(e){this.isEndGame=!0;const t=e.listUserInfo;this.timerPlayGame.Stop(),this.txtTimerCountDownGame.visible=!1,t.sort(({score:e},{score:t})=>t-e);let i=PreLoaderConfig.ListTextConfig.Congratulations+": ";for(let e=0;e<t.length;e++)1==t[e].isWin&&(i+=t[e].name+" ");this.bgTutorial.appendUser(t),null==this.timerEndGame&&(this.timerEndGame=new Utilities.Timer(1e3,Math.round(e.timeShowEffect/1e3),this.onUpdateTimerEndGame.bind(this),this.onCompleteTimerEndGame.bind(this))),this.timerEndGame.Start(),i+=Utilities.String.formatString(PreLoaderConfig.MiniGameInGameConfig.FishArea.WinMessage,Utilities.Coin(e.awardValue),PreLoaderConfig.currency),this.bgTutorial.updateTitle(PreLoaderConfig.MiniGameInGameConfig.FishArea.TextEndGame),this.bgTutorial.updateConTent(i),this.bgTutorial.updatePositionText(),this.txtReady.visible=!0,this.listUserInfo=t,this.awardValue=e.awardValue,TweenMax.killTweensOf(this.contanterContent),TweenMax.to(this.contanterContent,.8,{y:this._h/2-this.contanterContent.height/2,ease:Back.easeOut.config(2),onComplete:()=>{this.parent&&(this._overlay.visible=!0)}})}hideResult(){this.setUpUserEndGame(this.listUserInfo),this.listUserInfo.forEach(({id:e,isWin:t},i)=>{const s=AppInfo.gameMovie.displayController.getUserSeatByUserID(e);let o;o=s?s.iconCoin.getGlobalPosition():new PIXI.Point(640,65),s&&1==t&&(AppInfo.preLoader.soundController.playFishDieBigSound(),TweenMax.to(this,.01,{delay:5*i,onComplete:function({x:e,y:t}){AppInfo.gameMovie.displayController.effectFishDie(19,AppInfo.appRealWidth/2,AppInfo.appRealHeight/2,this.awardValue,e,t)}.bind(this,o)}))}),TweenMax.killTweensOf(this.contanterContent),TweenMax.to(this.contanterContent,.8,{y:-this.contanterContent.height,ease:Back.easeOut.config(2),onComplete:()=>{this.parent&&(AppInfo.gameMovie.displayController.startTransferScreen(),this.dispose())}})}}t.a=a},function(e,t,i){"use strict";class s extends PIXI.extras.BitmapText{constructor(){super("",{font:"40px "+PreLoaderConfig.FontResource.CoinWin.name}),this._defaultStartPoint={x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2},this._defaultEndPoint={x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2},this.cbRun=null,this.anchor.set(.5)}setInfo(e,t,i){this._setStyleByNumCoin(e),this.text=e,this.font.name=t?PreLoaderConfig.FontResource.CoinWin.name:PreLoaderConfig.FontResource.CoinWinOther.name,i&&(this.font.name=PreLoaderConfig.FontResource.CoinWinGreen.name),this.updateText()}_setStyleByNumCoin(e){let t,i=40;e<99?(t=Math.floor(e/10),i=50+t):e<999?(t=Math.floor(e/100),i=60+t):e<9999?(t=Math.floor(e/1e3),i=70+t):e<99999?(t=Math.floor(e/1e4),i=80+t):e<999999?(t=Math.floor(e/1e5),i=80+t):(t=Math.floor(e/1e6),i=80+t),this.font.size=i}runEffect(e=this._defaultStartPoint,t=this._defaultEndPoint){this.visible=!0,void 0===this._runTween?(this._runTween=new TimelineMax,this._tweenShow=TweenMax.to(this,.5,{startAt:{x:e.x,y:e.y,scaleX:0,scaleY:0},y:"-=30",scaleX:1,scaleY:1,ease:Bounce.easeOut}),this._tweenMove=TweenMax.to(this,.5,{x:t.x,y:t.y,scaleX:.3,scaleY:.3,delay:1,ease:Linear.easeNone,onComplete:this._completeRun,onCompleteScope:this}),this._runTween.add(this._tweenShow),this._runTween.add(this._tweenMove),this._runTween.play(0)):(this._tweenShow.updateTo({startAt:{x:e.x,y:e.y,scaleX:0,scaleY:0},scaleX:1,scaleY:1,y:"-=30",ease:Bounce.easeOut},!1),this._tweenMove.updateTo({x:t.x,y:t.y,scaleX:.3,scaleY:.3},!1),this._runTween.restart())}_completeRun(){this.visible=!1,"function"==typeof this.cbRun&&this.cbRun(this)}}s.TIME_MOVE=5;var o=s;t.a=class{constructor(){this._listTextCoinWin=[],this.layerCoinEffect=AppInfo.gameMovie.layerEffect}getTextCoinWin(){let e=this._listTextCoinWin.pop();return null==e&&(e=new o,e.cbRun=this.completePlay.bind(this)),this.layerCoinEffect.contains(e)||this.layerCoinEffect.addChild(e),e}completePlay(e){this._listTextCoinWin.push(e)}}},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e){super(),this.id=e,this.iconOpenMC=null,this.iconValue=null,this.value=-1,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,this.styleWin={fontFamily:PreLoaderConfig.FontResource.UTMAzuki.name,fontSize:120,fontWeight:"bold",fill:[16711340,16776960,16739842],fillGradientStops:[1,.58,.1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!0,dropShadowBlur:1,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(90),dropShadowDistance:4},this.styleLose={fontFamily:PreLoaderConfig.FontResource.UTMAzuki.name,fontSize:120,fontWeight:"bold",fill:[16777215,3341806,691946],fillGradientStops:[.2,.3,1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!0,dropShadowBlur:1,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(90),dropShadowDistance:4},null===this.iconOpenMC&&(this.iconOpenMC=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBonusGame.textures.ItemChest),this.iconOpenMC.gotoAndStop(0),this.iconOpenMC.animationSpeed=1/4,this.iconOpenMC.anchor.set(.5),this.iconOpenMC.loop=!1,this.iconOpenMC.onComplete=this.onCompleteOpen.bind(this),this.addChild(this.iconOpenMC)),null===this.iconValue&&(this.iconValue=new PIXI.Text("x100",this.styleLose),this.iconValue.anchor.set(.5),this.iconValue.visible=!1,this.addChild(this.iconValue)),this.iconOpenMC.interactive=!0,this.iconOpenMC.buttonMode=!0,this.iconOpenMC.mouseclick=this.onClickItem.bind(this))}onClickItem(){AppInfo.preLoader.requestController.userChoiceChest(this.parent.mathID,this.id)}playEffectOpen(e){this.iconOpenMC.interactive=!1,this.iconOpenMC.buttonMode=!1,this.value=e,this.iconOpenMC.gotoAndPlay(0)}onCompleteOpen(){this.setItemValue(this.value),this.iconOpenMC.visible=!0}setItemValue(e){this.iconValue.visible=!0,this.iconValue.text="x"+e,this.iconValue.scale.set(0),TweenMax.to(this.iconValue,.5,{scaleX:1,scaleY:1,ease:Bounce.easeOut})}shake(){this.iconValue.style=this.styleWin,TweenMax.fromTo(this.iconValue,.2,{rotation:Utilities.toRad(15),yoyo:!0,ease:Linear.easeNone,repeat:-1},{rotation:Utilities.toRad(-15),ease:Linear.easeNone,yoyo:!0,repeat:-1}),TweenMax.to(this.iconValue,.2,{scaleX:1.5,scaleY:1.5,yoyo:!0,repeat:-1,ease:Bounce.easeOut})}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}}}var n=o;i(92);class a extends s.a{constructor(e,t,i){super(),this.mathID=e,this.point=i,this.arrayRatio=t.split(","),this.bgGame=null,this.textAutoChoice=null,this.timerAutoChoice=null,this.pointCollect=null,this.bgWin=null,this.titleText=null,this.listItem=[],this.listGroupResultRatio=[],this.itemCoinoriX=[],this.itemCoinoriY=[],this.listDelayCall=[],this.autoChoice=!1,this.titleMultiple=null,this.pointMultiple=null,this.finalRewardTitle=null,this.finalReward=null,this.textX=null,this.textCompera=null,this.textDetail=null,this.textMathID=null,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;const e={fontFamily:PreLoaderConfig.FontResource.UTMAzuki.name,fontSize:30,fontWeight:"bold",fill:[16711340,16776960,16739842],fillGradientStops:[1,.58,.1],fillGradientType:PIXI.TEXT_GRADIENT.LINEAR_VERTICAL,dropShadow:!0,dropShadowBlur:1,padding:30,dropShadowColor:"#000000",dropShadowAngle:Utilities.toRad(90),dropShadowDistance:4};if(null===this.bgGame&&(this.bgGame=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.bgBonusTamQuoc),this.bgGame.width=1280,this.bgGame.height=720,this.addChild(this.bgGame)),0===this.listItem.length){let e;Utilities.toRad(45);for(let t=0;t<8;t++)e=new n(t),e.x=250*Math.floor(0)+300,e.y=(e.height-50)*Math.floor(0)+230,e.oriX=250*Math.floor(t%3)+300,e.oriY=(e.height-60)*Math.floor(t/3)+230,Math.floor(t/3)%2==0&&(e.oriX=250*Math.floor(t%3)+430),this.addChild(e),this.listItem.push(e),this.itemCoinoriX.push(e.oriX),this.itemCoinoriY.push(e.oriY)}null===this.bgWin&&(this.bgWin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.bgWin),this.bgWin.anchor.set(.5),this.bgWin.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2),this.bgWin.visible=!1,this.bgWin.scale.set(0),this.addChild(this.bgWin)),null===this.textDetail&&(this.textDetail=new PIXI.Text(PreLoaderConfig.languageConfig.key_title_mini_game_choice_chest,e),this.textDetail.anchor.set(.5),this.textDetail.style.fontSize=45,this.textDetail.position.set(AppInfo.appRealWidth/2,35),this.addChild(this.textDetail)),null===this.textAutoChoice&&(this.textAutoChoice=new PIXI.Text(PreLoaderConfig.languageConfig.key_auto_play+": "+PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.TimeAutoChoice+"s",e),this.textAutoChoice.anchor.set(.5),this.textAutoChoice.style.fontSize=50,this.textAutoChoice.position.set(AppInfo.appRealWidth/2,690),this.addChild(this.textAutoChoice)),null===this.titleText&&(this.titleText=new PIXI.Text(PreLoaderConfig.ListTextConfig.AccumulationXu,e),this.titleText.anchor.set(.5),this.titleText.style.fontSize=20,this.titleText.position.set(520,90),this.addChild(this.titleText)),null===this.pointCollect&&(this.pointCollect=new PIXI.Text(Utilities.Coin(this.point),e),this.pointCollect.anchor.set(.5),this.pointCollect.style.fontSize=35,this.pointCollect.valueTween=0,this.pointCollect.position.set(this.titleText.x,130),this.addChild(this.pointCollect)),null===this.titleMultiple&&(this.titleMultiple=new PIXI.Text(PreLoaderConfig.languageConfig.key_ratio,e),this.titleMultiple.anchor.set(.5),this.titleMultiple.style.fontSize=20,this.titleMultiple.position.set(AppInfo.appRealWidth/2+20,90),this.addChild(this.titleMultiple)),null===this.pointMultiple&&(this.pointMultiple=new PIXI.Text("?",e),this.pointMultiple.anchor.set(.5),this.pointMultiple.style.fontSize=35,this.pointMultiple.valueTween=0,this.pointMultiple.position.set(AppInfo.appRealWidth/2+20,130),this.addChild(this.pointMultiple)),null===this.finalRewardTitle&&(this.finalRewardTitle=new PIXI.Text(PreLoaderConfig.languageConfig.key_hoyeah_total_win,e),this.finalRewardTitle.anchor.set(.5),this.finalRewardTitle.style.fontSize=20,this.finalRewardTitle.position.set(AppInfo.appRealWidth/2+150,90),this.addChild(this.finalRewardTitle)),null===this.finalReward&&(this.finalReward=new PIXI.Text("?",e),this.finalReward.anchor.set(.5),this.finalReward.style.fontSize=35,this.finalReward.valueTween=0,this.finalReward.position.set(AppInfo.appRealWidth/2+150,130),this.addChild(this.finalReward)),null===this.textX&&(this.textX=new PIXI.Text("x",e),this.textX.anchor.set(.5),this.textX.style.fontSize=30,this.textX.position.set(600,130),this.addChild(this.textX)),null===this.textCompera&&(this.textCompera=new PIXI.Text("=",e),this.textCompera.anchor.set(.5),this.textCompera.position.set(AppInfo.appRealWidth/2+80,130),this.addChild(this.textCompera)),null===this.textMathID&&(this.textMathID=new PIXI.Text(PreLoaderConfig.languageConfig.key_math_id+": "+this.mathID,e),this.textMathID.style.fontSize=25,this.textMathID.position.set(0,130),this.addChild(this.textMathID)),null===this.timerAutoChoice&&(this.timerAutoChoice=new Utilities.Timer(1e3,PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.TimeAutoChoice,this._onUpdateTicker.bind(this),this._onCompleteTicker.bind(this)))}}_onUpdateTicker(){this.textAutoChoice.text=PreLoaderConfig.languageConfig.key_auto_play+": "+(this.timerAutoChoice.counter-this.timerAutoChoice.counterPass)+"s"}_onCompleteTicker(){this.autoChoice=!0,this._autoChoiceItem()}updatePoint(e){TweenMax.killTweensOf(this.pointCollect),TweenMax.to(this.pointCollect,1,{valueTween:e,onUpdate:()=>{this.pointCollect.text=Utilities.Coin(Math.floor(this.pointCollect.valueTween))}})}_autoChoiceItem(){let e;for(let t=0;t<this.listItem.length;t++)if(-1===this.listItem[t].value)return e=this.listItem[t],void e.onClickItem()}showEffect(){this._clockAll(),TweenMax.to(this,1,{startAt:{y:-this.height},y:0,ease:Back.easeOut.config(1.2),onComplete:this.showEffectShowGame.bind(this)})}showEffectShowGame(){TweenMax.staggerTo(this.listItem,.5,{cycle:{y:this.itemCoinoriY},ease:Back.easeOut.config(1.2)},0,this.stepTwo.bind(this))}stepTwo(){TweenMax.staggerTo(this.listItem,.5,{cycle:{x:this.itemCoinoriX},ease:Back.easeOut.config(1.2),onComplete:()=>{this._unClockAll()}},.1),this.timerAutoChoice.Start()}openItemChoice(e,t,i,s,o,n,a){if(this.listItem[t].playEffectOpen(i),this.listItem[t].shake(),this.pointMultiple.text=i,s){this._clockAll(),this.autoChoice=!1;const t=TweenMax.delayedCall(.7,this.showOpenAll.bind(this,a));this.listDelayCall.push(t),this.showEffectWin(e,o,n,i,a)}else this.autoChoice&&this._autoChoiceItem()}showOpenAll(e){e=e.split(",");for(let t=0;t<e.length;t++)-1===this.listItem[t].value&&this.listItem[t].playEffectOpen(e[t])}showEffectWin(e,t,i,s,o){const n=AppInfo.gameMovie.displayController.getUserSeatByUserID(e);let a;n?(a=n.iconCoin.getGlobalPosition(),n.setCoin(i)):a=new PIXI.Point(640,65),TweenMax.killTweensOf(this.finalReward),TweenMax.to(this.finalReward,2,{valueTween:t,onUpdate:()=>{this.finalReward.text=Utilities.Coin(Math.floor(this.finalReward.valueTween))},onComplete:()=>{TweenMax.killTweensOf(this.finalReward),TweenMax.to(this.finalReward,.1,{scaleX:3,scaleY:3,yoyo:!0,repeat:3})}}),this.textAutoChoice.text=PreLoaderConfig.MiniGameInGameConfig.BonusLuckyDragon.Congratulation+" "+Utilities.Coin(t)+" "+PreLoaderConfig.currency,this.timerAutoChoice.Stop();const h=TweenMax.delayedCall(5,this.hideEffect.bind(this,a,t,n.basePosition));this.listDelayCall.push(h)}hideEffect({x:e,y:t},i,s){AppInfo.gameMovie.displayController.effectFishDie(20,AppInfo.appRealWidth/2,AppInfo.appRealHeight/2,i,e,t,s),TweenMax.to(this,1,{y:-this.height,ease:Back.easeOut.config(1.2),onComplete:this.dispose.bind(this)})}_clockAll(){for(let e=0;e<this.listItem.length;e++)this.listItem[e].iconOpenMC.interactive=!1,this.listItem[e].iconOpenMC.buttonMode=!1}_unClockAll(){for(let e=0;e<this.listItem.length;e++)this.listItem[e].iconOpenMC.interactive=!0,this.listItem[e].iconOpenMC.buttonMode=!0}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}if(this.listDelayCall.length>0){for(let e=0;e<this.listDelayCall.length;e++)this.listDelayCall[e]&&(this.listDelayCall[e].kill(),this.listDelayCall[e]=null);this.listDelayCall=[]}this.timerAutoChoice&&this.timerAutoChoice.Stop()}}t.a=a},function(e,t,i){"use strict";var s=i(6);s.a;class o extends s.a{constructor(){super(),this.collectLuckyDragon=null,this.bg=null,this.light=null,this.processBar=null,this.coinCollect=null,this.tweenCoin=null,this.tweenMask=null,this._iconCoin=null,this.onUpdateTweenBind=null,this.init()}init(){if(super.init(),this._isDisposed){this._isDisposed=!1;const e=new PIXI.TextStyle({fill:["yellow","#ffb502","yellow","yellow"],fillGradientStops:[.07,.47,.86,1],fontFamily:PreLoaderConfig.FontResource.UTMColossalis.name,fontSize:16,lineJoin:"round",miterLimit:2,stroke:"#001e3d",strokeThickness:3});null===this.bg&&(this.bg=new PIXI.Sprite(ResourceManager.Atlas.AtlasBonusGame.textures.bgCompoBonusGame),this.bg.anchor.set(.5),this.addChild(this.bg)),null===this.coinCollect&&(this.coinCollect=new PIXI.Text("0",e),this.coinCollect.anchor.set(0,.5),this.coinCollect.valueTween=0,this.addChild(this.coinCollect),this.coinCollect.position.set(0,this.coinCollect.height/2)),null===this._iconCoin&&(this._iconCoin=new PIXI.Sprite(ResourceManager.Atlas.AtlasBanCaGeneral.textures.IconCoin),this._iconCoin.anchor.set(.5),this._iconCoin.position.set(-10,this._iconCoin.height/2),this.addChild(this._iconCoin)),null===this.processBar&&(this.processBar=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBonusGame.textures.bonusProgressBar),this.processBar.gotoAndStop(0),this.processBar.animationSpeed=1/4,this.processBar.loop=!1,this.processBar.position.set(-90,-12),this.processBar.mask=PIXI.Graphics.Rectangle(this.processBar.x,this.processBar.y,this.processBar.width,this.processBar.height,0,0),this.addChild(this.processBar),this.addChild(this.processBar.mask)),null===this.light&&(this.light=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBonusGame.textures.bonusIconGift),this.light.anchor.set(.5),this.light.gotoAndStop(0),this.light.loop=!1,this.light.animationSpeed=1/4,this.light.position.set(-this.bg.width/2,-4),this.addChild(this.light)),this.onUpdateTweenBind=this.onUpdateCoin.bind(this)}}updateValueCollect(e,t,i){null===this.tweenCoin?this.tweenCoin=new TweenMax.to(this.coinCollect,.5,{valueTween:t,onUpdate:this.onUpdateTweenBind}):this.tweenCoin.updateTo({valueTween:t},!0),this._updateMask(e,i)}_updateMask(e,t){this.light.gotoAndPlay(0),this.processBar.gotoAndPlay(0);const i=(this.processBar.width-1.5)*(e/t)-this.processBar.width;null===this.tweenMask?this.tweenMask=new TweenMax.to(this.processBar.mask,.5,{x:i}):this.tweenMask.updateTo({x:i},!0)}showEffect(e){TweenMax.to(this,.4,{x:AppInfo.appRealWidth/2,y:AppInfo.appRealHeight/2,onComplete:()=>{TweenMax.to(this,.4,{scaleX:15,scaleY:15,alpha:0,ease:Linear.easeNone,onComplete:()=>{this._resetPos(),"function"==typeof e&&e()}})}})}_resetPos(){this.x=this.oriX,this.y=this.oriY,this.scale.set(1),this.alpha=1}onUpdateCoin(){this.coinCollect.text=Utilities.Coin(Math.floor(this.coinCollect.valueTween))}dispose(){let e;for(super.dispose();this.numChildren>0;){e=this.removeChildAt(0);try{TweenMax.killTweensOf(e),e.gotoAndStop&&e.gotoAndStop(0),e.dispose?e.dispose():e.destroy&&e.destroy()}catch(e){}}TweenMax.killTweensOf(this)}}t.a=o},function(e,t,i){"use strict";class s extends PIXI.extras.AnimatedSprite{constructor(){super(ResourceManager.Atlas.AtlasGun.textures.bulletExplode),this.anchor.set(.5),this.scale.set(1.5),this.loop=!1,this.onCompletePlay=null,this.animationSpeed=.5,this.onComplete=this._playAnimationComplete.bind(this)}run(e,t){this.position.set(e,t),this.gotoAndPlay(0)}_playAnimationComplete(){"function"==typeof this.onCompletePlay&&this.onCompletePlay(this)}}var o=s;t.a=class{constructor(){this._listBulletExplode=[],this.layerExplodeEffect=AppInfo.gameMovie.layerExplodeEffect}getBulletExplode(){let e=this._listBulletExplode.pop();return null==e&&(e=new o,e.onCompletePlay=this.completePlay.bind(this)),this.layerExplodeEffect.contains(e)||this.layerExplodeEffect.addChild(e),e}completePlay(e){this.layerExplodeEffect.removeChild(e),this._listBulletExplode.push(e)}}},function(e,t,i){"use strict";var s=i(6),o=i(4);class n extends o.a{constructor(e,t,i){super(ResourceManager.Atlas.AtlasGun.textures["gun"+e+"choicenormal"][0],ResourceManager.Atlas.AtlasGun.textures["gun"+e+"choicehover"][0],ResourceManager.Atlas.AtlasGun.textures["gun"+e+"choicedown"][0],"gun"+e,ResourceManager.Atlas.AtlasGun.textures["gun"+e+"choiceactive"][0]),this._basePosition=0,this._txtPower=null,this.type=0,this._isActive=!1,this.type=e,this._basePosition=i;const s={fontFamily:AppInfo.isRunInApp?PreLoaderConfig.DefaultMobileFont:"Open Sans",fontWeight:"bold",fontSize:"10px",fill:16777215,align:"center"};this._txtPower=new PIXI.Text(Utilities.Coin(t),s),this._txtPower.anchor.x=.5,PreLoaderConfig.IsShowNewGun||(this.addChild(this._txtPower),this.setPositiontxtPower())}setPositiontxtPower(){switch(this.type){case 0:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+10;break;case 1:case 2:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+11;break;case 3:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+12;break;case 4:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+9;break;case 101:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+21}}mouseover(){switch(super.mouseover(),this.type){case 0:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+13;break;case 1:case 2:case 3:case 4:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+15;break;case 101:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+25}}mouseout(){super.mouseout(),this.setPositiontxtPower(this.type)}mousedown(){switch(super.mousedown(),this.type){case 0:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+7;break;case 1:case 2:case 3:case 4:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+8;break;case 101:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+15}}get isActive(){return this._isActive}set isActive(e){if(this._isActive=e,this.enabled=!e,!PreLoaderConfig.IsShowNewGun)if(this._isActive)switch(this.type){case 0:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+8;break;case 1:case 2:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+9;break;case 3:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+10;break;case 4:this._txtPower.x=this.width/2,this._txtPower.y=this.height/2+9}else this.setPositiontxtPower()}get txtPower(){return this._txtPower}set txtPower(e){this._txtPower.text=e}}var a=n;class h extends s.a{constructor(e,t){super(),this._basePosition=null,this._callBackChoiceGun=null,this._callBackChoiceGun=e,this._basePosition=t,this._listGun=[],this._listGunSpecial=[],this.init()}init(){if(super.init(),this._isDisposed){let e,t;if(this._isDisposed=!1,PreLoaderConfig.IsShowNewGun){for(t=0;t<PreLoaderConfig.ListGunConfig.length;t++)e=new a(t,PreLoaderConfig.ListGunConfig[t].power[0],this._basePosition),e.name="btnChangeGun"+PreLoaderConfig.ListGunConfig[t].id,this._listGun.push(e),e.visible=!1,this.addChild(e);const i=Utilities.toRad(30),s=PreLoaderConfig.ListCornerBonusGunSpecialConfig[PreLoaderConfig.CountGunShow-1];for(let t=0;t<PreLoaderConfig.CountGunShow;t++)e=new a(t+101,this.getMinPowerSpecialGun(),this._basePosition),e.upSprite.texture=ResourceManager.Atlas.AtlasGun.textures["gun"+(t+101)+"choicedisable"][0],e.name="btnChangeGun"+(t+101),e.buttonMode=!1,e.interactive=!1,e.flagDisabled=!0,this._listGunSpecial.push(e),e.oriXBot=-180*Math.cos(i*(t+s))-48,e.oriYBot=-180*Math.sin(i*(t+s))-115,e.oriXTop=48+-180*Math.cos(i*(t+s)),e.oriYTop=-180*Math.sin(i*(t+s))-20,0==t?(e.oriXBot=-128,e.oriYBot=-170,e.oriXTop=130,e.oriYTop=-80):1==t&&(e.oriXBot=32,e.oriYBot=-170,e.oriXTop=-30,e.oriYTop=-80),e.visible=!1,this.addChild(e)}else for(t=0;t<PreLoaderConfig.ListGunConfig.length;t++){switch(e=new a(t,PreLoaderConfig.ListGunConfig[t].power[0],this._basePosition),e.name="btnChangeGun"+PreLoaderConfig.ListGunConfig[t].id,this._basePosition){case 0:case 1:e.x=-e.width/2,e.y=-e.height/2;break;case 2:case 3:e.x=e.width/2,e.y=e.height/2;break;default:e.x=-e.width/2,e.y=-e.height/2}e.visible=!1,this.addChild(e),this._listGun.push(e)}this.visible=!1}}dispose(){super.dispose()}show(e){let t,i,s;if(PreLoaderConfig.IsShowNewGun){const o=AppInfo.gameMovie.displayController.getUserSeatByPosition(this._basePosition);if(null!==o&&(t=this._listGun[o.compoGun.type],void 0===t&&(t=this._listGun[o._indexCurrentSpecGun],void 0===t&&(t=this._listGun[0]))),i=t.width/2,s=t.height/2,TweenMax.killTweensOf(t),AppInfo.GameInfo.tournamentRoom)i=-i,s=-s;else switch(this._basePosition){case 0:case 1:i=-i,s=-s;break;case 2:case 3:t.rotation=Utilities.toRad(180)}TweenMax.to(t,.2,{x:i,y:s-170,onComplete:this.onTweenBtnChangeGunInComplete.bind(this),onCompleteParams:[t]}),t.isActive=e>=0&&e<this._listGun.length,t.visible=!0}else for(let o=0;o<this._listGun.length;o++){switch(t=this._listGun[o],i=t.width/2,s=t.height/2,TweenMax.killTweensOf(t),this._basePosition){case 0:case 1:i=-i,s=-s,TweenMax.to(t,.2,{x:PreLoaderConfig.ListGunConfig[o].gunChoisePoint.x+i,y:PreLoaderConfig.ListGunConfig[o].gunChoisePoint.y+s,onComplete:this.onTweenBtnChangeGunInComplete.bind(this),onCompleteParams:[t]});break;case 2:case 3:t.rotation=Utilities.toRad(180),TweenMax.to(t,.2,{x:PreLoaderConfig.ListGunConfig[PreLoaderConfig.ListGunConfig.length-1-o].gunChoisePoint.x+i,y:PreLoaderConfig.ListGunConfig[PreLoaderConfig.ListGunConfig.length-1-o].gunChoisePoint.y+s,onComplete:this.onTweenBtnChangeGunInComplete.bind(this),onCompleteParams:[t]})}t.visible=!0,t.isActive=t.type==e}PreLoaderConfig.IsShowNewGun&&this._listGunSpecial.forEach((t,i)=>{if(TweenMax.killTweensOf(t),AppInfo.GameInfo.tournamentRoom)TweenMax.to(t,.2,{startAt:{x:-t.width/2,y:-t.height/2},x:t.oriXBot,y:t.oriYBot,onComplete:this.onTweenBtnChangeGunInComplete.bind(this),onCompleteParams:[t]});else switch(this._basePosition){case 0:case 1:TweenMax.to(t,.2,{startAt:{x:-t.width/2,y:-t.height/2},x:t.oriXBot,y:t.oriYBot,onComplete:this.onTweenBtnChangeGunInComplete.bind(this),onCompleteParams:[t]});break;case 2:case 3:AppInfo.GameInfo.tournamentRoom||(t.rotation=Utilities.toRad(180)),i<2||!PreLoaderConfig.IsShowNewGun?TweenMax.to(t,.2,{startAt:{x:-t.width/2,y:-t.height/2},x:t.oriXTop,y:t.oriYTop,onComplete:this.onTweenBtnChangeGunInComplete.bind(this),onCompleteParams:[t]}):TweenMax.to(t,.2,{startAt:{x:-t.width/2,y:-t.height/2},x:this._listGunSpecial[this._listGunSpecial.length-i+1].oriXTop,y:this._listGunSpecial[this._listGunSpecial.length-i+1].oriYTop,onComplete:this.onTweenBtnChangeGunInComplete.bind(this),onCompleteParams:[t]})}t.visible=!0,(!t.flagDisabled&&PreLoaderConfig.IsShowNewGun||!PreLoaderConfig.IsShowNewGun)&&(t.isActive=t.type==e)}),this.visible=!0}hide(){for(let e=0;e<this.numChildren;e++){const t=this.getChildAt(e);TweenMax.killTweensOf(t);let i=t.width/2,s=t.height/2;switch(this._basePosition){case 0:case 1:i=-i,s=-s}TweenMax.to(t,.2,{x:i,y:s,onComplete:this.onTweenBtnChangeGunOutComplete.bind(this),onCompleteParams:[t]})}}onTweenBtnChangeGunInComplete(e){e.mouseclick=this.onBtnChangeGunClicked.bind(this,e)}onTweenBtnChangeGunOutComplete(e){e.mouseclick=null,e.visible=!1,this.visible=!1}onBtnChangeGunClicked(e){let t=e.type;if(PreLoaderConfig.IsShowNewGun&&e.type<100){const e=AppInfo.gameMovie.displayController.myBaseStation.compoGun.power;for(let i=0;i<PreLoaderConfig.ListGunConfig.length;i++)if(e==PreLoaderConfig.ListGunConfig[i].power[0]){t=PreLoaderConfig.ListGunConfig[i].id;break}}this._callBackChoiceGun(t)}onUpdateGun(e,t){t?++e>=this._listGun.length&&(e=0):--e<0&&(e=this._listGun.length-1),this._callBackChoiceGun(e)}onUpdateSpecialGun(e){let t;if(PreLoaderConfig.IsShowNewGun){const i=this._listGunSpecial.concat();for(let i=0;i<e.length;i++){t=e[i];for(let e=0;e<this._listGunSpecial.length;e++)if(t.type==this._listGunSpecial[e].type){this._listGunSpecial[e].upSprite.texture=ResourceManager.Atlas.AtlasGun.textures["gun"+this._listGunSpecial[e].type+"choicenormal"][0],this._listGunSpecial[e].buttonMode=!0,this._listGunSpecial[e].interactive=!0,this._listGunSpecial[e].flagDisabled=!1,this._listGunSpecial.splice(e,1);break}}for(let e=0;e<this._listGunSpecial.length;e++)this._listGunSpecial[e].upSprite.texture=ResourceManager.Atlas.AtlasGun.textures["gun"+this._listGunSpecial[e].type+"choicedisable"][0],this._listGunSpecial[e].buttonMode=!1,this._listGunSpecial[e].interactive=!1,this._listGunSpecial[e].flagDisabled=!0;this._listGunSpecial=[],this._listGunSpecial=i}else if(this._listGunSpecial=[],e.length>0){const i=this.getMaxPowerSpecialGun(),s=Utilities.toRad(180/7+4),o=e.length<7?PreLoaderConfig.ListCornerBonusGunSpecialConfig[e.length-1]:.05;for(let n=0;n<e.length;n++)if(t=e[n],void 0!==ResourceManager.Atlas.AtlasGun.textures["gun"+t.type+"choicenormal"]&&void 0!==ResourceManager.Atlas.AtlasGun.textures["gun"+t.type+"choicehover"]&&void 0!==ResourceManager.Atlas.AtlasGun.textures["gun"+t.type+"choicedown"]&&void 0!==ResourceManager.Atlas.AtlasGun.textures["gun"+t.type+"choiceactive"]){const e=new a(t.type,i,this._basePosition);e.name="btnChangeGun"+t.type,e.oriXBot=-180*Math.cos(s*(n+o))-50,e.oriYBot=-180*Math.sin(s*(n+o))-135,e.oriXTop=48+-180*Math.cos(s*(n+o)),e.oriYTop=-180*Math.sin(s*(n+o))-50,e.visible=!0,this.addChild(e),this._listGunSpecial.push(e)}}}getMinPowerSpecialGun(){let e=0;switch(AppInfo.GameInfo.kindID){case PreLoaderConfig.RoomThuong.kindId:e=PreLoaderConfig.RoomThuong.minPower;break;case PreLoaderConfig.RoomVip.kindId:e=PreLoaderConfig.RoomVip.minPower;break;case PreLoaderConfig.RoomMedusa.kindId:e=PreLoaderConfig.RoomMedusa.minPower;break;default:e=PreLoaderConfig.RoomThuong.minPower}return e}getMaxPowerSpecialGun(){let e=0;switch(AppInfo.GameInfo.kindID){case PreLoaderConfig.RoomThuong.kindId:e=PreLoaderConfig.RoomThuong.maxPower;break;case PreLoaderConfig.RoomVip.kindId:e=PreLoaderConfig.RoomVip.maxPower;break;case PreLoaderConfig.RoomMedusa.kindId:e=PreLoaderConfig.RoomMedusa.maxPower;break;default:e=PreLoaderConfig.RoomThuong.maxPower}return e}}t.a=h},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(){super(),this._mainImage=null,this._mainImage1=null,this._mainImage2=null,this._tweenForward=null,this.idle=!0,this.onUpdateForwardBinded=null,this.onCompleteForwardBinded=null,this.onUpdateForwardBinded=this.onUpdateForward.bind(this),this.onCompleteForwardBinded=this.onCompleteForward.bind(this),this._velocity=150,this.init()}init(){super.init(),this._isDisposed&&(this._isDisposed=!1,null===this._mainImage&&(this._mainImage=new PIXI.Sprite(ResourceManager.Atlas.AtlasGun204.textures.effectLight[0]),this._mainImage.anchor.set(.5,0),this.addChild(this._mainImage)),null===this._mainImage1&&(this._mainImage1=new PIXI.Sprite(ResourceManager.Atlas.AtlasGun204.textures.effectLight[1]),this._mainImage1.anchor.set(.5,0),this.addChild(this._mainImage1),this._mainImage1.position.set(this._mainImage.x,this._mainImage.y+this._mainImage.height-200)),null===this._mainImage2&&(this._mainImage2=new PIXI.Sprite(ResourceManager.Atlas.AtlasGun204.textures.effectLight[2]),this._mainImage2.anchor.set(.5,0),this.addChild(this._mainImage2),this._mainImage2.position.set(this._mainImage1.x,this._mainImage1.y+this._mainImage1.height-200)),this._tweenForward=TweenMax.to(this,2,{x:0,y:0,ease:Power0.easeNone,onUpdate:this.onUpdateForwardBinded,onComplete:this.onCompleteForwardBinded}))}run(e){this.fireFollowAngle(e),this.idle=!1}fireFollowAngle(e){this.rotation=e,this._baseRotation=this.rotation;const t={left:5*-AppInfo.appRealWidth,top:5*-AppInfo.appRealHeight,width:15*AppInfo.appRealWidth,height:15*AppInfo.appRealHeight},i={x:this.x,y:AppInfo.appRealHeight-this.y},s=Utilities.Number.coordinateIntersectionPointBorder(t,i,-(e-Math.PI/2));null!==s&&this.forward(s,e)}forward({x:e,y:t}){let i=Utilities.Number.distanceBetweenTwoPoint(this.x,AppInfo.appRealHeight-this.y,e,t);0===i&&(i=1),this._tweenForward.duration(i/this._velocity),this._tweenForward.updateTo({x:e,y:AppInfo.appRealHeight-t},!0)}onUpdateForward(){}onCompleteForward(){this.idle=!0}dispose(){super.dispose()}}var n=o,a=i(71),h=i(70);class l extends s.a{constructor(e,t,i,s,o){super(),this._particle=null,this._explode=!1,this.listFishDie=null,this._lockFish=0,this.id=0,this._velocity=17,this._baseRotation=null,this.movie=null,this.power=10,this.type=null,this.basePosition=null,this._velocity=2e3,this._effectTime=o,this.basePosition=t,this.power=i,this.type=e,this.lockFishID=s||0,this._tweenForward=null,this._listEffectHitFish=[],this.topBorder=!1,this.leftBorder=!1,this.rightBorder=!1,this.bottomBorder=!1,this.onUpdateForwardBinded=null,this.onCompleteForwardBinded=null,this.bounceCount=!1,this.onUpdateForwardBinded=this.onUpdateForward.bind(this),this.onCompleteForwardBinded=this.onCompleteForward.bind(this),this._listEffect=[],this.listHitFish=[],this._timerEffect=null,this.init()}init(){if(super.init(),this._isDisposed){let t,i;this._isDisposed=!1,this.listFishCatched=[],this.movie=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"fire"]),this.movie.animationSpeed=.1,this.movie.gotoAndPlay(0),this.movie.interactive=!1,this.movie.hitArea=PIXI.Rectangle.EMPTY,this.movie.anchor.set(.5,.5),this.addChild(this.movie),this.interactive=!1,this.interactiveChildren=!1,this.hitArea=PIXI.Rectangle.EMPTY;for(var e=0;e<3;e++)t=new PIXI.Sprite(ResourceManager.Atlas["AtlasGun"+this.type].textures.effectHitFish),t.anchor.set(.5),t.idle=!0,t.visible=!1,AppInfo.gameMovie.layerEffect.addChild(t),this._listEffectHitFish.push(t);for(e=0;e<5;e++)i=new n(e),i._velocity=this._velocity,i.visible=!1,AppInfo.gameMovie.layerEffect.addChild(i),this._listEffect.push(i)}}dispose(){super.dispose(),this.isMe&&AppInfo.gameMovie.displayController.myBaseStation.resetSkill(),this.movie.gotoAndStop(0),TweenMax.killTweensOf(this),TweenMax.killTweensOf(this.movie),this.removeChild(this.movie),this.movie.destroy(),this.movie=null,this.parent&&this.parent.removeChild(this),this.destroy(),this.onFinishEffectSkill&&this.onFinishEffectSkill()}onTriggerCollide(e){const t=e.getTarget(),i=t.id,s=this._getEffectHitFish();s&&(s.idle=!1,s.x=this.x,s.y=this.y,s.rotation=this.rotation,this._tweenEffectHitFish(s)),this._explode?this.listFishCatched.includes(i)||this.listFishCatched.push(i):(t.effectBounce&&t.effectBounce(this.rotation),AppInfo.gameMovie.displayController.requestSkillCatchFish(this,[i]))}run(e,t,i){AppInfo.gameMovie.displayController.lockIconShop&&this.isMe&&AppInfo.gameMovie.displayController.lockIconShop(!0),this._timerEffect||(this._timerEffect=new Utilities.Timer(1e3,this._effectTime/1e3-5,null,this.onCompleteTimer.bind(this))),this._timerEffect.Stop(),this._timerEffect.Start(),this.fireFollowAngle(i),this.onCompleteMovie(),this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,[87,35,127,164,127,211,87,261,46,211,46,164],h.a.TYPE_COLLISION.BULLET,this.movie)}onCompleteTimer(){this.bounceCount=!0}_getEffectIdle(){let e=null;for(var t=0;t<this._listEffect.length;t++)this._listEffect[t].idle&&(e=this._listEffect[t]);return null===e&&(e=new n(t),e._velocity=this._velocity,AppInfo.gameMovie.layerEffect.addChild(e),this._listEffect.push(e)),e.visible=!0,e}_getEffectHitFish(){let e=null;for(let t=0;t<this._listEffectHitFish.length;t++)this._listEffectHitFish[t].idle&&(e=this._listEffectHitFish[t]);return null===e&&(e=new PIXI.Sprite(ResourceManager.Atlas["AtlasGun"+this.type].textures.effectHitFish),e.anchor.set(.5),e.idle=!0,e.visible=!1,AppInfo.gameMovie.layerEffect.addChild(e),this._listEffectHitFish.push(e)),e.visible=!0,e}_effectExplode(){this._nodeTree&&this._nodeTree.release(),this._explode=!0,this.movie.textures=ResourceManager.Atlas["AtlasGun"+this.type].textures["bullet"+this.type+"explode"],this.movie.gotoAndPlay(0),AppInfo.preLoader.soundController.playSoundTorpedoSpin(),TweenMax.to(this.movie,2,{rotation:2*Math.PI*5,onComplete:()=>{this._tweenForward.pause(),this._particleExplosion(),AppInfo.preLoader.soundController.playBoom(),this._explodeBoomBullet(),this.movie.visible=!1}})}_particleExplosion(){null===this._particle&&(this._particle=new a.a(l.PARTICLE),AppInfo.gameMovie.layerEffect.addChild(this._particle)),this._particle.playParticle(this.x,this.y)}_explodeBoomBullet(){this._nodeTree=AppInfo.gameMovie.collisionManager.addCircle(this,300,h.a.TYPE_COLLISION.BULLET,this.movie),this._nodeTree.checkRoundOnce=!0,this._nodeTree.onRelease=()=>{AppInfo.gameMovie.displayController.requestSkillCatchFish(this,this.listFishCatched)}}_runItemEffect(e,t,i){const s=this._getEffectIdle();s.rotation=e,s.x=t,s.y=i,s.run(e)}onCompleteMovie(){AppInfo.gameMovie.layerFish.interactive=!0,this.onFinishEffectSkill&&this.onFinishEffectSkill()}_effectEarthQuake(){AppInfo.gameMovie.strongVibration()}fireFollowAngle(e){this.rotation=e,this._baseRotation=this.rotation;const t={left:0,top:0,width:AppInfo.appRealWidth,height:AppInfo.appRealHeight},i={x:this.x,y:AppInfo.appRealHeight-this.y};i.y<0&&(i.y=0),i.y>AppInfo.appRealHeight&&(i.y=AppInfo.appRealHeight);const s=Utilities.Number.coordinateIntersectionPointBorder(t,i,-(e-Math.PI/2));null!==s&&(this.forward(s),this._checkPointBoder(s),this.bounceCount?(this._explode||this._effectExplode(),this._velocity-=200):(this._runItemEffect(e,this.x,this.y),this._effectEarthQuake()))}_checkPointBoder({x:e,y:t}){0!==e||this.leftBorder?e!==AppInfo.appRealWidth||this.rightBorder?0!==t||this.bottomBorder?t!==AppInfo.appRealHeight||this.topBorder||(this.topBorder=!0,this.leftBorder=!1,this.rightBorder=!1,this.bottomBorder=!1):(this.bottomBorder=!0,this.topBorder=!1,this.leftBorder=!1,this.rightBorder=!1):(this.rightBorder=!0,this.topBorder=!1,this.leftBorder=!1,this.bottomBorder=!1):(this.leftBorder=!0,this.topBorder=!1,this.rightBorder=!1,this.bottomBorder=!1)}forward({x:e,y:t}){let i=Utilities.Number.distanceBetweenTwoPoint(this.x,AppInfo.appRealHeight-this.y,e,t);0===i&&(i=1),null===this._tweenForward?this._tweenForward=TweenMax.to(this,i/this._velocity,{x:e,y:AppInfo.appRealHeight-t,ease:Power0.easeNone,onUpdate:this.onUpdateForwardBinded,onComplete:this.onCompleteForwardBinded}):(this._tweenForward.duration(i/this._velocity),this._tweenForward.updateTo({x:e,y:AppInfo.appRealHeight-t},!0))}onUpdateForward(){}_tweenEffectHitFish(e){TweenMax.killTweensOf(e),TweenMax.to(e,.2,{startAt:{scaleX:0,scaleY:0},scaleX:1.5,scaleY:1.5,onComplete:(e=>{}).bind(this,e)}),TweenMax.to(e,.4,{startAt:{alpha:1},alpha:0,onComplete:(e=>{e.idle=!0}).bind(this,e)})}onCompleteForward(){let e=0;this.topBorder?e=(this.rotation>0?1:-1)*Math.PI-this.rotation:this.leftBorder||this.rightBorder?e=-1*this.rotation:this.bottomBorder&&(e=(this.rotation>0?1:-1)*Math.PI-this.rotation),this.listHitFish=[],this.fireFollowAngle(e)}get isMe(){return this.basePosition==AppInfo.gameMovie.gameBoard.myUserOnlineModel.deskStation}get lockFishID(){return this._lockFish?this._lockFish.id:0}set lockFishID(e){if(0==e)this._lockFish=null;else for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++)if(AppInfo.gameMovie.gameBoard.listFish[t].id==e){this._lockFish=AppInfo.gameMovie.gameBoard.listFish[t];break}}}l.LIMIT_BOUNCE=20,l.PARTICLE={art:[{framerate:8,loop:!0,textures:["bullet102Boom0.png","bullet102Boom1.png","bullet102Boom2.png","bullet102Boom3.png","bullet102Boom2.png","bullet102Boom1.png","bullet102Boom0.png"]}],alpha:{start:.74,end:0},scale:{start:3,end:5,minimumScaleMultiplier:1},color:{start:"#ffffff",end:"#ffffff"},speed:{start:400,end:0,minimumSpeedMultiplier:1},acceleration:{x:0,y:0},maxSpeed:0,startRotation:{min:0,max:360},noRotation:!1,rotationSpeed:{min:0,max:200},lifetime:{min:1.75,max:2.5},blendMode:"normal",ease:[{s:0,cp:.329,e:.548},{s:.548,cp:.767,e:.876},{s:.876,cp:.985,e:1}],frequency:.001,emitterLifetime:.1,maxParticles:300,pos:{x:0,y:0},addAtBack:!0,spawnType:"point"};t.a=l},function(e,t,i){"use strict";var s=i(85);class o extends s.a{constructor(e,t,i,s){super(e,t,i,s),this.tweenAutoFire=null,this._botfire=this._fire.bind(this),this._onAutoFire=this.autoFire.bind(this),this.isBot=!0,this.myTarget=null,this.delayStartFire=null,this._quantityBulletFire=0,this._bulletLimitPerTarget=Utilities.Number.randRange(10,25),this._timeDelay=0,this.changeGun(Utilities.Number.randRange(0,4)),this.startCoin=s,this.callBackOutOfMoney=null}autoFire(){null===this.tweenAutoFire&&(this.tweenAutoFire=new TweenMax(this,o.TIME_FIRE,{repeat:-1,onRepeat:this._botfire})),this.tweenAutoFire.play(0)}_fire(){if(this._checkTargetFish(),this.myTarget&&this.myTarget.transform&&!this.myTarget.hasDie){if(this.coin<this.compoGun.power)return void this._outOutMoney();const e=this.myTarget.getGlobalPosition(),t=Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),e)+Math.PI/2,i=this.fireAtAngle(t,0);i.id=AppInfo.gameMovie.gameBoard.getNextBulletID(),i.isBotFire=!0,this.setCoin(this.coin-=this.compoGun.power),this._quantityBulletFire++,this._quantityBulletFire>this._bulletLimitPerTarget&&this._changeTarget()}}_checkAngleByPosition(e){return 1==this.basePosition?-90<e&&e<90:2==this.basePosition||3==this.basePosition?90<e&&e<270:void 0}_outOutMoney(){this._pauseFire(),"function"==typeof this.callBackOutOfMoney&&this.callBackOutOfMoney(this)}_checkTargetFish(){null===this.myTarget?this._choiceFishOnBoard():this.myTarget.transform&&!this.myTarget.hasDie||(this._quantityBulletFire=0,Math.random()>.5?this._choiceFishOnBoard():this._pauseFire())}_changeTarget(){this._quantityBulletFire=0,this._bulletLimitPerTarget=Utilities.Number.randRange(30,50),Math.random()>.9&&this.changeGun(Utilities.Number.randRange(0,4)),this._choiceFishOnBoard()}_pauseFire(){this.myTarget=null,this.tweenAutoFire.pause(0),null===this.delayStartFire&&(this.delayStartFire=new TweenMax.to(this,o.TIME_DELAY,{onComplete:this._onAutoFire}));const e=this._getTimeDelay();this.basePosition,this.delayStartFire.duration(e),this.delayStartFire.play(0)}_choiceFishOnBoard(){for(let t=0;t<AppInfo.gameMovie.gameBoard.listFish.length;t++){var e=AppInfo.gameMovie.gameBoard.listFish[t];const i=Utilities.Number.angleRadBetweenTwoPoint(this.getGlobalPosition(),e.getGlobalPosition())+Math.PI/2;e.hasInView&&!e.hasDie&&e.type<30&&this._checkAngleByPosition(180*i/Math.PI)&&(this.myTarget=e)}}_getTimeDelay(){const e=Math.random();return e>.9?Utilities.Number.randRange(6,8):e>.75?Utilities.Number.randRange(4,6):e>.5?Utilities.Number.randRange(1,3):Math.random()}dispose(){TweenMax.killTweensOf(this),super.dispose()}}o.TIME_FIRE=.2,o.TIME_DELAY=.5;var n=o;class a{constructor(){this._listBot=[],this._listPosition=[],this._listBotName=[],this.displayController=AppInfo.gameMovie.displayController,this.gameMovie=AppInfo.gameMovie,this._tickerControlBot=null,this._startProcessBoss=this._startProcess.bind(this)}init(e){this._listBotName=e||a.ListBot,this._addBot(this._listBotName),this._tickerControlBot=new TweenMax.to(this,40,{repeat:-1,onRepeat:this._startProcessBoss}),this._tickerControlBot.play(0)}_startProcess(){if(Math.random()>.5){const e=Utilities.Number.randRange(0,this._listBot.length);for(let t=0;t<e;t++)this._botLeave(this._listBot[t])}else{const e=this._checkEmptyPosition();if(null!==e){const t=Utilities.Number.randRange(0,this._listBotName.length-1);this._initBot(e,this._listBotName[t]),PIXI.utils.removeItems(this._listBotName,this._listBotName.indexOf(t),1)}}}_botLeave(e){if(e){this.displayController.removeUserSeatByPosition(e.basePosition),PIXI.utils.removeItems(this._listPosition,this._listPosition.indexOf(e.basePosition),1);const t=this._listBot.indexOf(e);if(t>-1)return this._listBotName.push(e.name),PIXI.utils.removeItems(this._listBot,t,1),!0}return!1}_botOutOfMoney(e){this._botLeave(e)}_checkEmptyPosition(){for(let e=0;e<a.ListPosition.length;e++)if(!a.ListPosition.includes(this._listPosition[e]))return a.ListPosition[e];return null}_addBot(e){const t=Utilities.Number.randRange(1,3);for(let i=0;i<t;i++)this._initBot(i+1,e[i])}stopTransferScreen(){for(const e of this._listBot)e&&e.tweenAutoFire.pause(0)}startFire(e){for(const e of this._listBot)e&&e.tweenAutoFire.play(0)}botHitFish(e,{basePosition:t,power:i}){if(e){const s=a.FISH_DIE_RATIO[e.type];if(Math.random()<s&&!e.hasDie&&!e.hasItem&&!e.isRedFish){e.die();const s=this.displayController.getUserSeatByPosition(t);let o;const n=a.FISH_POINT_RATIO[e.type]*i;s?(o=s.iconCoin.getGlobalPosition(),s.setCoin(s.coin+=n)):o=new PIXI.Point(640,65),this.displayController.effectFishDie(e.type,e.x,e.y,n,o.x,o.y,t),this.displayController.effectWinCoinCatchFish(e.type,e.x,e.y,n,o.x,o.y,t)}}}_initBot(e,t){const i=e,s=e;t=t;const o=1==AppInfo.GameInfo.kindID?Utilities.Number.randRange(1e4,3e5):Utilities.Number.randRange(1e5,6e5),a=new n(s,i,t,o);switch(a.callBackOutOfMoney=this._botOutOfMoney.bind(this),a.name="baseStation"+i,this.displayController.removeUserSeatByUserID(s),this.displayController.removeUserSeatByPosition(i),i){case 0:a.x=230,a.y=AppInfo.appRealHeight;break;case 1:a.x=1050,a.y=AppInfo.appRealHeight;break;case 2:a.x=1050,a.y=0;break;case 3:a.x=230,a.y=0;break;default:a.x=0,a.y=Utilities.Number.randRange(0,AppInfo.appRealHeight)}a.updateLevel(10),this.gameMovie.layerComponent.addChild(a),this.displayController.listBaseStation.push(a),this._listBot.push(a),this._listPosition.push(i),setTimeout(()=>{a.autoFire()},2e3)}dispose(){this._removeAllBot(),this._listBot.length=0,TweenMax.killTweensOf(this)}_removeAllBot(){for(let e=0;e<this._listBot.length;e++)this._botLeave(this._listBot[e])&&e--}}a.ListBot=["Test918","Test945","Test6468"],a.ListPosition=[1,2,3],a.FISH_DIE_RATIO={0:.4,1:.4,2:.33,3:.22,4:.18,5:.13,6:.12,7:.12,8:.11,9:.09,10:.09,11:.08,12:.06,13:.05,14:.04,15:.038,16:.03,17:.022,18:.018,19:.009,20:.004,21:.003,22:.03,23:.001,24:.002,25:.001,26:.002,27:.001,28:.001,29:.001,30:.002,31:.002,35:.001},a.FISH_POINT_RATIO={0:2,1:2,2:3,3:4,4:5,5:6,6:7,7:8,8:9,9:9,10:10,11:12,12:15,13:18,14:20,15:25,16:30,17:40,18:50,19:100,20:200,21:300,22:9,23:0,24:40,25:100,26:80,27:18,28:32};t.a=a},function(e,t,i){"use strict";var s=i(82),o=i(70),n=i(83);class a extends PIXI.Container{constructor(){super(),this._text=null,this._image=null,this._bg=null,this.init()}init(){if(null==this._text){const e={fontFamily:"Tahoma",fontWeight:"bold",fontSize:"18px",fill:16777215,align:"center",stroke:0,strokeThickness:2,wordWrapWidth:300,wordWrap:!0};this._text=new PIXI.Text(PreLoaderConfig.languageConfig.key_status_chat2,e),this._text.anchor.set(.5),this._text.visible=!0,this.addChild(this._text)}if(null==this._image&&(this._image=new PIXI.spine.Spine(ResourceManager.Atlas.TheEyeBones.textures.TheEyeBones.spineData),this._image.state.setAnimation(0,"wink2",!0),this._image.scale.set(.5),this._image.visible=!1,this.addChild(this._image)),null==this._bg){const e=new PIXI.Graphics.RoundedRectComplex(0,0,100,100,10,10,10,10,16777215,.3,2,16777215,1);this._bg=new PIXI.mesh.NineSlicePlane(e.generateCanvasTexture(),15,15,15,15),this._bg.pivot.x=this._bg.width/2,this._bg.pivot.y=this._bg.height/2,this.addChildAt(this._bg,0)}this.visible=!1,this._showText()}_autoShow(){Math.random()>.5?this._showText():this._showImage(),this._tweenShowHide.play(0)}showEffect(){TweenMax.to(this._bg,Utilities.Number.randRange(30,50),{repeat:-1,onRepeat:this._autoShow,onRepeatScope:this}),this._tweenShowHide=TweenMax.to(this,.8,{startAt:{alpha:0,scaleX:0,scaleY:0,visible:!0},scaleX:1,scaleY:1,alpha:1,onComplete(){TweenMax.delayedCall(1,this._tweenShowHide.reverse,[],this._tweenShowHide)},onCompleteScope:this})}stopEffect(){TweenMax.killTweensOf(this),TweenMax.killTweensOf(this._bg),TweenMax.killTweensOf(this._tweenShowHide),this._tweenShowHide.kill(),this.visible=!1}_showText(){this._text.visible=!0,this._image.visible=!1,this._text.y=0,this._bg.width=this._text.width+20,this._bg.height=this._text.height+20,this._bg.pivot.x=this._bg.width/2,this._bg.pivot.y=this._bg.height/2,this._text.text=PreLoaderConfig.languageConfig.key_status_chat2}_showImage(){this._text.visible=!0,this._image.visible=!0,this._text.y=-this._text.height/2,this._image.y=this._image.height/2-10,this._bg.width=this._text.width+20,this._bg.height=this._image.height+60,this._bg.pivot.x=this._bg.width/2,this._bg.pivot.y=this._bg.height/2,this._text.text=PreLoaderConfig.languageConfig.key_status_chat3}dispose(){TweenMax.killTweensOf(this),this.stopEffect(),this.parent&&this.parent.removeChild(this),this._text&&(this._text.destroy(),this._text=null),this._image&&(this._image.destroy(),this._image=null),this._bg&&(this._bg.destroy(),this._bg=null),this.destroy()}}var h=a;class l extends s.a{constructor(e,t){super(e,101),this.alpha=0,this.tweenHit=null,this.statueExplosionPre=null,this.statueExplosionAfter=null,this.onStatueExplosion=null,this.onStatueExplosionCompletely=null,this.statue=new PIXI.Sprite(ResourceManager.Atlas.AtlasBattleBossMedusa.textures.Statue),this.statue.anchor.set(.5),this.addChild(this.statue),this.compoHealthBar=new n.a,this.compoHealthBar.position.set(-this.compoHealthBar.width/2,-this.statue.height/2-15),this.compoHealthBar.updateHealth(t,t),this.addChild(this.compoHealthBar),this._statusChat=new h,AppInfo.gameMovie.layerEffect.addChild(this._statusChat),this._statusChat.showEffect()}updatePositionChat(){this._statusChat.position.copy(this.position.clone())}dispose(){super.dispose(),this.releaseNode(),this.tweenHit&&(this.tweenHit.kill(),this.tweenHit=null),this.statueExplosionPre&&(this.statueExplosionPre.destroy(),this.statueExplosionPre=null),this.statueExplosionAfter&&(this.statueExplosionAfter.destroy(),this.statueExplosionAfter=null),this.statue&&(this.statue.destroy(),this.statue=null),this.compoHealthBar&&(this.compoHealthBar.dispose(),this.compoHealthBar=null),this._statusChat&&(this._statusChat.dispose(),this._statusChat=null),this.onStatueExplosion=null,this.onStatueExplosionCompletely=null}show(){this.alpha=0,TweenMax.to(this,1,{delay:.3,alpha:1,ease:Power0.easeNone,onComplete:this.addCollision,onCompleteScope:this})}addChatFreeUs(){this.compoChatFrame=new CompoMedusaChatFrame(AppInfo.MyInfo.nickName+"! "+PreLoaderConfig.languageConfig.key_eye_free_us,{fontSize:15,fontWeight:"bold",wordWrap:!0,wordWrapWidth:150}),this.compoChatFrame.setup(16777215,1,1,0,1,5).focus(CompoChatFrame.POSITION_LEFT,new PIXI.Point(50,100),.8,30,20).build().show(),this.compoChatFrame.x=this.statue.x+this.statue.width/2,this.compoChatFrame.y=-this.statue.height/2-this.compoChatFrame.height,this.addChild(this.compoChatFrame)}updateHealth(e,t){this.compoHealthBar.updateHealth(e,t)}release(){this.releaseNode(),this.compoHealthBar&&(this.compoHealthBar.dispose(),this.compoHealthBar=null),this.dispose()}addCollision(){this._nodeTree=AppInfo.gameMovie.collisionManager.addPolygon(this,[109,0,159,0,159,198,27,198,27,153],o.a.TYPE_COLLISION.FISH,this.statue)}releaseNode(){this._nodeTree&&(this._nodeTree.release(),this._nodeTree=null)}explode(){this.compoHealthBar.visible=!1,this.statue.visible=!1,this._nodeTree.release(),null===this.statueExplosionPre&&(this.statueExplosionPre=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBattleBossMedusaStatueExplosionPre.textures.StatueExplosion),this.statueExplosionPre.anchor.copy(this.statue.anchor),this.statueExplosionPre.position.set(this.statue.x+17,this.statue.y-4),this.statueExplosionPre.animationSpeed=.6,this.statueExplosionPre.loop=!1,this.addChild(this.statueExplosionPre)),null===this.statueExplosionAfter&&(this.statueExplosionAfter=new PIXI.extras.AnimatedSprite(ResourceManager.Atlas.AtlasBattleBossMedusaStatueExplosionAfter.textures.StatueExplosion),this.statueExplosionAfter.loop=!1,this.statueExplosionAfter.animationSpeed=.5,this.statueExplosionAfter.anchor.copy(this.statue.anchor),this.statueExplosionAfter.position.copy(this.statueExplosionPre.position),this.statueExplosionAfter.scale.set(2),this.statueExplosionAfter.onComplete=()=>{this.onStatueExplosionCompletely&&this.onStatueExplosionCompletely()}),this.statueExplosionPre.onComplete=()=>{this.statueExplosionPre.visible=!1,this.addChild(this.statueExplosionAfter),this.statueExplosionAfter.play(),this.onStatueExplosion&&this.onStatueExplosion()},this.statueExplosionPre.play(),AppInfo.gameMovie.soundController.playMedusaStatueBroken()}onTriggerCollide(e){this.statue.tint=3468261,null===this.tweenHit?this.tweenHit=TweenMax.to(this.statue,.1,{onComplete(){this.statue.tint=16777215},onCompleteScope:this}):this.tweenHit.restart()}}t.a=l},function(e,t,i){"use strict";var s=i(6);class o extends s.a{constructor(e,t,i){super(),this._type=e,this._tweenShowHide=null,this._userID=i,this._displayController=AppInfo.gameMovie.displayController,this.cbComplete=new PIXI.Observable,this.init()}init(){if(super.init(),this._isDisposed){let e;switch(this._isDisposed=!1,this._type){case o.TYPE.MINOR:e=ResourceManager.Atlas.AtlasEffectsInGame.textures.Minor;break;case o.TYPE.MAJOR:e=ResourceManager.Atlas.AtlasEffectsInGame.textures.Major;break;case o.TYPE.GRAND:e=ResourceManager.Atlas.AtlasEffectsInGame.textures.Grand;break;default:e=ResourceManager.Atlas.AtlasEffectsInGame.textures.Minor}this._image=new PIXI.Sprite(e),this._textCoin=new PIXI.extras.BitmapText("0",{font:"80px "+PreLoaderConfig.FontResource.CoinWin.name}),this._image.anchor.set(.5),this._textCoin.anchor.set(.5),this.addChild(this._image,this._textCoin),this._setPosition()}}_setPosition(){switch(this._type){case o.TYPE.MINOR:this._textCoin.position.set(0,85);break;case o.TYPE.MAJOR:this._textCoin.position.set(0,135);break;case o.TYPE.GRAND:this._textCoin.position.set(0,125);break;default:this._textCoin.position.set(0,100)}}playEffect(e){this.scale.set(0),TweenMax.to(this,1.2,{scaleX:1,scaleY:1,ease:Back.easeOut,onComplete(){Utilities.tweenCoin(this._textCoin,e,o.TIME_TWEEN,this._moveToEndPoint.bind(this))},onCompleteScope:this})}_moveToEndPoint(){this.cbComplete.notifyObservers();const e=this._displayController.getUserSeatByUserID(this._userID);let t={x:640,y:100};e&&(t=e.iconCoin.getGlobalPosition()),TweenMax.to(this,.8,{x:t.x,y:t.y,delay:1,scaleX:0,scaleY:0,ease:Linear.easeNone,onComplete:this.dispose,onCompleteScope:this})}dispose(){super.dispose(),this.parent&&this.parent.removeChild(this),this._image&&(this._image.destroy(),this._image=null),this._textCoin&&(this._textCoin.destroy(),this._textCoin=null)}}o.TIME_TWEEN=2,o.TYPE={MINOR:1,MAJOR:2,GRAND:3};var n=o,a=i(75);t.a=class{constructor(){this.displayController=AppInfo.gameMovie.displayController,this.gameMovie=AppInfo.gameMovie;const e=ParticleConfig.GOLD_BAR_DROP,t=[{framerate:10,loop:!0,textures:ResourceManager.Atlas.AtlasBanCaGeneral.textures.CoinWin}];this._particle=new a.a(e,t)}playWinJackPot(e,t,i){const s=new n(e,t,i);s.playEffect(t),s.position.set(AppInfo.appRealWidth/2,AppInfo.appRealHeight/2);const o=this.displayController.getUserSeatByUserID(i);o&&o.isMe&&o.setCoin(o.coin+t),this._particle.playParticle(640,360),this.gameMovie.layerEffect.addChild(this._particle),this.gameMovie.layerEffect.addChild(s),s.cbComplete.add(this._jackpotMoveToEndPoint,this)}_jackpotMoveToEndPoint(){this.gameMovie.layerEffect.removeChild(this._particle),this._particle.stopParticle()}}}])]);